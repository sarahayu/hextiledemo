import{r as u,R as e}from"./index-47bc6533.js";import{C as S,L as x,V as d,W as p,M as m,m as h,s as b}from"./settings-3f87ae0a.js";import{D as P,m as g}from"./style-86da10a9.js";import{u as D,e as w,a as G,b as L,E as o}from"./electionInterps-d58b56f5.js";import{u as M}from"./useHexTooltip-de310431.js";import{u as k}from"./useHexMouseEvts-e2c6d0a8.js";import{T as v,B as I}from"./tile-layer-0fe13059.js";import{G as f,l as y}from"./index-230f96f1.js";import"./scales-0efcb647.js";class E extends S{renderLayers(){return[new v({data:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",minZoom:2,maxZoom:11,tileSize:256,renderSubLayers:i=>{const{bbox:{west:n,south:t,east:s,north:c}}=i.tile;return new I(i,{data:null,image:i.data,bounds:[n,t,s,c]})}})]}}E.layerName="BaseTerrainLayer";E.defaultProps={...S.defaultProps};function _(){const a=D(),i=k({disabled:a.curOption>1,dataDeag:w,deagKey:"PrecinctRgs"}),n=M({...a,hextiles:!1}),t={data:G,...a,...i},[s,c]=u.useState({longitude:-97.7431,latitude:30.2672,zoom:5,minZoom:3,maxZoom:15,pitch:50.85,bearing:32.58}),C=u.useCallback(({viewId:r,viewState:l})=>{c({one:l,two:l,three:l})},[]);return e.createElement(e.Fragment,null,e.createElement(P,{controller:!0,effects:[x],viewState:s,onViewStateChange:C,getTooltip:n,layerFilter:({layer:r,viewport:l})=>r.id=="slide-terrain"||r.id=="Pop"&&l.id=="one"||r.id=="Votes"&&l.id=="two"||r.id=="Demog"&&l.id=="three",views:[new d({id:"one",x:"0%",y:"0%",height:"50%",width:"50%",controller:!0}),new d({id:"two",x:"50%",y:"0%",height:"50%",width:"50%",controller:!0}),new d({id:"three",x:"25%",y:"50%",height:"50%",width:"50%",controller:!0})]},e.createElement(p,{id:"one"},e.createElement(m,{reuseMaps:!0,preventStyleDiffing:!0,mapLib:h,mapStyle:g})),e.createElement(p,{id:"two"},e.createElement(m,{reuseMaps:!0,preventStyleDiffing:!0,mapLib:h,mapStyle:g})),e.createElement(p,{id:"three"},e.createElement(m,{reuseMaps:!0,preventStyleDiffing:!0,mapLib:h,mapStyle:g})),e.createElement(E,{id:"slide-terrain",...t}),e.createElement(f,{id:"Pop",data:L,opacity:1,stroked:!0,lineWidthScale:100,filled:!0,getFillColor:r=>o.population.interpColor(r.properties["Population per Sqkm"],!1,!1),pickable:!0,autoHighlight:!0}),e.createElement(f,{id:"Votes",data:w,opacity:1,stroked:!0,lineWidthScale:100,filled:!0,getFillColor:r=>o.party.interpColor(r.properties.DemLeadCount,!1,!1),pickable:!0,autoHighlight:!0}),e.createElement(f,{id:"Demog",data:L,opacity:1,stroked:!0,lineWidthScale:100,filled:!0,getFillColor:r=>o.poc.interpColor(r.properties.PoCCount||0,!1,!1),pickable:!0,autoHighlight:!0})),e.createElement(T,{...t}))}function T({curOption:a,setCurOption:i,speedyCounter:n,setSpeedyCounter:t,playing:s,setPlaying:c}){return e.createElement(e.Fragment,null,e.createElement(H,null))}function H({}){const a=u.useRef();return u.useLayoutEffect(()=>{b(a.current).attr("width",400).attr("height",500).call(function(t){t.append("g").call(y.simpleLegend(null,250,20,".2s").title("Population / Km2").size(250).height(20).scale(o.population.colorsStepped).x(400-280).y(500-240))}).call(function(t){t.append("g").call(y.simpleLegend(null,250,20,".2s").title("Percent Democrat Lead").size(250).height(20).scale(o.party.colorsStepped).x(400-280).y(500-170))}).call(function(t){t.append("g").call(y.simpleLegend(null,250,20,".2s").title("Percent PoC").size(250).height(20).scale(o.poc.colorsStepped).x(400-280).y(500-100))})},[]),e.createElement("svg",{className:"legend-area",ref:a})}export{_ as default};
