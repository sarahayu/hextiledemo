import{r as D,R as r}from"./index-47bc6533.js";import{C as f,i as L,S as E,I as u,M as I,m as w,L as R,q as S}from"./settings-3f87ae0a.js";import{W as o,d as y,u as T,w as C}from"./waterInterps-a0e402f2.js";import{C as x}from"./groundwaterGeo-46c54bcf.js";import{u as V}from"./useHexMouseEvts-e2c6d0a8.js";import{u as G}from"./useHexTooltip-f3d2ccc2.js";import"./BaseTerrainLayer-81f4af71.js";import{G as b}from"./GUI-ef54c7ab.js";import{O as h}from"./index-bac40e01.js";import{S as g,P as U,I as v}from"./SolidHexTileLayer-72de8124.js";import{D as H}from"./DeagHexTileLayer-0ebf5e53.js";import{D as O}from"./overlay-27be0fdc.js";import{G as k}from"./index-230f96f1.js";import"./scales-0efcb647.js";import"./selectAll-b7696bd5.js";import"./tile-layer-0fe13059.js";const l=E[0];class m extends f{renderLayers(){const{data:s,speedyCounter:e,visible:i,zoomRange:n,useVsup:a,showAllRings:d}=this.props;return[new g({id:"Groundwater",data:s,thicknessRange:[0,1],getFillColor:t=>a?o.groundwater.interpVsup(t.properties.Groundwater[e],t.properties.GroundwaterVar[e]):o.groundwater.interpColor(t.properties.Groundwater[e]),opacity:1,visible:i,updateTriggers:{getFillColor:[e,a]},zoomRange:n,pickable:!1}),new g({id:"DiffRings",data:s,thicknessRange:[.4,.65],getFillColor:t=>o.difference.interpColor(t.properties.UnmetDemand[l][e]-t.properties.UnmetDemandBaseline[e],!d),getValue:t=>a?o.difference.scaleLinearVar(L(t.properties.UnmetDemandBaselineVar[e],t.properties.UnmetDemandVar[l][e]))*.7+.3:1,visible:i,stroked:!0,extruded:!1,lineJointRounded:!0,getLineColor:[255,255,255,200],getOffset:-.5,extensions:[new U({offset:!0})],opacity:1,updateTriggers:{getFillColor:[e,d],getValue:[e,a]},zoomRange:n,pickable:!1}),new v({id:"ScenarioUnmet",data:s,loaders:[h],mesh:"./assets/drop.obj",getColor:t=>[255,130,35,(a?o.unmetDemand.scaleLinearVar(t.properties.UnmetDemandVar[l][e]):1)*200+55],getValue:t=>o.unmetDemand.scaleLinear(t.properties.UnmetDemand[l][e]),visible:i,sizeScale:3e3,opacity:1,updateTriggers:{getTranslation:[e],getColor:[a]},zoomRange:n,pickable:!1}),new H({...this.props,id:"DeagLayer",data:s,deagData:y,getFillColor:t=>o.unmetDemand.interpColor(t.properties.UnmetDemand[l][e],!1,!1),updateTriggers:{getFillColor:[e]}})]}}m.layerName="MultivariableHextileLayer";m.defaultProps={...f.defaultProps,autoHighlight:!0};const A=Object.keys(C).map(p=>parseInt(p)),c=[7,9];function $(){const[p,s]=D.useState(u.zoom),e=T(),i=V({dataDeag:y,deagKey:"DURgs"}),n=G(e);return r.createElement(r.Fragment,null,r.createElement(I,{reuseMaps:!0,preventStyleDiffing:!0,mapLib:w,mapStyle:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",antialias:!0,initialViewState:u},r.createElement(O,{getTooltip:n,interleaved:!0,effects:[R],onViewStateChange:({viewState:a})=>{s(a.zoom)}},r.createElement(k,{id:"ground",data:x,stroked:!1,getFillColor:[0,0,0,0],beforeId:"landcover"}),r.createElement(m,{id:"slide-waters",data:C,zoomRange:c,visible:!0,...e,...i,beforeId:"place_hamlet"}))),r.createElement(b,{res:S().domain(c).range(A)(p),...e}))}export{$ as default};
