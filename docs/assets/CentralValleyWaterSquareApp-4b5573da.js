import{r as m,R as n}from"./index-47bc6533.js";import{j as T,aT as I,I as L,M as C,m as R,L as U,q as $,n as F,C as k,S as g,s as z,p as h,Q as x,R as b,U as D}from"./settings-3f87ae0a.js";import{u as A,d as V,W as o,C as M}from"./waterInterps-a0e402f2.js";import{u as q}from"./useHexMouseEvts-e2c6d0a8.js";import{S as u}from"./SolidSquareTileLayer-3c2605c0.js";import{D as B,g as G,U as y,a as v}from"./overlay-27be0fdc.js";import"./scales-0efcb647.js";import"./selectAll-b7696bd5.js";const E=await T("square_5_6",function(i){return I(i,l=>l.DemandBaseline)});function J(){const{current:s}=m.useRef(Object.keys(E).map(a=>parseInt(a))),i=A(),l=q({disabled:i.curOption>1,dataDeag:V,deagKey:"DURgs"}),[r,d]=m.useState(L.zoom),p={data:E,...i,...l};return n.createElement(n.Fragment,null,n.createElement(C,{reuseMaps:!0,preventStyleDiffing:!0,mapLib:R,mapStyle:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",antialias:!0,initialViewState:L},n.createElement(B,{interleaved:!0,effects:[U],onViewStateChange:({viewState:a})=>{d(a.zoom)}},n.createElement(w,{id:"slide-waters",...p,zoomRange:[7,9],visible:!0,beforeId:"place_hamlet"}))),n.createElement(H,{...p,res:$().domain([0,1]).range(s)(F().domain([7,9]).range([0,1]).clamp(!0)(r))}))}const f=0;class w extends k{renderLayers(){const{data:i,curOption:l,speedyCounter:r,clickedHexes:d,selectionFinalized:p,visible:a,zoomRange:e}=this.props;return[new u({id:"SquareBorders",data:i,getFillColor:[0,0,0,0],getLineColor:[80,80,80,100],stroked:!0,lineWidthUnits:"pixels",getValue:t=>2,visible:a,extruded:!1,opacity:1,zoomRange:e,offset:[0,0]}),new u({id:"Groundwater",data:i,thicknessRange:[0,1],getFillColor:t=>o.groundwater.interpColor(450),getValue:t=>o.groundwater.scaleLinear(t.properties.Groundwater[r]),opacity:1,visible:a,updateTriggers:{getFillColor:[r]},zoomRange:e,offset:[1,1]}),new u({id:"DifferencePos",data:i,thicknessRange:[0,1],getFillColor:o.difference.interpColor(25,!1),getValue:t=>o.difference.scaleLinear(t.properties.UnmetDemand[g[f]][r]-t.properties.UnmetDemandBaseline[r])>.5?(o.difference.scaleLinear(t.properties.UnmetDemand[g[f]][r]-t.properties.UnmetDemandBaseline[r])-.5)/.5:0,opacity:1,visible:a,updateTriggers:{getValue:[r]},zoomRange:e,offset:[1,-1]}),new u({id:"DifferenceNeg",data:i,thicknessRange:[0,1],getFillColor:o.difference.interpColor(-25,!1),getValue:t=>o.difference.scaleLinear(t.properties.UnmetDemand[g[f]][r]-t.properties.UnmetDemandBaseline[r])<.5?1-o.difference.scaleLinear(t.properties.UnmetDemand[g[f]][r]-t.properties.UnmetDemandBaseline[r])/.5:0,opacity:1,visible:a,updateTriggers:{getValue:[r]},zoomRange:e,offset:[-1,-1]}),new u({id:"UnmetDemand",data:i,thicknessRange:[0,1],getFillColor:[157,157,157],getValue:t=>o.unmetDemand.scaleLinear(t.properties.UnmetDemand[g[f]][r]),opacity:1,visible:a,updateTriggers:{getValue:[r]},zoomRange:e,offset:[-1,1]})]}}w.layerName="MultivariableHextileLayer";w.defaultProps={...k.defaultProps,autoHighlight:!0};function H({curOption:s,setCurOption:i,speedyCounter:l,setSpeedyCounter:r,playing:d,setPlaying:p,res:a}){return n.createElement(n.Fragment,null,n.createElement(M,{counter:l,displayMonth:!1,dataset:"averageDemandBaseline"}),n.createElement(N,{res:a}),n.createElement("div",{className:"styled-input",style:{right:"40%",bottom:"50px"}},n.createElement("button",{onClick:()=>{p(e=>!e)}},d?"Pause":"Play"),n.createElement("input",{onChange:function(e){p(!1),r(parseInt(e.target.value))},onInput:function(e){r(parseInt(e.target.value))},value:l,style:{width:"40vw",display:"block"},type:"range",min:"0",max:"1199",id:"myRange"}),n.createElement("input",{style:{width:"10ch",display:"block"},type:"number",value:l,onChange:function(e){r(parseInt(e.target.value))}})))}function S(s){return v(parseInt(s),y.km)*2}function N({res:s}){const i=m.useRef(),l=m.useRef();return m.useLayoutEffect(()=>{const r=window.innerHeight,d=window.innerWidth,p=z(i.current).attr("width",d).attr("height",r);p.append("g").attr("transform",`translate(${d-60},${r-170})`).call(a=>{a.append("rect").attr("x",-50).attr("y",-50).attr("width",100).attr("height",100).attr("fill","rgba(146, 146, 146, 0.5)")}).call(function(a){l.current=[a.append("text").attr("x",0).attr("y",8).attr("text-anchor","middle").style("font-weight","bold").style("blend-mode","multiply").text(`${h(".2s")(G(s,y.km2))} km²`),a.append("text").attr("x",0).attr("y",55).attr("text-anchor","middle").style("font-size","11px").text(`← ${h(".2s")(v(s,y.km))} km →;`)]}),p.append("g").attr("transform",`translate(200,${r-140})`).call(a=>{a.append("rect").attr("x",-200).attr("y",-140).attr("width",559).attr("height",240).attr("fill","rgba(255, 255, 255, 1)");const e=75;a.append("text").attr("x",e).attr("y",-e-15).style("font-weight","bold").attr("text-anchor","middle").text("Measure Type"),a.append("rect").attr("x",0).attr("y",-e).attr("width",e).attr("height",e).attr("fill","rgba(157, 157, 157, 0.7)"),a.append("rect").attr("x",e).attr("y",-e).attr("width",e).attr("height",e).attr("fill","rgba(57, 79, 132, 0.7)"),a.append("rect").attr("x",e).attr("y",0).attr("width",e).attr("height",e).attr("fill","rgba(0, 104, 55, 0.7)"),a.append("rect").attr("x",0).attr("y",0).attr("width",e).attr("height",e).attr("fill","rgba(165, 0, 38, 0.7)");let t=[],c;[t[1],t[0]]=o.unmetDemandPositive.scaleLinear.domain(),c=x().range([0,e]).domain([t[0],-(t[1]-t[0])/2,t[1]]),a.append("g").attr("transform",`translate(0,${-e})`).call(b(c)),t=[0,30],c=x().range([0,e]).domain([t[0],(t[1]-t[0])/2,t[1]]),a.append("g").attr("transform","translate(0,0)").call(b(c)),[t[1],t[0]]=o.groundwater.scaleLinear.domain(),c=x().range([0,e]).domain([t[0],-(t[1]-t[0])/2,t[1]]),a.append("g").attr("transform",`translate(${e*2},${-e})`).call(D(c)),t=[0,30],c=x().range([0,e]).domain([t[0],(t[1]-t[0])/2,t[1]]),a.append("g").attr("transform",`translate(${e*2},0)`).call(D(c)),a.append("text").attr("x",-20).attr("y",-18).style("font-size",12).attr("text-anchor","end").text("Scenario Unmet (600 TAF/km2)"),a.append("text").attr("x",e*2+20).attr("y",-18).attr("text-anchor","start").style("font-size",12).text("GW (ft)"),a.append("text").attr("x",e*2+20).attr("y",0+12).attr("text-anchor","start").style("font-size",12).text("+ Diff. w/ BL (600 TAF/km2)"),a.append("text").attr("x",-20).attr("y",0+12).attr("text-anchor","end").style("font-size",12).text("- Diff. w/ BL (600 TAF/km2)")})},[]),m.useEffect(()=>{let[r,d]=l.current;r.text(`${h(".2s")(Math.pow(S(s),2))} km²`),d.text(`← ${h(".2s")(S(s))} km →;`)},[s]),n.createElement("svg",{className:"legend-area",ref:i})}export{J as default};
