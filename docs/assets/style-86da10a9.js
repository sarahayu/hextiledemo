import{r as l}from"./index-47bc6533.js";import{W as g,y as E,a1 as S}from"./settings-3f87ae0a.js";const M=typeof window<"u"?l.useLayoutEffect:l.useEffect,O=M;function _(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const P={position:"absolute",zIndex:-1};function C(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(a=>C(a,e));if(k(t)){if(U(t))return e.style=P,l.cloneElement(t,e);if(A(t))return l.cloneElement(t,e)}return t}function k(t){return t&&typeof t=="object"&&"type"in t||!1}function U(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function A(t){const e=t.type;return e&&e.deckGLViewProps}function R(t){if(typeof t=="function")return l.createElement(g,{},t);if(Array.isArray(t))return t.map(R);if(k(t)){if(t.type===l.Fragment)return R(t.props.children);if(_(t.type,g))return t}return t}function D({children:t,layers:e=[],views:a=null}){const s=[],i=[],o={};return l.Children.forEach(R(t),n=>{if(k(n)){const r=n.type;if(_(r,E)){const p=q(r,n.props);i.push(p)}else s.push(n);if(_(r,g)&&r!==g&&n.props.id){const p=new r(n.props);o[p.id]=p}}else n&&s.push(n)}),Object.keys(o).length>0&&(Array.isArray(a)?a.forEach(n=>{o[n.id]=n}):a&&(o[a.id]=a),a=Object.values(o)),e=i.length>0?[...i,...e]:e,{layers:e,children:s,views:a}}function q(t,e){const a={},s=t.defaultProps||{};for(const i in e)s[i]!==e[i]&&(a[i]=e[i]);return new t(a)}function $({children:t,deck:e,ContextProvider:a}){const{viewManager:s}=e||{};if(!s||!s.views.length)return[];const i={},o=s.views[0].id;for(const n of t){let r=o,p=n;k(n)&&_(n.type,g)&&(r=n.props.id||o,p=n.props.children);const d=s.getViewport(r),f=s.getViewState(r);if(d){f.padding=d.padding;const{x:m,y:h,width:y,height:x}=d;p=C(p,{x:m,y:h,width:y,height:x,viewport:d,viewState:f}),i[r]||(i[r]={viewport:d,children:[]}),i[r].children.push(p)}}return Object.keys(i).map(n=>{const{viewport:r,children:p}=i[n],{x:d,y:f,width:m,height:h}=r,y={position:"absolute",left:d,top:f,width:m,height:h},x="view-".concat(n),b=l.createElement("div",{key:x,id:x,style:y},...p);if(a){const v={viewport:r,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:w=>{w.viewId=n,e._onViewStateChange(w)}};return l.createElement(a,{key:x,value:v},b)}return b})}const G={mixBlendMode:null};function N({width:t,height:e,style:a}){const s={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(a)for(const o in a)o in G?i[o]=a[o]:s[o]=a[o];return{containerStyle:s,canvasStyle:i}}function Y(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function V(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function F(t,e,a){const s=new e({...a,_customRender:i=>{t.redrawReason=i;const o=s.getViewports();t.lastRenderedViewports!==o?t.forceUpdate():V(t)}});return s}const I=l.forwardRef((t,e)=>{const[a,s]=l.useState(0),o=l.useRef({control:null,version:a,forceUpdate:()=>s(c=>c+1)}).current,n=l.useRef(null),r=l.useRef(null),p=l.useMemo(()=>D(t),[t.layers,t.views,t.children]);let d=!0;const f=c=>{var u;return d&&t.viewState?(o.viewStateUpdateRequested=c,null):(o.viewStateUpdateRequested=null,(u=t.onViewStateChange)===null||u===void 0?void 0:u.call(t,c))},m=c=>{if(d)o.interactionStateUpdateRequested=c;else{var u;o.interactionStateUpdateRequested=null,(u=t.onInteractionStateChange)===null||u===void 0||u.call(t,c)}},h=l.useMemo(()=>{const c={...t,style:null,width:"100%",height:"100%",parent:n.current,canvas:r.current,layers:p.layers,views:p.views,onViewStateChange:f,onInteractionStateChange:m};return delete c._customRender,o.deck&&o.deck.setProps(c),c},[t]);l.useEffect(()=>{const c=t.Deck||S;return o.deck=F(o,c,{...h,parent:n.current,canvas:r.current}),()=>{var u;return(u=o.deck)===null||u===void 0?void 0:u.finalize()}},[]),O(()=>{V(o);const{viewStateUpdateRequested:c,interactionStateUpdateRequested:u}=o;c&&f(c),u&&m(u)}),l.useImperativeHandle(e,()=>Y(o),[]);const y=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:x,width:b,height:v,id:w,style:z}=t,{containerStyle:j,canvasStyle:L}=l.useMemo(()=>N({width:b,height:v,style:z}),[b,v,z]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===y||o.version!==a){o.lastRenderedViewports=y,o.version=a;const c=$({children:p.children,deck:o.deck,ContextProvider:x}),u=l.createElement("canvas",{key:"canvas",id:w||"deckgl-overlay",ref:r,style:L});o.control=l.createElement("div",{id:"".concat(w||"deckgl","-wrapper"),ref:n,style:j},[u,c])}return d=!1,o.control});I.defaultProps=S.defaultProps;const et=I,H=8,B="OSM Liberty",J={"maputnik:license":"https://github.com/maputnik/osm-liberty/blob/gh-pages/LICENSE.md","maputnik:renderer":"mbgljs","openmaptiles:version":"3.x"},W={openmaptiles:{type:"vector",url:"https://tiles.basemaps.cartocdn.com/vector/carto.streets/v1/tiles.json"},natural_earth_shaded_relief:{maxzoom:6,tileSize:256,tiles:["https://klokantech.github.io/naturalearthtiles/tiles/natural_earth_2_shaded_relief.raster/{z}/{x}/{y}.png"],type:"raster"}},X="https://maputnik.github.io/osm-liberty/sprites/osm-liberty",K="https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",Q=[{id:"boundary_3",type:"line",source:"openmaptiles","source-layer":"boundary",minzoom:8,filter:["all",["in","admin_level",3,4]],layout:{"line-join":"round"},paint:{"line-color":"#9e9cab","line-dasharray":[5,1],"line-width":{base:1,stops:[[4,.4],[5,1],[12,1.8]]}}},{id:"boundary_2_z0-4",type:"line",source:"openmaptiles","source-layer":"boundary",maxzoom:5,filter:["all",["==","admin_level",2],["!has","claimed_by"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(248, 1%, 41%)","line-opacity":{base:1,stops:[[0,.4],[4,1]]},"line-width":{base:1,stops:[[3,1],[5,1.2],[12,3]]}}},{id:"boundary_2_z5-",type:"line",source:"openmaptiles","source-layer":"boundary",minzoom:5,filter:["all",["==","admin_level",2]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(248, 1%, 41%)","line-opacity":{base:1,stops:[[0,.4],[4,1]]},"line-width":{base:1,stops:[[3,1],[5,1.2],[12,3]]}}},{id:"water_name_line",type:"symbol",source:"openmaptiles","source-layer":"waterway",filter:["all",["==","$type","LineString"]],layout:{"text-field":"{name}","text-font":["Roboto Regular"],"text-max-width":5,"text-size":12,"symbol-placement":"line"},paint:{"text-color":"#5d60be","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}},{id:"water_name_point",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["==","$type","Point"],layout:{"text-field":"{name}","text-font":["Roboto Regular"],"text-max-width":5,"text-size":12},paint:{"text-color":"#5d60be","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}},{id:"poi_z16",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",20]],layout:{"icon-image":["match",["get","subclass"],["florist","furniture"],["get","subclass"],["get","class"]],"text-anchor":"top","text-field":"{name}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[0,.6],"text-size":12},paint:{"text-color":"#666","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_z15",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],[">=","rank",7],["<","rank",20]],layout:{"icon-image":["match",["get","subclass"],["florist","furniture"],["get","subclass"],["get","class"]],"text-anchor":"top","text-field":"{name}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[0,.6],"text-size":12},paint:{"text-color":"#666","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_z14",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],[">=","rank",1],["<","rank",7]],layout:{"icon-image":["match",["get","subclass"],["florist","furniture"],["get","subclass"],["get","class"]],"text-anchor":"top","text-field":"{name}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[0,.6],"text-size":12},paint:{"text-color":"#666","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_transit",type:"symbol",source:"openmaptiles","source-layer":"poi",filter:["all",["in","class","bus","rail","airport"]],layout:{"icon-image":"{class}","text-anchor":"left","text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[.9,0],"text-size":12},paint:{"text-color":"#4898ff","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"place_other",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["all",["in","class","hamlet","island","islet","neighbourhood","suburb","quarter"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-letter-spacing":.1,"text-max-width":9,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-transform":"uppercase"},paint:{"text-color":"#633","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_village",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"]],layout:{"text-field":"{name_en}","text-font":["Roboto Regular"],"text-max-width":8,"text-size":{base:1.2,stops:[[10,12],[15,22]]}},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_town",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"]],layout:{"icon-image":{base:1,stops:[[0,"dot_9"],[8,""]]},"text-anchor":"bottom","text-field":"{name_en}","text-font":["Roboto Regular"],"text-max-width":8,"text-offset":[0,0],"text-size":{base:1.2,stops:[[7,12],[11,16]]}},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_city",type:"symbol",source:"openmaptiles","source-layer":"place",minzoom:5,filter:["all",["==","class","city"]],layout:{"icon-image":{base:1,stops:[[0,"dot_9"],[8,""]]},"text-anchor":"bottom","text-field":"{name_en}","text-font":["Roboto Medium"],"text-max-width":8,"text-offset":[0,0],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"icon-allow-overlap":!0,"icon-optional":!1},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"state",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:6,filter:["all",["==","class","state"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-size":{stops:[[4,11],[6,15]]},"text-transform":"uppercase"},paint:{"text-color":"#633","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}},{id:"country_3",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["all",[">=","rank",3],["==","class","country"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":6.25,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1}},{id:"country_2",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["all",["==","rank",2],["==","class","country"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":6.25,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1}},{id:"country_1",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["all",["==","rank",1],["==","class","country"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":6.25,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1}},{id:"continent",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-size":13,"text-transform":"uppercase","text-justify":"center"},paint:{"text-color":"#633","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}}],Z="osm-liberty",ot={version:H,name:B,metadata:J,sources:W,sprite:X,glyphs:K,layers:Q,id:Z};export{et as D,ot as m};
