function LE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const A of s.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&r(A)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var RU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function BU(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var O8={exports:{}},Sr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=Symbol.for("react.element"),zU=Symbol.for("react.portal"),OU=Symbol.for("react.fragment"),FU=Symbol.for("react.strict_mode"),NU=Symbol.for("react.profiler"),UU=Symbol.for("react.provider"),VU=Symbol.for("react.context"),GU=Symbol.for("react.forward_ref"),jU=Symbol.for("react.suspense"),$U=Symbol.for("react.memo"),HU=Symbol.for("react.lazy"),$5=Symbol.iterator;function WU(t){return t===null||typeof t!="object"?null:(t=$5&&t[$5]||t["@@iterator"],typeof t=="function"?t:null)}var F8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N8=Object.assign,U8={};function _d(t,e,n){this.props=t,this.context=e,this.refs=U8,this.updater=n||F8}_d.prototype.isReactComponent={};_d.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_d.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V8(){}V8.prototype=_d.prototype;function DE(t,e,n){this.props=t,this.context=e,this.refs=U8,this.updater=n||F8}var RE=DE.prototype=new V8;RE.constructor=DE;N8(RE,_d.prototype);RE.isPureReactComponent=!0;var H5=Array.isArray,G8=Object.prototype.hasOwnProperty,BE={current:null},j8={key:!0,ref:!0,__self:!0,__source:!0};function $8(t,e,n){var r,i={},s=null,A=null;if(e!=null)for(r in e.ref!==void 0&&(A=e.ref),e.key!==void 0&&(s=""+e.key),e)G8.call(e,r)&&!j8.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var y=Array(a),w=0;w<a;w++)y[w]=arguments[w+2];i.children=y}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nm,type:t,key:s,ref:A,props:i,_owner:BE.current}}function QU(t,e){return{$$typeof:nm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zE(t){return typeof t=="object"&&t!==null&&t.$$typeof===nm}function qU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var W5=/\/+/g;function cx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qU(""+t.key):e.toString(36)}function sy(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var A=!1;if(t===null)A=!0;else switch(s){case"string":case"number":A=!0;break;case"object":switch(t.$$typeof){case nm:case zU:A=!0}}if(A)return A=t,i=i(A),t=r===""?"."+cx(A,0):r,H5(i)?(n="",t!=null&&(n=t.replace(W5,"$&/")+"/"),sy(i,e,n,"",function(w){return w})):i!=null&&(zE(i)&&(i=QU(i,n+(!i.key||A&&A.key===i.key?"":(""+i.key).replace(W5,"$&/")+"/")+t)),e.push(i)),1;if(A=0,r=r===""?".":r+":",H5(t))for(var a=0;a<t.length;a++){s=t[a];var y=r+cx(s,a);A+=sy(s,e,n,y,i)}else if(y=WU(t),typeof y=="function")for(t=y.call(t),a=0;!(s=t.next()).done;)s=s.value,y=r+cx(s,a++),A+=sy(s,e,n,y,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return A}function t1(t,e,n){if(t==null)return t;var r=[],i=0;return sy(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ZU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vo={current:null},oy={transition:null},YU={ReactCurrentDispatcher:Vo,ReactCurrentBatchConfig:oy,ReactCurrentOwner:BE};Sr.Children={map:t1,forEach:function(t,e,n){t1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return t1(t,function(){e++}),e},toArray:function(t){return t1(t,function(e){return e})||[]},only:function(t){if(!zE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Sr.Component=_d;Sr.Fragment=OU;Sr.Profiler=NU;Sr.PureComponent=DE;Sr.StrictMode=FU;Sr.Suspense=jU;Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YU;Sr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=N8({},t.props),i=t.key,s=t.ref,A=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,A=BE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(y in e)G8.call(e,y)&&!j8.hasOwnProperty(y)&&(r[y]=e[y]===void 0&&a!==void 0?a[y]:e[y])}var y=arguments.length-2;if(y===1)r.children=n;else if(1<y){a=Array(y);for(var w=0;w<y;w++)a[w]=arguments[w+2];r.children=a}return{$$typeof:nm,type:t.type,key:i,ref:s,props:r,_owner:A}};Sr.createContext=function(t){return t={$$typeof:VU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UU,_context:t},t.Consumer=t};Sr.createElement=$8;Sr.createFactory=function(t){var e=$8.bind(null,t);return e.type=t,e};Sr.createRef=function(){return{current:null}};Sr.forwardRef=function(t){return{$$typeof:GU,render:t}};Sr.isValidElement=zE;Sr.lazy=function(t){return{$$typeof:HU,_payload:{_status:-1,_result:t},_init:ZU}};Sr.memo=function(t,e){return{$$typeof:$U,type:t,compare:e===void 0?null:e}};Sr.startTransition=function(t){var e=oy.transition;oy.transition={};try{t()}finally{oy.transition=e}};Sr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Sr.useCallback=function(t,e){return Vo.current.useCallback(t,e)};Sr.useContext=function(t){return Vo.current.useContext(t)};Sr.useDebugValue=function(){};Sr.useDeferredValue=function(t){return Vo.current.useDeferredValue(t)};Sr.useEffect=function(t,e){return Vo.current.useEffect(t,e)};Sr.useId=function(){return Vo.current.useId()};Sr.useImperativeHandle=function(t,e,n){return Vo.current.useImperativeHandle(t,e,n)};Sr.useInsertionEffect=function(t,e){return Vo.current.useInsertionEffect(t,e)};Sr.useLayoutEffect=function(t,e){return Vo.current.useLayoutEffect(t,e)};Sr.useMemo=function(t,e){return Vo.current.useMemo(t,e)};Sr.useReducer=function(t,e,n){return Vo.current.useReducer(t,e,n)};Sr.useRef=function(t){return Vo.current.useRef(t)};Sr.useState=function(t){return Vo.current.useState(t)};Sr.useSyncExternalStore=function(t,e,n){return Vo.current.useSyncExternalStore(t,e,n)};Sr.useTransition=function(){return Vo.current.useTransition()};Sr.version="18.2.0";O8.exports=Sr;var rt=O8.exports;const Ir=tm(rt),XU=LE({__proto__:null,default:Ir},[rt]);var H8={exports:{}},Ua={},W8={exports:{}},Q8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(xt,Tt){var Xt=xt.length;xt.push(Tt);e:for(;0<Xt;){var Mn=Xt-1>>>1,Cn=xt[Mn];if(0<i(Cn,Tt))xt[Mn]=Tt,xt[Xt]=Cn,Xt=Mn;else break e}}function n(xt){return xt.length===0?null:xt[0]}function r(xt){if(xt.length===0)return null;var Tt=xt[0],Xt=xt.pop();if(Xt!==Tt){xt[0]=Xt;e:for(var Mn=0,Cn=xt.length,vr=Cn>>>1;Mn<vr;){var Gn=2*(Mn+1)-1,Jn=xt[Gn],ir=Gn+1,jn=xt[ir];if(0>i(Jn,Xt))ir<Cn&&0>i(jn,Jn)?(xt[Mn]=jn,xt[ir]=Xt,Mn=ir):(xt[Mn]=Jn,xt[Gn]=Xt,Mn=Gn);else if(ir<Cn&&0>i(jn,Xt))xt[Mn]=jn,xt[ir]=Xt,Mn=ir;else break e}}return Tt}function i(xt,Tt){var Xt=xt.sortIndex-Tt.sortIndex;return Xt!==0?Xt:xt.id-Tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var A=Date,a=A.now();t.unstable_now=function(){return A.now()-a}}var y=[],w=[],M=1,C=null,k=3,U=!1,H=!1,q=!1,se=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(xt){for(var Tt=n(w);Tt!==null;){if(Tt.callback===null)r(w);else if(Tt.startTime<=xt)r(w),Tt.sortIndex=Tt.expirationTime,e(y,Tt);else break;Tt=n(w)}}function de(xt){if(q=!1,re(xt),!H)if(n(y)!==null)H=!0,Mt(_e);else{var Tt=n(w);Tt!==null&&Qt(de,Tt.startTime-xt)}}function _e(xt,Tt){H=!1,q&&(q=!1,Z(We),We=-1),U=!0;var Xt=k;try{for(re(Tt),C=n(y);C!==null&&(!(C.expirationTime>Tt)||xt&&!Oe());){var Mn=C.callback;if(typeof Mn=="function"){C.callback=null,k=C.priorityLevel;var Cn=Mn(C.expirationTime<=Tt);Tt=t.unstable_now(),typeof Cn=="function"?C.callback=Cn:C===n(y)&&r(y),re(Tt)}else r(y);C=n(y)}if(C!==null)var vr=!0;else{var Gn=n(w);Gn!==null&&Qt(de,Gn.startTime-Tt),vr=!1}return vr}finally{C=null,k=Xt,U=!1}}var fe=!1,Fe=null,We=-1,qe=5,Ke=-1;function Oe(){return!(t.unstable_now()-Ke<qe)}function tt(){if(Fe!==null){var xt=t.unstable_now();Ke=xt;var Tt=!0;try{Tt=Fe(!0,xt)}finally{Tt?Ye():(fe=!1,Fe=null)}}else fe=!1}var Ye;if(typeof J=="function")Ye=function(){J(tt)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,en=pt.port2;pt.port1.onmessage=tt,Ye=function(){en.postMessage(null)}}else Ye=function(){se(tt,0)};function Mt(xt){Fe=xt,fe||(fe=!0,Ye())}function Qt(xt,Tt){We=se(function(){xt(t.unstable_now())},Tt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(xt){xt.callback=null},t.unstable_continueExecution=function(){H||U||(H=!0,Mt(_e))},t.unstable_forceFrameRate=function(xt){0>xt||125<xt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):qe=0<xt?Math.floor(1e3/xt):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return n(y)},t.unstable_next=function(xt){switch(k){case 1:case 2:case 3:var Tt=3;break;default:Tt=k}var Xt=k;k=Tt;try{return xt()}finally{k=Xt}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(xt,Tt){switch(xt){case 1:case 2:case 3:case 4:case 5:break;default:xt=3}var Xt=k;k=xt;try{return Tt()}finally{k=Xt}},t.unstable_scheduleCallback=function(xt,Tt,Xt){var Mn=t.unstable_now();switch(typeof Xt=="object"&&Xt!==null?(Xt=Xt.delay,Xt=typeof Xt=="number"&&0<Xt?Mn+Xt:Mn):Xt=Mn,xt){case 1:var Cn=-1;break;case 2:Cn=250;break;case 5:Cn=1073741823;break;case 4:Cn=1e4;break;default:Cn=5e3}return Cn=Xt+Cn,xt={id:M++,callback:Tt,priorityLevel:xt,startTime:Xt,expirationTime:Cn,sortIndex:-1},Xt>Mn?(xt.sortIndex=Xt,e(w,xt),n(y)===null&&xt===n(w)&&(q?(Z(We),We=-1):q=!0,Qt(de,Xt-Mn))):(xt.sortIndex=Cn,e(y,xt),H||U||(H=!0,Mt(_e))),xt},t.unstable_shouldYield=Oe,t.unstable_wrapCallback=function(xt){var Tt=k;return function(){var Xt=k;k=Tt;try{return xt.apply(this,arguments)}finally{k=Xt}}}})(Q8);W8.exports=Q8;var KU=W8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q8=rt,Na=KU;function Ot(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z8=new Set,ug={};function h0(t,e){Wf(t,e),Wf(t+"Capture",e)}function Wf(t,e){for(ug[t]=e,t=0;t<e.length;t++)Z8.add(e[t])}var Gu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ob=Object.prototype.hasOwnProperty,JU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q5={},q5={};function e9(t){return ob.call(q5,t)?!0:ob.call(Q5,t)?!1:JU.test(t)?q5[t]=!0:(Q5[t]=!0,!1)}function t9(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function n9(t,e,n,r){if(e===null||typeof e>"u"||t9(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Go(t,e,n,r,i,s,A){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=A}var Gs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gs[t]=new Go(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gs[e]=new Go(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gs[t]=new Go(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gs[t]=new Go(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gs[t]=new Go(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gs[t]=new Go(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gs[t]=new Go(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gs[t]=new Go(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gs[t]=new Go(t,5,!1,t.toLowerCase(),null,!1,!1)});var OE=/[\-:]([a-z])/g;function FE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(OE,FE);Gs[e]=new Go(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(OE,FE);Gs[e]=new Go(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(OE,FE);Gs[e]=new Go(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gs[t]=new Go(t,1,!1,t.toLowerCase(),null,!1,!1)});Gs.xlinkHref=new Go("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gs[t]=new Go(t,1,!1,t.toLowerCase(),null,!0,!0)});function NE(t,e,n,r){var i=Gs.hasOwnProperty(e)?Gs[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n9(e,n,i,r)&&(n=null),r||i===null?e9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tc=q8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,n1=Symbol.for("react.element"),K0=Symbol.for("react.portal"),J0=Symbol.for("react.fragment"),UE=Symbol.for("react.strict_mode"),ab=Symbol.for("react.profiler"),Y8=Symbol.for("react.provider"),X8=Symbol.for("react.context"),VE=Symbol.for("react.forward_ref"),lb=Symbol.for("react.suspense"),Ab=Symbol.for("react.suspense_list"),GE=Symbol.for("react.memo"),kc=Symbol.for("react.lazy"),K8=Symbol.for("react.offscreen"),Z5=Symbol.iterator;function Yd(t){return t===null||typeof t!="object"?null:(t=Z5&&t[Z5]||t["@@iterator"],typeof t=="function"?t:null)}var Ri=Object.assign,hx;function Lp(t){if(hx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hx=e&&e[1]||""}return`
`+hx+t}var fx=!1;function dx(t,e){if(!t||fx)return"";fx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(w){var r=w}Reflect.construct(t,[],e)}else{try{e.call()}catch(w){r=w}t.call(e.prototype)}else{try{throw Error()}catch(w){r=w}t()}}catch(w){if(w&&r&&typeof w.stack=="string"){for(var i=w.stack.split(`
`),s=r.stack.split(`
`),A=i.length-1,a=s.length-1;1<=A&&0<=a&&i[A]!==s[a];)a--;for(;1<=A&&0<=a;A--,a--)if(i[A]!==s[a]){if(A!==1||a!==1)do if(A--,a--,0>a||i[A]!==s[a]){var y=`
`+i[A].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=A&&0<=a);break}}}finally{fx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lp(t):""}function r9(t){switch(t.tag){case 5:return Lp(t.type);case 16:return Lp("Lazy");case 13:return Lp("Suspense");case 19:return Lp("SuspenseList");case 0:case 2:case 15:return t=dx(t.type,!1),t;case 11:return t=dx(t.type.render,!1),t;case 1:return t=dx(t.type,!0),t;default:return""}}function ub(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J0:return"Fragment";case K0:return"Portal";case ab:return"Profiler";case UE:return"StrictMode";case lb:return"Suspense";case Ab:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X8:return(t.displayName||"Context")+".Consumer";case Y8:return(t._context.displayName||"Context")+".Provider";case VE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case GE:return e=t.displayName||null,e!==null?e:ub(t.type)||"Memo";case kc:e=t._payload,t=t._init;try{return ub(t(e))}catch{}}return null}function i9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ub(e);case 8:return e===UE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nh(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function J8(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s9(t){var e=J8(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(A){r=""+A,s.call(this,A)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(A){r=""+A},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function r1(t){t._valueTracker||(t._valueTracker=s9(t))}function eL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=J8(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cb(t,e){var n=e.checked;return Ri({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Y5(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=nh(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tL(t,e){e=e.checked,e!=null&&NE(t,"checked",e,!1)}function hb(t,e){tL(t,e);var n=nh(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fb(t,e.type,n):e.hasOwnProperty("defaultValue")&&fb(t,e.type,nh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fb(t,e,n){(e!=="number"||Gy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dp=Array.isArray;function Pf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+nh(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function db(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ot(91));return Ri({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function K5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ot(92));if(Dp(n)){if(1<n.length)throw Error(Ot(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nh(n)}}function nL(t,e){var n=nh(e.value),r=nh(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function J5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var i1,iL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(i1=i1||document.createElement("div"),i1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=i1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cg(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o9=["Webkit","ms","Moz","O"];Object.keys(Wp).forEach(function(t){o9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wp[e]=Wp[t]})});function sL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wp.hasOwnProperty(t)&&Wp[t]?(""+e).trim():e+"px"}function oL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var a9=Ri({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gb(t,e){if(e){if(a9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ot(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ot(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ot(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ot(62))}}function mb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yb=null;function jE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _b=null,If=null,kf=null;function eM(t){if(t=sm(t)){if(typeof _b!="function")throw Error(Ot(280));var e=t.stateNode;e&&(e=S2(e),_b(t.stateNode,t.type,e))}}function aL(t){If?kf?kf.push(t):kf=[t]:If=t}function lL(){if(If){var t=If,e=kf;if(kf=If=null,eM(t),e)for(t=0;t<e.length;t++)eM(e[t])}}function AL(t,e){return t(e)}function uL(){}var px=!1;function cL(t,e,n){if(px)return t(e,n);px=!0;try{return AL(t,e,n)}finally{px=!1,(If!==null||kf!==null)&&(uL(),lL())}}function hg(t,e){var n=t.stateNode;if(n===null)return null;var r=S2(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ot(231,e,typeof n));return n}var vb=!1;if(Gu)try{var Xd={};Object.defineProperty(Xd,"passive",{get:function(){vb=!0}}),window.addEventListener("test",Xd,Xd),window.removeEventListener("test",Xd,Xd)}catch{vb=!1}function l9(t,e,n,r,i,s,A,a,y){var w=Array.prototype.slice.call(arguments,3);try{e.apply(n,w)}catch(M){this.onError(M)}}var Qp=!1,jy=null,$y=!1,xb=null,A9={onError:function(t){Qp=!0,jy=t}};function u9(t,e,n,r,i,s,A,a,y){Qp=!1,jy=null,l9.apply(A9,arguments)}function c9(t,e,n,r,i,s,A,a,y){if(u9.apply(this,arguments),Qp){if(Qp){var w=jy;Qp=!1,jy=null}else throw Error(Ot(198));$y||($y=!0,xb=w)}}function f0(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tM(t){if(f0(t)!==t)throw Error(Ot(188))}function h9(t){var e=t.alternate;if(!e){if(e=f0(t),e===null)throw Error(Ot(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tM(i),t;if(s===r)return tM(i),e;s=s.sibling}throw Error(Ot(188))}if(n.return!==r.return)n=i,r=s;else{for(var A=!1,a=i.child;a;){if(a===n){A=!0,n=i,r=s;break}if(a===r){A=!0,r=i,n=s;break}a=a.sibling}if(!A){for(a=s.child;a;){if(a===n){A=!0,n=s,r=i;break}if(a===r){A=!0,r=s,n=i;break}a=a.sibling}if(!A)throw Error(Ot(189))}}if(n.alternate!==r)throw Error(Ot(190))}if(n.tag!==3)throw Error(Ot(188));return n.stateNode.current===n?t:e}function fL(t){return t=h9(t),t!==null?dL(t):null}function dL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dL(t);if(e!==null)return e;t=t.sibling}return null}var pL=Na.unstable_scheduleCallback,nM=Na.unstable_cancelCallback,f9=Na.unstable_shouldYield,d9=Na.unstable_requestPaint,Zi=Na.unstable_now,p9=Na.unstable_getCurrentPriorityLevel,$E=Na.unstable_ImmediatePriority,gL=Na.unstable_UserBlockingPriority,Hy=Na.unstable_NormalPriority,g9=Na.unstable_LowPriority,mL=Na.unstable_IdlePriority,w2=null,NA=null;function m9(t){if(NA&&typeof NA.onCommitFiberRoot=="function")try{NA.onCommitFiberRoot(w2,t,void 0,(t.current.flags&128)===128)}catch{}}var rA=Math.clz32?Math.clz32:v9,y9=Math.log,_9=Math.LN2;function v9(t){return t>>>=0,t===0?32:31-(y9(t)/_9|0)|0}var s1=64,o1=4194304;function Rp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,A=n&268435455;if(A!==0){var a=A&~i;a!==0?r=Rp(a):(s&=A,s!==0&&(r=Rp(s)))}else A=n&~i,A!==0?r=Rp(A):s!==0&&(r=Rp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rA(e),i=1<<n,r|=t[n],e&=~i;return r}function x9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w9(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var A=31-rA(s),a=1<<A,y=i[A];y===-1?(!(a&n)||a&r)&&(i[A]=x9(a,e)):y<=e&&(t.expiredLanes|=a),s&=~a}}function wb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yL(){var t=s1;return s1<<=1,!(s1&4194240)&&(s1=64),t}function gx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rA(e),t[e]=n}function b9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rA(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function HE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rA(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Hr=0;function _L(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vL,WE,xL,wL,bL,bb=!1,a1=[],jc=null,$c=null,Hc=null,fg=new Map,dg=new Map,Rc=[],E9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rM(t,e){switch(t){case"focusin":case"focusout":jc=null;break;case"dragenter":case"dragleave":$c=null;break;case"mouseover":case"mouseout":Hc=null;break;case"pointerover":case"pointerout":fg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dg.delete(e.pointerId)}}function Kd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sm(e),e!==null&&WE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function T9(t,e,n,r,i){switch(e){case"focusin":return jc=Kd(jc,t,e,n,r,i),!0;case"dragenter":return $c=Kd($c,t,e,n,r,i),!0;case"mouseover":return Hc=Kd(Hc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fg.set(s,Kd(fg.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,dg.set(s,Kd(dg.get(s)||null,t,e,n,r,i)),!0}return!1}function EL(t){var e=Lh(t.target);if(e!==null){var n=f0(e);if(n!==null){if(e=n.tag,e===13){if(e=hL(n),e!==null){t.blockedOn=e,bL(t.priority,function(){xL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ay(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Eb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yb=r,n.target.dispatchEvent(r),yb=null}else return e=sm(n),e!==null&&WE(e),t.blockedOn=n,!1;e.shift()}return!0}function iM(t,e,n){ay(t)&&n.delete(e)}function S9(){bb=!1,jc!==null&&ay(jc)&&(jc=null),$c!==null&&ay($c)&&($c=null),Hc!==null&&ay(Hc)&&(Hc=null),fg.forEach(iM),dg.forEach(iM)}function Jd(t,e){t.blockedOn===e&&(t.blockedOn=null,bb||(bb=!0,Na.unstable_scheduleCallback(Na.unstable_NormalPriority,S9)))}function pg(t){function e(i){return Jd(i,t)}if(0<a1.length){Jd(a1[0],t);for(var n=1;n<a1.length;n++){var r=a1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jc!==null&&Jd(jc,t),$c!==null&&Jd($c,t),Hc!==null&&Jd(Hc,t),fg.forEach(e),dg.forEach(e),n=0;n<Rc.length;n++)r=Rc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rc.length&&(n=Rc[0],n.blockedOn===null);)EL(n),n.blockedOn===null&&Rc.shift()}var Lf=tc.ReactCurrentBatchConfig,Qy=!0;function M9(t,e,n,r){var i=Hr,s=Lf.transition;Lf.transition=null;try{Hr=1,QE(t,e,n,r)}finally{Hr=i,Lf.transition=s}}function C9(t,e,n,r){var i=Hr,s=Lf.transition;Lf.transition=null;try{Hr=4,QE(t,e,n,r)}finally{Hr=i,Lf.transition=s}}function QE(t,e,n,r){if(Qy){var i=Eb(t,e,n,r);if(i===null)Sx(t,e,r,qy,n),rM(t,r);else if(T9(i,t,e,n,r))r.stopPropagation();else if(rM(t,r),e&4&&-1<E9.indexOf(t)){for(;i!==null;){var s=sm(i);if(s!==null&&vL(s),s=Eb(t,e,n,r),s===null&&Sx(t,e,r,qy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Sx(t,e,r,null,n)}}var qy=null;function Eb(t,e,n,r){if(qy=null,t=jE(r),t=Lh(t),t!==null)if(e=f0(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qy=t,null}function TL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p9()){case $E:return 1;case gL:return 4;case Hy:case g9:return 16;case mL:return 536870912;default:return 16}default:return 16}}var Oc=null,qE=null,ly=null;function SL(){if(ly)return ly;var t,e=qE,n=e.length,r,i="value"in Oc?Oc.value:Oc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var A=n-t;for(r=1;r<=A&&e[n-r]===i[s-r];r++);return ly=i.slice(t,1<r?1-r:void 0)}function Ay(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function l1(){return!0}function sM(){return!1}function Va(t){function e(n,r,i,s,A){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=A,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?l1:sM,this.isPropagationStopped=sM,this}return Ri(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=l1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=l1)},persist:function(){},isPersistent:l1}),e}var vd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ZE=Va(vd),im=Ri({},vd,{view:0,detail:0}),P9=Va(im),mx,yx,ep,b2=Ri({},im,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ep&&(ep&&t.type==="mousemove"?(mx=t.screenX-ep.screenX,yx=t.screenY-ep.screenY):yx=mx=0,ep=t),mx)},movementY:function(t){return"movementY"in t?t.movementY:yx}}),oM=Va(b2),I9=Ri({},b2,{dataTransfer:0}),k9=Va(I9),L9=Ri({},im,{relatedTarget:0}),_x=Va(L9),D9=Ri({},vd,{animationName:0,elapsedTime:0,pseudoElement:0}),R9=Va(D9),B9=Ri({},vd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),z9=Va(B9),O9=Ri({},vd,{data:0}),aM=Va(O9),F9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U9[t])?!!e[t]:!1}function YE(){return V9}var G9=Ri({},im,{key:function(t){if(t.key){var e=F9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ay(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YE,charCode:function(t){return t.type==="keypress"?Ay(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ay(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),j9=Va(G9),$9=Ri({},b2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lM=Va($9),H9=Ri({},im,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YE}),W9=Va(H9),Q9=Ri({},vd,{propertyName:0,elapsedTime:0,pseudoElement:0}),q9=Va(Q9),Z9=Ri({},b2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y9=Va(Z9),X9=[9,13,27,32],XE=Gu&&"CompositionEvent"in window,qp=null;Gu&&"documentMode"in document&&(qp=document.documentMode);var K9=Gu&&"TextEvent"in window&&!qp,ML=Gu&&(!XE||qp&&8<qp&&11>=qp),AM=String.fromCharCode(32),uM=!1;function CL(t,e){switch(t){case"keyup":return X9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ef=!1;function J9(t,e){switch(t){case"compositionend":return PL(e);case"keypress":return e.which!==32?null:(uM=!0,AM);case"textInput":return t=e.data,t===AM&&uM?null:t;default:return null}}function eV(t,e){if(ef)return t==="compositionend"||!XE&&CL(t,e)?(t=SL(),ly=qE=Oc=null,ef=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ML&&e.locale!=="ko"?null:e.data;default:return null}}var tV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tV[t.type]:e==="textarea"}function IL(t,e,n,r){aL(r),e=Zy(e,"onChange"),0<e.length&&(n=new ZE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zp=null,gg=null;function nV(t){VL(t,0)}function E2(t){var e=rf(t);if(eL(e))return t}function rV(t,e){if(t==="change")return e}var kL=!1;if(Gu){var vx;if(Gu){var xx="oninput"in document;if(!xx){var hM=document.createElement("div");hM.setAttribute("oninput","return;"),xx=typeof hM.oninput=="function"}vx=xx}else vx=!1;kL=vx&&(!document.documentMode||9<document.documentMode)}function fM(){Zp&&(Zp.detachEvent("onpropertychange",LL),gg=Zp=null)}function LL(t){if(t.propertyName==="value"&&E2(gg)){var e=[];IL(e,gg,t,jE(t)),cL(nV,e)}}function iV(t,e,n){t==="focusin"?(fM(),Zp=e,gg=n,Zp.attachEvent("onpropertychange",LL)):t==="focusout"&&fM()}function sV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return E2(gg)}function oV(t,e){if(t==="click")return E2(e)}function aV(t,e){if(t==="input"||t==="change")return E2(e)}function lV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oA=typeof Object.is=="function"?Object.is:lV;function mg(t,e){if(oA(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ob.call(e,i)||!oA(t[i],e[i]))return!1}return!0}function dM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pM(t,e){var n=dM(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dM(n)}}function DL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RL(){for(var t=window,e=Gy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gy(t.document)}return e}function KE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AV(t){var e=RL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DL(n.ownerDocument.documentElement,n)){if(r!==null&&KE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=pM(n,s);var A=pM(n,r);i&&A&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==A.node||t.focusOffset!==A.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(A.node,A.offset)):(e.setEnd(A.node,A.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uV=Gu&&"documentMode"in document&&11>=document.documentMode,tf=null,Tb=null,Yp=null,Sb=!1;function gM(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sb||tf==null||tf!==Gy(r)||(r=tf,"selectionStart"in r&&KE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yp&&mg(Yp,r)||(Yp=r,r=Zy(Tb,"onSelect"),0<r.length&&(e=new ZE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tf)))}function A1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nf={animationend:A1("Animation","AnimationEnd"),animationiteration:A1("Animation","AnimationIteration"),animationstart:A1("Animation","AnimationStart"),transitionend:A1("Transition","TransitionEnd")},wx={},BL={};Gu&&(BL=document.createElement("div").style,"AnimationEvent"in window||(delete nf.animationend.animation,delete nf.animationiteration.animation,delete nf.animationstart.animation),"TransitionEvent"in window||delete nf.transitionend.transition);function T2(t){if(wx[t])return wx[t];if(!nf[t])return t;var e=nf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BL)return wx[t]=e[n];return t}var zL=T2("animationend"),OL=T2("animationiteration"),FL=T2("animationstart"),NL=T2("transitionend"),UL=new Map,mM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ah(t,e){UL.set(t,e),h0(e,[t])}for(var bx=0;bx<mM.length;bx++){var Ex=mM[bx],cV=Ex.toLowerCase(),hV=Ex[0].toUpperCase()+Ex.slice(1);Ah(cV,"on"+hV)}Ah(zL,"onAnimationEnd");Ah(OL,"onAnimationIteration");Ah(FL,"onAnimationStart");Ah("dblclick","onDoubleClick");Ah("focusin","onFocus");Ah("focusout","onBlur");Ah(NL,"onTransitionEnd");Wf("onMouseEnter",["mouseout","mouseover"]);Wf("onMouseLeave",["mouseout","mouseover"]);Wf("onPointerEnter",["pointerout","pointerover"]);Wf("onPointerLeave",["pointerout","pointerover"]);h0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));h0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));h0("onBeforeInput",["compositionend","keypress","textInput","paste"]);h0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));h0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));h0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bp));function yM(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,c9(r,e,void 0,t),t.currentTarget=null}function VL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var A=r.length-1;0<=A;A--){var a=r[A],y=a.instance,w=a.currentTarget;if(a=a.listener,y!==s&&i.isPropagationStopped())break e;yM(i,a,w),s=y}else for(A=0;A<r.length;A++){if(a=r[A],y=a.instance,w=a.currentTarget,a=a.listener,y!==s&&i.isPropagationStopped())break e;yM(i,a,w),s=y}}}if($y)throw t=xb,$y=!1,xb=null,t}function pi(t,e){var n=e[kb];n===void 0&&(n=e[kb]=new Set);var r=t+"__bubble";n.has(r)||(GL(e,t,2,!1),n.add(r))}function Tx(t,e,n){var r=0;e&&(r|=4),GL(n,t,r,e)}var u1="_reactListening"+Math.random().toString(36).slice(2);function yg(t){if(!t[u1]){t[u1]=!0,Z8.forEach(function(n){n!=="selectionchange"&&(fV.has(n)||Tx(n,!1,t),Tx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[u1]||(e[u1]=!0,Tx("selectionchange",!1,e))}}function GL(t,e,n,r){switch(TL(e)){case 1:var i=M9;break;case 4:i=C9;break;default:i=QE}n=i.bind(null,e,n,t),i=void 0,!vb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Sx(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var A=r.tag;if(A===3||A===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(A===4)for(A=r.return;A!==null;){var y=A.tag;if((y===3||y===4)&&(y=A.stateNode.containerInfo,y===i||y.nodeType===8&&y.parentNode===i))return;A=A.return}for(;a!==null;){if(A=Lh(a),A===null)return;if(y=A.tag,y===5||y===6){r=s=A;continue e}a=a.parentNode}}r=r.return}cL(function(){var w=s,M=jE(n),C=[];e:{var k=UL.get(t);if(k!==void 0){var U=ZE,H=t;switch(t){case"keypress":if(Ay(n)===0)break e;case"keydown":case"keyup":U=j9;break;case"focusin":H="focus",U=_x;break;case"focusout":H="blur",U=_x;break;case"beforeblur":case"afterblur":U=_x;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=oM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=k9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=W9;break;case zL:case OL:case FL:U=R9;break;case NL:U=q9;break;case"scroll":U=P9;break;case"wheel":U=Y9;break;case"copy":case"cut":case"paste":U=z9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=lM}var q=(e&4)!==0,se=!q&&t==="scroll",Z=q?k!==null?k+"Capture":null:k;q=[];for(var J=w,re;J!==null;){re=J;var de=re.stateNode;if(re.tag===5&&de!==null&&(re=de,Z!==null&&(de=hg(J,Z),de!=null&&q.push(_g(J,de,re)))),se)break;J=J.return}0<q.length&&(k=new U(k,H,null,n,M),C.push({event:k,listeners:q}))}}if(!(e&7)){e:{if(k=t==="mouseover"||t==="pointerover",U=t==="mouseout"||t==="pointerout",k&&n!==yb&&(H=n.relatedTarget||n.fromElement)&&(Lh(H)||H[ju]))break e;if((U||k)&&(k=M.window===M?M:(k=M.ownerDocument)?k.defaultView||k.parentWindow:window,U?(H=n.relatedTarget||n.toElement,U=w,H=H?Lh(H):null,H!==null&&(se=f0(H),H!==se||H.tag!==5&&H.tag!==6)&&(H=null)):(U=null,H=w),U!==H)){if(q=oM,de="onMouseLeave",Z="onMouseEnter",J="mouse",(t==="pointerout"||t==="pointerover")&&(q=lM,de="onPointerLeave",Z="onPointerEnter",J="pointer"),se=U==null?k:rf(U),re=H==null?k:rf(H),k=new q(de,J+"leave",U,n,M),k.target=se,k.relatedTarget=re,de=null,Lh(M)===w&&(q=new q(Z,J+"enter",H,n,M),q.target=re,q.relatedTarget=se,de=q),se=de,U&&H)t:{for(q=U,Z=H,J=0,re=q;re;re=O0(re))J++;for(re=0,de=Z;de;de=O0(de))re++;for(;0<J-re;)q=O0(q),J--;for(;0<re-J;)Z=O0(Z),re--;for(;J--;){if(q===Z||Z!==null&&q===Z.alternate)break t;q=O0(q),Z=O0(Z)}q=null}else q=null;U!==null&&_M(C,k,U,q,!1),H!==null&&se!==null&&_M(C,se,H,q,!0)}}e:{if(k=w?rf(w):window,U=k.nodeName&&k.nodeName.toLowerCase(),U==="select"||U==="input"&&k.type==="file")var _e=rV;else if(cM(k))if(kL)_e=aV;else{_e=sV;var fe=iV}else(U=k.nodeName)&&U.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(_e=oV);if(_e&&(_e=_e(t,w))){IL(C,_e,n,M);break e}fe&&fe(t,k,w),t==="focusout"&&(fe=k._wrapperState)&&fe.controlled&&k.type==="number"&&fb(k,"number",k.value)}switch(fe=w?rf(w):window,t){case"focusin":(cM(fe)||fe.contentEditable==="true")&&(tf=fe,Tb=w,Yp=null);break;case"focusout":Yp=Tb=tf=null;break;case"mousedown":Sb=!0;break;case"contextmenu":case"mouseup":case"dragend":Sb=!1,gM(C,n,M);break;case"selectionchange":if(uV)break;case"keydown":case"keyup":gM(C,n,M)}var Fe;if(XE)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else ef?CL(t,n)&&(We="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(We="onCompositionStart");We&&(ML&&n.locale!=="ko"&&(ef||We!=="onCompositionStart"?We==="onCompositionEnd"&&ef&&(Fe=SL()):(Oc=M,qE="value"in Oc?Oc.value:Oc.textContent,ef=!0)),fe=Zy(w,We),0<fe.length&&(We=new aM(We,t,null,n,M),C.push({event:We,listeners:fe}),Fe?We.data=Fe:(Fe=PL(n),Fe!==null&&(We.data=Fe)))),(Fe=K9?J9(t,n):eV(t,n))&&(w=Zy(w,"onBeforeInput"),0<w.length&&(M=new aM("onBeforeInput","beforeinput",null,n,M),C.push({event:M,listeners:w}),M.data=Fe))}VL(C,e)})}function _g(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=hg(t,n),s!=null&&r.unshift(_g(t,s,i)),s=hg(t,e),s!=null&&r.push(_g(t,s,i))),t=t.return}return r}function O0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _M(t,e,n,r,i){for(var s=e._reactName,A=[];n!==null&&n!==r;){var a=n,y=a.alternate,w=a.stateNode;if(y!==null&&y===r)break;a.tag===5&&w!==null&&(a=w,i?(y=hg(n,s),y!=null&&A.unshift(_g(n,y,a))):i||(y=hg(n,s),y!=null&&A.push(_g(n,y,a)))),n=n.return}A.length!==0&&t.push({event:e,listeners:A})}var dV=/\r\n?/g,pV=/\u0000|\uFFFD/g;function vM(t){return(typeof t=="string"?t:""+t).replace(dV,`
`).replace(pV,"")}function c1(t,e,n){if(e=vM(e),vM(t)!==e&&n)throw Error(Ot(425))}function Yy(){}var Mb=null,Cb=null;function Pb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ib=typeof setTimeout=="function"?setTimeout:void 0,gV=typeof clearTimeout=="function"?clearTimeout:void 0,xM=typeof Promise=="function"?Promise:void 0,mV=typeof queueMicrotask=="function"?queueMicrotask:typeof xM<"u"?function(t){return xM.resolve(null).then(t).catch(yV)}:Ib;function yV(t){setTimeout(function(){throw t})}function Mx(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pg(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pg(e)}function Wc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xd=Math.random().toString(36).slice(2),RA="__reactFiber$"+xd,vg="__reactProps$"+xd,ju="__reactContainer$"+xd,kb="__reactEvents$"+xd,_V="__reactListeners$"+xd,vV="__reactHandles$"+xd;function Lh(t){var e=t[RA];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ju]||n[RA]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wM(t);t!==null;){if(n=t[RA])return n;t=wM(t)}return e}t=n,n=t.parentNode}return null}function sm(t){return t=t[RA]||t[ju],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ot(33))}function S2(t){return t[vg]||null}var Lb=[],sf=-1;function uh(t){return{current:t}}function gi(t){0>sf||(t.current=Lb[sf],Lb[sf]=null,sf--)}function li(t,e){sf++,Lb[sf]=t.current,t.current=e}var rh={},yo=uh(rh),sa=uh(!1),Hh=rh;function Qf(t,e){var n=t.type.contextTypes;if(!n)return rh;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function oa(t){return t=t.childContextTypes,t!=null}function Xy(){gi(sa),gi(yo)}function bM(t,e,n){if(yo.current!==rh)throw Error(Ot(168));li(yo,e),li(sa,n)}function jL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ot(108,i9(t)||"Unknown",i));return Ri({},n,r)}function Ky(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rh,Hh=yo.current,li(yo,t),li(sa,sa.current),!0}function EM(t,e,n){var r=t.stateNode;if(!r)throw Error(Ot(169));n?(t=jL(t,e,Hh),r.__reactInternalMemoizedMergedChildContext=t,gi(sa),gi(yo),li(yo,t)):gi(sa),li(sa,n)}var Cu=null,M2=!1,Cx=!1;function $L(t){Cu===null?Cu=[t]:Cu.push(t)}function xV(t){M2=!0,$L(t)}function ch(){if(!Cx&&Cu!==null){Cx=!0;var t=0,e=Hr;try{var n=Cu;for(Hr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cu=null,M2=!1}catch(i){throw Cu!==null&&(Cu=Cu.slice(t+1)),pL($E,ch),i}finally{Hr=e,Cx=!1}}return null}var of=[],af=0,Jy=null,e_=0,fl=[],dl=0,Wh=null,ku=1,Lu="";function Mh(t,e){of[af++]=e_,of[af++]=Jy,Jy=t,e_=e}function HL(t,e,n){fl[dl++]=ku,fl[dl++]=Lu,fl[dl++]=Wh,Wh=t;var r=ku;t=Lu;var i=32-rA(r)-1;r&=~(1<<i),n+=1;var s=32-rA(e)+i;if(30<s){var A=i-i%5;s=(r&(1<<A)-1).toString(32),r>>=A,i-=A,ku=1<<32-rA(e)+i|n<<i|r,Lu=s+t}else ku=1<<s|n<<i|r,Lu=t}function JE(t){t.return!==null&&(Mh(t,1),HL(t,1,0))}function eT(t){for(;t===Jy;)Jy=of[--af],of[af]=null,e_=of[--af],of[af]=null;for(;t===Wh;)Wh=fl[--dl],fl[dl]=null,Lu=fl[--dl],fl[dl]=null,ku=fl[--dl],fl[dl]=null}var Oa=null,Ba=null,wi=!1,Zl=null;function WL(t,e){var n=pl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function TM(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Oa=t,Ba=Wc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Oa=t,Ba=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wh!==null?{id:ku,overflow:Lu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Oa=t,Ba=null,!0):!1;default:return!1}}function Db(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rb(t){if(wi){var e=Ba;if(e){var n=e;if(!TM(t,e)){if(Db(t))throw Error(Ot(418));e=Wc(n.nextSibling);var r=Oa;e&&TM(t,e)?WL(r,n):(t.flags=t.flags&-4097|2,wi=!1,Oa=t)}}else{if(Db(t))throw Error(Ot(418));t.flags=t.flags&-4097|2,wi=!1,Oa=t}}}function SM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Oa=t}function h1(t){if(t!==Oa)return!1;if(!wi)return SM(t),wi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pb(t.type,t.memoizedProps)),e&&(e=Ba)){if(Db(t))throw QL(),Error(Ot(418));for(;e;)WL(t,e),e=Wc(e.nextSibling)}if(SM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ot(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ba=Wc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ba=null}}else Ba=Oa?Wc(t.stateNode.nextSibling):null;return!0}function QL(){for(var t=Ba;t;)t=Wc(t.nextSibling)}function qf(){Ba=Oa=null,wi=!1}function tT(t){Zl===null?Zl=[t]:Zl.push(t)}var wV=tc.ReactCurrentBatchConfig;function Wl(t,e){if(t&&t.defaultProps){e=Ri({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var t_=uh(null),n_=null,lf=null,nT=null;function rT(){nT=lf=n_=null}function iT(t){var e=t_.current;gi(t_),t._currentValue=e}function Bb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Df(t,e){n_=t,nT=lf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ia=!0),t.firstContext=null)}function vl(t){var e=t._currentValue;if(nT!==t)if(t={context:t,memoizedValue:e,next:null},lf===null){if(n_===null)throw Error(Ot(308));lf=t,n_.dependencies={lanes:0,firstContext:t}}else lf=lf.next=t;return e}var Dh=null;function sT(t){Dh===null?Dh=[t]:Dh.push(t)}function qL(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sT(e)):(n.next=i.next,i.next=n),e.interleaved=n,$u(t,r)}function $u(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lc=!1;function oT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Or&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$u(t,n)}return i=r.interleaved,i===null?(e.next=e,sT(r)):(e.next=i.next,i.next=e),r.interleaved=e,$u(t,n)}function uy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,HE(t,n)}}function MM(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var A={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=A:s=s.next=A,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function r_(t,e,n,r){var i=t.updateQueue;Lc=!1;var s=i.firstBaseUpdate,A=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var y=a,w=y.next;y.next=null,A===null?s=w:A.next=w,A=y;var M=t.alternate;M!==null&&(M=M.updateQueue,a=M.lastBaseUpdate,a!==A&&(a===null?M.firstBaseUpdate=w:a.next=w,M.lastBaseUpdate=y))}if(s!==null){var C=i.baseState;A=0,M=w=y=null,a=s;do{var k=a.lane,U=a.eventTime;if((r&k)===k){M!==null&&(M=M.next={eventTime:U,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var H=t,q=a;switch(k=e,U=n,q.tag){case 1:if(H=q.payload,typeof H=="function"){C=H.call(U,C,k);break e}C=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=q.payload,k=typeof H=="function"?H.call(U,C,k):H,k==null)break e;C=Ri({},C,k);break e;case 2:Lc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,k=i.effects,k===null?i.effects=[a]:k.push(a))}else U={eventTime:U,lane:k,tag:a.tag,payload:a.payload,callback:a.callback,next:null},M===null?(w=M=U,y=C):M=M.next=U,A|=k;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;k=a,a=k.next,k.next=null,i.lastBaseUpdate=k,i.shared.pending=null}}while(1);if(M===null&&(y=C),i.baseState=y,i.firstBaseUpdate=w,i.lastBaseUpdate=M,e=i.shared.interleaved,e!==null){i=e;do A|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qh|=A,t.lanes=A,t.memoizedState=C}}function CM(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ot(191,i));i.call(r)}}}var YL=new q8.Component().refs;function zb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ri({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var C2={isMounted:function(t){return(t=t._reactInternals)?f0(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=No(),i=Zc(t),s=Fu(r,i);s.payload=e,n!=null&&(s.callback=n),e=Qc(t,s,i),e!==null&&(iA(e,t,i,r),uy(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=No(),i=Zc(t),s=Fu(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qc(t,s,i),e!==null&&(iA(e,t,i,r),uy(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=No(),r=Zc(t),i=Fu(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qc(t,i,r),e!==null&&(iA(e,t,r,n),uy(e,t,r))}};function PM(t,e,n,r,i,s,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,A):e.prototype&&e.prototype.isPureReactComponent?!mg(n,r)||!mg(i,s):!0}function XL(t,e,n){var r=!1,i=rh,s=e.contextType;return typeof s=="object"&&s!==null?s=vl(s):(i=oa(e)?Hh:yo.current,r=e.contextTypes,s=(r=r!=null)?Qf(t,i):rh),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=C2,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function IM(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&C2.enqueueReplaceState(e,e.state,null)}function Ob(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=YL,oT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vl(s):(s=oa(e)?Hh:yo.current,i.context=Qf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(zb(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&C2.enqueueReplaceState(i,i.state,null),r_(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function tp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ot(309));var r=n.stateNode}if(!r)throw Error(Ot(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(A){var a=i.refs;a===YL&&(a=i.refs={}),A===null?delete a[s]:a[s]=A},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ot(284));if(!n._owner)throw Error(Ot(290,t))}return t}function f1(t,e){throw t=Object.prototype.toString.call(e),Error(Ot(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kM(t){var e=t._init;return e(t._payload)}function KL(t){function e(Z,J){if(t){var re=Z.deletions;re===null?(Z.deletions=[J],Z.flags|=16):re.push(J)}}function n(Z,J){if(!t)return null;for(;J!==null;)e(Z,J),J=J.sibling;return null}function r(Z,J){for(Z=new Map;J!==null;)J.key!==null?Z.set(J.key,J):Z.set(J.index,J),J=J.sibling;return Z}function i(Z,J){return Z=Yc(Z,J),Z.index=0,Z.sibling=null,Z}function s(Z,J,re){return Z.index=re,t?(re=Z.alternate,re!==null?(re=re.index,re<J?(Z.flags|=2,J):re):(Z.flags|=2,J)):(Z.flags|=1048576,J)}function A(Z){return t&&Z.alternate===null&&(Z.flags|=2),Z}function a(Z,J,re,de){return J===null||J.tag!==6?(J=Bx(re,Z.mode,de),J.return=Z,J):(J=i(J,re),J.return=Z,J)}function y(Z,J,re,de){var _e=re.type;return _e===J0?M(Z,J,re.props.children,de,re.key):J!==null&&(J.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===kc&&kM(_e)===J.type)?(de=i(J,re.props),de.ref=tp(Z,J,re),de.return=Z,de):(de=gy(re.type,re.key,re.props,null,Z.mode,de),de.ref=tp(Z,J,re),de.return=Z,de)}function w(Z,J,re,de){return J===null||J.tag!==4||J.stateNode.containerInfo!==re.containerInfo||J.stateNode.implementation!==re.implementation?(J=zx(re,Z.mode,de),J.return=Z,J):(J=i(J,re.children||[]),J.return=Z,J)}function M(Z,J,re,de,_e){return J===null||J.tag!==7?(J=Vh(re,Z.mode,de,_e),J.return=Z,J):(J=i(J,re),J.return=Z,J)}function C(Z,J,re){if(typeof J=="string"&&J!==""||typeof J=="number")return J=Bx(""+J,Z.mode,re),J.return=Z,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case n1:return re=gy(J.type,J.key,J.props,null,Z.mode,re),re.ref=tp(Z,null,J),re.return=Z,re;case K0:return J=zx(J,Z.mode,re),J.return=Z,J;case kc:var de=J._init;return C(Z,de(J._payload),re)}if(Dp(J)||Yd(J))return J=Vh(J,Z.mode,re,null),J.return=Z,J;f1(Z,J)}return null}function k(Z,J,re,de){var _e=J!==null?J.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return _e!==null?null:a(Z,J,""+re,de);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case n1:return re.key===_e?y(Z,J,re,de):null;case K0:return re.key===_e?w(Z,J,re,de):null;case kc:return _e=re._init,k(Z,J,_e(re._payload),de)}if(Dp(re)||Yd(re))return _e!==null?null:M(Z,J,re,de,null);f1(Z,re)}return null}function U(Z,J,re,de,_e){if(typeof de=="string"&&de!==""||typeof de=="number")return Z=Z.get(re)||null,a(J,Z,""+de,_e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case n1:return Z=Z.get(de.key===null?re:de.key)||null,y(J,Z,de,_e);case K0:return Z=Z.get(de.key===null?re:de.key)||null,w(J,Z,de,_e);case kc:var fe=de._init;return U(Z,J,re,fe(de._payload),_e)}if(Dp(de)||Yd(de))return Z=Z.get(re)||null,M(J,Z,de,_e,null);f1(J,de)}return null}function H(Z,J,re,de){for(var _e=null,fe=null,Fe=J,We=J=0,qe=null;Fe!==null&&We<re.length;We++){Fe.index>We?(qe=Fe,Fe=null):qe=Fe.sibling;var Ke=k(Z,Fe,re[We],de);if(Ke===null){Fe===null&&(Fe=qe);break}t&&Fe&&Ke.alternate===null&&e(Z,Fe),J=s(Ke,J,We),fe===null?_e=Ke:fe.sibling=Ke,fe=Ke,Fe=qe}if(We===re.length)return n(Z,Fe),wi&&Mh(Z,We),_e;if(Fe===null){for(;We<re.length;We++)Fe=C(Z,re[We],de),Fe!==null&&(J=s(Fe,J,We),fe===null?_e=Fe:fe.sibling=Fe,fe=Fe);return wi&&Mh(Z,We),_e}for(Fe=r(Z,Fe);We<re.length;We++)qe=U(Fe,Z,We,re[We],de),qe!==null&&(t&&qe.alternate!==null&&Fe.delete(qe.key===null?We:qe.key),J=s(qe,J,We),fe===null?_e=qe:fe.sibling=qe,fe=qe);return t&&Fe.forEach(function(Oe){return e(Z,Oe)}),wi&&Mh(Z,We),_e}function q(Z,J,re,de){var _e=Yd(re);if(typeof _e!="function")throw Error(Ot(150));if(re=_e.call(re),re==null)throw Error(Ot(151));for(var fe=_e=null,Fe=J,We=J=0,qe=null,Ke=re.next();Fe!==null&&!Ke.done;We++,Ke=re.next()){Fe.index>We?(qe=Fe,Fe=null):qe=Fe.sibling;var Oe=k(Z,Fe,Ke.value,de);if(Oe===null){Fe===null&&(Fe=qe);break}t&&Fe&&Oe.alternate===null&&e(Z,Fe),J=s(Oe,J,We),fe===null?_e=Oe:fe.sibling=Oe,fe=Oe,Fe=qe}if(Ke.done)return n(Z,Fe),wi&&Mh(Z,We),_e;if(Fe===null){for(;!Ke.done;We++,Ke=re.next())Ke=C(Z,Ke.value,de),Ke!==null&&(J=s(Ke,J,We),fe===null?_e=Ke:fe.sibling=Ke,fe=Ke);return wi&&Mh(Z,We),_e}for(Fe=r(Z,Fe);!Ke.done;We++,Ke=re.next())Ke=U(Fe,Z,We,Ke.value,de),Ke!==null&&(t&&Ke.alternate!==null&&Fe.delete(Ke.key===null?We:Ke.key),J=s(Ke,J,We),fe===null?_e=Ke:fe.sibling=Ke,fe=Ke);return t&&Fe.forEach(function(tt){return e(Z,tt)}),wi&&Mh(Z,We),_e}function se(Z,J,re,de){if(typeof re=="object"&&re!==null&&re.type===J0&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case n1:e:{for(var _e=re.key,fe=J;fe!==null;){if(fe.key===_e){if(_e=re.type,_e===J0){if(fe.tag===7){n(Z,fe.sibling),J=i(fe,re.props.children),J.return=Z,Z=J;break e}}else if(fe.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===kc&&kM(_e)===fe.type){n(Z,fe.sibling),J=i(fe,re.props),J.ref=tp(Z,fe,re),J.return=Z,Z=J;break e}n(Z,fe);break}else e(Z,fe);fe=fe.sibling}re.type===J0?(J=Vh(re.props.children,Z.mode,de,re.key),J.return=Z,Z=J):(de=gy(re.type,re.key,re.props,null,Z.mode,de),de.ref=tp(Z,J,re),de.return=Z,Z=de)}return A(Z);case K0:e:{for(fe=re.key;J!==null;){if(J.key===fe)if(J.tag===4&&J.stateNode.containerInfo===re.containerInfo&&J.stateNode.implementation===re.implementation){n(Z,J.sibling),J=i(J,re.children||[]),J.return=Z,Z=J;break e}else{n(Z,J);break}else e(Z,J);J=J.sibling}J=zx(re,Z.mode,de),J.return=Z,Z=J}return A(Z);case kc:return fe=re._init,se(Z,J,fe(re._payload),de)}if(Dp(re))return H(Z,J,re,de);if(Yd(re))return q(Z,J,re,de);f1(Z,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,J!==null&&J.tag===6?(n(Z,J.sibling),J=i(J,re),J.return=Z,Z=J):(n(Z,J),J=Bx(re,Z.mode,de),J.return=Z,Z=J),A(Z)):n(Z,J)}return se}var Zf=KL(!0),JL=KL(!1),om={},UA=uh(om),xg=uh(om),wg=uh(om);function Rh(t){if(t===om)throw Error(Ot(174));return t}function aT(t,e){switch(li(wg,e),li(xg,t),li(UA,om),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pb(e,t)}gi(UA),li(UA,e)}function Yf(){gi(UA),gi(xg),gi(wg)}function eD(t){Rh(wg.current);var e=Rh(UA.current),n=pb(e,t.type);e!==n&&(li(xg,t),li(UA,n))}function lT(t){xg.current===t&&(gi(UA),gi(xg))}var Pi=uh(0);function i_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Px=[];function AT(){for(var t=0;t<Px.length;t++)Px[t]._workInProgressVersionPrimary=null;Px.length=0}var cy=tc.ReactCurrentDispatcher,Ix=tc.ReactCurrentBatchConfig,Qh=0,Di=null,us=null,Es=null,s_=!1,Xp=!1,bg=0,bV=0;function no(){throw Error(Ot(321))}function uT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!oA(t[n],e[n]))return!1;return!0}function cT(t,e,n,r,i,s){if(Qh=s,Di=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cy.current=t===null||t.memoizedState===null?MV:CV,t=n(r,i),Xp){s=0;do{if(Xp=!1,bg=0,25<=s)throw Error(Ot(301));s+=1,Es=us=null,e.updateQueue=null,cy.current=PV,t=n(r,i)}while(Xp)}if(cy.current=o_,e=us!==null&&us.next!==null,Qh=0,Es=us=Di=null,s_=!1,e)throw Error(Ot(300));return t}function hT(){var t=bg!==0;return bg=0,t}function DA(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Es===null?Di.memoizedState=Es=t:Es=Es.next=t,Es}function xl(){if(us===null){var t=Di.alternate;t=t!==null?t.memoizedState:null}else t=us.next;var e=Es===null?Di.memoizedState:Es.next;if(e!==null)Es=e,us=t;else{if(t===null)throw Error(Ot(310));us=t,t={memoizedState:us.memoizedState,baseState:us.baseState,baseQueue:us.baseQueue,queue:us.queue,next:null},Es===null?Di.memoizedState=Es=t:Es=Es.next=t}return Es}function Eg(t,e){return typeof e=="function"?e(t):e}function kx(t){var e=xl(),n=e.queue;if(n===null)throw Error(Ot(311));n.lastRenderedReducer=t;var r=us,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var A=i.next;i.next=s.next,s.next=A}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=A=null,y=null,w=s;do{var M=w.lane;if((Qh&M)===M)y!==null&&(y=y.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),r=w.hasEagerState?w.eagerState:t(r,w.action);else{var C={lane:M,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};y===null?(a=y=C,A=r):y=y.next=C,Di.lanes|=M,qh|=M}w=w.next}while(w!==null&&w!==s);y===null?A=r:y.next=a,oA(r,e.memoizedState)||(ia=!0),e.memoizedState=r,e.baseState=A,e.baseQueue=y,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Di.lanes|=s,qh|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lx(t){var e=xl(),n=e.queue;if(n===null)throw Error(Ot(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var A=i=i.next;do s=t(s,A.action),A=A.next;while(A!==i);oA(s,e.memoizedState)||(ia=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function tD(){}function nD(t,e){var n=Di,r=xl(),i=e(),s=!oA(r.memoizedState,i);if(s&&(r.memoizedState=i,ia=!0),r=r.queue,fT(sD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Es!==null&&Es.memoizedState.tag&1){if(n.flags|=2048,Tg(9,iD.bind(null,n,r,i,e),void 0,null),Ss===null)throw Error(Ot(349));Qh&30||rD(n,e,i)}return i}function rD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Di.updateQueue,e===null?(e={lastEffect:null,stores:null},Di.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iD(t,e,n,r){e.value=n,e.getSnapshot=r,oD(e)&&aD(t)}function sD(t,e,n){return n(function(){oD(e)&&aD(t)})}function oD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oA(t,n)}catch{return!0}}function aD(t){var e=$u(t,1);e!==null&&iA(e,t,1,-1)}function LM(t){var e=DA();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:t},e.queue=t,t=t.dispatch=SV.bind(null,Di,t),[e.memoizedState,t]}function Tg(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Di.updateQueue,e===null?(e={lastEffect:null,stores:null},Di.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lD(){return xl().memoizedState}function hy(t,e,n,r){var i=DA();Di.flags|=t,i.memoizedState=Tg(1|e,n,void 0,r===void 0?null:r)}function P2(t,e,n,r){var i=xl();r=r===void 0?null:r;var s=void 0;if(us!==null){var A=us.memoizedState;if(s=A.destroy,r!==null&&uT(r,A.deps)){i.memoizedState=Tg(e,n,s,r);return}}Di.flags|=t,i.memoizedState=Tg(1|e,n,s,r)}function DM(t,e){return hy(8390656,8,t,e)}function fT(t,e){return P2(2048,8,t,e)}function AD(t,e){return P2(4,2,t,e)}function uD(t,e){return P2(4,4,t,e)}function cD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hD(t,e,n){return n=n!=null?n.concat([t]):null,P2(4,4,cD.bind(null,e,t),n)}function dT(){}function fD(t,e){var n=xl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dD(t,e){var n=xl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pD(t,e,n){return Qh&21?(oA(n,e)||(n=yL(),Di.lanes|=n,qh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ia=!0),t.memoizedState=n)}function EV(t,e){var n=Hr;Hr=n!==0&&4>n?n:4,t(!0);var r=Ix.transition;Ix.transition={};try{t(!1),e()}finally{Hr=n,Ix.transition=r}}function gD(){return xl().memoizedState}function TV(t,e,n){var r=Zc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mD(t))yD(e,n);else if(n=qL(t,e,n,r),n!==null){var i=No();iA(n,t,r,i),_D(n,e,r)}}function SV(t,e,n){var r=Zc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mD(t))yD(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var A=e.lastRenderedState,a=s(A,n);if(i.hasEagerState=!0,i.eagerState=a,oA(a,A)){var y=e.interleaved;y===null?(i.next=i,sT(e)):(i.next=y.next,y.next=i),e.interleaved=i;return}}catch{}finally{}n=qL(t,e,i,r),n!==null&&(i=No(),iA(n,t,r,i),_D(n,e,r))}}function mD(t){var e=t.alternate;return t===Di||e!==null&&e===Di}function yD(t,e){Xp=s_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _D(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,HE(t,n)}}var o_={readContext:vl,useCallback:no,useContext:no,useEffect:no,useImperativeHandle:no,useInsertionEffect:no,useLayoutEffect:no,useMemo:no,useReducer:no,useRef:no,useState:no,useDebugValue:no,useDeferredValue:no,useTransition:no,useMutableSource:no,useSyncExternalStore:no,useId:no,unstable_isNewReconciler:!1},MV={readContext:vl,useCallback:function(t,e){return DA().memoizedState=[t,e===void 0?null:e],t},useContext:vl,useEffect:DM,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hy(4194308,4,cD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hy(4194308,4,t,e)},useInsertionEffect:function(t,e){return hy(4,2,t,e)},useMemo:function(t,e){var n=DA();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=DA();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=TV.bind(null,Di,t),[r.memoizedState,t]},useRef:function(t){var e=DA();return t={current:t},e.memoizedState=t},useState:LM,useDebugValue:dT,useDeferredValue:function(t){return DA().memoizedState=t},useTransition:function(){var t=LM(!1),e=t[0];return t=EV.bind(null,t[1]),DA().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Di,i=DA();if(wi){if(n===void 0)throw Error(Ot(407));n=n()}else{if(n=e(),Ss===null)throw Error(Ot(349));Qh&30||rD(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,DM(sD.bind(null,r,s,t),[t]),r.flags|=2048,Tg(9,iD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=DA(),e=Ss.identifierPrefix;if(wi){var n=Lu,r=ku;n=(r&~(1<<32-rA(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bg++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CV={readContext:vl,useCallback:fD,useContext:vl,useEffect:fT,useImperativeHandle:hD,useInsertionEffect:AD,useLayoutEffect:uD,useMemo:dD,useReducer:kx,useRef:lD,useState:function(){return kx(Eg)},useDebugValue:dT,useDeferredValue:function(t){var e=xl();return pD(e,us.memoizedState,t)},useTransition:function(){var t=kx(Eg)[0],e=xl().memoizedState;return[t,e]},useMutableSource:tD,useSyncExternalStore:nD,useId:gD,unstable_isNewReconciler:!1},PV={readContext:vl,useCallback:fD,useContext:vl,useEffect:fT,useImperativeHandle:hD,useInsertionEffect:AD,useLayoutEffect:uD,useMemo:dD,useReducer:Lx,useRef:lD,useState:function(){return Lx(Eg)},useDebugValue:dT,useDeferredValue:function(t){var e=xl();return us===null?e.memoizedState=t:pD(e,us.memoizedState,t)},useTransition:function(){var t=Lx(Eg)[0],e=xl().memoizedState;return[t,e]},useMutableSource:tD,useSyncExternalStore:nD,useId:gD,unstable_isNewReconciler:!1};function Xf(t,e){try{var n="",r=e;do n+=r9(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IV=typeof WeakMap=="function"?WeakMap:Map;function vD(t,e,n){n=Fu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){l_||(l_=!0,qb=r),Fb(t,e)},n}function xD(t,e,n){n=Fu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fb(t,e),typeof r!="function"&&(qc===null?qc=new Set([this]):qc.add(this));var A=e.stack;this.componentDidCatch(e.value,{componentStack:A!==null?A:""})}),n}function RM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$V.bind(null,t,e,n),e.then(t,t))}function BM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zM(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fu(-1,1),e.tag=2,Qc(n,e,1))),n.lanes|=1),t)}var kV=tc.ReactCurrentOwner,ia=!1;function Do(t,e,n,r){e.child=t===null?JL(e,null,n,r):Zf(e,t.child,n,r)}function OM(t,e,n,r,i){n=n.render;var s=e.ref;return Df(e,i),r=cT(t,e,n,r,s,i),n=hT(),t!==null&&!ia?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hu(t,e,i)):(wi&&n&&JE(e),e.flags|=1,Do(t,e,r,i),e.child)}function FM(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wD(t,e,s,r,i)):(t=gy(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var A=s.memoizedProps;if(n=n.compare,n=n!==null?n:mg,n(A,r)&&t.ref===e.ref)return Hu(t,e,i)}return e.flags|=1,t=Yc(s,r),t.ref=e.ref,t.return=e,e.child=t}function wD(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(mg(s,r)&&t.ref===e.ref)if(ia=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ia=!0);else return e.lanes=t.lanes,Hu(t,e,i)}return Nb(t,e,n,r,i)}function bD(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},li(uf,La),La|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,li(uf,La),La|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,li(uf,La),La|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,li(uf,La),La|=r;return Do(t,e,i,n),e.child}function ED(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nb(t,e,n,r,i){var s=oa(n)?Hh:yo.current;return s=Qf(e,s),Df(e,i),n=cT(t,e,n,r,s,i),r=hT(),t!==null&&!ia?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hu(t,e,i)):(wi&&r&&JE(e),e.flags|=1,Do(t,e,n,i),e.child)}function NM(t,e,n,r,i){if(oa(n)){var s=!0;Ky(e)}else s=!1;if(Df(e,i),e.stateNode===null)fy(t,e),XL(e,n,r),Ob(e,n,r,i),r=!0;else if(t===null){var A=e.stateNode,a=e.memoizedProps;A.props=a;var y=A.context,w=n.contextType;typeof w=="object"&&w!==null?w=vl(w):(w=oa(n)?Hh:yo.current,w=Qf(e,w));var M=n.getDerivedStateFromProps,C=typeof M=="function"||typeof A.getSnapshotBeforeUpdate=="function";C||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(a!==r||y!==w)&&IM(e,A,r,w),Lc=!1;var k=e.memoizedState;A.state=k,r_(e,r,A,i),y=e.memoizedState,a!==r||k!==y||sa.current||Lc?(typeof M=="function"&&(zb(e,n,M,r),y=e.memoizedState),(a=Lc||PM(e,n,a,r,k,y,w))?(C||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(e.flags|=4194308)):(typeof A.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=y),A.props=r,A.state=y,A.context=w,r=a):(typeof A.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{A=e.stateNode,ZL(t,e),a=e.memoizedProps,w=e.type===e.elementType?a:Wl(e.type,a),A.props=w,C=e.pendingProps,k=A.context,y=n.contextType,typeof y=="object"&&y!==null?y=vl(y):(y=oa(n)?Hh:yo.current,y=Qf(e,y));var U=n.getDerivedStateFromProps;(M=typeof U=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(a!==C||k!==y)&&IM(e,A,r,y),Lc=!1,k=e.memoizedState,A.state=k,r_(e,r,A,i);var H=e.memoizedState;a!==C||k!==H||sa.current||Lc?(typeof U=="function"&&(zb(e,n,U,r),H=e.memoizedState),(w=Lc||PM(e,n,w,r,k,H,y)||!1)?(M||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(r,H,y),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(r,H,y)),typeof A.componentDidUpdate=="function"&&(e.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof A.componentDidUpdate!="function"||a===t.memoizedProps&&k===t.memoizedState||(e.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&k===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=H),A.props=r,A.state=H,A.context=y,r=w):(typeof A.componentDidUpdate!="function"||a===t.memoizedProps&&k===t.memoizedState||(e.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&k===t.memoizedState||(e.flags|=1024),r=!1)}return Ub(t,e,n,r,s,i)}function Ub(t,e,n,r,i,s){ED(t,e);var A=(e.flags&128)!==0;if(!r&&!A)return i&&EM(e,n,!1),Hu(t,e,s);r=e.stateNode,kV.current=e;var a=A&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&A?(e.child=Zf(e,t.child,null,s),e.child=Zf(e,null,a,s)):Do(t,e,a,s),e.memoizedState=r.state,i&&EM(e,n,!0),e.child}function TD(t){var e=t.stateNode;e.pendingContext?bM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bM(t,e.context,!1),aT(t,e.containerInfo)}function UM(t,e,n,r,i){return qf(),tT(i),e.flags|=256,Do(t,e,n,r),e.child}var Vb={dehydrated:null,treeContext:null,retryLane:0};function Gb(t){return{baseLanes:t,cachePool:null,transitions:null}}function SD(t,e,n){var r=e.pendingProps,i=Pi.current,s=!1,A=(e.flags&128)!==0,a;if((a=A)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),li(Pi,i&1),t===null)return Rb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(A=r.children,t=r.fallback,s?(r=e.mode,s=e.child,A={mode:"hidden",children:A},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=A):s=L2(A,r,0,null),t=Vh(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Gb(n),e.memoizedState=Vb,t):pT(e,A));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return LV(t,e,A,r,a,i,n);if(s){s=r.fallback,A=e.mode,i=t.child,a=i.sibling;var y={mode:"hidden",children:r.children};return!(A&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=y,e.deletions=null):(r=Yc(i,y),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yc(a,s):(s=Vh(s,A,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,A=t.child.memoizedState,A=A===null?Gb(n):{baseLanes:A.baseLanes|n,cachePool:null,transitions:A.transitions},s.memoizedState=A,s.childLanes=t.childLanes&~n,e.memoizedState=Vb,r}return s=t.child,t=s.sibling,r=Yc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pT(t,e){return e=L2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function d1(t,e,n,r){return r!==null&&tT(r),Zf(e,t.child,null,n),t=pT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LV(t,e,n,r,i,s,A){if(n)return e.flags&256?(e.flags&=-257,r=Dx(Error(Ot(422))),d1(t,e,A,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=L2({mode:"visible",children:r.children},i,0,null),s=Vh(s,i,A,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zf(e,t.child,null,A),e.child.memoizedState=Gb(A),e.memoizedState=Vb,s);if(!(e.mode&1))return d1(t,e,A,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ot(419)),r=Dx(s,r,void 0),d1(t,e,A,r)}if(a=(A&t.childLanes)!==0,ia||a){if(r=Ss,r!==null){switch(A&-A){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|A)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$u(t,i),iA(r,t,i,-1))}return xT(),r=Dx(Error(Ot(421))),d1(t,e,A,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=HV.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ba=Wc(i.nextSibling),Oa=e,wi=!0,Zl=null,t!==null&&(fl[dl++]=ku,fl[dl++]=Lu,fl[dl++]=Wh,ku=t.id,Lu=t.overflow,Wh=e),e=pT(e,r.children),e.flags|=4096,e)}function VM(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bb(t.return,e,n)}function Rx(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function MD(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Do(t,e,r.children,n),r=Pi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&VM(t,n,e);else if(t.tag===19)VM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(li(Pi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&i_(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rx(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&i_(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rx(e,!0,n,null,s);break;case"together":Rx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ot(153));if(e.child!==null){for(t=e.child,n=Yc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DV(t,e,n){switch(e.tag){case 3:TD(e),qf();break;case 5:eD(e);break;case 1:oa(e.type)&&Ky(e);break;case 4:aT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;li(t_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(li(Pi,Pi.current&1),e.flags|=128,null):n&e.child.childLanes?SD(t,e,n):(li(Pi,Pi.current&1),t=Hu(t,e,n),t!==null?t.sibling:null);li(Pi,Pi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return MD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Pi,Pi.current),r)break;return null;case 22:case 23:return e.lanes=0,bD(t,e,n)}return Hu(t,e,n)}var CD,jb,PD,ID;CD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jb=function(){};PD=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rh(UA.current);var s=null;switch(n){case"input":i=cb(t,i),r=cb(t,r),s=[];break;case"select":i=Ri({},i,{value:void 0}),r=Ri({},r,{value:void 0}),s=[];break;case"textarea":i=db(t,i),r=db(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yy)}gb(n,r);var A;n=null;for(w in i)if(!r.hasOwnProperty(w)&&i.hasOwnProperty(w)&&i[w]!=null)if(w==="style"){var a=i[w];for(A in a)a.hasOwnProperty(A)&&(n||(n={}),n[A]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(ug.hasOwnProperty(w)?s||(s=[]):(s=s||[]).push(w,null));for(w in r){var y=r[w];if(a=i?.[w],r.hasOwnProperty(w)&&y!==a&&(y!=null||a!=null))if(w==="style")if(a){for(A in a)!a.hasOwnProperty(A)||y&&y.hasOwnProperty(A)||(n||(n={}),n[A]="");for(A in y)y.hasOwnProperty(A)&&a[A]!==y[A]&&(n||(n={}),n[A]=y[A])}else n||(s||(s=[]),s.push(w,n)),n=y;else w==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,a=a?a.__html:void 0,y!=null&&a!==y&&(s=s||[]).push(w,y)):w==="children"?typeof y!="string"&&typeof y!="number"||(s=s||[]).push(w,""+y):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(ug.hasOwnProperty(w)?(y!=null&&w==="onScroll"&&pi("scroll",t),s||a===y||(s=[])):(s=s||[]).push(w,y))}n&&(s=s||[]).push("style",n);var w=s;(e.updateQueue=w)&&(e.flags|=4)}};ID=function(t,e,n,r){n!==r&&(e.flags|=4)};function np(t,e){if(!wi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ro(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RV(t,e,n){var r=e.pendingProps;switch(eT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ro(e),null;case 1:return oa(e.type)&&Xy(),ro(e),null;case 3:return r=e.stateNode,Yf(),gi(sa),gi(yo),AT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(h1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zl!==null&&(Xb(Zl),Zl=null))),jb(t,e),ro(e),null;case 5:lT(e);var i=Rh(wg.current);if(n=e.type,t!==null&&e.stateNode!=null)PD(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ot(166));return ro(e),null}if(t=Rh(UA.current),h1(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[RA]=e,r[vg]=s,t=(e.mode&1)!==0,n){case"dialog":pi("cancel",r),pi("close",r);break;case"iframe":case"object":case"embed":pi("load",r);break;case"video":case"audio":for(i=0;i<Bp.length;i++)pi(Bp[i],r);break;case"source":pi("error",r);break;case"img":case"image":case"link":pi("error",r),pi("load",r);break;case"details":pi("toggle",r);break;case"input":Y5(r,s),pi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pi("invalid",r);break;case"textarea":K5(r,s),pi("invalid",r)}gb(n,s),i=null;for(var A in s)if(s.hasOwnProperty(A)){var a=s[A];A==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&c1(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&c1(r.textContent,a,t),i=["children",""+a]):ug.hasOwnProperty(A)&&a!=null&&A==="onScroll"&&pi("scroll",r)}switch(n){case"input":r1(r),X5(r,s,!0);break;case"textarea":r1(r),J5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{A=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=A.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=A.createElement(n,{is:r.is}):(t=A.createElement(n),n==="select"&&(A=t,r.multiple?A.multiple=!0:r.size&&(A.size=r.size))):t=A.createElementNS(t,n),t[RA]=e,t[vg]=r,CD(t,e,!1,!1),e.stateNode=t;e:{switch(A=mb(n,r),n){case"dialog":pi("cancel",t),pi("close",t),i=r;break;case"iframe":case"object":case"embed":pi("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bp.length;i++)pi(Bp[i],t);i=r;break;case"source":pi("error",t),i=r;break;case"img":case"image":case"link":pi("error",t),pi("load",t),i=r;break;case"details":pi("toggle",t),i=r;break;case"input":Y5(t,r),i=cb(t,r),pi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ri({},r,{value:void 0}),pi("invalid",t);break;case"textarea":K5(t,r),i=db(t,r),pi("invalid",t);break;default:i=r}gb(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var y=a[s];s==="style"?oL(t,y):s==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&iL(t,y)):s==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&cg(t,y):typeof y=="number"&&cg(t,""+y):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ug.hasOwnProperty(s)?y!=null&&s==="onScroll"&&pi("scroll",t):y!=null&&NE(t,s,y,A))}switch(n){case"input":r1(t),X5(t,r,!1);break;case"textarea":r1(t),J5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nh(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Pf(t,!!r.multiple,s,!1):r.defaultValue!=null&&Pf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ro(e),null;case 6:if(t&&e.stateNode!=null)ID(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ot(166));if(n=Rh(wg.current),Rh(UA.current),h1(e)){if(r=e.stateNode,n=e.memoizedProps,r[RA]=e,(s=r.nodeValue!==n)&&(t=Oa,t!==null))switch(t.tag){case 3:c1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&c1(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[RA]=e,e.stateNode=r}return ro(e),null;case 13:if(gi(Pi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wi&&Ba!==null&&e.mode&1&&!(e.flags&128))QL(),qf(),e.flags|=98560,s=!1;else if(s=h1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ot(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ot(317));s[RA]=e}else qf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ro(e),s=!1}else Zl!==null&&(Xb(Zl),Zl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pi.current&1?cs===0&&(cs=3):xT())),e.updateQueue!==null&&(e.flags|=4),ro(e),null);case 4:return Yf(),jb(t,e),t===null&&yg(e.stateNode.containerInfo),ro(e),null;case 10:return iT(e.type._context),ro(e),null;case 17:return oa(e.type)&&Xy(),ro(e),null;case 19:if(gi(Pi),s=e.memoizedState,s===null)return ro(e),null;if(r=(e.flags&128)!==0,A=s.rendering,A===null)if(r)np(s,!1);else{if(cs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(A=i_(t),A!==null){for(e.flags|=128,np(s,!1),r=A.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,A=s.alternate,A===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=A.childLanes,s.lanes=A.lanes,s.child=A.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=A.memoizedProps,s.memoizedState=A.memoizedState,s.updateQueue=A.updateQueue,s.type=A.type,t=A.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return li(Pi,Pi.current&1|2),e.child}t=t.sibling}s.tail!==null&&Zi()>Kf&&(e.flags|=128,r=!0,np(s,!1),e.lanes=4194304)}else{if(!r)if(t=i_(A),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),np(s,!0),s.tail===null&&s.tailMode==="hidden"&&!A.alternate&&!wi)return ro(e),null}else 2*Zi()-s.renderingStartTime>Kf&&n!==1073741824&&(e.flags|=128,r=!0,np(s,!1),e.lanes=4194304);s.isBackwards?(A.sibling=e.child,e.child=A):(n=s.last,n!==null?n.sibling=A:e.child=A,s.last=A)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zi(),e.sibling=null,n=Pi.current,li(Pi,r?n&1|2:n&1),e):(ro(e),null);case 22:case 23:return vT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?La&1073741824&&(ro(e),e.subtreeFlags&6&&(e.flags|=8192)):ro(e),null;case 24:return null;case 25:return null}throw Error(Ot(156,e.tag))}function BV(t,e){switch(eT(e),e.tag){case 1:return oa(e.type)&&Xy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yf(),gi(sa),gi(yo),AT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lT(e),null;case 13:if(gi(Pi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ot(340));qf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gi(Pi),null;case 4:return Yf(),null;case 10:return iT(e.type._context),null;case 22:case 23:return vT(),null;case 24:return null;default:return null}}var p1=!1,fo=!1,zV=typeof WeakSet=="function"?WeakSet:Set,vn=null;function Af(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gi(t,e,r)}else n.current=null}function $b(t,e,n){try{n()}catch(r){Gi(t,e,r)}}var GM=!1;function OV(t,e){if(Mb=Qy,t=RL(),KE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var A=0,a=-1,y=-1,w=0,M=0,C=t,k=null;t:for(;;){for(var U;C!==n||i!==0&&C.nodeType!==3||(a=A+i),C!==s||r!==0&&C.nodeType!==3||(y=A+r),C.nodeType===3&&(A+=C.nodeValue.length),(U=C.firstChild)!==null;)k=C,C=U;for(;;){if(C===t)break t;if(k===n&&++w===i&&(a=A),k===s&&++M===r&&(y=A),(U=C.nextSibling)!==null)break;C=k,k=C.parentNode}C=U}n=a===-1||y===-1?null:{start:a,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cb={focusedElem:t,selectionRange:n},Qy=!1,vn=e;vn!==null;)if(e=vn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,vn=t;else for(;vn!==null;){e=vn;try{var H=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var q=H.memoizedProps,se=H.memoizedState,Z=e.stateNode,J=Z.getSnapshotBeforeUpdate(e.elementType===e.type?q:Wl(e.type,q),se);Z.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var re=e.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ot(163))}}catch(de){Gi(e,e.return,de)}if(t=e.sibling,t!==null){t.return=e.return,vn=t;break}vn=e.return}return H=GM,GM=!1,H}function Kp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&$b(e,n,s)}i=i.next}while(i!==r)}}function I2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kD(t){var e=t.alternate;e!==null&&(t.alternate=null,kD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[RA],delete e[vg],delete e[kb],delete e[_V],delete e[vV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LD(t){return t.tag===5||t.tag===3||t.tag===4}function jM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yy));else if(r!==4&&(t=t.child,t!==null))for(Wb(t,e,n),t=t.sibling;t!==null;)Wb(t,e,n),t=t.sibling}function Qb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qb(t,e,n),t=t.sibling;t!==null;)Qb(t,e,n),t=t.sibling}var Fs=null,Ql=!1;function wc(t,e,n){for(n=n.child;n!==null;)DD(t,e,n),n=n.sibling}function DD(t,e,n){if(NA&&typeof NA.onCommitFiberUnmount=="function")try{NA.onCommitFiberUnmount(w2,n)}catch{}switch(n.tag){case 5:fo||Af(n,e);case 6:var r=Fs,i=Ql;Fs=null,wc(t,e,n),Fs=r,Ql=i,Fs!==null&&(Ql?(t=Fs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fs.removeChild(n.stateNode));break;case 18:Fs!==null&&(Ql?(t=Fs,n=n.stateNode,t.nodeType===8?Mx(t.parentNode,n):t.nodeType===1&&Mx(t,n),pg(t)):Mx(Fs,n.stateNode));break;case 4:r=Fs,i=Ql,Fs=n.stateNode.containerInfo,Ql=!0,wc(t,e,n),Fs=r,Ql=i;break;case 0:case 11:case 14:case 15:if(!fo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,A=s.destroy;s=s.tag,A!==void 0&&(s&2||s&4)&&$b(n,e,A),i=i.next}while(i!==r)}wc(t,e,n);break;case 1:if(!fo&&(Af(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gi(n,e,a)}wc(t,e,n);break;case 21:wc(t,e,n);break;case 22:n.mode&1?(fo=(r=fo)||n.memoizedState!==null,wc(t,e,n),fo=r):wc(t,e,n);break;default:wc(t,e,n)}}function $M(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zV),e.forEach(function(r){var i=WV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hl(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,A=e,a=A;e:for(;a!==null;){switch(a.tag){case 5:Fs=a.stateNode,Ql=!1;break e;case 3:Fs=a.stateNode.containerInfo,Ql=!0;break e;case 4:Fs=a.stateNode.containerInfo,Ql=!0;break e}a=a.return}if(Fs===null)throw Error(Ot(160));DD(s,A,i),Fs=null,Ql=!1;var y=i.alternate;y!==null&&(y.return=null),i.return=null}catch(w){Gi(i,e,w)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)RD(e,t),e=e.sibling}function RD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hl(e,t),SA(t),r&4){try{Kp(3,t,t.return),I2(3,t)}catch(q){Gi(t,t.return,q)}try{Kp(5,t,t.return)}catch(q){Gi(t,t.return,q)}}break;case 1:Hl(e,t),SA(t),r&512&&n!==null&&Af(n,n.return);break;case 5:if(Hl(e,t),SA(t),r&512&&n!==null&&Af(n,n.return),t.flags&32){var i=t.stateNode;try{cg(i,"")}catch(q){Gi(t,t.return,q)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,A=n!==null?n.memoizedProps:s,a=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tL(i,s),mb(a,A);var w=mb(a,s);for(A=0;A<y.length;A+=2){var M=y[A],C=y[A+1];M==="style"?oL(i,C):M==="dangerouslySetInnerHTML"?iL(i,C):M==="children"?cg(i,C):NE(i,M,C,w)}switch(a){case"input":hb(i,s);break;case"textarea":nL(i,s);break;case"select":var k=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var U=s.value;U!=null?Pf(i,!!s.multiple,U,!1):k!==!!s.multiple&&(s.defaultValue!=null?Pf(i,!!s.multiple,s.defaultValue,!0):Pf(i,!!s.multiple,s.multiple?[]:"",!1))}i[vg]=s}catch(q){Gi(t,t.return,q)}}break;case 6:if(Hl(e,t),SA(t),r&4){if(t.stateNode===null)throw Error(Ot(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(q){Gi(t,t.return,q)}}break;case 3:if(Hl(e,t),SA(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pg(e.containerInfo)}catch(q){Gi(t,t.return,q)}break;case 4:Hl(e,t),SA(t);break;case 13:Hl(e,t),SA(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yT=Zi())),r&4&&$M(t);break;case 22:if(M=n!==null&&n.memoizedState!==null,t.mode&1?(fo=(w=fo)||M,Hl(e,t),fo=w):Hl(e,t),SA(t),r&8192){if(w=t.memoizedState!==null,(t.stateNode.isHidden=w)&&!M&&t.mode&1)for(vn=t,M=t.child;M!==null;){for(C=vn=M;vn!==null;){switch(k=vn,U=k.child,k.tag){case 0:case 11:case 14:case 15:Kp(4,k,k.return);break;case 1:Af(k,k.return);var H=k.stateNode;if(typeof H.componentWillUnmount=="function"){r=k,n=k.return;try{e=r,H.props=e.memoizedProps,H.state=e.memoizedState,H.componentWillUnmount()}catch(q){Gi(r,n,q)}}break;case 5:Af(k,k.return);break;case 22:if(k.memoizedState!==null){WM(C);continue}}U!==null?(U.return=k,vn=U):WM(C)}M=M.sibling}e:for(M=null,C=t;;){if(C.tag===5){if(M===null){M=C;try{i=C.stateNode,w?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=C.stateNode,y=C.memoizedProps.style,A=y!=null&&y.hasOwnProperty("display")?y.display:null,a.style.display=sL("display",A))}catch(q){Gi(t,t.return,q)}}}else if(C.tag===6){if(M===null)try{C.stateNode.nodeValue=w?"":C.memoizedProps}catch(q){Gi(t,t.return,q)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===t)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;M===C&&(M=null),C=C.return}M===C&&(M=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Hl(e,t),SA(t),r&4&&$M(t);break;case 21:break;default:Hl(e,t),SA(t)}}function SA(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LD(n)){var r=n;break e}n=n.return}throw Error(Ot(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cg(i,""),r.flags&=-33);var s=jM(t);Qb(t,s,i);break;case 3:case 4:var A=r.stateNode.containerInfo,a=jM(t);Wb(t,a,A);break;default:throw Error(Ot(161))}}catch(y){Gi(t,t.return,y)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FV(t,e,n){vn=t,BD(t)}function BD(t,e,n){for(var r=(t.mode&1)!==0;vn!==null;){var i=vn,s=i.child;if(i.tag===22&&r){var A=i.memoizedState!==null||p1;if(!A){var a=i.alternate,y=a!==null&&a.memoizedState!==null||fo;a=p1;var w=fo;if(p1=A,(fo=y)&&!w)for(vn=i;vn!==null;)A=vn,y=A.child,A.tag===22&&A.memoizedState!==null?QM(i):y!==null?(y.return=A,vn=y):QM(i);for(;s!==null;)vn=s,BD(s),s=s.sibling;vn=i,p1=a,fo=w}HM(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,vn=s):HM(t)}}function HM(t){for(;vn!==null;){var e=vn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fo||I2(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fo)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wl(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&CM(e,s,r);break;case 3:var A=e.updateQueue;if(A!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}CM(e,A,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var y=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var w=e.alternate;if(w!==null){var M=w.memoizedState;if(M!==null){var C=M.dehydrated;C!==null&&pg(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ot(163))}fo||e.flags&512&&Hb(e)}catch(k){Gi(e,e.return,k)}}if(e===t){vn=null;break}if(n=e.sibling,n!==null){n.return=e.return,vn=n;break}vn=e.return}}function WM(t){for(;vn!==null;){var e=vn;if(e===t){vn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,vn=n;break}vn=e.return}}function QM(t){for(;vn!==null;){var e=vn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{I2(4,e)}catch(y){Gi(e,n,y)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(y){Gi(e,i,y)}}var s=e.return;try{Hb(e)}catch(y){Gi(e,s,y)}break;case 5:var A=e.return;try{Hb(e)}catch(y){Gi(e,A,y)}}}catch(y){Gi(e,e.return,y)}if(e===t){vn=null;break}var a=e.sibling;if(a!==null){a.return=e.return,vn=a;break}vn=e.return}}var NV=Math.ceil,a_=tc.ReactCurrentDispatcher,gT=tc.ReactCurrentOwner,ml=tc.ReactCurrentBatchConfig,Or=0,Ss=null,ns=null,Vs=0,La=0,uf=uh(0),cs=0,Sg=null,qh=0,k2=0,mT=0,Jp=null,ra=null,yT=0,Kf=1/0,Mu=null,l_=!1,qb=null,qc=null,g1=!1,Fc=null,A_=0,eg=0,Zb=null,dy=-1,py=0;function No(){return Or&6?Zi():dy!==-1?dy:dy=Zi()}function Zc(t){return t.mode&1?Or&2&&Vs!==0?Vs&-Vs:wV.transition!==null?(py===0&&(py=yL()),py):(t=Hr,t!==0||(t=window.event,t=t===void 0?16:TL(t.type)),t):1}function iA(t,e,n,r){if(50<eg)throw eg=0,Zb=null,Error(Ot(185));rm(t,n,r),(!(Or&2)||t!==Ss)&&(t===Ss&&(!(Or&2)&&(k2|=n),cs===4&&Bc(t,Vs)),aa(t,r),n===1&&Or===0&&!(e.mode&1)&&(Kf=Zi()+500,M2&&ch()))}function aa(t,e){var n=t.callbackNode;w9(t,e);var r=Wy(t,t===Ss?Vs:0);if(r===0)n!==null&&nM(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nM(n),e===1)t.tag===0?xV(qM.bind(null,t)):$L(qM.bind(null,t)),mV(function(){!(Or&6)&&ch()}),n=null;else{switch(_L(r)){case 1:n=$E;break;case 4:n=gL;break;case 16:n=Hy;break;case 536870912:n=mL;break;default:n=Hy}n=jD(n,zD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zD(t,e){if(dy=-1,py=0,Or&6)throw Error(Ot(327));var n=t.callbackNode;if(Rf()&&t.callbackNode!==n)return null;var r=Wy(t,t===Ss?Vs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=u_(t,r);else{e=r;var i=Or;Or|=2;var s=FD();(Ss!==t||Vs!==e)&&(Mu=null,Kf=Zi()+500,Uh(t,e));do try{GV();break}catch(a){OD(t,a)}while(1);rT(),a_.current=s,Or=i,ns!==null?e=0:(Ss=null,Vs=0,e=cs)}if(e!==0){if(e===2&&(i=wb(t),i!==0&&(r=i,e=Yb(t,i))),e===1)throw n=Sg,Uh(t,0),Bc(t,r),aa(t,Zi()),n;if(e===6)Bc(t,r);else{if(i=t.current.alternate,!(r&30)&&!UV(i)&&(e=u_(t,r),e===2&&(s=wb(t),s!==0&&(r=s,e=Yb(t,s))),e===1))throw n=Sg,Uh(t,0),Bc(t,r),aa(t,Zi()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ot(345));case 2:Ch(t,ra,Mu);break;case 3:if(Bc(t,r),(r&130023424)===r&&(e=yT+500-Zi(),10<e)){if(Wy(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){No(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ib(Ch.bind(null,t,ra,Mu),e);break}Ch(t,ra,Mu);break;case 4:if(Bc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var A=31-rA(r);s=1<<A,A=e[A],A>i&&(i=A),r&=~s}if(r=i,r=Zi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NV(r/1960))-r,10<r){t.timeoutHandle=Ib(Ch.bind(null,t,ra,Mu),r);break}Ch(t,ra,Mu);break;case 5:Ch(t,ra,Mu);break;default:throw Error(Ot(329))}}}return aa(t,Zi()),t.callbackNode===n?zD.bind(null,t):null}function Yb(t,e){var n=Jp;return t.current.memoizedState.isDehydrated&&(Uh(t,e).flags|=256),t=u_(t,e),t!==2&&(e=ra,ra=n,e!==null&&Xb(e)),t}function Xb(t){ra===null?ra=t:ra.push.apply(ra,t)}function UV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!oA(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bc(t,e){for(e&=~mT,e&=~k2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rA(e),r=1<<n;t[n]=-1,e&=~r}}function qM(t){if(Or&6)throw Error(Ot(327));Rf();var e=Wy(t,0);if(!(e&1))return aa(t,Zi()),null;var n=u_(t,e);if(t.tag!==0&&n===2){var r=wb(t);r!==0&&(e=r,n=Yb(t,r))}if(n===1)throw n=Sg,Uh(t,0),Bc(t,e),aa(t,Zi()),n;if(n===6)throw Error(Ot(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ch(t,ra,Mu),aa(t,Zi()),null}function _T(t,e){var n=Or;Or|=1;try{return t(e)}finally{Or=n,Or===0&&(Kf=Zi()+500,M2&&ch())}}function Zh(t){Fc!==null&&Fc.tag===0&&!(Or&6)&&Rf();var e=Or;Or|=1;var n=ml.transition,r=Hr;try{if(ml.transition=null,Hr=1,t)return t()}finally{Hr=r,ml.transition=n,Or=e,!(Or&6)&&ch()}}function vT(){La=uf.current,gi(uf)}function Uh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gV(n)),ns!==null)for(n=ns.return;n!==null;){var r=n;switch(eT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xy();break;case 3:Yf(),gi(sa),gi(yo),AT();break;case 5:lT(r);break;case 4:Yf();break;case 13:gi(Pi);break;case 19:gi(Pi);break;case 10:iT(r.type._context);break;case 22:case 23:vT()}n=n.return}if(Ss=t,ns=t=Yc(t.current,null),Vs=La=e,cs=0,Sg=null,mT=k2=qh=0,ra=Jp=null,Dh!==null){for(e=0;e<Dh.length;e++)if(n=Dh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var A=s.next;s.next=i,r.next=A}n.pending=r}Dh=null}return t}function OD(t,e){do{var n=ns;try{if(rT(),cy.current=o_,s_){for(var r=Di.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}s_=!1}if(Qh=0,Es=us=Di=null,Xp=!1,bg=0,gT.current=null,n===null||n.return===null){cs=1,Sg=e,ns=null;break}e:{var s=t,A=n.return,a=n,y=e;if(e=Vs,a.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var w=y,M=a,C=M.tag;if(!(M.mode&1)&&(C===0||C===11||C===15)){var k=M.alternate;k?(M.updateQueue=k.updateQueue,M.memoizedState=k.memoizedState,M.lanes=k.lanes):(M.updateQueue=null,M.memoizedState=null)}var U=BM(A);if(U!==null){U.flags&=-257,zM(U,A,a,s,e),U.mode&1&&RM(s,w,e),e=U,y=w;var H=e.updateQueue;if(H===null){var q=new Set;q.add(y),e.updateQueue=q}else H.add(y);break e}else{if(!(e&1)){RM(s,w,e),xT();break e}y=Error(Ot(426))}}else if(wi&&a.mode&1){var se=BM(A);if(se!==null){!(se.flags&65536)&&(se.flags|=256),zM(se,A,a,s,e),tT(Xf(y,a));break e}}s=y=Xf(y,a),cs!==4&&(cs=2),Jp===null?Jp=[s]:Jp.push(s),s=A;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var Z=vD(s,y,e);MM(s,Z);break e;case 1:a=y;var J=s.type,re=s.stateNode;if(!(s.flags&128)&&(typeof J.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(qc===null||!qc.has(re)))){s.flags|=65536,e&=-e,s.lanes|=e;var de=xD(s,a,e);MM(s,de);break e}}s=s.return}while(s!==null)}UD(n)}catch(_e){e=_e,ns===n&&n!==null&&(ns=n=n.return);continue}break}while(1)}function FD(){var t=a_.current;return a_.current=o_,t===null?o_:t}function xT(){(cs===0||cs===3||cs===2)&&(cs=4),Ss===null||!(qh&268435455)&&!(k2&268435455)||Bc(Ss,Vs)}function u_(t,e){var n=Or;Or|=2;var r=FD();(Ss!==t||Vs!==e)&&(Mu=null,Uh(t,e));do try{VV();break}catch(i){OD(t,i)}while(1);if(rT(),Or=n,a_.current=r,ns!==null)throw Error(Ot(261));return Ss=null,Vs=0,cs}function VV(){for(;ns!==null;)ND(ns)}function GV(){for(;ns!==null&&!f9();)ND(ns)}function ND(t){var e=GD(t.alternate,t,La);t.memoizedProps=t.pendingProps,e===null?UD(t):ns=e,gT.current=null}function UD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BV(n,e),n!==null){n.flags&=32767,ns=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{cs=6,ns=null;return}}else if(n=RV(n,e,La),n!==null){ns=n;return}if(e=e.sibling,e!==null){ns=e;return}ns=e=t}while(e!==null);cs===0&&(cs=5)}function Ch(t,e,n){var r=Hr,i=ml.transition;try{ml.transition=null,Hr=1,jV(t,e,n,r)}finally{ml.transition=i,Hr=r}return null}function jV(t,e,n,r){do Rf();while(Fc!==null);if(Or&6)throw Error(Ot(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ot(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(b9(t,s),t===Ss&&(ns=Ss=null,Vs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||g1||(g1=!0,jD(Hy,function(){return Rf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ml.transition,ml.transition=null;var A=Hr;Hr=1;var a=Or;Or|=4,gT.current=null,OV(t,n),RD(n,t),AV(Cb),Qy=!!Mb,Cb=Mb=null,t.current=n,FV(n),d9(),Or=a,Hr=A,ml.transition=s}else t.current=n;if(g1&&(g1=!1,Fc=t,A_=i),s=t.pendingLanes,s===0&&(qc=null),m9(n.stateNode),aa(t,Zi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(l_)throw l_=!1,t=qb,qb=null,t;return A_&1&&t.tag!==0&&Rf(),s=t.pendingLanes,s&1?t===Zb?eg++:(eg=0,Zb=t):eg=0,ch(),null}function Rf(){if(Fc!==null){var t=_L(A_),e=ml.transition,n=Hr;try{if(ml.transition=null,Hr=16>t?16:t,Fc===null)var r=!1;else{if(t=Fc,Fc=null,A_=0,Or&6)throw Error(Ot(331));var i=Or;for(Or|=4,vn=t.current;vn!==null;){var s=vn,A=s.child;if(vn.flags&16){var a=s.deletions;if(a!==null){for(var y=0;y<a.length;y++){var w=a[y];for(vn=w;vn!==null;){var M=vn;switch(M.tag){case 0:case 11:case 15:Kp(8,M,s)}var C=M.child;if(C!==null)C.return=M,vn=C;else for(;vn!==null;){M=vn;var k=M.sibling,U=M.return;if(kD(M),M===w){vn=null;break}if(k!==null){k.return=U,vn=k;break}vn=U}}}var H=s.alternate;if(H!==null){var q=H.child;if(q!==null){H.child=null;do{var se=q.sibling;q.sibling=null,q=se}while(q!==null)}}vn=s}}if(s.subtreeFlags&2064&&A!==null)A.return=s,vn=A;else e:for(;vn!==null;){if(s=vn,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Kp(9,s,s.return)}var Z=s.sibling;if(Z!==null){Z.return=s.return,vn=Z;break e}vn=s.return}}var J=t.current;for(vn=J;vn!==null;){A=vn;var re=A.child;if(A.subtreeFlags&2064&&re!==null)re.return=A,vn=re;else e:for(A=J;vn!==null;){if(a=vn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:I2(9,a)}}catch(_e){Gi(a,a.return,_e)}if(a===A){vn=null;break e}var de=a.sibling;if(de!==null){de.return=a.return,vn=de;break e}vn=a.return}}if(Or=i,ch(),NA&&typeof NA.onPostCommitFiberRoot=="function")try{NA.onPostCommitFiberRoot(w2,t)}catch{}r=!0}return r}finally{Hr=n,ml.transition=e}}return!1}function ZM(t,e,n){e=Xf(n,e),e=vD(t,e,1),t=Qc(t,e,1),e=No(),t!==null&&(rm(t,1,e),aa(t,e))}function Gi(t,e,n){if(t.tag===3)ZM(t,t,n);else for(;e!==null;){if(e.tag===3){ZM(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qc===null||!qc.has(r))){t=Xf(n,t),t=xD(e,t,1),e=Qc(e,t,1),t=No(),e!==null&&(rm(e,1,t),aa(e,t));break}}e=e.return}}function $V(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=No(),t.pingedLanes|=t.suspendedLanes&n,Ss===t&&(Vs&n)===n&&(cs===4||cs===3&&(Vs&130023424)===Vs&&500>Zi()-yT?Uh(t,0):mT|=n),aa(t,e)}function VD(t,e){e===0&&(t.mode&1?(e=o1,o1<<=1,!(o1&130023424)&&(o1=4194304)):e=1);var n=No();t=$u(t,e),t!==null&&(rm(t,e,n),aa(t,n))}function HV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VD(t,n)}function WV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ot(314))}r!==null&&r.delete(e),VD(t,n)}var GD;GD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sa.current)ia=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ia=!1,DV(t,e,n);ia=!!(t.flags&131072)}else ia=!1,wi&&e.flags&1048576&&HL(e,e_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fy(t,e),t=e.pendingProps;var i=Qf(e,yo.current);Df(e,n),i=cT(null,e,r,t,i,n);var s=hT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oa(r)?(s=!0,Ky(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oT(e),i.updater=C2,e.stateNode=i,i._reactInternals=e,Ob(e,r,t,n),e=Ub(null,e,r,!0,s,n)):(e.tag=0,wi&&s&&JE(e),Do(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qV(r),t=Wl(r,t),i){case 0:e=Nb(null,e,r,t,n);break e;case 1:e=NM(null,e,r,t,n);break e;case 11:e=OM(null,e,r,t,n);break e;case 14:e=FM(null,e,r,Wl(r.type,t),n);break e}throw Error(Ot(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wl(r,i),Nb(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wl(r,i),NM(t,e,r,i,n);case 3:e:{if(TD(e),t===null)throw Error(Ot(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ZL(t,e),r_(e,r,null,n);var A=e.memoizedState;if(r=A.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Xf(Error(Ot(423)),e),e=UM(t,e,r,n,i);break e}else if(r!==i){i=Xf(Error(Ot(424)),e),e=UM(t,e,r,n,i);break e}else for(Ba=Wc(e.stateNode.containerInfo.firstChild),Oa=e,wi=!0,Zl=null,n=JL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qf(),r===i){e=Hu(t,e,n);break e}Do(t,e,r,n)}e=e.child}return e;case 5:return eD(e),t===null&&Rb(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,A=i.children,Pb(r,i)?A=null:s!==null&&Pb(r,s)&&(e.flags|=32),ED(t,e),Do(t,e,A,n),e.child;case 6:return t===null&&Rb(e),null;case 13:return SD(t,e,n);case 4:return aT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zf(e,null,r,n):Do(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wl(r,i),OM(t,e,r,i,n);case 7:return Do(t,e,e.pendingProps,n),e.child;case 8:return Do(t,e,e.pendingProps.children,n),e.child;case 12:return Do(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,A=i.value,li(t_,r._currentValue),r._currentValue=A,s!==null)if(oA(s.value,A)){if(s.children===i.children&&!sa.current){e=Hu(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){A=s.child;for(var y=a.firstContext;y!==null;){if(y.context===r){if(s.tag===1){y=Fu(-1,n&-n),y.tag=2;var w=s.updateQueue;if(w!==null){w=w.shared;var M=w.pending;M===null?y.next=y:(y.next=M.next,M.next=y),w.pending=y}}s.lanes|=n,y=s.alternate,y!==null&&(y.lanes|=n),Bb(s.return,n,e),a.lanes|=n;break}y=y.next}}else if(s.tag===10)A=s.type===e.type?null:s.child;else if(s.tag===18){if(A=s.return,A===null)throw Error(Ot(341));A.lanes|=n,a=A.alternate,a!==null&&(a.lanes|=n),Bb(A,n,e),A=s.sibling}else A=s.child;if(A!==null)A.return=s;else for(A=s;A!==null;){if(A===e){A=null;break}if(s=A.sibling,s!==null){s.return=A.return,A=s;break}A=A.return}s=A}Do(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Df(e,n),i=vl(i),r=r(i),e.flags|=1,Do(t,e,r,n),e.child;case 14:return r=e.type,i=Wl(r,e.pendingProps),i=Wl(r.type,i),FM(t,e,r,i,n);case 15:return wD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wl(r,i),fy(t,e),e.tag=1,oa(r)?(t=!0,Ky(e)):t=!1,Df(e,n),XL(e,r,i),Ob(e,r,i,n),Ub(null,e,r,!0,t,n);case 19:return MD(t,e,n);case 22:return bD(t,e,n)}throw Error(Ot(156,e.tag))};function jD(t,e){return pL(t,e)}function QV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pl(t,e,n,r){return new QV(t,e,n,r)}function wT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qV(t){if(typeof t=="function")return wT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===VE)return 11;if(t===GE)return 14}return 2}function Yc(t,e){var n=t.alternate;return n===null?(n=pl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gy(t,e,n,r,i,s){var A=2;if(r=t,typeof t=="function")wT(t)&&(A=1);else if(typeof t=="string")A=5;else e:switch(t){case J0:return Vh(n.children,i,s,e);case UE:A=8,i|=8;break;case ab:return t=pl(12,n,e,i|2),t.elementType=ab,t.lanes=s,t;case lb:return t=pl(13,n,e,i),t.elementType=lb,t.lanes=s,t;case Ab:return t=pl(19,n,e,i),t.elementType=Ab,t.lanes=s,t;case K8:return L2(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y8:A=10;break e;case X8:A=9;break e;case VE:A=11;break e;case GE:A=14;break e;case kc:A=16,r=null;break e}throw Error(Ot(130,t==null?t:typeof t,""))}return e=pl(A,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vh(t,e,n,r){return t=pl(7,t,r,e),t.lanes=n,t}function L2(t,e,n,r){return t=pl(22,t,r,e),t.elementType=K8,t.lanes=n,t.stateNode={isHidden:!1},t}function Bx(t,e,n){return t=pl(6,t,null,e),t.lanes=n,t}function zx(t,e,n){return e=pl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gx(0),this.expirationTimes=gx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bT(t,e,n,r,i,s,A,a,y){return t=new ZV(t,e,n,a,y),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pl(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oT(s),t}function YV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K0,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $D(t){if(!t)return rh;t=t._reactInternals;e:{if(f0(t)!==t||t.tag!==1)throw Error(Ot(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ot(171))}if(t.tag===1){var n=t.type;if(oa(n))return jL(t,n,e)}return e}function HD(t,e,n,r,i,s,A,a,y){return t=bT(n,r,!0,t,i,s,A,a,y),t.context=$D(null),n=t.current,r=No(),i=Zc(n),s=Fu(r,i),s.callback=e??null,Qc(n,s,i),t.current.lanes=i,rm(t,i,r),aa(t,r),t}function D2(t,e,n,r){var i=e.current,s=No(),A=Zc(i);return n=$D(n),e.context===null?e.context=n:e.pendingContext=n,e=Fu(s,A),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qc(i,e,A),t!==null&&(iA(t,i,A,s),uy(t,i,A)),A}function c_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ET(t,e){YM(t,e),(t=t.alternate)&&YM(t,e)}function XV(){return null}var WD=typeof reportError=="function"?reportError:function(t){console.error(t)};function TT(t){this._internalRoot=t}R2.prototype.render=TT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ot(409));D2(t,e,null,null)};R2.prototype.unmount=TT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zh(function(){D2(null,t,null,null)}),e[ju]=null}};function R2(t){this._internalRoot=t}R2.prototype.unstable_scheduleHydration=function(t){if(t){var e=wL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rc.length&&e!==0&&e<Rc[n].priority;n++);Rc.splice(n,0,t),n===0&&EL(t)}};function ST(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function B2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XM(){}function KV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var w=c_(A);s.call(w)}}var A=HD(e,r,t,0,null,!1,!1,"",XM);return t._reactRootContainer=A,t[ju]=A.current,yg(t.nodeType===8?t.parentNode:t),Zh(),A}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var w=c_(y);a.call(w)}}var y=bT(t,0,!1,null,null,!1,!1,"",XM);return t._reactRootContainer=y,t[ju]=y.current,yg(t.nodeType===8?t.parentNode:t),Zh(function(){D2(e,y,n,r)}),y}function z2(t,e,n,r,i){var s=n._reactRootContainer;if(s){var A=s;if(typeof i=="function"){var a=i;i=function(){var y=c_(A);a.call(y)}}D2(e,A,t,i)}else A=KV(n,e,t,i,r);return c_(A)}vL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rp(e.pendingLanes);n!==0&&(HE(e,n|1),aa(e,Zi()),!(Or&6)&&(Kf=Zi()+500,ch()))}break;case 13:Zh(function(){var r=$u(t,1);if(r!==null){var i=No();iA(r,t,1,i)}}),ET(t,1)}};WE=function(t){if(t.tag===13){var e=$u(t,134217728);if(e!==null){var n=No();iA(e,t,134217728,n)}ET(t,134217728)}};xL=function(t){if(t.tag===13){var e=Zc(t),n=$u(t,e);if(n!==null){var r=No();iA(n,t,e,r)}ET(t,e)}};wL=function(){return Hr};bL=function(t,e){var n=Hr;try{return Hr=t,e()}finally{Hr=n}};_b=function(t,e,n){switch(e){case"input":if(hb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=S2(r);if(!i)throw Error(Ot(90));eL(r),hb(r,i)}}}break;case"textarea":nL(t,n);break;case"select":e=n.value,e!=null&&Pf(t,!!n.multiple,e,!1)}};AL=_T;uL=Zh;var JV={usingClientEntryPoint:!1,Events:[sm,rf,S2,aL,lL,_T]},rp={findFiberByHostInstance:Lh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},eG={bundleType:rp.bundleType,version:rp.version,rendererPackageName:rp.rendererPackageName,rendererConfig:rp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fL(t),t===null?null:t.stateNode},findFiberByHostInstance:rp.findFiberByHostInstance||XV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m1.isDisabled&&m1.supportsFiber)try{w2=m1.inject(eG),NA=m1}catch{}}Ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JV;Ua.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ST(e))throw Error(Ot(200));return YV(t,e,null,n)};Ua.createRoot=function(t,e){if(!ST(t))throw Error(Ot(299));var n=!1,r="",i=WD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bT(t,1,!1,null,null,n,!1,r,i),t[ju]=e.current,yg(t.nodeType===8?t.parentNode:t),new TT(e)};Ua.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ot(188)):(t=Object.keys(t).join(","),Error(Ot(268,t)));return t=fL(e),t=t===null?null:t.stateNode,t};Ua.flushSync=function(t){return Zh(t)};Ua.hydrate=function(t,e,n){if(!B2(e))throw Error(Ot(200));return z2(null,t,e,!0,n)};Ua.hydrateRoot=function(t,e,n){if(!ST(t))throw Error(Ot(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",A=WD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(A=n.onRecoverableError)),e=HD(e,null,t,1,n??null,i,!1,s,A),t[ju]=e.current,yg(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new R2(e)};Ua.render=function(t,e,n){if(!B2(e))throw Error(Ot(200));return z2(null,t,e,!1,n)};Ua.unmountComponentAtNode=function(t){if(!B2(t))throw Error(Ot(40));return t._reactRootContainer?(Zh(function(){z2(null,null,t,!1,function(){t._reactRootContainer=null,t[ju]=null})}),!0):!1};Ua.unstable_batchedUpdates=_T;Ua.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!B2(n))throw Error(Ot(200));if(t==null||t._reactInternals===void 0)throw Error(Ot(38));return z2(t,e,n,!1,r)};Ua.version="18.2.0-next-9e3b772b8-20220608";function QD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QD)}catch(t){console.error(t)}}QD(),H8.exports=Ua;var am=H8.exports;const tG=tm(am),nG=LE({__proto__:null,default:tG},[am]);var qD,KM=am;qD=KM.createRoot,KM.hydrateRoot;/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ji(){return ji=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ji.apply(this,arguments)}var qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qi||(qi={}));const JM="popstate";function rG(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:A,hash:a}=r.location;return Mg("",{pathname:s,search:A,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:lm(i)}return sG(e,n,null,t)}function Rr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iG(){return Math.random().toString(36).substr(2,8)}function eC(t,e){return{usr:t.state,key:t.key,idx:e}}function Mg(t,e,n,r){return n===void 0&&(n=null),ji({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nc(e):e,{state:n,key:e&&e.key||r||iG()})}function lm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sG(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,A=i.history,a=qi.Pop,y=null,w=M();w==null&&(w=0,A.replaceState(ji({},A.state,{idx:w}),""));function M(){return(A.state||{idx:null}).idx}function C(){a=qi.Pop;let se=M(),Z=se==null?null:se-w;w=se,y&&y({action:a,location:q.location,delta:Z})}function k(se,Z){a=qi.Push;let J=Mg(q.location,se,Z);n&&n(J,se),w=M()+1;let re=eC(J,w),de=q.createHref(J);try{A.pushState(re,"",de)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;i.location.assign(de)}s&&y&&y({action:a,location:q.location,delta:1})}function U(se,Z){a=qi.Replace;let J=Mg(q.location,se,Z);n&&n(J,se),w=M();let re=eC(J,w),de=q.createHref(J);A.replaceState(re,"",de),s&&y&&y({action:a,location:q.location,delta:0})}function H(se){let Z=i.location.origin!=="null"?i.location.origin:i.location.href,J=typeof se=="string"?se:lm(se);return Rr(Z,"No window.location.(origin|href) available to create URL for href: "+J),new URL(J,Z)}let q={get action(){return a},get location(){return t(i,A)},listen(se){if(y)throw new Error("A history only accepts one active listener");return i.addEventListener(JM,C),y=se,()=>{i.removeEventListener(JM,C),y=null}},createHref(se){return e(i,se)},createURL:H,encodeLocation(se){let Z=H(se);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:k,replace:U,go(se){return A.go(se)}};return q}var Vi;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vi||(Vi={}));const oG=new Set(["lazy","caseSensitive","path","id","index","children"]);function aG(t){return t.index===!0}function Kb(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let A=[...n,s],a=typeof i.id=="string"?i.id:A.join("-");if(Rr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Rr(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),aG(i)){let y=ji({},i,e(i),{id:a});return r[a]=y,y}else{let y=ji({},i,e(i),{id:a,children:void 0});return r[a]=y,i.children&&(y.children=Kb(i.children,e,A,r)),y}})}function cf(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?nc(e):e,i=Am(r.pathname||"/",n);if(i==null)return null;let s=ZD(t);AG(s);let A=null;for(let a=0;A==null&&a<s.length;++a)A=yG(s[a],xG(i));return A}function lG(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function ZD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,A,a)=>{let y={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:A,route:s};y.relativePath.startsWith("/")&&(Rr(y.relativePath.startsWith(r),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(r.length));let w=Gh([r,y.relativePath]),M=n.concat(y);s.children&&s.children.length>0&&(Rr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),ZD(s.children,e,M,w)),!(s.path==null&&!s.index)&&e.push({path:w,score:gG(w,s.index),routesMeta:M})};return t.forEach((s,A)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,A);else for(let y of YD(s.path))i(s,A,y)}),e}function YD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let A=YD(r.join("/")),a=[];return a.push(...A.map(y=>y===""?s:[s,y].join("/"))),i&&a.push(...A),a.map(y=>t.startsWith("/")&&y===""?"/":y)}function AG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mG(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uG=/^:[\w-]+$/,cG=3,hG=2,fG=1,dG=10,pG=-2,tC=t=>t==="*";function gG(t,e){let n=t.split("/"),r=n.length;return n.some(tC)&&(r+=pG),e&&(r+=hG),n.filter(i=>!tC(i)).reduce((i,s)=>i+(uG.test(s)?cG:s===""?fG:dG),r)}function mG(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function yG(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let A=0;A<n.length;++A){let a=n[A],y=A===n.length-1,w=i==="/"?e:e.slice(i.length)||"/",M=_G({path:a.relativePath,caseSensitive:a.caseSensitive,end:y},w);if(!M)return null;Object.assign(r,M.params);let C=a.route;s.push({params:r,pathname:Gh([i,M.pathname]),pathnameBase:MG(Gh([i,M.pathnameBase])),route:C}),M.pathnameBase!=="/"&&(i=Gh([i,M.pathnameBase]))}return s}function _G(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vG(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],A=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((w,M,C)=>{let{paramName:k,isOptional:U}=M;if(k==="*"){let q=a[C]||"";A=s.slice(0,s.length-q.length).replace(/(.)\/+$/,"$1")}const H=a[C];return U&&!H?w[k]=void 0:w[k]=wG(H||"",k),w},{}),pathname:s,pathnameBase:A,pattern:t}}function vG(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(A,a,y)=>(r.push({paramName:a,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function xG(t){try{return decodeURI(t)}catch(e){return Yh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wG(t,e){try{return decodeURIComponent(t)}catch(n){return Yh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Am(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bG(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?nc(t):t;return{pathname:n?n.startsWith("/")?n:EG(n,e):e,search:CG(r),hash:PG(i)}}function EG(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ox(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function TG(t,e){let n=XD(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SG(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=nc(t):(i=ji({},t),Rr(!i.pathname||!i.pathname.includes("?"),Ox("?","pathname","search",i)),Rr(!i.pathname||!i.pathname.includes("#"),Ox("#","pathname","hash",i)),Rr(!i.search||!i.search.includes("#"),Ox("#","search","hash",i)));let s=t===""||i.pathname==="",A=s?"/":i.pathname,a;if(A==null)a=n;else{let C=e.length-1;if(!r&&A.startsWith("..")){let k=A.split("/");for(;k[0]==="..";)k.shift(),C-=1;i.pathname=k.join("/")}a=C>=0?e[C]:"/"}let y=bG(i,a),w=A&&A!=="/"&&A.endsWith("/"),M=(s||A===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(w||M)&&(y.pathname+="/"),y}const Gh=t=>t.join("/").replace(/\/\/+/g,"/"),MG=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CG=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PG=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class MT{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function KD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JD=["post","put","patch","delete"],IG=new Set(JD),kG=["get",...JD],LG=new Set(kG),DG=new Set([301,302,303,307,308]),RG=new Set([307,308]),Fx={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},BG={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ip={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},eR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zG=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),tR="remix-router-transitions";function OG(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Rr(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let ye=t.detectErrorBoundary;i=ot=>({hasErrorBoundary:ye(ot)})}else i=zG;let s={},A=Kb(t.routes,i,void 0,s),a,y=t.basename||"/",w=ji({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),M=null,C=new Set,k=null,U=null,H=null,q=t.hydrationData!=null,se=cf(A,t.history.location,y),Z=null;if(se==null){let ye=ll(404,{pathname:t.history.location.pathname}),{matches:ot,route:gt}=AC(A);se=ot,Z={[gt.id]:ye}}let J,re=se.some(ye=>ye.route.lazy),de=se.some(ye=>ye.route.loader);if(re)J=!1;else if(!de)J=!0;else if(w.v7_partialHydration){let ye=t.hydrationData?t.hydrationData.loaderData:null,ot=t.hydrationData?t.hydrationData.errors:null;J=se.every(gt=>gt.route.loader&&gt.route.loader.hydrate!==!0&&(ye&&ye[gt.route.id]!==void 0||ot&&ot[gt.route.id]!==void 0))}else J=t.hydrationData!=null;let _e,fe={historyAction:t.history.action,location:t.history.location,matches:se,initialized:J,navigation:Fx,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},Fe=qi.Pop,We=!1,qe,Ke=!1,Oe=new Map,tt=null,Ye=!1,pt=!1,en=[],Mt=[],Qt=new Map,xt=0,Tt=-1,Xt=new Map,Mn=new Set,Cn=new Map,vr=new Map,Gn=new Set,Jn=new Map,ir=new Map,jn=!1;function Lr(){if(M=t.history.listen(ye=>{let{action:ot,location:gt,delta:Lt}=ye;if(jn){jn=!1;return}Yh(ir.size===0||Lt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let qt=$i({currentLocation:fe.location,nextLocation:gt,historyAction:ot});if(qt&&Lt!=null){jn=!0,t.history.go(Lt*-1),ti(qt,{state:"blocked",location:gt,proceed(){ti(qt,{state:"proceeding",proceed:void 0,reset:void 0,location:gt}),t.history.go(Lt)},reset(){let Kt=new Map(fe.blockers);Kt.set(qt,ip),yn({blockers:Kt})}});return}return lr(ot,gt)}),n){qG(e,Oe);let ye=()=>ZG(e,Oe);e.addEventListener("pagehide",ye),tt=()=>e.removeEventListener("pagehide",ye)}return fe.initialized||lr(qi.Pop,fe.location,{initialHydration:!0}),_e}function St(){M&&M(),tt&&tt(),C.clear(),qe&&qe.abort(),fe.fetchers.forEach((ye,ot)=>Si(ot)),fe.blockers.forEach((ye,ot)=>mi(ot))}function ln(ye){return C.add(ye),()=>C.delete(ye)}function yn(ye,ot){ot===void 0&&(ot={}),fe=ji({},fe,ye);let gt=[],Lt=[];w.v7_fetcherPersist&&fe.fetchers.forEach((qt,Kt)=>{qt.state==="idle"&&(Gn.has(Kt)?Lt.push(Kt):gt.push(Kt))}),[...C].forEach(qt=>qt(fe,{deletedFetchers:Lt,unstable_viewTransitionOpts:ot.viewTransitionOpts,unstable_flushSync:ot.flushSync===!0})),w.v7_fetcherPersist&&(gt.forEach(qt=>fe.fetchers.delete(qt)),Lt.forEach(qt=>Si(qt)))}function bt(ye,ot,gt){var Lt,qt;let{flushSync:Kt}=gt===void 0?{}:gt,En=fe.actionData!=null&&fe.navigation.formMethod!=null&&ql(fe.navigation.formMethod)&&fe.navigation.state==="loading"&&((Lt=ye.state)==null?void 0:Lt._isRedirect)!==!0,hn;ot.actionData?Object.keys(ot.actionData).length>0?hn=ot.actionData:hn=null:En?hn=fe.actionData:hn=null;let an=ot.loaderData?lC(fe.loaderData,ot.loaderData,ot.matches||[],ot.errors):fe.loaderData,Dn=fe.blockers;Dn.size>0&&(Dn=new Map(Dn),Dn.forEach((K,W)=>Dn.set(W,ip)));let xr=We===!0||fe.navigation.formMethod!=null&&ql(fe.navigation.formMethod)&&((qt=ye.state)==null?void 0:qt._isRedirect)!==!0;a&&(A=a,a=void 0),Ye||Fe===qi.Pop||(Fe===qi.Push?t.history.push(ye,ye.state):Fe===qi.Replace&&t.history.replace(ye,ye.state));let fn;if(Fe===qi.Pop){let K=Oe.get(fe.location.pathname);K&&K.has(ye.pathname)?fn={currentLocation:fe.location,nextLocation:ye}:Oe.has(ye.pathname)&&(fn={currentLocation:ye,nextLocation:fe.location})}else if(Ke){let K=Oe.get(fe.location.pathname);K?K.add(ye.pathname):(K=new Set([ye.pathname]),Oe.set(fe.location.pathname,K)),fn={currentLocation:fe.location,nextLocation:ye}}yn(ji({},ot,{actionData:hn,loaderData:an,historyAction:Fe,location:ye,initialized:!0,navigation:Fx,revalidation:"idle",restoreScrollPosition:Xi(ye,ot.matches||fe.matches),preventScrollReset:xr,blockers:Dn}),{viewTransitionOpts:fn,flushSync:Kt===!0}),Fe=qi.Pop,We=!1,Ke=!1,Ye=!1,pt=!1,en=[],Mt=[]}async function sr(ye,ot){if(typeof ye=="number"){t.history.go(ye);return}let gt=Jb(fe.location,fe.matches,y,w.v7_prependBasename,ye,w.v7_relativeSplatPath,ot?.fromRouteId,ot?.relative),{path:Lt,submission:qt,error:Kt}=nC(w.v7_normalizeFormMethod,!1,gt,ot),En=fe.location,hn=Mg(fe.location,Lt,ot&&ot.state);hn=ji({},hn,t.history.encodeLocation(hn));let an=ot&&ot.replace!=null?ot.replace:void 0,Dn=qi.Push;an===!0?Dn=qi.Replace:an===!1||qt!=null&&ql(qt.formMethod)&&qt.formAction===fe.location.pathname+fe.location.search&&(Dn=qi.Replace);let xr=ot&&"preventScrollReset"in ot?ot.preventScrollReset===!0:void 0,fn=(ot&&ot.unstable_flushSync)===!0,K=$i({currentLocation:En,nextLocation:hn,historyAction:Dn});if(K){ti(K,{state:"blocked",location:hn,proceed(){ti(K,{state:"proceeding",proceed:void 0,reset:void 0,location:hn}),sr(ye,ot)},reset(){let W=new Map(fe.blockers);W.set(K,ip),yn({blockers:W})}});return}return await lr(Dn,hn,{submission:qt,pendingError:Kt,preventScrollReset:xr,replace:ot&&ot.replace,enableViewTransition:ot&&ot.unstable_viewTransition,flushSync:fn})}function er(){if(rs(),yn({revalidation:"loading"}),fe.navigation.state!=="submitting"){if(fe.navigation.state==="idle"){lr(fe.historyAction,fe.location,{startUninterruptedRevalidation:!0});return}lr(Fe||fe.historyAction,fe.navigation.location,{overrideNavigation:fe.navigation})}}async function lr(ye,ot,gt){qe&&qe.abort(),qe=null,Fe=ye,Ye=(gt&&gt.startUninterruptedRevalidation)===!0,Ur(fe.location,fe.matches),We=(gt&&gt.preventScrollReset)===!0,Ke=(gt&&gt.enableViewTransition)===!0;let Lt=a||A,qt=gt&&gt.overrideNavigation,Kt=cf(Lt,ot,y),En=(gt&&gt.flushSync)===!0;if(!Kt){let W=ll(404,{pathname:ot.pathname}),{matches:ee,route:ce}=AC(Lt);Bt(),bt(ot,{matches:ee,loaderData:{},errors:{[ce.id]:W}},{flushSync:En});return}if(fe.initialized&&!pt&&GG(fe.location,ot)&&!(gt&&gt.submission&&ql(gt.submission.formMethod))){bt(ot,{matches:Kt},{flushSync:En});return}qe=new AbortController;let hn=op(t.history,ot,qe.signal,gt&&gt.submission),an,Dn;if(gt&&gt.pendingError)Dn={[tg(Kt).route.id]:gt.pendingError};else if(gt&&gt.submission&&ql(gt.submission.formMethod)){let W=await gr(hn,ot,gt.submission,Kt,{replace:gt.replace,flushSync:En});if(W.shortCircuited)return;an=W.pendingActionData,Dn=W.pendingActionError,qt=Nx(ot,gt.submission),En=!1,hn=new Request(hn.url,{signal:hn.signal})}let{shortCircuited:xr,loaderData:fn,errors:K}=await Ar(hn,ot,Kt,qt,gt&&gt.submission,gt&&gt.fetcherSubmission,gt&&gt.replace,gt&&gt.initialHydration===!0,En,an,Dn);xr||(qe=null,bt(ot,ji({matches:Kt},an?{actionData:an}:{},{loaderData:fn,errors:K})))}async function gr(ye,ot,gt,Lt,qt){qt===void 0&&(qt={}),rs();let Kt=WG(ot,gt);yn({navigation:Kt},{flushSync:qt.flushSync===!0});let En,hn=t3(Lt,ot);if(!hn.route.action&&!hn.route.lazy)En={type:Vi.error,error:ll(405,{method:ye.method,pathname:ot.pathname,routeId:hn.route.id})};else if(En=await sp("action",ye,hn,Lt,s,i,y,w.v7_relativeSplatPath),ye.signal.aborted)return{shortCircuited:!0};if(zh(En)){let an;return qt&&qt.replace!=null?an=qt.replace:an=En.location===fe.location.pathname+fe.location.search,await $n(fe,En,{submission:gt,replace:an}),{shortCircuited:!0}}if(hf(En)){let an=tg(Lt,hn.route.id);return(qt&&qt.replace)!==!0&&(Fe=qi.Push),{pendingActionData:{},pendingActionError:{[an.route.id]:En.error}}}if(Bh(En))throw ll(400,{type:"defer-action"});return{pendingActionData:{[hn.route.id]:En.data}}}async function Ar(ye,ot,gt,Lt,qt,Kt,En,hn,an,Dn,xr){let fn=Lt||Nx(ot,qt),K=qt||Kt||hC(fn),W=a||A,[ee,ce]=rC(t.history,fe,gt,K,ot,w.v7_partialHydration&&hn===!0,pt,en,Mt,Gn,Cn,Mn,W,y,Dn,xr);if(Bt(vt=>!(gt&&gt.some(wt=>wt.route.id===vt))||ee&&ee.some(wt=>wt.route.id===vt)),Tt=++xt,ee.length===0&&ce.length===0){let vt=Ai();return bt(ot,ji({matches:gt,loaderData:{},errors:xr||null},Dn?{actionData:Dn}:{},vt?{fetchers:new Map(fe.fetchers)}:{}),{flushSync:an}),{shortCircuited:!0}}if(!Ye&&(!w.v7_partialHydration||!hn)){ce.forEach(wt=>{let Jt=fe.fetchers.get(wt.key),Ut=ap(void 0,Jt?Jt.data:void 0);fe.fetchers.set(wt.key,Ut)});let vt=Dn||fe.actionData;yn(ji({navigation:fn},vt?Object.keys(vt).length===0?{actionData:null}:{actionData:vt}:{},ce.length>0?{fetchers:new Map(fe.fetchers)}:{}),{flushSync:an})}ce.forEach(vt=>{Qt.has(vt.key)&&kt(vt.key),vt.controller&&Qt.set(vt.key,vt.controller)});let o=()=>ce.forEach(vt=>kt(vt.key));qe&&qe.signal.addEventListener("abort",o);let{results:G,loaderResults:De,fetcherResults:ke}=await Ti(fe.matches,gt,ee,ce,ye);if(ye.signal.aborted)return{shortCircuited:!0};qe&&qe.signal.removeEventListener("abort",o),ce.forEach(vt=>Qt.delete(vt.key));let Pe=uC(G);if(Pe){if(Pe.idx>=ee.length){let vt=ce[Pe.idx-ee.length].key;Mn.add(vt)}return await $n(fe,Pe.result,{replace:En}),{shortCircuited:!0}}let{loaderData:Le,errors:Ze}=aC(fe,gt,ee,De,xr,ce,ke,Jn);Jn.forEach((vt,wt)=>{vt.subscribe(Jt=>{(Jt||vt.done)&&Jn.delete(wt)})});let lt=Ai(),Qe=Vn(Tt),ft=lt||Qe||ce.length>0;return ji({loaderData:Le,errors:Ze},ft?{fetchers:new Map(fe.fetchers)}:{})}function Zr(ye,ot,gt,Lt){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Qt.has(ye)&&kt(ye);let qt=(Lt&&Lt.unstable_flushSync)===!0,Kt=a||A,En=Jb(fe.location,fe.matches,y,w.v7_prependBasename,gt,w.v7_relativeSplatPath,ot,Lt?.relative),hn=cf(Kt,En,y);if(!hn){Yr(ye,ot,ll(404,{pathname:En}),{flushSync:qt});return}let{path:an,submission:Dn,error:xr}=nC(w.v7_normalizeFormMethod,!0,En,Lt);if(xr){Yr(ye,ot,xr,{flushSync:qt});return}let fn=t3(hn,an);if(We=(Lt&&Lt.preventScrollReset)===!0,Dn&&ql(Dn.formMethod)){Zn(ye,ot,an,fn,hn,qt,Dn);return}Cn.set(ye,{routeId:ot,path:an}),Ei(ye,ot,an,fn,hn,qt,Dn)}async function Zn(ye,ot,gt,Lt,qt,Kt,En){if(rs(),Cn.delete(ye),!Lt.route.action&&!Lt.route.lazy){let wt=ll(405,{method:En.formMethod,pathname:gt,routeId:ot});Yr(ye,ot,wt,{flushSync:Kt});return}let hn=fe.fetchers.get(ye);Er(ye,QG(En,hn),{flushSync:Kt});let an=new AbortController,Dn=op(t.history,gt,an.signal,En);Qt.set(ye,an);let xr=xt,fn=await sp("action",Dn,Lt,qt,s,i,y,w.v7_relativeSplatPath);if(Dn.signal.aborted){Qt.get(ye)===an&&Qt.delete(ye);return}if(w.v7_fetcherPersist&&Gn.has(ye)){if(zh(fn)||hf(fn)){Er(ye,Ic(void 0));return}}else{if(zh(fn))if(Qt.delete(ye),Tt>xr){Er(ye,Ic(void 0));return}else return Mn.add(ye),Er(ye,ap(En)),$n(fe,fn,{fetcherSubmission:En});if(hf(fn)){Yr(ye,ot,fn.error);return}}if(Bh(fn))throw ll(400,{type:"defer-action"});let K=fe.navigation.location||fe.location,W=op(t.history,K,an.signal),ee=a||A,ce=fe.navigation.state!=="idle"?cf(ee,fe.navigation.location,y):fe.matches;Rr(ce,"Didn't find any matches after fetcher action");let o=++xt;Xt.set(ye,o);let G=ap(En,fn.data);fe.fetchers.set(ye,G);let[De,ke]=rC(t.history,fe,ce,En,K,!1,pt,en,Mt,Gn,Cn,Mn,ee,y,{[Lt.route.id]:fn.data},void 0);ke.filter(wt=>wt.key!==ye).forEach(wt=>{let Jt=wt.key,Ut=fe.fetchers.get(Jt),xn=ap(void 0,Ut?Ut.data:void 0);fe.fetchers.set(Jt,xn),Qt.has(Jt)&&kt(Jt),wt.controller&&Qt.set(Jt,wt.controller)}),yn({fetchers:new Map(fe.fetchers)});let Pe=()=>ke.forEach(wt=>kt(wt.key));an.signal.addEventListener("abort",Pe);let{results:Le,loaderResults:Ze,fetcherResults:lt}=await Ti(fe.matches,ce,De,ke,W);if(an.signal.aborted)return;an.signal.removeEventListener("abort",Pe),Xt.delete(ye),Qt.delete(ye),ke.forEach(wt=>Qt.delete(wt.key));let Qe=uC(Le);if(Qe){if(Qe.idx>=De.length){let wt=ke[Qe.idx-De.length].key;Mn.add(wt)}return $n(fe,Qe.result)}let{loaderData:ft,errors:vt}=aC(fe,fe.matches,De,Ze,void 0,ke,lt,Jn);if(fe.fetchers.has(ye)){let wt=Ic(fn.data);fe.fetchers.set(ye,wt)}Vn(o),fe.navigation.state==="loading"&&o>Tt?(Rr(Fe,"Expected pending action"),qe&&qe.abort(),bt(fe.navigation.location,{matches:ce,loaderData:ft,errors:vt,fetchers:new Map(fe.fetchers)})):(yn({errors:vt,loaderData:lC(fe.loaderData,ft,ce,vt),fetchers:new Map(fe.fetchers)}),pt=!1)}async function Ei(ye,ot,gt,Lt,qt,Kt,En){let hn=fe.fetchers.get(ye);Er(ye,ap(En,hn?hn.data:void 0),{flushSync:Kt});let an=new AbortController,Dn=op(t.history,gt,an.signal);Qt.set(ye,an);let xr=xt,fn=await sp("loader",Dn,Lt,qt,s,i,y,w.v7_relativeSplatPath);if(Bh(fn)&&(fn=await iR(fn,Dn.signal,!0)||fn),Qt.get(ye)===an&&Qt.delete(ye),!Dn.signal.aborted){if(Gn.has(ye)){Er(ye,Ic(void 0));return}if(zh(fn))if(Tt>xr){Er(ye,Ic(void 0));return}else{Mn.add(ye),await $n(fe,fn);return}if(hf(fn)){Yr(ye,ot,fn.error);return}Rr(!Bh(fn),"Unhandled fetcher deferred data"),Er(ye,Ic(fn.data))}}async function $n(ye,ot,gt){let{submission:Lt,fetcherSubmission:qt,replace:Kt}=gt===void 0?{}:gt;ot.revalidate&&(pt=!0);let En=Mg(ye.location,ot.location,{_isRedirect:!0});if(Rr(En,"Expected a location on the redirect navigation"),n){let K=!1;if(ot.reloadDocument)K=!0;else if(eR.test(ot.location)){const W=t.history.createURL(ot.location);K=W.origin!==e.location.origin||Am(W.pathname,y)==null}if(K){Kt?e.location.replace(ot.location):e.location.assign(ot.location);return}}qe=null;let hn=Kt===!0?qi.Replace:qi.Push,{formMethod:an,formAction:Dn,formEncType:xr}=ye.navigation;!Lt&&!qt&&an&&Dn&&xr&&(Lt=hC(ye.navigation));let fn=Lt||qt;if(RG.has(ot.status)&&fn&&ql(fn.formMethod))await lr(hn,En,{submission:ji({},fn,{formAction:ot.location}),preventScrollReset:We});else{let K=Nx(En,Lt);await lr(hn,En,{overrideNavigation:K,fetcherSubmission:qt,preventScrollReset:We})}}async function Ti(ye,ot,gt,Lt,qt){let Kt=await Promise.all([...gt.map(an=>sp("loader",qt,an,ot,s,i,y,w.v7_relativeSplatPath)),...Lt.map(an=>an.matches&&an.match&&an.controller?sp("loader",op(t.history,an.path,an.controller.signal),an.match,an.matches,s,i,y,w.v7_relativeSplatPath):{type:Vi.error,error:ll(404,{pathname:an.path})})]),En=Kt.slice(0,gt.length),hn=Kt.slice(gt.length);return await Promise.all([cC(ye,gt,En,En.map(()=>qt.signal),!1,fe.loaderData),cC(ye,Lt.map(an=>an.match),hn,Lt.map(an=>an.controller?an.controller.signal:null),!0)]),{results:Kt,loaderResults:En,fetcherResults:hn}}function rs(){pt=!0,en.push(...Bt()),Cn.forEach((ye,ot)=>{Qt.has(ot)&&(Mt.push(ot),kt(ot))})}function Er(ye,ot,gt){gt===void 0&&(gt={}),fe.fetchers.set(ye,ot),yn({fetchers:new Map(fe.fetchers)},{flushSync:(gt&&gt.flushSync)===!0})}function Yr(ye,ot,gt,Lt){Lt===void 0&&(Lt={});let qt=tg(fe.matches,ot);Si(ye),yn({errors:{[qt.route.id]:gt},fetchers:new Map(fe.fetchers)},{flushSync:(Lt&&Lt.flushSync)===!0})}function Ps(ye){return w.v7_fetcherPersist&&(vr.set(ye,(vr.get(ye)||0)+1),Gn.has(ye)&&Gn.delete(ye)),fe.fetchers.get(ye)||BG}function Si(ye){let ot=fe.fetchers.get(ye);Qt.has(ye)&&!(ot&&ot.state==="loading"&&Xt.has(ye))&&kt(ye),Cn.delete(ye),Xt.delete(ye),Mn.delete(ye),Gn.delete(ye),fe.fetchers.delete(ye)}function ht(ye){if(w.v7_fetcherPersist){let ot=(vr.get(ye)||0)-1;ot<=0?(vr.delete(ye),Gn.add(ye)):vr.set(ye,ot)}else Si(ye);yn({fetchers:new Map(fe.fetchers)})}function kt(ye){let ot=Qt.get(ye);Rr(ot,"Expected fetch controller: "+ye),ot.abort(),Qt.delete(ye)}function is(ye){for(let ot of ye){let gt=Ps(ot),Lt=Ic(gt.data);fe.fetchers.set(ot,Lt)}}function Ai(){let ye=[],ot=!1;for(let gt of Mn){let Lt=fe.fetchers.get(gt);Rr(Lt,"Expected fetcher: "+gt),Lt.state==="loading"&&(Mn.delete(gt),ye.push(gt),ot=!0)}return is(ye),ot}function Vn(ye){let ot=[];for(let[gt,Lt]of Xt)if(Lt<ye){let qt=fe.fetchers.get(gt);Rr(qt,"Expected fetcher: "+gt),qt.state==="loading"&&(kt(gt),Xt.delete(gt),ot.push(gt))}return is(ot),ot.length>0}function Bi(ye,ot){let gt=fe.blockers.get(ye)||ip;return ir.get(ye)!==ot&&ir.set(ye,ot),gt}function mi(ye){fe.blockers.delete(ye),ir.delete(ye)}function ti(ye,ot){let gt=fe.blockers.get(ye)||ip;Rr(gt.state==="unblocked"&&ot.state==="blocked"||gt.state==="blocked"&&ot.state==="blocked"||gt.state==="blocked"&&ot.state==="proceeding"||gt.state==="blocked"&&ot.state==="unblocked"||gt.state==="proceeding"&&ot.state==="unblocked","Invalid blocker state transition: "+gt.state+" -> "+ot.state);let Lt=new Map(fe.blockers);Lt.set(ye,ot),yn({blockers:Lt})}function $i(ye){let{currentLocation:ot,nextLocation:gt,historyAction:Lt}=ye;if(ir.size===0)return;ir.size>1&&Yh(!1,"A router only supports one blocker at a time");let qt=Array.from(ir.entries()),[Kt,En]=qt[qt.length-1],hn=fe.blockers.get(Kt);if(!(hn&&hn.state==="proceeding")&&En({currentLocation:ot,nextLocation:gt,historyAction:Lt}))return Kt}function Bt(ye){let ot=[];return Jn.forEach((gt,Lt)=>{(!ye||ye(Lt))&&(gt.cancel(),ot.push(Lt),Jn.delete(Lt))}),ot}function Rn(ye,ot,gt){if(k=ye,H=ot,U=gt||null,!q&&fe.navigation===Fx){q=!0;let Lt=Xi(fe.location,fe.matches);Lt!=null&&yn({restoreScrollPosition:Lt})}return()=>{k=null,H=null,U=null}}function In(ye,ot){return U&&U(ye,ot.map(Lt=>lG(Lt,fe.loaderData)))||ye.key}function Ur(ye,ot){if(k&&H){let gt=In(ye,ot);k[gt]=H()}}function Xi(ye,ot){if(k){let gt=In(ye,ot),Lt=k[gt];if(typeof Lt=="number")return Lt}return null}function Pn(ye){s={},a=Kb(ye,i,void 0,s)}return _e={get basename(){return y},get future(){return w},get state(){return fe},get routes(){return A},get window(){return e},initialize:Lr,subscribe:ln,enableScrollRestoration:Rn,navigate:sr,fetch:Zr,revalidate:er,createHref:ye=>t.history.createHref(ye),encodeLocation:ye=>t.history.encodeLocation(ye),getFetcher:Ps,deleteFetcher:ht,dispose:St,getBlocker:Bi,deleteBlocker:mi,_internalFetchControllers:Qt,_internalActiveDeferreds:Jn,_internalSetRoutes:Pn},_e}function FG(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Jb(t,e,n,r,i,s,A,a){let y,w;if(A){y=[];for(let C of e)if(y.push(C),C.route.id===A){w=C;break}}else y=e,w=e[e.length-1];let M=SG(i||".",TG(y,s),Am(t.pathname,n)||t.pathname,a==="path");return i==null&&(M.search=t.search,M.hash=t.hash),(i==null||i===""||i===".")&&w&&w.route.index&&!CT(M.search)&&(M.search=M.search?M.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(M.pathname=M.pathname==="/"?n:Gh([n,M.pathname])),lm(M)}function nC(t,e,n,r){if(!r||!FG(r))return{path:n};if(r.formMethod&&!HG(r.formMethod))return{path:n,error:ll(405,{method:r.formMethod})};let i=()=>({path:n,error:ll(400,{type:"invalid-body"})}),s=r.formMethod||"get",A=t?s.toUpperCase():s.toLowerCase(),a=rR(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ql(A))return i();let k=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((U,H)=>{let[q,se]=H;return""+U+q+"="+se+`
`},""):String(r.body);return{path:n,submission:{formMethod:A,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:k}}}else if(r.formEncType==="application/json"){if(!ql(A))return i();try{let k=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:A,formAction:a,formEncType:r.formEncType,formData:void 0,json:k,text:void 0}}}catch{return i()}}}Rr(typeof FormData=="function","FormData is not available in this environment");let y,w;if(r.formData)y=e3(r.formData),w=r.formData;else if(r.body instanceof FormData)y=e3(r.body),w=r.body;else if(r.body instanceof URLSearchParams)y=r.body,w=oC(y);else if(r.body==null)y=new URLSearchParams,w=new FormData;else try{y=new URLSearchParams(r.body),w=oC(y)}catch{return i()}let M={formMethod:A,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:w,json:void 0,text:void 0};if(ql(M.formMethod))return{path:n,submission:M};let C=nc(n);return e&&C.search&&CT(C.search)&&y.append("index",""),C.search="?"+y,{path:lm(C),submission:M}}function NG(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function rC(t,e,n,r,i,s,A,a,y,w,M,C,k,U,H,q){let se=q?Object.values(q)[0]:H?Object.values(H)[0]:void 0,Z=t.createURL(e.location),J=t.createURL(i),re=q?Object.keys(q)[0]:void 0,_e=NG(n,re).filter((Fe,We)=>{let{route:qe}=Fe;if(qe.lazy)return!0;if(qe.loader==null)return!1;if(s)return qe.loader.hydrate?!0:e.loaderData[qe.id]===void 0&&(!e.errors||e.errors[qe.id]===void 0);if(UG(e.loaderData,e.matches[We],Fe)||a.some(tt=>tt===Fe.route.id))return!0;let Ke=e.matches[We],Oe=Fe;return iC(Fe,ji({currentUrl:Z,currentParams:Ke.params,nextUrl:J,nextParams:Oe.params},r,{actionResult:se,defaultShouldRevalidate:A||Z.pathname+Z.search===J.pathname+J.search||Z.search!==J.search||nR(Ke,Oe)}))}),fe=[];return M.forEach((Fe,We)=>{if(s||!n.some(Ye=>Ye.route.id===Fe.routeId)||w.has(We))return;let qe=cf(k,Fe.path,U);if(!qe){fe.push({key:We,routeId:Fe.routeId,path:Fe.path,matches:null,match:null,controller:null});return}let Ke=e.fetchers.get(We),Oe=t3(qe,Fe.path),tt=!1;C.has(We)?tt=!1:y.includes(We)?tt=!0:Ke&&Ke.state!=="idle"&&Ke.data===void 0?tt=A:tt=iC(Oe,ji({currentUrl:Z,currentParams:e.matches[e.matches.length-1].params,nextUrl:J,nextParams:n[n.length-1].params},r,{actionResult:se,defaultShouldRevalidate:A})),tt&&fe.push({key:We,routeId:Fe.routeId,path:Fe.path,matches:qe,match:Oe,controller:new AbortController})}),[_e,fe]}function UG(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function nR(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function iC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function sC(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Rr(i,"No route found in manifest");let s={};for(let A in r){let y=i[A]!==void 0&&A!=="hasErrorBoundary";Yh(!y,'Route "'+i.id+'" has a static property "'+A+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+A+'" will be ignored.')),!y&&!oG.has(A)&&(s[A]=r[A])}Object.assign(i,s),Object.assign(i,ji({},e(i),{lazy:void 0}))}async function sp(t,e,n,r,i,s,A,a,y){y===void 0&&(y={});let w,M,C,k=q=>{let se,Z=new Promise((J,re)=>se=re);return C=()=>se(),e.signal.addEventListener("abort",C),Promise.race([q({request:e,params:n.params,context:y.requestContext}),Z])};try{let q=n.route[t];if(n.route.lazy)if(q){let se,Z=await Promise.all([k(q).catch(J=>{se=J}),sC(n.route,s,i)]);if(se)throw se;M=Z[0]}else if(await sC(n.route,s,i),q=n.route[t],q)M=await k(q);else if(t==="action"){let se=new URL(e.url),Z=se.pathname+se.search;throw ll(405,{method:e.method,pathname:Z,routeId:n.route.id})}else return{type:Vi.data,data:void 0};else if(q)M=await k(q);else{let se=new URL(e.url),Z=se.pathname+se.search;throw ll(404,{pathname:Z})}Rr(M!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(q){w=Vi.error,M=q}finally{C&&e.signal.removeEventListener("abort",C)}if($G(M)){let q=M.status;if(DG.has(q)){let Z=M.headers.get("Location");if(Rr(Z,"Redirects returned/thrown from loaders/actions must have a Location header"),!eR.test(Z))Z=Jb(new URL(e.url),r.slice(0,r.indexOf(n)+1),A,!0,Z,a);else if(!y.isStaticRequest){let J=new URL(e.url),re=Z.startsWith("//")?new URL(J.protocol+Z):new URL(Z),de=Am(re.pathname,A)!=null;re.origin===J.origin&&de&&(Z=re.pathname+re.search+re.hash)}if(y.isStaticRequest)throw M.headers.set("Location",Z),M;return{type:Vi.redirect,status:q,location:Z,revalidate:M.headers.get("X-Remix-Revalidate")!==null,reloadDocument:M.headers.get("X-Remix-Reload-Document")!==null}}if(y.isRouteRequest)throw{type:w===Vi.error?Vi.error:Vi.data,response:M};let se;try{let Z=M.headers.get("Content-Type");Z&&/\bapplication\/json\b/.test(Z)?M.body==null?se=null:se=await M.json():se=await M.text()}catch(Z){return{type:Vi.error,error:Z}}return w===Vi.error?{type:w,error:new MT(q,M.statusText,se),headers:M.headers}:{type:Vi.data,data:se,statusCode:M.status,headers:M.headers}}if(w===Vi.error)return{type:w,error:M};if(jG(M)){var U,H;return{type:Vi.deferred,deferredData:M,statusCode:(U=M.init)==null?void 0:U.status,headers:((H=M.init)==null?void 0:H.headers)&&new Headers(M.init.headers)}}return{type:Vi.data,data:M}}function op(t,e,n,r){let i=t.createURL(rR(e)).toString(),s={signal:n};if(r&&ql(r.formMethod)){let{formMethod:A,formEncType:a}=r;s.method=A.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=e3(r.formData):s.body=r.formData}return new Request(i,s)}function e3(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function oC(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function VG(t,e,n,r,i){let s={},A=null,a,y=!1,w={};return n.forEach((M,C)=>{let k=e[C].route.id;if(Rr(!zh(M),"Cannot handle redirect results in processLoaderData"),hf(M)){let U=tg(t,k),H=M.error;r&&(H=Object.values(r)[0],r=void 0),A=A||{},A[U.route.id]==null&&(A[U.route.id]=H),s[k]=void 0,y||(y=!0,a=KD(M.error)?M.error.status:500),M.headers&&(w[k]=M.headers)}else Bh(M)?(i.set(k,M.deferredData),s[k]=M.deferredData.data):s[k]=M.data,M.statusCode!=null&&M.statusCode!==200&&!y&&(a=M.statusCode),M.headers&&(w[k]=M.headers)}),r&&(A=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:A,statusCode:a||200,loaderHeaders:w}}function aC(t,e,n,r,i,s,A,a){let{loaderData:y,errors:w}=VG(e,n,r,i,a);for(let M=0;M<s.length;M++){let{key:C,match:k,controller:U}=s[M];Rr(A!==void 0&&A[M]!==void 0,"Did not find corresponding fetcher result");let H=A[M];if(!(U&&U.signal.aborted))if(hf(H)){let q=tg(t.matches,k?.route.id);w&&w[q.route.id]||(w=ji({},w,{[q.route.id]:H.error})),t.fetchers.delete(C)}else if(zh(H))Rr(!1,"Unhandled fetcher revalidation redirect");else if(Bh(H))Rr(!1,"Unhandled fetcher deferred data");else{let q=Ic(H.data);t.fetchers.set(C,q)}}return{loaderData:y,errors:w}}function lC(t,e,n,r){let i=ji({},e);for(let s of n){let A=s.route.id;if(e.hasOwnProperty(A)?e[A]!==void 0&&(i[A]=e[A]):t[A]!==void 0&&s.route.loader&&(i[A]=t[A]),r&&r.hasOwnProperty(A))break}return i}function tg(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function AC(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ll(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,A="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(A="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(A="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(A="Not Found",a='No route matches URL "'+n+'"'):t===405&&(A="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new MT(t||500,A,new Error(a),!0)}function uC(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(zh(n))return{result:n,idx:e}}}function rR(t){let e=typeof t=="string"?nc(t):t;return lm(ji({},e,{hash:""}))}function GG(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Bh(t){return t.type===Vi.deferred}function hf(t){return t.type===Vi.error}function zh(t){return(t&&t.type)===Vi.redirect}function jG(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function $G(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function HG(t){return LG.has(t.toLowerCase())}function ql(t){return IG.has(t.toLowerCase())}async function cC(t,e,n,r,i,s){for(let A=0;A<n.length;A++){let a=n[A],y=e[A];if(!y)continue;let w=t.find(C=>C.route.id===y.route.id),M=w!=null&&!nR(w,y)&&(s&&s[y.route.id])!==void 0;if(Bh(a)&&(i||M)){let C=r[A];Rr(C,"Expected an AbortSignal for revalidating fetcher deferred result"),await iR(a,C,i).then(k=>{k&&(n[A]=k||n[A])})}}}async function iR(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Vi.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Vi.error,error:i}}return{type:Vi.data,data:t.deferredData.data}}}function CT(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function t3(t,e){let n=typeof e=="string"?nc(e).search:e.search;if(t[t.length-1].route.index&&CT(n||""))return t[t.length-1];let r=XD(t);return r[r.length-1]}function hC(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:A}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(A!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:A,text:void 0}}}function Nx(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function WG(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ap(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function QG(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ic(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function qG(t,e){try{let n=t.sessionStorage.getItem(tR);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function ZG(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(tR,JSON.stringify(n))}catch(r){Yh(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h_(){return h_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h_.apply(this,arguments)}const sR=rt.createContext(null),oR=rt.createContext(null),aR=rt.createContext(null),O2=rt.createContext(null),F2=rt.createContext({outlet:null,matches:[],isDataRoute:!1}),lR=rt.createContext(null);function PT(){return rt.useContext(O2)!=null}function YG(){return PT()||Rr(!1),rt.useContext(O2).location}function XG(t,e,n,r){PT()||Rr(!1);let{navigator:i}=rt.useContext(aR),{matches:s}=rt.useContext(F2),A=s[s.length-1],a=A?A.params:{};A&&A.pathname;let y=A?A.pathnameBase:"/";A&&A.route;let w=YG(),M;if(e){var C;let se=typeof e=="string"?nc(e):e;y==="/"||(C=se.pathname)!=null&&C.startsWith(y)||Rr(!1),M=se}else M=w;let k=M.pathname||"/",U=y==="/"?k:k.slice(y.length)||"/",H=cf(t,{pathname:U}),q=nj(H&&H.map(se=>Object.assign({},se,{params:Object.assign({},a,se.params),pathname:Gh([y,i.encodeLocation?i.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?y:Gh([y,i.encodeLocation?i.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),s,n,r);return e&&q?rt.createElement(O2.Provider,{value:{location:h_({pathname:"/",search:"",hash:"",state:null,key:"default"},M),navigationType:qi.Pop}},q):q}function KG(){let t=oj(),e=KD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return rt.createElement(rt.Fragment,null,rt.createElement("h2",null,"Unexpected Application Error!"),rt.createElement("h3",{style:{fontStyle:"italic"}},e),n?rt.createElement("pre",{style:i},n):null,s)}const JG=rt.createElement(KG,null);class ej extends rt.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?rt.createElement(F2.Provider,{value:this.props.routeContext},rt.createElement(lR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tj(t){let{routeContext:e,match:n,children:r}=t,i=rt.useContext(sR);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),rt.createElement(F2.Provider,{value:e},r)}function nj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let A=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let M=A.findIndex(C=>C.route.id&&a?.[C.route.id]);M>=0||Rr(!1),A=A.slice(0,Math.min(A.length,M+1))}let y=!1,w=-1;if(n&&r&&r.v7_partialHydration)for(let M=0;M<A.length;M++){let C=A[M];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(w=M),C.route.id){let{loaderData:k,errors:U}=n,H=C.route.loader&&k[C.route.id]===void 0&&(!U||U[C.route.id]===void 0);if(C.route.lazy||H){y=!0,w>=0?A=A.slice(0,w+1):A=[A[0]];break}}}return A.reduceRight((M,C,k)=>{let U,H=!1,q=null,se=null;n&&(U=a&&C.route.id?a[C.route.id]:void 0,q=C.route.errorElement||JG,y&&(w<0&&k===0?(aj("route-fallback",!1),H=!0,se=null):w===k&&(H=!0,se=C.route.hydrateFallbackElement||null)));let Z=e.concat(A.slice(0,k+1)),J=()=>{let re;return U?re=q:H?re=se:C.route.Component?re=rt.createElement(C.route.Component,null):C.route.element?re=C.route.element:re=M,rt.createElement(tj,{match:C,routeContext:{outlet:M,matches:Z,isDataRoute:n!=null},children:re})};return n&&(C.route.ErrorBoundary||C.route.errorElement||k===0)?rt.createElement(ej,{location:n.location,revalidation:n.revalidation,component:q,error:U,children:J(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):J()},null)}var n3=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(n3||{});function rj(t){let e=rt.useContext(oR);return e||Rr(!1),e}function ij(t){let e=rt.useContext(F2);return e||Rr(!1),e}function sj(t){let e=ij(),n=e.matches[e.matches.length-1];return n.route.id||Rr(!1),n.route.id}function oj(){var t;let e=rt.useContext(lR),n=rj(n3.UseRouteError),r=sj(n3.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const fC={};function aj(t,e,n){!e&&!fC[t]&&(fC[t]=!0)}function lj(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qi.Pop,navigator:s,static:A=!1,future:a}=t;PT()&&Rr(!1);let y=e.replace(/^\/*/,"/"),w=rt.useMemo(()=>({basename:y,navigator:s,static:A,future:h_({v7_relativeSplatPath:!1},a)}),[y,a,s,A]);typeof r=="string"&&(r=nc(r));let{pathname:M="/",search:C="",hash:k="",state:U=null,key:H="default"}=r,q=rt.useMemo(()=>{let se=Am(M,y);return se==null?null:{location:{pathname:se,search:C,hash:k,state:U,key:H},navigationType:i}},[y,M,C,k,U,H,i]);return q==null?null:rt.createElement(aR.Provider,{value:w},rt.createElement(O2.Provider,{children:n,value:q}))}new Promise(()=>{});function Aj(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:rt.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:rt.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:rt.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f_(){return f_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f_.apply(this,arguments)}const uj="6";try{window.__reactRouterVersion=uj}catch{}function cj(t,e){return OG({basename:e?.basename,future:f_({},e?.future,{v7_prependBasename:!0}),history:rG({window:e?.window}),hydrationData:e?.hydrationData||hj(),routes:t,mapRouteProperties:Aj,window:e?.window}).initialize()}function hj(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=f_({},e,{errors:fj(e.errors)})),e}function fj(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new MT(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let A=new s(i.message);A.stack="",n[r]=A}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const dj=rt.createContext({isTransitioning:!1}),pj=rt.createContext(new Map),gj="startTransition",dC=XU[gj],mj="flushSync",pC=nG[mj];function yj(t){dC?dC(t):t()}function lp(t){pC?pC(t):t()}class _j{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function vj(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=rt.useState(n.state),[A,a]=rt.useState(),[y,w]=rt.useState({isTransitioning:!1}),[M,C]=rt.useState(),[k,U]=rt.useState(),[H,q]=rt.useState(),se=rt.useRef(new Map),{v7_startTransition:Z}=r||{},J=rt.useCallback(Fe=>{Z?yj(Fe):Fe()},[Z]),re=rt.useCallback((Fe,We)=>{let{deletedFetchers:qe,unstable_flushSync:Ke,unstable_viewTransitionOpts:Oe}=We;qe.forEach(Ye=>se.current.delete(Ye)),Fe.fetchers.forEach((Ye,pt)=>{Ye.data!==void 0&&se.current.set(pt,Ye.data)});let tt=n.window==null||typeof n.window.document.startViewTransition!="function";if(!Oe||tt){Ke?lp(()=>s(Fe)):J(()=>s(Fe));return}if(Ke){lp(()=>{k&&(M&&M.resolve(),k.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:Oe.currentLocation,nextLocation:Oe.nextLocation})});let Ye=n.window.document.startViewTransition(()=>{lp(()=>s(Fe))});Ye.finished.finally(()=>{lp(()=>{C(void 0),U(void 0),a(void 0),w({isTransitioning:!1})})}),lp(()=>U(Ye));return}k?(M&&M.resolve(),k.skipTransition(),q({state:Fe,currentLocation:Oe.currentLocation,nextLocation:Oe.nextLocation})):(a(Fe),w({isTransitioning:!0,flushSync:!1,currentLocation:Oe.currentLocation,nextLocation:Oe.nextLocation}))},[n.window,k,M,se,J]);rt.useLayoutEffect(()=>n.subscribe(re),[n,re]),rt.useEffect(()=>{y.isTransitioning&&!y.flushSync&&C(new _j)},[y]),rt.useEffect(()=>{if(M&&A&&n.window){let Fe=A,We=M.promise,qe=n.window.document.startViewTransition(async()=>{J(()=>s(Fe)),await We});qe.finished.finally(()=>{C(void 0),U(void 0),a(void 0),w({isTransitioning:!1})}),U(qe)}},[J,A,M,n.window]),rt.useEffect(()=>{M&&A&&i.location.key===A.location.key&&M.resolve()},[M,k,i.location,A]),rt.useEffect(()=>{!y.isTransitioning&&H&&(a(H.state),w({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}),q(void 0))},[y.isTransitioning,H]),rt.useEffect(()=>{},[]);let de=rt.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:Fe=>n.navigate(Fe),push:(Fe,We,qe)=>n.navigate(Fe,{state:We,preventScrollReset:qe?.preventScrollReset}),replace:(Fe,We,qe)=>n.navigate(Fe,{replace:!0,state:We,preventScrollReset:qe?.preventScrollReset})}),[n]),_e=n.basename||"/",fe=rt.useMemo(()=>({router:n,navigator:de,static:!1,basename:_e}),[n,de,_e]);return rt.createElement(rt.Fragment,null,rt.createElement(sR.Provider,{value:fe},rt.createElement(oR.Provider,{value:i},rt.createElement(pj.Provider,{value:se.current},rt.createElement(dj.Provider,{value:y},rt.createElement(lj,{basename:_e,location:i.location,navigationType:i.historyAction,navigator:de,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?rt.createElement(xj,{routes:n.routes,future:n.future,state:i}):e))))),null)}function xj(t){let{routes:e,future:n,state:r}=t;return XG(e,void 0,r,n)}var gC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gC||(gC={}));var mC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mC||(mC={}));function d_(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const IT=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),yC=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);yC&&parseFloat(yC[1]);const wj="3.4.14";function Wu(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const my=typeof process!="object"||String(process)!=="[object process]"||process.browser,bj=typeof window<"u"&&typeof window.orientation<"u",_C=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);_C&&parseFloat(_C[1]);function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function Ej(t,e){if(Cg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tj(t){var e=Ej(t,"string");return Cg(e)==="symbol"?e:String(e)}function ae(t,e,n){return e=Tj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Sj{constructor(e,n){ae(this,"name",void 0),ae(this,"workerThread",void 0),ae(this,"isRunning",!0),ae(this,"result",void 0),ae(this,"_resolve",()=>{}),ae(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Wu(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Wu(this.isRunning),this.isRunning=!1,this._reject(e)}}let Ux=class{terminate(){}};const Vx=new Map;function Mj(t){Wu(t.source&&!t.url||!t.source&&t.url);let e=Vx.get(t.source||t.url);return e||(t.url&&(e=Cj(t.url),Vx.set(t.url,e)),t.source&&(e=AR(t.source),Vx.set(t.source,e))),Wu(e),e}function Cj(t){if(!t.startsWith("http"))return t;const e=Pj(t);return AR(e)}function AR(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Pj(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function uR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(vC(t))r.add(t);else if(vC(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)uR(t[i],e,r)}}return n===void 0?Array.from(r):[]}function vC(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Gx=()=>{};class r3{static isSupported(){return typeof Worker<"u"&&my||typeof Ux<"u"&&!my}constructor(e){ae(this,"name",void 0),ae(this,"source",void 0),ae(this,"url",void 0),ae(this,"terminated",!1),ae(this,"worker",void 0),ae(this,"onMessage",void 0),ae(this,"onError",void 0),ae(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Wu(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=Gx,this.onError=s=>console.log(s),this.worker=my?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Gx,this.onError=Gx,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||uR(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=Mj({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Ux(r,{eval:!1})}else if(this.source)e=new Ux(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Ij{static isSupported(){return r3.isSupported()}constructor(e){ae(this,"name","unnamed"),ae(this,"source",void 0),ae(this,"url",void 0),ae(this,"maxConcurrency",1),ae(this,"maxMobileConcurrency",1),ae(this,"onDebug",()=>{}),ae(this,"reuseWorkers",!0),ae(this,"props",{}),ae(this,"jobQueue",[]),ae(this,"idleQueue",[]),ae(this,"count",0),ae(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,A,a)=>s.done(a),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,A)=>s.error(A);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new Sj(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new r3({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return bj?this.maxMobileConcurrency:this.maxConcurrency}}const kj={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Pu{static isSupported(){return r3.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Pu._workerFarm=Pu._workerFarm||new Pu({}),Pu._workerFarm.setProps(e),Pu._workerFarm}constructor(e){ae(this,"props",void 0),ae(this,"workerPools",new Map),this.props={...kj},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new Ij({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ae(Pu,"_workerFarm",void 0);const Lj="latest";function Dj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=Lj);const A=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(A,"/dist/").concat(r)}return Wu(i),i}function Rj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wj;Wu(t,"no worker provided");const n=t.version;return!(!e||!n)}function Bj(t,e){return!Pu.isSupported()||!my&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&e?.worker}async function zj(t,e,n,r,i){const s=t.id,A=Dj(t,n),y=Pu.getWorkerFarm(n).getWorkerPool({name:s,url:A});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const w=await y.startJob("process-on-worker",Oj.bind(null,i));return w.postMessage("process",{input:e,options:n,context:r}),await(await w.result).result}async function Oj(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:A}=r;try{const a=await t(s,A);e.postMessage("done",{id:i,result:a})}catch(a){const y=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:y})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function Fj(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function Nj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),i=r.reduce((a,y)=>a+y.byteLength,0),s=new Uint8Array(i);let A=0;for(const a of r)s.set(a,A),A+=a.byteLength;return s.buffer}async function Uj(t){const e=[];for await(const n of t)e.push(n);return Nj(...e)}function xC(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}let wC=class{constructor(e,n){this.name=void 0,this.type=void 0,this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=xC(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(xC()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}},Vj=class{constructor(e){this.id=void 0,this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:r}=e;let i=this.stats[n];return i||(e instanceof wC?i=e:i=new wC(n,r),this.stats[n]=i),i}};const Gj="Queued Requests",jj="Active Requests",$j="Cancelled Requests",Hj="Queued Requests Ever",Wj="Active Requests Ever",Qj={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class qj{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ae(this,"props",void 0),ae(this,"stats",void 0),ae(this,"activeRequestCount",0),ae(this,"requestQueue",[]),ae(this,"requestMap",new Map),ae(this,"deferredUpdate",null),this.props={...Qj,...e},this.stats=new Vj({id:this.props.id}),this.stats.get(Gj),this.stats.get(jj),this.stats.get($j),this.stats.get(Hj),this.stats.get(Wj)}scheduleRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const r={handle:e,priority:0,getPriority:n},i=new Promise(s=>(r.resolve=s,r));return this.requestQueue.push(r),this.requestMap.set(e,i),this._issueNewRequests(),i}_issueRequest(e){const{handle:n,resolve:r}=e;let i=!1;const s=()=>{i||(i=!0,this.requestMap.delete(n),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,r?r({done:s}):Promise.resolve({done:s})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let n=0;n<e;++n){const r=this.requestQueue.shift();r&&this._issueRequest(r)}}}_updateAllRequests(){const e=this.requestQueue;for(let n=0;n<e.length;++n){const r=e[n];this._updateRequest(r)||(e.splice(n,1),this.requestMap.delete(r.handle),n--)}e.sort((n,r)=>n.priority-r.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}}let Zj="";const bC={};function Yj(t){for(const e in bC)if(t.startsWith(e)){const n=bC[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(Zj).concat(t)),t}function Xj(t){return t&&typeof t=="object"&&t.isBuffer}function cR(t){if(Xj(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function hR(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function Kj(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const Jj=t=>typeof t=="boolean",ng=t=>typeof t=="function",um=t=>t!==null&&typeof t=="object",EC=t=>um(t)&&t.constructor==={}.constructor,e$=t=>t&&typeof t[Symbol.iterator]=="function",t$=t=>t&&typeof t[Symbol.asyncIterator]=="function",d0=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,p0=t=>typeof Blob<"u"&&t instanceof Blob,n$=t=>t&&typeof t=="object"&&t.isBuffer,r$=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||um(t)&&ng(t.tee)&&ng(t.cancel)&&ng(t.getReader),i$=t=>um(t)&&ng(t.read)&&ng(t.pipe)&&Jj(t.readable),fR=t=>r$(t)||i$(t),s$=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,o$=/^([-\w.]+\/[-\w.+]+)/;function a$(t){const e=o$.exec(t);return e?e[1]:t}function TC(t){const e=s$.exec(t);return e?e[1]:""}const dR=/\?.*/;function l$(t){const e=t.match(dR);return e&&e[0]}function kT(t){return t.replace(dR,"")}function N2(t){return d0(t)?t.url:p0(t)?t.name||"":typeof t=="string"?t:""}function LT(t){if(d0(t)){const e=t,n=e.headers.get("content-type")||"",r=kT(e.url);return a$(n)||TC(r)}return p0(t)?t.type||"":typeof t=="string"?TC(t):""}function A$(t){return d0(t)?t.headers["content-length"]||-1:p0(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function pR(t){if(d0(t))return t;const e={},n=A$(t);n>=0&&(e["content-length"]=String(n));const r=N2(t),i=LT(t);i&&(e["content-type"]=i);const s=await h$(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const A=new Response(t,{headers:e});return Object.defineProperty(A,"url",{value:r}),A}async function u$(t){if(!t.ok){const e=await c$(t);throw new Error(e)}}async function c$(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function h$(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var A;return r(s==null||(A=s.target)===null||A===void 0?void 0:A.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=f$(n);return"data:base64,".concat(r)}return null}function f$(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function SC(t,e){if(typeof t=="string"){t=Yj(t);let n=e;return e!=null&&e.fetch&&typeof e?.fetch!="function"&&(n=e.fetch),await fetch(t,n)}return await pR(t)}function d$(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function cm(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||d$()}const y1=globalThis.window||globalThis.self||globalThis.global,Ap=globalThis.process||{},gR=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";cm();function p$(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let g$=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=p$(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function m$(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function y$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function jx(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,A=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(A/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(A,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(A,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let p_;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(p_||(p_={}));const _$=10;function MC(t){return typeof t!="string"?t:(t=t.toUpperCase(),p_[t]||p_.WHITE)}function v$(t,e,n){if(!cm&&typeof t=="string"){if(e){const r=MC(e);t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")}if(n){const r=MC(n);t="\x1B[".concat(r+_$,"m").concat(t,"\x1B[49m")}}return t}function x$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const A=i[s];typeof A=="function"&&(e.find(a=>s===a)||(i[s]=A.bind(t)))}}function g_(t,e){if(!t)throw new Error(e||"Assertion failed")}function F0(){let t;if(cm()&&y1.performance){var e,n;t=y1==null||(e=y1.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Ap){var r;const i=Ap==null||(r=Ap.hrtime)===null||r===void 0?void 0:r.call(Ap);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const N0={debug:cm()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},w$={enabled:!0,level:0};function Al(){}const CC={},PC={once:!0};let DT=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=gR,this._startTs=F0(),this._deltaTs=F0(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new g$("__probe-".concat(this.id,"__"),w$),this.timeStamp("".concat(this.id," started")),x$(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((F0()-this._startTs).toPrecision(10))}getDelta(){return Number((F0()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){g_(e,n)}warn(e){return this._getLogFunction(0,e,N0.warn,arguments,PC)}error(e){return this._getLogFunction(0,e,N0.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,N0.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,N0.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,N0.debug||N0.info,arguments,PC)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Al,r&&[r],{tag:S$(n)}):Al}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:A=1}=e;return this._shouldLog(n||r)?cm()?T$({image:i,message:s,scale:A}):E$():Al}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Al)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=IC({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Al)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=mR(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=IC({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,g_(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=F0();const A=s.tag||s.message;if(s.once&&A)if(!CC[A])CC[A]=F0();else return Al;return n=b$(this.id,s.message,s),r.bind(console,n,...s.args)}return Al}};DT.VERSION=gR;function mR(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return g_(Number.isFinite(e)&&e>=0),e}function IC(t){const{logLevel:e,message:n}=t;t.logLevel=mR(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return g_(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function b$(t,e,n){if(typeof e=="string"){const r=n.time?y$(m$(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=v$(e,n.color,n.background)}return e}function E$(t){return console.warn("removed"),Al}function T$(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const A=jx(s,n,r);console.log(...A)},s.src=e,Al}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...jx(e,n,r)),Al;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...jx(s,n,r)),s.src=e.toDataURL(),Al}return Al}function S$(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const kC=new DT({id:"loaders.gl"});class M${log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class C${constructor(){ae(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const yR={fetch:null,mimeType:void 0,nothrow:!1,log:new C$,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:IT,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},P$={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function _R(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const vR=()=>{const t=_R();return t.globalOptions=t.globalOptions||{...yR},t.globalOptions};function I$(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],k$(t,n),D$(e,t,r)}function k$(t,e){LC(t,null,yR,P$,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};LC(r,n.id,i,s,e)}}function LC(t,e,n,r,i){const s=e||"Top level",A=e?"".concat(e,"."):"";for(const a in t){const y=!e&&um(t[a]),w=a==="baseUri"&&!e,M=a==="workerUrl"&&e;if(!(a in n)&&!w&&!M){if(a in r)kC.warn("".concat(s," loader option '").concat(A).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!y){const C=L$(a,i);kC.warn("".concat(s," loader option '").concat(A).concat(a,"' not recognized. ").concat(C))()}}}}function L$(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const A=s.toLowerCase();(n.startsWith(A)||A.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function D$(t,e,n){const i={...t.options||{}};return R$(i,n),i.log===null&&(i.log=new M$),DC(i,vR()),DC(i,e),i}function DC(t,e){for(const n in e)if(n in e){const r=e[n];EC(r)&&EC(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function R$(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function RT(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function BT(t){var e,n;d_(t,"null loader"),d_(RT(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const xR=()=>{const t=_R();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function B$(t){const e=xR();t=Array.isArray(t)?t:[t];for(const n of t){const r=BT(n);e.find(i=>r===i)||e.unshift(r)}}function z$(){return xR()}const O$=new DT({id:"loaders.gl"}),F$=/\.([^.]+)$/;async function N$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!wR(t))return null;let i=RC(t,e,{...n,nothrow:!0},r);if(i)return i;if(p0(t)&&(t=await t.slice(0,10).arrayBuffer(),i=RC(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(bR(t));return i}function RC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!wR(t))return null;if(e&&!Array.isArray(e))return BT(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...z$()),V$(i);const s=U$(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(bR(t));return s}function U$(t,e,n,r){const i=N2(t),s=LT(t),A=kT(i)||r?.url;let a=null,y="";if(n!=null&&n.mimeType&&(a=$x(e,n?.mimeType),y="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||G$(e,A),y=y||(a?"matched url ".concat(A):""),a=a||$x(e,s),y=y||(a?"matched MIME type ".concat(s):""),a=a||$$(e,t),y=y||(a?"matched initial data ".concat(ER(t)):""),a=a||$x(e,n?.fallbackMimeType),y=y||(a?"matched fallback MIME type ".concat(s):""),y){var w;O$.log(1,"selectLoader selected ".concat((w=a)===null||w===void 0?void 0:w.name,": ").concat(y,"."))}return a}function wR(t){return!(t instanceof Response&&t.status===204)}function bR(t){const e=N2(t),n=LT(t);let r="No valid loader found (";r+=e?"".concat(hR(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?ER(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function V$(t){for(const e of t)BT(e)}function G$(t,e){const n=e&&F$.exec(e),r=n&&n[1];return r?j$(t,r):null}function j$(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function $x(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function $$(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(H$(e,n))return n}else if(ArrayBuffer.isView(e)){if(BC(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&BC(e,0,n))return n;return null}function H$(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function BC(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>W$(t,e,n,i))}function W$(t,e,n,r){if(r instanceof ArrayBuffer)return Fj(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=i3(t,e,r.length);return r===i;default:return!1}}function ER(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?i3(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?i3(t,0,e):""}function i3(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const Q$=256*1024;function*q$(t,e){const n=e?.chunkSize||Q$;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),A=t.slice(r,r+s);r+=s,yield i.encode(A)}}const Z$=256*1024;function Y$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=Z$}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),A=new Uint8Array(t,r,i);new Uint8Array(s).set(A),r+=i,yield s}}()}const X$=1024*1024;async function*K$(t,e){const n=e?.chunkSize||X$;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function zC(t,e){return IT?J$(t,e):eH(t)}async function*J$(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:A}=await i;if(s)return;yield cR(A)}}catch{n.releaseLock()}}async function*eH(t,e){for await(const n of t)yield cR(n)}function tH(t,e){if(typeof t=="string")return q$(t,e);if(t instanceof ArrayBuffer)return Y$(t,e);if(p0(t))return K$(t,e);if(fR(t))return zC(t,e);if(d0(t))return zC(t.body,e);throw new Error("makeIterator")}const TR="Cannot convert supplied data type";function nH(t,e,n){if(e.text&&typeof t=="string")return t;if(n$(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(TR)}async function rH(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return nH(t,e);if(p0(t)&&(t=await pR(t)),d0(t)){const i=t;return await u$(i),e.binary?await i.arrayBuffer():await i.text()}if(fR(t)&&(t=tH(t,n)),e$(t)||t$(t))return Uj(t);throw new Error(TR)}function SR(t,e){const n=vR(),r=t||n;return typeof r.fetch=="function"?r.fetch:um(r.fetch)?i=>SC(i,r):e!=null&&e.fetch?e?.fetch:SC}function iH(t,e,n){if(n)return n;const r={fetch:SR(e,t),...t};if(r.url){const i=kT(r.url);r.baseUrl=i,r.queryString=l$(r.url),r.filename=hR(i),r.baseUrl=Kj(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function sH(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function zT(t,e,n,r){Wu(!r||typeof r=="object"),e&&!Array.isArray(e)&&!RT(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=N2(t),A=sH(e,r),a=await N$(t,A,n);return a?(n=I$(n,a,A,i),r=iH({url:i,parse:zT,loaders:A},n,r||null),await oH(a,t,n,r)):null}async function oH(t,e,n,r){if(Rj(t),d0(e)){const i=e,{ok:s,redirected:A,status:a,statusText:y,type:w,url:M}=i,C=Object.fromEntries(i.headers.entries());r.response={headers:C,ok:s,redirected:A,status:a,statusText:y,type:w,url:M}}if(e=await rH(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(Bj(t,n))return await zj(t,e,n,r,zT);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Wu(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function m_(t,e,n,r){!Array.isArray(e)&&!RT(e)&&(n=e,e=void 0);const i=SR(n);let s=t;return typeof t=="string"&&(s=await i(t)),p0(t)&&(s=await i(t)),await zT(s,e,n)}const aH="3.4.14",{_parseImageNode:lH}=globalThis,s3=typeof Image<"u",o3=typeof ImageBitmap<"u",AH=!!lH,a3=IT?!0:AH;function uH(t){switch(t){case"auto":return o3||s3||a3;case"imagebitmap":return o3;case"image":return s3;case"data":return a3;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function cH(){if(o3)return"imagebitmap";if(s3)return"image";if(a3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function hH(t){const e=dH(t);if(!e)throw new Error("Not an image");return e}function fH(t){switch(hH(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function dH(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const pH=/^data:image\/svg\+xml/,gH=/\.svg((\?|#).*)?$/;function OT(t){return t&&(pH.test(t)||gH.test(t))}function mH(t,e){if(OT(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return MR(t,e)}function MR(t,e){if(OT(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function CR(t,e,n){const r=mH(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await yH(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function yH(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const _H={};let OC=!0;async function vH(t,e,n){let r;OT(n)?r=await CR(t,e,n):r=MR(t,n);const i=e&&e.imagebitmap;return await xH(r,i)}async function xH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((wH(e)||!OC)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),OC=!1}return await createImageBitmap(t)}function wH(t){for(const e in t||_H)return!1;return!0}function bH(t){return!MH(t,"ftyp",4)||!(t[8]&96)?null:EH(t)}function EH(t){switch(TH(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function TH(t,e,n){return String.fromCharCode(...t.slice(e,n))}function SH(t){return[...t].map(e=>e.charCodeAt(0))}function MH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=SH(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const BA=!1,rg=!0;function PR(t){const e=hm(t);return PH(e)||LH(e)||IH(e)||kH(e)||CH(e)}function CH(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=bH(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function PH(t){const e=hm(t);return e.byteLength>=24&&e.getUint32(0,BA)===2303741511?{mimeType:"image/png",width:e.getUint32(16,BA),height:e.getUint32(20,BA)}:null}function IH(t){const e=hm(t);return e.byteLength>=10&&e.getUint32(0,BA)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,rg),height:e.getUint16(8,rg)}:null}function kH(t){const e=hm(t);return e.byteLength>=14&&e.getUint16(0,BA)===16973&&e.getUint32(2,rg)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,rg),height:e.getUint32(22,rg)}:null}function LH(t){const e=hm(t);if(!(e.byteLength>=3&&e.getUint16(0,BA)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=DH();let s=2;for(;s+9<e.byteLength;){const A=e.getUint16(s,BA);if(i.has(A))return{mimeType:"image/jpeg",height:e.getUint16(s+5,BA),width:e.getUint16(s+7,BA)};if(!r.has(A))return null;s+=2,s+=e.getUint16(s,BA)}return null}function DH(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function hm(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function RH(t,e){const{mimeType:n}=PR(t)||{},r=globalThis._parseImageNode;return d_(r),await r(t,n)}async function BH(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},A=zH(i);let a;switch(A){case"imagebitmap":a=await vH(t,e,s);break;case"image":a=await CR(t,e,s);break;case"data":a=await RH(t);break;default:d_(!1)}return i==="data"&&(a=fH(a)),a}function zH(t){switch(t){case"auto":case"data":return cH();default:return uH(t),t}}const OH=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],FH=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],NH={image:{type:"auto",decode:!0}},UH={id:"image",module:"images",name:"Images",version:aH,mimeTypes:FH,extensions:OH,parse:BH,tests:[t=>!!PR(new DataView(t))],options:NH};function IR(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function wd(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||IR()}const yy={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},_1=yy.window||yy.self||yy.global,up=yy.process||{},kR=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";wd();const Hx=globalThis;function VH(t){if(!t&&!wd())return"Node";if(IR(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":Hx.chrome?"Chrome":Hx.safari?"Safari":Hx.mozInnerScreenX?"Firefox":"Unknown"}function GH(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let jH=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";ae(this,"storage",void 0),ae(this,"id",void 0),ae(this,"config",void 0),this.storage=GH(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function $H(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function HH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Wx(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,A=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(A/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(A,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(A,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let y_;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(y_||(y_={}));function FC(t){return typeof t=="string"?y_[t.toUpperCase()]||y_.WHITE:t}function WH(t,e,n){return!wd&&typeof t=="string"&&(e&&(e=FC(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=FC(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function QH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function __(t,e){if(!t)throw new Error(e||"Assertion failed")}function U0(){let t;if(wd&&"performance"in _1){var e,n;t=_1==null||(e=_1.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in up){var r;const i=up==null||(r=up.hrtime)===null||r===void 0?void 0:r.call(up);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const V0={debug:wd&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},qH={enabled:!0,level:0};function ul(){}const NC={},UC={once:!0};let LR=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};ae(this,"id",void 0),ae(this,"VERSION",kR),ae(this,"_startTs",U0()),ae(this,"_deltaTs",U0()),ae(this,"_storage",void 0),ae(this,"userData",{}),ae(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new jH("__probe-".concat(this.id,"__"),qH),this.timeStamp("".concat(this.id," started")),QH(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((U0()-this._startTs).toPrecision(10))}getDelta(){return Number((U0()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){__(e,n)}warn(e){return this._getLogFunction(0,e,V0.warn,arguments,UC)}error(e){return this._getLogFunction(0,e,V0.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,V0.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,V0.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,V0.debug||V0.info,arguments,UC)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||ul,r&&[r],{tag:KH(n)}):ul}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:A=1}=e;return this._shouldLog(n||r)?wd?XH({image:i,message:s,scale:A}):YH():ul}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||ul)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=VC({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ul)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=DR(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=VC({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,__(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=U0();const A=s.tag||s.message;if(s.once)if(!NC[A])NC[A]=U0();else return ul;return n=ZH(this.id,s.message,s),r.bind(console,n,...s.args)}return ul}};ae(LR,"VERSION",kR);function DR(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return __(Number.isFinite(e)&&e>=0),e}function VC(t){const{logLevel:e,message:n}=t;t.logLevel=DR(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return __(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function ZH(t,e,n){if(typeof e=="string"){const r=n.time?HH($H(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=WH(e,n.color,n.background)}return e}function YH(t){return console.warn("removed"),ul}function XH(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const A=Wx(s,n,r);console.log(...A)},s.src=e,ul}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Wx(e,n,r)),ul;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...Wx(s,n,r)),s.src=e.toDataURL(),ul}return ul}function KH(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const yr=new LR({id:"deck"});let l3={};function JH(t){l3=t}function co(t,e,n,r){yr.level>0&&l3[t]&&l3[t].call(null,e,n,r)}function eW(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const tW={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:eW,parseTextSync:JSON.parse};function nW(){const t="8.9.32",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(yr.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:yr,_registerLoggers:JH},B$([tW,[UH,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const rW=nW(),wr={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(wr,"IDENTITY",{get:()=>(yr.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Kl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Xh={common:0,meters:1,pixels:2},GC={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function iW(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function bd(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||iW()}const _y={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},v1=_y.window||_y.self||_y.global,cp=_y.process||{},RR=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";bd();function sW(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class oW{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";ae(this,"storage",void 0),ae(this,"id",void 0),ae(this,"config",void 0),this.storage=sW(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function aW(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function lW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Qx(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,A=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(A/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(A,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(A,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let v_;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(v_||(v_={}));function jC(t){return typeof t=="string"?v_[t.toUpperCase()]||v_.WHITE:t}function AW(t,e,n){return!bd&&typeof t=="string"&&(e&&(e=jC(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=jC(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function uW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function x_(t,e){if(!t)throw new Error(e||"Assertion failed")}function G0(){let t;if(bd&&"performance"in v1){var e,n;t=v1==null||(e=v1.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in cp){var r;const i=cp==null||(r=cp.hrtime)===null||r===void 0?void 0:r.call(cp);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const j0={debug:bd&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},cW={enabled:!0,level:0};function cl(){}const $C={},HC={once:!0};class BR{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};ae(this,"id",void 0),ae(this,"VERSION",RR),ae(this,"_startTs",G0()),ae(this,"_deltaTs",G0()),ae(this,"_storage",void 0),ae(this,"userData",{}),ae(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new oW("__probe-".concat(this.id,"__"),cW),this.timeStamp("".concat(this.id," started")),uW(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((G0()-this._startTs).toPrecision(10))}getDelta(){return Number((G0()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){x_(e,n)}warn(e){return this._getLogFunction(0,e,j0.warn,arguments,HC)}error(e){return this._getLogFunction(0,e,j0.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,j0.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,j0.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,j0.debug||j0.info,arguments,HC)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||cl,r&&[r],{tag:pW(n)}):cl}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:A=1}=e;return this._shouldLog(n||r)?bd?dW({image:i,message:s,scale:A}):fW():cl}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||cl)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=WC({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||cl)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=zR(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=WC({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,x_(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=G0();const A=s.tag||s.message;if(s.once)if(!$C[A])$C[A]=G0();else return cl;return n=hW(this.id,s.message,s),r.bind(console,n,...s.args)}return cl}}ae(BR,"VERSION",RR);function zR(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return x_(Number.isFinite(e)&&e>=0),e}function WC(t){const{logLevel:e,message:n}=t;t.logLevel=zR(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return x_(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function hW(t,e,n){if(typeof e=="string"){const r=n.time?lW(aW(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=AW(e,n.color,n.background)}return e}function fW(t){return console.warn("removed"),cl}function dW(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const A=Qx(s,n,r);console.log(...A)},s.src=e,cl}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Qx(e,n,r)),cl;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...Qx(s,n,r)),s.src=e.toDataURL(),cl}return cl}function pW(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Ln=new BR({id:"luma.gl"});function Ro(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const gW="Invalid WebGLRenderingContext",mW="Requires WebGL2";function U2(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function br(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function yW(t){return br(t)?t:null}function V2(t){return Ro(U2(t),gW),t}function po(t){return Ro(br(t),mW),t}const zp={};function _W(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function vW(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function xW(t,e){zp[t]=!0,e!==void 0&&_W(e)}function wW(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(zp[r]=!0);while(r!==0);for(r in zp)if(zp[r])return delete zp[r],parseInt(r,10);return 0}}const fm=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};fm.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};fm.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const g0=function(e){const n=this;this.gl=e,wW(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const A=n.currentVertexArrayObject;A.maxAttrib=Math.max(A.maxAttrib,s);const a=A.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const A=n.currentVertexArrayObject;A.maxAttrib=Math.max(A.maxAttrib,s);const a=A.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,A){switch(s){case 34962:n.currentArrayBuffer=A;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=A;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,A){const y=n.currentVertexArrayObject.attribs[s];switch(A){case 34975:return y.buffer;case 34338:return y.enabled;case 34339:return y.size;case 34340:return y.stride;case 34341:return y.type;case 34922:return y.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,A,a,y,w,M){const C=n.currentVertexArrayObject;C.maxAttrib=Math.max(C.maxAttrib,s);const k=C.attribs[s];return k.buffer=n.currentArrayBuffer,k.size=A,k.type=a,k.normalized=y,k.stride=w,k.offset=M,k.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{vW("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};g0.prototype.VERTEX_ARRAY_BINDING_OES=34229;g0.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new fm(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};g0.prototype.createVertexArrayOES=function(){const e=new fm(this);return this.vertexArrayObjects.push(e),e};g0.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};g0.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof fm&&e.hasBeenBound&&e.ext===this)};g0.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){xW(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let A=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let y=0;y<=a;y++){const w=s.attribs[y],M=i?i.attribs[y]:null;if((!i||w.enabled!==M.enabled)&&(w.enabled?r.enableVertexAttribArray.call(n,y):r.disableVertexAttribArray.call(n,y)),w.enabled){let C=!1;(!i||w.buffer!==M.buffer)&&(A!==w.buffer&&(r.bindBuffer.call(n,34962,w.buffer),A=w.buffer),C=!0),(C||w.cached!==M.cached)&&r.vertexAttribPointer.call(n,y,w.size,w.type,w.normalized,w.stride,w.offset)}}this.currentArrayBuffer!==A&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function bW(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new g0(this)),this.__OESVertexArrayObject))}}const QC="OES_element_index",qC="WEBGL_draw_buffers",EW="EXT_disjoint_timer_query",TW="EXT_disjoint_timer_query_webgl2",SW="EXT_texture_filter_anisotropic",ZC="WEBGL_debug_renderer_info",MW=35723,CW=4352,PW=36795,IW=34047,kW=37445,LW=37446,oi=t=>br(t)?void 0:0,DW={3074:t=>br(t)?void 0:36064,[MW]:t=>br(t)?void 0:CW,35977:oi,32937:oi,[PW]:(t,e)=>{const n=br(t)?t.getExtension(TW):t.getExtension(EW);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[kW]:(t,e)=>{const n=t.getExtension(ZC);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[LW]:(t,e)=>{const n=t.getExtension(ZC);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[IW]:(t,e)=>{const n=t.luma.extensions[SW];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:oi,35071:oi,37447:oi,36063:(t,e)=>{if(!br(t)){const n=t.getExtension(qC);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:oi,35374:oi,35377:oi,34852:t=>{if(!br(t)){const e=t.getExtension(qC);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(QC)?2147483647:65535,33001:t=>t.getExtension(QC)?16777216:65535,33e3:t=>16777216,37157:oi,35373:oi,35657:oi,36183:oi,37137:oi,34045:oi,35978:oi,35979:oi,35968:oi,35376:oi,35375:oi,35659:oi,37154:oi,35371:oi,35658:oi,35076:oi,35077:oi,35380:oi};function RW(t,e,n){const r=DW[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const BW="OES_vertex_array_object",OR="ANGLE_instanced_arrays",zW="WEBGL_draw_buffers",OW="EXT_disjoint_timer_query",FW="EXT_texture_filter_anisotropic",NW="VertexArray requires WebGL2 or OES_vertex_array_object extension";function UW(t,e){return{webgl2:br(t),ext:t.getExtension(e)}}const FR={[BW]:{meta:{suffix:"OES"},createVertexArray:()=>{Ro(!1,NW)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[OR]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ro(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[zW]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ro(!1)}},[OW]:{meta:{suffix:"EXT"},createQuery:()=>{Ro(!1)},deleteQuery:()=>{Ro(!1)},beginQuery:()=>{Ro(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},qx={readBuffer:(t,e,n)=>{br(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=UW(t,OR);let A;switch(r){case 35069:A=i?void 0:!1;break;case 35070:A=!i&&!s?0:void 0;break}return A!==void 0?A:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!br(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!br(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[FW];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:RW,hint(t,e,n,r){return e(n,r)}};function VW(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(bW(t),GW(t),$W(t,FR),jW(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=VW;function GW(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function jW(t,e){let{target:n,target2:r}=e;Object.keys(qx).forEach(i=>{if(typeof qx[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},A=qx[i].bind(null,t,s);n[i]=A,r[i]=A}})}function $W(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&HW(t,{extension:n,target:t.luma,target2:t})}function HW(t,e){let{extension:n,target:r,target2:i}=e;const s=FR[n];Ro(s);const{meta:A={}}=s,{suffix:a=""}=A,y=t.getExtension(n);for(const w of Object.keys(s)){const M="".concat(w).concat(a);let C=null;w==="meta"||typeof t[w]=="function"||(y&&typeof y[M]=="function"?C=function(){return y[M](...arguments)}:typeof s[w]=="function"&&(C=s[w].bind(r))),C&&(r[w]=C,i[w]=C)}}const FT={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},bc=(t,e,n)=>e?t.enable(n):t.disable(n),YC=(t,e,n)=>t.hint(n,e),Ca=(t,e,n)=>t.pixelStorei(n,e),WW=(t,e)=>{const n=br(t)?36009:36160;return t.bindFramebuffer(n,e)},QW=(t,e)=>t.bindFramebuffer(36008,e);function hp(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const qW={3042:bc,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:bc,2885:(t,e)=>t.cullFace(e),2929:bc,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:bc,35723:YC,36006:WW,2886:(t,e)=>t.frontFace(e),33170:YC,2849:(t,e)=>t.lineWidth(e),32823:bc,32824:"polygonOffset",10752:"polygonOffset",35977:bc,32938:"sampleCoverage",32939:"sampleCoverage",3089:bc,3088:(t,e)=>t.scissor(...e),2960:bc,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Ca,3317:Ca,37440:Ca,37441:Ca,37443:Ca,3330:Ca,3332:Ca,3331:Ca,36010:QW,3314:Ca,32878:Ca,3316:Ca,3315:Ca,32877:Ca,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=hp(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=hp(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=hp(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=hp(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,A,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,A,a)},stencilOp:(t,e)=>{e=hp(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,A,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,A,a)},viewport:(t,e)=>t.viewport(...e)};function Ni(t,e,n){return e[t]!==void 0?e[t]:n[t]}const ZW={blendEquation:(t,e,n)=>t.blendEquationSeparate(Ni(32777,e,n),Ni(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Ni(32969,e,n),Ni(32968,e,n),Ni(32971,e,n),Ni(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Ni(32824,e,n),Ni(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Ni(32938,e,n),Ni(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Ni(2962,e,n),Ni(2967,e,n),Ni(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Ni(34816,e,n),Ni(36003,e,n),Ni(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Ni(2964,e,n),Ni(2965,e,n),Ni(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Ni(34817,e,n),Ni(34818,e,n),Ni(34819,e,n))},XC={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},MA=(t,e)=>t.isEnabled(e),KC={3042:MA,2884:MA,2929:MA,3024:MA,32823:MA,32926:MA,32928:MA,3089:MA,2960:MA,35977:MA};function NR(t){for(const e in t)return!1;return!0}function YW(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function JC(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function XW(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,A=new Array(s),a=0;a<s;a++)A[a]=arguments[a];const{valueChanged:y,oldValue:w}=n(t.state._updateCache,...A);return y&&r(...A),w},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function KW(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class JW{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?tQ(e):Object.assign({},FT),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ro(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Qu(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Ro(s!==void 0);const A=e[s],a=this.cache[s];YW(A,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=A)}return{valueChanged:n,oldValue:r}}}function UR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Ro(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new JW(t,{copyState:r}),KW(t);for(const s in XC){const A=XC[s];XW(t,s,A)}JC(t,"getParameter"),JC(t,"isEnabled")}return t.state.enable=n,t}function eQ(t){t.state||UR(t,{copyState:!1}),t.state.push()}function eP(t){Ro(t.state),t.state.pop()}function Qu(t,e){if(Ro(U2(t),"setParameters requires a WebGL context"),NR(e))return;const n={};for(const i in e){const s=Number(i),A=qW[i];A&&(typeof A=="string"?n[A]=!0:A(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=ZW[i];s(t,e,r)}}function tQ(t,e){if(e=e||FT,typeof e=="number"){const i=e,s=KC[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=KC[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function nQ(t){Qu(t,FT)}function sA(t,e,n){if(NR(e))return n(t);const{nocatch:r=!0}=e;eQ(t),Qu(t,e);let i;if(r)i=n(t),eP(t);else try{i=n(t)}finally{eP(t)}return i}function Jf(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function Zx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Jf(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return iQ(e,r,i,s,n)}function rQ(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function iQ(t,e,n,r,i){const s=tP(t[0],e,n);let A=nP(t[1],e,r,i),a=tP(t[0]+1,e,n);const y=a===n-1?a:a-1;a=nP(t[1]+1,e,r,i);let w;return i?(a=a===0?a:a+1,w=A,A=a):w=a===r-1?a:a-1,{x:s,y:A,width:Math.max(y-s+1,1),height:Math.max(w-A+1,1)}}function tP(t,e,n){return Math.min(Math.round(t*e),n-1)}function nP(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const NT=bd(),sQ=NT&&typeof document<"u",VR={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function GR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ro(NT,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},VR,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,A=AQ({canvas:s,width:e,height:n,onError:r});return i=lQ(A,t),i?(i=UT(i,t),uQ(i),i):null}function UT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||cQ(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},VR,e);const{manageState:n,debug:r}=e;return n&&UR(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),A=0;A<i;A++)s[A]=arguments[A];return Ln.log(1,...s)()}}),NT&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Ln.level=Math.max(Ln.level,1)):Ln.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function oQ(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function aQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=rQ(e.useDevicePixels);hQ(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function lQ(t,e){const{onError:n}=e;let r=null;const i=y=>r=y.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:A=!0}=e;let a=null;return A&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(A&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function AQ(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(sQ&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function uQ(t){const e=br(t)?"WebGL2":"WebGL1",n=oQ(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Ln.info(1,"".concat(e).concat(i," context ").concat(r))()}function cQ(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function hQ(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Ln.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let A=e;const a=Math.floor(r*A),y=Math.floor(i*A);t.canvas.width=a,t.canvas.height=y,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==y)&&(Ln.warn("Device pixel ratio clamped")(),A=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*A),t.canvas.height=Math.floor(i*A)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function rP(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}let iP=class{constructor(e,n){ae(this,"name",void 0),ae(this,"type",void 0),ae(this,"sampleSize",1),ae(this,"time",void 0),ae(this,"count",void 0),ae(this,"samples",void 0),ae(this,"lastTiming",void 0),ae(this,"lastSampleTime",void 0),ae(this,"lastSampleCount",void 0),ae(this,"_count",0),ae(this,"_time",0),ae(this,"_samples",0),ae(this,"_startTime",0),ae(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=rP(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(rP()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}},fQ=class{constructor(e){ae(this,"id",void 0),ae(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof iP?this.stats[n]=e:this.stats[n]=new iP(n,r)),this.stats[n]}};function jR(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function $R(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||jR()}const Yx=globalThis;function dQ(t){if(!t&&!$R())return"Node";if(jR(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":Yx.chrome?"Chrome":Yx.safari?"Safari":Yx.mozInnerScreenX?"Firefox":"Unknown"}const ig="8.5.21",pQ="set luma.log.level=1 (or higher) to trace rendering";class gQ{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new fQ({id:e})),this.stats.get(e)}}const Oh=new gQ;if(globalThis.luma&&globalThis.luma.VERSION!==ig)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(ig));globalThis.luma||($R()&&Ln.log(1,"luma.gl ".concat(ig," - ").concat(pQ))(),globalThis.luma=globalThis.luma||{VERSION:ig,version:ig,log:Ln,stats:Oh,globals:{modules:{},nodeIO:{}}});function mQ(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function yQ(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function cn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Xx(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return cn(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Xc(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const Kx={};function ih(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";Kx[t]=Kx[t]||1;const e=Kx[t]++;return"".concat(t,"-").concat(e)}function sP(t){return cn(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function ed(t){let e=!0;for(const n in t){e=!1;break}return e}function HR(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(A=>{s.methodName||(s[A]=()=>{throw Ln.removed("Calling removed method ".concat(e,".").concat(A,": "),i)(),new Error(A)})})}const $0="Resource subclass must define virtual methods";let rc=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V2(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||ih(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=Xx(this.gl,e),cn(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=br(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,y="webgl2"in i?i.webgl2:i.webgl1;return s?y:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=br(this.gl),A={},a=n||Object.keys(i);for(const y of a){const w=i[y];if(w&&(!("webgl2"in w)||s)&&(!("extension"in w)||this.gl.getExtension(w.extension))){const C=r?Xc(this.gl,y):y;A[C]=this.getParameter(y,e),r&&w.type==="GLenum"&&(A[C]=Xc(this.gl,A[C]))}}return A}setParameter(e,n){e=Xx(this.gl,e),cn(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=br(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=Xx(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return HR(this,e,n,r)}initialize(e){}_createHandle(){throw new Error($0)}_deleteHandle(){throw new Error($0)}_bindHandle(e){throw new Error($0)}_getOptsFromHandle(){throw new Error($0)}_getParameter(e,n){throw new Error($0)}_setParameter(e,n){throw new Error($0)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Oh.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Oh.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=Oh.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=Oh.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const _Q="Failed to deduce GL constant from typed array";function A3(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(_Q)}}function Pg(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function vQ(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const A=n*i;s=s||new Uint8Array(A);for(let a=0;a<r/2;++a){const y=a*A,w=(r-a-1)*A;s.set(e.subarray(y,y+A)),e.copyWithin(y,w,w+A),e.set(s,w)}}function xQ(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),A=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let y=0;y<i;y++)for(let w=0;w<4;w++)A[(a*i+y)*4+w]=e[(a*2*n+y*2)*4+w];return{data:A,width:i,height:s}}function u3(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const w=r[a]?"".concat(t,".").concat(r[a]):"N/A";Ln.removed("".concat(t,".").concat(a),w)()}for(const a in i)if(a in e){const y=i[a];Ln.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(y))()}let A=null;for(const a in s)if(a in e){const y=s[a];Ln.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(y))(),A=A||Object.assign({},e),A[y]=e[a],delete A[a]}return A||e}const wQ={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},bQ={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Da{static getBytesPerElement(e){return Pg(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return cn(e.size),Pg(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Da(wQ,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Da.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Da.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=u3("Accessor",e,bQ),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const oP=10,WR={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},EQ={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:WR},TQ={removedProps:WR};class qr extends rc{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Da.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Da.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=u3("Buffer",e,EQ),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=u3("Buffer",e,TQ),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Da(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;cn(n);const A=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(A,this.handle),i!==0||s!==void 0?(po(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(A,r,n),this.gl.bindBuffer(A,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:A}=this;return po(A),A.bindBuffer(36662,n.handle),A.bindBuffer(36663,this.handle),A.copyBufferSubData(36662,36663,r,i,s),A.bindBuffer(36662,null),A.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};po(this.gl);const s=Pg(this.accessor.type||5126,{clamped:!1}),A=this._getAvailableElementCount(n),a=r;let y,w;e?(w=e.length,y=w-a):(y=Math.min(A,i||A),w=a+y);const M=Math.min(A,y);return i=i||M,cn(i<=M),e=e||new s(w),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(cn(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(oP,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;cn(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,oP),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=A3(e);return cn(s),this.setAccessor(new Da(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;cn(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Pg(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Da(this.accessor,{type:A3(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Ln.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ln.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Ln.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Ln.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Da(this.accessor,e),this}}const VT={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},QR={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},qR={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function SQ(t,e){const n=VT[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=br(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function MQ(t,e){const n=VT[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const CQ=[9729,9728],aP=globalThis.WebGLBuffer||function(){};class Kh extends rc{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&SQ(e,r),s=s&&(!i||MQ(e,r))),s}constructor(e,n){const{id:r=ih("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(J=>this.initialize(Object.assign({},e,{pixels:J,data:J}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:A=0,recreate:a=!1,parameters:y={},pixelStore:w={},textureUnit:M=void 0}=e;n||(n=i);let{width:C,height:k,dataFormat:U,type:H,compressed:q=!1,mipmaps:se=!0}=e;const{depth:Z=0}=e;return{width:C,height:k,compressed:q,dataFormat:U,type:H}=this._deduceParameters({format:s,type:H,dataFormat:U,compressed:q,data:n,width:C,height:k}),this.width=C,this.height=k,this.depth=Z,this.format=s,this.type=H,this.dataFormat=U,this.border=A,this.textureUnit=M,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),se&&this._isNPOT()&&(Ln.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),se=!1,this._updateForNPOT(y)),this.mipmaps=se,this.setImageData({data:n,width:C,height:k,depth:Z,format:s,type:H,dataFormat:U,border:A,mipmaps:se,parameters:w,compressed:q}),se&&this.generateMipmap(),this.setParameters(y),a&&(this.data=n),r&&(this._video={video:n,parameters:y,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Ln.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),sA(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:A=this.border,offset:a=0,parameters:y={}}=e;let{data:w=null,type:M=this.type,width:C=this.width,height:k=this.height,dataFormat:U=this.dataFormat,compressed:H=!1}=e;w||(w=r),{type:M,dataFormat:U,compressed:H,width:C,height:k}=this._deduceParameters({format:s,type:M,dataFormat:U,compressed:H,data:w,width:C,height:k});const{gl:q}=this;q.bindTexture(this.target,this.handle);let se=null;({data:w,dataType:se}=this._getDataType({data:w,compressed:H}));let Z,J=0;if(sA(this.gl,y,()=>{switch(se){case"null":q.texImage2D(n,i,s,C,k,A,U,M,w);break;case"typed-array":q.texImage2D(n,i,s,C,k,A,U,M,w,a);break;case"buffer":Z=po(q),Z.bindBuffer(35052,w.handle||w),Z.texImage2D(n,i,s,C,k,A,U,M,a),Z.bindBuffer(35052,null);break;case"browser-object":br(q)?q.texImage2D(n,i,s,C,k,A,U,M,w):q.texImage2D(n,i,s,U,M,w);break;case"compressed":for(const[re,de]of w.entries())q.compressedTexImage2D(n,re,de.format,de.width,de.height,A,de.data),J+=de.levelSize;break;default:cn(!1,"Unknown image data type")}}),se==="compressed")this._trackAllocatedMemory(J,"Texture");else if(w&&w.byteLength)this._trackAllocatedMemory(w.byteLength,"Texture");else{const re=QR[this.dataFormat]||4,de=qR[this.type]||1;this._trackAllocatedMemory(this.width*this.height*re*de,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:A=0,width:a=this.width,height:y=this.height,level:w=0,format:M=this.format,type:C=this.type,dataFormat:k=this.dataFormat,compressed:U=!1,offset:H=0,border:q=this.border,parameters:se={}}=e;if({type:C,dataFormat:k,compressed:U,width:a,height:y}=this._deduceParameters({format:M,type:C,dataFormat:k,compressed:U,data:i,width:a,height:y}),cn(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const Z=i;i=Z.data,a=Z.shape[0],y=Z.shape[1]}i instanceof qr&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),sA(this.gl,se,()=>{if(U)this.gl.compressedTexSubImage2D(n,w,s,A,a,y,M,i);else if(i===null)this.gl.texSubImage2D(n,w,s,A,a,y,k,C,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,w,s,A,a,y,k,C,i,H);else if(i instanceof aP){const Z=po(this.gl);Z.bindBuffer(35052,i),Z.texSubImage2D(n,w,s,A,a,y,k,C,H),Z.bindBuffer(35052,null)}else br(this.gl)?po(this.gl).texSubImage2D(n,w,s,A,a,y,k,C,i):this.gl.texSubImage2D(n,w,s,A,k,C,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ln.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof qr?{data:n.handle,dataType:"buffer"}:n instanceof aP?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:A,type:a,compressed:y}=e;const w=VT[n];return A=A||w&&w.dataFormat,a=a||w&&w.types[0],y=y||w&&w.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:A,type:a,compressed:y,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},cn(i,"Could not deduced texture size"),cn(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),cn(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:cn(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return br(this.gl)||!this.width||!this.height?!1:!sP(this.width)||!sP(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:CQ.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let PQ="";function IQ(t,e){return cn(typeof t=="string"),t=PQ+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class ua extends Kh{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Kh.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V2(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:IQ(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const c3=[34069,34070,34071,34072,34073,34074];class ZR extends Kh{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V2(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:A=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:A})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:A=0,format:a=6408,type:y=5121}=e;const{gl:w}=this,M=i||s,C=await Promise.all(c3.map(k=>{const U=M[k];return Promise.all(Array.isArray(U)?U:[U])}));this.bind(),c3.forEach((k,U)=>{C[U].length>1&&this.opts.mipmaps!==!1&&Ln.warn("".concat(this.id," has mipmap and multiple LODs."))(),C[U].forEach((H,q)=>{n&&r?w.texImage2D(k,q,a,n,r,A,a,y,H):w.texImage2D(k,q,a,a,y,H)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:A,border:a=0,format:y=6408,type:w=5121}=e,{gl:M}=this,C=s||A;return this.bind(),C instanceof Promise?C.then(k=>this.setImageDataForFace(Object.assign({},e,{face:n,data:k,pixels:k}))):this.width||this.height?M.texImage2D(n,0,y,r,i,a,y,w,C):M.texImage2D(n,0,y,y,w,C),this}}ZR.FACES=c3;class kQ extends Kh{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return br(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};po(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:A=1,border:a=0,format:y,type:w=5121,offset:M=0,data:C,parameters:k={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),sA(this.gl,k,()=>{ArrayBuffer.isView(C)&&this.gl.texImage3D(this.target,n,r,i,s,A,a,y,w,C),C instanceof qr&&(this.gl.bindBuffer(35052,C.handle),this.gl.texImage3D(this.target,n,r,i,s,A,a,y,w,M))}),C&&C.byteLength)this._trackAllocatedMemory(C.byteLength,"Texture");else{const U=QR[this.dataFormat]||4,H=qR[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*U*H,"Texture")}return this.loaded=!0,this}}const xh="EXT_color_buffer_float",lP={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:xh,bpp:2},33327:{gl2:xh,bpp:4},34842:{gl2:xh,bpp:8},33326:{gl2:xh,bpp:4},33328:{gl2:xh,bpp:8},34836:{gl2:xh,bpp:16},35898:{gl2:xh,bpp:4}};function LQ(t,e,n){const r=n[e];if(!r)return!1;const i=br(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class ff extends rc{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||LQ(e,n,lP)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return cn(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&br(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*lP[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const DQ=256,RQ=1024,BQ=16384,AP=6144,uP=6145,cP=6146,hP=34041,YR="clear: bad arguments";function GT(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let A=0;n&&(A|=BQ,n!==!0&&(s.clearColor=n)),r&&(A|=DQ,r!==!0&&(s.clearDepth=r)),i&&(A|=RQ,r!==!0&&(s.clearStencil=r)),cn(A!==0,YR),sA(t,s,()=>{t.clear(A)})}function zQ(t){let{framebuffer:e=null,buffer:n=AP,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};po(t),sA(t,{framebuffer:e},()=>{switch(n){case AP:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case uP:t.clearBufferfv(uP,0,[i]);break;case cP:t.clearBufferiv(cP,0,[i]);break;case hP:const[s,A]=i;t.clearBufferfi(hP,0,s,A);break;default:cn(!1,YR)}})}function OQ(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return cn(!1),0}}function G2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:A=null,sourceWidth:a,sourceHeight:y,sourceType:w}=e;const{framebuffer:M,deleteFramebuffer:C}=XR(t);cn(M);const{gl:k,handle:U,attachments:H}=M;a=a||M.width,y=y||M.height,s===36064&&U===null&&(s=1028),cn(H[s]),w=w||H[s].type,A=NQ(A,w,i,a,y),w=w||A3(A);const q=k.bindFramebuffer(36160,U);return k.readPixels(n,r,a,y,i,w,A),k.bindFramebuffer(36160,q||null),C&&M.delete(),A}function fP(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=G2(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=xQ({data:r,width:i,height:s}));vQ({data:r,width:i,height:s});const A=document.createElement("canvas");A.width=i,A.height=s;const a=A.getContext("2d"),y=a.createImageData(i,s);return y.data.set(r),a.putImageData(y,0,0),A.toDataURL()}function FQ(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:A=6408}=n;let{targetX:a,targetY:y,targetZ:w,width:M,height:C}=n;const{framebuffer:k,deleteFramebuffer:U}=XR(t);cn(k);const{gl:H,handle:q}=k,se=typeof a<"u"||typeof y<"u"||typeof w<"u";a=a||0,y=y||0,w=w||0;const Z=H.bindFramebuffer(36160,q);cn(e);let J=null;if(e instanceof Kh&&(J=e,M=Number.isFinite(M)?M:J.width,C=Number.isFinite(C)?C:J.height,J.bind(0),e=J.target),!se)H.copyTexImage2D(e,s,A,r,i,M,C,0);else switch(e){case 3553:case 34067:H.copyTexSubImage2D(e,s,a,y,r,i,M,C);break;case 35866:case 32879:po(H).copyTexSubImage3D(e,s,a,y,w,r,i,M,C);break}return J&&J.unbind(),H.bindFramebuffer(36160,Z||null),U&&k.delete(),J}function XR(t){return t instanceof hs?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:qQ(t),deleteFramebuffer:!0}}function NQ(t,e,n,r,i){if(t)return t;e=e||5121;const s=Pg(e,{clamped:!1}),A=OQ(n);return new s(r*i*A)}const ai={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function UQ(t){const e=new ua(t,{format:6408,type:5126,dataFormat:6408}),n=new hs(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const KR={[ai.WEBGL2]:[!1,!0],[ai.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[ai.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[ai.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[ai.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[ai.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[ai.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[ai.FLOAT_BLEND]:["EXT_float_blend"],[ai.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[ai.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[ai.TEXTURE_FLOAT]:["OES_texture_float",!0],[ai.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[ai.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[ai.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[ai.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[ai.COLOR_ATTACHMENT_RGBA32F]:[UQ,"EXT_color_buffer_float"],[ai.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[ai.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[ai.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[ai.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[ai.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[ai.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},VQ=2;function JR(t,e){return jT(t,e)}function jT(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>eB(t,n))}function GQ(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in KR)t.luma.caps[e]===void 0&&(t.luma.caps[e]=eB(t,e));return t.luma.caps}function eB(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=jQ(t,e)),t.luma.caps[e]||Ln.log(VQ,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function jQ(t,e){const n=KR[e];cn(n,e);let r;const i=br(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:cn(!1);return r}const dP="Multiple render targets not supported";class hs extends rc{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new hs(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=po(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=po(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:A=!0,stencil:a=!1,check:y=!0,readBuffer:w=void 0,drawBuffers:M=void 0}=e;if(cn(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const C in i){const k=i[C];(Array.isArray(k)?k[0]:k).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,A,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:w,drawBuffers:M}),i&&y&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:A=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:A});const{gl:a}=this,y=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,y||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return cn(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Ln.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(A=>{i[A]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const A in i){cn(A!==void 0,"Misspelled framebuffer binding point?");const a=Number(A),y=i[a];let w=y;if(!w)this._unattach(a);else if(w instanceof ff)this._attachRenderbuffer({attachment:a,renderbuffer:w});else if(Array.isArray(y)){const[M,C=0,k=0]=y;w=M,this._attachTexture({attachment:a,texture:M,layer:C,level:k})}else this._attachTexture({attachment:a,texture:w,layer:0,level:0});r&&w&&w.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(A=>!this.attachments[A]).forEach(A=>{delete this.attachments[A]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(HQ(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,A=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&GT(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,y)=>{zQ(this.gl,{drawBuffer:y,value:a})}),this.gl.bindFramebuffer(36160,A||null),this}readPixels(){return Ln.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ln.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ln.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ln.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ln.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ln.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:A}=e;const a=po(this.gl),y=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&A===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,A),a.bindFramebuffer(36008,y),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Xc(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const A=n?Xc(this.gl,s):s;i[A]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),A=e?Xc(this.gl,s):s;r[A]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(fP(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Ln.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=fP(this,{targetMaxHeight:100});return Ln.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let A=null;return e&&(A=A||{},A[36064]=new ua(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(A[36064])),n&&r?(A=A||{},A[33306]=new ff(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(A[33306])):n?(A=A||{},A[36096]=new ff(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(A[36096])):r&&cn(!1),A}_unattach(e){const n=this.attachments[e];n&&(n instanceof ff?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:A}=this;switch(A.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:po(A).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const y=$Q(i);A.framebufferTexture2D(36160,n,y,r.handle,s);break;case 3553:A.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:cn(!1,"Illegal texture type")}A.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=yW(this.gl);n?n.readBuffer(e):cn(e===36064||e===1029,dP),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=po(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):cn(e.length===1&&(e[0]===36064||e[0]===1029),dP)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=GQ(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function $Q(t){return t<34069?t+34069:t}function HQ(t){return(hs.STATUS||{})[t]||"Framebuffer error ".concat(t)}const WQ=[36049,36048,33296,33298,33299,33300,33301,33302,33303];hs.ATTACHMENT_PARAMETERS=WQ;function QQ(t,e){cn(t instanceof ua||t instanceof ZR||t instanceof kQ);const n=t.constructor,{gl:r,width:i,height:s,format:A,type:a,dataFormat:y,border:w,mipmaps:M}=t,C=Object.assign({width:i,height:s,format:A,type:a,dataFormat:y,border:w,mipmaps:M},e);return new n(r,C)}function qQ(t,e){const{gl:n,width:r,height:i,id:s}=t;return new hs(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function vy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const ZQ=35632,YQ=35633;function XQ(t){switch(t){case ZQ:return"fragment";case YQ:return"vertex";default:return"unknown type"}}function KQ(t,e,n,r){const i=t.split(/\r?\n/),s={},A={},a=r||vy(e)||"(unnamed)",y="".concat(XQ(n)," shader ").concat(a);for(let M=0;M<i.length;M++){const C=i[M];if(C.length<=1)continue;const k=C.split(":"),U=k[0],H=parseInt(k[2],10);if(isNaN(H))throw new Error("GLSL compilation error in ".concat(y,": ").concat(t));U!=="WARNING"?s[H]=C:A[H]=C}const w=JQ(e);return{shaderName:y,errors:pP(s,w),warnings:pP(A,w)}}function pP(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],A=s.split(":",3),a=A[0],y=parseInt(A[1],10)||0,w=s.substring(A.join(":").length+1).trim();n+=tB("^^^ ".concat(a,": ").concat(w,`

`),y)}}return n}function JQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,A)=>{const a=String(A+e),y=a.length;return tB(a,i-y)+n+s})}function tB(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function nB(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const eq="Shader: GLSL source code must be a JavaScript string";class Ig extends rc{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return cn(!1),"unknown"}}constructor(e,n){V2(e),cn(typeof n.source=="string",eq);const r=vy(n.source,null)||n.id||ih("unnamed ".concat(Ig.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=vy(n,null);r&&(this.id=ih(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Ig.getTypeName(this.shaderType),":").concat(this.id)}getName(){return vy(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:A}=KQ(r,this.source,this.shaderType,this.id);throw Ln.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),Ln.warn("GLSL compilation warnings in ".concat(i,`
`).concat(A))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Jx extends Ig{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class ew extends Ig{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const tq={5126:di.bind(null,"uniform1fv",Pa,1,io),35664:di.bind(null,"uniform2fv",Pa,2,io),35665:di.bind(null,"uniform3fv",Pa,3,io),35666:di.bind(null,"uniform4fv",Pa,4,io),5124:di.bind(null,"uniform1iv",Ec,1,io),35667:di.bind(null,"uniform2iv",Ec,2,io),35668:di.bind(null,"uniform3iv",Ec,3,io),35669:di.bind(null,"uniform4iv",Ec,4,io),35670:di.bind(null,"uniform1iv",Ec,1,io),35671:di.bind(null,"uniform2iv",Ec,2,io),35672:di.bind(null,"uniform3iv",Ec,3,io),35673:di.bind(null,"uniform4iv",Ec,4,io),35674:di.bind(null,"uniformMatrix2fv",Pa,4,Eu),35675:di.bind(null,"uniformMatrix3fv",Pa,9,Eu),35676:di.bind(null,"uniformMatrix4fv",Pa,16,Eu),35678:Os,35680:Os,5125:di.bind(null,"uniform1uiv",x1,1,io),36294:di.bind(null,"uniform2uiv",x1,2,io),36295:di.bind(null,"uniform3uiv",x1,3,io),36296:di.bind(null,"uniform4uiv",x1,4,io),35685:di.bind(null,"uniformMatrix2x3fv",Pa,6,Eu),35686:di.bind(null,"uniformMatrix2x4fv",Pa,8,Eu),35687:di.bind(null,"uniformMatrix3x2fv",Pa,6,Eu),35688:di.bind(null,"uniformMatrix3x4fv",Pa,12,Eu),35689:di.bind(null,"uniformMatrix4x2fv",Pa,8,Eu),35690:di.bind(null,"uniformMatrix4x3fv",Pa,12,Eu),35678:Os,35680:Os,35679:Os,35682:Os,36289:Os,36292:Os,36293:Os,36298:Os,36299:Os,36300:Os,36303:Os,36306:Os,36307:Os,36308:Os,36311:Os},nq={},rq={},iq={},gP=[0];function $T(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(gP[0]=t,t=gP);const i=t.length;if(i%e&&Ln.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let A=0;A<i;A++)s[A]=t[A];return s}function Pa(t,e){return $T(t,e,Float32Array,nq)}function Ec(t,e){return $T(t,e,Int32Array,rq)}function x1(t,e){return $T(t,e,Uint32Array,iq)}function mP(t,e,n){const r=tq[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function sq(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function oq(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!aq(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function aq(t){return Array.isArray(t)||ArrayBuffer.isView(t)?Aq(t):isFinite(t)||t===!0||t===!1||t instanceof Kh||t instanceof ff?!0:t instanceof hs?!!t.texture:!1}function lq(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function Aq(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Os(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function di(t,e,n,r){let i=null,s=null;return(A,a,y)=>{const w=e(y,n),M=w.length;let C=!1;if(i===null)i=new Float32Array(M),s=M,C=!0;else{cn(s===M,"Uniform length cannot change.");for(let k=0;k<M;++k)if(w[k]!==i[k]){C=!0;break}}return C&&(r(A,t,a,w),i.set(w)),C}}function io(t,e,n,r){t[e](n,r)}function Eu(t,e,n,r){t[e](n,!1,r)}const uq=5120,cq=5121,hq=5122,fq=5123,yP=0,w1=1,dq=2,pq=3,b1=4,gq=5,mq=6,As=5126,yq=35664,_q=35665,vq=35666,fp=5124,xq=35667,wq=35668,bq=35669,dp=5125,Eq=36294,Tq=36295,Sq=36296,Mq=35670,Cq=35671,Pq=35672,Iq=35673,kq=35674,Lq=35675,Dq=35676,Rq=35685,Bq=35686,zq=35687,Oq=35688,Fq=35689,Nq=35690,h3={[As]:[As,1,"float"],[yq]:[As,2,"vec2"],[_q]:[As,3,"vec3"],[vq]:[As,4,"vec4"],[fp]:[fp,1,"int"],[xq]:[fp,2,"ivec2"],[wq]:[fp,3,"ivec3"],[bq]:[fp,4,"ivec4"],[dp]:[dp,1,"uint"],[Eq]:[dp,2,"uvec2"],[Tq]:[dp,3,"uvec3"],[Sq]:[dp,4,"uvec4"],[Mq]:[As,1,"bool"],[Cq]:[As,2,"bvec2"],[Pq]:[As,3,"bvec3"],[Iq]:[As,4,"bvec4"],[kq]:[As,8,"mat2"],[Rq]:[As,8,"mat2x3"],[Bq]:[As,8,"mat2x4"],[Lq]:[As,12,"mat3"],[zq]:[As,12,"mat3x2"],[Oq]:[As,12,"mat3x4"],[Dq]:[As,16,"mat4"],[Fq]:[As,16,"mat4x2"],[Nq]:[As,16,"mat4x3"]};function Uq(t){switch(t){case yP:return yP;case w1:return w1;case pq:return w1;case dq:return w1;case b1:return b1;case gq:return b1;case mq:return b1;default:return cn(!1),0}}function _P(t){const e=h3[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function rB(t,e){switch(t){case uq:case cq:case hq:case fq:t=As;break}for(const n in h3){const[r,i,s]=h3[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class Vq{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:A,size:a}=n.getActiveAttrib(e.handle,i),y=n.getAttribLocation(e.handle,s);y>=0&&this._addAttribute(y,s,A,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!br(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:A,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,A,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:A}=_P(r),a={type:s,size:i*A};this._inferProperties(e,n,a);const y={location:e,name:n,accessor:new Da(a)};this.attributeInfos.push(y),this.attributeInfosByLocation[e]=y,this.attributeInfosByName[y.name]=y}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:A}=_P(r),a=new Da({type:s,size:i*A}),y={location:e,name:n,accessor:a};this.varyingInfos.push(y),this.varyingInfosByName[y.name]=y}}const vP=4,Gq=35981,jq=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class iB extends rc{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",jq),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:A=Gq}=e;return this.hash=n||"",this.vs=typeof r=="string"?new Jx(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new ew(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,cn(this.vs instanceof Jx),cn(this.fs instanceof ew),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(po(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,A)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Vq(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:A,end:a,isIndexed:y=!1,indexType:w=5123,instanceCount:M=0,isInstanced:C=M>0,vertexArray:k=null,transformFeedback:U,framebuffer:H,parameters:q={},uniforms:se,samplers:Z}=e;if((se||Z)&&(Ln.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(se||{})),Ln.priority>=n){const J=H?H.id:"default",re="mode=".concat(Xc(this.gl,r)," verts=").concat(i," ")+"instances=".concat(M," indexType=").concat(Xc(this.gl,w)," ")+"isInstanced=".concat(C," isIndexed=").concat(y," ")+"Framebuffer=".concat(J);Ln.log(n,re)()}return cn(k),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||C&&M===0?!1:(k.bindForDraw(i,M,()=>{if(H!==void 0&&(q=Object.assign({},q,{framebuffer:H})),U){const J=Uq(r);U.begin(J)}this._bindTextures(),sA(this.gl,q,()=>{y&&C?this.gl2.drawElementsInstanced(r,i,w,s,M):y&&br(this.gl)&&!isNaN(A)&&!isNaN(a)?this.gl2.drawRangeElements(r,A,a,i,w,s):y?this.gl.drawElements(r,i,w,s):C?this.gl2.drawArraysInstanced(r,s,i,M):this.gl.drawArrays(r,s,i)}),U&&U.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ln.priority>=2&&oq(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,A=!1;if(s instanceof hs&&(s=s.texture),s instanceof Kh)if(A=this.uniforms[n]!==r,A){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:y}=i;a.bind(y),s=y,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||A)&&lq(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Jx({handle:i});break;case 35632:r.fs=new ew({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=ih(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Ln.time(vP,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Ln.timeEnd(vP,"linkProgram for ".concat(this._getName()))(),e.debug||Ln.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=sq(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=mP(e,s,r),r.size>1)for(let A=0;A<r.size;A++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(A,"]")),this._uniformSetters["".concat(i,"[").concat(A,"]")]=mP(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const $q=34918,Hq=34919,Wq=35007,Qq=36795,qq=35976,Zq=35887,Yq=36202;class w_ extends rc{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=br(e),i=jT(e,ai.TIMER_QUERY);let s=r||i;for(const A of n)switch(A){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:cn(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(Wq)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?Yq:Zq)}beginTransformFeedbackQuery(){return this.begin(qq)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,Hq);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(Qq)}getResult(){return this.gl2.getQueryParameter(this.handle,$q)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return w_.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class sB extends rc{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return br(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};po(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,ed(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:A}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Ln.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,A,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof qr?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let E1=null;function Xq(t){return(!E1||E1.byteLength<t)&&(E1=new ArrayBuffer(t)),E1}function Kq(t,e){const n=Xq(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function Jq(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,A=i*s;let a=0;for(let y=r;a<s;a++)e[y++]=n[a];for(;a<A;)a<A-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+A-a),a=A);return e}const eZ="elements must be GL.ELEMENT_ARRAY_BUFFER";class ka extends rc{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?br(e)||dQ()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new ka(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return ka.MAX_ATTRIBUTES=ka.MAX_ATTRIBUTES||e.getParameter(34921),ka.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:ka._setConstantFloatArray(e,n,r);break;case Int32Array:ka._setConstantIntArray(e,n,r);break;case Uint32Array:ka._setConstantUintArray(e,n,r);break;default:cn(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return ka.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return cn(!e||e.target===34963,eZ),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:A,offset:a,normalized:y,integer:w,divisor:M}=r,{gl:C,gl2:k}=this;return e=Number(e),this.bind(()=>{C.bindBuffer(34962,n.handle),w?(cn(br(C)),k.vertexAttribIPointer(e,i,s,A,a)):C.vertexAttribPointer(e,i,s,y,A,a),C.enableVertexAttribArray(e),k.vertexAttribDivisor(e,M||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!ka.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let A=!this.buffer;if(this.buffer=this.buffer||new qr(this.gl,i),A=A||this.buffer.reallocate(i),A=A||!this._compareConstantArrayValues(r,this.bufferValue),A){const a=Kq(n.constructor,s);Jq({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:cn(!1)}}static _setConstantIntArray(e,n,r){switch(cn(br(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:cn(!1)}}static _setConstantUintArray(e,n,r){switch(cn(br(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:cn(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return cn(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const tZ="VertexArray: attributes must be Buffers or constants (i.e. typed array)",nZ=/^(.+)__LOCATION_([0-9]+)$/,rZ=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class iZ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ka(e),HR(this,"VertexArray","v6.0",rZ),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new qr(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof qr&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof qr&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:A,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(A)||A<0)return this.unused[e]=n,Ln.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const y=this._getAttributeInfo(a||A);if(!y)return s;const w=this.accessors[A]||{},M=Da.resolve(y.accessor,w,r,i),{size:C,type:k}=M;return cn(Number.isFinite(C)&&Number.isFinite(k)),{location:A,accessor:M}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=nZ.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof qr)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof qr){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof qr){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(tZ)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(ka.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){ka.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,A=s>0;if(e.isInstanced=e.isInstanced||A,r instanceof qr){const a=r;if(A){const y=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,y)}else{const y=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,y)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ln.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function sZ(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let A=0;A<t.length&&A<n;++A)A>0&&(i+=",".concat(A%r===0?" ":"")),i+=kg(t[A],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function kg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return sZ(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function xP(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;cn(n);const s=".*_.*",A=".*Matrix",a=n._uniformSetters,y={},w=Object.keys(a).sort();let M=0;for(const U of w)!U.match(s)&&!U.match(A)&&tw({table:y,header:e,uniforms:r,uniformName:U,undefinedOnly:i})&&M++;for(const U of w)U.match(A)&&tw({table:y,header:e,uniforms:r,uniformName:U,undefinedOnly:i})&&M++;for(const U of w)y[U]||tw({table:y,header:e,uniforms:r,uniformName:U,undefinedOnly:i})&&M++;let C=0;const k={};if(!i)for(const U in r){const H=r[U];y[U]||(C++,k[U]={Type:"NOT USED: ".concat(H),[e]:kg(H)})}return{table:y,count:M,unusedTable:k,unusedCount:C}}function tw(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const A=r[i],a=oZ(A);return!s||!a?(e[i]={[n]:a?kg(A):"N/A","Uniform Type":a?A:"NOT PROVIDED"},!0):!1}function oZ(t){return t!=null}function aZ(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=wP(e,e.elements,null,n));const i=e.values;for(const s in i){const A=e._getAttributeInfo(s);if(A){let a="".concat(s,": ").concat(A.name);const y=e.accessors[A.location];y&&(a="".concat(s,": ").concat(lZ(A.name,y))),r[a]=wP(e,i[s],y,n)}}return r}function wP(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",A=1,a=0,y=0,w,M,C;if(n&&(s=n.type,A=n.size,s=String(s).replace("Array",""),w=s.indexOf("nt")!==-1),e instanceof qr){const k=e,{data:U,changed:H}=k.getDebugData();M=H?"*":"",C=U,y=k.byteLength,a=y/U.BYTES_PER_ELEMENT/A;let q;if(n){const se=n.divisor>0;q="".concat(se?"I ":"P "," ").concat(a," (x").concat(A,"=").concat(y," bytes ").concat(Xc(i,s),")")}else w=!0,q="".concat(y," bytes");return{[r]:"".concat(M).concat(kg(C,{size:A,isInteger:w})),"Format ":q}}return C=e,A=e.length,s=String(e.constructor.name).replace("Array",""),w=s.indexOf("nt")!==-1,{[r]:"".concat(kg(C,{size:A,isInteger:w})," (constant)"),"Format ":"".concat(A,"x").concat(s," (constant)")}}function lZ(t,e){const{type:n,size:r}=e,i=rB(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function AZ(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=bP(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=bP(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function bP(t){const{type:e,size:n}=t.accessor,r=rB(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}function uZ(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function cZ(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||uZ()}const EP=cZ()&&typeof document<"u";let hZ=0;class fZ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=se=>GR(se),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:A=()=>{},onError:a,gl:y=null,glOptions:w={},debug:M=!1,createFramebuffer:C=!1,autoResizeViewport:k=!0,autoResizeDrawingBuffer:U=!0,stats:H=Oh.get("animation-loop-".concat(hZ++))}=e;let{useDevicePixels:q=!0}=e;"useDevicePixelRatio"in e&&(Ln.deprecated("useDevicePixelRatio","useDevicePixels")(),q=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:A,onError:a,gl:y,glOptions:w,debug:M,createFramebuffer:C},this.gl=y,this.needsRedraw=null,this.timeline=null,this.stats=H,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:k,autoResizeDrawingBuffer:U,useDevicePixels:q}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return cn(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=w_.isSupported(this.gl,["timers"])?new w_(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Ln.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=EP?new Promise((e,n)=>{if(EP&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):yQ(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):mQ(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?UT(this.props.gl,e):this.onCreateContext(e),!U2(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");nQ(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&aQ(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new hs(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const dm="vs",HT="fs";function Fa(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const nw={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function dZ(t){const e={};for(const n in t){const r=t[n],i=pZ(r);e[n]=i}return e}function pZ(t){let e=TP(t);return e==="object"?t?"type"in t?Object.assign({},t,nw[t.type]):"value"in t?(e=TP(t.value),Object.assign({type:e},t,nw[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},nw[e])}function TP(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const gZ="vs",mZ="fs";class SP{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:A,getUniforms:a,deprecations:y=[],defines:w={},inject:M={},vertexShader:C,fragmentShader:k}=e;Fa(typeof n=="string"),this.name=n,this.vs=r||C,this.fs=i||k,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(y),this.defines=w,this.injections=yZ(M),A&&(this.uniforms=dZ(A))}getModuleSource(e){let n;switch(e){case gZ:n=this.vs||"";break;case mZ:n=this.fs||"";break;default:Fa(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Fa(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function yZ(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function _Z(t){return vZ(aB(t))}function vZ(t){const e={},n={};return oB({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function oB(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&oB({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function aB(t,e){return t.map(n=>(n instanceof SP||(Fa(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Fa(n.name,"shader module has no name"),n=new SP(n),n.dependencies=aB(n.dependencies)),n))}function xZ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const wZ=7936,bZ=7937,EZ=7938,TZ=35724,WT={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Ph={};Object.keys(WT).forEach(t=>{Ph[t]=t});function SZ(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function MZ(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||wZ),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||bZ);return{gpuVendor:CZ(n,r),vendor:n,renderer:r,version:t.getParameter(EZ),shadingLanguageVersion:t.getParameter(TZ)}}function CZ(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const rw={};function MP(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=WT[e];if(Fa(r,e),!xZ(n))return!0;if(e in rw)return rw[e];const i=r[0],s=n.behavior||"enable",A="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,A),t.compileShader(a);const y=t.getShaderParameter(a,35713);return t.deleteShader(a),rw[e]=y,y}function PZ(t,e){const n=WT[e];Fa(n,e);const r=SZ(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return Fa(i===!1||i===!0),i}function T1(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>PZ(t,n))}function IZ(t){switch(MZ(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function kZ(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return T1(t,Ph.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),T1(t,Ph.GLSL_DERIVATIVES)&&MP(t,Ph.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),T1(t,Ph.GLSL_FRAG_DATA)&&MP(t,Ph.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),T1(t,Ph.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const LZ=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,DZ=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,RZ={[dm]:LZ,[HT]:DZ},xy="__LUMA_INJECT_DECLARATIONS__",CP=/void\s+main\s*\([^)]*\)\s*\{\n?/,PP=/}\n?[^{}]*$/,iw=[];function IP(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===dm;for(const s in n){const A=n[s];A.sort((y,w)=>y.order-w.order),iw.length=A.length;for(let y=0,w=A.length;y<w;++y)iw[y]=A[y].injection;const a="".concat(iw.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(xy,a));break;case"vs:#main-start":i&&(t=t.replace(CP,y=>y+a));break;case"vs:#main-end":i&&(t=t.replace(PP,y=>a+y));break;case"fs:#decl":i||(t=t.replace(xy,a));break;case"fs:#main-start":i||(t=t.replace(CP,y=>y+a));break;case"fs:#main-end":i||(t=t.replace(PP,y=>a+y));break;default:t=t.replace(s,y=>y+a)}}return t=t.replace(xy,""),r&&(t=t.replace(/\}\s*$/,s=>s+RZ[e])),t}function f3(t){const e={};return Fa(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function td(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const lB=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],BZ=[...lB,[td("attribute"),"in $1"],[td("varying"),"out $1"]],zZ=[...lB,[td("varying"),"in $1"]],AB=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],OZ=[...AB,[td("in"),"attribute $1"],[td("out"),"varying $1"]],FZ=[...AB,[td("in"),"varying $1"]],d3="gl_FragColor",p3=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,NZ=/void\s+main\s*\([^)]*\)\s*\{\n?/;function UZ(t,e,n){switch(e){case 300:return n?b_(t,BZ):VZ(t);case 100:return n?b_(t,OZ):GZ(t);default:throw new Error("unknown GLSL version ".concat(e))}}function b_(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function VZ(t){t=b_(t,zZ);const e=t.match(p3);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(d3,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(NZ,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(d3,"\\b"),"g"),n)}return t}function GZ(t){t=b_(t,FZ);const e=t.match(p3);if(e){const n=e[1];t=t.replace(p3,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),d3)}return t}const jZ=`

`.concat(xy,`

`),uB={[dm]:"vertex",[HT]:"fragment"},$Z=`precision highp float;

`;function HZ(t,e){const{vs:n,fs:r}=e,i=_Z(e.modules||[]);return{gl:t,vs:kP(t,Object.assign({},e,{source:n,type:dm,modules:i})),fs:kP(t,Object.assign({},e,{source:r,type:HT,modules:i})),getUniforms:WZ(i)}}function kP(t,e){let{id:n,source:r,type:i,modules:s,defines:A={},hookFunctions:a=[],inject:y={},transpileToGLSL100:w=!1,prologue:M=!0,log:C}=e;Fa(typeof r=="string","shader source must be a string");const k=i===dm,U=r.split(`
`);let H=100,q="",se=r;U[0].indexOf("#version ")===0?(H=300,q=U[0],se=U.slice(1).join(`
`)):q="#version ".concat(H);const Z={};s.forEach(Fe=>{Object.assign(Z,Fe.getDefines())}),Object.assign(Z,A);let J=M?"".concat(q,`
`).concat(qZ({id:n,source:r,type:i}),`
`).concat(QZ({type:i}),`
`).concat(IZ(t),`
`).concat(kZ(t),`
`).concat(ZZ(Z),`
`).concat(k?"":$Z,`
`):"".concat(q,`
`);const re=XZ(a),de={},_e={},fe={};for(const Fe in y){const We=typeof y[Fe]=="string"?{injection:y[Fe],order:0}:y[Fe],qe=Fe.match(/^(v|f)s:(#)?([\w-]+)$/);if(qe){const Ke=qe[2],Oe=qe[3];Ke?Oe==="decl"?_e[Fe]=[We]:fe[Fe]=[We]:de[Fe]=[We]}else fe[Fe]=[We]}for(const Fe of s){C&&Fe.checkDeprecations(se,C);const We=Fe.getModuleSource(i,H);J+=We;const qe=Fe.injections[i];for(const Ke in qe){const Oe=Ke.match(/^(v|f)s:#([\w-]+)$/);if(Oe){const Ye=Oe[2]==="decl"?_e:fe;Ye[Ke]=Ye[Ke]||[],Ye[Ke].push(qe[Ke])}else de[Ke]=de[Ke]||[],de[Ke].push(qe[Ke])}}return J+=jZ,J=IP(J,i,_e),J+=YZ(re[i],de),J+=se,J=IP(J,i,fe),J=UZ(J,w?100:H,k),J}function WZ(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function QZ(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(uB[e].toUpperCase(),`
`)}function qZ(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(uB[r],`

`):""}function ZZ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function YZ(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((A,a)=>A.order-a.order);for(const A of s)n+="  ".concat(A.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function XZ(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),A=n.replace(/\(.+/,"");e[i][A]=Object.assign(r,{signature:s})}),e}const KZ="void main() {gl_FragColor = vec4(0);}",cB=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,JZ=`#version 300 es
`.concat(cB);function hB(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const A=s.split(";")[0];return{qualifier:r,type:i,name:A}}function fB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?JZ:e>300?"#version ".concat(e,`
`).concat(cB):KZ;const s=nY(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function eY(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Fa(!1),null}}function tY(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Fa(!1),null}}function nY(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Fa(!1),null}}const rY=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,iY={name:"fp32",vs:rY,fs:null};function Lg(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const Bo={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function sY(t,{precision:e=Bo.precision}={}){return t=oY(t),"".concat(parseFloat(t.toPrecision(e)))}function Jh(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Nc(t,e,n){return lY(t,r=>Math.max(e,Math.min(n,r)))}function VA(t,e,n){return Jh(t)?t.map((r,i)=>VA(r,e[i],n)):n*e+(1-n)*t}function Nu(t,e,n){const r=Bo.EPSILON;n&&(Bo.EPSILON=n);try{if(t===e)return!0;if(Jh(t)&&Jh(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Nu(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Bo.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Bo.EPSILON=r}}function oY(t){return Math.round(t/Bo.EPSILON)*Bo.EPSILON}function aY(t){return t.clone?t.clone():new Array(t.length)}function lY(t,e,n){if(Jh(t)){const r=t;n=n||aY(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function AY(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class QT extends AY(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Jh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Bo)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+sY(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Nu(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Bo.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function uY(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ei(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function sg(t,e,n=""){if(Bo.debug&&!uY(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class dB extends QT{get x(){return this[0]}set x(e){this[0]=ei(e)}get y(){return this[1]}set y(e){this[1]=ei(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return ei(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return ei(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Lg(e>=0&&e<this.ELEMENTS,"index is out of range"),ei(this[e])}setComponent(e,n){return Lg(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var og=1e-6,aA=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function cY(){var t=new aA(2);return aA!=Float32Array&&(t[0]=0,t[1]=0),t}function g3(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function hY(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function fY(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function dY(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function pY(t,e){return t[0]=-e[0],t[1]=-e[1],t}function pB(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function gY(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function mY(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var yY=hY;(function(){var t=cY();return function(e,n,r,i,s,A){var a,y;for(n||(n=2),r||(r=0),i?y=Math.min(i*n+r,e.length):y=e.length,a=r;a<y;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,A),e[a]=t[0],e[a+1]=t[1];return e}})();function _Y(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function gB(t,e,n){const r=e[0],i=e[1],s=e[2],A=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/A,t[1]=(n[1]*r+n[5]*i+n[9]*s)/A,t[2]=(n[2]*r+n[6]*i+n[10]*s)/A,t}function vY(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function xY(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3],t}function mB(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*s,t[1]=n[1]*r+n[4]*i+n[7]*s,t[2]=n[2]*r+n[5]*i+n[8]*s,t[3]=e[3],t}function yB(){var t=new aA(3);return aA!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function wY(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function LP(t,e,n){var r=new aA(3);return r[0]=t,r[1]=e,r[2]=n,r}function bY(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function EY(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function TY(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function SY(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function MY(t,e){var n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function _B(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function wy(t,e,n){var r=e[0],i=e[1],s=e[2],A=n[0],a=n[1],y=n[2];return t[0]=i*y-s*a,t[1]=s*A-r*y,t[2]=r*a-i*A,t}function CY(t,e,n,r){var i=e[0],s=e[1],A=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=A+r*(n[2]-A),t}function qT(t,e,n){var r=e[0],i=e[1],s=e[2],A=n[3]*r+n[7]*i+n[11]*s+n[15];return A=A||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/A,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/A,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/A,t}function vB(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function xB(t,e,n){var r=n[0],i=n[1],s=n[2],A=n[3],a=e[0],y=e[1],w=e[2],M=i*w-s*y,C=s*a-r*w,k=r*y-i*a,U=i*k-s*C,H=s*M-r*k,q=r*C-i*M,se=A*2;return M*=se,C*=se,k*=se,U*=2,H*=2,q*=2,t[0]=a+M+U,t[1]=y+C+H,t[2]=w+k+q,t}function PY(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function IY(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function kY(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function LY(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],A=e[1],a=e[2],y=Math.sqrt(n*n+r*r+i*i),w=Math.sqrt(s*s+A*A+a*a),M=y*w,C=M&&_B(t,e)/M;return Math.acos(Math.min(Math.max(C,-1),1))}var wB=bY,DY=EY,bB=wY,sw=TY;(function(){var t=yB();return function(e,n,r,i,s,A){var a,y;for(n||(n=3),r||(r=0),i?y=Math.min(i*n+r,e.length):y=e.length,a=r;a<y;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,A),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const ow=[0,0,0];let S1;class mn extends dB{static get ZERO(){return S1||(S1=new mn(0,0,0),Object.freeze(S1)),S1}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Jh(e)?this.copy(e):(Bo.debug&&(ei(e),ei(n),ei(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Bo.debug&&(ei(e.x),ei(e.y),ei(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ei(e)}angle(e){return LY(this,e)}cross(e){return wy(this,this,e),this.check()}rotateX({radians:e,origin:n=ow}){return PY(this,this,n,e),this.check()}rotateY({radians:e,origin:n=ow}){return IY(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=ow}){return kY(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return qT(this,this,e),this.check()}transformAsVector(e){return gB(this,this,e),this.check()}transformByMatrix3(e){return vB(this,this,e),this.check()}transformByMatrix2(e){return vY(this,this,e),this.check()}transformByQuaternion(e){return xB(this,this,e),this.check()}}let M1;class ZT extends dB{static get ZERO(){return M1||(M1=new ZT(0,0,0,0),Object.freeze(M1)),M1}constructor(e=0,n=0,r=0,i=0){super(-0,-0,-0,-0),Jh(e)&&arguments.length===1?this.copy(e):(Bo.debug&&(ei(e),ei(n),ei(r),ei(i)),this[0]=e,this[1]=n,this[2]=r,this[3]=i)}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Bo.debug&&(ei(e.x),ei(e.y),ei(e.z),ei(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=ei(e)}get w(){return this[3]}set w(e){this[3]=ei(e)}transform(e){return qT(this,this,e),this.check()}transformByMatrix3(e){return mB(this,this,e),this.check()}transformByMatrix2(e){return xY(this,this,e),this.check()}transformByQuaternion(e){return xB(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}class EB extends QT{toString(){let e="[";if(Bo.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=ei(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function RY(){var t=new aA(9);return aA!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function BY(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function zY(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],A=e[4],a=e[5],y=e[6],w=e[7],M=e[8],C=M*A-a*w,k=-M*s+a*y,U=w*s-A*y,H=n*C+r*k+i*U;return H?(H=1/H,t[0]=C*H,t[1]=(-M*r+i*w)*H,t[2]=(a*r-i*A)*H,t[3]=k*H,t[4]=(M*n-i*y)*H,t[5]=(-a*n+i*s)*H,t[6]=U*H,t[7]=(-w*n+r*y)*H,t[8]=(A*n-r*s)*H,t):null}function OY(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],A=t[5],a=t[6],y=t[7],w=t[8];return e*(w*s-A*y)+n*(-w*i+A*a)+r*(y*i-s*a)}function DP(t,e,n){var r=e[0],i=e[1],s=e[2],A=e[3],a=e[4],y=e[5],w=e[6],M=e[7],C=e[8],k=n[0],U=n[1],H=n[2],q=n[3],se=n[4],Z=n[5],J=n[6],re=n[7],de=n[8];return t[0]=k*r+U*A+H*w,t[1]=k*i+U*a+H*M,t[2]=k*s+U*y+H*C,t[3]=q*r+se*A+Z*w,t[4]=q*i+se*a+Z*M,t[5]=q*s+se*y+Z*C,t[6]=J*r+re*A+de*w,t[7]=J*i+re*a+de*M,t[8]=J*s+re*y+de*C,t}function FY(t,e,n){var r=e[0],i=e[1],s=e[2],A=e[3],a=e[4],y=e[5],w=e[6],M=e[7],C=e[8],k=n[0],U=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=A,t[4]=a,t[5]=y,t[6]=k*r+U*A+w,t[7]=k*i+U*a+M,t[8]=k*s+U*y+C,t}function NY(t,e,n){var r=e[0],i=e[1],s=e[2],A=e[3],a=e[4],y=e[5],w=e[6],M=e[7],C=e[8],k=Math.sin(n),U=Math.cos(n);return t[0]=U*r+k*A,t[1]=U*i+k*a,t[2]=U*s+k*y,t[3]=U*A-k*r,t[4]=U*a-k*i,t[5]=U*y-k*s,t[6]=w,t[7]=M,t[8]=C,t}function RP(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function UY(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],A=n+n,a=r+r,y=i+i,w=n*A,M=r*A,C=r*a,k=i*A,U=i*a,H=i*y,q=s*A,se=s*a,Z=s*y;return t[0]=1-C-H,t[3]=M-Z,t[6]=k+se,t[1]=M+Z,t[4]=1-w-H,t[7]=U-q,t[2]=k-se,t[5]=U+q,t[8]=1-w-C,t}var m3;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(m3||(m3={}));const VY=Object.freeze([1,0,0,0,1,0,0,0,1]);class Ns extends EB{static get IDENTITY(){return jY()}static get ZERO(){return GY()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return m3}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(VY)}fromObject(e){return this.check()}fromQuaternion(e){return UY(this,e),this.check()}set(e,n,r,i,s,A,a,y,w){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=A,this[6]=a,this[7]=y,this[8]=w,this.check()}setRowMajor(e,n,r,i,s,A,a,y,w){return this[0]=e,this[1]=i,this[2]=a,this[3]=n,this[4]=s,this[5]=y,this[6]=r,this[7]=A,this[8]=w,this.check()}determinant(){return OY(this)}transpose(){return BY(this,this),this.check()}invert(){return zY(this,this),this.check()}multiplyLeft(e){return DP(this,e,this),this.check()}multiplyRight(e){return DP(this,this,e),this.check()}rotate(e){return NY(this,this,e),this.check()}scale(e){return Array.isArray(e)?RP(this,this,e):RP(this,this,[e,e]),this.check()}translate(e){return FY(this,this,e),this.check()}transform(e,n){let r;switch(e.length){case 2:r=gY(n||[-0,-0],e,this);break;case 3:r=vB(n||[-0,-0,-0],e,this);break;case 4:r=mB(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sg(r,e.length),r}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let C1,P1;function GY(){return C1||(C1=new Ns([0,0,0,0,0,0,0,0,0]),Object.freeze(C1)),C1}function jY(){return P1||(P1=new Ns,Object.freeze(P1)),P1}function $Y(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function HY(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],A=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=A,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function y3(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],A=e[4],a=e[5],y=e[6],w=e[7],M=e[8],C=e[9],k=e[10],U=e[11],H=e[12],q=e[13],se=e[14],Z=e[15],J=n*a-r*A,re=n*y-i*A,de=n*w-s*A,_e=r*y-i*a,fe=r*w-s*a,Fe=i*w-s*y,We=M*q-C*H,qe=M*se-k*H,Ke=M*Z-U*H,Oe=C*se-k*q,tt=C*Z-U*q,Ye=k*Z-U*se,pt=J*Ye-re*tt+de*Oe+_e*Ke-fe*qe+Fe*We;return pt?(pt=1/pt,t[0]=(a*Ye-y*tt+w*Oe)*pt,t[1]=(i*tt-r*Ye-s*Oe)*pt,t[2]=(q*Fe-se*fe+Z*_e)*pt,t[3]=(k*fe-C*Fe-U*_e)*pt,t[4]=(y*Ke-A*Ye-w*qe)*pt,t[5]=(n*Ye-i*Ke+s*qe)*pt,t[6]=(se*de-H*Fe-Z*re)*pt,t[7]=(M*Fe-k*de+U*re)*pt,t[8]=(A*tt-a*Ke+w*We)*pt,t[9]=(r*Ke-n*tt-s*We)*pt,t[10]=(H*fe-q*de+Z*J)*pt,t[11]=(C*de-M*fe-U*J)*pt,t[12]=(a*qe-A*Oe-y*We)*pt,t[13]=(n*Oe-r*qe+i*We)*pt,t[14]=(q*re-H*_e-se*J)*pt,t[15]=(M*_e-C*re+k*J)*pt,t):null}function WY(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],A=t[5],a=t[6],y=t[7],w=t[8],M=t[9],C=t[10],k=t[11],U=t[12],H=t[13],q=t[14],se=t[15],Z=e*A-n*s,J=e*a-r*s,re=e*y-i*s,de=n*a-r*A,_e=n*y-i*A,fe=r*y-i*a,Fe=w*H-M*U,We=w*q-C*U,qe=w*se-k*U,Ke=M*q-C*H,Oe=M*se-k*H,tt=C*se-k*q;return Z*tt-J*Oe+re*Ke+de*qe-_e*We+fe*Fe}function jh(t,e,n){var r=e[0],i=e[1],s=e[2],A=e[3],a=e[4],y=e[5],w=e[6],M=e[7],C=e[8],k=e[9],U=e[10],H=e[11],q=e[12],se=e[13],Z=e[14],J=e[15],re=n[0],de=n[1],_e=n[2],fe=n[3];return t[0]=re*r+de*a+_e*C+fe*q,t[1]=re*i+de*y+_e*k+fe*se,t[2]=re*s+de*w+_e*U+fe*Z,t[3]=re*A+de*M+_e*H+fe*J,re=n[4],de=n[5],_e=n[6],fe=n[7],t[4]=re*r+de*a+_e*C+fe*q,t[5]=re*i+de*y+_e*k+fe*se,t[6]=re*s+de*w+_e*U+fe*Z,t[7]=re*A+de*M+_e*H+fe*J,re=n[8],de=n[9],_e=n[10],fe=n[11],t[8]=re*r+de*a+_e*C+fe*q,t[9]=re*i+de*y+_e*k+fe*se,t[10]=re*s+de*w+_e*U+fe*Z,t[11]=re*A+de*M+_e*H+fe*J,re=n[12],de=n[13],_e=n[14],fe=n[15],t[12]=re*r+de*a+_e*C+fe*q,t[13]=re*i+de*y+_e*k+fe*se,t[14]=re*s+de*w+_e*U+fe*Z,t[15]=re*A+de*M+_e*H+fe*J,t}function E_(t,e,n){var r=n[0],i=n[1],s=n[2],A,a,y,w,M,C,k,U,H,q,se,Z;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(A=e[0],a=e[1],y=e[2],w=e[3],M=e[4],C=e[5],k=e[6],U=e[7],H=e[8],q=e[9],se=e[10],Z=e[11],t[0]=A,t[1]=a,t[2]=y,t[3]=w,t[4]=M,t[5]=C,t[6]=k,t[7]=U,t[8]=H,t[9]=q,t[10]=se,t[11]=Z,t[12]=A*r+M*i+H*s+e[12],t[13]=a*r+C*i+q*s+e[13],t[14]=y*r+k*i+se*s+e[14],t[15]=w*r+U*i+Z*s+e[15]),t}function YT(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function QY(t,e,n,r){var i=r[0],s=r[1],A=r[2],a=Math.hypot(i,s,A),y,w,M,C,k,U,H,q,se,Z,J,re,de,_e,fe,Fe,We,qe,Ke,Oe,tt,Ye,pt,en;return a<og?null:(a=1/a,i*=a,s*=a,A*=a,y=Math.sin(n),w=Math.cos(n),M=1-w,C=e[0],k=e[1],U=e[2],H=e[3],q=e[4],se=e[5],Z=e[6],J=e[7],re=e[8],de=e[9],_e=e[10],fe=e[11],Fe=i*i*M+w,We=s*i*M+A*y,qe=A*i*M-s*y,Ke=i*s*M-A*y,Oe=s*s*M+w,tt=A*s*M+i*y,Ye=i*A*M+s*y,pt=s*A*M-i*y,en=A*A*M+w,t[0]=C*Fe+q*We+re*qe,t[1]=k*Fe+se*We+de*qe,t[2]=U*Fe+Z*We+_e*qe,t[3]=H*Fe+J*We+fe*qe,t[4]=C*Ke+q*Oe+re*tt,t[5]=k*Ke+se*Oe+de*tt,t[6]=U*Ke+Z*Oe+_e*tt,t[7]=H*Ke+J*Oe+fe*tt,t[8]=C*Ye+q*pt+re*en,t[9]=k*Ye+se*pt+de*en,t[10]=U*Ye+Z*pt+_e*en,t[11]=H*Ye+J*pt+fe*en,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function TB(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],A=e[5],a=e[6],y=e[7],w=e[8],M=e[9],C=e[10],k=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+w*r,t[5]=A*i+M*r,t[6]=a*i+C*r,t[7]=y*i+k*r,t[8]=w*i-s*r,t[9]=M*i-A*r,t[10]=C*i-a*r,t[11]=k*i-y*r,t}function qY(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],A=e[1],a=e[2],y=e[3],w=e[8],M=e[9],C=e[10],k=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-w*r,t[1]=A*i-M*r,t[2]=a*i-C*r,t[3]=y*i-k*r,t[8]=s*r+w*i,t[9]=A*r+M*i,t[10]=a*r+C*i,t[11]=y*r+k*i,t}function SB(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],A=e[1],a=e[2],y=e[3],w=e[4],M=e[5],C=e[6],k=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+w*r,t[1]=A*i+M*r,t[2]=a*i+C*r,t[3]=y*i+k*r,t[4]=w*i-s*r,t[5]=M*i-A*r,t[6]=C*i-a*r,t[7]=k*i-y*r,t}function ZY(t,e){var n=e[0],r=e[1],i=e[2],s=e[4],A=e[5],a=e[6],y=e[8],w=e[9],M=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,A,a),t[2]=Math.hypot(y,w,M),t}function YY(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],A=n+n,a=r+r,y=i+i,w=n*A,M=r*A,C=r*a,k=i*A,U=i*a,H=i*y,q=s*A,se=s*a,Z=s*y;return t[0]=1-C-H,t[1]=M+Z,t[2]=k-se,t[3]=0,t[4]=M-Z,t[5]=1-w-H,t[6]=U+q,t[7]=0,t[8]=k+se,t[9]=U-q,t[10]=1-w-C,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function XY(t,e,n,r,i,s,A){var a=1/(n-e),y=1/(i-r),w=1/(s-A);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*y,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*y,t[10]=(A+s)*w,t[11]=-1,t[12]=0,t[13]=0,t[14]=A*s*2*w,t[15]=0,t}function KY(t,e,n,r,i){var s=1/Math.tan(e/2),A;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(A=1/(r-i),t[10]=(i+r)*A,t[14]=2*i*r*A):(t[10]=-1,t[14]=-2*r),t}var JY=KY;function eX(t,e,n,r,i,s,A){var a=1/(e-n),y=1/(r-i),w=1/(s-A);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*w,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*y,t[14]=(A+s)*w,t[15]=1,t}var tX=eX;function nX(t,e,n,r){var i,s,A,a,y,w,M,C,k,U,H=e[0],q=e[1],se=e[2],Z=r[0],J=r[1],re=r[2],de=n[0],_e=n[1],fe=n[2];return Math.abs(H-de)<og&&Math.abs(q-_e)<og&&Math.abs(se-fe)<og?$Y(t):(M=H-de,C=q-_e,k=se-fe,U=1/Math.hypot(M,C,k),M*=U,C*=U,k*=U,i=J*k-re*C,s=re*M-Z*k,A=Z*C-J*M,U=Math.hypot(i,s,A),U?(U=1/U,i*=U,s*=U,A*=U):(i=0,s=0,A=0),a=C*A-k*s,y=k*i-M*A,w=M*s-C*i,U=Math.hypot(a,y,w),U?(U=1/U,a*=U,y*=U,w*=U):(a=0,y=0,w=0),t[0]=i,t[1]=a,t[2]=M,t[3]=0,t[4]=s,t[5]=y,t[6]=C,t[7]=0,t[8]=A,t[9]=w,t[10]=k,t[11]=0,t[12]=-(i*H+s*q+A*se),t[13]=-(a*H+y*q+w*se),t[14]=-(M*H+C*q+k*se),t[15]=1,t)}function rX(){var t=new aA(4);return aA!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function iX(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function XT(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function sX(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function oX(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function aX(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],A=n*n+r*r+i*i+s*s;return A>0&&(A=1/Math.sqrt(A)),t[0]=n*A,t[1]=r*A,t[2]=i*A,t[3]=s*A,t}function lX(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function AX(t,e,n,r){var i=e[0],s=e[1],A=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=A+r*(n[2]-A),t[3]=a+r*(n[3]-a),t}function Ed(t,e,n){var r=e[0],i=e[1],s=e[2],A=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*A,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*A,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*A,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*A,t}function uX(t,e,n){var r=e[0],i=e[1],s=e[2],A=n[0],a=n[1],y=n[2],w=n[3],M=w*r+a*s-y*i,C=w*i+y*r-A*s,k=w*s+A*i-a*r,U=-A*r-a*i-y*s;return t[0]=M*w+U*-A+C*-y-k*-a,t[1]=C*w+U*-a+k*-A-M*-y,t[2]=k*w+U*-y+M*-a-C*-A,t[3]=e[3],t}(function(){var t=rX();return function(e,n,r,i,s,A){var a,y;for(n||(n=4),r||(r=0),i?y=Math.min(i*n+r,e.length):y=e.length,a=r;a<y;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,A),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var _3;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(_3||(_3={}));const cX=45*Math.PI/180,hX=1,aw=.1,lw=500,fX=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class la extends EB{static get IDENTITY(){return pX()}static get ZERO(){return dX()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return _3}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,A,a,y,w,M,C,k,U,H,q,se){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=A,this[6]=a,this[7]=y,this[8]=w,this[9]=M,this[10]=C,this[11]=k,this[12]=U,this[13]=H,this[14]=q,this[15]=se,this.check()}setRowMajor(e,n,r,i,s,A,a,y,w,M,C,k,U,H,q,se){return this[0]=e,this[1]=s,this[2]=w,this[3]=U,this[4]=n,this[5]=A,this[6]=M,this[7]=H,this[8]=r,this[9]=a,this[10]=C,this[11]=q,this[12]=i,this[13]=y,this[14]=k,this[15]=se,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(fX)}fromObject(e){return this.check()}fromQuaternion(e){return YY(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:A=aw,far:a=lw}=e;return a===1/0?gX(this,n,r,i,s,A):XY(this,n,r,i,s,A,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return nX(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:A=aw,far:a=lw}=e;return tX(this,n,r,i,s,A,a),this.check()}orthographic(e){const{fovy:n=cX,aspect:r=hX,focalDistance:i=1,near:s=aw,far:A=lw}=e;BP(n);const a=n/2,y=i*Math.tan(a),w=y*r;return this.ortho({left:-w,right:w,bottom:-y,top:y,near:s,far:A})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return BP(n),JY(this,n,r,i,s),this.check()}determinant(){return WY(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],A=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*A,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*A,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*A,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],A=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*A,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*A,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*A,e}transpose(){return HY(this,this),this.check()}invert(){return y3(this,this),this.check()}multiplyLeft(e){return jh(this,e,this),this.check()}multiplyRight(e){return jh(this,this,e),this.check()}rotateX(e){return TB(this,this,e),this.check()}rotateY(e){return qY(this,this,e),this.check()}rotateZ(e){return SB(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return QY(this,this,e,n),this.check()}scale(e){return YT(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return E_(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Ed(n||[-0,-0,-0,-0],e,this),sg(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=mY(n||[-0,-0],e,this);break;case 3:i=qT(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sg(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=_Y(n||[-0,-0],e,this);break;case 3:r=gB(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sg(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let I1,k1;function dX(){return I1||(I1=new la([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(I1)),I1}function pX(){return k1||(k1=new la,Object.freeze(k1)),k1}function BP(t){if(t>Math.PI*2)throw Error("expected radians")}function gX(t,e,n,r,i,s){const A=2*s/(n-e),a=2*s/(i-r),y=(n+e)/(n-e),w=(i+r)/(i-r),M=-1,C=-1,k=-2*s;return t[0]=A,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=y,t[9]=w,t[10]=M,t[11]=C,t[12]=0,t[13]=0,t[14]=k,t[15]=0,t}function zP(){var t=new aA(4);return aA!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function mX(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function MB(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function OP(t,e,n){var r=e[0],i=e[1],s=e[2],A=e[3],a=n[0],y=n[1],w=n[2],M=n[3];return t[0]=r*M+A*a+i*w-s*y,t[1]=i*M+A*y+s*a-r*w,t[2]=s*M+A*w+r*y-i*a,t[3]=A*M-r*a-i*y-s*w,t}function yX(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],A=e[3],a=Math.sin(n),y=Math.cos(n);return t[0]=r*y+A*a,t[1]=i*y+s*a,t[2]=s*y-i*a,t[3]=A*y-r*a,t}function _X(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],A=e[3],a=Math.sin(n),y=Math.cos(n);return t[0]=r*y-s*a,t[1]=i*y+A*a,t[2]=s*y+r*a,t[3]=A*y-i*a,t}function vX(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],A=e[3],a=Math.sin(n),y=Math.cos(n);return t[0]=r*y+i*a,t[1]=i*y-r*a,t[2]=s*y+A*a,t[3]=A*y-s*a,t}function xX(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function by(t,e,n,r){var i=e[0],s=e[1],A=e[2],a=e[3],y=n[0],w=n[1],M=n[2],C=n[3],k,U,H,q,se;return U=i*y+s*w+A*M+a*C,U<0&&(U=-U,y=-y,w=-w,M=-M,C=-C),1-U>og?(k=Math.acos(U),H=Math.sin(k),q=Math.sin((1-r)*k)/H,se=Math.sin(r*k)/H):(q=1-r,se=r),t[0]=q*i+se*y,t[1]=q*s+se*w,t[2]=q*A+se*M,t[3]=q*a+se*C,t}function wX(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],A=n*n+r*r+i*i+s*s,a=A?1/A:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=s*a,t}function bX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function CB(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var s=(i+1)%3,A=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[s*3+s]-e[A*3+A]+1),t[i]=.5*r,r=.5/r,t[3]=(e[s*3+A]-e[A*3+s])*r,t[s]=(e[s*3+i]+e[i*3+s])*r,t[A]=(e[A*3+i]+e[i*3+A])*r}return t}var EX=iX,TX=XT,SX=lX,MX=AX,CX=sX,PX=oX,PB=aX,IX=function(){var t=yB(),e=LP(1,0,0),n=LP(0,1,0);return function(r,i,s){var A=_B(i,s);return A<-.999999?(wy(t,e,i),bB(t)<1e-6&&wy(t,n,i),MY(t,t),MB(r,t,Math.PI),r):A>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(wy(t,i,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+A,PB(r,r))}}();(function(){var t=zP(),e=zP();return function(n,r,i,s,A,a){return by(t,r,A,a),by(e,i,s,a),by(n,t,e,2*a*(1-a)),n}})();(function(){var t=RY();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],PB(e,CB(e,t))}})();const kX=[0,0,0,1];class FP extends QT{constructor(e=0,n=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return CB(this,e),this.check()}fromAxisRotation(e,n){return MB(this,e,n),this.check()}identity(){return mX(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=ei(e)}get y(){return this[1]}set y(e){this[1]=ei(e)}get z(){return this[2]}set z(e){this[2]=ei(e)}get w(){return this[3]}set w(e){this[3]=ei(e)}len(){return CX(this)}lengthSquared(){return PX(this)}dot(e){return SX(this,e)}rotationTo(e,n){return IX(this,e,n),this.check()}add(e){return EX(this,this,e),this.check()}calculateW(){return xX(this,this),this.check()}conjugate(){return bX(this,this),this.check()}invert(){return wX(this,this),this.check()}lerp(e,n,r){return r===void 0?this.lerp(this,e,n):(MX(this,e,n,r),this.check())}multiplyRight(e){return OP(this,this,e),this.check()}multiplyLeft(e){return OP(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return yX(this,this,e),this.check()}rotateY(e){return _X(this,this,e),this.check()}rotateZ(e){return vX(this,this,e),this.check()}scale(e){return TX(this,this,e),this.check()}slerp(e,n,r){let i,s,A;switch(arguments.length){case 1:({start:i=kX,target:s,ratio:A}=e);break;case 2:i=this,s=e,A=n;break;default:i=e,s=n,A=r}return by(this,i,s,A),this.check()}transformVector4(e,n=new ZT){return uX(n,e,this),sg(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const IB={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},NP=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,LX={lightSources:{}};function Aw(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function DX(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=Aw(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,A)=>{i["lighting_uPointLight[".concat(A,"].color")]=Aw(s),i["lighting_uPointLight[".concat(A,"].position")]=s.position,i["lighting_uPointLight[".concat(A,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,A)=>{i["lighting_uDirectionalLight[".concat(A,"].color")]=Aw(s),i["lighting_uDirectionalLight[".concat(A,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function kB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:LX;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},DX({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return kB({lightSources:e})}return{}}const LB={name:"lights",vs:NP,fs:NP,getUniforms:kB,defines:{MAX_LIGHTS:3}},RX=new Uint8Array([0,255,255,255]),BX={pickingSelectedColor:null,pickingHighlightColor:RX,pickingActive:!1,pickingAttribute:!1};function zX(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:BX;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const OX=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,FX=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,NX={name:"picking",vs:OX,fs:FX,getUniforms:zX},DB=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,UX={};function VX(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function RB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:UX;if(!("material"in t))return{};const{material:e}=t;return e?VX(e):{lighting_uEnabled:!1}}const GX={name:"gouraud-lighting",dependencies:[LB],vs:DB,defines:{LIGHTING_VERTEX:1},getUniforms:RB},jX={name:"phong-lighting",dependencies:[LB],fs:DB,defines:{LIGHTING_FRAGMENT:1},getUniforms:RB},$X=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,HX={name:"transform",vs:$X,fs:null};class pm{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new pm(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:A=[],bufferMode:a=35981,transpileToGLSL100:y=!1}=e,w=this._getModuleList(e.modules),M=this._getHash(n),C=this._getHash(r),k=w.map(re=>this._getHash(re.name)).sort(),U=A.map(re=>this._getHash(re)),H=Object.keys(i).sort(),q=Object.keys(s).sort(),se=[],Z=[];for(const re of H)se.push(this._getHash(re)),se.push(this._getHash(i[re]));for(const re of q)Z.push(this._getHash(re)),Z.push(this._getHash(s[re]));const J="".concat(M,"/").concat(C,"D").concat(se.join("/"),"M").concat(k.join("/"),"I").concat(Z.join("/"),"V").concat(U.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(y?"T":"");if(!this._programCache[J]){const re=HZ(this.gl,{vs:n,fs:r,modules:w,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:y});this._programCache[J]=new iB(this.gl,{hash:J,vs:re.vs,fs:re.fs,varyings:A,bufferMode:a}),this._getUniforms[J]=re.getUniforms||(de=>{}),this._useCounts[J]=0}return this._useCounts[J]++,this._programCache[J]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,A=this._defaultModules.length;s<A;++s){const a=this._defaultModules[s],y=a.name;n[i++]=a,r[y]=!0}for(let s=0,A=e.length;s<A;++s){const a=e[s],y=a.name;r[y]||(n[i++]=a,r[y]=!0)}return n.length=i,n}}const WX={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function QX(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const A=e.attributes[s],a=qX(s,n);if(s==="indices")i=A;else if(A.constant)r[a]=A.value;else{const y=A.value,w={...A};delete w.value,r[a]=[new qr(t,y),w],ZX(s,w)}}if(i){const s=i.value||i;cn(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const A={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new qr(t,{data:s,target:34963}),A]}return r}function qX(t,e){const{attributeMap:n=WX}=e||{};return n&&n[t]||t}function ZX(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}cn(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const H0=2,YX=1e4,XX="Model needs drawMode and vertexCount",UP=()=>{},KX={};class qu{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=ih("model")}=n;cn(U2(e)),this.id=r,this.gl=e,this.id=n.id||ih("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||pm.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:A,inject:a,varyings:y,bufferMode:w,transpileToGLSL100:M}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:A,inject:a,varyings:y,bufferMode:w,transpileToGLSL100:M},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},cn(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),XX)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:A,inject:a,varyings:y,bufferMode:w,transpileToGLSL100:M}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:A,inject:a,varyings:y,bufferMode:w,transpileToGLSL100:M},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return cn(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return cn(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=QX(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ed(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return GT(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:A=this.transformFeedback,parameters:a={},vertexArray:y=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let w;Ln.priority>=H0&&(w=this._logDrawCallStart(H0));const M=this.vertexArray.getDrawParams(),{isIndexed:C=M.isIndexed,indexType:k=M.indexType,indexOffset:U=M.indexOffset,vertexArrayInstanced:H=M.isInstanced}=this.props;H&&!this.isInstanced&&Ln.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:q,instanceCount:se}=this,{onBeforeRender:Z=UP,onAfterRender:J=UP}=this.props;Z(),this.program.setUniforms(this.uniforms);const re=this.program.draw(Object.assign(KX,e,{logPriority:w,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:y,transformFeedback:A,isIndexed:C,indexType:k,isInstanced:q,instanceCount:se,offset:C?U:0}));return J(),Ln.priority>=H0&&this._logDrawCallEnd(w,y,r),re}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(A=>A.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(A=>A.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ln.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:A,defines:a,varyings:y,bufferMode:w,transpileToGLSL100:M}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:A,defines:a,varyings:y,bufferMode:w,transpileToGLSL100:M}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}cn(n instanceof iB,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new iZ(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof qr&&n.delete()}}_setAnimationProps(e){this.animated&&cn(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ed(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new sB(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:YX;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Ln.group(H0,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ln.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=aZ({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:A,unusedTable:a,unusedCount:y}=xP({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:w,count:M}=xP({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});M>0&&Ln.log("MISSING UNIFORMS",Object.keys(w))(),y>0&&Ln.log("UNUSED UNIFORMS",Object.keys(a))();const C=AZ(this.vertexArray.configuration);Ln.table(e,s)(),Ln.table(e,A)(),Ln.table(e+1,C)(),i&&i.log({logLevel:H0,message:"Rendered to ".concat(i.id)}),Ln.groupEnd(H0)()}}class JX{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof qr?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&cn(br(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const A=n[s],{byteLength:a,usage:y,accessor:w}=A;r[i]=this._createNewBuffer(i,{byteLength:a,usage:y,accessor:w})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new sB(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],cn(r[s]instanceof qr)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new qr(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const eK="transform_uSampler_",T_="transform_uSize_",VP="transform_position";function tK(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,A=Object.keys(n).length,a=null;const y={};let w=e,M={};if(A>0||r){const C=w.split(`
`),k=C.slice();if(C.forEach((U,H,q)=>{if(A>0){const se=oK(U,n);if(se){const{updatedLine:Z,inject:J}=se;k[H]=Z,M=f3([M,J]),Object.assign(y,se.samplerTextureMap),A--}}r&&!a&&(a=sK(U,r))}),r){cn(i);const U="".concat(T_).concat(r),H="uniform vec2 ".concat(U,`;
`),q="     vec2 ".concat(VP," = transform_getPos(").concat(U,`);
     gl_Position = vec4(`).concat(VP,`, 0, 1.);
`);M=f3([M,{"vs:#decl":H,"vs:#main-start":q}])}w=k.join(`
`)}return{vs:w,targetTextureType:a,inject:M,samplerTextureMap:y}}function nK(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,A;n&&({width:s,height:A}=r,i["".concat(T_).concat(n)]=[s,A]);for(const a in e)({width:s,height:A}=e[a]),i["".concat(T_).concat(a)]=[s,A];return i}function rK(t){return hB(t,["attribute","in"])}function iK(t){const e="".concat(eK).concat(t),n="".concat(T_).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function sK(t,e){const n=hB(t,["varying","out"]);return n&&n.name===e?n.type:null}function oK(t,e){const n={},r=rK(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const A="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:y,uniformDeclerations:w}=iK(s),M=eY(i),C="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(y,").").concat(M,`;
`);return n[a]=s,{updatedLine:A,inject:{"vs:#decl":w,"vs:#main-start":C},samplerTextureMap:n}}return null}const aK={10241:9728,10240:9728,10242:33071,10243:33071},lK="transform_output";class AK{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],A=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),y=Object.assign({},e.parameters);let w=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){A.transform_elementID=this.elementIDBuffer;for(const C in this.samplerTextureMap){const k=this.samplerTextureMap[C];a[C]=r[k]}this._setSourceTextureParameters();const M=nK({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,M)}return this.hasTargetTexture&&(w=!1,y.viewport=[0,0,i.width,i.height]),{attributes:A,framebuffer:i,uniforms:a,discard:w,parameters:y}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=G2(n);if(!e)return r;const i=r.constructor,s=tY(this.targetTextureType),A=new i(r.length*s/4);let a=0;for(let y=0;y<r.length;y+=4)for(let w=0;w<s;w++)A[a++]=r[y+w];return A}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof ua)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new qr(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:A,height:a}=s,{framebuffer:y}=e;y?(y.update({attachments:{36064:s},resizeAttachments:!1}),y.resize({width:A,height:a})):e.framebuffer=new hs(this.gl,{id:"transform-framebuffer",width:A,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(aK)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=QQ(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:A,inject:a,samplerTextureMap:y}=tK({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),w=f3([e.inject||{},a]);this.targetTextureType=A,this.samplerTextureMap=y;const M=e._fs||fB({version:nB(i),input:this.targetTextureVarying,inputType:A,output:lK}),C=this.hasSourceTextures||this.targetTextureVarying?[HX].concat(e.modules||[]):e.modules;return{vs:i,fs:M,modules:C,uniforms:s,inject:w}}}let KT=class{static isSupported(e){return br(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();cn(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new qu(n,Object.assign({},e,{fs:e.fs||fB({version:nB(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){uK(n)&&(this.bufferTransform=new JX(e,n)),cK(n)&&(this.textureTransform=new AK(e,n)),cn(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}};function uK(t){return!!(!ed(t.feedbackBuffers)||!ed(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function cK(t){return!!(!ed(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const GP={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Uu{static get DRAW_MODE(){return GP}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=ih("geometry"),drawMode:r=GP.TRIANGLES,attributes:i={},indices:s=null,vertexCount:A=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=A||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,cn(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(cn(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:A,size:a,constant:y}=s;!y&&A&&a>=1&&(r=Math.min(r,A.length/a))}return cn(Number.isFinite(r)),r}}let hK=1,fK=1;class BB{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,A=hK++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(A,a),A}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:A}=i;s.setTime(this.getTime(A))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=fK++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const dK=[255,255,255],pK=1;let gK=0;class zB{constructor(e={}){ae(this,"id",void 0),ae(this,"color",void 0),ae(this,"intensity",void 0),ae(this,"type","ambient");const{color:n=dK}=e,{intensity:r=pK}=e;this.id=e.id||"ambient-".concat(gK++),this.color=n,this.intensity=r}}const mK=[255,255,255],yK=1,_K=[0,0,-1];let vK=0;class v3{constructor(e={}){ae(this,"id",void 0),ae(this,"color",void 0),ae(this,"intensity",void 0),ae(this,"type","directional"),ae(this,"direction",void 0),ae(this,"shadow",void 0);const{color:n=mK}=e,{intensity:r=yK}=e,{direction:i=_K}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(vK++),this.color=n,this.intensity=r,this.type="directional",this.direction=new mn(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class xK{constructor(e,n={id:"pass"}){ae(this,"id",void 0),ae(this,"gl",void 0),ae(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class JT extends xK{constructor(...e){super(...e),ae(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return Qu(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:A,clearStack:a=!0,clearCanvas:y=!0}=e;e.pass=e.pass||"unknown";const w=this.gl;y&&bK(w,n),a&&(this._lastRenderIndex=-1);const M=[];for(const C of i){const k=s&&s[C.id];A?.(C);const U=this._getDrawLayerParams(C,e),H=C.subViewports||[C];for(const q of H){const se=this._drawLayersInViewport(w,{target:n,moduleParameters:r,viewport:q,view:k,pass:e.pass,layers:e.layers},U);M.push(se)}}return M}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:A,effects:a,moduleParameters:y},w=!1){const M=[],C=OB(this._lastRenderIndex+1),k={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:A},U={};for(let H=0;H<n.length;H++){const q=n[H],se=this._shouldDrawLayer(q,k,s,U),Z={shouldDrawLayer:se};se&&!w&&(Z.layerRenderIndex=C(q,se),Z.moduleParameters=this._getModuleParameters(q,a,r,y),Z.layerParameters=this.getLayerParameters(q,H,e)),M[H]=Z}return M}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:A,view:a},y){const w=wK(e,{moduleParameters:r,target:s,viewport:A});if(a&&a.props.clear){const C=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;sA(e,{scissorTest:!0,scissor:w},()=>GT(e,C))}const M={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Qu(e,{viewport:w});for(let C=0;C<n.length;C++){const k=n[C],{shouldDrawLayer:U,layerRenderIndex:H,moduleParameters:q,layerParameters:se}=y[C];if(U&&k.props.pickable&&M.pickableCount++,k.isComposite)M.compositeCount++;else if(U){M.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,H),q.viewport=A;try{k._drawLayer({moduleParameters:q,uniforms:{layerIndex:H},parameters:se})}catch(Z){k.raiseError(Z,"drawing ".concat(k," to ").concat(i))}}}return M}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let A=e.parent;for(;A;){if(!A.props.visible||!A.filterSubLayer(n))return!1;n.layer=A,A=A.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const A=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Jf(this.gl)});if(n)for(const y of n){var a;Object.assign(A,(a=y.getModuleParameters)===null||a===void 0?void 0:a.call(y,e))}return Object.assign(A,this.getModuleParameters(e,n),i)}}function OB(t=0,e={}){const n={},r=(i,s)=>{const A=i.props._offset,a=i.id,y=i.parent&&i.parent.id;let w;if(y&&!(y in e)&&r(i.parent,!1),y in n){const M=n[y]=n[y]||OB(e[y],e);w=M(i,s),n[a]=M}else Number.isFinite(A)?(w=A+(e[y]||0),n[a]=null):w=t;return s&&w>=t&&(t=w+1),e[a]=w,w};return r}function wK(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||Jf(t),A=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,A-(a.y+a.height)*s,a.width*s,a.height*s]}function bK(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;Qu(t,{viewport:[0,0,n,r]}),t.clear(16640)}class EK extends JT{constructor(e,n){super(e,n),ae(this,"shadowMap",void 0),ae(this,"depthBuffer",void 0),ae(this,"fbo",void 0),this.shadowMap=new ua(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new ff(e,{format:33189,width:1,height:1}),this.fbo=new hs(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;sA(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Jf(this.gl),s=r.width*i,A=r.height*i;(s!==n.width||A!==n.height)&&n.resize({width:s,height:A}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const FB="#define SMOOTH_EDGE_RADIUS 0.5",TK=`
`.concat(FB,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),SK=`
`.concat(FB,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),MK={name:"geometry",vs:TK,fs:SK},CK=Object.keys(wr).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(wr[t],";")).join(""),PK=Object.keys(Kl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Kl[t],";")).join(""),IK=Object.keys(Xh).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Xh[t],";")).join(""),kK="".concat(CK,`
`).concat(PK,`
`).concat(IK,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function LK(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function gm(t){let e={},n;return r=>{for(const i in r)if(!LK(r[i],e[i])){n=t(r),e=r;break}return n}}const jP=[0,0,0,0],DK=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],NB=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],RK=[0,0,0],UB=[0,0,0],BK=gm(FK);function VB(t,e,n=UB){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===wr.LNGLAT_OFFSETS||e===wr.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Kl.WEB_MERCATOR:(e===wr.LNGLAT||e===wr.CARTESIAN)&&(i=[0,0,0],s=!1);break;case Kl.WEB_MERCATOR_AUTO_OFFSET:e===wr.LNGLAT?r=i:e===wr.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Kl.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Kl.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function zK(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:A}=t,a=jP,y=jP,w=t.cameraPosition;const{geospatialOrigin:M,shaderCoordinateOrigin:C,offsetMode:k}=VB(t,e,n);return k&&(y=t.projectPosition(M||C),w=[w[0]-y[0],w[1]-y[1],w[2]-y[2]],y[3]=1,a=Ed([],y,A),s=r||s,A=jh([],i,s),A=jh([],A,DK)),{viewMatrix:s,viewProjectionMatrix:A,projectionCenter:a,originCommon:y,cameraPosCommon:w,shaderCoordinateOrigin:C,geospatialOrigin:M}}function OK({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=wr.DEFAULT,coordinateOrigin:i=UB,autoWrapLongitude:s=!1}){r===wr.DEFAULT&&(r=t.isGeospatial?wr.LNGLAT:wr.CARTESIAN);const A=BK({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return A.project_uWrapLongitude=s,A.project_uModelMatrix=n||NB,A}function FK({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:A,cameraPosCommon:a,shaderCoordinateOrigin:y,geospatialOrigin:w}=zK(t,n,r),M=t.getDistanceScales(),C=[t.width*e,t.height*e],k=Ed([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,U={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:y,project_uCommonOrigin:A.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:C,project_uDevicePixelRatio:e,project_uFocalDistance:k,project_uCommonUnitsPerMeter:M.unitsPerMeter,project_uCommonUnitsPerWorldUnit:M.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:RK,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:NB,project_uCameraPosition:a};if(w){const H=t.getDistanceScales(w);switch(n){case wr.METER_OFFSETS:U.project_uCommonUnitsPerWorldUnit=H.unitsPerMeter,U.project_uCommonUnitsPerWorldUnit2=H.unitsPerMeter2;break;case wr.LNGLAT:case wr.LNGLAT_OFFSETS:t._pseudoMeters||(U.project_uCommonUnitsPerMeter=H.unitsPerMeter),U.project_uCommonUnitsPerWorldUnit=H.unitsPerDegree,U.project_uCommonUnitsPerWorldUnit2=H.unitsPerDegree2;break;case wr.CARTESIAN:U.project_uCommonUnitsPerWorldUnit=[1,1,H.unitsPerMeter[2]],U.project_uCommonUnitsPerWorldUnit2=[0,0,H.unitsPerMeter2[2]];break}}return U}const NK={};function UK(t=NK){return"viewport"in t?OK(t):{}}const eS={name:"project",dependencies:[iY,MK],vs:kK,getUniforms:UK};function VK(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Bf(t,e){const n=Ed([],e,t);return XT(n,n,1/n[3]),n}function $P(t,e){const n=t%e;return n<0?e+n:n}function GK(t,e,n){return n*e+(1-n)*t}function x3(t,e,n){return t<e?e:t>n?n:t}function jK(t){return Math.log(t)*Math.LOG2E}const tS=Math.log2||jK;function Zu(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Jl=Math.PI,GB=Jl/4,yl=Jl/180,w3=180/Jl,nd=512,S_=4003e4,L1=85.051129,$K=1.5;function HP(t){return Math.pow(2,t)}function jB(t){return tS(t)}function qA(t){const[e,n]=t;Zu(Number.isFinite(e)),Zu(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*yl,i=n*yl,s=nd*(r+Jl)/(2*Jl),A=nd*(Jl+Math.log(Math.tan(GB+i*.5)))/(2*Jl);return[s,A]}function e0(t){const[e,n]=t,r=e/nd*(2*Jl)-Jl,i=2*(Math.atan(Math.exp(n/nd*(2*Jl)-Jl))-GB);return[r*w3,i*w3]}function HK(t){const{latitude:e}=t;Zu(Number.isFinite(e));const n=Math.cos(e*yl);return jB(S_*n)-9}function uw(t){const e=Math.cos(t*yl);return nd/S_/e}function b3(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Zu(Number.isFinite(e)&&Number.isFinite(n));const i=nd,s=Math.cos(e*yl),A=i/360,a=A/s,y=i/S_/s,w={unitsPerMeter:[y,y,y],metersPerUnit:[1/y,1/y,1/y],unitsPerDegree:[A,a,y],degreesPerUnit:[1/A,1/a,1/y]};if(r){const M=yl*Math.tan(e*yl)/s,C=A*M/2,k=i/S_*M,U=k/a*y;w.unitsPerDegree2=[0,C,k],w.unitsPerMeter2=[U,0,U]}return w}function $B(t,e){const[n,r,i]=t,[s,A,a]=e,{unitsPerMeter:y,unitsPerMeter2:w}=b3({longitude:n,latitude:r,highPrecision:!0}),M=qA(t);M[0]+=s*(y[0]+w[0]*A),M[1]+=A*(y[1]+w[1]*A);const C=e0(M),k=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[C[0],C[1],k]:C}function WK(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:A}=t,a=VK();E_(a,a,[0,0,-i]),TB(a,a,-n*yl),SB(a,a,r*yl);const y=s/e;return YT(a,a,[y,y,y]),A&&E_(a,a,SY([],A)),a}function QK(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:A,scale:a,nearZMultiplier:y=1,farZMultiplier:w=1}=t;let{fovy:M=M_($K)}=t;r!==void 0&&(M=M_(r));const C=M*yl,k=i*yl,U=HB(M);let H=U;A&&(H+=A[2]*a/Math.cos(k)/n);const q=C*(.5+(s?s[1]:0)/n),se=Math.sin(q)*H/Math.sin(x3(Math.PI/2-k-q,.01,Math.PI-.01)),Z=Math.sin(k)*se+H,J=H*10,re=Math.min(Z*w,J);return{fov:C,aspect:e/n,focalDistance:U,near:y,far:re}}function M_(t){return 2*Math.atan(.5/t)*w3}function HB(t){return .5/Math.tan(.5*t*yl)}function WB(t,e){const[n,r,i=0]=t;return Zu(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Bf(e,[n,r,i,1])}function nS(t,e,n=0){const[r,i,s]=t;if(Zu(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return Bf(e,[r,i,s,1]);const A=Bf(e,[r,i,0,1]),a=Bf(e,[r,i,1,1]),y=A[2],w=a[2],M=y===w?0:((n||0)-y)/(w-y);return pB([],A,a,M)}function qK(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:A=[0,0]}=t,[[a,y],[w,M]]=r,C=ZK(t.padding),k=qA([a,x3(M,-L1,L1)]),U=qA([w,x3(y,-L1,L1)]),H=[Math.max(Math.abs(U[0]-k[0]),i),Math.max(Math.abs(U[1]-k[1]),i)],q=[e-C.left-C.right-Math.abs(A[0])*2,n-C.top-C.bottom-Math.abs(A[1])*2];Zu(q[0]>0&&q[1]>0);const se=q[0]/H[0],Z=q[1]/H[1],J=(C.right-C.left)/2/se,re=(C.top-C.bottom)/2/Z,de=[(U[0]+k[0])/2+J,(U[1]+k[1])/2+re],_e=e0(de),fe=Math.min(s,tS(Math.abs(Math.min(se,Z))));return Zu(Number.isFinite(fe)),{longitude:_e[0],latitude:_e[1],zoom:fe}}function ZK(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Zu(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const WP=Math.PI/180;function YK(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},A=i([0,r],s),a=i([n,r],s);let y,w;const M=t.fovy?.5*t.fovy*WP:Math.atan(.5/t.altitude),C=(90-t.pitch)*WP;return M>C-.01?(y=QP(t,0,e),w=QP(t,n,e)):(y=i([0,0],s),w=i([n,0],s)),[A,a,w,y]}function QP(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Bf(r,[e,0,1,1]),s=Bf(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),y=pB([],i,s,a),w=e0(y);return w.push(n),w}const qP=512;function XK(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:A,bearing:a=0}=t;(i<-180||i>180)&&(i=$P(i+180,360)-180),(a<-180||a>180)&&(a=$P(a+180,360)-180);const y=tS(n/qP);if(A<=y)A=y,s=0;else{const w=n/2/Math.pow(2,A),M=e0([0,w])[1];if(s<M)s=M;else{const C=e0([0,qP-w])[1];s>C&&(s=C)}}return{width:e,height:n,longitude:i,latitude:s,zoom:A,pitch:r,bearing:a}}const QB=.01,KK=["longitude","latitude","zoom"],qB={curve:1.414,speed:1.2};function JK(t,e,n,r){const{startZoom:i,startCenterXY:s,uDelta:A,w0:a,u1:y,S:w,rho:M,rho2:C,r0:k}=ZB(t,e,r);if(y<QB){const de={};for(const _e of KK){const fe=t[_e],Fe=e[_e];de[_e]=GK(fe,Fe,n)}return de}const U=n*w,H=Math.cosh(k)/Math.cosh(k+M*U),q=a*((Math.cosh(k)*Math.tanh(k+M*U)-Math.sinh(k))/C)/y,se=1/H,Z=i+jB(se),J=fY([],A,q);g3(J,J,s);const re=e0(J);return{longitude:re[0],latitude:re[1],zoom:Z}}function eJ(t,e,n){const r={...qB,...n},{screenSpeed:i,speed:s,maxDuration:A}=r,{S:a,rho:y}=ZB(t,e,r),w=1e3*a;let M;return Number.isFinite(i)?M=w/(i/y):M=w/s,Number.isFinite(A)&&M>A?0:M}function ZB(t,e,n){n=Object.assign({},qB,n);const r=n.curve,i=t.zoom,s=[t.longitude,t.latitude],A=HP(i),a=e.zoom,y=[e.longitude,e.latitude],w=HP(a-i),M=qA(s),C=qA(y),k=yY([],C,M),U=Math.max(t.width,t.height),H=U/w,q=dY(k)*A,se=Math.max(q,QB),Z=r*r,J=(H*H-U*U+Z*Z*se*se)/(2*U*Z*se),re=(H*H-U*U-Z*Z*se*se)/(2*H*Z*se),de=Math.log(Math.sqrt(J*J+1)-J),_e=Math.log(Math.sqrt(re*re+1)-re),fe=(_e-de)/r;return{startZoom:i,startCenterXY:M,uDelta:k,w0:U,u1:q,S:fe,rho:r,rho2:Z,r0:de,r1:_e}}const tJ=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,nJ=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,rJ=gm(lJ),iJ=gm(AJ),sJ=[0,0,0,1],oJ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function aJ(t,e){const[n,r,i]=t,s=nS([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function lJ({viewport:t,center:e}){return new la(t.viewProjectionMatrix).invert().transform(e)}function AJ({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(A=>aJ(A,r));for(const A of e){const a=A.clone().translate(new mn(t.center).negate()),y=s.map(M=>a.transform(M)),w=new la().ortho({left:Math.min(...y.map(M=>M[0])),right:Math.max(...y.map(M=>M[0])),bottom:Math.min(...y.map(M=>M[1])),top:Math.max(...y.map(M=>M[1])),near:Math.min(...y.map(M=>-M[2])),far:Math.max(...y.map(M=>-M[2]))});n.push(w.multiplyRight(A))}return n}function uJ(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||sJ,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=rJ({viewport:t.viewport,center:e.project_uCenter}),s=[],A=iJ({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const y=A[a],w=y.clone().translate(new mn(t.viewport.center).negate());e.project_uCoordinateSystem===wr.LNGLAT&&e.project_uProjectionMode===Kl.WEB_MERCATOR?(A[a]=w,s[a]=i):(A[a]=y.clone().multiplyRight(oJ),s[a]=w.transform(i))}for(let a=0;a<A.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=A[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const cw={name:"shadow",dependencies:[eS],vs:tJ,fs:nJ,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?uJ(t,e):{}},cJ={color:[255,255,255],intensity:1},ZP=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],hJ=[0,0,0,200/255];class rS{constructor(e={}){ae(this,"id","lighting-effect"),ae(this,"props",void 0),ae(this,"shadowColor",hJ),ae(this,"shadow",void 0),ae(this,"ambientLight",void 0),ae(this,"directionalLights",void 0),ae(this,"pointLights",void 0),ae(this,"shadowPasses",[]),ae(this,"shadowMaps",[]),ae(this,"dummyShadowMap",null),ae(this,"programManager",void 0),ae(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:A}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=pm.getDefaultProgramManager(e),cw&&this.programManager.addDefaultModule(cw)),this.dummyShadowMap||(this.dummyShadowMap=new ua(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:A,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(cw),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new la().lookAt({eye:new mn(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new EK(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new zB(cJ),this.directionalLights.push(new v3(ZP[0]),new v3(ZP[1])))}}class fJ{constructor(e={}){ae(this,"_pool",[]),ae(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:A=!1,initialize:a=!1,maxCount:y}){const w=i||e&&e.constructor||Float32Array,M=n*r+s;if(ArrayBuffer.isView(e)){if(M<=e.length)return e;if(M*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new w(e.buffer,0,M)}let C=1/0;y&&(C=y*r+s);const k=this._allocate(w,M,a,C);return e&&A?k.set(e):a||k.fill(0,0,4),this._release(e),k}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const A=this._pool,a=e.BYTES_PER_ELEMENT*s,y=A.findIndex(w=>w.byteLength>=a);if(y>=0){const w=new e(A.splice(y,1)[0],0,s);return r&&w.fill(0),w}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(A=>A.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const rd=new fJ;function Op(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function dJ(t){return[t[12],t[13],t[14]]}function pJ(t){return{left:W0(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:W0(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:W0(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:W0(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:W0(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:W0(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const YP=new mn;function W0(t,e,n,r){YP.set(t,e,n);const i=YP.len();return{distance:r/i,normal:new mn(-t/i,-e/i,-n/i)}}function gJ(t){return t-Math.fround(t)}let pp;function hw(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;pp=rd.allocate(pp,s,{type:Float32Array,size:n*2});let A=r,a=0;for(;A<i;){for(let y=0;y<n;y++){const w=t[A++];pp[a+y]=w,pp[a+y+n]=gJ(w)}a+=n*2}return pp.subarray(0,s*n*2)}function mJ(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const yJ=Math.PI/180,_J=Op(),XP=[0,0,0],vJ={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function xJ({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:A,far:a}){const y=t/e,w=n?new la().orthographic({fovy:r,aspect:y,focalDistance:i,near:A,far:a}):new la().perspective({fovy:r,aspect:y,near:A,far:a});if(s){const{left:M=0,right:C=0,top:k=0,bottom:U=0}=s,H=Nc((M+t-C)/2,0,t)-t/2,q=Nc((k+e-U)/2,0,e)-e/2;w[8]-=H*2/t,w[9]+=q*2/e}return w}class m0{constructor(e={}){ae(this,"id",void 0),ae(this,"x",void 0),ae(this,"y",void 0),ae(this,"width",void 0),ae(this,"height",void 0),ae(this,"padding",void 0),ae(this,"isGeospatial",void 0),ae(this,"zoom",void 0),ae(this,"focalDistance",void 0),ae(this,"position",void 0),ae(this,"modelMatrix",void 0),ae(this,"distanceScales",void 0),ae(this,"scale",void 0),ae(this,"center",void 0),ae(this,"cameraPosition",void 0),ae(this,"projectionMatrix",void 0),ae(this,"viewMatrix",void 0),ae(this,"viewMatrixUncentered",void 0),ae(this,"viewMatrixInverse",void 0),ae(this,"viewProjectionMatrix",void 0),ae(this,"pixelProjectionMatrix",void 0),ae(this,"pixelUnprojectionMatrix",void 0),ae(this,"resolution",void 0),ae(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||vJ,this.focalDistance=e.focalDistance||1,this.position=e.position||XP,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Kl.WEB_MERCATOR:Kl.WEB_MERCATOR_AUTO_OFFSET:Kl.IDENTITY}equals(e){return e instanceof m0?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Nu(e.projectionMatrix,this.projectionMatrix)&&Nu(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=WB(r,this.pixelProjectionMatrix),[s,A]=i,a=n?A:this.height-A;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,A]=e,a=n?s:this.height-s,y=r&&r*this.distanceScales.unitsPerMeter[2],w=nS([i,a,A],this.pixelUnprojectionMatrix,y),[M,C,k]=this.unprojectPosition(w);return Number.isFinite(A)?[M,C,k]:Number.isFinite(r)?[M,C,r]:[M,C]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=qA(e);return n[1]=Nc(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?e0(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),A=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],A[0]),Math.min(r[1],i[1],s[1],A[1]),Math.max(r[0],i[0],s[0],A[0]),Math.max(r[1],i[1],s[1],A[1])]}getDistanceScales(e){return e?b3({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,pJ(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=HK({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||b3({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:A}=e;let a=XP;if(s&&(a=A?new la(A).transformAsVector(s,[]):s),this.isGeospatial){const y=this.projectPosition([n,r,0]);this.center=new mn(a).scale(this.distanceScales.unitsPerMeter).add(y)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=_J,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:A=75,near:a=.1,far:y=1e3,padding:w=null,focalDistance:M=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new la().multiplyRight(n).translate(new mn(this.center).negate()),this.projectionMatrix=r||xJ({width:this.width,height:this.height,orthographic:i,fovyRadians:s||A*yJ,focalDistance:M,padding:w,near:a,far:y});const C=Op();jh(C,C,this.projectionMatrix),jh(C,C,this.viewMatrix),this.viewProjectionMatrix=C,this.viewMatrixInverse=y3([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=dJ(this.viewMatrixInverse);const k=Op(),U=Op();YT(k,k,[this.width/2,-this.height/2,1]),E_(k,k,[1,-1,0]),jh(U,k,this.viewProjectionMatrix),this.pixelProjectionMatrix=U,this.pixelUnprojectionMatrix=y3(Op(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||yr.warn("Pixel project matrix not invertible")()}}ae(m0,"displayName","Viewport");class sh extends m0{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:A=0,nearZMultiplier:a=.1,farZMultiplier:y=1.01,nearZ:w,farZ:M,orthographic:C=!1,projectionMatrix:k,repeat:U=!1,worldOffset:H=0,position:q,padding:se,legacyMeterSizes:Z=!1}=e;let{width:J,height:re,altitude:de=1.5}=e;const _e=Math.pow(2,i);J=J||1,re=re||1;let fe,Fe=null;if(k)de=k[5]/2,fe=M_(de);else{e.fovy?(fe=e.fovy,de=HB(fe)):fe=M_(de);let qe;if(se){const{top:Ke=0,bottom:Oe=0}=se;qe=[0,Nc((Ke+re-Oe)/2,0,re)-re/2]}Fe=QK({width:J,height:re,scale:_e,center:q&&[0,0,q[2]*uw(n)],offset:qe,pitch:s,fovy:fe,nearZMultiplier:a,farZMultiplier:y}),Number.isFinite(w)&&(Fe.near=w),Number.isFinite(M)&&(Fe.far=M)}let We=WK({height:re,pitch:s,bearing:A,scale:_e,altitude:de});H&&(We=new la().translate([512*H,0,0]).multiplyLeft(We)),super({...e,width:J,height:re,viewMatrix:We,longitude:r,latitude:n,zoom:i,...Fe,fovy:fe,focalDistance:de}),ae(this,"longitude",void 0),ae(this,"latitude",void 0),ae(this,"pitch",void 0),ae(this,"bearing",void 0),ae(this,"altitude",void 0),ae(this,"fovy",void 0),ae(this,"orthographic",void 0),ae(this,"_subViewports",void 0),ae(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=A,this.altitude=de,this.fovy=fe,this.orthographic=C,this._subViewports=U?[]:null,this._pseudoMeters=Z,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new sh({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*uw(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/uw(r);return[n,r,i]}addMetersToLngLat(e,n){return $B(e,n)}panByPosition(e,n){const r=nS(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=g3([],i,pY([],r)),A=g3([],this.center,s),[a,y]=this.unprojectFlat(A);return{longitude:a,latitude:y}}getBounds(e={}){const n=YK(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:A,zoom:a}=qK({width:r,height:i,bounds:e,...n});return new sh({width:r,height:i,longitude:s,latitude:A,zoom:a})}}ae(sh,"displayName","WebMercatorViewport");const KP=[0,0,0];function fw(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof sh){const[i,s,A=0]=t,a=e.getDistanceScales([i,s]);r[2]=A*a.unitsPerMeter[2]}return r}function wJ(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:A}=t;return i===wr.DEFAULT&&(i=e.isGeospatial?wr.LNGLAT:wr.CARTESIAN),s===void 0&&(s=i),A===void 0&&(A=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:A}}function YB(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[A,a,y=0]=t;switch(n&&([A,a,y]=Ed([],[A,a,y,1],n)),r){case wr.LNGLAT:return fw([A,a,y],e,s);case wr.LNGLAT_OFFSETS:return fw([A+i[0],a+i[1],y+(i[2]||0)],e,s);case wr.METER_OFFSETS:return fw($B(i,[A,a,y]),e,s);case wr.CARTESIAN:default:return e.isGeospatial?[A+i[0],a+i[1],y+i[2]]:e.projectPosition([A,a,y])}}function bJ(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:A,fromCoordinateOrigin:a}=wJ(e),{autoOffset:y=!0}=e,{geospatialOrigin:w=KP,shaderCoordinateOrigin:M=KP,offsetMode:C=!1}=y?VB(n,r,i):{},k=YB(t,{viewport:n,modelMatrix:s,coordinateSystem:A,coordinateOrigin:a,offsetMode:C});if(C){const U=n.projectPosition(w||M);wB(k,k,U)}return k}const t0=Math.PI/180,EJ=1e3*60*60*24,TJ=2440588,SJ=2451545,C_=t0*23.4397,MJ=357.5291,CJ=.98560028,PJ=280.147,IJ=360.9856235;function kJ(t,e,n){const r=t0*-n,i=t0*e,s=DJ(t),A=VJ(s),a=FJ(s,r)-A.rightAscension;return{azimuth:zJ(a,i,A.declination),altitude:OJ(a,i,A.declination)}}function JP(t,e,n){const{azimuth:r,altitude:i}=kJ(t,e,n);return[Math.sin(r)*Math.cos(i),Math.cos(r)*Math.cos(i),-Math.sin(i)]}function LJ(t){return(typeof t=="number"?t:t.getTime())/EJ-.5+TJ}function DJ(t){return LJ(t)-SJ}function RJ(t,e){const n=t;return Math.atan2(Math.sin(n)*Math.cos(C_)-Math.tan(e)*Math.sin(C_),Math.cos(n))}function BJ(t,e){const n=t;return Math.asin(Math.sin(e)*Math.cos(C_)+Math.cos(e)*Math.sin(C_)*Math.sin(n))}function zJ(t,e,n){const r=t,i=e,s=n;return Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(i)-Math.tan(s)*Math.cos(i))}function OJ(t,e,n){const r=t,i=e,s=n;return Math.asin(Math.sin(i)*Math.sin(s)+Math.cos(i)*Math.cos(s)*Math.cos(r))}function FJ(t,e){return t0*(PJ+IJ*t)-e}function NJ(t){return t0*(MJ+CJ*t)}function UJ(t){const e=t,n=t0*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e)),r=t0*102.9372;return e+n+r+Math.PI}function VJ(t){const e=NJ(t),n=UJ(e);return{declination:BJ(n,0),rightAscension:RJ(n,0)}}class GJ extends v3{constructor(e){super(e),ae(this,"timestamp",void 0),this.timestamp=e.timestamp}getProjectedLight({layer:e}){const{viewport:n}=e.context;if(n.resolution&&n.resolution>0){const[i,s,A]=JP(this.timestamp,0,0);this.direction=[i,-A,s]}else{const{latitude:i,longitude:s}=n;this.direction=JP(this.timestamp,i,s)}return this}}const eI={blendFunc:[1,0,32771,0],blendEquation:32774};class XB extends JT{constructor(...e){super(...e),ae(this,"pickZ",void 0),ae(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:A,deviceRect:{x:a,y,width:w,height:M},cullRect:C,effects:k,pass:U="picking",pickZ:H,moduleParameters:q}){const se=this.gl;this.pickZ=H;const Z=this._resetColorEncoder(H),J=sA(se,{scissorTest:!0,scissor:[a,y,w,M],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...eI,blend:!H},()=>super.render({target:A,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:C,effects:k?.filter(de=>de.useInPicking),pass:U,isPicking:!0,moduleParameters:q}));return this._colorEncoderState=null,{decodePickingColor:Z&&$J.bind(null,Z),stats:J}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:A}=e.props;return this._colorEncoderState?s&&A.includes("draw")&&(Object.assign(i,eI),i.blend=!0,i.blendColor=jJ(this._colorEncoderState,e,r)):i.blend=!1,A.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function jJ(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,A=r.get(e);return A?(A.viewports.push(n),s=A.a):(s=r.size+1,s<=255?(A={a:s,layer:e,viewports:[n]},r.set(e,A),i[s]=A):(yr.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function $J(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const X0={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},P_=Symbol.for("component"),Kc=Symbol.for("propTypes"),dw=Symbol.for("deprecatedProps"),zf=Symbol.for("asyncPropDefaults"),n0=Symbol.for("asyncPropOriginal"),Uc=Symbol.for("asyncPropResolved");function j2(t,e=()=>!0){return Array.isArray(t)?KB(t,e,[]):e(t)?[t]:[]}function KB(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?KB(i,e,n):e(i)&&n.push(i)}return n}function HJ({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let A=0;for(let a=n;A<i;A++)t[a++]=e[A];for(;A<s;)A<s-A?(t.copyWithin(n+A,n,n+A),A*=2):(t.copyWithin(n+A,n,n+s-A),A=s);return t}function tI(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class nI{constructor(e,n){ae(this,"name",void 0),ae(this,"type",void 0),ae(this,"sampleSize",1),ae(this,"time",void 0),ae(this,"count",void 0),ae(this,"samples",void 0),ae(this,"lastTiming",void 0),ae(this,"lastSampleTime",void 0),ae(this,"lastSampleCount",void 0),ae(this,"_count",0),ae(this,"_time",0),ae(this,"_samples",0),ae(this,"_startTime",0),ae(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=tI(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(tI()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class JB{constructor(e){ae(this,"id",void 0),ae(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof nI?this.stats[n]=e:this.stats[n]=new nI(n,r)),this.stats[n]}}class WJ{constructor(e,n,r){ae(this,"id",void 0),ae(this,"context",void 0),ae(this,"isLoaded",void 0),ae(this,"persistent",void 0),ae(this,"_loadCount",0),ae(this,"_subscribers",new Set),ae(this,"_data",void 0),ae(this,"_loader",void 0),ae(this,"_error",void 0),ae(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=m_(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class QJ{constructor({gl:e,protocol:n}){ae(this,"protocol",void 0),ae(this,"_context",void 0),ae(this,"_resources",void 0),ae(this,"_consumers",void 0),ae(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new WJ(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:A}=this;e.startsWith(A)&&(e=e.replace(A,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,A=s[e]=s[e]||{},a=A[n]||{},y=a.resourceId&&this._resources[a.resourceId];y&&(y.unsubscribe(a),this.prune()),r&&(A[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const qJ=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,y0={name:"project32",dependencies:[eS],vs:qJ},_0={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...NX},ZJ=[eS],YJ=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function XJ(t){const e=pm.getDefaultProgramManager(t);for(const n of ZJ)e.addDefaultModule(n);for(const n of YJ)e.addShaderHook(n);return e}const KJ="layerManager.setLayers",JJ="layerManager.activateViewport";class eee{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){ae(this,"layers",void 0),ae(this,"context",void 0),ae(this,"resourceManager",void 0),ae(this,"_lastRenderedLayers",[]),ae(this,"_needsRedraw",!1),ae(this,"_needsUpdate",!1),ae(this,"_nextLayers",null),ae(this,"_debug",!1),ae(this,"activateViewport",A=>{co(JJ,this,A),A&&(this.context.viewport=A)}),this.layers=[],this.resourceManager=new QJ({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&XJ(e),stats:r||new JB({id:"deck.gl"}),viewport:i||new m0({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new BB,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){co(KJ,this,n,e),this._lastRenderedLayers=e;const r=j2(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const A of e)r[A.id]?yr.warn("Multiple old layers with same id ".concat(A.id))():r[A.id]=A;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const A of i)if(A.hasUniformTransition()){s="Uniform transition in ".concat(A);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&yr.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let A=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),A=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}A&&this._updateSublayersRecursively(A,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=X0.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=X0.MATCHED,n!==e&&(e.lifecycle=X0.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=X0.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=X0.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function eA(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!eA(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!eA(t[s],e[s],n-1))return!1;return!0}return!1}class tee{constructor(e){ae(this,"width",void 0),ae(this,"height",void 0),ae(this,"views",void 0),ae(this,"viewState",void 0),ae(this,"controllers",void 0),ae(this,"timeline",void 0),ae(this,"_viewports",void 0),ae(this,"_viewportMap",void 0),ae(this,"_isUpdating",void 0),ae(this,"_needsRedraw",void 0),ae(this,"_needsUpdate",void 0),ae(this,"_eventManager",void 0),ae(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const A=r[s];if(A.containsPixel(i)){const a=e.slice();return a[0]-=A.x,a[1]-=A.y,A.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=j2(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!eA(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):yr.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var A;return(A=this.getView(e.id))===null||A===void 0?void 0:A.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const A={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,A)),i&&i.setProps(A),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],A=this.getViewState(s),a=s.makeViewport({viewState:A,width:this.width,height:this.height});let y=n[s.id];const w=!!s.controller;w&&!y&&(r=!0),(r||!w)&&y&&(y.finalize(),y=null),this.controllers[s.id]=this._updateController(s,A,a,y),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const nee=/([0-9]+\.?[0-9]*)(%|px)/;function Tc(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=nee.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Sc(t,e){return t.relative?Math.round(t.position*e):t.position}function Ts(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class id{constructor(e){ae(this,"id",void 0),ae(this,"viewportInstance",void 0),ae(this,"_x",void 0),ae(this,"_y",void 0),ae(this,"_width",void 0),ae(this,"_height",void 0),ae(this,"_padding",void 0),ae(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:A="100%",padding:a=null,viewportInstance:y}=e||{};Ts(!y||y instanceof m0),this.viewportInstance=y,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Tc(r),this._y=Tc(i),this._width=Tc(s),this._height=Tc(A),this._padding=a&&{left:Tc(a.left||0),right:Tc(a.right||0),top:Tc(a.top||0),bottom:Tc(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&eA(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Sc(this._x,e),y:Sc(this._y,n),width:Sc(this._width,e),height:Sc(this._height,n)};return this._padding&&(r.padding={left:Sc(this._padding.left,e),top:Sc(this._padding.top,n),right:Sc(this._padding.right,e),bottom:Sc(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}let mm=class{constructor(e){ae(this,"_inProgress",void 0),ae(this,"_handle",void 0),ae(this,"_timeline",void 0),ae(this,"time",void 0),ae(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};const rI=()=>{},E3={BREAK:1,SNAP_TO_END:2,IGNORE:3},ree=t=>t,iee=E3.BREAK;class see{constructor(e){ae(this,"getControllerState",void 0),ae(this,"props",void 0),ae(this,"propsInTransition",void 0),ae(this,"transition",void 0),ae(this,"onViewStateChange",void 0),ae(this,"onStateChange",void 0),ae(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:A,duration:a,easing:y}}=n,w=y(r/a),M=i.interpolateProps(s,A,w);this.propsInTransition=this.getControllerState({...this.props,...M}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new mm(e.timeline),this.onViewStateChange=e.onViewStateChange||rI,this.onStateChange=e.onStateChange||rI}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:A}=this.transition.settings;i={...r,...s===E3.SNAP_TO_END?A:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===E3.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,A=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(A===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const y={duration:A,easing:n.transitionEasing||ree,interpolator:s,interruption:n.transitionInterruption||iee,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(y),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class ez{constructor(e){ae(this,"_propsToCompare",void 0),ae(this,"_propsToExtract",void 0),ae(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!Nu(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Ts(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const oee=["longitude","latitude","zoom","bearing","pitch"],aee=["longitude","latitude","zoom"];class tz extends ez{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:oee,required:aee},super(r.transitionProps),ae(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const A=i(e),a=i(n),y=A.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(y),aroundPosition:y,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=VA(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,VA(e.around,n.around,r)))}return i}}const Mc={transitionDuration:0},lee=300,D1=t=>1-(1-t)*(1-t),Q0={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},wh={};class Aee{constructor(e){ae(this,"props",void 0),ae(this,"state",{}),ae(this,"transitionManager",void 0),ae(this,"eventManager",void 0),ae(this,"onViewStateChange",void 0),ae(this,"onStateChange",void 0),ae(this,"makeViewport",void 0),ae(this,"_controllerState",void 0),ae(this,"_events",{}),ae(this,"_interactionState",{isDragging:!1}),ae(this,"_customEvents",[]),ae(this,"_eventStartBlocked",null),ae(this,"_panMove",!1),ae(this,"invertPan",!1),ae(this,"dragMode","rotate"),ae(this,"inertia",0),ae(this,"scrollZoom",!0),ae(this,"dragPan",!0),ae(this,"dragRotate",!0),ae(this,"doubleClickZoom",!0),ae(this,"touchZoom",!0),ae(this,"touchRotate",!1),ae(this,"keyboard",!0),this.transitionManager=new see({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?lee:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:A=!0,touchZoom:a=!0,touchRotate:y=!1,keyboard:w=!0}=e,M=!!this.onViewStateChange;this.toggleEvents(Q0.WHEEL,M&&r),this.toggleEvents(Q0.PAN,M),this.toggleEvents(Q0.PINCH,M&&(a||y)),this.toggleEvents(Q0.TRIPLE_PAN,M&&y),this.toggleEvents(Q0.DOUBLE_TAP,M&&A),this.toggleEvents(Q0.KEYBOARD,M&&w),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=A,this.touchZoom=a,this.touchRotate=y,this.keyboard=w}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const A=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:A})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,Mc,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Mc,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:D1},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Mc,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:D1},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let A=2/(1+Math.exp(-Math.abs(s*r)));s<0&&A!==0&&(A=1/A);const a=this.controllerState.zoom({pos:n,scale:A});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Mc,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Mc,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:D1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return wh._startPinchRotation=e.rotation,wh._lastPinchEvent=e,this.updateViewport(r,Mc,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:wh._startPinchRotation-r})}return this.updateViewport(n,Mc,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),wh._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=wh;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const A=Math.log2(e.scale),a=(A-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),y=Math.pow(2,A+a*n/2);s=s.zoom({pos:i,scale:y}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:D1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return wh._startPinchRotation=null,wh._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:A}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let y;const w={};switch(e.srcEvent.code){case"Minus":y=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),w.isZooming=!0;break;case"Equal":y=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),w.isZooming=!0;break;case"ArrowLeft":n?(y=a.rotateLeft(s),w.isRotating=!0):(y=a.moveLeft(i),w.isPanning=!0);break;case"ArrowRight":n?(y=a.rotateRight(s),w.isRotating=!0):(y=a.moveRight(i),w.isPanning=!0);break;case"ArrowUp":n?(y=a.rotateUp(A),w.isRotating=!0):(y=a.moveUp(i),w.isPanning=!0);break;case"ArrowDown":n?(y=a.rotateDown(A),w.isRotating=!0):(y=a.moveDown(i),w.isPanning=!0);break;default:return!1}return this.updateViewport(y,this._getTransitionProps(),w),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Mc:e?{...n,transitionInterpolator:new tz({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class uee{constructor(e,n){ae(this,"_viewportProps",void 0),ae(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const iI=5,cee=1.2;class hee extends uee{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:A,bearing:a=0,pitch:y=0,altitude:w=1.5,position:M=[0,0,0],maxZoom:C=20,minZoom:k=0,maxPitch:U=60,minPitch:H=0,startPanLngLat:q,startZoomLngLat:se,startRotatePos:Z,startBearing:J,startPitch:re,startZoom:de,normalize:_e=!0}=e;Ts(Number.isFinite(s)),Ts(Number.isFinite(i)),Ts(Number.isFinite(A)),super({width:n,height:r,latitude:i,longitude:s,zoom:A,bearing:a,pitch:y,altitude:w,maxZoom:C,minZoom:k,maxPitch:U,minPitch:H,normalize:_e,position:M},{startPanLngLat:q,startZoomLngLat:se,startRotatePos:Z,startBearing:J,startPitch:re,startZoom:de}),ae(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:A}=this.getState();if(!i||s===void 0||A===void 0)return this;let a;return e?a=this._getNewRotation(e,i,A,s):a={bearing:s+n,pitch:A+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:A,minZoom:a}=this.getViewportProps();let y=i+Math.log2(r);y=Nc(y,a,A);const w=this.makeViewport({...this.getViewportProps(),zoom:y});return this._getUpdatedState({zoom:y,...w.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Nc(i,r,n);const{maxPitch:s,minPitch:A,pitch:a}=e;e.pitch=Nc(a,A,s);const{normalize:y=!0}=e;return y&&Object.assign(e,XK(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],A=e[1]-n[1],a=e[1],y=n[1],{width:w,height:M}=this.getViewportProps(),C=s/w;let k=0;A>0?Math.abs(M-y)>iI&&(k=A/(y-M)*cee):A<0&&y>iI&&(k=1-a/y),k=Nc(k,-1,1);const{minPitch:U,maxPitch:H}=this.getViewportProps(),q=i+180*C;let se=r;return k>0?se=r+k*(H-r):k<0&&(se=r-k*(U-r)),{pitch:se,bearing:q}}}class fee extends Aee{constructor(...e){super(...e),ae(this,"ControllerState",hee),ae(this,"transition",{transitionDuration:300,transitionInterpolator:new tz({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ae(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class nz extends id{get ViewportType(){return sh}get ControllerType(){return fee}}ae(nz,"displayName","MapView");const dee=new rS;function pee(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class gee{constructor(){ae(this,"effects",void 0),ae(this,"_resolvedEffects",[]),ae(this,"_defaultEffects",[]),ae(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>pee(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(eA(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof rS)||this._resolvedEffects.push(dee),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class mee extends JT{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const yee="deckRenderer.renderLayers";class _ee{constructor(e){ae(this,"gl",void 0),ae(this,"layerFilter",void 0),ae(this,"drawPickingColors",void 0),ae(this,"drawLayersPass",void 0),ae(this,"pickLayersPass",void 0),ae(this,"renderCount",void 0),ae(this,"_needsRedraw",void 0),ae(this,"renderBuffers",void 0),ae(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new mee(e),this.pickLayersPass=new XB(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||hs.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,co(yee,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new hs(this.gl),new hs(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const A=s.postRender(this.gl,i);i.inputBuffer=A,i.swapBuffer=A===r[0]?r[1]:r[0]}}}const vee={pickedColor:null,pickedObjectIndex:-1};function xee({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:A,y:a,width:y,height:w}=s;let M=i*i,C=-1,k=0;for(let U=0;U<w;U++){const H=U+a-r,q=H*H;if(q>M)k+=4*y;else for(let se=0;se<y;se++){if(t[k+3]-1>=0){const J=se+A-n,re=J*J+q;re<=M&&(M=re,C=k)}k+=4}}if(C>=0){const U=t.slice(C,C+4),H=e(U);if(H){const q=Math.floor(C/4/y),se=C/4-q*y;return{...H,pickedColor:U,pickedX:A+se,pickedY:a+q}}yr.error("Picked non-existent layer. Is picking buffer corrupt?")()}return vee}function wee({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),A=s.join(",");if(!n.has(A)){const a=e(s);a?n.set(A,{...a,color:s}):yr.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function rz({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let A=e[0];e.length>1&&(A=Eee(t?.pickedViewports||e,{x:r,y:i}));let a;if(A){const y=[r-A.x,i-A.y];s!==void 0&&(y[2]=s),a=A.unproject(y)}return{color:null,layer:null,viewport:A,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function bee(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:A,pickedObjectIndex:a}=e,y=A?[A]:[];if(r==="hover"){const C=n.index,k=n.layerId,U=A?A.props.id:null;if(U!==k||a!==C){if(U!==k){const H=i.find(q=>q.props.id===k);H&&y.unshift(H)}n.layerId=U,n.index=a,n.info=null}}const w=rz(t),M=new Map;return M.set(null,w),y.forEach(C=>{let k={...w};C===A&&(k.color=s,k.index=a,k.picked=!0),k=iz({layer:C,info:k,mode:r});const U=k.layer;C===A&&r==="hover"&&(n.info=k),M.set(U.id,k),r==="hover"&&U.updateAutoHighlight(k)}),M}function iz({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function Eee(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class Tee{constructor(e){ae(this,"gl",void 0),ae(this,"pickingFBO",void 0),ae(this,"depthFBO",void 0),ae(this,"pickLayersPass",void 0),ae(this,"layerFilter",void 0),ae(this,"lastPickedInfo",void 0),ae(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new XB(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const A=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,y=A?r.find(k=>k.id===A):null,w=a&&i.find(k=>k.id===a)||i[0],M=w&&w.unproject([e-w.x,n-w.y]);return{...s,...{x:e,y:n,viewport:w,coordinate:M,layer:y}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new hs(r),hs.isSupported(r,{colorBufferFloat:!0}))){const i=new hs(r);i.attach({36064:new ua(r,{format:br(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:A=0,depth:a=1,mode:y="query",unproject3D:w,onViewportActive:M,effects:C}){const k=this._getPickable(e),U=Jf(this.gl);if(!k)return{result:[],emptyInfo:rz({viewports:r,x:i,y:s,pixelRatio:U})};this._resizeBuffer();const H=Zx(this.gl,[i,s],!0),q=[H.x+Math.floor(H.width/2),H.y+Math.floor(H.height/2)],se=Math.round(A*U),{width:Z,height:J}=this.pickingFBO,re=this._getPickingRect({deviceX:q[0],deviceY:q[1],deviceRadius:se,deviceWidth:Z,deviceHeight:J}),de={x:i-A,y:s-A,width:A*2+1,height:A*2+1};let _e;const fe=[],Fe=new Set;for(let We=0;We<a;We++){let qe;if(re){const Oe=this._drawAndSample({layers:k,views:n,viewports:r,onViewportActive:M,deviceRect:re,cullRect:de,effects:C,pass:"picking:".concat(y)});qe=xee({...Oe,deviceX:q[0],deviceY:q[1],deviceRadius:se,deviceRect:re})}else qe={pickedColor:null,pickedObjectIndex:-1};let Ke;if(qe.pickedLayer&&w&&this.depthFBO){const{pickedColors:Oe}=this._drawAndSample({layers:[qe.pickedLayer],views:n,viewports:r,onViewportActive:M,deviceRect:{x:qe.pickedX,y:qe.pickedY,width:1,height:1},cullRect:de,effects:C,pass:"picking:".concat(y,":z")},!0);Oe[3]&&(Ke=Oe[0])}qe.pickedLayer&&We+1<a&&(Fe.add(qe.pickedLayer),qe.pickedLayer.disablePickingIndex(qe.pickedObjectIndex)),_e=bee({pickInfo:qe,lastPickedInfo:this.lastPickedInfo,mode:y,layers:k,viewports:r,x:i,y:s,z:Ke,pixelRatio:U});for(const Oe of _e.values())Oe.layer&&fe.push(Oe);if(!qe.pickedColor)break}for(const We of Fe)We.restorePickingColors();return{result:fe,emptyInfo:_e.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:A=1,height:a=1,mode:y="query",maxObjects:w=null,onViewportActive:M,effects:C}){const k=this._getPickable(e);if(!k)return[];this._resizeBuffer();const U=Jf(this.gl),H=Zx(this.gl,[i,s],!0),q=H.x,se=H.y+H.height,Z=Zx(this.gl,[i+A,s+a],!0),J=Z.x+Z.width,re=Z.y,de={x:q,y:re,width:J-q,height:se-re},_e=this._drawAndSample({layers:k,views:n,viewports:r,onViewportActive:M,deviceRect:de,cullRect:{x:i,y:s,width:A,height:a},effects:C,pass:"picking:".concat(y)}),fe=wee(_e),Fe=new Map,We=Number.isFinite(w);for(let qe=0;qe<fe.length&&!(We&&w&&Fe.size>=w);qe++){const Ke=fe[qe];let Oe={color:Ke.pickedColor,layer:null,index:Ke.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:U};Oe=iz({layer:Ke.pickedLayer,info:Oe,mode:y}),Fe.has(Oe.object)||Fe.set(Oe.object,Oe)}return Array.from(Fe.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:A,effects:a,pass:y},w=!1){const M=w?this.depthFBO:this.pickingFBO,C={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:M,deviceRect:s,cullRect:A,effects:a,pass:y,pickZ:w,preRenderStats:{}};for(const J of a)J.useInPicking&&(C.preRenderStats[J.id]=J.preRender(this.gl,C));const{decodePickingColor:k}=this.pickLayersPass.render(C),{x:U,y:H,width:q,height:se}=s,Z=new(w?Float32Array:Uint8Array)(q*se*4);return G2(M,{sourceX:U,sourceY:H,sourceWidth:q,sourceHeight:se,target:Z}),{pickedColors:Z,decodePickingColor:k}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const A=Math.max(0,e-r),a=Math.max(0,n-r),y=Math.min(i,e+r+1)-A,w=Math.min(s,n+r+1)-a;return y<=0||w<=0?null:{x:A,y:a,width:y,height:w}}}const See={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Mee{constructor(e){ae(this,"el",null),ae(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,See),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var sz={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],A=n.createElement("div"),a="function",y=Math.round,w=Math.abs,M=Date.now;function C(me,Se,Ve){return setTimeout(re(me,Ve),Se)}function k(me,Se,Ve){return Array.isArray(me)?(U(me,Ve[Se],Ve),!0):!1}function U(me,Se,Ve){var At;if(me)if(me.forEach)me.forEach(Se,Ve);else if(me.length!==i)for(At=0;At<me.length;)Se.call(Ve,me[At],At,me),At++;else for(At in me)me.hasOwnProperty(At)&&Se.call(Ve,me[At],At,me)}function H(me,Se,Ve){var At="DEPRECATED METHOD: "+Se+`
`+Ve+` AT 
`;return function(){var Ct=new Error("get-stack-trace"),tn=Ct&&Ct.stack?Ct.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Hn=e.console&&(e.console.warn||e.console.log);return Hn&&Hn.call(e.console,At,tn),me.apply(this,arguments)}}var q;typeof Object.assign!="function"?q=function(Se){if(Se===i||Se===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ve=Object(Se),At=1;At<arguments.length;At++){var Ct=arguments[At];if(Ct!==i&&Ct!==null)for(var tn in Ct)Ct.hasOwnProperty(tn)&&(Ve[tn]=Ct[tn])}return Ve}:q=Object.assign;var se=H(function(Se,Ve,At){for(var Ct=Object.keys(Ve),tn=0;tn<Ct.length;)(!At||At&&Se[Ct[tn]]===i)&&(Se[Ct[tn]]=Ve[Ct[tn]]),tn++;return Se},"extend","Use `assign`."),Z=H(function(Se,Ve){return se(Se,Ve,!0)},"merge","Use `assign`.");function J(me,Se,Ve){var At=Se.prototype,Ct;Ct=me.prototype=Object.create(At),Ct.constructor=me,Ct._super=At,Ve&&q(Ct,Ve)}function re(me,Se){return function(){return me.apply(Se,arguments)}}function de(me,Se){return typeof me==a?me.apply(Se&&Se[0]||i,Se):me}function _e(me,Se){return me===i?Se:me}function fe(me,Se,Ve){U(Ke(Se),function(At){me.addEventListener(At,Ve,!1)})}function Fe(me,Se,Ve){U(Ke(Se),function(At){me.removeEventListener(At,Ve,!1)})}function We(me,Se){for(;me;){if(me==Se)return!0;me=me.parentNode}return!1}function qe(me,Se){return me.indexOf(Se)>-1}function Ke(me){return me.trim().split(/\s+/g)}function Oe(me,Se,Ve){if(me.indexOf&&!Ve)return me.indexOf(Se);for(var At=0;At<me.length;){if(Ve&&me[At][Ve]==Se||!Ve&&me[At]===Se)return At;At++}return-1}function tt(me){return Array.prototype.slice.call(me,0)}function Ye(me,Se,Ve){for(var At=[],Ct=[],tn=0;tn<me.length;){var Hn=Se?me[tn][Se]:me[tn];Oe(Ct,Hn)<0&&At.push(me[tn]),Ct[tn]=Hn,tn++}return Ve&&(Se?At=At.sort(function(An,jr){return An[Se]>jr[Se]}):At=At.sort()),At}function pt(me,Se){for(var Ve,At,Ct=Se[0].toUpperCase()+Se.slice(1),tn=0;tn<s.length;){if(Ve=s[tn],At=Ve?Ve+Ct:Se,At in me)return At;tn++}return i}var en=1;function Mt(){return en++}function Qt(me){var Se=me.ownerDocument||me;return Se.defaultView||Se.parentWindow||e}var xt=/mobile|tablet|ip(ad|hone|od)|android/i,Tt="ontouchstart"in e,Xt=pt(e,"PointerEvent")!==i,Mn=Tt&&xt.test(navigator.userAgent),Cn="touch",vr="pen",Gn="mouse",Jn="kinect",ir=25,jn=1,Lr=2,St=4,ln=8,yn=1,bt=2,sr=4,er=8,lr=16,gr=bt|sr,Ar=er|lr,Zr=gr|Ar,Zn=["x","y"],Ei=["clientX","clientY"];function $n(me,Se){var Ve=this;this.manager=me,this.callback=Se,this.element=me.element,this.target=me.options.inputTarget,this.domHandler=function(At){de(me.options.enable,[me])&&Ve.handler(At)},this.init()}$n.prototype={handler:function(){},init:function(){this.evEl&&fe(this.element,this.evEl,this.domHandler),this.evTarget&&fe(this.target,this.evTarget,this.domHandler),this.evWin&&fe(Qt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Fe(this.element,this.evEl,this.domHandler),this.evTarget&&Fe(this.target,this.evTarget,this.domHandler),this.evWin&&Fe(Qt(this.element),this.evWin,this.domHandler)}};function Ti(me){var Se,Ve=me.options.inputClass;return Ve?Se=Ve:Xt?Se=ye:Mn?Se=an:Tt?Se=K:Se=Rn,new Se(me,rs)}function rs(me,Se,Ve){var At=Ve.pointers.length,Ct=Ve.changedPointers.length,tn=Se&jn&&At-Ct===0,Hn=Se&(St|ln)&&At-Ct===0;Ve.isFirst=!!tn,Ve.isFinal=!!Hn,tn&&(me.session={}),Ve.eventType=Se,Er(me,Ve),me.emit("hammer.input",Ve),me.recognize(Ve),me.session.prevInput=Ve}function Er(me,Se){var Ve=me.session,At=Se.pointers,Ct=At.length;Ve.firstInput||(Ve.firstInput=Si(Se)),Ct>1&&!Ve.firstMultiple?Ve.firstMultiple=Si(Se):Ct===1&&(Ve.firstMultiple=!1);var tn=Ve.firstInput,Hn=Ve.firstMultiple,Gr=Hn?Hn.center:tn.center,An=Se.center=ht(At);Se.timeStamp=M(),Se.deltaTime=Se.timeStamp-tn.timeStamp,Se.angle=Vn(Gr,An),Se.distance=Ai(Gr,An),Yr(Ve,Se),Se.offsetDirection=is(Se.deltaX,Se.deltaY);var jr=kt(Se.deltaTime,Se.deltaX,Se.deltaY);Se.overallVelocityX=jr.x,Se.overallVelocityY=jr.y,Se.overallVelocity=w(jr.x)>w(jr.y)?jr.x:jr.y,Se.scale=Hn?mi(Hn.pointers,At):1,Se.rotation=Hn?Bi(Hn.pointers,At):0,Se.maxPointers=Ve.prevInput?Se.pointers.length>Ve.prevInput.maxPointers?Se.pointers.length:Ve.prevInput.maxPointers:Se.pointers.length,Ps(Ve,Se);var tr=me.element;We(Se.srcEvent.target,tr)&&(tr=Se.srcEvent.target),Se.target=tr}function Yr(me,Se){var Ve=Se.center,At=me.offsetDelta||{},Ct=me.prevDelta||{},tn=me.prevInput||{};(Se.eventType===jn||tn.eventType===St)&&(Ct=me.prevDelta={x:tn.deltaX||0,y:tn.deltaY||0},At=me.offsetDelta={x:Ve.x,y:Ve.y}),Se.deltaX=Ct.x+(Ve.x-At.x),Se.deltaY=Ct.y+(Ve.y-At.y)}function Ps(me,Se){var Ve=me.lastInterval||Se,At=Se.timeStamp-Ve.timeStamp,Ct,tn,Hn,Gr;if(Se.eventType!=ln&&(At>ir||Ve.velocity===i)){var An=Se.deltaX-Ve.deltaX,jr=Se.deltaY-Ve.deltaY,tr=kt(At,An,jr);tn=tr.x,Hn=tr.y,Ct=w(tr.x)>w(tr.y)?tr.x:tr.y,Gr=is(An,jr),me.lastInterval=Se}else Ct=Ve.velocity,tn=Ve.velocityX,Hn=Ve.velocityY,Gr=Ve.direction;Se.velocity=Ct,Se.velocityX=tn,Se.velocityY=Hn,Se.direction=Gr}function Si(me){for(var Se=[],Ve=0;Ve<me.pointers.length;)Se[Ve]={clientX:y(me.pointers[Ve].clientX),clientY:y(me.pointers[Ve].clientY)},Ve++;return{timeStamp:M(),pointers:Se,center:ht(Se),deltaX:me.deltaX,deltaY:me.deltaY}}function ht(me){var Se=me.length;if(Se===1)return{x:y(me[0].clientX),y:y(me[0].clientY)};for(var Ve=0,At=0,Ct=0;Ct<Se;)Ve+=me[Ct].clientX,At+=me[Ct].clientY,Ct++;return{x:y(Ve/Se),y:y(At/Se)}}function kt(me,Se,Ve){return{x:Se/me||0,y:Ve/me||0}}function is(me,Se){return me===Se?yn:w(me)>=w(Se)?me<0?bt:sr:Se<0?er:lr}function Ai(me,Se,Ve){Ve||(Ve=Zn);var At=Se[Ve[0]]-me[Ve[0]],Ct=Se[Ve[1]]-me[Ve[1]];return Math.sqrt(At*At+Ct*Ct)}function Vn(me,Se,Ve){Ve||(Ve=Zn);var At=Se[Ve[0]]-me[Ve[0]],Ct=Se[Ve[1]]-me[Ve[1]];return Math.atan2(Ct,At)*180/Math.PI}function Bi(me,Se){return Vn(Se[1],Se[0],Ei)+Vn(me[1],me[0],Ei)}function mi(me,Se){return Ai(Se[0],Se[1],Ei)/Ai(me[0],me[1],Ei)}var ti={mousedown:jn,mousemove:Lr,mouseup:St},$i="mousedown",Bt="mousemove mouseup";function Rn(){this.evEl=$i,this.evWin=Bt,this.pressed=!1,$n.apply(this,arguments)}J(Rn,$n,{handler:function(Se){var Ve=ti[Se.type];Ve&jn&&Se.button===0&&(this.pressed=!0),Ve&Lr&&Se.which!==1&&(Ve=St),this.pressed&&(Ve&St&&(this.pressed=!1),this.callback(this.manager,Ve,{pointers:[Se],changedPointers:[Se],pointerType:Gn,srcEvent:Se}))}});var In={pointerdown:jn,pointermove:Lr,pointerup:St,pointercancel:ln,pointerout:ln},Ur={2:Cn,3:vr,4:Gn,5:Jn},Xi="pointerdown",Pn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Xi="MSPointerDown",Pn="MSPointerMove MSPointerUp MSPointerCancel");function ye(){this.evEl=Xi,this.evWin=Pn,$n.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}J(ye,$n,{handler:function(Se){var Ve=this.store,At=!1,Ct=Se.type.toLowerCase().replace("ms",""),tn=In[Ct],Hn=Ur[Se.pointerType]||Se.pointerType,Gr=Hn==Cn,An=Oe(Ve,Se.pointerId,"pointerId");tn&jn&&(Se.button===0||Gr)?An<0&&(Ve.push(Se),An=Ve.length-1):tn&(St|ln)&&(At=!0),!(An<0)&&(Ve[An]=Se,this.callback(this.manager,tn,{pointers:Ve,changedPointers:[Se],pointerType:Hn,srcEvent:Se}),At&&Ve.splice(An,1))}});var ot={touchstart:jn,touchmove:Lr,touchend:St,touchcancel:ln},gt="touchstart",Lt="touchstart touchmove touchend touchcancel";function qt(){this.evTarget=gt,this.evWin=Lt,this.started=!1,$n.apply(this,arguments)}J(qt,$n,{handler:function(Se){var Ve=ot[Se.type];if(Ve===jn&&(this.started=!0),!!this.started){var At=Kt.call(this,Se,Ve);Ve&(St|ln)&&At[0].length-At[1].length===0&&(this.started=!1),this.callback(this.manager,Ve,{pointers:At[0],changedPointers:At[1],pointerType:Cn,srcEvent:Se})}}});function Kt(me,Se){var Ve=tt(me.touches),At=tt(me.changedTouches);return Se&(St|ln)&&(Ve=Ye(Ve.concat(At),"identifier",!0)),[Ve,At]}var En={touchstart:jn,touchmove:Lr,touchend:St,touchcancel:ln},hn="touchstart touchmove touchend touchcancel";function an(){this.evTarget=hn,this.targetIds={},$n.apply(this,arguments)}J(an,$n,{handler:function(Se){var Ve=En[Se.type],At=Dn.call(this,Se,Ve);At&&this.callback(this.manager,Ve,{pointers:At[0],changedPointers:At[1],pointerType:Cn,srcEvent:Se})}});function Dn(me,Se){var Ve=tt(me.touches),At=this.targetIds;if(Se&(jn|Lr)&&Ve.length===1)return At[Ve[0].identifier]=!0,[Ve,Ve];var Ct,tn,Hn=tt(me.changedTouches),Gr=[],An=this.target;if(tn=Ve.filter(function(jr){return We(jr.target,An)}),Se===jn)for(Ct=0;Ct<tn.length;)At[tn[Ct].identifier]=!0,Ct++;for(Ct=0;Ct<Hn.length;)At[Hn[Ct].identifier]&&Gr.push(Hn[Ct]),Se&(St|ln)&&delete At[Hn[Ct].identifier],Ct++;if(Gr.length)return[Ye(tn.concat(Gr),"identifier",!0),Gr]}var xr=2500,fn=25;function K(){$n.apply(this,arguments);var me=re(this.handler,this);this.touch=new an(this.manager,me),this.mouse=new Rn(this.manager,me),this.primaryTouch=null,this.lastTouches=[]}J(K,$n,{handler:function(Se,Ve,At){var Ct=At.pointerType==Cn,tn=At.pointerType==Gn;if(!(tn&&At.sourceCapabilities&&At.sourceCapabilities.firesTouchEvents)){if(Ct)W.call(this,Ve,At);else if(tn&&ce.call(this,At))return;this.callback(Se,Ve,At)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function W(me,Se){me&jn?(this.primaryTouch=Se.changedPointers[0].identifier,ee.call(this,Se)):me&(St|ln)&&ee.call(this,Se)}function ee(me){var Se=me.changedPointers[0];if(Se.identifier===this.primaryTouch){var Ve={x:Se.clientX,y:Se.clientY};this.lastTouches.push(Ve);var At=this.lastTouches,Ct=function(){var tn=At.indexOf(Ve);tn>-1&&At.splice(tn,1)};setTimeout(Ct,xr)}}function ce(me){for(var Se=me.srcEvent.clientX,Ve=me.srcEvent.clientY,At=0;At<this.lastTouches.length;At++){var Ct=this.lastTouches[At],tn=Math.abs(Se-Ct.x),Hn=Math.abs(Ve-Ct.y);if(tn<=fn&&Hn<=fn)return!0}return!1}var o=pt(A.style,"touchAction"),G=o!==i,De="compute",ke="auto",Pe="manipulation",Le="none",Ze="pan-x",lt="pan-y",Qe=wt();function ft(me,Se){this.manager=me,this.set(Se)}ft.prototype={set:function(me){me==De&&(me=this.compute()),G&&this.manager.element.style&&Qe[me]&&(this.manager.element.style[o]=me),this.actions=me.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var me=[];return U(this.manager.recognizers,function(Se){de(Se.options.enable,[Se])&&(me=me.concat(Se.getTouchAction()))}),vt(me.join(" "))},preventDefaults:function(me){var Se=me.srcEvent,Ve=me.offsetDirection;if(this.manager.session.prevented){Se.preventDefault();return}var At=this.actions,Ct=qe(At,Le)&&!Qe[Le],tn=qe(At,lt)&&!Qe[lt],Hn=qe(At,Ze)&&!Qe[Ze];if(Ct){var Gr=me.pointers.length===1,An=me.distance<2,jr=me.deltaTime<250;if(Gr&&An&&jr)return}if(!(Hn&&tn)&&(Ct||tn&&Ve&gr||Hn&&Ve&Ar))return this.preventSrc(Se)},preventSrc:function(me){this.manager.session.prevented=!0,me.preventDefault()}};function vt(me){if(qe(me,Le))return Le;var Se=qe(me,Ze),Ve=qe(me,lt);return Se&&Ve?Le:Se||Ve?Se?Ze:lt:qe(me,Pe)?Pe:ke}function wt(){if(!G)return!1;var me={},Se=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ve){me[Ve]=Se?e.CSS.supports("touch-action",Ve):!0}),me}var Jt=1,Ut=2,xn=4,nn=8,pn=nn,Bn=16,Vt=32;function Ue(me){this.options=q({},this.defaults,me||{}),this.id=Mt(),this.manager=null,this.options.enable=_e(this.options.enable,!0),this.state=Jt,this.simultaneous={},this.requireFail=[]}Ue.prototype={defaults:{},set:function(me){return q(this.options,me),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(me){if(k(me,"recognizeWith",this))return this;var Se=this.simultaneous;return me=_n(me,this),Se[me.id]||(Se[me.id]=me,me.recognizeWith(this)),this},dropRecognizeWith:function(me){return k(me,"dropRecognizeWith",this)?this:(me=_n(me,this),delete this.simultaneous[me.id],this)},requireFailure:function(me){if(k(me,"requireFailure",this))return this;var Se=this.requireFail;return me=_n(me,this),Oe(Se,me)===-1&&(Se.push(me),me.requireFailure(this)),this},dropRequireFailure:function(me){if(k(me,"dropRequireFailure",this))return this;me=_n(me,this);var Se=Oe(this.requireFail,me);return Se>-1&&this.requireFail.splice(Se,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(me){return!!this.simultaneous[me.id]},emit:function(me){var Se=this,Ve=this.state;function At(Ct){Se.manager.emit(Ct,me)}Ve<nn&&At(Se.options.event+Dt(Ve)),At(Se.options.event),me.additionalEvent&&At(me.additionalEvent),Ve>=nn&&At(Se.options.event+Dt(Ve))},tryEmit:function(me){if(this.canEmit())return this.emit(me);this.state=Vt},canEmit:function(){for(var me=0;me<this.requireFail.length;){if(!(this.requireFail[me].state&(Vt|Jt)))return!1;me++}return!0},recognize:function(me){var Se=q({},me);if(!de(this.options.enable,[this,Se])){this.reset(),this.state=Vt;return}this.state&(pn|Bn|Vt)&&(this.state=Jt),this.state=this.process(Se),this.state&(Ut|xn|nn|Bn)&&this.tryEmit(Se)},process:function(me){},getTouchAction:function(){},reset:function(){}};function Dt(me){return me&Bn?"cancel":me&nn?"end":me&xn?"move":me&Ut?"start":""}function Ce(me){return me==lr?"down":me==er?"up":me==bt?"left":me==sr?"right":""}function _n(me,Se){var Ve=Se.manager;return Ve?Ve.get(me):me}function yi(){Ue.apply(this,arguments)}J(yi,Ue,{defaults:{pointers:1},attrTest:function(me){var Se=this.options.pointers;return Se===0||me.pointers.length===Se},process:function(me){var Se=this.state,Ve=me.eventType,At=Se&(Ut|xn),Ct=this.attrTest(me);return At&&(Ve&ln||!Ct)?Se|Bn:At||Ct?Ve&St?Se|nn:Se&Ut?Se|xn:Ut:Vt}});function dr(){yi.apply(this,arguments),this.pX=null,this.pY=null}J(dr,yi,{defaults:{event:"pan",threshold:10,pointers:1,direction:Zr},getTouchAction:function(){var me=this.options.direction,Se=[];return me&gr&&Se.push(lt),me&Ar&&Se.push(Ze),Se},directionTest:function(me){var Se=this.options,Ve=!0,At=me.distance,Ct=me.direction,tn=me.deltaX,Hn=me.deltaY;return Ct&Se.direction||(Se.direction&gr?(Ct=tn===0?yn:tn<0?bt:sr,Ve=tn!=this.pX,At=Math.abs(me.deltaX)):(Ct=Hn===0?yn:Hn<0?er:lr,Ve=Hn!=this.pY,At=Math.abs(me.deltaY))),me.direction=Ct,Ve&&At>Se.threshold&&Ct&Se.direction},attrTest:function(me){return yi.prototype.attrTest.call(this,me)&&(this.state&Ut||!(this.state&Ut)&&this.directionTest(me))},emit:function(me){this.pX=me.deltaX,this.pY=me.deltaY;var Se=Ce(me.direction);Se&&(me.additionalEvent=this.options.event+Se),this._super.emit.call(this,me)}});function ha(){yi.apply(this,arguments)}J(ha,yi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(me){return this._super.attrTest.call(this,me)&&(Math.abs(me.scale-1)>this.options.threshold||this.state&Ut)},emit:function(me){if(me.scale!==1){var Se=me.scale<1?"in":"out";me.additionalEvent=this.options.event+Se}this._super.emit.call(this,me)}});function Re(){Ue.apply(this,arguments),this._timer=null,this._input=null}J(Re,Ue,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ke]},process:function(me){var Se=this.options,Ve=me.pointers.length===Se.pointers,At=me.distance<Se.threshold,Ct=me.deltaTime>Se.time;if(this._input=me,!At||!Ve||me.eventType&(St|ln)&&!Ct)this.reset();else if(me.eventType&jn)this.reset(),this._timer=C(function(){this.state=pn,this.tryEmit()},Se.time,this);else if(me.eventType&St)return pn;return Vt},reset:function(){clearTimeout(this._timer)},emit:function(me){this.state===pn&&(me&&me.eventType&St?this.manager.emit(this.options.event+"up",me):(this._input.timeStamp=M(),this.manager.emit(this.options.event,this._input)))}});function ja(){yi.apply(this,arguments)}J(ja,yi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(me){return this._super.attrTest.call(this,me)&&(Math.abs(me.rotation)>this.options.threshold||this.state&Ut)}});function Ee(){yi.apply(this,arguments)}J(Ee,yi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:gr|Ar,pointers:1},getTouchAction:function(){return dr.prototype.getTouchAction.call(this)},attrTest:function(me){var Se=this.options.direction,Ve;return Se&(gr|Ar)?Ve=me.overallVelocity:Se&gr?Ve=me.overallVelocityX:Se&Ar&&(Ve=me.overallVelocityY),this._super.attrTest.call(this,me)&&Se&me.offsetDirection&&me.distance>this.options.threshold&&me.maxPointers==this.options.pointers&&w(Ve)>this.options.velocity&&me.eventType&St},emit:function(me){var Se=Ce(me.offsetDirection);Se&&this.manager.emit(this.options.event+Se,me),this.manager.emit(this.options.event,me)}});function jo(){Ue.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}J(jo,Ue,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pe]},process:function(me){var Se=this.options,Ve=me.pointers.length===Se.pointers,At=me.distance<Se.threshold,Ct=me.deltaTime<Se.time;if(this.reset(),me.eventType&jn&&this.count===0)return this.failTimeout();if(At&&Ct&&Ve){if(me.eventType!=St)return this.failTimeout();var tn=this.pTime?me.timeStamp-this.pTime<Se.interval:!0,Hn=!this.pCenter||Ai(this.pCenter,me.center)<Se.posThreshold;this.pTime=me.timeStamp,this.pCenter=me.center,!Hn||!tn?this.count=1:this.count+=1,this._input=me;var Gr=this.count%Se.taps;if(Gr===0)return this.hasRequireFailures()?(this._timer=C(function(){this.state=pn,this.tryEmit()},Se.interval,this),Ut):pn}return Vt},failTimeout:function(){return this._timer=C(function(){this.state=Vt},this.options.interval,this),Vt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==pn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Is(me,Se){return Se=Se||{},Se.recognizers=_e(Se.recognizers,Is.defaults.preset),new fa(me,Se)}Is.VERSION="2.0.7",Is.defaults={domEvents:!1,touchAction:De,enable:!0,inputTarget:null,inputClass:null,preset:[[ja,{enable:!1}],[ha,{enable:!1},["rotate"]],[Ee,{direction:gr}],[dr,{direction:gr},["swipe"]],[jo],[jo,{event:"doubletap",taps:2},["tap"]],[Re]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var $a=1,Ha=2;function fa(me,Se){this.options=q({},Is.defaults,Se||{}),this.options.inputTarget=this.options.inputTarget||me,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=me,this.input=Ti(this),this.touchAction=new ft(this,this.options.touchAction),wl(this,!0),U(this.options.recognizers,function(Ve){var At=this.add(new Ve[0](Ve[1]));Ve[2]&&At.recognizeWith(Ve[2]),Ve[3]&&At.requireFailure(Ve[3])},this)}fa.prototype={set:function(me){return q(this.options,me),me.touchAction&&this.touchAction.update(),me.inputTarget&&(this.input.destroy(),this.input.target=me.inputTarget,this.input.init()),this},stop:function(me){this.session.stopped=me?Ha:$a},recognize:function(me){var Se=this.session;if(!Se.stopped){this.touchAction.preventDefaults(me);var Ve,At=this.recognizers,Ct=Se.curRecognizer;(!Ct||Ct&&Ct.state&pn)&&(Ct=Se.curRecognizer=null);for(var tn=0;tn<At.length;)Ve=At[tn],Se.stopped!==Ha&&(!Ct||Ve==Ct||Ve.canRecognizeWith(Ct))?Ve.recognize(me):Ve.reset(),!Ct&&Ve.state&(Ut|xn|nn)&&(Ct=Se.curRecognizer=Ve),tn++}},get:function(me){if(me instanceof Ue)return me;for(var Se=this.recognizers,Ve=0;Ve<Se.length;Ve++)if(Se[Ve].options.event==me)return Se[Ve];return null},add:function(me){if(k(me,"add",this))return this;var Se=this.get(me.options.event);return Se&&this.remove(Se),this.recognizers.push(me),me.manager=this,this.touchAction.update(),me},remove:function(me){if(k(me,"remove",this))return this;if(me=this.get(me),me){var Se=this.recognizers,Ve=Oe(Se,me);Ve!==-1&&(Se.splice(Ve,1),this.touchAction.update())}return this},on:function(me,Se){if(me!==i&&Se!==i){var Ve=this.handlers;return U(Ke(me),function(At){Ve[At]=Ve[At]||[],Ve[At].push(Se)}),this}},off:function(me,Se){if(me!==i){var Ve=this.handlers;return U(Ke(me),function(At){Se?Ve[At]&&Ve[At].splice(Oe(Ve[At],Se),1):delete Ve[At]}),this}},emit:function(me,Se){this.options.domEvents&&da(me,Se);var Ve=this.handlers[me]&&this.handlers[me].slice();if(!(!Ve||!Ve.length)){Se.type=me,Se.preventDefault=function(){Se.srcEvent.preventDefault()};for(var At=0;At<Ve.length;)Ve[At](Se),At++}},destroy:function(){this.element&&wl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function wl(me,Se){var Ve=me.element;if(Ve.style){var At;U(me.options.cssProps,function(Ct,tn){At=pt(Ve.style,tn),Se?(me.oldCssProps[At]=Ve.style[At],Ve.style[At]=Ct):Ve.style[At]=me.oldCssProps[At]||""}),Se||(me.oldCssProps={})}}function da(me,Se){var Ve=n.createEvent("Event");Ve.initEvent(me,!0,!0),Ve.gesture=Se,Se.target.dispatchEvent(Ve)}q(Is,{INPUT_START:jn,INPUT_MOVE:Lr,INPUT_END:St,INPUT_CANCEL:ln,STATE_POSSIBLE:Jt,STATE_BEGAN:Ut,STATE_CHANGED:xn,STATE_ENDED:nn,STATE_RECOGNIZED:pn,STATE_CANCELLED:Bn,STATE_FAILED:Vt,DIRECTION_NONE:yn,DIRECTION_LEFT:bt,DIRECTION_RIGHT:sr,DIRECTION_UP:er,DIRECTION_DOWN:lr,DIRECTION_HORIZONTAL:gr,DIRECTION_VERTICAL:Ar,DIRECTION_ALL:Zr,Manager:fa,Input:$n,TouchAction:ft,TouchInput:an,MouseInput:Rn,PointerEventInput:ye,TouchMouseInput:K,SingleTouchInput:qt,Recognizer:Ue,AttrRecognizer:yi,Tap:jo,Pan:dr,Swipe:Ee,Pinch:ha,Rotate:ja,Press:Re,on:fe,off:Fe,each:U,merge:Z,extend:se,assign:q,inherit:J,bindFn:re,prefixed:pt});var ui=typeof e<"u"?e:typeof self<"u"?self:{};ui.Hammer=Is,typeof i=="function"&&i.amd?i(function(){return Is}):t.exports?t.exports=Is:e[r]=Is})(window,document,"Hammer")})(sz);var ym=sz.exports;const Cee=tm(ym),CA=LE({__proto__:null,default:Cee},[ym]),oz=1,az=2,T3=4,Pee={mousedown:oz,mousemove:az,mouseup:T3};function Iee(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function kee(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(Iee(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function Lee(t){t.prototype.handler=function(n){let r=Pee[n.type];r&oz&&n.button>=0&&(this.pressed=!0),r&az&&n.which===0&&(r=T3),this.pressed&&(r&T3&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}kee(ym.PointerEventInput);Lee(ym.MouseInput);const Dee=ym.Manager;class $2{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const Ree=CA?[[CA.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[CA.Rotate,{enable:!1}],[CA.Pinch,{enable:!1}],[CA.Swipe,{enable:!1}],[CA.Pan,{threshold:0,enable:!1}],[CA.Press,{enable:!1}],[CA.Tap,{event:"doubletap",taps:2,enable:!1}],[CA.Tap,{event:"anytap",enable:!1}],[CA.Tap,{enable:!1}]]:null,sI={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Bee={doubletap:["tap"]},zee={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},iS={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Oee={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},oI={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Fee=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",df=typeof window<"u"?window:global;let S3=!1;try{const t={get passive(){return S3=!0,!0}};df.addEventListener("test",null,t),df.removeEventListener("test",null)}catch{S3=!1}const Nee=Fee.indexOf("firefox")!==-1,{WHEEL_EVENTS:Uee}=iS,aI="wheel",lI=4.000244140625,Vee=40,Gee=.25;class jee extends $2{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;df.WheelEvent&&(Nee&&i.deltaMode===df.WheelEvent.DOM_DELTA_PIXEL&&(s/=df.devicePixelRatio),i.deltaMode===df.WheelEvent.DOM_DELTA_LINE&&(s*=Vee)),s!==0&&s%lI===0&&(s=Math.floor(s/lI)),i.shiftKey&&s&&(s=s*Gee),this.callback({type:aI,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(Uee),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,S3?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===aI&&(this.options.enable=n)}}const{MOUSE_EVENTS:$ee}=iS,AI="pointermove",uI="pointerover",cI="pointerout",hI="pointerenter",fI="pointerleave";class Hee extends $2{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat($ee),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===AI&&(this.enableMoveEvent=n),e===uI&&(this.enableOverEvent=n),e===cI&&(this.enableOutEvent=n),e===hI&&(this.enableEnterEvent=n),e===fI&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(uI,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(cI,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(hI,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(fI,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(AI,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Wee}=iS,dI="keydown",pI="keyup";class Qee extends $2{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:dI,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:pI,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Wee),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===dI&&(this.enableDownEvent=n),e===pI&&(this.enableUpEvent=n)}}const gI="contextmenu";class qee extends $2{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:gI,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===gI&&(this.options.enable=n)}}const M3=1,I_=2,C3=4,Zee={pointerdown:M3,pointermove:I_,pointerup:C3,mousedown:M3,mousemove:I_,mouseup:C3},Yee=1,Xee=2,Kee=3,Jee=0,ete=1,tte=2,nte=1,rte=2,ite=4;function ste(t){const e=Zee[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,A=!1,a=!1;return e===C3||e===I_&&!Number.isFinite(n)?(s=i===Yee,A=i===Xee,a=i===Kee):e===I_?(s=!!(n&nte),A=!!(n&ite),a=!!(n&rte)):e===M3&&(s=r===Jee,A=r===ete,a=r===tte),{leftButton:s,middleButton:A,rightButton:a}}function ote(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,A={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:A}}const pw={srcElement:"root",priority:0};class ate{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:A,handlersByElement:a}=this;let y=pw;typeof r=="string"||r&&r.addEventListener?y={...pw,srcElement:r}:r&&(y={...pw,...r});let w=a.get(y.srcElement);w||(w=[],a.set(y.srcElement,w));const M={type:e,handler:n,srcElement:y.srcElement,priority:y.priority};i&&(M.once=!0),s&&(M.passive=!0),A.push(M),this._active=this._active||!M.passive;let C=w.length-1;for(;C>=0&&!(w[C].priority>=M.priority);)C--;w.splice(C+1,0,M)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const A=r[s];if(A.type===e&&A.handler===n){r.splice(s,1);const a=i.get(A.srcElement);a.splice(a.indexOf(A),1),a.length===0&&i.delete(A.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},A=()=>{e.handled=!0,i=!0},a=[];for(let y=0;y<r.length;y++){const{type:w,handler:M,once:C}=r[y];if(M({...e,type:w,stopPropagation:s,stopImmediatePropagation:A}),C&&a.push(r[y]),i)break}for(let y=0;y<a.length;y++){const{type:w,handler:M}=a[y];this.remove(w,M)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...ste(e),...ote(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const lte={events:null,recognizers:null,recognizerOptions:{},Manager:Dee,touchAction:"none",tabIndex:0};class Ate{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,A=zee[s.type];A&&this.manager.emit(A,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...lte,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||Ree}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(sI).forEach(i=>{const s=this.manager.get(i);s&&sI[i].forEach(A=>{s.recognizeWith(A)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const A=n.recognizerOptions[i];delete A.enable,s.set(A)}}this.wheelInput=new jee(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Hee(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Qee(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new qee(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=Bee[e];s&&!this.options.recognizers&&s.forEach(A=>{const a=r.get(A);n?(a.requireFailure(e),i.dropRequireFailure(A)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const M in e)this._addEventHandler(M,e[M],r,i,s);return}const{manager:A,events:a}=this,y=oI[e]||e;let w=a.get(y);w||(w=new ate(this),a.set(y,w),w.recognizerName=Oee[y]||y,A&&A.on(y,w.handleEvent)),w.add(e,n,r,i,s),w.isEmpty()||this._toggleRecognizer(w.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const A in e)this._removeEventHandler(A,e[A]);return}const{events:r}=this,i=oI[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:A}=s;let a=!1;for(const y of r.values())if(y.recognizerName===A&&!y.isEmpty()){a=!0;break}a||this._toggleRecognizer(A,!1)}}}function bh(){}const ute=({isDragging:t})=>t?"grabbing":"grab",lz={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:bh,onResize:bh,onViewStateChange:bh,onInteractionStateChange:bh,onBeforeRender:bh,onAfterRender:bh,onLoad:bh,onError:t=>yr.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:ute,getTooltip:null,debug:!1,drawPickingColors:!1};class H2{constructor(e){ae(this,"props",void 0),ae(this,"width",0),ae(this,"height",0),ae(this,"userData",{}),ae(this,"canvas",null),ae(this,"viewManager",null),ae(this,"layerManager",null),ae(this,"effectManager",null),ae(this,"deckRenderer",null),ae(this,"deckPicker",null),ae(this,"eventManager",null),ae(this,"tooltip",null),ae(this,"metrics",void 0),ae(this,"animationLoop",void 0),ae(this,"stats",void 0),ae(this,"viewState",void 0),ae(this,"cursorState",void 0),ae(this,"_needsRedraw",void 0),ae(this,"_pickRequest",void 0),ae(this,"_lastPointerDownInfo",null),ae(this,"_metricsCounter",void 0),ae(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),ae(this,"_onEvent",n=>{const r=GC[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),A=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=A,y=a&&(a[r.handler]||a.props[r.handler]),w=this.props[r.handler];let M=!1;y&&(M=y.call(a,A,n)),!M&&w&&w(A,n)}),ae(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...lz,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&yr.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),VH()==="IE"&&yr.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new JB({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&rd.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,A,a,y;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(A=this.deckPicker)===null||A===void 0||A.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(y=this.tooltip)===null||y===void 0||y.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var w;(w=this.canvas.parentElement)===null||w===void 0||w.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&yr.removed("onLayerHover","onHover")(),"onLayerClick"in e&&yr.removed("onLayerClick","onClick")(),e.initialViewState&&!eA(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),A=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||A,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Ts(this.viewManager),this.viewManager.views}getViewports(e){return Ts(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){Ts(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Ts(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var A,a;this.width=i,this.height=s,(A=this.viewManager)===null||A===void 0||A.setProps({width:i,height:s}),(a=this.layerManager)===null||a===void 0||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:A,onError:a,onBeforeRender:y,onAfterRender:w,useDevicePixels:M}=e;return new fZ({width:n,height:r,useDevicePixels:M,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:C=>GR({...s,...C,canvas:this.canvas,debug:A,onContextLost:()=>this._onContextLost()}),onInitialize:C=>this._setGLContext(C.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:y,onAfterRender:w,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new nz({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,A=!1;for(const a of r){var n;s=a,A=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||A}if(!A&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,UT(e,{enable:!0,copyState:!0})),this.tooltip=new Mee(this.canvas),Qu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new BB;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Ate(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in GC)this.eventManager.on(i,this._onEvent);this.viewManager=new tee({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new eee(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new gee,this.deckRenderer=new _ee(e),this.deckPicker=new Tee(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;Qu(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),yr.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Oh.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}ae(H2,"defaultProps",lz);ae(H2,"VERSION",rW);class gw{constructor(e,n){ae(this,"opts",void 0),ae(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const A=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[A+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function cte(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function Ey(t){return t.stride||t.size*t.bytesPerElement}function Az(t,e){e.offset&&yr.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Ey(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function hte(t,e){const n=Az(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class fte{constructor(e,n,r){ae(this,"gl",void 0),ae(this,"id",void 0),ae(this,"size",void 0),ae(this,"settings",void 0),ae(this,"value",void 0),ae(this,"doublePrecision",void 0),ae(this,"_buffer",void 0),ae(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:A}=n;A=Number.isFinite(A)?[A]:A||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&JR(e,ai.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let y=cte(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(y=Float32Array),this.value=null,this.settings={...n,defaultType:y,defaultValue:A,logicalType:i,type:a,size:this.size,bytesPerElement:y.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new qr(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Ey(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),rd.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=hte(this.getAccessor(),n||{});return r[e]=new gw(this,s.high),r["".concat(e,"64Low")]=i?new gw(this,s.low):new Float32Array(this.size),r}if(n){const r=Az(this.getAccessor(),n);return{[e]:new gw(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const A=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let y=0;y<s;)for(let w=0;w<i;w++){const M=n[y++];M<A[w]&&(A[w]=M),M>a[w]&&(a[w]=M)}e=[A,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof qr?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const A=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(A?2:1),i.stride=Ey(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=Ey(i);const{buffer:A,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=hw(s,i));const y=s.byteLength+a+i.stride*2;A.byteLength<y&&A.reallocate(y),A.setAccessor(null),A.subData({data:s,offset:a}),i.type=r.type||A.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?hw(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=rd.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:A,byteOffset:a}=this;return A.byteLength<s.byteLength+a&&(A.reallocate(s.byteLength+a),n&&i&&A.subData({data:i instanceof Float64Array?hw(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&yr.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let A=s;for(;--A>=0;)n[r+A]=i[A];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let A=s;for(;--A>=0;)n[r+A]=Number.isFinite(e[A])?e[A]:i[A]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const mI=[],yI=[];function Td(t,e=0,n=1/0){let r=mI;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(yI.length=t.length,r=yI):r=mI,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function uz(t){return t&&t[Symbol.asyncIterator]}function cz(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:A}=e,a=t.BYTES_PER_ELEMENT,y=r?r/a:n,w=i?i/a:0,M=Math.floor((t.length-w)/y);return(C,{index:k,target:U})=>{if(!s){const Z=k*y+w;for(let J=0;J<n;J++)U[J]=t[Z+J];return U}const H=s[k],q=s[k+1]||M;let se;if(A){se=new Array(q-H);for(let Z=H;Z<q;Z++){const J=Z*y+w;U=new Array(n);for(let re=0;re<n;re++)U[re]=t[J+re];se[Z-H]=U}}else if(y===n)se=t.subarray(H*n+w,q*n+w);else{se=new t.constructor((q-H)*n);let Z=0;for(let J=H;J<q;J++){const re=J*y+w;for(let de=0;de<n;de++)se[Z++]=t[re+de]}}return se}}const dte=[],Ty=[[0,1/0]];function pte(t,e){if(t===Ty||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const A=t[s];A[1]<e[0]?(n.push(A),i=s+1):A[0]>e[1]?n.push(A):e=[Math.min(A[0],e[0]),Math.max(A[1],e[1])]}return n.splice(i,0,e),n}function mw(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,A=t.end||n.length,a=e.length,y=A-r;if(a>y){n.set(e.subarray(0,y),r);return}if(n.set(e,r),!s)return;let w=a;for(;w<y;){const M=s(w,e);for(let C=0;C<i;C++)n[r+w]=M[C]||0,w++}}function gte({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return mw({source:t,target:e,size:n,getData:r}),e;let A=0,a=0;const y=r&&((M,C)=>r(M+a,C)),w=Math.min(i.length,s.length);for(let M=1;M<w;M++){const C=i[M]*n,k=s[M]*n;mw({source:t.subarray(A,C),target:e,start:a,end:k,size:n,getData:y}),A=C,a=k}return a<e.length&&mw({source:[],target:e,start:a,size:n,getData:y}),e}const mte={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function hz(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...mte[n],...e,...t,type:n}}function fz(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function dz(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function pz(t){t.push(t.shift())}function sS(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,A=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*A}function gz({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=A=>A}){const A=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*A,y=n.byteOffset,w=n.startIndices,M=i&&w,C=sS(n,e),k=n.isConstant;if(!M&&r>=C)return;const U=k?n.value:n.getBuffer().getData({srcByteOffset:y});if(n.settings.normalized&&!k){const Z=s;s=(J,re)=>n.normalizeConstant(Z(J,re))}const H=k?(Z,J)=>s(U,J):(Z,J)=>s(U.subarray(Z,Z+a),J),q=t.getData({length:r}),se=new Float32Array(C);gte({source:q,target:se,sourceStartIndices:i,targetStartIndices:w,size:a,getData:H}),t.byteLength<se.byteLength+y&&t.reallocate(se.byteLength+y),t.subData({data:se,offset:y})}class oS extends fte{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Ty}),ae(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return hz(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=pte(this.state.updateRanges,[r,i])}else this.state.updateRanges=Ty}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=dte}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==Ty),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:A,noAlloc:a}}=this;let y=!0;if(A){for(const[w,M]of s)A.call(i,this,{data:n,startRow:w,endRow:M,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[w,M]of s){const C=Number.isFinite(w)?this.getVertexOffset(w):0,k=Number.isFinite(M)?this.getVertexOffset(M):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:C,endOffset:k})}this._checkAttributeArray()}else y=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),y}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const A=e;Ts(ArrayBuffer.isView(A.value),"invalid ".concat(i.accessor));const a=!!A.size&&A.size!==this.size;return r.binaryAccessor=cz(A.value,{size:A.size||this.size,stride:A.stride,offset:A.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:A}){if(e.constant)return;const{settings:a,state:y,value:w,size:M,startIndices:C}=e,{accessor:k,transform:U}=a,H=y.binaryAccessor||(typeof k=="function"?k:s[k]);Ts(typeof H=="function",'accessor "'.concat(k,'" is not a function'));let q=e.getVertexOffset(r);const{iterable:se,objectInfo:Z}=Td(n,r,i);for(const J of se){Z.index++;let re=H(J,Z);if(U&&(re=U.call(this,re)),C){const de=(Z.index<C.length-1?C[Z.index+1]:A)-C[Z.index];if(re&&Array.isArray(re[0])){let _e=q;for(const fe of re)e._normalizeValue(fe,w,_e),_e+=M}else re&&re.length>M?w.set(re,q):(e._normalizeValue(re,Z.target,0),HJ({target:w,source:Z.target,start:q,count:de}));q+=de*M}else e._normalizeValue(re,w,q),q+=M}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class yte{constructor({gl:e,attribute:n,timeline:r}){ae(this,"gl",void 0),ae(this,"type","interpolation"),ae(this,"attributeInTransition",void 0),ae(this,"settings",void 0),ae(this,"attribute",void 0),ae(this,"transition",void 0),ae(this,"currentStartIndices",void 0),ae(this,"currentLength",void 0),ae(this,"transform",void 0),ae(this,"buffers",void 0),this.gl=e,this.transition=new mm(r),this.attribute=n,this.attributeInTransition=new oS(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=vte(e,n);const i={byteLength:0,usage:35050};this.buffers=[new qr(e,i),new qr(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;pz(i);const A={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)gz({buffer:a,...A});this.currentStartIndices=s.startIndices,this.currentLength=sS(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:fz(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const _te=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function vte(t,e){const n=dz(e.size);return new KT(t,{vs:_te,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class xte{constructor({gl:e,attribute:n,timeline:r}){ae(this,"gl",void 0),ae(this,"type","spring"),ae(this,"attributeInTransition",void 0),ae(this,"settings",void 0),ae(this,"attribute",void 0),ae(this,"transition",void 0),ae(this,"currentStartIndices",void 0),ae(this,"currentLength",void 0),ae(this,"texture",void 0),ae(this,"framebuffer",void 0),ae(this,"transform",void 0),ae(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new mm(r),this.attribute=n,this.attributeInTransition=new oS(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=bte(e),this.framebuffer=Ete(e,this.texture),this.transform=wte(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new qr(e,i),new qr(e,i),new qr(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,A={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)gz({buffer:a,...A});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=sS(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:fz(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const A=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:A.stiffness,damping:A.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),pz(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),G2(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function wte(t,e,n){const r=dz(e.size);return new KT(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function bte(t){return new ua(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function Ete(t,e){return new hs(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const Tte={interpolation:yte,spring:xte};class Ste{constructor(e,{id:n,timeline:r}){ae(this,"id",void 0),ae(this,"isSupported",void 0),ae(this,"gl",void 0),ae(this,"timeline",void 0),ae(this,"transitions",void 0),ae(this,"needsRedraw",void 0),ae(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=KT.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],A=s.getTransitionSetting(n);A&&this._updateAttribute(i,s,A)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){yr.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const A=Tte[r.type];A?this.transitions[e]=new A({attribute:n,timeline:this.timeline,gl:this.gl}):(yr.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const _I="attributeManager.invalidate",Mte="attributeManager.updateStart",Cte="attributeManager.updateEnd",Pte="attribute.updateStart",Ite="attribute.allocate",kte="attribute.updateEnd";class Lte{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){ae(this,"id",void 0),ae(this,"gl",void 0),ae(this,"attributes",void 0),ae(this,"updateTriggers",void 0),ae(this,"needsRedraw",void 0),ae(this,"userData",void 0),ae(this,"stats",void 0),ae(this,"attributeTransitionManager",void 0),ae(this,"mergeBoundsMemoized",gm(mJ)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new Ste(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);co(_I,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);co(_I,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:A={},context:a={}}){let y=!1;co(Mte,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const w in this.attributes){const M=this.attributes[w],C=M.settings.accessor;M.startIndices=r,M.numInstances=n,s[w]&&yr.removed("props.".concat(w),"data.attributes.".concat(w))(),M.setExternalBuffer(A[w])||M.setBinaryValue(typeof C=="string"?A[C]:void 0,e.startIndices)||typeof C=="string"&&!A[C]&&M.setConstantValue(s[C])||M.needsUpdate()&&(y=!0,this._updateAttribute({attribute:M,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||M.needsRedraw()}y&&co(Cte,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const A=n[s];A.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=A)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new oS(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(A=>{const a=r[A];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(co(Pte,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&co(Ite,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,co(kte,n,r))}}class Dte extends mm{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,A=s(e/i);this._value=VA(n,r,A)}}const vI=1e-5;function xI(t,e,n,r,i){const s=e-t,a=(n-e)*i,y=-s*r;return a+y+s+e}function Rte(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let A=0;A<n.length;A++)s[A]=xI(t[A],e[A],n[A],r,i);return s}return xI(t,e,n,r,i)}function wI(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class Bte extends mm{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:A=e}=this;let a=Rte(s,A,n,r,i);const y=wI(a,n),w=wI(a,A);y<vI&&w<vI&&(a=n,this.end()),this._prevValue=A,this._currValue=a}}const zte={interpolation:Dte,spring:Bte};class Ote{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const y=s.get(e),{value:w=y.settings.fromValue}=y;n=w,this.remove(e)}if(i=hz(i),!i)return;const A=zte[i.type];if(!A){yr.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new A(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function Fte(t){const e=t[Kc];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function Nte(t,e){const n=mz({newProps:t,oldProps:e,propTypes:t[Kc],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=Vte(t,e);let i=!1;return r||(i=Gte(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:jte(t,e),transitionsChanged:Ute(t,e)}}function Ute(t,e){if(!t.transitions)return!1;const n={},r=t[Kc];let i=!1;for(const s in t.transitions){const A=r[s],a=A&&A.type;(a==="number"||a==="color"||a==="array")&&P3(t[s],e[s],A)&&(n[s]=!0,i=!0)}return i?n:!1}function mz({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const A=P3(t[s],e[s],r[s]);if(A)return"".concat(i,".").concat(s," ").concat(A)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const A=P3(t[s],e[s],r[s]);if(A)return"".concat(i,".").concat(s," ").concat(A)}}return!1}function P3(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function Vte(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function Gte(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&bI(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&bI(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function jte(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function bI(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},mz({oldProps:i,newProps:r,triggerName:n})}const $te="count(): argument not an object",Hte="count(): argument not a container";function Wte(t){if(!qte(t))throw new Error($te);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Qte(t))return Object.keys(t).length;throw new Error(Hte)}function Qte(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function qte(t){return t!==null&&typeof t=="object"}function I3(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const Zte={10241:9987,10240:9729,10242:33071,10243:33071},k3={};function Yte(t,e,n,r){if(n instanceof ua)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new ua(e,{...n,parameters:{...Zte,...i,...r}});return k3[s.id]=t,s}function Xte(t,e){!e||!(e instanceof ua)||k3[e.id]===t&&(e.delete(),delete k3[e.id])}const Kte={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||L3(t)&&(t.length===3||t.length===4)},equal(t,e,n){return eA(t,e,1)}},accessor:{validate(t,e){const n=k_(t);return n==="function"||n===k_(e.value)},equal(t,e,n){return typeof e=="function"?!0:eA(t,e,1)}},array:{validate(t,e){return e.optional&&!t||L3(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?eA(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?eA(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:Yte(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{Xte(n.id,t)}}};function Jte(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const A=s?.deprecatedFor;if(A)r[i]=Array.isArray(A)?A:[A];else{const a=ene(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function ene(t,e){switch(k_(e)){case"object":return gp(t,e);case"array":return gp(t,{type:"array",value:e,compare:!1});case"boolean":return gp(t,{type:"boolean",value:e});case"number":return gp(t,{type:"number",value:e});case"function":return gp(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function gp(t,e){return"type"in e?{name:t,...Kte[e.type],...e}:"value"in e?{name:t,type:k_(e.value),...e}:{name:t,type:"object",value:e}}function L3(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function k_(t){return L3(t)?"array":t===null?"null":typeof t}function tne(t,e){let n;for(let s=e.length-1;s>=0;s--){const A=e[s];"extensions"in A&&(n=A.extensions)}const r=D3(t.constructor,n),i=Object.create(r);i[P_]=t,i[n0]={},i[Uc]={};for(let s=0;s<e.length;++s){const A=e[s];for(const a in A)i[a]=A[a]}return Object.freeze(i),i}const nne="_mergedDefaultProps";function D3(t,e){let n=nne;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=yz(t,n);return r||(t[n]=rne(t,e||[]))}function rne(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=D3(r),s=yz(t,"defaultProps")||{},A=Jte(s),a=Object.assign(Object.create(null),i,A.defaultProps),y=Object.assign(Object.create(null),i?.[Kc],A.propTypes),w=Object.assign(Object.create(null),i?.[dw],A.deprecatedProps);for(const M of e){const C=D3(M.constructor);C&&(Object.assign(a,C),Object.assign(y,C[Kc]),Object.assign(w,C[dw]))}return ine(a,t),one(a,y),sne(a,w),a[Kc]=y,a[dw]=w,e.length===0&&!aS(t,"_propTypes")&&(t._propTypes=y),a}function ine(t,e){const n=lne(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function sne(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])aS(this,s)||(this[s]=r);yr.deprecated(i,e[n].join("/"))()}})}function one(t,e){const n={},r={};for(const i in e){const s=e[i],{name:A,value:a}=s;s.async&&(n[A]=a,r[A]=ane(A))}t[zf]=n,t[n0]={},Object.defineProperties(t,r)}function ane(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||uz(e)?this[n0][t]=e:this[Uc][t]=e},get(){if(this[Uc]){if(t in this[Uc])return this[Uc][t]||this[zf][t];if(t in this[n0]){const e=this[P_]&&this[P_].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[zf][t]}}return this[zf][t]}}}function aS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yz(t,e){return aS(t,e)&&t[e]}function lne(t){const e=t.componentName;return e||yr.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let Ane=0;class lS{constructor(...e){ae(this,"id",void 0),ae(this,"props",void 0),ae(this,"count",void 0),this.props=tne(this,e),this.id=this.props.id,this.count=Ane++}clone(e){const{props:n}=this,r={};for(const i in n[zf])i in n[Uc]?r[i]=n[Uc][i]:i in n[n0]&&(r[i]=n[n0][i]);return new this.constructor({...n,...r,...e})}}ae(lS,"componentName","Component");ae(lS,"defaultProps",{});const une=Object.freeze({});class cne{constructor(e){ae(this,"component",void 0),ae(this,"onAsyncPropUpdated",void 0),ae(this,"asyncProps",void 0),ae(this,"oldProps",void 0),ae(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||une}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[P_]||this.component;const n=e[Uc]||{},r=e[n0]||e,i=e[zf]||{};for(const s in n){const A=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,A),n[s]=this.getAsyncProp(s)}for(const s in r){const A=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,A)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(uz(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],A=0;for await(const a of n){if(!this.component)return;const{dataTransform:y}=this.component.props;y?s=y(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:A,endRow:s.length}]}),A=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[Kc];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class hne extends cne{constructor({attributeManager:e,layer:n}){super(n),ae(this,"attributeManager",void 0),ae(this,"needsRedraw",void 0),ae(this,"needsUpdate",void 0),ae(this,"subLayers",void 0),ae(this,"usesPickingColorCache",void 0),ae(this,"hasPickingBuffer",void 0),ae(this,"changeFlags",void 0),ae(this,"viewport",void 0),ae(this,"uniformTransitions",void 0),ae(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r?.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const fne="layer.changeFlag",dne="layer.initialize",pne="layer.update",gne="layer.finalize",mne="layer.matched",EI=2**24-1,yne=Object.freeze([]),_ne=gm(({oldViewport:t,viewport:e})=>t.equals(e));let PA=new Uint8ClampedArray(0);const vne={data:{type:"data",value:yne,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:A}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let y=A.contains(t);return!y&&!i&&(A.add({resourceId:t,data:m_(t,r),persistent:!1}),y=!0),y?A.subscribe({resourceId:t,onChange:w=>{var M;return(M=n.internalState)===null||M===void 0?void 0:M.reloadAsyncProp(e,w)},consumerId:n.id,requestId:e}):m_(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:wr.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class AA extends lS{constructor(...e){super(...e),ae(this,"internalState",null),ae(this,"lifecycle",X0.NO_STATE),ae(this,"context",void 0),ae(this,"state",void 0),ae(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Ts(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=YB(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,A]=WB(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,A]}unproject(e){return Ts(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Ts(this.internalState);const r=this.internalState.viewport||this.context.viewport;return bJ(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===wr.DEFAULT||e===wr.LNGLAT||e===wr.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Ts(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:Wte(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=I3(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,A=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==A){this.internalState.hasPickingBuffer=A;const{pickingColors:a,instancePickingColors:y}=n.attributes,w=a||y;w&&(A&&w.constant&&(w.constant=!1,n.invalidate(w.id)),!w.value&&!A&&(w.constant=!0,w.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,A;(s=this.context)===null||s===void 0||(A=s.onError)===null||A===void 0||A.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!_ne({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(PA.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>EI&&yr.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),PA=rd.allocate(PA,n,{size:3,copy:!0,maxCount:Math.max(n,EI)});const i=Math.floor(PA.length/3),s=[];for(let A=r;A<i;A++)this.encodePickingColor(A,s),PA[A*3+0]=s[0],PA[A*3+1]=s[1],PA[A*3+2]=s[2]}e.value=PA.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,A=s&&n.attributes&&n.attributes[s.id];if(A&&A.value){const a=A.value,y=this.encodePickingColor(e);for(let w=0;w<n.length;w++){const M=s.getVertexOffset(w);a[M]===y[0]&&a[M+1]===y[1]&&a[M+2]===y[2]&&this._disablePickingIndex(w)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),A=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(A-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==PA.buffer&&(r.value=PA.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Ts(!this.internalState),Ts(Number.isFinite(this.props.coordinateSystem)),co(dne,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new hne({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(yr.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Ote(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){co(mne,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(co(pne,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,A=this._updateUniformTransition();i.propsInTransition=A,r.viewport=i.viewport||s,this.props=A;try{const a=this._getUpdateParams(),y=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const M of this.props.extensions)M.updateState.call(this,a,M);const w=this.getModels()[0]!==y[0];this._postUpdate(a,w)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){co(gne,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const A=this.props.opacity;n.opacity=Math.pow(A,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,y=a&&a(n)||[0,0];Qu(s.gl,{polygonOffset:y}),sA(s.gl,r,()=>{const w={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const M of this.props.extensions)M.draw.call(this,w,M);this.draw(w)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const A=e[i],a=n[i];A&&Array.isArray(a)&&(n.dataChanged=Array.isArray(A)?a.concat(A):A,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&co(fne,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=Nte(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){Fte(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Lte(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:A,highlightedObjectIndex:a,highlightColor:y}=r;if(n||i.autoHighlight!==A||i.highlightedObjectIndex!==a||i.highlightColor!==y){const w={};A||(w.pickingSelectedColor=null),Array.isArray(y)&&(w.pickingHighlightColor=y),(n||a!==i.highlightedObjectIndex)&&(w.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(w)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ae(AA,"defaultProps",vne);ae(AA,"layerName","Layer");const xne="compositeLayer.renderLayers";class fr extends AA{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:A,getPolygonOffset:a,highlightedObjectIndex:y,autoHighlight:w,highlightColor:M,coordinateSystem:C,coordinateOrigin:k,wrapLongitude:U,positionFormat:H,modelMatrix:q,extensions:se,fetch:Z,operation:J,_subLayerProps:re}=this.props,de={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:A,getPolygonOffset:a,highlightedObjectIndex:y,autoHighlight:w,highlightColor:M,coordinateSystem:C,coordinateOrigin:k,wrapLongitude:U,positionFormat:H,modelMatrix:q,extensions:se,fetch:Z,operation:J},_e=re&&e.id&&re[e.id],fe=_e&&_e.updateTriggers,Fe=e.id||"sublayer";if(_e){const We=this.props[Kc],qe=e.type?e.type._propTypes:{};for(const Ke in _e){const Oe=qe[Ke]||We[Ke];Oe&&Oe.type==="accessor"&&(_e[Ke]=this.getSubLayerAccessor(_e[Ke]))}}Object.assign(de,e,_e),de.id="".concat(this.props.id,"-").concat(Fe),de.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...fe};for(const We of se){const qe=We.getSubLayerProps.call(this,We);qe&&Object.assign(de,qe,{updateTriggers:Object.assign(de.updateTriggers,qe.updateTriggers)})}return de}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=j2(s,Boolean),this.internalState.subLayers=r}co(xne,this,i,r);for(const s of r)s.parent=this}}ae(fr,"layerName","CompositeLayer");const R1=Math.PI/180,TI=180/Math.PI,Sy=6370972,pf=256;function wne(){const t=pf/Sy,e=Math.PI/180*pf;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class bne extends m0{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,nearZMultiplier:s=.1,farZMultiplier:A=2,resolution:a=10}=e;let{height:y,altitude:w=1.5}=e;y=y||1,w=Math.max(.75,w);const M=new la().lookAt({eye:[0,-w,0],up:[0,0,1]}),C=Math.pow(2,i);M.rotateX(n*R1),M.rotateZ(-r*R1),M.scale(C/y);const k=Math.atan(.5/w),U=pf*2*C/y;super({...e,height:y,viewMatrix:M,longitude:r,latitude:n,zoom:i,distanceScales:wne(),fovyRadians:k*2,focalDistance:w,near:s,far:Math.min(2,1/U+1)*w*A}),ae(this,"longitude",void 0),ae(this,"latitude",void 0),ae(this,"resolution",void 0),this.latitude=n,this.longitude=r,this.resolution=a}get projectionMode(){return Kl.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,this.height/2],n),i=this.unproject([this.width/2,0],n),s=this.unproject([this.width,this.height/2],n),A=this.unproject([this.width/2,this.height],n);return s[0]<this.longitude&&(s[0]+=360),r[0]>this.longitude&&(r[0]-=360),[Math.min(r[0],s[0],i[0],A[0]),Math.min(r[1],s[1],i[1],A[1]),Math.max(r[0],s[0],i[0],A[0]),Math.max(r[1],s[1],i[1],A[1])]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,A]=e,a=n?s:this.height-s,{pixelUnprojectionMatrix:y}=this;let w;if(Number.isFinite(A))w=yw(y,[i,a,A,1]);else{const U=yw(y,[i,a,-1,1]),H=yw(y,[i,a,1,1]),q=((r||0)/Sy+1)*pf,se=sw(wB([],U,H)),Z=sw(U),J=sw(H),de=4*((4*Z*J-(se-Z-J)**2)/16)/se,_e=Math.sqrt(Z-de),fe=Math.sqrt(Math.max(0,q*q-de)),Fe=(_e-fe)/Math.sqrt(se);w=CY([],U,H,Fe)}const[M,C,k]=this.unprojectPosition(w);return Number.isFinite(A)?[M,C,k]:Number.isFinite(r)?[M,C,r]:[M,C]}projectPosition(e){const[n,r,i=0]=e,s=n*R1,A=r*R1,a=Math.cos(A),y=(i/Sy+1)*pf;return[Math.sin(s)*a*y,-Math.cos(s)*a*y,Math.sin(A)*y]}unprojectPosition(e){const[n,r,i]=e,s=bB(e),A=Math.asin(i/s),y=Math.atan2(n,-r)*TI,w=A*TI,M=(s/pf-1)*Sy;return[y,w,M]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,n){const r=this.unproject(n);return{longitude:e[0]-r[0]+this.longitude,latitude:e[1]-r[1]+this.latitude}}}function yw(t,e){const n=Ed([],e,t);return XT(n,n,1/n[3]),n}class W2{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(e){ae(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&eA(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],A=this.props[i];r[i]=A,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof A=="function"&&(r[i]=this.getSubLayerAccessor(A)))}return r}initializeState(e,n){}updateState(e,n){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,n){}finalizeState(e,n){}}ae(W2,"defaultProps",{});ae(W2,"extensionName","LayerExtension");const _w={bearing:0,pitch:0,position:[0,0,0]},Ene={speed:1.2,curve:1.414};class Sd extends ez{constructor(e={}){super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),ae(this,"opts",void 0),this.opts={...Ene,...e}}interpolateProps(e,n,r){const i=JK(e,n,r,this.opts);for(const s in _w)i[s]=VA(e[s]||_w[s],n[s]||_w[s],r);return i}getDuration(e,n){let{transitionDuration:r}=n;return r==="auto"&&(r=eJ(e,n,this.opts)),r}}class _z{constructor(e){ae(this,"opts",void 0),ae(this,"typedArrayManager",void 0),ae(this,"indexStarts",[0]),ae(this,"vertexStarts",[0]),ae(this,"vertexCount",0),ae(this,"instanceCount",0),ae(this,"attributes",void 0),ae(this,"_attributeDefs",void 0),ae(this,"data",void 0),ae(this,"getGeometry",void 0),ae(this,"geometryBuffer",void 0),ae(this,"buffers",void 0),ae(this,"positionSize",void 0),ae(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=rd,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:A,dataChanged:a,normalize:y=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(A==="XY"?2:3),this.buffers=r,this.normalize=y,s&&(Ts(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),y||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const w of a)this._rebuildGeometry(w);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?cz(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:A}=this;for(const a in s)if(a in i)A.release(r[a]),r[a]=null;else{const y=s[a];y.copy=n,r[a]=A.allocate(r[a],e,y)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:A,objectInfo:a}=Td(i,n,r);for(const y of A){a.index++;const w=s?s(y,a):null;e(w,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:A}=this,{startRow:a=0,endRow:y=1/0}=e||{},w={};if(e||(n=[0],r=[0]),this.normalize||!A)this._forEachGeometry((C,k)=>{const U=C&&this.normalizeGeometry(C);w[k]=U,r[k+1]=r[k]+(U?this.getGeometrySize(U):0)},a,y),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(A))i=i||A.length/this.positionSize;else if(A instanceof qr){const C=A.accessor.stride||this.positionSize*4;i=i||A.byteLength/C}else if(A.buffer){const C=A.stride||this.positionSize*4;i=i||A.buffer.byteLength/C}else if(A.value){const C=A.value,k=A.stride/C.BYTES_PER_ELEMENT||this.positionSize;i=i||C.length/k}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const M={};this._forEachGeometry((C,k)=>{const U=w[k]||C;M.vertexStart=r[k],M.indexStart=n[k];const H=k<r.length-1?r[k+1]:i;M.geometrySize=H-r[k],M.geometryIndex=k,this.updateGeometryAttributes(U,M)},a,y),this.vertexCount=n[n.length-1]}}const Tne=typeof window<"u"?rt.useLayoutEffect:rt.useEffect,Sne=Tne;function L_(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const Mne={position:"absolute",zIndex:-1};function vz(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>vz(n,e));if(Q2(t)){if(Cne(t))return e.style=Mne,rt.cloneElement(t,e);if(Pne(t))return rt.cloneElement(t,e)}return t}function Q2(t){return t&&typeof t=="object"&&"type"in t||!1}function Cne(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function Pne(t){const e=t.type;return e&&e.deckGLViewProps}function R3(t){if(typeof t=="function")return rt.createElement(id,{},t);if(Array.isArray(t))return t.map(R3);if(Q2(t)){if(t.type===rt.Fragment)return R3(t.props.children);if(L_(t.type,id))return t}return t}function Ine({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return rt.Children.forEach(R3(t),A=>{if(Q2(A)){const a=A.type;if(L_(a,AA)){const y=kne(a,A.props);i.push(y)}else r.push(A);if(L_(a,id)&&a!==id&&A.props.id){const y=new a(A.props);s[y.id]=y}}else A&&r.push(A)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(A=>{s[A.id]=A}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function kne(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function Lne({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const A of t){let a=s,y=A;Q2(A)&&L_(A.type,id)&&(a=A.props.id||s,y=A.props.children);const w=r.getViewport(a),M=r.getViewState(a);if(w){M.padding=w.padding;const{x:C,y:k,width:U,height:H}=w;y=vz(y,{x:C,y:k,width:U,height:H,viewport:w,viewState:M}),i[a]||(i[a]={viewport:w,children:[]}),i[a].children.push(y)}}return Object.keys(i).map(A=>{const{viewport:a,children:y}=i[A],{x:w,y:M,width:C,height:k}=a,U={position:"absolute",left:w,top:M,width:C,height:k},H="view-".concat(A),q=rt.createElement("div",{key:H,id:H,style:U},...y);if(n){const se={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:Z=>{Z.viewId=A,e._onViewStateChange(Z)}};return rt.createElement(n,{key:H,value:se},q)}return q})}const Dne={mixBlendMode:null};function Rne({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in Dne?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function Bne(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function xz(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function zne(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():xz(t)}});return r}const wz=rt.forwardRef((t,e)=>{const[n,r]=rt.useState(0),s=rt.useRef({control:null,version:n,forceUpdate:()=>r(_e=>_e+1)}).current,A=rt.useRef(null),a=rt.useRef(null),y=rt.useMemo(()=>Ine(t),[t.layers,t.views,t.children]);let w=!0;const M=_e=>{var fe;return w&&t.viewState?(s.viewStateUpdateRequested=_e,null):(s.viewStateUpdateRequested=null,(fe=t.onViewStateChange)===null||fe===void 0?void 0:fe.call(t,_e))},C=_e=>{if(w)s.interactionStateUpdateRequested=_e;else{var fe;s.interactionStateUpdateRequested=null,(fe=t.onInteractionStateChange)===null||fe===void 0||fe.call(t,_e)}},k=rt.useMemo(()=>{const _e={...t,style:null,width:"100%",height:"100%",parent:A.current,canvas:a.current,layers:y.layers,views:y.views,onViewStateChange:M,onInteractionStateChange:C};return delete _e._customRender,s.deck&&s.deck.setProps(_e),_e},[t]);rt.useEffect(()=>{const _e=t.Deck||H2;return s.deck=zne(s,_e,{...k,parent:A.current,canvas:a.current}),()=>{var fe;return(fe=s.deck)===null||fe===void 0?void 0:fe.finalize()}},[]),Sne(()=>{xz(s);const{viewStateUpdateRequested:_e,interactionStateUpdateRequested:fe}=s;_e&&M(_e),fe&&C(fe)}),rt.useImperativeHandle(e,()=>Bne(s),[]);const U=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:H,width:q,height:se,id:Z,style:J}=t,{containerStyle:re,canvasStyle:de}=rt.useMemo(()=>Rne({width:q,height:se,style:J}),[q,se,J]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===U||s.version!==n){s.lastRenderedViewports=U,s.version=n;const _e=Lne({children:y.children,deck:s.deck,ContextProvider:H}),fe=rt.createElement("canvas",{key:"canvas",id:Z||"deckgl-overlay",ref:a,style:de});s.control=rt.createElement("div",{id:"".concat(Z||"deckgl","-wrapper"),ref:A,style:re},[fe,_e])}return w=!1,s.control});wz.defaultProps=H2.defaultProps;const One=wz;var bz={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(RU,function(){var n,r,i;function s(a,y){if(!n)n=y;else if(!r)r=y;else{var w="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",M={};n(M),i=y(M),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}s(["exports"],function(a){var y=w;function w(f,u,p,T){this.cx=3*f,this.bx=3*(p-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(T-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=u,this.p2x=p,this.p2y=T}function M(f,u,p,T){const D=new y(f,u,p,T);return function(z){return D.solve(z)}}w.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,u){if(u===void 0&&(u=1e-6),f<0)return 0;if(f>1)return 1;for(var p=f,T=0;T<8;T++){var D=this.sampleCurveX(p)-f;if(Math.abs(D)<u)return p;var z=this.sampleCurveDerivativeX(p);if(Math.abs(z)<1e-6)break;p-=D/z}var F=0,j=1;for(p=f,T=0;T<20&&(D=this.sampleCurveX(p),!(Math.abs(D-f)<u));T++)f>D?F=p:j=p,p=.5*(j-F)+F;return p},solve:function(f,u){return this.sampleCurveY(this.solveCurveX(f,u))}};const C=M(.25,.1,.25,1);function k(f,u,p){return Math.min(p,Math.max(u,f))}function U(f,u,p){const T=p-u,D=((f-u)%T+T)%T+u;return D===u?p:D}function H(f,...u){for(const p of u)for(const T in p)f[T]=p[T];return f}let q=1;function se(f,u){f.forEach(p=>{u[p]&&(u[p]=u[p].bind(u))})}function Z(f,u,p){const T={};for(const D in f)T[D]=u.call(p||this,f[D],D,f);return T}function J(f,u,p){const T={};for(const D in f)u.call(p||this,f[D],D,f)&&(T[D]=f[D]);return T}function re(f){return Array.isArray(f)?f.map(re):typeof f=="object"&&f?Z(f,re):f}const de={};function _e(f){de[f]||(typeof console<"u"&&console.warn(f),de[f]=!0)}function fe(f,u,p){return(p.y-f.y)*(u.x-f.x)>(u.y-f.y)*(p.x-f.x)}function Fe(f){let u=0;for(let p,T,D=0,z=f.length,F=z-1;D<z;F=D++)p=f[D],T=f[F],u+=(T.x-p.x)*(p.y+T.y);return u}function We(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qe(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(p,T,D,z)=>{const F=D||z;return u[T]=!F||F.toLowerCase(),""}),u["max-age"]){const p=parseInt(u["max-age"],10);isNaN(p)?delete u["max-age"]:u["max-age"]=p}return u}let Ke,Oe,tt=null;function Ye(f){if(tt==null){const u=f.navigator?f.navigator.userAgent:null;tt=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return tt}function pt(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const en={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(f){const u=requestAnimationFrame(f);return{cancel:()=>cancelAnimationFrame(u)}},getImageData(f,u=0){const p=window.document.createElement("canvas"),T=p.getContext("2d");if(!T)throw new Error("failed to create canvas 2d context");return p.width=f.width,p.height=f.height,T.drawImage(f,0,0,f.width,f.height),T.getImageData(-u,-u,f.width+2*u,f.height+2*u)},resolveURL:f=>(Ke||(Ke=document.createElement("a")),Ke.href=f,Ke.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Oe==null&&(Oe=matchMedia("(prefers-reduced-motion: reduce)")),Oe.matches)}};var Mt=Qt;function Qt(f,u){this.x=f,this.y=u}Qt.prototype={clone:function(){return new Qt(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,u){return this.clone()._rotateAround(f,u)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var u=f.x-this.x,p=f.y-this.y;return u*u+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult:function(f){var u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var u=Math.cos(f),p=Math.sin(f),T=p*this.x+u*this.y;return this.x=u*this.x-p*this.y,this.y=T,this},_rotateAround:function(f,u){var p=Math.cos(f),T=Math.sin(f),D=u.y+T*(this.x-u.x)+p*(this.y-u.y);return this.x=u.x+p*(this.x-u.x)-T*(this.y-u.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Qt.convert=function(f){return f instanceof Qt?f:Array.isArray(f)?new Qt(f[0],f[1]):f};const xt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Tt="mapbox-tiles";let Xt,Mn,Cn=500,vr=50;function Gn(){typeof caches>"u"||Xt||(Xt=caches.open(Tt))}let Jn=1/0;const ir={supported:!1,testSupport:function(f){!St&&Lr&&(ln?yn(f):jn=f)}};let jn,Lr,St=!1,ln=!1;function yn(f){const u=f.createTexture();f.bindTexture(f.TEXTURE_2D,u);try{if(f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,Lr),f.isContextLost())return;ir.supported=!0}catch{}f.deleteTexture(u),St=!0}typeof document<"u"&&(Lr=document.createElement("img"),Lr.onload=function(){jn&&yn(jn),jn=null,ln=!0},Lr.onerror=function(){St=!0,jn=null},Lr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const bt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(bt);class sr extends Error{constructor(u,p,T,D){super(`AJAXError: ${p} (${u}): ${T}`),this.status=u,this.statusText=p,this.url=T,this.body=D}}const er=We()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function lr(f,u){const p=new AbortController,T=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:er(),signal:p.signal});let D=!1,z=!1;return f.type==="json"&&T.headers.set("Accept","application/json"),((F,j,Y)=>{if(z)return;const ie=Date.now();fetch(T).then(Ae=>Ae.ok?((he,ge,ve)=>{(f.type==="arrayBuffer"?he.arrayBuffer():f.type==="json"?he.json():he.text()).then(xe=>{z||(ge&&ve&&function(Ge,Ne,nt){if(Gn(),!Xt)return;const ut={status:Ne.status,statusText:Ne.statusText,headers:new Headers};Ne.headers.forEach((at,_t)=>ut.headers.set(_t,at));const et=qe(Ne.headers.get("Cache-Control")||"");et["no-store"]||(et["max-age"]&&ut.headers.set("Expires",new Date(nt+1e3*et["max-age"]).toUTCString()),new Date(ut.headers.get("Expires")).getTime()-nt<42e4||function(at,_t){if(Mn===void 0)try{new Response(new ReadableStream),Mn=!0}catch{Mn=!1}Mn?_t(at.body):at.blob().then(_t)}(Ne,at=>{const _t=new Response(at,ut);Gn(),Xt&&Xt.then(yt=>yt.put(function(rn){const un=rn.indexOf("?");return un<0?rn:rn.slice(0,un)}(Ge.url),_t)).catch(yt=>_e(yt.message))}))}(T,ge,ve),D=!0,u(null,xe,he.headers.get("Cache-Control"),he.headers.get("Expires")))}).catch(xe=>{z||u(new Error(xe.message))})})(Ae,null,ie):Ae.blob().then(he=>u(new sr(Ae.status,Ae.statusText,f.url,he)))).catch(Ae=>{Ae.code!==20&&u(new Error(Ae.message))})})(),{cancel:()=>{z=!0,D||p.abort()}}}const gr=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){if(We()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,u);if(!We()){const T=f.url.substring(0,f.url.indexOf("://"));return(xt.REGISTERED_PROTOCOLS[T]||lr)(f,u)}}if(!(/^file:/.test(p=f.url)||/^file:/.test(er())&&!/^\w+:/.test(p))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return lr(f,u);if(We()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,u,void 0,!0)}var p;return function(T,D){const z=new XMLHttpRequest;z.open(T.method||"GET",T.url,!0),T.type==="arrayBuffer"&&(z.responseType="arraybuffer");for(const F in T.headers)z.setRequestHeader(F,T.headers[F]);return T.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=T.credentials==="include",z.onerror=()=>{D(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let F=z.response;if(T.type==="json")try{F=JSON.parse(z.response)}catch(j){return D(j)}D(null,F,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const F=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});D(new sr(z.status,z.statusText,T.url,F))}},z.send(T.body),{cancel:()=>z.abort()}}(f,u)},Ar=function(f,u){return gr(H(f,{type:"arrayBuffer"}),u)};function Zr(f){const u=window.document.createElement("a");return u.href=f,u.protocol===window.document.location.protocol&&u.host===window.document.location.host}const Zn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ei,$n;Ei=[],$n=0;const Ti=function(f,u){if(ir.supported&&(f.headers||(f.headers={}),f.headers.accept="image/webp,*/*"),$n>=xt.MAX_PARALLEL_IMAGE_REQUESTS){const z={requestParameters:f,callback:u,cancelled:!1,cancel(){this.cancelled=!0}};return Ei.push(z),z}$n++;let p=!1;const T=()=>{if(!p)for(p=!0,$n--;Ei.length&&$n<xt.MAX_PARALLEL_IMAGE_REQUESTS;){const z=Ei.shift(),{requestParameters:F,callback:j,cancelled:Y}=z;Y||(z.cancel=Ti(F,j).cancel)}},D=Ar(f,(z,F,j,Y)=>{T(),z?u(z):F&&function(ie,Ae){typeof createImageBitmap=="function"?function(he,ge){const ve=new Blob([new Uint8Array(he)],{type:"image/png"});createImageBitmap(ve).then(xe=>{ge(null,xe)}).catch(xe=>{ge(new Error(`Could not load image because of ${xe.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ie,Ae):function(he,ge){const ve=new Image;ve.onload=()=>{ge(null,ve),URL.revokeObjectURL(ve.src),ve.onload=null,window.requestAnimationFrame(()=>{ve.src=Zn})},ve.onerror=()=>ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const xe=new Blob([new Uint8Array(he)],{type:"image/png"});ve.src=he.byteLength?URL.createObjectURL(xe):Zn}(ie,Ae)}(F,(ie,Ae)=>{ie!=null?u(ie):Ae!=null&&u(null,Ae,{cacheControl:j,expires:Y})})});return{cancel:()=>{D.cancel(),T()}}};function rs(f,u,p){p[f]&&p[f].indexOf(u)!==-1||(p[f]=p[f]||[],p[f].push(u))}function Er(f,u,p){if(p&&p[f]){const T=p[f].indexOf(u);T!==-1&&p[f].splice(T,1)}}class Yr{constructor(u,p={}){H(this,p),this.type=u}}class Ps extends Yr{constructor(u,p={}){super("error",H({error:u},p))}}class Si{on(u,p){return this._listeners=this._listeners||{},rs(u,p,this._listeners),this}off(u,p){return Er(u,p,this._listeners),Er(u,p,this._oneTimeListeners),this}once(u,p){return this._oneTimeListeners=this._oneTimeListeners||{},rs(u,p,this._oneTimeListeners),this}fire(u,p){typeof u=="string"&&(u=new Yr(u,p||{}));const T=u.type;if(this.listens(T)){u.target=this;const D=this._listeners&&this._listeners[T]?this._listeners[T].slice():[];for(const j of D)j.call(this,u);const z=this._oneTimeListeners&&this._oneTimeListeners[T]?this._oneTimeListeners[T].slice():[];for(const j of z)Er(T,j,this._oneTimeListeners),j.call(this,u);const F=this._eventedParent;F&&(H(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(u))}else u instanceof Ps&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,p){return this._eventedParent=u,this._eventedParentData=p,this}}var ht={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class kt{constructor(u,p,T,D){this.message=(u?`${u}: `:"")+T,D&&(this.identifier=D),p!=null&&p.__line__&&(this.line=p.__line__)}}function is(f){const u=f.value;return u?[new kt(f.key,u,"constants have been deprecated as of v8")]:[]}function Ai(f,...u){for(const p of u)for(const T in p)f[T]=p[T];return f}function Vn(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Bi(f){if(Array.isArray(f))return f.map(Bi);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const p in f)u[p]=Bi(f[p]);return u}return Vn(f)}class mi extends Error{constructor(u,p){super(p),this.message=p,this.key=u}}class ti{constructor(u,p=[]){this.parent=u,this.bindings={};for(const[T,D]of p)this.bindings[T]=D}concat(u){return new ti(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const $i={kind:"null"},Bt={kind:"number"},Rn={kind:"string"},In={kind:"boolean"},Ur={kind:"color"},Xi={kind:"object"},Pn={kind:"value"},ye={kind:"collator"},ot={kind:"formatted"},gt={kind:"padding"},Lt={kind:"resolvedImage"};function qt(f,u){return{kind:"array",itemType:f,N:u}}function Kt(f){if(f.kind==="array"){const u=Kt(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const En=[$i,Bt,Rn,In,Ur,ot,Xi,qt(Pn),gt,Lt];function hn(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!hn(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const p of En)if(!hn(p,u))return null}}return`Expected ${Kt(f)} but found ${Kt(u)} instead.`}function an(f,u){return u.some(p=>p.kind===f.kind)}function Dn(f,u){return u.some(p=>p==="null"?f===null:p==="array"?Array.isArray(f):p==="object"?f&&!Array.isArray(f)&&typeof f=="object":p===typeof f)}var xr,fn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function K(f){return(f=Math.round(f))<0?0:f>255?255:f}function W(f){return K(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function ee(f){return(u=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:u>1?1:u;var u}function ce(f,u,p){return p<0?p+=1:p>1&&(p-=1),6*p<1?f+(u-f)*p*6:2*p<1?u:3*p<2?f+(u-f)*(2/3-p)*6:f}try{xr={}.parseCSSColor=function(f){var u,p=f.replace(/ /g,"").toLowerCase();if(p in fn)return fn[p].slice();if(p[0]==="#")return p.length===4?(u=parseInt(p.substr(1),16))>=0&&u<=4095?[(3840&u)>>4|(3840&u)>>8,240&u|(240&u)>>4,15&u|(15&u)<<4,1]:null:p.length===7&&(u=parseInt(p.substr(1),16))>=0&&u<=16777215?[(16711680&u)>>16,(65280&u)>>8,255&u,1]:null;var T=p.indexOf("("),D=p.indexOf(")");if(T!==-1&&D+1===p.length){var z=p.substr(0,T),F=p.substr(T+1,D-(T+1)).split(","),j=1;switch(z){case"rgba":if(F.length!==4)return null;j=ee(F.pop());case"rgb":return F.length!==3?null:[W(F[0]),W(F[1]),W(F[2]),j];case"hsla":if(F.length!==4)return null;j=ee(F.pop());case"hsl":if(F.length!==3)return null;var Y=(parseFloat(F[0])%360+360)%360/360,ie=ee(F[1]),Ae=ee(F[2]),he=Ae<=.5?Ae*(ie+1):Ae+ie-Ae*ie,ge=2*Ae-he;return[K(255*ce(ge,he,Y+1/3)),K(255*ce(ge,he,Y)),K(255*ce(ge,he,Y-1/3)),j];default:return null}}return null}}catch{}class o{constructor(u,p,T,D=1){this.r=u,this.g=p,this.b=T,this.a=D}static parse(u){if(!u)return;if(u instanceof o)return u;if(typeof u!="string")return;const p=xr(u);return p?new o(p[0]/255*p[3],p[1]/255*p[3],p[2]/255*p[3],p[3]):void 0}toString(){const[u,p,T,D]=this.toArray();return`rgba(${Math.round(u)},${Math.round(p)},${Math.round(T)},${D})`}toArray(){const{r:u,g:p,b:T,a:D}=this;return D===0?[0,0,0,0]:[255*u/D,255*p/D,255*T/D,D]}}o.black=new o(0,0,0,1),o.white=new o(1,1,1,1),o.transparent=new o(0,0,0,0),o.red=new o(1,0,0,1);class G{constructor(u,p,T){this.sensitivity=u?p?"variant":"case":p?"accent":"base",this.locale=T,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,p){return this.collator.compare(u,p)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class De{constructor(u,p,T,D,z){this.text=u,this.image=p,this.scale=T,this.fontStack=D,this.textColor=z}}class ke{constructor(u){this.sections=u}static fromString(u){return new ke([new De(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof ke?u:ke.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Pe{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Pe)return u;if(typeof u=="number")return new Pe([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const p of u)if(typeof p!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Pe(u)}}toString(){return JSON.stringify(this.values)}}class Le{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Le({name:u,available:!1}):null}}function Ze(f,u,p,T){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof p=="number"&&p>=0&&p<=255?T===void 0||typeof T=="number"&&T>=0&&T<=1?null:`Invalid rgba value [${[f,u,p,T].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof T=="number"?[f,u,p,T]:[f,u,p]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function lt(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof o||f instanceof G||f instanceof ke||f instanceof Pe||f instanceof Le)return!0;if(Array.isArray(f)){for(const u of f)if(!lt(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!lt(f[u]))return!1;return!0}return!1}function Qe(f){if(f===null)return $i;if(typeof f=="string")return Rn;if(typeof f=="boolean")return In;if(typeof f=="number")return Bt;if(f instanceof o)return Ur;if(f instanceof G)return ye;if(f instanceof ke)return ot;if(f instanceof Pe)return gt;if(f instanceof Le)return Lt;if(Array.isArray(f)){const u=f.length;let p;for(const T of f){const D=Qe(T);if(p){if(p===D)continue;p=Pn;break}p=D}return qt(p||Pn,u)}return Xi}function ft(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof o||f instanceof ke||f instanceof Pe||f instanceof Le?f.toString():JSON.stringify(f)}class vt{constructor(u,p){this.type=u,this.value=p}static parse(u,p){if(u.length!==2)return p.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!lt(u[1]))return p.error("invalid value");const T=u[1];let D=Qe(T);const z=p.expectedType;return D.kind!=="array"||D.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(D=z),new vt(D,T)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wt{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const Jt={string:Rn,number:Bt,boolean:In,object:Xi};class Ut{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");let T,D=1;const z=u[0];if(z==="array"){let j,Y;if(u.length>2){const ie=u[1];if(typeof ie!="string"||!(ie in Jt)||ie==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);j=Jt[ie],D++}else j=Pn;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return p.error('The length argument to "array" must be a positive integer literal',2);Y=u[2],D++}T=qt(j,Y)}else{if(!Jt[z])throw new Error(`Types doesn't contain name = ${z}`);T=Jt[z]}const F=[];for(;D<u.length;D++){const j=p.parse(u[D],D,Pn);if(!j)return null;F.push(j)}return new Ut(T,F)}evaluate(u){for(let p=0;p<this.args.length;p++){const T=this.args[p].evaluate(u);if(!hn(this.type,Qe(T)))return T;if(p===this.args.length-1)throw new wt(`Expected value to be of type ${Kt(this.type)}, but found ${Kt(Qe(T))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const xn={"to-boolean":In,"to-color":Ur,"to-number":Bt,"to-string":Rn};class nn{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");const T=u[0];if(!xn[T])throw new Error(`Can't parse ${T} as it is not part of the known types`);if((T==="to-boolean"||T==="to-string")&&u.length!==2)return p.error("Expected one argument.");const D=xn[T],z=[];for(let F=1;F<u.length;F++){const j=p.parse(u[F],F,Pn);if(!j)return null;z.push(j)}return new nn(D,z)}evaluate(u){if(this.type.kind==="boolean")return!!this.args[0].evaluate(u);if(this.type.kind==="color"){let p,T;for(const D of this.args){if(p=D.evaluate(u),T=null,p instanceof o)return p;if(typeof p=="string"){const z=u.parseColor(p);if(z)return z}else if(Array.isArray(p)&&(T=p.length<3||p.length>4?`Invalid rbga value ${JSON.stringify(p)}: expected an array containing either three or four numeric values.`:Ze(p[0],p[1],p[2],p[3]),!T))return new o(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new wt(T||`Could not parse color from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}if(this.type.kind==="padding"){let p;for(const T of this.args){p=T.evaluate(u);const D=Pe.parse(p);if(D)return D}throw new wt(`Could not parse padding from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}if(this.type.kind==="number"){let p=null;for(const T of this.args){if(p=T.evaluate(u),p===null)return 0;const D=Number(p);if(!isNaN(D))return D}throw new wt(`Could not convert ${JSON.stringify(p)} to number.`)}return this.type.kind==="formatted"?ke.fromString(ft(this.args[0].evaluate(u))):this.type.kind==="resolvedImage"?Le.fromString(ft(this.args[0].evaluate(u))):ft(this.args[0].evaluate(u))}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const pn=["Unknown","Point","LineString","Polygon"];class Bn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?pn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let p=this._parseColorCache[u];return p||(p=this._parseColorCache[u]=o.parse(u)),p}}class Vt{constructor(u,p,T,D){this.name=u,this.type=p,this._evaluate=T,this.args=D}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,p){const T=u[0],D=Vt.definitions[T];if(!D)return p.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(D)?D[0]:D.type,F=Array.isArray(D)?[[D[1],D[2]]]:D.overloads,j=F.filter(([ie])=>!Array.isArray(ie)||ie.length===u.length-1);let Y=null;for(const[ie,Ae]of j){Y=new Ct(p.registry,p.path,null,p.scope);const he=[];let ge=!1;for(let ve=1;ve<u.length;ve++){const xe=u[ve],Ge=Array.isArray(ie)?ie[ve-1]:ie.type,Ne=Y.parse(xe,1+he.length,Ge);if(!Ne){ge=!0;break}he.push(Ne)}if(!ge)if(Array.isArray(ie)&&ie.length!==he.length)Y.error(`Expected ${ie.length} arguments, but found ${he.length} instead.`);else{for(let ve=0;ve<he.length;ve++){const xe=Array.isArray(ie)?ie[ve]:ie.type,Ge=he[ve];Y.concat(ve+1).checkSubtype(xe,Ge.type)}if(Y.errors.length===0)return new Vt(T,z,Ae,he)}}if(j.length===1)p.errors.push(...Y.errors);else{const ie=(j.length?j:F).map(([he])=>{return ge=he,Array.isArray(ge)?`(${ge.map(Kt).join(", ")})`:`(${Kt(ge.type)}...)`;var ge}).join(" | "),Ae=[];for(let he=1;he<u.length;he++){const ge=p.parse(u[he],1+Ae.length);if(!ge)return null;Ae.push(Kt(ge.type))}p.error(`Expected arguments of type ${ie}, but found (${Ae.join(", ")}) instead.`)}return null}static register(u,p){Vt.definitions=p;for(const T in p)u[T]=Vt}}class Ue{constructor(u,p,T){this.type=ye,this.locale=T,this.caseSensitive=u,this.diacriticSensitive=p}static parse(u,p){if(u.length!==2)return p.error("Expected one argument.");const T=u[1];if(typeof T!="object"||Array.isArray(T))return p.error("Collator options argument must be an object.");const D=p.parse(T["case-sensitive"]!==void 0&&T["case-sensitive"],1,In);if(!D)return null;const z=p.parse(T["diacritic-sensitive"]!==void 0&&T["diacritic-sensitive"],1,In);if(!z)return null;let F=null;return T.locale&&(F=p.parse(T.locale,1,Rn),!F)?null:new Ue(D,z,F)}evaluate(u){return new G(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}const Dt=8192;function Ce(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function _n(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function yi(f,u){const p=(180+f[0])/360,T=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,D=Math.pow(2,u.z);return[Math.round(p*D*Dt),Math.round(T*D*Dt)]}function dr(f,u,p){const T=f[0]-u[0],D=f[1]-u[1],z=f[0]-p[0],F=f[1]-p[1];return T*F-z*D==0&&T*z<=0&&D*F<=0}function ha(f,u){let p=!1;for(let F=0,j=u.length;F<j;F++){const Y=u[F];for(let ie=0,Ae=Y.length;ie<Ae-1;ie++){if(dr(f,Y[ie],Y[ie+1]))return!1;(D=Y[ie])[1]>(T=f)[1]!=(z=Y[ie+1])[1]>T[1]&&T[0]<(z[0]-D[0])*(T[1]-D[1])/(z[1]-D[1])+D[0]&&(p=!p)}}var T,D,z;return p}function Re(f,u){for(let p=0;p<u.length;p++)if(ha(f,u[p]))return!0;return!1}function ja(f,u,p,T){const D=T[0]-p[0],z=T[1]-p[1],F=(f[0]-p[0])*z-D*(f[1]-p[1]),j=(u[0]-p[0])*z-D*(u[1]-p[1]);return F>0&&j<0||F<0&&j>0}function Ee(f,u,p){for(const ie of p)for(let Ae=0;Ae<ie.length-1;++Ae)if((j=[(F=ie[Ae+1])[0]-(z=ie[Ae])[0],F[1]-z[1]])[0]*(Y=[(D=u)[0]-(T=f)[0],D[1]-T[1]])[1]-j[1]*Y[0]!=0&&ja(T,D,z,F)&&ja(z,F,T,D))return!0;var T,D,z,F,j,Y;return!1}function jo(f,u){for(let p=0;p<f.length;++p)if(!ha(f[p],u))return!1;for(let p=0;p<f.length-1;++p)if(Ee(f[p],f[p+1],u))return!1;return!0}function Is(f,u){for(let p=0;p<u.length;p++)if(jo(f,u[p]))return!0;return!1}function $a(f,u,p){const T=[];for(let D=0;D<f.length;D++){const z=[];for(let F=0;F<f[D].length;F++){const j=yi(f[D][F],p);Ce(u,j),z.push(j)}T.push(z)}return T}function Ha(f,u,p){const T=[];for(let D=0;D<f.length;D++){const z=$a(f[D],u,p);T.push(z)}return T}function fa(f,u,p,T){if(f[0]<p[0]||f[0]>p[2]){const D=.5*T;let z=f[0]-p[0]>D?-T:p[0]-f[0]>D?T:0;z===0&&(z=f[0]-p[2]>D?-T:p[2]-f[0]>D?T:0),f[0]+=z}Ce(u,f)}function wl(f,u,p,T){const D=Math.pow(2,T.z)*Dt,z=[T.x*Dt,T.y*Dt],F=[];for(const j of f)for(const Y of j){const ie=[Y.x+z[0],Y.y+z[1]];fa(ie,u,p,D),F.push(ie)}return F}function da(f,u,p,T){const D=Math.pow(2,T.z)*Dt,z=[T.x*Dt,T.y*Dt],F=[];for(const Y of f){const ie=[];for(const Ae of Y){const he=[Ae.x+z[0],Ae.y+z[1]];Ce(u,he),ie.push(he)}F.push(ie)}if(u[2]-u[0]<=D/2){(j=u)[0]=j[1]=1/0,j[2]=j[3]=-1/0;for(const Y of F)for(const ie of Y)fa(ie,u,p,D)}var j;return F}class ui{constructor(u,p){this.type=In,this.geojson=u,this.geometries=p}static parse(u,p){if(u.length!==2)return p.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(lt(u[1])){const T=u[1];if(T.type==="FeatureCollection")for(let D=0;D<T.features.length;++D){const z=T.features[D].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new ui(T,T.features[D].geometry)}else if(T.type==="Feature"){const D=T.geometry.type;if(D==="Polygon"||D==="MultiPolygon")return new ui(T,T.geometry)}else if(T.type==="Polygon"||T.type==="MultiPolygon")return new ui(T,T)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(p,T){const D=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=p.canonicalID();if(T.type==="Polygon"){const j=$a(T.coordinates,z,F),Y=wl(p.geometry(),D,z,F);if(!_n(D,z))return!1;for(const ie of Y)if(!ha(ie,j))return!1}if(T.type==="MultiPolygon"){const j=Ha(T.coordinates,z,F),Y=wl(p.geometry(),D,z,F);if(!_n(D,z))return!1;for(const ie of Y)if(!Re(ie,j))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(p,T){const D=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=p.canonicalID();if(T.type==="Polygon"){const j=$a(T.coordinates,z,F),Y=da(p.geometry(),D,z,F);if(!_n(D,z))return!1;for(const ie of Y)if(!jo(ie,j))return!1}if(T.type==="MultiPolygon"){const j=Ha(T.coordinates,z,F),Y=da(p.geometry(),D,z,F);if(!_n(D,z))return!1;for(const ie of Y)if(!Is(ie,j))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function me(f){if(f instanceof Vt&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof ui)return!1;let u=!0;return f.eachChild(p=>{u&&!me(p)&&(u=!1)}),u}function Se(f){if(f instanceof Vt&&f.name==="feature-state")return!1;let u=!0;return f.eachChild(p=>{u&&!Se(p)&&(u=!1)}),u}function Ve(f,u){if(f instanceof Vt&&u.indexOf(f.name)>=0)return!1;let p=!0;return f.eachChild(T=>{p&&!Ve(T,u)&&(p=!1)}),p}class At{constructor(u,p){this.type=p.type,this.name=u,this.boundExpression=p}static parse(u,p){if(u.length!==2||typeof u[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");const T=u[1];return p.scope.has(T)?new At(T,p.scope.get(T)):p.error(`Unknown variable "${T}". Make sure "${T}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Ct{constructor(u,p=[],T,D=new ti,z=[]){this.registry=u,this.path=p,this.key=p.map(F=>`[${F}]`).join(""),this.scope=D,this.errors=z,this.expectedType=T}parse(u,p,T,D,z={}){return p?this.concat(p,T,D)._parse(u,z):this._parse(u,z)}_parse(u,p){function T(D,z,F){return F==="assert"?new Ut(z,[D]):F==="coerce"?new nn(z,[D]):D}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const D=u[0];if(typeof D!="string")return this.error(`Expression name must be a string, but found ${typeof D} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[D];if(z){let F=z.parse(u,this);if(!F)return null;if(this.expectedType){const j=this.expectedType,Y=F.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||Y.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||Y.kind!=="value"&&Y.kind!=="string")if(j.kind!=="padding"||Y.kind!=="value"&&Y.kind!=="number"&&Y.kind!=="array"){if(this.checkSubtype(j,Y))return null}else F=T(F,j,p.typeAnnotation||"coerce");else F=T(F,j,p.typeAnnotation||"coerce");else F=T(F,j,p.typeAnnotation||"assert")}if(!(F instanceof vt)&&F.type.kind!=="resolvedImage"&&tn(F)){const j=new Bn;try{F=new vt(F.type,F.evaluate(j))}catch(Y){return this.error(Y.message),null}}return F}return this.error(`Unknown expression "${D}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,p,T){const D=typeof u=="number"?this.path.concat(u):this.path,z=T?this.scope.concat(T):this.scope;return new Ct(this.registry,D,p||null,z,this.errors)}error(u,...p){const T=`${this.key}${p.map(D=>`[${D}]`).join("")}`;this.errors.push(new mi(T,u))}checkSubtype(u,p){const T=hn(u,p);return T&&this.error(T),T}}function tn(f){if(f instanceof At)return tn(f.boundExpression);if(f instanceof Vt&&f.name==="error"||f instanceof Ue||f instanceof ui)return!1;const u=f instanceof nn||f instanceof Ut;let p=!0;return f.eachChild(T=>{p=u?p&&tn(T):p&&T instanceof vt}),!!p&&me(f)&&Ve(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Hn(f,u){const p=f.length-1;let T,D,z=0,F=p,j=0;for(;z<=F;)if(j=Math.floor((z+F)/2),T=f[j],D=f[j+1],T<=u){if(j===p||u<D)return j;z=j+1}else{if(!(T>u))throw new wt("Input is not a number.");F=j-1}return 0}class Gr{constructor(u,p,T){this.type=u,this.input=p,this.labels=[],this.outputs=[];for(const[D,z]of T)this.labels.push(D),this.outputs.push(z)}static parse(u,p){if(u.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return p.error("Expected an even number of arguments.");const T=p.parse(u[1],1,Bt);if(!T)return null;const D=[];let z=null;p.expectedType&&p.expectedType.kind!=="value"&&(z=p.expectedType);for(let F=1;F<u.length;F+=2){const j=F===1?-1/0:u[F],Y=u[F+1],ie=F,Ae=F+1;if(typeof j!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(D.length&&D[D.length-1][0]>=j)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ie);const he=p.parse(Y,Ae,z);if(!he)return null;z=z||he.type,D.push([j,he])}return new Gr(z,T,D)}evaluate(u){const p=this.labels,T=this.outputs;if(p.length===1)return T[0].evaluate(u);const D=this.input.evaluate(u);if(D<=p[0])return T[0].evaluate(u);const z=p.length;return D>=p[z-1]?T[z-1].evaluate(u):T[Hn(p,D)].evaluate(u)}eachChild(u){u(this.input);for(const p of this.outputs)u(p)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function An(f,u,p){return f*(1-p)+u*p}var jr=Object.freeze({__proto__:null,number:An,color:function(f,u,p){return new o(An(f.r,u.r,p),An(f.g,u.g,p),An(f.b,u.b,p),An(f.a,u.a,p))},array:function(f,u,p){return f.map((T,D)=>An(T,u[D],p))},padding:function(f,u,p){const T=f.values,D=u.values;return new Pe([An(T[0],D[0],p),An(T[1],D[1],p),An(T[2],D[2],p),An(T[3],D[3],p)])}});const tr=.95047,fA=1.08883,dA=4/29,pA=6/29,YA=3*pA*pA,XA=Math.PI/180,gA=180/Math.PI;function bl(f){return f>.008856451679035631?Math.pow(f,1/3):f/YA+dA}function El(f){return f>pA?f*f*f:YA*(f-dA)}function mA(f){return 255*(f<=.0031308?12.92*f:1.055*Math.pow(f,1/2.4)-.055)}function yA(f){return(f/=255)<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function ur(f){const u=yA(f.r),p=yA(f.g),T=yA(f.b),D=bl((.4124564*u+.3575761*p+.1804375*T)/tr),z=bl((.2126729*u+.7151522*p+.072175*T)/1);return{l:116*z-16,a:500*(D-z),b:200*(z-bl((.0193339*u+.119192*p+.9503041*T)/fA)),alpha:f.a}}function KA(f){let u=(f.l+16)/116,p=isNaN(f.a)?u:u+f.a/500,T=isNaN(f.b)?u:u-f.b/200;return u=1*El(u),p=tr*El(p),T=fA*El(T),new o(mA(3.2404542*p-1.5371385*u-.4985314*T),mA(-.969266*p+1.8760108*u+.041556*T),mA(.0556434*p-.2040259*u+1.0572252*T),f.alpha)}function sc(f,u,p){const T=u-f;return f+p*(T>180||T<-180?T-360*Math.round(T/360):T)}const Tl={forward:ur,reverse:KA,interpolate:function(f,u,p){return{l:An(f.l,u.l,p),a:An(f.a,u.a,p),b:An(f.b,u.b,p),alpha:An(f.alpha,u.alpha,p)}}},ni={forward:function(f){const{l:u,a:p,b:T}=ur(f),D=Math.atan2(T,p)*gA;return{h:D<0?D+360:D,c:Math.sqrt(p*p+T*T),l:u,alpha:f.a}},reverse:function(f){const u=f.h*XA,p=f.c;return KA({l:f.l,a:Math.cos(u)*p,b:Math.sin(u)*p,alpha:f.alpha})},interpolate:function(f,u,p){return{h:sc(f.h,u.h,p),c:An(f.c,u.c,p),l:An(f.l,u.l,p),alpha:An(f.alpha,u.alpha,p)}}};var $o=Object.freeze({__proto__:null,lab:Tl,hcl:ni});class qn{constructor(u,p,T,D,z){this.type=u,this.operator=p,this.interpolation=T,this.input=D,this.labels=[],this.outputs=[];for(const[F,j]of z)this.labels.push(F),this.outputs.push(j)}static interpolationFactor(u,p,T,D){let z=0;if(u.name==="exponential")z=ks(p,u.base,T,D);else if(u.name==="linear")z=ks(p,1,T,D);else if(u.name==="cubic-bezier"){const F=u.controlPoints;z=new y(F[0],F[1],F[2],F[3]).solve(ks(p,1,T,D))}return z}static parse(u,p){let[T,D,z,...F]=u;if(!Array.isArray(D)||D.length===0)return p.error("Expected an interpolation type expression.",1);if(D[0]==="linear")D={name:"linear"};else if(D[0]==="exponential"){const ie=D[1];if(typeof ie!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);D={name:"exponential",base:ie}}else{if(D[0]!=="cubic-bezier")return p.error(`Unknown interpolation type ${String(D[0])}`,1,0);{const ie=D.slice(1);if(ie.length!==4||ie.some(Ae=>typeof Ae!="number"||Ae<0||Ae>1))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);D={name:"cubic-bezier",controlPoints:ie}}}if(u.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(z=p.parse(z,2,Bt),!z)return null;const j=[];let Y=null;T==="interpolate-hcl"||T==="interpolate-lab"?Y=Ur:p.expectedType&&p.expectedType.kind!=="value"&&(Y=p.expectedType);for(let ie=0;ie<F.length;ie+=2){const Ae=F[ie],he=F[ie+1],ge=ie+3,ve=ie+4;if(typeof Ae!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ge);if(j.length&&j[j.length-1][0]>=Ae)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ge);const xe=p.parse(he,ve,Y);if(!xe)return null;Y=Y||xe.type,j.push([Ae,xe])}return Y.kind==="number"||Y.kind==="color"||Y.kind==="padding"||Y.kind==="array"&&Y.itemType.kind==="number"&&typeof Y.N=="number"?new qn(Y,T,D,z,j):p.error(`Type ${Kt(Y)} is not interpolatable.`)}evaluate(u){const p=this.labels,T=this.outputs;if(p.length===1)return T[0].evaluate(u);const D=this.input.evaluate(u);if(D<=p[0])return T[0].evaluate(u);const z=p.length;if(D>=p[z-1])return T[z-1].evaluate(u);const F=Hn(p,D),j=qn.interpolationFactor(this.interpolation,D,p[F],p[F+1]),Y=T[F].evaluate(u),ie=T[F+1].evaluate(u);return this.operator==="interpolate"?jr[this.type.kind.toLowerCase()](Y,ie,j):this.operator==="interpolate-hcl"?ni.reverse(ni.interpolate(ni.forward(Y),ni.forward(ie),j)):Tl.reverse(Tl.interpolate(Tl.forward(Y),Tl.forward(ie),j))}eachChild(u){u(this.input);for(const p of this.outputs)u(p)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function ks(f,u,p,T){const D=T-p,z=f-p;return D===0?0:u===1?z/D:(Math.pow(u,z)-1)/(Math.pow(u,D)-1)}class ci{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expectected at least one argument.");let T=null;const D=p.expectedType;D&&D.kind!=="value"&&(T=D);const z=[];for(const j of u.slice(1)){const Y=p.parse(j,1+z.length,T,void 0,{typeAnnotation:"omit"});if(!Y)return null;T=T||Y.type,z.push(Y)}if(!T)throw new Error("No output type");const F=D&&z.some(j=>hn(D,j.type));return new ci(F?Pn:T,z)}evaluate(u){let p,T=null,D=0;for(const z of this.args)if(D++,T=z.evaluate(u),T&&T instanceof Le&&!T.available&&(p||(p=T.name),T=null,D===this.args.length&&(T=p)),T!==null)break;return T}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}class vo{constructor(u,p){this.type=p.type,this.bindings=[].concat(u),this.result=p}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const p of this.bindings)u(p[1]);u(this.result)}static parse(u,p){if(u.length<4)return p.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const T=[];for(let z=1;z<u.length-1;z+=2){const F=u[z];if(typeof F!="string")return p.error(`Expected string, but found ${typeof F} instead.`,z);if(/[^a-zA-Z0-9_]/.test(F))return p.error("Variable names must contain only alphanumeric characters or '_'.",z);const j=p.parse(u[z+1],z+1);if(!j)return null;T.push([F,j])}const D=p.parse(u[u.length-1],u.length-1,p.expectedType,T);return D?new vo(T,D):null}outputDefined(){return this.result.outputDefined()}}class Sl{constructor(u,p,T){this.type=u,this.index=p,this.input=T}static parse(u,p){if(u.length!==3)return p.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const T=p.parse(u[1],1,Bt),D=p.parse(u[2],2,qt(p.expectedType||Pn));return T&&D?new Sl(D.type.itemType,T,D):null}evaluate(u){const p=this.index.evaluate(u),T=this.input.evaluate(u);if(p<0)throw new wt(`Array index out of bounds: ${p} < 0.`);if(p>=T.length)throw new wt(`Array index out of bounds: ${p} > ${T.length-1}.`);if(p!==Math.floor(p))throw new wt(`Array index must be an integer, but found ${p} instead.`);return T[p]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Ho{constructor(u,p){this.type=In,this.needle=u,this.haystack=p}static parse(u,p){if(u.length!==3)return p.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const T=p.parse(u[1],1,Pn),D=p.parse(u[2],2,Pn);return T&&D?an(T.type,[In,Rn,Bt,$i,Pn])?new Ho(T,D):p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kt(T.type)} instead`):null}evaluate(u){const p=this.needle.evaluate(u),T=this.haystack.evaluate(u);if(!T)return!1;if(!Dn(p,["boolean","string","number","null"]))throw new wt(`Expected first argument to be of type boolean, string, number or null, but found ${Kt(Qe(p))} instead.`);if(!Dn(T,["string","array"]))throw new wt(`Expected second argument to be of type array or string, but found ${Kt(Qe(T))} instead.`);return T.indexOf(p)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class pa{constructor(u,p,T){this.type=Bt,this.needle=u,this.haystack=p,this.fromIndex=T}static parse(u,p){if(u.length<=2||u.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const T=p.parse(u[1],1,Pn),D=p.parse(u[2],2,Pn);if(!T||!D)return null;if(!an(T.type,[In,Rn,Bt,$i,Pn]))return p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kt(T.type)} instead`);if(u.length===4){const z=p.parse(u[3],3,Bt);return z?new pa(T,D,z):null}return new pa(T,D)}evaluate(u){const p=this.needle.evaluate(u),T=this.haystack.evaluate(u);if(!Dn(p,["boolean","string","number","null"]))throw new wt(`Expected first argument to be of type boolean, string, number or null, but found ${Kt(Qe(p))} instead.`);if(!Dn(T,["string","array"]))throw new wt(`Expected second argument to be of type array or string, but found ${Kt(Qe(T))} instead.`);if(this.fromIndex){const D=this.fromIndex.evaluate(u);return T.indexOf(p,D)}return T.indexOf(p)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class xo{constructor(u,p,T,D,z,F){this.inputType=u,this.type=p,this.input=T,this.cases=D,this.outputs=z,this.otherwise=F}static parse(u,p){if(u.length<5)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return p.error("Expected an even number of arguments.");let T,D;p.expectedType&&p.expectedType.kind!=="value"&&(D=p.expectedType);const z={},F=[];for(let ie=2;ie<u.length-1;ie+=2){let Ae=u[ie];const he=u[ie+1];Array.isArray(Ae)||(Ae=[Ae]);const ge=p.concat(ie);if(Ae.length===0)return ge.error("Expected at least one branch label.");for(const xe of Ae){if(typeof xe!="number"&&typeof xe!="string")return ge.error("Branch labels must be numbers or strings.");if(typeof xe=="number"&&Math.abs(xe)>Number.MAX_SAFE_INTEGER)return ge.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof xe=="number"&&Math.floor(xe)!==xe)return ge.error("Numeric branch labels must be integer values.");if(T){if(ge.checkSubtype(T,Qe(xe)))return null}else T=Qe(xe);if(z[String(xe)]!==void 0)return ge.error("Branch labels must be unique.");z[String(xe)]=F.length}const ve=p.parse(he,ie,D);if(!ve)return null;D=D||ve.type,F.push(ve)}const j=p.parse(u[1],1,Pn);if(!j)return null;const Y=p.parse(u[u.length-1],u.length-1,D);return Y?j.type.kind!=="value"&&p.concat(1).checkSubtype(T,j.type)?null:new xo(T,D,j,z,F,Y):null}evaluate(u){const p=this.input.evaluate(u);return(Qe(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class _A{constructor(u,p,T){this.type=u,this.branches=p,this.otherwise=T}static parse(u,p){if(u.length<4)return p.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return p.error("Expected an odd number of arguments.");let T;p.expectedType&&p.expectedType.kind!=="value"&&(T=p.expectedType);const D=[];for(let F=1;F<u.length-1;F+=2){const j=p.parse(u[F],F,In);if(!j)return null;const Y=p.parse(u[F+1],F+1,T);if(!Y)return null;D.push([j,Y]),T=T||Y.type}const z=p.parse(u[u.length-1],u.length-1,T);if(!z)return null;if(!T)throw new Error("Can't infer output type");return new _A(T,D,z)}evaluate(u){for(const[p,T]of this.branches)if(p.evaluate(u))return T.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[p,T]of this.branches)u(p),u(T);u(this.otherwise)}outputDefined(){return this.branches.every(([u,p])=>p.outputDefined())&&this.otherwise.outputDefined()}}class Wa{constructor(u,p,T,D){this.type=u,this.input=p,this.beginIndex=T,this.endIndex=D}static parse(u,p){if(u.length<=2||u.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const T=p.parse(u[1],1,Pn),D=p.parse(u[2],2,Bt);if(!T||!D)return null;if(!an(T.type,[qt(Pn),Rn,Pn]))return p.error(`Expected first argument to be of type array or string, but found ${Kt(T.type)} instead`);if(u.length===4){const z=p.parse(u[3],3,Bt);return z?new Wa(T.type,T,D,z):null}return new Wa(T.type,T,D)}evaluate(u){const p=this.input.evaluate(u),T=this.beginIndex.evaluate(u);if(!Dn(p,["string","array"]))throw new wt(`Expected first argument to be of type array or string, but found ${Kt(Qe(p))} instead.`);if(this.endIndex){const D=this.endIndex.evaluate(u);return p.slice(T,D)}return p.slice(T)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Wo(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Ki(f,u,p,T){return T.compare(u,p)===0}function Ji(f,u,p){const T=f!=="=="&&f!=="!=";return class Ez{constructor(z,F,j){this.type=In,this.lhs=z,this.rhs=F,this.collator=j,this.hasUntypedArgument=z.type.kind==="value"||F.type.kind==="value"}static parse(z,F){if(z.length!==3&&z.length!==4)return F.error("Expected two or three arguments.");const j=z[0];let Y=F.parse(z[1],1,Pn);if(!Y)return null;if(!Wo(j,Y.type))return F.concat(1).error(`"${j}" comparisons are not supported for type '${Kt(Y.type)}'.`);let ie=F.parse(z[2],2,Pn);if(!ie)return null;if(!Wo(j,ie.type))return F.concat(2).error(`"${j}" comparisons are not supported for type '${Kt(ie.type)}'.`);if(Y.type.kind!==ie.type.kind&&Y.type.kind!=="value"&&ie.type.kind!=="value")return F.error(`Cannot compare types '${Kt(Y.type)}' and '${Kt(ie.type)}'.`);T&&(Y.type.kind==="value"&&ie.type.kind!=="value"?Y=new Ut(ie.type,[Y]):Y.type.kind!=="value"&&ie.type.kind==="value"&&(ie=new Ut(Y.type,[ie])));let Ae=null;if(z.length===4){if(Y.type.kind!=="string"&&ie.type.kind!=="string"&&Y.type.kind!=="value"&&ie.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(Ae=F.parse(z[3],3,ye),!Ae)return null}return new Ez(Y,ie,Ae)}evaluate(z){const F=this.lhs.evaluate(z),j=this.rhs.evaluate(z);if(T&&this.hasUntypedArgument){const Y=Qe(F),ie=Qe(j);if(Y.kind!==ie.kind||Y.kind!=="string"&&Y.kind!=="number")throw new wt(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${Y.kind}, ${ie.kind}) instead.`)}if(this.collator&&!T&&this.hasUntypedArgument){const Y=Qe(F),ie=Qe(j);if(Y.kind!=="string"||ie.kind!=="string")return u(z,F,j)}return this.collator?p(z,F,j,this.collator.evaluate(z)):u(z,F,j)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const JA=Ji("==",function(f,u,p){return u===p},Ki),Ml=Ji("!=",function(f,u,p){return u!==p},function(f,u,p,T){return!Ki(0,u,p,T)}),wo=Ji("<",function(f,u,p){return u<p},function(f,u,p,T){return T.compare(u,p)<0}),Qo=Ji(">",function(f,u,p){return u>p},function(f,u,p,T){return T.compare(u,p)>0}),oc=Ji("<=",function(f,u,p){return u<=p},function(f,u,p,T){return T.compare(u,p)<=0}),eu=Ji(">=",function(f,u,p){return u>=p},function(f,u,p,T){return T.compare(u,p)>=0});class Cl{constructor(u,p,T,D,z){this.type=Rn,this.number=u,this.locale=p,this.currency=T,this.minFractionDigits=D,this.maxFractionDigits=z}static parse(u,p){if(u.length!==3)return p.error("Expected two arguments.");const T=p.parse(u[1],1,Bt);if(!T)return null;const D=u[2];if(typeof D!="object"||Array.isArray(D))return p.error("NumberFormat options argument must be an object.");let z=null;if(D.locale&&(z=p.parse(D.locale,1,Rn),!z))return null;let F=null;if(D.currency&&(F=p.parse(D.currency,1,Rn),!F))return null;let j=null;if(D["min-fraction-digits"]&&(j=p.parse(D["min-fraction-digits"],1,Bt),!j))return null;let Y=null;return D["max-fraction-digits"]&&(Y=p.parse(D["max-fraction-digits"],1,Bt),!Y)?null:new Cl(T,z,F,j,Y)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class vA{constructor(u){this.type=ot,this.sections=u}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");const T=u[1];if(!Array.isArray(T)&&typeof T=="object")return p.error("First argument must be an image or text section.");const D=[];let z=!1;for(let F=1;F<=u.length-1;++F){const j=u[F];if(z&&typeof j=="object"&&!Array.isArray(j)){z=!1;let Y=null;if(j["font-scale"]&&(Y=p.parse(j["font-scale"],1,Bt),!Y))return null;let ie=null;if(j["text-font"]&&(ie=p.parse(j["text-font"],1,qt(Rn)),!ie))return null;let Ae=null;if(j["text-color"]&&(Ae=p.parse(j["text-color"],1,Ur),!Ae))return null;const he=D[D.length-1];he.scale=Y,he.font=ie,he.textColor=Ae}else{const Y=p.parse(u[F],1,Pn);if(!Y)return null;const ie=Y.type.kind;if(ie!=="string"&&ie!=="value"&&ie!=="null"&&ie!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,D.push({content:Y,scale:null,font:null,textColor:null})}}return new vA(D)}evaluate(u){return new ke(this.sections.map(p=>{const T=p.content.evaluate(u);return Qe(T)===Lt?new De("",T,null,null,null):new De(ft(T),null,p.scale?p.scale.evaluate(u):null,p.font?p.font.evaluate(u).join(","):null,p.textColor?p.textColor.evaluate(u):null)}))}eachChild(u){for(const p of this.sections)u(p.content),p.scale&&u(p.scale),p.font&&u(p.font),p.textColor&&u(p.textColor)}outputDefined(){return!1}}class tu{constructor(u){this.type=Lt,this.input=u}static parse(u,p){if(u.length!==2)return p.error("Expected two arguments.");const T=p.parse(u[1],1,Rn);return T?new tu(T):p.error("No image name provided.")}evaluate(u){const p=this.input.evaluate(u),T=Le.fromString(p);return T&&u.availableImages&&(T.available=u.availableImages.indexOf(p)>-1),T}eachChild(u){u(this.input)}outputDefined(){return!1}}class qo{constructor(u){this.type=Bt,this.input=u}static parse(u,p){if(u.length!==2)return p.error(`Expected 1 argument, but found ${u.length-1} instead.`);const T=p.parse(u[1],1);return T?T.type.kind!=="array"&&T.type.kind!=="string"&&T.type.kind!=="value"?p.error(`Expected argument of type string or array, but found ${Kt(T.type)} instead.`):new qo(T):null}evaluate(u){const p=this.input.evaluate(u);if(typeof p=="string"||Array.isArray(p))return p.length;throw new wt(`Expected value to be of type string or array, but found ${Kt(Qe(p))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Qa={"==":JA,"!=":Ml,">":Qo,"<":wo,">=":eu,"<=":oc,array:Ut,at:Sl,boolean:Ut,case:_A,coalesce:ci,collator:Ue,format:vA,image:tu,in:Ho,"index-of":pa,interpolate:qn,"interpolate-hcl":qn,"interpolate-lab":qn,length:qo,let:vo,literal:vt,match:xo,number:Ut,"number-format":Cl,object:Ut,slice:Wa,step:Gr,string:Ut,"to-boolean":nn,"to-color":nn,"to-number":nn,"to-string":nn,var:At,within:ui};function nu(f,[u,p,T,D]){u=u.evaluate(f),p=p.evaluate(f),T=T.evaluate(f);const z=D?D.evaluate(f):1,F=Ze(u,p,T,z);if(F)throw new wt(F);return new o(u/255*z,p/255*z,T/255*z,z)}function ru(f,u){return f in u}function bo(f,u){const p=u[f];return p===void 0?null:p}function ga(f){return{type:f}}function iu(f){return{result:"success",value:f}}function ma(f){return{result:"error",value:f}}function Tr(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function $s(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function nr(f){return!!f.expression&&f.expression.interpolated}function or(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Br(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Mr(f){return f}function Pl(f,u){const p=u.type==="color",T=f.stops&&typeof f.stops[0][0]=="object",D=T||!(T||f.property!==void 0),z=f.type||(nr(u)?"exponential":"interval");if(p||u.type==="padding"){const ie=p?o.parse:Pe.parse;(f=Ai({},f)).stops&&(f.stops=f.stops.map(Ae=>[Ae[0],ie(Ae[1])])),f.default=ie(f.default?f.default:u.default)}if(f.colorSpace&&f.colorSpace!=="rgb"&&!$o[f.colorSpace])throw new Error(`Unknown color space: ${f.colorSpace}`);let F,j,Y;if(z==="exponential")F=lc;else if(z==="interval")F=qa;else if(z==="categorical"){F=ac,j=Object.create(null);for(const ie of f.stops)j[ie[0]]=ie[1];Y=typeof f.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);F=su}if(T){const ie={},Ae=[];for(let ve=0;ve<f.stops.length;ve++){const xe=f.stops[ve],Ge=xe[0].zoom;ie[Ge]===void 0&&(ie[Ge]={zoom:Ge,type:f.type,property:f.property,default:f.default,stops:[]},Ae.push(Ge)),ie[Ge].stops.push([xe[0].value,xe[1]])}const he=[];for(const ve of Ae)he.push([ie[ve].zoom,Pl(ie[ve],u)]);const ge={name:"linear"};return{kind:"composite",interpolationType:ge,interpolationFactor:qn.interpolationFactor.bind(void 0,ge),zoomStops:he.map(ve=>ve[0]),evaluate:({zoom:ve},xe)=>lc({stops:he,base:f.base},u,ve).evaluate(ve,xe)}}if(D){const ie=z==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ie,interpolationFactor:qn.interpolationFactor.bind(void 0,ie),zoomStops:f.stops.map(Ae=>Ae[0]),evaluate:({zoom:Ae})=>F(f,u,Ae,j,Y)}}return{kind:"source",evaluate(ie,Ae){const he=Ae&&Ae.properties?Ae.properties[f.property]:void 0;return he===void 0?Zo(f.default,u.default):F(f,u,he,j,Y)}}}function Zo(f,u,p){return f!==void 0?f:u!==void 0?u:p!==void 0?p:void 0}function ac(f,u,p,T,D){return Zo(typeof p===D?T[p]:void 0,f.default,u.default)}function qa(f,u,p){if(or(p)!=="number")return Zo(f.default,u.default);const T=f.stops.length;if(T===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[T-1][0])return f.stops[T-1][1];const D=Hn(f.stops.map(z=>z[0]),p);return f.stops[D][1]}function lc(f,u,p){const T=f.base!==void 0?f.base:1;if(or(p)!=="number")return Zo(f.default,u.default);const D=f.stops.length;if(D===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[D-1][0])return f.stops[D-1][1];const z=Hn(f.stops.map(Ae=>Ae[0]),p),F=function(Ae,he,ge,ve){const xe=ve-ge,Ge=Ae-ge;return xe===0?0:he===1?Ge/xe:(Math.pow(he,Ge)-1)/(Math.pow(he,xe)-1)}(p,T,f.stops[z][0],f.stops[z+1][0]),j=f.stops[z][1],Y=f.stops[z+1][1];let ie=jr[u.type]||Mr;if(f.colorSpace&&f.colorSpace!=="rgb"){const Ae=$o[f.colorSpace];ie=(he,ge)=>Ae.reverse(Ae.interpolate(Ae.forward(he),Ae.forward(ge),F))}return typeof j.evaluate=="function"?{evaluate(...Ae){const he=j.evaluate.apply(void 0,Ae),ge=Y.evaluate.apply(void 0,Ae);if(he!==void 0&&ge!==void 0)return ie(he,ge,F)}}:ie(j,Y,F)}function su(f,u,p){switch(u.type){case"color":p=o.parse(p);break;case"formatted":p=ke.fromString(p.toString());break;case"resolvedImage":p=Le.fromString(p.toString());break;case"padding":p=Pe.parse(p);break;default:or(p)===u.type||u.type==="enum"&&u.values[p]||(p=void 0)}return Zo(p,f.default,u.default)}Vt.register(Qa,{error:[{kind:"error"},[Rn],(f,[u])=>{throw new wt(u.evaluate(f))}],typeof:[Rn,[Pn],(f,[u])=>Kt(Qe(u.evaluate(f)))],"to-rgba":[qt(Bt,4),[Ur],(f,[u])=>u.evaluate(f).toArray()],rgb:[Ur,[Bt,Bt,Bt],nu],rgba:[Ur,[Bt,Bt,Bt,Bt],nu],has:{type:In,overloads:[[[Rn],(f,[u])=>ru(u.evaluate(f),f.properties())],[[Rn,Xi],(f,[u,p])=>ru(u.evaluate(f),p.evaluate(f))]]},get:{type:Pn,overloads:[[[Rn],(f,[u])=>bo(u.evaluate(f),f.properties())],[[Rn,Xi],(f,[u,p])=>bo(u.evaluate(f),p.evaluate(f))]]},"feature-state":[Pn,[Rn],(f,[u])=>bo(u.evaluate(f),f.featureState||{})],properties:[Xi,[],f=>f.properties()],"geometry-type":[Rn,[],f=>f.geometryType()],id:[Pn,[],f=>f.id()],zoom:[Bt,[],f=>f.globals.zoom],"heatmap-density":[Bt,[],f=>f.globals.heatmapDensity||0],"line-progress":[Bt,[],f=>f.globals.lineProgress||0],accumulated:[Pn,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Bt,ga(Bt),(f,u)=>{let p=0;for(const T of u)p+=T.evaluate(f);return p}],"*":[Bt,ga(Bt),(f,u)=>{let p=1;for(const T of u)p*=T.evaluate(f);return p}],"-":{type:Bt,overloads:[[[Bt,Bt],(f,[u,p])=>u.evaluate(f)-p.evaluate(f)],[[Bt],(f,[u])=>-u.evaluate(f)]]},"/":[Bt,[Bt,Bt],(f,[u,p])=>u.evaluate(f)/p.evaluate(f)],"%":[Bt,[Bt,Bt],(f,[u,p])=>u.evaluate(f)%p.evaluate(f)],ln2:[Bt,[],()=>Math.LN2],pi:[Bt,[],()=>Math.PI],e:[Bt,[],()=>Math.E],"^":[Bt,[Bt,Bt],(f,[u,p])=>Math.pow(u.evaluate(f),p.evaluate(f))],sqrt:[Bt,[Bt],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[Bt,[Bt],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[Bt,[Bt],(f,[u])=>Math.log(u.evaluate(f))],log2:[Bt,[Bt],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[Bt,[Bt],(f,[u])=>Math.sin(u.evaluate(f))],cos:[Bt,[Bt],(f,[u])=>Math.cos(u.evaluate(f))],tan:[Bt,[Bt],(f,[u])=>Math.tan(u.evaluate(f))],asin:[Bt,[Bt],(f,[u])=>Math.asin(u.evaluate(f))],acos:[Bt,[Bt],(f,[u])=>Math.acos(u.evaluate(f))],atan:[Bt,[Bt],(f,[u])=>Math.atan(u.evaluate(f))],min:[Bt,ga(Bt),(f,u)=>Math.min(...u.map(p=>p.evaluate(f)))],max:[Bt,ga(Bt),(f,u)=>Math.max(...u.map(p=>p.evaluate(f)))],abs:[Bt,[Bt],(f,[u])=>Math.abs(u.evaluate(f))],round:[Bt,[Bt],(f,[u])=>{const p=u.evaluate(f);return p<0?-Math.round(-p):Math.round(p)}],floor:[Bt,[Bt],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[Bt,[Bt],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[In,[Rn,Pn],(f,[u,p])=>f.properties()[u.value]===p.value],"filter-id-==":[In,[Pn],(f,[u])=>f.id()===u.value],"filter-type-==":[In,[Rn],(f,[u])=>f.geometryType()===u.value],"filter-<":[In,[Rn,Pn],(f,[u,p])=>{const T=f.properties()[u.value],D=p.value;return typeof T==typeof D&&T<D}],"filter-id-<":[In,[Pn],(f,[u])=>{const p=f.id(),T=u.value;return typeof p==typeof T&&p<T}],"filter->":[In,[Rn,Pn],(f,[u,p])=>{const T=f.properties()[u.value],D=p.value;return typeof T==typeof D&&T>D}],"filter-id->":[In,[Pn],(f,[u])=>{const p=f.id(),T=u.value;return typeof p==typeof T&&p>T}],"filter-<=":[In,[Rn,Pn],(f,[u,p])=>{const T=f.properties()[u.value],D=p.value;return typeof T==typeof D&&T<=D}],"filter-id-<=":[In,[Pn],(f,[u])=>{const p=f.id(),T=u.value;return typeof p==typeof T&&p<=T}],"filter->=":[In,[Rn,Pn],(f,[u,p])=>{const T=f.properties()[u.value],D=p.value;return typeof T==typeof D&&T>=D}],"filter-id->=":[In,[Pn],(f,[u])=>{const p=f.id(),T=u.value;return typeof p==typeof T&&p>=T}],"filter-has":[In,[Pn],(f,[u])=>u.value in f.properties()],"filter-has-id":[In,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[In,[qt(Rn)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[In,[qt(Pn)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[In,[Rn,qt(Pn)],(f,[u,p])=>p.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[In,[Rn,qt(Pn)],(f,[u,p])=>function(T,D,z,F){for(;z<=F;){const j=z+F>>1;if(D[j]===T)return!0;D[j]>T?F=j-1:z=j+1}return!1}(f.properties()[u.value],p.value,0,p.value.length-1)],all:{type:In,overloads:[[[In,In],(f,[u,p])=>u.evaluate(f)&&p.evaluate(f)],[ga(In),(f,u)=>{for(const p of u)if(!p.evaluate(f))return!1;return!0}]]},any:{type:In,overloads:[[[In,In],(f,[u,p])=>u.evaluate(f)||p.evaluate(f)],[ga(In),(f,u)=>{for(const p of u)if(p.evaluate(f))return!0;return!1}]]},"!":[In,[In],(f,[u])=>!u.evaluate(f)],"is-supported-script":[In,[Rn],(f,[u])=>{const p=f.globals&&f.globals.isSupportedScript;return!p||p(u.evaluate(f))}],upcase:[Rn,[Rn],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Rn,[Rn],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Rn,ga(Pn),(f,u)=>u.map(p=>ft(p.evaluate(f))).join("")],"resolved-locale":[Rn,[ye],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Hs{constructor(u,p){this.expression=u,this._warningHistory={},this._evaluator=new Bn,this._defaultValue=p?function(T){return T.type==="color"&&Br(T.default)?new o(0,0,0,0):T.type==="color"?o.parse(T.default)||null:T.type==="padding"?Pe.parse(T.default)||null:T.default===void 0?null:T.default}(p):null,this._enumValues=p&&p.type==="enum"?p.values:null}evaluateWithoutErrorHandling(u,p,T,D,z,F){return this._evaluator.globals=u,this._evaluator.feature=p,this._evaluator.featureState=T,this._evaluator.canonical=D,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(u,p,T,D,z,F){this._evaluator.globals=u,this._evaluator.feature=p||null,this._evaluator.featureState=T||null,this._evaluator.canonical=D,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F||null;try{const j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new wt(`Expected value to be one of ${Object.keys(this._enumValues).map(Y=>JSON.stringify(Y)).join(", ")}, but found ${JSON.stringify(j)} instead.`);return j}catch(j){return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"&&console.warn(j.message)),this._defaultValue}}}function Il(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Qa}function Za(f,u){const p=new Ct(Qa,[],u?function(D){const z={color:Ur,string:Rn,number:Bt,enum:Rn,boolean:In,formatted:ot,padding:gt,resolvedImage:Lt};return D.type==="array"?qt(z[D.value]||Pn,D.length):z[D.type]}(u):void 0),T=p.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return T?iu(new Hs(T,u)):ma(p.errors)}class ya{constructor(u,p){this.kind=u,this._styleExpression=p,this.isStateDependent=u!=="constant"&&!Se(p.expression)}evaluateWithoutErrorHandling(u,p,T,D,z,F){return this._styleExpression.evaluateWithoutErrorHandling(u,p,T,D,z,F)}evaluate(u,p,T,D,z,F){return this._styleExpression.evaluate(u,p,T,D,z,F)}}class kl{constructor(u,p,T,D){this.kind=u,this.zoomStops=T,this._styleExpression=p,this.isStateDependent=u!=="camera"&&!Se(p.expression),this.interpolationType=D}evaluateWithoutErrorHandling(u,p,T,D,z,F){return this._styleExpression.evaluateWithoutErrorHandling(u,p,T,D,z,F)}evaluate(u,p,T,D,z,F){return this._styleExpression.evaluate(u,p,T,D,z,F)}interpolationFactor(u,p,T){return this.interpolationType?qn.interpolationFactor(this.interpolationType,u,p,T):0}}function Ll(f,u){const p=Za(f,u);if(p.result==="error")return p;const T=p.value.expression,D=me(T);if(!D&&!Tr(u))return ma([new mi("","data expressions not supported")]);const z=Ve(T,["zoom"]);if(!z&&!$s(u))return ma([new mi("","zoom expressions not supported")]);const F=xA(T);return F||z?F instanceof mi?ma([F]):F instanceof qn&&!nr(u)?ma([new mi("",'"interpolate" expressions cannot be used with this property')]):iu(F?new kl(D?"camera":"composite",p.value,F.labels,F instanceof qn?F.interpolation:void 0):new ya(D?"constant":"source",p.value)):ma([new mi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Cr{constructor(u,p){this._parameters=u,this._specification=p,Ai(this,Pl(this._parameters,this._specification))}static deserialize(u){return new Cr(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function xA(f){let u=null;if(f instanceof vo)u=xA(f.result);else if(f instanceof ci){for(const p of f.args)if(u=xA(p),u)break}else(f instanceof Gr||f instanceof qn)&&f.input instanceof Vt&&f.input.name==="zoom"&&(u=f);return u instanceof mi||f.eachChild(p=>{const T=xA(p);T instanceof mi?u=T:!u&&T?u=new mi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&T&&u!==T&&(u=new mi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function ps(f){const u=f.key,p=f.value,T=f.valueSpec||{},D=f.objectElementValidators||{},z=f.style,F=f.styleSpec;let j=[];const Y=or(p);if(Y!=="object")return[new kt(u,p,`object expected, ${Y} found`)];for(const ie in p){const Ae=ie.split(".")[0],he=T[Ae]||T["*"];let ge;if(D[Ae])ge=D[Ae];else if(T[Ae])ge=os;else if(D["*"])ge=D["*"];else{if(!T["*"]){j.push(new kt(u,p[ie],`unknown property "${ie}"`));continue}ge=os}j=j.concat(ge({key:(u&&`${u}.`)+ie,value:p[ie],valueSpec:he,style:z,styleSpec:F,object:p,objectKey:ie},p))}for(const ie in T)D[ie]||T[ie].required&&T[ie].default===void 0&&p[ie]===void 0&&j.push(new kt(u,p,`missing required property "${ie}"`));return j}function ou(f){const u=f.value,p=f.valueSpec,T=f.style,D=f.styleSpec,z=f.key,F=f.arrayElementValidator||os;if(or(u)!=="array")return[new kt(z,u,`array expected, ${or(u)} found`)];if(p.length&&u.length!==p.length)return[new kt(z,u,`array length ${p.length} expected, length ${u.length} found`)];if(p["min-length"]&&u.length<p["min-length"])return[new kt(z,u,`array length at least ${p["min-length"]} expected, length ${u.length} found`)];let j={type:p.value,values:p.values};D.$version<7&&(j.function=p.function),or(p.value)==="object"&&(j=p.value);let Y=[];for(let ie=0;ie<u.length;ie++)Y=Y.concat(F({array:u,arrayIndex:ie,value:u[ie],valueSpec:j,style:T,styleSpec:D,key:`${z}[${ie}]`}));return Y}function Dl(f){const u=f.key,p=f.value,T=f.valueSpec;let D=or(p);return D==="number"&&p!=p&&(D="NaN"),D!=="number"?[new kt(u,p,`number expected, ${D} found`)]:"minimum"in T&&p<T.minimum?[new kt(u,p,`${p} is less than the minimum value ${T.minimum}`)]:"maximum"in T&&p>T.maximum?[new kt(u,p,`${p} is greater than the maximum value ${T.maximum}`)]:[]}function Ac(f){const u=f.valueSpec,p=Vn(f.value.type);let T,D,z,F={};const j=p!=="categorical"&&f.value.property===void 0,Y=!j,ie=or(f.value.stops)==="array"&&or(f.value.stops[0])==="array"&&or(f.value.stops[0][0])==="object",Ae=ps({key:f.key,value:f.value,valueSpec:f.styleSpec.function,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(ve){if(p==="identity")return[new kt(ve.key,ve.value,'identity function may not have a "stops" property')];let xe=[];const Ge=ve.value;return xe=xe.concat(ou({key:ve.key,value:Ge,valueSpec:ve.valueSpec,style:ve.style,styleSpec:ve.styleSpec,arrayElementValidator:he})),or(Ge)==="array"&&Ge.length===0&&xe.push(new kt(ve.key,Ge,"array must have at least one stop")),xe},default:function(ve){return os({key:ve.key,value:ve.value,valueSpec:u,style:ve.style,styleSpec:ve.styleSpec})}}});return p==="identity"&&j&&Ae.push(new kt(f.key,f.value,'missing required property "property"')),p==="identity"||f.value.stops||Ae.push(new kt(f.key,f.value,'missing required property "stops"')),p==="exponential"&&f.valueSpec.expression&&!nr(f.valueSpec)&&Ae.push(new kt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(Y&&!Tr(f.valueSpec)?Ae.push(new kt(f.key,f.value,"property functions not supported")):j&&!$s(f.valueSpec)&&Ae.push(new kt(f.key,f.value,"zoom functions not supported"))),p!=="categorical"&&!ie||f.value.property!==void 0||Ae.push(new kt(f.key,f.value,'"property" property is required')),Ae;function he(ve){let xe=[];const Ge=ve.value,Ne=ve.key;if(or(Ge)!=="array")return[new kt(Ne,Ge,`array expected, ${or(Ge)} found`)];if(Ge.length!==2)return[new kt(Ne,Ge,`array length 2 expected, length ${Ge.length} found`)];if(ie){if(or(Ge[0])!=="object")return[new kt(Ne,Ge,`object expected, ${or(Ge[0])} found`)];if(Ge[0].zoom===void 0)return[new kt(Ne,Ge,"object stop key must have zoom")];if(Ge[0].value===void 0)return[new kt(Ne,Ge,"object stop key must have value")];if(z&&z>Vn(Ge[0].zoom))return[new kt(Ne,Ge[0].zoom,"stop zoom values must appear in ascending order")];Vn(Ge[0].zoom)!==z&&(z=Vn(Ge[0].zoom),D=void 0,F={}),xe=xe.concat(ps({key:`${Ne}[0]`,value:Ge[0],valueSpec:{zoom:{}},style:ve.style,styleSpec:ve.styleSpec,objectElementValidators:{zoom:Dl,value:ge}}))}else xe=xe.concat(ge({key:`${Ne}[0]`,value:Ge[0],valueSpec:{},style:ve.style,styleSpec:ve.styleSpec},Ge));return Il(Bi(Ge[1]))?xe.concat([new kt(`${Ne}[1]`,Ge[1],"expressions are not allowed in function stops.")]):xe.concat(os({key:`${Ne}[1]`,value:Ge[1],valueSpec:u,style:ve.style,styleSpec:ve.styleSpec}))}function ge(ve,xe){const Ge=or(ve.value),Ne=Vn(ve.value),nt=ve.value!==null?ve.value:xe;if(T){if(Ge!==T)return[new kt(ve.key,nt,`${Ge} stop domain type must match previous stop domain type ${T}`)]}else T=Ge;if(Ge!=="number"&&Ge!=="string"&&Ge!=="boolean")return[new kt(ve.key,nt,"stop domain value must be a number, string, or boolean")];if(Ge!=="number"&&p!=="categorical"){let ut=`number expected, ${Ge} found`;return Tr(u)&&p===void 0&&(ut+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new kt(ve.key,nt,ut)]}return p!=="categorical"||Ge!=="number"||isFinite(Ne)&&Math.floor(Ne)===Ne?p!=="categorical"&&Ge==="number"&&D!==void 0&&Ne<D?[new kt(ve.key,nt,"stop domain values must appear in ascending order")]:(D=Ne,p==="categorical"&&Ne in F?[new kt(ve.key,nt,"stop domain values must be unique")]:(F[Ne]=!0,[])):[new kt(ve.key,nt,`integer expected, found ${Ne}`)]}}function ri(f){const u=(f.expressionContext==="property"?Ll:Za)(Bi(f.value),f.valueSpec);if(u.result==="error")return u.value.map(T=>new kt(`${f.key}${T.key}`,f.value,T.message));const p=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!p.outputDefined())return[new kt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Se(p))return[new kt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Se(p))return[new kt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Ve(p,["zoom","feature-state"]))return[new kt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!me(p))return[new kt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $r(f){const u=f.key,p=f.value,T=f.valueSpec,D=[];return Array.isArray(T.values)?T.values.indexOf(Vn(p))===-1&&D.push(new kt(u,p,`expected one of [${T.values.join(", ")}], ${JSON.stringify(p)} found`)):Object.keys(T.values).indexOf(Vn(p))===-1&&D.push(new kt(u,p,`expected one of [${Object.keys(T.values).join(", ")}], ${JSON.stringify(p)} found`)),D}function hi(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!hi(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const au={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ws(f){if(f==null)return{filter:()=>!0,needGeometry:!1};hi(f)||(f=_i(f));const u=Za(f,au);if(u.result==="error")throw new Error(u.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,T,D)=>u.value.evaluate(p,T,{},D),needGeometry:wA(f)}}function uc(f,u){return f<u?-1:f>u?1:0}function wA(f){if(!Array.isArray(f))return!1;if(f[0]==="within")return!0;for(let u=1;u<f.length;u++)if(wA(f[u]))return!0;return!1}function _i(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?zi(f[1],f[2],"=="):u==="!="?ss(zi(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?zi(f[1],f[2],u):u==="any"?(p=f.slice(1),["any"].concat(p.map(_i))):u==="all"?["all"].concat(f.slice(1).map(_i)):u==="none"?["all"].concat(f.slice(1).map(_i).map(ss)):u==="in"?gs(f[1],f.slice(2)):u==="!in"?ss(gs(f[1],f.slice(2))):u==="has"?_a(f[1]):u==="!has"?ss(_a(f[1])):u!=="within"||f;var p}function zi(f,u,p){switch(f){case"$type":return[`filter-type-${p}`,u];case"$id":return[`filter-id-${p}`,u];default:return[`filter-${p}`,f,u]}}function gs(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(p=>typeof p!=typeof u[0])?["filter-in-large",f,["literal",u.sort(uc)]]:["filter-in-small",f,["literal",u]]}}function _a(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function ss(f){return["!",f]}function Eo(f){return hi(Bi(f.value))?ri(Ai({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Mi(f)}function Mi(f){const u=f.value,p=f.key;if(or(u)!=="array")return[new kt(p,u,`array expected, ${or(u)} found`)];const T=f.styleSpec;let D,z=[];if(u.length<1)return[new kt(p,u,"filter array must have at least 1 element")];switch(z=z.concat($r({key:`${p}[0]`,value:u[0],valueSpec:T.filter_operator,style:f.style,styleSpec:f.styleSpec})),Vn(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Vn(u[1])==="$type"&&z.push(new kt(p,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&z.push(new kt(p,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(D=or(u[1]),D!=="string"&&z.push(new kt(`${p}[1]`,u[1],`string expected, ${D} found`)));for(let F=2;F<u.length;F++)D=or(u[F]),Vn(u[1])==="$type"?z=z.concat($r({key:`${p}[${F}]`,value:u[F],valueSpec:T.geometry_type,style:f.style,styleSpec:f.styleSpec})):D!=="string"&&D!=="number"&&D!=="boolean"&&z.push(new kt(`${p}[${F}]`,u[F],`string, number, or boolean expected, ${D} found`));break;case"any":case"all":case"none":for(let F=1;F<u.length;F++)z=z.concat(Mi({key:`${p}[${F}]`,value:u[F],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":D=or(u[1]),u.length!==2?z.push(new kt(p,u,`filter array for "${u[0]}" operator must have 2 elements`)):D!=="string"&&z.push(new kt(`${p}[1]`,u[1],`string expected, ${D} found`));break;case"within":D=or(u[1]),u.length!==2?z.push(new kt(p,u,`filter array for "${u[0]}" operator must have 2 elements`)):D!=="object"&&z.push(new kt(`${p}[1]`,u[1],`object expected, ${D} found`))}return z}function Ya(f,u){const p=f.key,T=f.style,D=f.styleSpec,z=f.value,F=f.objectKey,j=D[`${u}_${f.layerType}`];if(!j)return[];const Y=F.match(/^(.*)-transition$/);if(u==="paint"&&Y&&j[Y[1]]&&j[Y[1]].transition)return os({key:p,value:z,valueSpec:D.transition,style:T,styleSpec:D});const ie=f.valueSpec||j[F];if(!ie)return[new kt(p,z,`unknown property "${F}"`)];let Ae;if(or(z)==="string"&&Tr(ie)&&!ie.tokens&&(Ae=/^{([^}]+)}$/.exec(z)))return[new kt(p,z,`"${F}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ae[1])} }\`.`)];const he=[];return f.layerType==="symbol"&&(F==="text-field"&&T&&!T.glyphs&&he.push(new kt(p,z,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&Br(Bi(z))&&Vn(z.type)==="identity"&&he.push(new kt(p,z,'"text-font" does not support identity functions'))),he.concat(os({key:f.key,value:z,valueSpec:ie,style:T,styleSpec:D,expressionContext:"property",propertyType:u,propertyKey:F}))}function Rl(f){return Ya(f,"paint")}function Xa(f){return Ya(f,"layout")}function Qs(f){let u=[];const p=f.value,T=f.key,D=f.style,z=f.styleSpec;p.type||p.ref||u.push(new kt(T,p,'either "type" or "ref" is required'));let F=Vn(p.type);const j=Vn(p.ref);if(p.id){const Y=Vn(p.id);for(let ie=0;ie<f.arrayIndex;ie++){const Ae=D.layers[ie];Vn(Ae.id)===Y&&u.push(new kt(T,p.id,`duplicate layer id "${p.id}", previously used at line ${Ae.id.__line__}`))}}if("ref"in p){let Y;["type","source","source-layer","filter","layout"].forEach(ie=>{ie in p&&u.push(new kt(T,p[ie],`"${ie}" is prohibited for ref layers`))}),D.layers.forEach(ie=>{Vn(ie.id)===j&&(Y=ie)}),Y?Y.ref?u.push(new kt(T,p.ref,"ref cannot reference another ref layer")):F=Vn(Y.type):u.push(new kt(T,p.ref,`ref layer "${j}" not found`))}else if(F!=="background")if(p.source){const Y=D.sources&&D.sources[p.source],ie=Y&&Vn(Y.type);Y?ie==="vector"&&F==="raster"?u.push(new kt(T,p.source,`layer "${p.id}" requires a raster source`)):ie==="raster"&&F!=="raster"?u.push(new kt(T,p.source,`layer "${p.id}" requires a vector source`)):ie!=="vector"||p["source-layer"]?ie==="raster-dem"&&F!=="hillshade"?u.push(new kt(T,p.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!p.paint||!p.paint["line-gradient"]||ie==="geojson"&&Y.lineMetrics||u.push(new kt(T,p,`layer "${p.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new kt(T,p,`layer "${p.id}" must specify a "source-layer"`)):u.push(new kt(T,p.source,`source "${p.source}" not found`))}else u.push(new kt(T,p,'missing required property "source"'));return u=u.concat(ps({key:T,value:p,valueSpec:z.layer,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{"*":()=>[],type:()=>os({key:`${T}.type`,value:p.type,valueSpec:z.layer.type,style:f.style,styleSpec:f.styleSpec,object:p,objectKey:"type"}),filter:Eo,layout:Y=>ps({layer:p,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":ie=>Xa(Ai({layerType:F},ie))}}),paint:Y=>ps({layer:p,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":ie=>Rl(Ai({layerType:F},ie))}})}})),u}function ms(f){const u=f.value,p=f.key,T=or(u);return T!=="string"?[new kt(p,u,`string expected, ${T} found`)]:[]}const cc={promoteId:function({key:f,value:u}){if(or(u)==="string")return ms({key:f,value:u});{const p=[];for(const T in u)p.push(...ms({key:`${f}.${T}`,value:u[T]}));return p}}};function va(f){const u=f.value,p=f.key,T=f.styleSpec,D=f.style;if(!u.type)return[new kt(p,u,'"type" is required')];const z=Vn(u.type);let F;switch(z){case"vector":case"raster":case"raster-dem":return F=ps({key:p,value:u,valueSpec:T[`source_${z.replace("-","_")}`],style:f.style,styleSpec:T,objectElementValidators:cc}),F;case"geojson":if(F=ps({key:p,value:u,valueSpec:T.source_geojson,style:D,styleSpec:T,objectElementValidators:cc}),u.cluster)for(const j in u.clusterProperties){const[Y,ie]=u.clusterProperties[j],Ae=typeof Y=="string"?[Y,["accumulated"],["get",j]]:Y;F.push(...ri({key:`${p}.${j}.map`,value:ie,expressionContext:"cluster-map"})),F.push(...ri({key:`${p}.${j}.reduce`,value:Ae,expressionContext:"cluster-reduce"}))}return F;case"video":return ps({key:p,value:u,valueSpec:T.source_video,style:D,styleSpec:T});case"image":return ps({key:p,value:u,valueSpec:T.source_image,style:D,styleSpec:T});case"canvas":return[new kt(p,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $r({key:`${p}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:D,styleSpec:T})}}function Ka(f){const u=f.value,p=f.styleSpec,T=p.light,D=f.style;let z=[];const F=or(u);if(u===void 0)return z;if(F!=="object")return z=z.concat([new kt("light",u,`object expected, ${F} found`)]),z;for(const j in u){const Y=j.match(/^(.*)-transition$/);z=z.concat(Y&&T[Y[1]]&&T[Y[1]].transition?os({key:j,value:u[j],valueSpec:p.transition,style:D,styleSpec:p}):T[j]?os({key:j,value:u[j],valueSpec:T[j],style:D,styleSpec:p}):[new kt(j,u[j],`unknown property "${j}"`)])}return z}function fi(f){const u=f.value,p=f.styleSpec,T=p.terrain,D=f.style;let z=[];const F=or(u);if(u===void 0)return z;if(F!=="object")return z=z.concat([new kt("terrain",u,`object expected, ${F} found`)]),z;for(const j in u)z=z.concat(T[j]?os({key:j,value:u[j],valueSpec:T[j],style:D,styleSpec:p}):[new kt(j,u[j],`unknown property "${j}"`)]);return z}const Ls={"*":()=>[],array:ou,boolean:function(f){const u=f.value,p=f.key,T=or(u);return T!=="boolean"?[new kt(p,u,`boolean expected, ${T} found`)]:[]},number:Dl,color:function(f){const u=f.key,p=f.value,T=or(p);return T!=="string"?[new kt(u,p,`color expected, ${T} found`)]:xr(p)===null?[new kt(u,p,`color expected, "${p}" found`)]:[]},constants:is,enum:$r,filter:Eo,function:Ac,layer:Qs,object:ps,source:va,light:Ka,terrain:fi,string:ms,formatted:function(f){return ms(f).length===0?[]:ri(f)},resolvedImage:function(f){return ms(f).length===0?[]:ri(f)},padding:function(f){const u=f.key,p=f.value;if(or(p)==="array"){if(p.length<1||p.length>4)return[new kt(u,p,`padding requires 1 to 4 values; ${p.length} values found`)];const T={type:"number"};let D=[];for(let z=0;z<p.length;z++)D=D.concat(os({key:`${u}[${z}]`,value:p[z],valueSpec:T}));return D}return Dl({key:u,value:p,valueSpec:{}})}};function os(f){const u=f.value,p=f.valueSpec,T=f.styleSpec;return p.expression&&Br(Vn(u))?Ac(f):p.expression&&Il(Bi(u))?ri(f):p.type&&Ls[p.type]?Ls[p.type](f):ps(Ai({},f,{valueSpec:p.type?T[p.type]:p}))}function Bl(f){const u=f.value,p=f.key,T=ms(f);return T.length||(u.indexOf("{fontstack}")===-1&&T.push(new kt(p,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&T.push(new kt(p,u,'"glyphs" url must include a "{range}" token'))),T}function Yo(f,u=ht){let p=[];return p=p.concat(os({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,objectElementValidators:{glyphs:Bl,"*":()=>[]}})),f.constants&&(p=p.concat(is({key:"constants",value:f.constants,style:f,styleSpec:u}))),hc(p)}function hc(f){return[].concat(f).sort((u,p)=>u.line-p.line)}function To(f){return function(...u){return hc(f.apply(this,u))}}Yo.source=To(va),Yo.light=To(Ka),Yo.terrain=To(fi),Yo.layer=To(Qs),Yo.filter=To(Eo),Yo.paintProperty=To(Rl),Yo.layoutProperty=To(Xa);const zl=Yo,Ja=zl.light,hh=zl.paintProperty,fh=zl.layoutProperty;function el(f,u){let p=!1;if(u&&u.length)for(const T of u)f.fire(new Ps(new Error(T.message))),p=!0;return p}class xa{constructor(u,p,T){const D=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const F=new Int32Array(this.arrayBuffer);u=F[0],this.d=(p=F[1])+2*(T=F[2]);for(let Y=0;Y<this.d*this.d;Y++){const ie=F[3+Y],Ae=F[3+Y+1];D.push(ie===Ae?null:F.subarray(ie,Ae))}const j=F[3+D.length+1];this.keys=F.subarray(F[3+D.length],j),this.bboxes=F.subarray(j),this.insert=this._insertReadonly}else{this.d=p+2*T;for(let F=0;F<this.d*this.d;F++)D.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=u,this.padding=T,this.scale=p/u,this.uid=0;const z=T/p*u;this.min=-z,this.max=u+z}insert(u,p,T,D,z){this._forEachCell(p,T,D,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(p),this.bboxes.push(T),this.bboxes.push(D),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,p,T,D,z,F){this.cells[z].push(F)}query(u,p,T,D,z){const F=this.min,j=this.max;if(u<=F&&p<=F&&j<=T&&j<=D&&!z)return Array.prototype.slice.call(this.keys);{const Y=[];return this._forEachCell(u,p,T,D,this._queryCell,Y,{},z),Y}}_queryCell(u,p,T,D,z,F,j,Y){const ie=this.cells[z];if(ie!==null){const Ae=this.keys,he=this.bboxes;for(let ge=0;ge<ie.length;ge++){const ve=ie[ge];if(j[ve]===void 0){const xe=4*ve;(Y?Y(he[xe+0],he[xe+1],he[xe+2],he[xe+3]):u<=he[xe+2]&&p<=he[xe+3]&&T>=he[xe+0]&&D>=he[xe+1])?(j[ve]=!0,F.push(Ae[ve])):j[ve]=!1}}}}_forEachCell(u,p,T,D,z,F,j,Y){const ie=this._convertToCellCoord(u),Ae=this._convertToCellCoord(p),he=this._convertToCellCoord(T),ge=this._convertToCellCoord(D);for(let ve=ie;ve<=he;ve++)for(let xe=Ae;xe<=ge;xe++){const Ge=this.d*xe+ve;if((!Y||Y(this._convertFromCellCoord(ve),this._convertFromCellCoord(xe),this._convertFromCellCoord(ve+1),this._convertFromCellCoord(xe+1)))&&z.call(this,u,p,T,D,Ge,F,j,Y))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,p=3+this.cells.length+1+1;let T=0;for(let F=0;F<this.cells.length;F++)T+=this.cells[F].length;const D=new Int32Array(p+T+this.keys.length+this.bboxes.length);D[0]=this.extent,D[1]=this.n,D[2]=this.padding;let z=p;for(let F=0;F<u.length;F++){const j=u[F];D[3+F]=z,D.set(j,z),z+=j.length}return D[3+u.length]=z,D.set(this.keys,z),z+=this.keys.length,D[3+u.length+1]=z,D.set(this.bboxes,z),z+=this.bboxes.length,D.buffer}static serialize(u,p){const T=u.toArrayBuffer();return p&&p.push(T),{buffer:T}}static deserialize(u){return new xa(u.buffer)}}const ys={};function Gt(f,u,p={}){if(ys[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),ys[f]={klass:u,omit:p.omit||[],shallow:p.shallow||[]}}Gt("Object",Object),Gt("TransferableGridIndex",xa),Gt("Color",o),Gt("Error",Error),Gt("AJAXError",sr),Gt("ResolvedImage",Le),Gt("StylePropertyFunction",Cr),Gt("StyleExpression",Hs,{omit:["_evaluator"]}),Gt("ZoomDependentExpression",kl),Gt("ZoomConstantExpression",ya),Gt("CompoundExpression",Vt,{omit:["_evaluate"]});for(const f in Qa)Qa[f]._classRegistryKey||Gt(`Expression_${f}`,Qa[f]);function lu(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function wa(f,u){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob)return f;if(lu(f)||pt(f))return u&&u.push(f),f;if(ArrayBuffer.isView(f)){const p=f;return u&&u.push(p.buffer),p}if(f instanceof ImageData)return u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const p=[];for(const T of f)p.push(wa(T,u));return p}if(typeof f=="object"){const p=f.constructor,T=p._classRegistryKey;if(!T)throw new Error("can't serialize object of unregistered class");if(!ys[T])throw new Error(`${T} is not registered.`);const D=p.serialize?p.serialize(f,u):{};if(p.serialize){if(u&&D===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in f){if(!f.hasOwnProperty(z)||ys[T].omit.indexOf(z)>=0)continue;const F=f[z];D[z]=ys[T].shallow.indexOf(z)>=0?F:wa(F,u)}f instanceof Error&&(D.message=f.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return T!=="Object"&&(D.$name=T),D}throw new Error("can't serialize object of type "+typeof f)}function Xo(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||lu(f)||pt(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map(Xo);if(typeof f=="object"){const u=f.$name||"Object";if(!ys[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:p}=ys[u];if(!p)throw new Error(`can't deserialize unregistered class ${u}`);if(p.deserialize)return p.deserialize(f);const T=Object.create(p.prototype);for(const D of Object.keys(f)){if(D==="$name")continue;const z=f[D];T[D]=ys[u].shallow.indexOf(D)>=0?z:Xo(z)}return T}throw new Error("can't deserialize object of type "+typeof f)}class Au{constructor(){this.first=!0}update(u,p){const T=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=T,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=T,!0):(this.lastFloorZoom>T?(this.lastIntegerZoom=T+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<T&&(this.lastIntegerZoom=T,this.lastIntegerZoomTime=p),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=T,!0))}}const $t={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function bA(f){for(const u of f)if(tl(u.charCodeAt(0)))return!0;return!1}function Ol(f){for(const u of f)if(!EA(u.charCodeAt(0)))return!1;return!0}function EA(f){return!($t.Arabic(f)||$t["Arabic Supplement"](f)||$t["Arabic Extended-A"](f)||$t["Arabic Presentation Forms-A"](f)||$t["Arabic Presentation Forms-B"](f))}function tl(f){return!(f!==746&&f!==747&&(f<4352||!($t["Bopomofo Extended"](f)||$t.Bopomofo(f)||$t["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||$t["CJK Compatibility Ideographs"](f)||$t["CJK Compatibility"](f)||$t["CJK Radicals Supplement"](f)||$t["CJK Strokes"](f)||!(!$t["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||$t["CJK Unified Ideographs Extension A"](f)||$t["CJK Unified Ideographs"](f)||$t["Enclosed CJK Letters and Months"](f)||$t["Hangul Compatibility Jamo"](f)||$t["Hangul Jamo Extended-A"](f)||$t["Hangul Jamo Extended-B"](f)||$t["Hangul Jamo"](f)||$t["Hangul Syllables"](f)||$t.Hiragana(f)||$t["Ideographic Description Characters"](f)||$t.Kanbun(f)||$t["Kangxi Radicals"](f)||$t["Katakana Phonetic Extensions"](f)||$t.Katakana(f)&&f!==12540||!(!$t["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!$t["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||$t["Unified Canadian Aboriginal Syllabics"](f)||$t["Unified Canadian Aboriginal Syllabics Extended"](f)||$t["Vertical Forms"](f)||$t["Yijing Hexagram Symbols"](f)||$t["Yi Syllables"](f)||$t["Yi Radicals"](f))))}function qs(f){return!(tl(f)||function(u){return!!($t["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||$t["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||$t["Letterlike Symbols"](u)||$t["Number Forms"](u)||$t["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||$t["Control Pictures"](u)&&u!==9251||$t["Optical Character Recognition"](u)||$t["Enclosed Alphanumerics"](u)||$t["Geometric Shapes"](u)||$t["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||$t["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||$t["CJK Symbols and Punctuation"](u)||$t.Katakana(u)||$t["Private Use Area"](u)||$t["CJK Compatibility Forms"](u)||$t["Small Form Variants"](u)||$t["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(f))}function uu(f){return f>=1424&&f<=2303||$t["Arabic Presentation Forms-A"](f)||$t["Arabic Presentation Forms-B"](f)}function dh(f,u){return!(!u&&uu(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||$t.Khmer(f))}function fc(f){for(const u of f)if(uu(u.charCodeAt(0)))return!0;return!1}const cu="deferred",hu="loading",fu="loaded";let Zs=null,Hi="unavailable",So=null;const du=function(f){f&&typeof f=="string"&&f.indexOf("NetworkError")>-1&&(Hi="error"),Zs&&Zs(f)};function ba(){Wr.fire(new Yr("pluginStateChange",{pluginStatus:Hi,pluginURL:So}))}const Wr=new Si,Fl=function(){return Hi},dc=function(){if(Hi!==cu||!So)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hi=hu,ba(),So&&Ar({url:So},f=>{f?du(f):(Hi=fu,ba())})},_s={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Hi===fu||_s.applyArabicShaping!=null,isLoading:()=>Hi===hu,setState(f){if(!We())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Hi=f.pluginStatus,So=f.pluginURL},isParsed(){if(!We())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return _s.applyArabicShaping!=null&&_s.processBidirectionalText!=null&&_s.processStyledBidirectionalText!=null},getPluginURL(){if(!We())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return So}};class Fr{constructor(u,p){this.zoom=u,p?(this.now=p.now,this.fadeDuration=p.fadeDuration,this.zoomHistory=p.zoomHistory,this.transition=p.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Au,this.transition={})}isSupportedScript(u){return function(p,T){for(const D of p)if(!dh(D.charCodeAt(0),T))return!1;return!0}(u,_s.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,p=u-Math.floor(u),T=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*T}:{fromScale:.5,toScale:1,t:1-(1-T)*p}}}class nl{constructor(u,p){this.property=u,this.value=p,this.expression=function(T,D){if(Br(T))return new Cr(T,D);if(Il(T)){const z=Ll(T,D);if(z.result==="error")throw new Error(z.value.map(F=>`${F.key}: ${F.message}`).join(", "));return z.value}{let z=T;return D.type==="color"&&typeof T=="string"?z=o.parse(T):D.type!=="padding"||typeof T!="number"&&!Array.isArray(T)||(z=Pe.parse(T)),{kind:"constant",evaluate:()=>z}}}(p===void 0?u.specification.default:p,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,p,T){return this.property.possiblyEvaluate(this,u,p,T)}}class Nl{constructor(u){this.property=u,this.value=new nl(u,void 0)}transitioned(u,p){return new pc(this.property,this.value,p,H({},u.transition,this.transition),u.now)}untransitioned(){return new pc(this.property,this.value,null,{},0)}}class pu{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return re(this._values[u].value.value)}setValue(u,p){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Nl(this._values[u].property)),this._values[u].value=new nl(this._values[u].property,p===null?void 0:re(p))}getTransition(u){return re(this._values[u].transition)}setTransition(u,p){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Nl(this._values[u].property)),this._values[u].transition=re(p)||void 0}serialize(){const u={};for(const p of Object.keys(this._values)){const T=this.getValue(p);T!==void 0&&(u[p]=T);const D=this.getTransition(p);D!==void 0&&(u[`${p}-transition`]=D)}return u}transitioned(u,p){const T=new gu(this._properties);for(const D of Object.keys(this._values))T._values[D]=this._values[D].transitioned(u,p._values[D]);return T}untransitioned(){const u=new gu(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].untransitioned();return u}}class pc{constructor(u,p,T,D,z){this.property=u,this.value=p,this.begin=z+D.delay||0,this.end=this.begin+D.duration||0,u.specification.transition&&(D.delay||D.duration)&&(this.prior=T)}possiblyEvaluate(u,p,T){const D=u.now||0,z=this.value.possiblyEvaluate(u,p,T),F=this.prior;if(F){if(D>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(D<this.begin)return F.possiblyEvaluate(u,p,T);{const j=(D-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,p,T),z,function(Y){if(Y<=0)return 0;if(Y>=1)return 1;const ie=Y*Y,Ae=ie*Y;return 4*(Y<.5?Ae:3*(Y-ie)+Ae-.75)}(j))}}return z}}class gu{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,p,T){const D=new Ul(this._properties);for(const z of Object.keys(this._values))D._values[z]=this._values[z].possiblyEvaluate(u,p,T);return D}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class gc{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}getValue(u){return re(this._values[u].value)}setValue(u,p){this._values[u]=new nl(this._values[u].property,p===null?void 0:re(p))}serialize(){const u={};for(const p of Object.keys(this._values)){const T=this.getValue(p);T!==void 0&&(u[p]=T)}return u}possiblyEvaluate(u,p,T){const D=new Ul(this._properties);for(const z of Object.keys(this._values))D._values[z]=this._values[z].possiblyEvaluate(u,p,T);return D}}class Pr{constructor(u,p,T){this.property=u,this.value=p,this.parameters=T}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,p,T,D){return this.property.evaluate(this.value,this.parameters,u,p,T,D)}}class Ul{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class sn{constructor(u){this.specification=u}possiblyEvaluate(u,p){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(p)}interpolate(u,p,T){const D=jr[this.specification.type];return D?D(u,p,T):u}}class on{constructor(u,p){this.specification=u,this.overrides=p}possiblyEvaluate(u,p,T,D){return new Pr(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(p,null,{},T,D)}:u.expression,p)}interpolate(u,p,T){if(u.value.kind!=="constant"||p.value.kind!=="constant")return u;if(u.value.value===void 0||p.value.value===void 0)return new Pr(this,{kind:"constant",value:void 0},u.parameters);const D=jr[this.specification.type];return D?new Pr(this,{kind:"constant",value:D(u.value.value,p.value.value,T)},u.parameters):u}evaluate(u,p,T,D,z,F){return u.kind==="constant"?u.value:u.evaluate(p,T,D,z,F)}}class wn extends on{possiblyEvaluate(u,p,T,D){if(u.value===void 0)return new Pr(this,{kind:"constant",value:void 0},p);if(u.expression.kind==="constant"){const z=u.expression.evaluate(p,null,{},T,D),F=u.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,j=this._calculate(F,F,F,p);return new Pr(this,{kind:"constant",value:j},p)}if(u.expression.kind==="camera"){const z=this._calculate(u.expression.evaluate({zoom:p.zoom-1}),u.expression.evaluate({zoom:p.zoom}),u.expression.evaluate({zoom:p.zoom+1}),p);return new Pr(this,{kind:"constant",value:z},p)}return new Pr(this,u.expression,p)}evaluate(u,p,T,D,z,F){if(u.kind==="source"){const j=u.evaluate(p,T,D,z,F);return this._calculate(j,j,j,p)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(p.zoom)-1},T,D),u.evaluate({zoom:Math.floor(p.zoom)},T,D),u.evaluate({zoom:Math.floor(p.zoom)+1},T,D),p):u.value}_calculate(u,p,T,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:u,to:p}:{from:T,to:p}}interpolate(u){return u}}class as{constructor(u){this.specification=u}possiblyEvaluate(u,p,T,D){if(u.value!==void 0){if(u.expression.kind==="constant"){const z=u.expression.evaluate(p,null,{},T,D);return this._calculate(z,z,z,p)}return this._calculate(u.expression.evaluate(new Fr(Math.floor(p.zoom-1),p)),u.expression.evaluate(new Fr(Math.floor(p.zoom),p)),u.expression.evaluate(new Fr(Math.floor(p.zoom+1),p)),p)}}_calculate(u,p,T,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:u,to:p}:{from:T,to:p}}interpolate(u){return u}}class Ko{constructor(u){this.specification=u}possiblyEvaluate(u,p,T,D){return!!u.expression.evaluate(p,null,{},T,D)}interpolate(){return!1}}class Xr{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const p in u){const T=u[p];T.specification.overridable&&this.overridableProperties.push(p);const D=this.defaultPropertyValues[p]=new nl(T,void 0),z=this.defaultTransitionablePropertyValues[p]=new Nl(T);this.defaultTransitioningPropertyValues[p]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=D.possiblyEvaluate({})}}}Gt("DataDrivenProperty",on),Gt("DataConstantProperty",sn),Gt("CrossFadedDataDrivenProperty",wn),Gt("CrossFadedProperty",as),Gt("ColorRampProperty",Ko);const Ys="-transition";class Ds extends Si{constructor(u,p){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),p.layout&&(this._unevaluatedLayout=new gc(p.layout)),p.paint)){this._transitionablePaint=new pu(p.paint);for(const T in u.paint)this.setPaintProperty(T,u.paint[T],{validate:!1});for(const T in u.layout)this.setLayoutProperty(T,u.layout[T],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ul(p.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,p,T={}){p!=null&&this._validate(fh,`layers.${this.id}.layout.${u}`,u,p,T)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,p):this.visibility=p)}getPaintProperty(u){return u.endsWith(Ys)?this._transitionablePaint.getTransition(u.slice(0,-Ys.length)):this._transitionablePaint.getValue(u)}setPaintProperty(u,p,T={}){if(p!=null&&this._validate(hh,`layers.${this.id}.paint.${u}`,u,p,T))return!1;if(u.endsWith(Ys))return this._transitionablePaint.setTransition(u.slice(0,-Ys.length),p||void 0),!1;{const D=this._transitionablePaint._values[u],z=D.property.specification["property-type"]==="cross-faded-data-driven",F=D.value.isDataDriven(),j=D.value;this._transitionablePaint.setValue(u,p),this._handleSpecialPaintPropertyUpdate(u);const Y=this._transitionablePaint._values[u].value;return Y.isDataDriven()||F||z||this._handleOverridablePaintPropertyUpdate(u,j,Y)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,p,T){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,p){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,p)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),J(u,(p,T)=>!(p===void 0||T==="layout"&&!Object.keys(p).length||T==="paint"&&!Object.keys(p).length))}_validate(u,p,T,D,z={}){return(!z||z.validate!==!1)&&el(this,u.call(zl,{key:p,layerType:this.type,objectKey:T,value:D,styleSpec:ht,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const p=this.paint.get(u);if(p instanceof Pr&&Tr(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1}}const Xs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class It{constructor(u,p){this._structArray=u,this._pos1=p*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Rt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,p){return u._trim(),p&&(u.isTransferred=!0,p.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const p=Object.create(this.prototype);return p.arrayBuffer=u.arrayBuffer,p.length=u.length,p.capacity=u.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Kr(f,u=1){let p=0,T=0;return{members:f.map(D=>{const z=Xs[D.type].BYTES_PER_ELEMENT,F=p=rl(p,Math.max(u,z)),j=D.components||1;return T=Math.max(T,z),p+=z*j,{name:D.name,type:D.type,components:j,offset:F}}),size:rl(p,Math.max(T,u)),alignment:u}}function rl(f,u){return Math.ceil(f/u)*u}class Ks extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p){const T=this.length;return this.resize(T+1),this.emplace(T,u,p)}emplace(u,p,T){const D=2*u;return this.int16[D+0]=p,this.int16[D+1]=T,u}}Ks.prototype.bytesPerElement=4,Gt("StructArrayLayout2i4",Ks);class L extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,T,D){const z=this.length;return this.resize(z+1),this.emplace(z,u,p,T,D)}emplace(u,p,T,D,z){const F=4*u;return this.int16[F+0]=p,this.int16[F+1]=T,this.int16[F+2]=D,this.int16[F+3]=z,u}}L.prototype.bytesPerElement=8,Gt("StructArrayLayout4i8",L);class c extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F){const j=this.length;return this.resize(j+1),this.emplace(j,u,p,T,D,z,F)}emplace(u,p,T,D,z,F,j){const Y=6*u;return this.int16[Y+0]=p,this.int16[Y+1]=T,this.int16[Y+2]=D,this.int16[Y+3]=z,this.int16[Y+4]=F,this.int16[Y+5]=j,u}}c.prototype.bytesPerElement=12,Gt("StructArrayLayout2i4i12",c);class _ extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F){const j=this.length;return this.resize(j+1),this.emplace(j,u,p,T,D,z,F)}emplace(u,p,T,D,z,F,j){const Y=4*u,ie=8*u;return this.int16[Y+0]=p,this.int16[Y+1]=T,this.uint8[ie+4]=D,this.uint8[ie+5]=z,this.uint8[ie+6]=F,this.uint8[ie+7]=j,u}}_.prototype.bytesPerElement=8,Gt("StructArrayLayout2i4ub8",_);class l extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p){const T=this.length;return this.resize(T+1),this.emplace(T,u,p)}emplace(u,p,T){const D=2*u;return this.float32[D+0]=p,this.float32[D+1]=T,u}}l.prototype.bytesPerElement=8,Gt("StructArrayLayout2f8",l);class h extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F,j,Y,ie,Ae){const he=this.length;return this.resize(he+1),this.emplace(he,u,p,T,D,z,F,j,Y,ie,Ae)}emplace(u,p,T,D,z,F,j,Y,ie,Ae,he){const ge=10*u;return this.uint16[ge+0]=p,this.uint16[ge+1]=T,this.uint16[ge+2]=D,this.uint16[ge+3]=z,this.uint16[ge+4]=F,this.uint16[ge+5]=j,this.uint16[ge+6]=Y,this.uint16[ge+7]=ie,this.uint16[ge+8]=Ae,this.uint16[ge+9]=he,u}}h.prototype.bytesPerElement=20,Gt("StructArrayLayout10ui20",h);class d extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F,j,Y,ie,Ae,he,ge){const ve=this.length;return this.resize(ve+1),this.emplace(ve,u,p,T,D,z,F,j,Y,ie,Ae,he,ge)}emplace(u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve){const xe=12*u;return this.int16[xe+0]=p,this.int16[xe+1]=T,this.int16[xe+2]=D,this.int16[xe+3]=z,this.uint16[xe+4]=F,this.uint16[xe+5]=j,this.uint16[xe+6]=Y,this.uint16[xe+7]=ie,this.int16[xe+8]=Ae,this.int16[xe+9]=he,this.int16[xe+10]=ge,this.int16[xe+11]=ve,u}}d.prototype.bytesPerElement=24,Gt("StructArrayLayout4i4ui4i24",d);class x extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,T){const D=this.length;return this.resize(D+1),this.emplace(D,u,p,T)}emplace(u,p,T,D){const z=3*u;return this.float32[z+0]=p,this.float32[z+1]=T,this.float32[z+2]=D,u}}x.prototype.bytesPerElement=12,Gt("StructArrayLayout3f12",x);class b extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.uint32[1*u+0]=p,u}}b.prototype.bytesPerElement=4,Gt("StructArrayLayout1ul4",b);class S extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F,j,Y,ie){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,u,p,T,D,z,F,j,Y,ie)}emplace(u,p,T,D,z,F,j,Y,ie,Ae){const he=10*u,ge=5*u;return this.int16[he+0]=p,this.int16[he+1]=T,this.int16[he+2]=D,this.int16[he+3]=z,this.int16[he+4]=F,this.int16[he+5]=j,this.uint32[ge+3]=Y,this.uint16[he+8]=ie,this.uint16[he+9]=Ae,u}}S.prototype.bytesPerElement=20,Gt("StructArrayLayout6i1ul2ui20",S);class P extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F){const j=this.length;return this.resize(j+1),this.emplace(j,u,p,T,D,z,F)}emplace(u,p,T,D,z,F,j){const Y=6*u;return this.int16[Y+0]=p,this.int16[Y+1]=T,this.int16[Y+2]=D,this.int16[Y+3]=z,this.int16[Y+4]=F,this.int16[Y+5]=j,u}}P.prototype.bytesPerElement=12,Gt("StructArrayLayout2i2i2i12",P);class B extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z){const F=this.length;return this.resize(F+1),this.emplace(F,u,p,T,D,z)}emplace(u,p,T,D,z,F){const j=4*u,Y=8*u;return this.float32[j+0]=p,this.float32[j+1]=T,this.float32[j+2]=D,this.int16[Y+6]=z,this.int16[Y+7]=F,u}}B.prototype.bytesPerElement=16,Gt("StructArrayLayout2f1f2i16",B);class V extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,T,D){const z=this.length;return this.resize(z+1),this.emplace(z,u,p,T,D)}emplace(u,p,T,D,z){const F=12*u,j=3*u;return this.uint8[F+0]=p,this.uint8[F+1]=T,this.float32[j+1]=D,this.float32[j+2]=z,u}}V.prototype.bytesPerElement=12,Gt("StructArrayLayout2ub2f12",V);class $ extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,T){const D=this.length;return this.resize(D+1),this.emplace(D,u,p,T)}emplace(u,p,T,D){const z=3*u;return this.uint16[z+0]=p,this.uint16[z+1]=T,this.uint16[z+2]=D,u}}$.prototype.bytesPerElement=6,Gt("StructArrayLayout3ui6",$);class X extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge,Ne,nt){const ut=this.length;return this.resize(ut+1),this.emplace(ut,u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge,Ne,nt)}emplace(u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge,Ne,nt,ut){const et=24*u,at=12*u,_t=48*u;return this.int16[et+0]=p,this.int16[et+1]=T,this.uint16[et+2]=D,this.uint16[et+3]=z,this.uint32[at+2]=F,this.uint32[at+3]=j,this.uint32[at+4]=Y,this.uint16[et+10]=ie,this.uint16[et+11]=Ae,this.uint16[et+12]=he,this.float32[at+7]=ge,this.float32[at+8]=ve,this.uint8[_t+36]=xe,this.uint8[_t+37]=Ge,this.uint8[_t+38]=Ne,this.uint32[at+10]=nt,this.int16[et+22]=ut,u}}X.prototype.bytesPerElement=48,Gt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",X);class oe extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge,Ne,nt,ut,et,at,_t,yt,rn,un,Zt,jt,Nt,Yt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge,Ne,nt,ut,et,at,_t,yt,rn,un,Zt,jt,Nt,Yt)}emplace(u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge,Ne,nt,ut,et,at,_t,yt,rn,un,Zt,jt,Nt,Yt,Wt){const Pt=34*u,Tn=17*u;return this.int16[Pt+0]=p,this.int16[Pt+1]=T,this.int16[Pt+2]=D,this.int16[Pt+3]=z,this.int16[Pt+4]=F,this.int16[Pt+5]=j,this.int16[Pt+6]=Y,this.int16[Pt+7]=ie,this.uint16[Pt+8]=Ae,this.uint16[Pt+9]=he,this.uint16[Pt+10]=ge,this.uint16[Pt+11]=ve,this.uint16[Pt+12]=xe,this.uint16[Pt+13]=Ge,this.uint16[Pt+14]=Ne,this.uint16[Pt+15]=nt,this.uint16[Pt+16]=ut,this.uint16[Pt+17]=et,this.uint16[Pt+18]=at,this.uint16[Pt+19]=_t,this.uint16[Pt+20]=yt,this.uint16[Pt+21]=rn,this.uint16[Pt+22]=un,this.uint32[Tn+12]=Zt,this.float32[Tn+13]=jt,this.float32[Tn+14]=Nt,this.float32[Tn+15]=Yt,this.float32[Tn+16]=Wt,u}}oe.prototype.bytesPerElement=68,Gt("StructArrayLayout8i15ui1ul4f68",oe);class ne extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.float32[1*u+0]=p,u}}ne.prototype.bytesPerElement=4,Gt("StructArrayLayout1f4",ne);class ue extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,T){const D=this.length;return this.resize(D+1),this.emplace(D,u,p,T)}emplace(u,p,T,D){const z=3*u;return this.int16[z+0]=p,this.int16[z+1]=T,this.int16[z+2]=D,u}}ue.prototype.bytesPerElement=6,Gt("StructArrayLayout3i6",ue);class Te extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,T){const D=this.length;return this.resize(D+1),this.emplace(D,u,p,T)}emplace(u,p,T,D){const z=4*u;return this.uint32[2*u+0]=p,this.uint16[z+2]=T,this.uint16[z+3]=D,u}}Te.prototype.bytesPerElement=8,Gt("StructArrayLayout1ul2ui8",Te);class Ie extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p){const T=this.length;return this.resize(T+1),this.emplace(T,u,p)}emplace(u,p,T){const D=2*u;return this.uint16[D+0]=p,this.uint16[D+1]=T,u}}Ie.prototype.bytesPerElement=4,Gt("StructArrayLayout2ui4",Ie);class we extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.uint16[1*u+0]=p,u}}we.prototype.bytesPerElement=2,Gt("StructArrayLayout1ui2",we);class $e extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,T,D){const z=this.length;return this.resize(z+1),this.emplace(z,u,p,T,D)}emplace(u,p,T,D,z){const F=4*u;return this.float32[F+0]=p,this.float32[F+1]=T,this.float32[F+2]=D,this.float32[F+3]=z,u}}$e.prototype.bytesPerElement=16,Gt("StructArrayLayout4f16",$e);class Me extends It{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Mt(this.anchorPointX,this.anchorPointY)}}Me.prototype.size=20;class je extends S{get(u){return new Me(this,u)}}Gt("CollisionBoxArray",je);class be extends It{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}be.prototype.size=48;class m extends X{get(u){return new be(this,u)}}Gt("PlacedSymbolArray",m);class g extends It{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}g.prototype.size=68;class v extends oe{get(u){return new g(this,u)}}Gt("SymbolInstanceArray",v);class E extends ne{getoffsetX(u){return this.float32[1*u+0]}}Gt("GlyphOffsetArray",E);class I extends ue{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Gt("SymbolLineVertexArray",I);class R extends It{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}R.prototype.size=8;class O extends Te{get(u){return new R(this,u)}}Gt("FeatureIndexArray",O);class N extends Ks{}class Q extends Ks{}class te extends Ks{}class le extends c{}class pe extends _{}class Be extends l{}class He extends h{}class ze extends d{}class Xe extends x{}class dt extends b{}class ct extends P{}class it extends V{}class st extends ${}class Je extends Ie{}const Ht=Kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ft}=Ht;class mt{constructor(u=[]){this.segments=u}prepareSegment(u,p,T,D){let z=this.segments[this.segments.length-1];return u>mt.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${mt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}`),(!z||z.vertexLength+u>mt.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==D)&&(z={vertexOffset:p.length,primitiveOffset:T.length,vertexLength:0,primitiveLength:0},D!==void 0&&(z.sortKey=D),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const u of this.segments)for(const p in u.vaos)u.vaos[p].destroy()}static simpleSegment(u,p,T,D){return new mt([{vertexOffset:u,primitiveOffset:p,vertexLength:T,primitiveLength:D,vaos:{},sortKey:0}])}}function Et(f,u){return 256*(f=k(Math.floor(f),0,255))+k(Math.floor(u),0,255)}mt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gt("SegmentVector",mt);const Nn=Kr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var zn={exports:{}},Sn={exports:{}};Sn.exports=function(f,u){var p,T,D,z,F,j,Y,ie;for(T=f.length-(p=3&f.length),D=u,F=3432918353,j=461845907,ie=0;ie<T;)Y=255&f.charCodeAt(ie)|(255&f.charCodeAt(++ie))<<8|(255&f.charCodeAt(++ie))<<16|(255&f.charCodeAt(++ie))<<24,++ie,D=27492+(65535&(z=5*(65535&(D=(D^=Y=(65535&(Y=(Y=(65535&Y)*F+(((Y>>>16)*F&65535)<<16)&4294967295)<<15|Y>>>17))*j+(((Y>>>16)*j&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(Y=0,p){case 3:Y^=(255&f.charCodeAt(ie+2))<<16;case 2:Y^=(255&f.charCodeAt(ie+1))<<8;case 1:D^=Y=(65535&(Y=(Y=(65535&(Y^=255&f.charCodeAt(ie)))*F+(((Y>>>16)*F&65535)<<16)&4294967295)<<15|Y>>>17))*j+(((Y>>>16)*j&65535)<<16)&4294967295}return D^=f.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0};var kn={exports:{}};kn.exports=function(f,u){for(var p,T=f.length,D=u^T,z=0;T>=4;)p=1540483477*(65535&(p=255&f.charCodeAt(z)|(255&f.charCodeAt(++z))<<8|(255&f.charCodeAt(++z))<<16|(255&f.charCodeAt(++z))<<24))+((1540483477*(p>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),T-=4,++z;switch(T){case 3:D^=(255&f.charCodeAt(z+2))<<16;case 2:D^=(255&f.charCodeAt(z+1))<<8;case 1:D=1540483477*(65535&(D^=255&f.charCodeAt(z)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0};var On=Sn.exports,Wn=kn.exports;zn.exports=On,zn.exports.murmur3=On,zn.exports.murmur2=Wn;class _r{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,p,T,D){this.ids.push(Un(u)),this.positions.push(p,T,D)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const p=Un(u);let T=0,D=this.ids.length-1;for(;T<D;){const F=T+D>>1;this.ids[F]>=p?D=F:T=F+1}const z=[];for(;this.ids[T]===p;)z.push({index:this.positions[3*T],start:this.positions[3*T+1],end:this.positions[3*T+2]}),T++;return z}static serialize(u,p){const T=new Float64Array(u.ids),D=new Uint32Array(u.positions);return zr(T,D,0,T.length-1),p&&p.push(T.buffer,D.buffer),{ids:T,positions:D}}static deserialize(u){const p=new _r;return p.ids=u.ids,p.positions=u.positions,p.indexed=!0,p}}function Un(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:zn.exports(String(f))}function zr(f,u,p,T){for(;p<T;){const D=f[p+T>>1];let z=p-1,F=T+1;for(;;){do z++;while(f[z]<D);do F--;while(f[F]>D);if(z>=F)break;ii(f,z,F),ii(u,3*z,3*F),ii(u,3*z+1,3*F+1),ii(u,3*z+2,3*F+2)}F-p<T-F?(zr(f,u,p,F),p=F+1):(zr(f,u,F+1,T),T=F)}}function ii(f,u,p){const T=f[u];f[u]=f[p],f[p]=T}Gt("FeaturePositionMap",_r);class il{constructor(u,p){this.gl=u.gl,this.location=p}}class mu extends il{constructor(u,p){super(u,p),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class M0 extends il{constructor(u,p){super(u,p),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class w4 extends il{constructor(u,p){super(u,p),this.current=o.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const W7=new Float32Array(16);function Mv(f){return[Et(255*f.r,255*f.g),Et(255*f.b,255*f.a)]}class Dd{constructor(u,p,T){this.value=u,this.uniformNames=p.map(D=>`u_${D}`),this.type=T}setUniform(u,p,T){u.set(T.constantOr(this.value))}getBinding(u,p,T){return this.type==="color"?new w4(u,p):new mu(u,p)}}class C0{constructor(u,p){this.uniformNames=p.map(T=>`u_${T}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=u.tlbr}setUniform(u,p,T,D){const z=D==="u_pattern_to"?this.patternTo:D==="u_pattern_from"?this.patternFrom:D==="u_pixel_ratio_to"?this.pixelRatioTo:D==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&u.set(z)}getBinding(u,p,T){return T.substr(0,9)==="u_pattern"?new M0(u,p):new mu(u,p)}}class yu{constructor(u,p,T,D){this.expression=u,this.type=T,this.maxValue=0,this.paintVertexAttributes=p.map(z=>({name:`a_${z}`,type:"Float32",components:T==="color"?2:1,offset:0})),this.paintVertexArray=new D}populatePaintArray(u,p,T,D,z){const F=this.paintVertexArray.length,j=this.expression.evaluate(new Fr(0),p,{},D,[],z);this.paintVertexArray.resize(u),this._setPaintValue(F,u,j)}updatePaintArray(u,p,T,D){const z=this.expression.evaluate({zoom:0},T,D);this._setPaintValue(u,p,z)}_setPaintValue(u,p,T){if(this.type==="color"){const D=Mv(T);for(let z=u;z<p;z++)this.paintVertexArray.emplace(z,D[0],D[1])}else{for(let D=u;D<p;D++)this.paintVertexArray.emplace(D,T);this.maxValue=Math.max(this.maxValue,Math.abs(T))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Vl{constructor(u,p,T,D,z,F){this.expression=u,this.uniformNames=p.map(j=>`u_${j}_t`),this.type=T,this.useIntegerZoom=D,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=p.map(j=>({name:`a_${j}`,type:"Float32",components:T==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(u,p,T,D,z){const F=this.expression.evaluate(new Fr(this.zoom),p,{},D,[],z),j=this.expression.evaluate(new Fr(this.zoom+1),p,{},D,[],z),Y=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(Y,u,F,j)}updatePaintArray(u,p,T,D){const z=this.expression.evaluate({zoom:this.zoom},T,D),F=this.expression.evaluate({zoom:this.zoom+1},T,D);this._setPaintValue(u,p,z,F)}_setPaintValue(u,p,T,D){if(this.type==="color"){const z=Mv(T),F=Mv(D);for(let j=u;j<p;j++)this.paintVertexArray.emplace(j,z[0],z[1],F[0],F[1])}else{for(let z=u;z<p;z++)this.paintVertexArray.emplace(z,T,D);this.maxValue=Math.max(this.maxValue,Math.abs(T),Math.abs(D))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,p){const T=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,D=k(this.expression.interpolationFactor(T,this.zoom,this.zoom+1),0,1);u.set(D)}getBinding(u,p,T){return new mu(u,p)}}class mc{constructor(u,p,T,D,z,F){this.expression=u,this.type=p,this.useIntegerZoom=T,this.zoom=D,this.layerId=F,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(u,p,T){const D=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(D,u,p.patterns&&p.patterns[this.layerId],T)}updatePaintArray(u,p,T,D,z){this._setPaintValues(u,p,T.patterns&&T.patterns[this.layerId],z)}_setPaintValues(u,p,T,D){if(!D||!T)return;const{min:z,mid:F,max:j}=T,Y=D[z],ie=D[F],Ae=D[j];if(Y&&ie&&Ae)for(let he=u;he<p;he++)this.zoomInPaintVertexArray.emplace(he,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],ie.pixelRatio,Y.pixelRatio),this.zoomOutPaintVertexArray.emplace(he,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],Ae.tl[0],Ae.tl[1],Ae.br[0],Ae.br[1],ie.pixelRatio,Ae.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Nn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Nn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class b4{constructor(u,p,T){this.binders={},this._buffers=[];const D=[];for(const z in u.paint._values){if(!T(z))continue;const F=u.paint.get(z);if(!(F instanceof Pr&&Tr(F.property.specification)))continue;const j=Q7(z,u.type),Y=F.value,ie=F.property.specification.type,Ae=F.property.useIntegerZoom,he=F.property.specification["property-type"],ge=he==="cross-faded"||he==="cross-faded-data-driven";if(Y.kind==="constant")this.binders[z]=ge?new C0(Y.value,j):new Dd(Y.value,j,ie),D.push(`/u_${z}`);else if(Y.kind==="source"||ge){const ve=E4(z,ie,"source");this.binders[z]=ge?new mc(Y,ie,Ae,p,ve,u.id):new yu(Y,j,ie,ve),D.push(`/a_${z}`)}else{const ve=E4(z,ie,"composite");this.binders[z]=new Vl(Y,j,ie,Ae,p,ve),D.push(`/z_${z}`)}}this.cacheKey=D.sort().join("")}getMaxValue(u){const p=this.binders[u];return p instanceof yu||p instanceof Vl?p.maxValue:0}populatePaintArrays(u,p,T,D,z){for(const F in this.binders){const j=this.binders[F];(j instanceof yu||j instanceof Vl||j instanceof mc)&&j.populatePaintArray(u,p,T,D,z)}}setConstantPatternPositions(u,p){for(const T in this.binders){const D=this.binders[T];D instanceof C0&&D.setConstantPatternPositions(u,p)}}updatePaintArrays(u,p,T,D,z){let F=!1;for(const j in u){const Y=p.getPositions(j);for(const ie of Y){const Ae=T.feature(ie.index);for(const he in this.binders){const ge=this.binders[he];if((ge instanceof yu||ge instanceof Vl||ge instanceof mc)&&ge.expression.isStateDependent===!0){const ve=D.paint.get(he);ge.expression=ve.value,ge.updatePaintArray(ie.start,ie.end,Ae,u[j],z),F=!0}}}}return F}defines(){const u=[];for(const p in this.binders){const T=this.binders[p];(T instanceof Dd||T instanceof C0)&&u.push(...T.uniformNames.map(D=>`#define HAS_UNIFORM_${D}`))}return u}getBinderAttributes(){const u=[];for(const p in this.binders){const T=this.binders[p];if(T instanceof yu||T instanceof Vl)for(let D=0;D<T.paintVertexAttributes.length;D++)u.push(T.paintVertexAttributes[D].name);else if(T instanceof mc)for(let D=0;D<Nn.members.length;D++)u.push(Nn.members[D].name)}return u}getBinderUniforms(){const u=[];for(const p in this.binders){const T=this.binders[p];if(T instanceof Dd||T instanceof C0||T instanceof Vl)for(const D of T.uniformNames)u.push(D)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,p){const T=[];for(const D in this.binders){const z=this.binders[D];if(z instanceof Dd||z instanceof C0||z instanceof Vl){for(const F of z.uniformNames)if(p[F]){const j=z.getBinding(u,p[F],F);T.push({name:F,property:D,binding:j})}}}return T}setUniforms(u,p,T,D){for(const{name:z,property:F,binding:j}of p)this.binders[F].setUniform(j,D,T.get(F),z)}updatePaintBuffers(u){this._buffers=[];for(const p in this.binders){const T=this.binders[p];if(u&&T instanceof mc){const D=u.fromScale===2?T.zoomInPaintVertexBuffer:T.zoomOutPaintVertexBuffer;D&&this._buffers.push(D)}else(T instanceof yu||T instanceof Vl)&&T.paintVertexBuffer&&this._buffers.push(T.paintVertexBuffer)}}upload(u){for(const p in this.binders){const T=this.binders[p];(T instanceof yu||T instanceof Vl||T instanceof mc)&&T.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const p=this.binders[u];(p instanceof yu||p instanceof Vl||p instanceof mc)&&p.destroy()}}}class ph{constructor(u,p,T=()=>!0){this.programConfigurations={};for(const D of u)this.programConfigurations[D.id]=new b4(D,p,T);this.needsUpload=!1,this._featureMap=new _r,this._bufferOffset=0}populatePaintArrays(u,p,T,D,z,F){for(const j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(u,p,D,z,F);p.id!==void 0&&this._featureMap.add(p.id,T,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,p,T,D){for(const z of T)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(u,this._featureMap,p,z,D)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const p in this.programConfigurations)this.programConfigurations[p].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Q7(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function E4(f,u,p){const T={color:{source:l,composite:$e},number:{source:ne,composite:l}},D=function(z){return{"line-pattern":{source:He,composite:He},"fill-pattern":{source:He,composite:He},"fill-extrusion-pattern":{source:He,composite:He}}[z]}(f);return D&&D[p]||T[u][p]}Gt("ConstantBinder",Dd),Gt("CrossFadedConstantBinder",C0),Gt("SourceExpressionBinder",yu),Gt("CrossFadedCompositeBinder",mc),Gt("CompositeExpressionBinder",Vl),Gt("ProgramConfiguration",b4,{omit:["_buffers"]}),Gt("ProgramConfigurationSet",ph);var Wi=8192;const Cv=Math.pow(2,14)-1,T4=-Cv-1;function gh(f){const u=Wi/f.extent,p=f.loadGeometry();for(let T=0;T<p.length;T++){const D=p[T];for(let z=0;z<D.length;z++){const F=D[z],j=Math.round(F.x*u),Y=Math.round(F.y*u);F.x=k(j,T4,Cv),F.y=k(Y,T4,Cv),(j<F.x||j>F.x+1||Y<F.y||Y>F.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return p}function mh(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?gh(f):[]}}function Dm(f,u,p,T,D){f.emplaceBack(2*u+(T+1)/2,2*p+(D+1)/2)}class Pv{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Q,this.indexArray=new st,this.segments=new mt,this.programConfigurations=new ph(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,T){const D=this.layers[0],z=[];let F=null,j=!1;D.type==="circle"&&(F=D.layout.get("circle-sort-key"),j=!F.isConstant());for(const{feature:Y,id:ie,index:Ae,sourceLayerIndex:he}of u){const ge=this.layers[0]._featureFilter.needGeometry,ve=mh(Y,ge);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),ve,T))continue;const xe=j?F.evaluate(ve,{},T):void 0,Ge={id:ie,properties:Y.properties,type:Y.type,sourceLayerIndex:he,index:Ae,geometry:ge?ve.geometry:gh(Y),patterns:{},sortKey:xe};z.push(Ge)}j&&z.sort((Y,ie)=>Y.sortKey-ie.sortKey);for(const Y of z){const{geometry:ie,index:Ae,sourceLayerIndex:he}=Y,ge=u[Ae].feature;this.addFeature(Y,ie,Ae,T),p.featureIndex.insert(ge,ie,Ae,he,this.index)}}update(u,p,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,T)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ft),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,p,T,D){for(const z of p)for(const F of z){const j=F.x,Y=F.y;if(j<0||j>=Wi||Y<0||Y>=Wi)continue;const ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),Ae=ie.vertexLength;Dm(this.layoutVertexArray,j,Y,-1,-1),Dm(this.layoutVertexArray,j,Y,1,-1),Dm(this.layoutVertexArray,j,Y,1,1),Dm(this.layoutVertexArray,j,Y,-1,1),this.indexArray.emplaceBack(Ae,Ae+1,Ae+2),this.indexArray.emplaceBack(Ae,Ae+3,Ae+2),ie.vertexLength+=4,ie.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,T,{},D)}}function S4(f,u){for(let p=0;p<f.length;p++)if(P0(u,f[p]))return!0;for(let p=0;p<u.length;p++)if(P0(f,u[p]))return!0;return!!Iv(f,u)}function q7(f,u,p){return!!P0(f,u)||!!kv(u,f,p)}function M4(f,u){if(f.length===1)return P4(u,f[0]);for(let p=0;p<u.length;p++){const T=u[p];for(let D=0;D<T.length;D++)if(P0(f,T[D]))return!0}for(let p=0;p<f.length;p++)if(P4(u,f[p]))return!0;for(let p=0;p<u.length;p++)if(Iv(f,u[p]))return!0;return!1}function Z7(f,u,p){if(f.length>1){if(Iv(f,u))return!0;for(let T=0;T<u.length;T++)if(kv(u[T],f,p))return!0}for(let T=0;T<f.length;T++)if(kv(f[T],u,p))return!0;return!1}function Iv(f,u){if(f.length===0||u.length===0)return!1;for(let p=0;p<f.length-1;p++){const T=f[p],D=f[p+1];for(let z=0;z<u.length-1;z++)if(Y7(T,D,u[z],u[z+1]))return!0}return!1}function Y7(f,u,p,T){return fe(f,p,T)!==fe(u,p,T)&&fe(f,u,p)!==fe(f,u,T)}function kv(f,u,p){const T=p*p;if(u.length===1)return f.distSqr(u[0])<T;for(let D=1;D<u.length;D++)if(C4(f,u[D-1],u[D])<T)return!0;return!1}function C4(f,u,p){const T=u.distSqr(p);if(T===0)return f.distSqr(u);const D=((f.x-u.x)*(p.x-u.x)+(f.y-u.y)*(p.y-u.y))/T;return f.distSqr(D<0?u:D>1?p:p.sub(u)._mult(D)._add(u))}function P4(f,u){let p,T,D,z=!1;for(let F=0;F<f.length;F++){p=f[F];for(let j=0,Y=p.length-1;j<p.length;Y=j++)T=p[j],D=p[Y],T.y>u.y!=D.y>u.y&&u.x<(D.x-T.x)*(u.y-T.y)/(D.y-T.y)+T.x&&(z=!z)}return z}function P0(f,u){let p=!1;for(let T=0,D=f.length-1;T<f.length;D=T++){const z=f[T],F=f[D];z.y>u.y!=F.y>u.y&&u.x<(F.x-z.x)*(u.y-z.y)/(F.y-z.y)+z.x&&(p=!p)}return p}function X7(f,u,p){const T=p[0],D=p[2];if(f.x<T.x&&u.x<T.x||f.x>D.x&&u.x>D.x||f.y<T.y&&u.y<T.y||f.y>D.y&&u.y>D.y)return!1;const z=fe(f,u,p[0]);return z!==fe(f,u,p[1])||z!==fe(f,u,p[2])||z!==fe(f,u,p[3])}function Rd(f,u,p){const T=u.paint.get(f).value;return T.kind==="constant"?T.value:p.programConfigurations.get(u.id).getMaxValue(f)}function Rm(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Bm(f,u,p,T,D){if(!u[0]&&!u[1])return f;const z=Mt.convert(u)._mult(D);p==="viewport"&&z._rotate(-T);const F=[];for(let j=0;j<f.length;j++)F.push(f[j].sub(z));return F}Gt("CircleBucket",Pv,{omit:["layers"]});const K7=new Xr({"circle-sort-key":new on(ht.layout_circle["circle-sort-key"])});var J7={paint:new Xr({"circle-radius":new on(ht.paint_circle["circle-radius"]),"circle-color":new on(ht.paint_circle["circle-color"]),"circle-blur":new on(ht.paint_circle["circle-blur"]),"circle-opacity":new on(ht.paint_circle["circle-opacity"]),"circle-translate":new sn(ht.paint_circle["circle-translate"]),"circle-translate-anchor":new sn(ht.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sn(ht.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sn(ht.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new on(ht.paint_circle["circle-stroke-width"]),"circle-stroke-color":new on(ht.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new on(ht.paint_circle["circle-stroke-opacity"])}),layout:K7},Js=1e-6,eo=typeof Float32Array<"u"?Float32Array:Array;function I4(){var f=new eo(9);return eo!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function Lv(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function k4(f,u,p){var T=u[0],D=u[1],z=u[2],F=u[3],j=u[4],Y=u[5],ie=u[6],Ae=u[7],he=u[8],ge=u[9],ve=u[10],xe=u[11],Ge=u[12],Ne=u[13],nt=u[14],ut=u[15],et=p[0],at=p[1],_t=p[2],yt=p[3];return f[0]=et*T+at*j+_t*he+yt*Ge,f[1]=et*D+at*Y+_t*ge+yt*Ne,f[2]=et*z+at*ie+_t*ve+yt*nt,f[3]=et*F+at*Ae+_t*xe+yt*ut,f[4]=(et=p[4])*T+(at=p[5])*j+(_t=p[6])*he+(yt=p[7])*Ge,f[5]=et*D+at*Y+_t*ge+yt*Ne,f[6]=et*z+at*ie+_t*ve+yt*nt,f[7]=et*F+at*Ae+_t*xe+yt*ut,f[8]=(et=p[8])*T+(at=p[9])*j+(_t=p[10])*he+(yt=p[11])*Ge,f[9]=et*D+at*Y+_t*ge+yt*Ne,f[10]=et*z+at*ie+_t*ve+yt*nt,f[11]=et*F+at*Ae+_t*xe+yt*ut,f[12]=(et=p[12])*T+(at=p[13])*j+(_t=p[14])*he+(yt=p[15])*Ge,f[13]=et*D+at*Y+_t*ge+yt*Ne,f[14]=et*z+at*ie+_t*ve+yt*nt,f[15]=et*F+at*Ae+_t*xe+yt*ut,f}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)});var Bd,eN=k4;function L4(){var f=new eo(3);return eo!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function D4(f,u,p){var T=new eo(3);return T[0]=f,T[1]=u,T[2]=p,T}function zm(f,u,p){var T=u[0],D=u[1],z=u[2],F=u[3];return f[0]=p[0]*T+p[4]*D+p[8]*z+p[12]*F,f[1]=p[1]*T+p[5]*D+p[9]*z+p[13]*F,f[2]=p[2]*T+p[6]*D+p[10]*z+p[14]*F,f[3]=p[3]*T+p[7]*D+p[11]*z+p[15]*F,f}function R4(){var f=new eo(4);return eo!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function B4(f,u){const p=zm([],[f.x,f.y,0,1],u);return new Mt(p[0]/p[3],p[1]/p[3])}L4(),Bd=new eo(4),eo!=Float32Array&&(Bd[0]=0,Bd[1]=0,Bd[2]=0,Bd[3]=0),L4(),D4(1,0,0),D4(0,1,0),R4(),R4(),I4(),function(){var f;f=new eo(2),eo!=Float32Array&&(f[0]=0,f[1]=0)}();class z4 extends Pv{}Gt("HeatmapBucket",z4,{omit:["layers"]});var tN={paint:new Xr({"heatmap-radius":new on(ht.paint_heatmap["heatmap-radius"]),"heatmap-weight":new on(ht.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sn(ht.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ko(ht.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sn(ht.paint_heatmap["heatmap-opacity"])})};function Dv(f,{width:u,height:p},T,D){if(D){if(D instanceof Uint8ClampedArray)D=new Uint8Array(D.buffer);else if(D.length!==u*p*T)throw new RangeError(`mismatched image size. expected: ${D.length} but got: ${u*p*T}`)}else D=new Uint8Array(u*p*T);return f.width=u,f.height=p,f.data=D,f}function O4(f,{width:u,height:p},T){if(u===f.width&&p===f.height)return;const D=Dv({},{width:u,height:p},T);Rv(f,D,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,p)},T),f.width=u,f.height=p,f.data=D.data}function Rv(f,u,p,T,D,z){if(D.width===0||D.height===0)return u;if(D.width>f.width||D.height>f.height||p.x>f.width-D.width||p.y>f.height-D.height)throw new RangeError("out of range source coordinates for image copy");if(D.width>u.width||D.height>u.height||T.x>u.width-D.width||T.y>u.height-D.height)throw new RangeError("out of range destination coordinates for image copy");const F=f.data,j=u.data;if(F===j)throw new Error("srcData equals dstData, so image is already copied");for(let Y=0;Y<D.height;Y++){const ie=((p.y+Y)*f.width+p.x)*z,Ae=((T.y+Y)*u.width+T.x)*z;for(let he=0;he<D.width*z;he++)j[Ae+he]=F[ie+he]}return u}class zd{constructor(u,p){Dv(this,u,1,p)}resize(u){O4(this,u,1)}clone(){return new zd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,p,T,D,z){Rv(u,p,T,D,z,1)}}class Ea{constructor(u,p){Dv(this,u,4,p)}resize(u){O4(this,u,4)}replace(u,p){p?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Ea({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,p,T,D,z){Rv(u,p,T,D,z,4)}}function F4(f){const u={},p=f.resolution||256,T=f.clips?f.clips.length:1,D=f.image||new Ea({width:p,height:T});if(Math.log(p)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${p}`);const z=(F,j,Y)=>{u[f.evaluationKey]=Y;const ie=f.expression.evaluate(u);D.data[F+j+0]=Math.floor(255*ie.r/ie.a),D.data[F+j+1]=Math.floor(255*ie.g/ie.a),D.data[F+j+2]=Math.floor(255*ie.b/ie.a),D.data[F+j+3]=Math.floor(255*ie.a)};if(f.clips)for(let F=0,j=0;F<T;++F,j+=4*p)for(let Y=0,ie=0;Y<p;Y++,ie+=4){const Ae=Y/(p-1),{start:he,end:ge}=f.clips[F];z(j,ie,he*(1-Ae)+ge*Ae)}else for(let F=0,j=0;F<p;F++,j+=4)z(0,j,F/(p-1));return D}Gt("AlphaImage",zd),Gt("RGBAImage",Ea);var nN={paint:new Xr({"hillshade-illumination-direction":new sn(ht.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new sn(ht.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sn(ht.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sn(ht.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sn(ht.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sn(ht.paint_hillshade["hillshade-accent-color"])})};const rN=Kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:iN}=rN;var Om={exports:{}};function Fm(f,u,p){p=p||2;var T,D,z,F,j,Y,ie,Ae=u&&u.length,he=Ae?u[0]*p:f.length,ge=N4(f,0,he,p,!0),ve=[];if(!ge||ge.next===ge.prev)return ve;if(Ae&&(ge=function(Ge,Ne,nt,ut){var et,at,_t,yt=[];for(et=0,at=Ne.length;et<at;et++)(_t=N4(Ge,Ne[et]*ut,et<at-1?Ne[et+1]*ut:Ge.length,ut,!1))===_t.next&&(_t.steiner=!0),yt.push(hN(_t));for(yt.sort(AN),et=0;et<yt.length;et++)nt=uN(yt[et],nt);return nt}(f,u,ge,p)),f.length>80*p){T=z=f[0],D=F=f[1];for(var xe=p;xe<he;xe+=p)(j=f[xe])<T&&(T=j),(Y=f[xe+1])<D&&(D=Y),j>z&&(z=j),Y>F&&(F=Y);ie=(ie=Math.max(z-T,F-D))!==0?32767/ie:0}return Od(ge,ve,p,T,D,ie,0),ve}function N4(f,u,p,T,D){var z,F;if(D===Ov(f,u,p,T)>0)for(z=u;z<p;z+=T)F=G4(z,f[z],f[z+1],F);else for(z=p-T;z>=u;z-=T)F=G4(z,f[z],f[z+1],F);return F&&Nm(F,F.next)&&(Nd(F),F=F.next),F}function yh(f,u){if(!f)return f;u||(u=f);var p,T=f;do if(p=!1,T.steiner||!Nm(T,T.next)&&Ci(T.prev,T,T.next)!==0)T=T.next;else{if(Nd(T),(T=u=T.prev)===T.next)break;p=!0}while(p||T!==u);return u}function Od(f,u,p,T,D,z,F){if(f){!F&&z&&function(Ae,he,ge,ve){var xe=Ae;do xe.z===0&&(xe.z=Bv(xe.x,xe.y,he,ge,ve)),xe.prevZ=xe.prev,xe.nextZ=xe.next,xe=xe.next;while(xe!==Ae);xe.prevZ.nextZ=null,xe.prevZ=null,function(Ge){var Ne,nt,ut,et,at,_t,yt,rn,un=1;do{for(nt=Ge,Ge=null,at=null,_t=0;nt;){for(_t++,ut=nt,yt=0,Ne=0;Ne<un&&(yt++,ut=ut.nextZ);Ne++);for(rn=un;yt>0||rn>0&&ut;)yt!==0&&(rn===0||!ut||nt.z<=ut.z)?(et=nt,nt=nt.nextZ,yt--):(et=ut,ut=ut.nextZ,rn--),at?at.nextZ=et:Ge=et,et.prevZ=at,at=et;nt=ut}at.nextZ=null,un*=2}while(_t>1)}(xe)}(f,T,D,z);for(var j,Y,ie=f;f.prev!==f.next;)if(j=f.prev,Y=f.next,z?oN(f,T,D,z):sN(f))u.push(j.i/p|0),u.push(f.i/p|0),u.push(Y.i/p|0),Nd(f),f=Y.next,ie=Y.next;else if((f=Y)===ie){F?F===1?Od(f=aN(yh(f),u,p),u,p,T,D,z,2):F===2&&lN(f,u,p,T,D,z):Od(yh(f),u,p,T,D,z,1);break}}}function sN(f){var u=f.prev,p=f,T=f.next;if(Ci(u,p,T)>=0)return!1;for(var D=u.x,z=p.x,F=T.x,j=u.y,Y=p.y,ie=T.y,Ae=D<z?D<F?D:F:z<F?z:F,he=j<Y?j<ie?j:ie:Y<ie?Y:ie,ge=D>z?D>F?D:F:z>F?z:F,ve=j>Y?j>ie?j:ie:Y>ie?Y:ie,xe=T.next;xe!==u;){if(xe.x>=Ae&&xe.x<=ge&&xe.y>=he&&xe.y<=ve&&I0(D,j,z,Y,F,ie,xe.x,xe.y)&&Ci(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function oN(f,u,p,T){var D=f.prev,z=f,F=f.next;if(Ci(D,z,F)>=0)return!1;for(var j=D.x,Y=z.x,ie=F.x,Ae=D.y,he=z.y,ge=F.y,ve=j<Y?j<ie?j:ie:Y<ie?Y:ie,xe=Ae<he?Ae<ge?Ae:ge:he<ge?he:ge,Ge=j>Y?j>ie?j:ie:Y>ie?Y:ie,Ne=Ae>he?Ae>ge?Ae:ge:he>ge?he:ge,nt=Bv(ve,xe,u,p,T),ut=Bv(Ge,Ne,u,p,T),et=f.prevZ,at=f.nextZ;et&&et.z>=nt&&at&&at.z<=ut;){if(et.x>=ve&&et.x<=Ge&&et.y>=xe&&et.y<=Ne&&et!==D&&et!==F&&I0(j,Ae,Y,he,ie,ge,et.x,et.y)&&Ci(et.prev,et,et.next)>=0||(et=et.prevZ,at.x>=ve&&at.x<=Ge&&at.y>=xe&&at.y<=Ne&&at!==D&&at!==F&&I0(j,Ae,Y,he,ie,ge,at.x,at.y)&&Ci(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;et&&et.z>=nt;){if(et.x>=ve&&et.x<=Ge&&et.y>=xe&&et.y<=Ne&&et!==D&&et!==F&&I0(j,Ae,Y,he,ie,ge,et.x,et.y)&&Ci(et.prev,et,et.next)>=0)return!1;et=et.prevZ}for(;at&&at.z<=ut;){if(at.x>=ve&&at.x<=Ge&&at.y>=xe&&at.y<=Ne&&at!==D&&at!==F&&I0(j,Ae,Y,he,ie,ge,at.x,at.y)&&Ci(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function aN(f,u,p){var T=f;do{var D=T.prev,z=T.next.next;!Nm(D,z)&&U4(D,T,T.next,z)&&Fd(D,z)&&Fd(z,D)&&(u.push(D.i/p|0),u.push(T.i/p|0),u.push(z.i/p|0),Nd(T),Nd(T.next),T=f=z),T=T.next}while(T!==f);return yh(T)}function lN(f,u,p,T,D,z){var F=f;do{for(var j=F.next.next;j!==F.prev;){if(F.i!==j.i&&fN(F,j)){var Y=V4(F,j);return F=yh(F,F.next),Y=yh(Y,Y.next),Od(F,u,p,T,D,z,0),void Od(Y,u,p,T,D,z,0)}j=j.next}F=F.next}while(F!==f)}function AN(f,u){return f.x-u.x}function uN(f,u){var p=function(D,z){var F,j=z,Y=D.x,ie=D.y,Ae=-1/0;do{if(ie<=j.y&&ie>=j.next.y&&j.next.y!==j.y){var he=j.x+(ie-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(he<=Y&&he>Ae&&(Ae=he,F=j.x<j.next.x?j:j.next,he===Y))return F}j=j.next}while(j!==z);if(!F)return null;var ge,ve=F,xe=F.x,Ge=F.y,Ne=1/0;j=F;do Y>=j.x&&j.x>=xe&&Y!==j.x&&I0(ie<Ge?Y:Ae,ie,xe,Ge,ie<Ge?Ae:Y,ie,j.x,j.y)&&(ge=Math.abs(ie-j.y)/(Y-j.x),Fd(j,D)&&(ge<Ne||ge===Ne&&(j.x>F.x||j.x===F.x&&cN(F,j)))&&(F=j,Ne=ge)),j=j.next;while(j!==ve);return F}(f,u);if(!p)return u;var T=V4(p,f);return yh(T,T.next),yh(p,p.next)}function cN(f,u){return Ci(f.prev,f,u.prev)<0&&Ci(u.next,f,f.next)<0}function Bv(f,u,p,T,D){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-p)*D|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-T)*D|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function hN(f){var u=f,p=f;do(u.x<p.x||u.x===p.x&&u.y<p.y)&&(p=u),u=u.next;while(u!==f);return p}function I0(f,u,p,T,D,z,F,j){return(D-F)*(u-j)>=(f-F)*(z-j)&&(f-F)*(T-j)>=(p-F)*(u-j)&&(p-F)*(z-j)>=(D-F)*(T-j)}function fN(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!function(p,T){var D=p;do{if(D.i!==p.i&&D.next.i!==p.i&&D.i!==T.i&&D.next.i!==T.i&&U4(D,D.next,p,T))return!0;D=D.next}while(D!==p);return!1}(f,u)&&(Fd(f,u)&&Fd(u,f)&&function(p,T){var D=p,z=!1,F=(p.x+T.x)/2,j=(p.y+T.y)/2;do D.y>j!=D.next.y>j&&D.next.y!==D.y&&F<(D.next.x-D.x)*(j-D.y)/(D.next.y-D.y)+D.x&&(z=!z),D=D.next;while(D!==p);return z}(f,u)&&(Ci(f.prev,f,u.prev)||Ci(f,u.prev,u))||Nm(f,u)&&Ci(f.prev,f,f.next)>0&&Ci(u.prev,u,u.next)>0)}function Ci(f,u,p){return(u.y-f.y)*(p.x-u.x)-(u.x-f.x)*(p.y-u.y)}function Nm(f,u){return f.x===u.x&&f.y===u.y}function U4(f,u,p,T){var D=Vm(Ci(f,u,p)),z=Vm(Ci(f,u,T)),F=Vm(Ci(p,T,f)),j=Vm(Ci(p,T,u));return D!==z&&F!==j||!(D!==0||!Um(f,p,u))||!(z!==0||!Um(f,T,u))||!(F!==0||!Um(p,f,T))||!(j!==0||!Um(p,u,T))}function Um(f,u,p){return u.x<=Math.max(f.x,p.x)&&u.x>=Math.min(f.x,p.x)&&u.y<=Math.max(f.y,p.y)&&u.y>=Math.min(f.y,p.y)}function Vm(f){return f>0?1:f<0?-1:0}function Fd(f,u){return Ci(f.prev,f,f.next)<0?Ci(f,u,f.next)>=0&&Ci(f,f.prev,u)>=0:Ci(f,u,f.prev)<0||Ci(f,f.next,u)<0}function V4(f,u){var p=new zv(f.i,f.x,f.y),T=new zv(u.i,u.x,u.y),D=f.next,z=u.prev;return f.next=u,u.prev=f,p.next=D,D.prev=p,T.next=p,p.prev=T,z.next=T,T.prev=z,T}function G4(f,u,p,T){var D=new zv(f,u,p);return T?(D.next=T.next,D.prev=T,T.next.prev=D,T.next=D):(D.prev=D,D.next=D),D}function Nd(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function zv(f,u,p){this.i=f,this.x=u,this.y=p,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ov(f,u,p,T){for(var D=0,z=u,F=p-T;z<p;z+=T)D+=(f[F]-f[z])*(f[z+1]+f[F+1]),F=z;return D}function dN(f,u,p,T,D){j4(f,u,p||0,T||f.length-1,D||pN)}function j4(f,u,p,T,D){for(;T>p;){if(T-p>600){var z=T-p+1,F=u-p+1,j=Math.log(z),Y=.5*Math.exp(2*j/3),ie=.5*Math.sqrt(j*Y*(z-Y)/z)*(F-z/2<0?-1:1);j4(f,u,Math.max(p,Math.floor(u-F*Y/z+ie)),Math.min(T,Math.floor(u+(z-F)*Y/z+ie)),D)}var Ae=f[u],he=p,ge=T;for(Ud(f,p,u),D(f[T],Ae)>0&&Ud(f,p,T);he<ge;){for(Ud(f,he,ge),he++,ge--;D(f[he],Ae)<0;)he++;for(;D(f[ge],Ae)>0;)ge--}D(f[p],Ae)===0?Ud(f,p,ge):Ud(f,++ge,T),ge<=u&&(p=ge+1),u<=ge&&(T=ge-1)}}function Ud(f,u,p){var T=f[u];f[u]=f[p],f[p]=T}function pN(f,u){return f<u?-1:f>u?1:0}function Fv(f,u){const p=f.length;if(p<=1)return[f];const T=[];let D,z;for(let F=0;F<p;F++){const j=Fe(f[F]);j!==0&&(f[F].area=Math.abs(j),z===void 0&&(z=j<0),z===j<0?(D&&T.push(D),D=[f[F]]):D.push(f[F]))}if(D&&T.push(D),u>1)for(let F=0;F<T.length;F++)T[F].length<=u||(dN(T[F],u,1,T[F].length-1,gN),T[F]=T[F].slice(0,u));return T}function gN(f,u){return u.area-f.area}function Nv(f,u,p){const T=p.patternDependencies;let D=!1;for(const z of u){const F=z.paint.get(`${f}-pattern`);F.isConstant()||(D=!0);const j=F.constantOr(null);j&&(D=!0,T[j.to]=!0,T[j.from]=!0)}return D}function Uv(f,u,p,T,D){const z=D.patternDependencies;for(const F of u){const j=F.paint.get(`${f}-pattern`).value;if(j.kind!=="constant"){let Y=j.evaluate({zoom:T-1},p,{},D.availableImages),ie=j.evaluate({zoom:T},p,{},D.availableImages),Ae=j.evaluate({zoom:T+1},p,{},D.availableImages);Y=Y&&Y.name?Y.name:Y,ie=ie&&ie.name?ie.name:ie,Ae=Ae&&Ae.name?Ae.name:Ae,z[Y]=!0,z[ie]=!0,z[Ae]=!0,p.patterns[F.id]={min:Y,mid:ie,max:Ae}}}return p}Om.exports=Fm,Om.exports.default=Fm,Fm.deviation=function(f,u,p,T){var D=u&&u.length,z=Math.abs(Ov(f,0,D?u[0]*p:f.length,p));if(D)for(var F=0,j=u.length;F<j;F++)z-=Math.abs(Ov(f,u[F]*p,F<j-1?u[F+1]*p:f.length,p));var Y=0;for(F=0;F<T.length;F+=3){var ie=T[F]*p,Ae=T[F+1]*p,he=T[F+2]*p;Y+=Math.abs((f[ie]-f[he])*(f[Ae+1]-f[ie+1])-(f[ie]-f[Ae])*(f[he+1]-f[ie+1]))}return z===0&&Y===0?0:Math.abs((Y-z)/z)},Fm.flatten=function(f){for(var u=f[0][0].length,p={vertices:[],holes:[],dimensions:u},T=0,D=0;D<f.length;D++){for(var z=0;z<f[D].length;z++)for(var F=0;F<u;F++)p.vertices.push(f[D][z][F]);D>0&&p.holes.push(T+=f[D-1].length)}return p};class Vv{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new te,this.indexArray=new st,this.indexArray2=new Je,this.programConfigurations=new ph(u.layers,u.zoom),this.segments=new mt,this.segments2=new mt,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,T){this.hasPattern=Nv("fill",this.layers,p);const D=this.layers[0].layout.get("fill-sort-key"),z=!D.isConstant(),F=[];for(const{feature:j,id:Y,index:ie,sourceLayerIndex:Ae}of u){const he=this.layers[0]._featureFilter.needGeometry,ge=mh(j,he);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),ge,T))continue;const ve=z?D.evaluate(ge,{},T,p.availableImages):void 0,xe={id:Y,properties:j.properties,type:j.type,sourceLayerIndex:Ae,index:ie,geometry:he?ge.geometry:gh(j),patterns:{},sortKey:ve};F.push(xe)}z&&F.sort((j,Y)=>j.sortKey-Y.sortKey);for(const j of F){const{geometry:Y,index:ie,sourceLayerIndex:Ae}=j;if(this.hasPattern){const he=Uv("fill",this.layers,j,this.zoom,p);this.patternFeatures.push(he)}else this.addFeature(j,Y,ie,T,{});p.featureIndex.insert(u[ie].feature,Y,ie,Ae,this.index)}}update(u,p,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,T)}addFeatures(u,p,T){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,p,T)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,iN),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,p,T,D,z){for(const F of Fv(p,500)){let j=0;for(const ve of F)j+=ve.length;const Y=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),ie=Y.vertexLength,Ae=[],he=[];for(const ve of F){if(ve.length===0)continue;ve!==F[0]&&he.push(Ae.length/2);const xe=this.segments2.prepareSegment(ve.length,this.layoutVertexArray,this.indexArray2),Ge=xe.vertexLength;this.layoutVertexArray.emplaceBack(ve[0].x,ve[0].y),this.indexArray2.emplaceBack(Ge+ve.length-1,Ge),Ae.push(ve[0].x),Ae.push(ve[0].y);for(let Ne=1;Ne<ve.length;Ne++)this.layoutVertexArray.emplaceBack(ve[Ne].x,ve[Ne].y),this.indexArray2.emplaceBack(Ge+Ne-1,Ge+Ne),Ae.push(ve[Ne].x),Ae.push(ve[Ne].y);xe.vertexLength+=ve.length,xe.primitiveLength+=ve.length}const ge=Om.exports(Ae,he);for(let ve=0;ve<ge.length;ve+=3)this.indexArray.emplaceBack(ie+ge[ve],ie+ge[ve+1],ie+ge[ve+2]);Y.vertexLength+=j,Y.primitiveLength+=ge.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,T,z,D)}}Gt("FillBucket",Vv,{omit:["layers","patternFeatures"]});const mN=new Xr({"fill-sort-key":new on(ht.layout_fill["fill-sort-key"])});var yN={paint:new Xr({"fill-antialias":new sn(ht.paint_fill["fill-antialias"]),"fill-opacity":new on(ht.paint_fill["fill-opacity"]),"fill-color":new on(ht.paint_fill["fill-color"]),"fill-outline-color":new on(ht.paint_fill["fill-outline-color"]),"fill-translate":new sn(ht.paint_fill["fill-translate"]),"fill-translate-anchor":new sn(ht.paint_fill["fill-translate-anchor"]),"fill-pattern":new wn(ht.paint_fill["fill-pattern"])}),layout:mN};const _N=Kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vN=Kr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xN}=_N;var yc={},wN=Mt,$4=k0;function k0(f,u,p,T,D){this.properties={},this.extent=p,this.type=0,this._pbf=f,this._geometry=-1,this._keys=T,this._values=D,f.readFields(bN,this,u)}function bN(f,u,p){f==1?u.id=p.readVarint():f==2?function(T,D){for(var z=T.readVarint()+T.pos;T.pos<z;){var F=D._keys[T.readVarint()],j=D._values[T.readVarint()];D.properties[F]=j}}(p,u):f==3?u.type=p.readVarint():f==4&&(u._geometry=p.pos)}function EN(f){for(var u,p,T=0,D=0,z=f.length,F=z-1;D<z;F=D++)T+=((p=f[F]).x-(u=f[D]).x)*(u.y+p.y);return T}k0.types=["Unknown","Point","LineString","Polygon"],k0.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var u,p=f.readVarint()+f.pos,T=1,D=0,z=0,F=0,j=[];f.pos<p;){if(D<=0){var Y=f.readVarint();T=7&Y,D=Y>>3}if(D--,T===1||T===2)z+=f.readSVarint(),F+=f.readSVarint(),T===1&&(u&&j.push(u),u=[]),u.push(new wN(z,F));else{if(T!==7)throw new Error("unknown command "+T);u&&u.push(u[0].clone())}}return u&&j.push(u),j},k0.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var u=f.readVarint()+f.pos,p=1,T=0,D=0,z=0,F=1/0,j=-1/0,Y=1/0,ie=-1/0;f.pos<u;){if(T<=0){var Ae=f.readVarint();p=7&Ae,T=Ae>>3}if(T--,p===1||p===2)(D+=f.readSVarint())<F&&(F=D),D>j&&(j=D),(z+=f.readSVarint())<Y&&(Y=z),z>ie&&(ie=z);else if(p!==7)throw new Error("unknown command "+p)}return[F,Y,j,ie]},k0.prototype.toGeoJSON=function(f,u,p){var T,D,z=this.extent*Math.pow(2,p),F=this.extent*f,j=this.extent*u,Y=this.loadGeometry(),ie=k0.types[this.type];function Ae(ve){for(var xe=0;xe<ve.length;xe++){var Ge=ve[xe];ve[xe]=[360*(Ge.x+F)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ge.y+j)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var he=[];for(T=0;T<Y.length;T++)he[T]=Y[T][0];Ae(Y=he);break;case 2:for(T=0;T<Y.length;T++)Ae(Y[T]);break;case 3:for(Y=function(ve){var xe=ve.length;if(xe<=1)return[ve];for(var Ge,Ne,nt=[],ut=0;ut<xe;ut++){var et=EN(ve[ut]);et!==0&&(Ne===void 0&&(Ne=et<0),Ne===et<0?(Ge&&nt.push(Ge),Ge=[ve[ut]]):Ge.push(ve[ut]))}return Ge&&nt.push(Ge),nt}(Y),T=0;T<Y.length;T++)for(D=0;D<Y[T].length;D++)Ae(Y[T][D])}Y.length===1?Y=Y[0]:ie="Multi"+ie;var ge={type:"Feature",geometry:{type:ie,coordinates:Y},properties:this.properties};return"id"in this&&(ge.id=this.id),ge};var TN=$4,H4=W4;function W4(f,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(SN,this,u),this.length=this._features.length}function SN(f,u,p){f===15?u.version=p.readVarint():f===1?u.name=p.readString():f===5?u.extent=p.readVarint():f===2?u._features.push(p.pos):f===3?u._keys.push(p.readString()):f===4&&u._values.push(function(T){for(var D=null,z=T.readVarint()+T.pos;T.pos<z;){var F=T.readVarint()>>3;D=F===1?T.readString():F===2?T.readFloat():F===3?T.readDouble():F===4?T.readVarint64():F===5?T.readVarint():F===6?T.readSVarint():F===7?T.readBoolean():null}return D}(p))}W4.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var u=this._pbf.readVarint()+this._pbf.pos;return new TN(this._pbf,u,this.extent,this._keys,this._values)};var MN=H4;function CN(f,u,p){if(f===3){var T=new MN(p,p.readVarint()+p.pos);T.length&&(u[T.name]=T)}}yc.VectorTile=function(f,u){this.layers=f.readFields(CN,{},u)},yc.VectorTileFeature=$4,yc.VectorTileLayer=H4;const PN=yc.VectorTileFeature.types,Gv=Math.pow(2,13);function Vd(f,u,p,T,D,z,F,j){f.emplaceBack(u,p,2*Math.floor(T*Gv)+F,D*Gv*2,z*Gv*2,Math.round(j))}class jv{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new le,this.centroidVertexArray=new N,this.indexArray=new st,this.programConfigurations=new ph(u.layers,u.zoom),this.segments=new mt,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,T){this.features=[],this.hasPattern=Nv("fill-extrusion",this.layers,p);for(const{feature:D,id:z,index:F,sourceLayerIndex:j}of u){const Y=this.layers[0]._featureFilter.needGeometry,ie=mh(D,Y);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),ie,T))continue;const Ae={id:z,sourceLayerIndex:j,index:F,geometry:Y?ie.geometry:gh(D),properties:D.properties,type:D.type,patterns:{}};this.hasPattern?this.features.push(Uv("fill-extrusion",this.layers,Ae,this.zoom,p)):this.addFeature(Ae,Ae.geometry,F,T,{}),p.featureIndex.insert(D,Ae.geometry,F,j,this.index,!0)}}addFeatures(u,p,T){for(const D of this.features){const{geometry:z}=D;this.addFeature(D,z,D.index,p,T)}}update(u,p,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,T)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,xN),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,vN.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,p,T,D,z){const F={x:0,y:0,vertexCount:0};for(const j of Fv(p,500)){let Y=0;for(const xe of j)Y+=xe.length;let ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const xe of j){if(xe.length===0||kN(xe))continue;let Ge=0;for(let Ne=0;Ne<xe.length;Ne++){const nt=xe[Ne];if(Ne>=1){const ut=xe[Ne-1];if(!IN(nt,ut)){ie.vertexLength+4>mt.MAX_VERTEX_ARRAY_LENGTH&&(ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const et=nt.sub(ut)._perp()._unit(),at=ut.dist(nt);Ge+at>32768&&(Ge=0),Vd(this.layoutVertexArray,nt.x,nt.y,et.x,et.y,0,0,Ge),Vd(this.layoutVertexArray,nt.x,nt.y,et.x,et.y,0,1,Ge),F.x+=2*nt.x,F.y+=2*nt.y,F.vertexCount+=2,Ge+=at,Vd(this.layoutVertexArray,ut.x,ut.y,et.x,et.y,0,0,Ge),Vd(this.layoutVertexArray,ut.x,ut.y,et.x,et.y,0,1,Ge),F.x+=2*ut.x,F.y+=2*ut.y,F.vertexCount+=2;const _t=ie.vertexLength;this.indexArray.emplaceBack(_t,_t+2,_t+1),this.indexArray.emplaceBack(_t+1,_t+2,_t+3),ie.vertexLength+=4,ie.primitiveLength+=2}}}}if(ie.vertexLength+Y>mt.MAX_VERTEX_ARRAY_LENGTH&&(ie=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray)),PN[u.type]!=="Polygon")continue;const Ae=[],he=[],ge=ie.vertexLength;for(const xe of j)if(xe.length!==0){xe!==j[0]&&he.push(Ae.length/2);for(let Ge=0;Ge<xe.length;Ge++){const Ne=xe[Ge];Vd(this.layoutVertexArray,Ne.x,Ne.y,0,0,1,1,0),F.x+=Ne.x,F.y+=Ne.y,F.vertexCount+=1,Ae.push(Ne.x),Ae.push(Ne.y)}}const ve=Om.exports(Ae,he);for(let xe=0;xe<ve.length;xe+=3)this.indexArray.emplaceBack(ge+ve[xe],ge+ve[xe+2],ge+ve[xe+1]);ie.primitiveLength+=ve.length/3,ie.vertexLength+=Y}for(let j=0;j<F.vertexCount;j++)this.centroidVertexArray.emplaceBack(Math.floor(F.x/F.vertexCount),Math.floor(F.y/F.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,T,z,D)}}function IN(f,u){return f.x===u.x&&(f.x<0||f.x>Wi)||f.y===u.y&&(f.y<0||f.y>Wi)}function kN(f){return f.every(u=>u.x<0)||f.every(u=>u.x>Wi)||f.every(u=>u.y<0)||f.every(u=>u.y>Wi)}Gt("FillExtrusionBucket",jv,{omit:["layers","features"]});var LN={paint:new Xr({"fill-extrusion-opacity":new sn(ht["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new on(ht["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sn(ht["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sn(ht["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wn(ht["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new on(ht["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new on(ht["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sn(ht["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Gd(f,u){return f.x*u.x+f.y*u.y}function Q4(f,u){if(f.length===1){let p=0;const T=u[p++];let D;for(;!D||T.equals(D);)if(D=u[p++],!D)return 1/0;for(;p<u.length;p++){const z=u[p],F=f[0],j=D.sub(T),Y=z.sub(T),ie=F.sub(T),Ae=Gd(j,j),he=Gd(j,Y),ge=Gd(Y,Y),ve=Gd(ie,j),xe=Gd(ie,Y),Ge=Ae*ge-he*he,Ne=(ge*ve-he*xe)/Ge,nt=(Ae*xe-he*ve)/Ge,ut=T.z*(1-Ne-nt)+D.z*Ne+z.z*nt;if(isFinite(ut))return ut}return 1/0}{let p=1/0;for(const T of u)p=Math.min(p,T.z);return p}}const DN=Kr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:RN}=DN,BN=Kr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:zN}=BN,ON=yc.VectorTileFeature.types,FN=Math.cos(Math.PI/180*37.5),q4=Math.pow(2,14)/.5;class $v{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(p=>{this.gradients[p.id]={}}),this.layoutVertexArray=new pe,this.layoutVertexArray2=new Be,this.indexArray=new st,this.programConfigurations=new ph(u.layers,u.zoom),this.segments=new mt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,T){this.hasPattern=Nv("line",this.layers,p);const D=this.layers[0].layout.get("line-sort-key"),z=!D.isConstant(),F=[];for(const{feature:j,id:Y,index:ie,sourceLayerIndex:Ae}of u){const he=this.layers[0]._featureFilter.needGeometry,ge=mh(j,he);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),ge,T))continue;const ve=z?D.evaluate(ge,{},T):void 0,xe={id:Y,properties:j.properties,type:j.type,sourceLayerIndex:Ae,index:ie,geometry:he?ge.geometry:gh(j),patterns:{},sortKey:ve};F.push(xe)}z&&F.sort((j,Y)=>j.sortKey-Y.sortKey);for(const j of F){const{geometry:Y,index:ie,sourceLayerIndex:Ae}=j;if(this.hasPattern){const he=Uv("line",this.layers,j,this.zoom,p);this.patternFeatures.push(he)}else this.addFeature(j,Y,ie,T,{});p.featureIndex.insert(u[ie].feature,Y,ie,Ae,this.index)}}update(u,p,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,T)}addFeatures(u,p,T){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,p,T)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,zN)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,RN),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,p,T,D,z){const F=this.layers[0].layout,j=F.get("line-join").evaluate(u,{}),Y=F.get("line-cap"),ie=F.get("line-miter-limit"),Ae=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const he of p)this.addLine(he,u,j,Y,ie,Ae);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,T,z,D)}addLine(u,p,T,D,z,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let nt=0;nt<u.length-1;nt++)this.totalDistance+=u[nt].dist(u[nt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=ON[p.type]==="Polygon";let Y=u.length;for(;Y>=2&&u[Y-1].equals(u[Y-2]);)Y--;let ie=0;for(;ie<Y-1&&u[ie].equals(u[ie+1]);)ie++;if(Y<(j?3:2))return;T==="bevel"&&(z=1.05);const Ae=this.overscaling<=16?122880/(512*this.overscaling):0,he=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray);let ge,ve,xe,Ge,Ne;this.e1=this.e2=-1,j&&(ge=u[Y-2],Ne=u[ie].sub(ge)._unit()._perp());for(let nt=ie;nt<Y;nt++){if(xe=nt===Y-1?j?u[ie+1]:void 0:u[nt+1],xe&&u[nt].equals(xe))continue;Ne&&(Ge=Ne),ge&&(ve=ge),ge=u[nt],Ne=xe?xe.sub(ge)._unit()._perp():Ge,Ge=Ge||Ne;let ut=Ge.add(Ne);ut.x===0&&ut.y===0||ut._unit();const et=Ge.x*Ne.x+Ge.y*Ne.y,at=ut.x*Ne.x+ut.y*Ne.y,_t=at!==0?1/at:1/0,yt=2*Math.sqrt(2-2*at),rn=at<FN&&ve&&xe,un=Ge.x*Ne.y-Ge.y*Ne.x>0;if(rn&&nt>ie){const Nt=ge.dist(ve);if(Nt>2*Ae){const Yt=ge.sub(ge.sub(ve)._mult(Ae/Nt)._round());this.updateDistance(ve,Yt),this.addCurrentVertex(Yt,Ge,0,0,he),ve=Yt}}const Zt=ve&&xe;let jt=Zt?T:j?"butt":D;if(Zt&&jt==="round"&&(_t<F?jt="miter":_t<=2&&(jt="fakeround")),jt==="miter"&&_t>z&&(jt="bevel"),jt==="bevel"&&(_t>2&&(jt="flipbevel"),_t<z&&(jt="miter")),ve&&this.updateDistance(ve,ge),jt==="miter")ut._mult(_t),this.addCurrentVertex(ge,ut,0,0,he);else if(jt==="flipbevel"){if(_t>100)ut=Ne.mult(-1);else{const Nt=_t*Ge.add(Ne).mag()/Ge.sub(Ne).mag();ut._perp()._mult(Nt*(un?-1:1))}this.addCurrentVertex(ge,ut,0,0,he),this.addCurrentVertex(ge,ut.mult(-1),0,0,he)}else if(jt==="bevel"||jt==="fakeround"){const Nt=-Math.sqrt(_t*_t-1),Yt=un?Nt:0,Wt=un?0:Nt;if(ve&&this.addCurrentVertex(ge,Ge,Yt,Wt,he),jt==="fakeround"){const Pt=Math.round(180*yt/Math.PI/20);for(let Tn=1;Tn<Pt;Tn++){let gn=Tn/Pt;if(gn!==.5){const Qr=gn-.5;gn+=gn*Qr*(gn-1)*((1.0904+et*(et*(3.55645-1.43519*et)-3.2452))*Qr*Qr+(.848013+et*(.215638*et-1.06021)))}const rr=Ne.sub(Ge)._mult(gn)._add(Ge)._unit()._mult(un?-1:1);this.addHalfVertex(ge,rr.x,rr.y,!1,un,0,he)}}xe&&this.addCurrentVertex(ge,Ne,-Yt,-Wt,he)}else if(jt==="butt")this.addCurrentVertex(ge,ut,0,0,he);else if(jt==="square"){const Nt=ve?1:-1;this.addCurrentVertex(ge,ut,Nt,Nt,he)}else jt==="round"&&(ve&&(this.addCurrentVertex(ge,Ge,0,0,he),this.addCurrentVertex(ge,Ge,1,1,he,!0)),xe&&(this.addCurrentVertex(ge,Ne,-1,-1,he,!0),this.addCurrentVertex(ge,Ne,0,0,he)));if(rn&&nt<Y-1){const Nt=ge.dist(xe);if(Nt>2*Ae){const Yt=ge.add(xe.sub(ge)._mult(Ae/Nt)._round());this.updateDistance(ge,Yt),this.addCurrentVertex(Yt,Ne,0,0,he),ge=Yt}}}}addCurrentVertex(u,p,T,D,z,F=!1){const j=p.y*D-p.x,Y=-p.y-p.x*D;this.addHalfVertex(u,p.x+p.y*T,p.y-p.x*T,F,!1,T,z),this.addHalfVertex(u,j,Y,F,!0,-D,z),this.distance>q4/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(u,p,T,D,z,F))}addHalfVertex({x:u,y:p},T,D,z,F,j,Y){const ie=.5*(this.lineClips?this.scaledDistance*(q4-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(z?1:0),(p<<1)+(F?1:0),Math.round(63*T)+128,Math.round(63*D)+128,1+(j===0?0:j<0?-1:1)|(63&ie)<<2,ie>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ae=Y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ae),Y.primitiveLength++),F?this.e2=Ae:this.e1=Ae}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,p){this.distance+=u.dist(p),this.updateScaledDistance()}}Gt("LineBucket",$v,{omit:["layers","patternFeatures"]});const NN=new Xr({"line-cap":new sn(ht.layout_line["line-cap"]),"line-join":new on(ht.layout_line["line-join"]),"line-miter-limit":new sn(ht.layout_line["line-miter-limit"]),"line-round-limit":new sn(ht.layout_line["line-round-limit"]),"line-sort-key":new on(ht.layout_line["line-sort-key"])});var Z4={paint:new Xr({"line-opacity":new on(ht.paint_line["line-opacity"]),"line-color":new on(ht.paint_line["line-color"]),"line-translate":new sn(ht.paint_line["line-translate"]),"line-translate-anchor":new sn(ht.paint_line["line-translate-anchor"]),"line-width":new on(ht.paint_line["line-width"]),"line-gap-width":new on(ht.paint_line["line-gap-width"]),"line-offset":new on(ht.paint_line["line-offset"]),"line-blur":new on(ht.paint_line["line-blur"]),"line-dasharray":new as(ht.paint_line["line-dasharray"]),"line-pattern":new wn(ht.paint_line["line-pattern"]),"line-gradient":new Ko(ht.paint_line["line-gradient"])}),layout:NN};const Y4=new class extends on{possiblyEvaluate(f,u){return u=new Fr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(f,u)}evaluate(f,u,p,T){return u=H({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(f,u,p,T)}}(Z4.paint.properties["line-width"].specification);function X4(f,u){return u>0?u+2*f:f}Y4.useIntegerZoom=!0;const UN=Kr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),VN=Kr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Kr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const GN=Kr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Kr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const K4=Kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),jN=Kr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $N(f,u,p){return f.sections.forEach(T=>{T.text=function(D,z,F){const j=z.layout.get("text-transform").evaluate(F,{});return j==="uppercase"?D=D.toLocaleUpperCase():j==="lowercase"&&(D=D.toLocaleLowerCase()),_s.applyArabicShaping&&(D=_s.applyArabicShaping(D)),D}(T.text,u,p)}),f}Kr([{name:"triangle",components:3,type:"Uint16"}]),Kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Kr([{type:"Float32",name:"offsetX"}]),Kr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const jd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ls=24,Hv=Vr,J4=function(f,u,p,T,D){var z,F,j=8*D-T-1,Y=(1<<j)-1,ie=Y>>1,Ae=-7,he=p?D-1:0,ge=p?-1:1,ve=f[u+he];for(he+=ge,z=ve&(1<<-Ae)-1,ve>>=-Ae,Ae+=j;Ae>0;z=256*z+f[u+he],he+=ge,Ae-=8);for(F=z&(1<<-Ae)-1,z>>=-Ae,Ae+=T;Ae>0;F=256*F+f[u+he],he+=ge,Ae-=8);if(z===0)z=1-ie;else{if(z===Y)return F?NaN:1/0*(ve?-1:1);F+=Math.pow(2,T),z-=ie}return(ve?-1:1)*F*Math.pow(2,z-T)},e5=function(f,u,p,T,D,z){var F,j,Y,ie=8*z-D-1,Ae=(1<<ie)-1,he=Ae>>1,ge=D===23?Math.pow(2,-24)-Math.pow(2,-77):0,ve=T?0:z-1,xe=T?1:-1,Ge=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(j=isNaN(u)?1:0,F=Ae):(F=Math.floor(Math.log(u)/Math.LN2),u*(Y=Math.pow(2,-F))<1&&(F--,Y*=2),(u+=F+he>=1?ge/Y:ge*Math.pow(2,1-he))*Y>=2&&(F++,Y/=2),F+he>=Ae?(j=0,F=Ae):F+he>=1?(j=(u*Y-1)*Math.pow(2,D),F+=he):(j=u*Math.pow(2,he-1)*Math.pow(2,D),F=0));D>=8;f[p+ve]=255&j,ve+=xe,j/=256,D-=8);for(F=F<<D|j,ie+=D;ie>0;f[p+ve]=255&F,ve+=xe,F/=256,ie-=8);f[p+ve-xe]|=128*Ge};function Vr(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var _c,Wv=4294967296,t5=1/Wv,n5=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _u(f){return f.type===Vr.Bytes?f.readVarint()+f.pos:f.pos+1}function L0(f,u,p){return p?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function r5(f,u,p){var T=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));p.realloc(T);for(var D=p.pos-1;D>=f;D--)p.buf[D+T]=p.buf[D]}function HN(f,u){for(var p=0;p<f.length;p++)u.writeVarint(f[p])}function WN(f,u){for(var p=0;p<f.length;p++)u.writeSVarint(f[p])}function QN(f,u){for(var p=0;p<f.length;p++)u.writeFloat(f[p])}function qN(f,u){for(var p=0;p<f.length;p++)u.writeDouble(f[p])}function ZN(f,u){for(var p=0;p<f.length;p++)u.writeBoolean(f[p])}function YN(f,u){for(var p=0;p<f.length;p++)u.writeFixed32(f[p])}function XN(f,u){for(var p=0;p<f.length;p++)u.writeSFixed32(f[p])}function KN(f,u){for(var p=0;p<f.length;p++)u.writeFixed64(f[p])}function JN(f,u){for(var p=0;p<f.length;p++)u.writeSFixed64(f[p])}function Gm(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+16777216*f[u+3]}function D0(f,u,p){f[p]=u,f[p+1]=u>>>8,f[p+2]=u>>>16,f[p+3]=u>>>24}function i5(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+(f[u+3]<<24)}function eU(f,u,p){f===1&&p.readMessage(tU,u)}function tU(f,u,p){if(f===3){const{id:T,bitmap:D,width:z,height:F,left:j,top:Y,advance:ie}=p.readMessage(nU,{});u.push({id:T,bitmap:new zd({width:z+6,height:F+6},D),metrics:{width:z,height:F,left:j,top:Y,advance:ie}})}}function nU(f,u,p){f===1?u.id=p.readVarint():f===2?u.bitmap=p.readBytes():f===3?u.width=p.readVarint():f===4?u.height=p.readVarint():f===5?u.left=p.readSVarint():f===6?u.top=p.readSVarint():f===7&&(u.advance=p.readVarint())}function s5(f){let u=0,p=0;for(const F of f)u+=F.w*F.h,p=Math.max(p,F.w);f.sort((F,j)=>j.h-F.h);const T=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),p),h:1/0}];let D=0,z=0;for(const F of f)for(let j=T.length-1;j>=0;j--){const Y=T[j];if(!(F.w>Y.w||F.h>Y.h)){if(F.x=Y.x,F.y=Y.y,z=Math.max(z,F.y+F.h),D=Math.max(D,F.x+F.w),F.w===Y.w&&F.h===Y.h){const ie=T.pop();j<T.length&&(T[j]=ie)}else F.h===Y.h?(Y.x+=F.w,Y.w-=F.w):F.w===Y.w?(Y.y+=F.h,Y.h-=F.h):(T.push({x:Y.x+F.w,y:Y.y,w:Y.w-F.w,h:F.h}),Y.y+=F.h,Y.h-=F.h);break}}return{w:D,h:z,fill:u/(D*z)||0}}Vr.prototype={destroy:function(){this.buf=null},readFields:function(f,u,p){for(p=p||this.length;this.pos<p;){var T=this.readVarint(),D=T>>3,z=this.pos;this.type=7&T,f(D,u,this),this.pos===z&&this.skip(T)}return u},readMessage:function(f,u){return this.readFields(f,u,this.readVarint()+this.pos)},readFixed32:function(){var f=Gm(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=i5(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=Gm(this.buf,this.pos)+Gm(this.buf,this.pos+4)*Wv;return this.pos+=8,f},readSFixed64:function(){var f=Gm(this.buf,this.pos)+i5(this.buf,this.pos+4)*Wv;return this.pos+=8,f},readFloat:function(){var f=J4(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=J4(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var u,p,T=this.buf;return u=127&(p=T[this.pos++]),p<128?u:(u|=(127&(p=T[this.pos++]))<<7,p<128?u:(u|=(127&(p=T[this.pos++]))<<14,p<128?u:(u|=(127&(p=T[this.pos++]))<<21,p<128?u:function(D,z,F){var j,Y,ie=F.buf;if(j=(112&(Y=ie[F.pos++]))>>4,Y<128||(j|=(127&(Y=ie[F.pos++]))<<3,Y<128)||(j|=(127&(Y=ie[F.pos++]))<<10,Y<128)||(j|=(127&(Y=ie[F.pos++]))<<17,Y<128)||(j|=(127&(Y=ie[F.pos++]))<<24,Y<128)||(j|=(1&(Y=ie[F.pos++]))<<31,Y<128))return L0(D,j,z);throw new Error("Expected varint not more than 10 bytes")}(u|=(15&(p=T[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,u=this.pos;return this.pos=f,f-u>=12&&n5?function(p,T,D){return n5.decode(p.subarray(T,D))}(this.buf,u,f):function(p,T,D){for(var z="",F=T;F<D;){var j,Y,ie,Ae=p[F],he=null,ge=Ae>239?4:Ae>223?3:Ae>191?2:1;if(F+ge>D)break;ge===1?Ae<128&&(he=Ae):ge===2?(192&(j=p[F+1]))==128&&(he=(31&Ae)<<6|63&j)<=127&&(he=null):ge===3?(Y=p[F+2],(192&(j=p[F+1]))==128&&(192&Y)==128&&((he=(15&Ae)<<12|(63&j)<<6|63&Y)<=2047||he>=55296&&he<=57343)&&(he=null)):ge===4&&(Y=p[F+2],ie=p[F+3],(192&(j=p[F+1]))==128&&(192&Y)==128&&(192&ie)==128&&((he=(15&Ae)<<18|(63&j)<<12|(63&Y)<<6|63&ie)<=65535||he>=1114112)&&(he=null)),he===null?(he=65533,ge=1):he>65535&&(he-=65536,z+=String.fromCharCode(he>>>10&1023|55296),he=56320|1023&he),z+=String.fromCharCode(he),F+=ge}return z}(this.buf,u,f)},readBytes:function(){var f=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,f);return this.pos=f,u},readPackedVarint:function(f,u){if(this.type!==Vr.Bytes)return f.push(this.readVarint(u));var p=_u(this);for(f=f||[];this.pos<p;)f.push(this.readVarint(u));return f},readPackedSVarint:function(f){if(this.type!==Vr.Bytes)return f.push(this.readSVarint());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==Vr.Bytes)return f.push(this.readBoolean());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==Vr.Bytes)return f.push(this.readFloat());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==Vr.Bytes)return f.push(this.readDouble());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==Vr.Bytes)return f.push(this.readFixed32());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==Vr.Bytes)return f.push(this.readSFixed32());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==Vr.Bytes)return f.push(this.readFixed64());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==Vr.Bytes)return f.push(this.readSFixed64());var u=_u(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed64());return f},skip:function(f){var u=7&f;if(u===Vr.Varint)for(;this.buf[this.pos++]>127;);else if(u===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Vr.Fixed32)this.pos+=4;else{if(u!==Vr.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(f,u){this.writeVarint(f<<3|u)},realloc:function(f){for(var u=this.length||16;u<this.pos+f;)u*=2;if(u!==this.length){var p=new Uint8Array(u);p.set(this.buf),this.buf=p,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),D0(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),D0(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),D0(this.buf,-1&f,this.pos),D0(this.buf,Math.floor(f*t5),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),D0(this.buf,-1&f,this.pos),D0(this.buf,Math.floor(f*t5),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?function(u,p){var T,D;if(u>=0?(T=u%4294967296|0,D=u/4294967296|0):(D=~(-u/4294967296),4294967295^(T=~(-u%4294967296))?T=T+1|0:(T=0,D=D+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");p.realloc(10),function(z,F,j){j.buf[j.pos++]=127&z|128,z>>>=7,j.buf[j.pos++]=127&z|128,z>>>=7,j.buf[j.pos++]=127&z|128,z>>>=7,j.buf[j.pos++]=127&z|128,j.buf[j.pos]=127&(z>>>=7)}(T,0,p),function(z,F){var j=(7&z)<<4;F.buf[F.pos++]|=j|((z>>>=3)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z)))))}(D,p)}(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var u=this.pos;this.pos=function(T,D,z){for(var F,j,Y=0;Y<D.length;Y++){if((F=D.charCodeAt(Y))>55295&&F<57344){if(!j){F>56319||Y+1===D.length?(T[z++]=239,T[z++]=191,T[z++]=189):j=F;continue}if(F<56320){T[z++]=239,T[z++]=191,T[z++]=189,j=F;continue}F=j-55296<<10|F-56320|65536,j=null}else j&&(T[z++]=239,T[z++]=191,T[z++]=189,j=null);F<128?T[z++]=F:(F<2048?T[z++]=F>>6|192:(F<65536?T[z++]=F>>12|224:(T[z++]=F>>18|240,T[z++]=F>>12&63|128),T[z++]=F>>6&63|128),T[z++]=63&F|128)}return z}(this.buf,f,this.pos);var p=this.pos-u;p>=128&&r5(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeFloat:function(f){this.realloc(4),e5(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),e5(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var u=f.length;this.writeVarint(u),this.realloc(u);for(var p=0;p<u;p++)this.buf[this.pos++]=f[p]},writeRawMessage:function(f,u){this.pos++;var p=this.pos;f(u,this);var T=this.pos-p;T>=128&&r5(p,T,this),this.pos=p-1,this.writeVarint(T),this.pos+=T},writeMessage:function(f,u,p){this.writeTag(f,Vr.Bytes),this.writeRawMessage(u,p)},writePackedVarint:function(f,u){u.length&&this.writeMessage(f,HN,u)},writePackedSVarint:function(f,u){u.length&&this.writeMessage(f,WN,u)},writePackedBoolean:function(f,u){u.length&&this.writeMessage(f,ZN,u)},writePackedFloat:function(f,u){u.length&&this.writeMessage(f,QN,u)},writePackedDouble:function(f,u){u.length&&this.writeMessage(f,qN,u)},writePackedFixed32:function(f,u){u.length&&this.writeMessage(f,YN,u)},writePackedSFixed32:function(f,u){u.length&&this.writeMessage(f,XN,u)},writePackedFixed64:function(f,u){u.length&&this.writeMessage(f,KN,u)},writePackedSFixed64:function(f,u){u.length&&this.writeMessage(f,JN,u)},writeBytesField:function(f,u){this.writeTag(f,Vr.Bytes),this.writeBytes(u)},writeFixed32Field:function(f,u){this.writeTag(f,Vr.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(f,u){this.writeTag(f,Vr.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(f,u){this.writeTag(f,Vr.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(f,u){this.writeTag(f,Vr.Fixed64),this.writeSFixed64(u)},writeVarintField:function(f,u){this.writeTag(f,Vr.Varint),this.writeVarint(u)},writeSVarintField:function(f,u){this.writeTag(f,Vr.Varint),this.writeSVarint(u)},writeStringField:function(f,u){this.writeTag(f,Vr.Bytes),this.writeString(u)},writeFloatField:function(f,u){this.writeTag(f,Vr.Fixed32),this.writeFloat(u)},writeDoubleField:function(f,u){this.writeTag(f,Vr.Fixed64),this.writeDouble(u)},writeBooleanField:function(f,u){this.writeVarintField(f,!!u)}};class Qv{constructor(u,{pixelRatio:p,version:T,stretchX:D,stretchY:z,content:F}){this.paddedRect=u,this.pixelRatio=p,this.stretchX=D,this.stretchY=z,this.content=F,this.version=T}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class o5{constructor(u,p){const T={},D={};this.haveRenderCallbacks=[];const z=[];this.addImages(u,T,z),this.addImages(p,D,z);const{w:F,h:j}=s5(z),Y=new Ea({width:F||1,height:j||1});for(const ie in u){const Ae=u[ie],he=T[ie].paddedRect;Ea.copy(Ae.data,Y,{x:0,y:0},{x:he.x+1,y:he.y+1},Ae.data)}for(const ie in p){const Ae=p[ie],he=D[ie].paddedRect,ge=he.x+1,ve=he.y+1,xe=Ae.data.width,Ge=Ae.data.height;Ea.copy(Ae.data,Y,{x:0,y:0},{x:ge,y:ve},Ae.data),Ea.copy(Ae.data,Y,{x:0,y:Ge-1},{x:ge,y:ve-1},{width:xe,height:1}),Ea.copy(Ae.data,Y,{x:0,y:0},{x:ge,y:ve+Ge},{width:xe,height:1}),Ea.copy(Ae.data,Y,{x:xe-1,y:0},{x:ge-1,y:ve},{width:1,height:Ge}),Ea.copy(Ae.data,Y,{x:0,y:0},{x:ge+xe,y:ve},{width:1,height:Ge})}this.image=Y,this.iconPositions=T,this.patternPositions=D}addImages(u,p,T){for(const D in u){const z=u[D],F={x:0,y:0,w:z.data.width+2,h:z.data.height+2};T.push(F),p[D]=new Qv(F,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(D)}}patchUpdatedImages(u,p){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const T in u.updatedImages)this.patchUpdatedImage(this.iconPositions[T],u.getImage(T),p),this.patchUpdatedImage(this.patternPositions[T],u.getImage(T),p)}patchUpdatedImage(u,p,T){if(!u||!p||u.version===p.version)return;u.version=p.version;const[D,z]=u.tl;T.update(p.data,void 0,{x:D,y:z})}}Gt("ImagePosition",Qv),Gt("ImageAtlas",o5),a.WritingMode=void 0,(_c=a.WritingMode||(a.WritingMode={}))[_c.none=0]="none",_c[_c.horizontal=1]="horizontal",_c[_c.vertical=2]="vertical",_c[_c.horizontalOnly=3]="horizontalOnly";const jm=-17;class $d{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,p){const T=new $d;return T.scale=u||1,T.fontStack=p,T}static forImage(u){const p=new $d;return p.imageName=u,p}}class R0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,p){const T=new R0;for(let D=0;D<u.sections.length;D++){const z=u.sections[D];z.image?T.addImageSection(z):T.addTextSection(z,p)}return T}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let p="";for(let T=0;T<u.length;T++){const D=u.charCodeAt(T+1)||null,z=u.charCodeAt(T-1)||null;p+=D&&qs(D)&&!jd[u[T+1]]||z&&qs(z)&&!jd[u[T-1]]||!jd[u[T]]?u[T]:jd[u[T]]}return p}(this.text)}trim(){let u=0;for(let T=0;T<this.text.length&&Hm[this.text.charCodeAt(T)];T++)u++;let p=this.text.length;for(let T=this.text.length-1;T>=0&&T>=u&&Hm[this.text.charCodeAt(T)];T--)p--;this.text=this.text.substring(u,p),this.sectionIndex=this.sectionIndex.slice(u,p)}substring(u,p){const T=new R0;return T.text=this.text.substring(u,p),T.sectionIndex=this.sectionIndex.slice(u,p),T.sections=this.sections,T}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,p)=>Math.max(u,this.sections[p].scale),0)}addTextSection(u,p){this.text+=u.text,this.sections.push($d.forText(u.scale,u.fontStack||p));const T=this.sections.length-1;for(let D=0;D<u.text.length;++D)this.sectionIndex.push(T)}addImageSection(u){const p=u.image?u.image.name:"";if(p.length===0)return void _e("Can't add FormattedSection with an empty image.");const T=this.getNextImageSectionCharCode();T?(this.text+=String.fromCharCode(T),this.sections.push($d.forImage(p)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function $m(f,u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge){const Ne=R0.fromFeature(f,D);let nt;he===a.WritingMode.vertical&&Ne.verticalizePunctuation();const{processBidirectionalText:ut,processStyledBidirectionalText:et}=_s;if(ut&&Ne.sections.length===1){nt=[];const yt=ut(Ne.toString(),qv(Ne,ie,z,u,T,ve,xe));for(const rn of yt){const un=new R0;un.text=rn,un.sections=Ne.sections;for(let Zt=0;Zt<rn.length;Zt++)un.sectionIndex.push(0);nt.push(un)}}else if(et){nt=[];const yt=et(Ne.text,Ne.sectionIndex,qv(Ne,ie,z,u,T,ve,xe));for(const rn of yt){const un=new R0;un.text=rn[0],un.sectionIndex=rn[1],un.sections=Ne.sections,nt.push(un)}}else nt=function(yt,rn){const un=[],Zt=yt.text;let jt=0;for(const Nt of rn)un.push(yt.substring(jt,Nt)),jt=Nt;return jt<Zt.length&&un.push(yt.substring(jt,Zt.length)),un}(Ne,qv(Ne,ie,z,u,T,ve,xe));const at=[],_t={positionedLines:at,text:Ne.toString(),top:Ae[1],bottom:Ae[1],left:Ae[0],right:Ae[0],writingMode:he,iconsInText:!1,verticalizable:!1};return function(yt,rn,un,Zt,jt,Nt,Yt,Wt,Pt,Tn,gn,rr){let Qr=0,Jr=jm,Qi=0,Sa=0;const vs=Wt==="right"?1:Wt==="left"?0:.5;let Oi=0;for(const Fi of jt){Fi.trim();const ws=Fi.getMaxScale(),Bs=(ws-1)*ls,to={positionedGlyphs:[],lineOffset:0};yt.positionedLines[Oi]=to;const Co=to.positionedGlyphs;let Po=0;if(!Fi.length()){Jr+=Nt,++Oi;continue}for(let ts=0;ts<Fi.length();ts++){const cr=Fi.getSection(ts),Jo=Fi.getSectionIndex(ts),bs=Fi.getCharCode(ts);let zs=0,sl=null,Gl=null,jl=null,xu=ls;const ol=!(Pt===a.WritingMode.horizontal||!gn&&!tl(bs)||gn&&(Hm[bs]||(es=bs,$t.Arabic(es)||$t["Arabic Supplement"](es)||$t["Arabic Extended-A"](es)||$t["Arabic Presentation Forms-A"](es)||$t["Arabic Presentation Forms-B"](es))));if(cr.imageName){const Ma=Zt[cr.imageName];if(!Ma)continue;jl=cr.imageName,yt.iconsInText=yt.iconsInText||!0,Gl=Ma.paddedRect;const Io=Ma.displaySize;cr.scale=cr.scale*ls/rr,sl={width:Io[0],height:Io[1],left:1,top:-3,advance:ol?Io[1]:Io[0]},zs=Bs+(ls-Io[1]*cr.scale),xu=sl.advance;const wu=ol?Io[0]*cr.scale-ls*ws:Io[1]*cr.scale-ls*ws;wu>0&&wu>Po&&(Po=wu)}else{const Ma=un[cr.fontStack],Io=Ma&&Ma[bs];if(Io&&Io.rect)Gl=Io.rect,sl=Io.metrics;else{const wu=rn[cr.fontStack],Qd=wu&&wu[bs];if(!Qd)continue;sl=Qd.metrics}zs=(ws-cr.scale)*ls}ol?(yt.verticalizable=!0,Co.push({glyph:bs,imageName:jl,x:Qr,y:Jr+zs,vertical:ol,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:Jo,metrics:sl,rect:Gl}),Qr+=xu*cr.scale+Tn):(Co.push({glyph:bs,imageName:jl,x:Qr,y:Jr+zs,vertical:ol,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:Jo,metrics:sl,rect:Gl}),Qr+=sl.advance*cr.scale+Tn)}Co.length!==0&&(Qi=Math.max(Qr-Tn,Qi),sU(Co,0,Co.length-1,vs,Po)),Qr=0;const si=Nt*ws+Po;to.lineOffset=Math.max(Po,Bs),Jr+=si,Sa=Math.max(si,Sa),++Oi}var es;const xs=Jr-jm,{horizontalAlign:Rs,verticalAlign:Mo}=Zv(Yt);(function(Fi,ws,Bs,to,Co,Po,si,ts,cr){const Jo=(ws-Bs)*Co;let bs=0;bs=Po!==si?-ts*to-jm:(-to*cr+.5)*si;for(const zs of Fi)for(const sl of zs.positionedGlyphs)sl.x+=Jo,sl.y+=bs})(yt.positionedLines,vs,Rs,Mo,Qi,Sa,Nt,xs,jt.length),yt.top+=-Mo*xs,yt.bottom=yt.top+xs,yt.left+=-Rs*Qi,yt.right=yt.left+Qi}(_t,u,p,T,nt,F,j,Y,he,ie,ge,Ge),!function(yt){for(const rn of yt)if(rn.positionedGlyphs.length!==0)return!1;return!0}(at)&&_t}const Hm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rU={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function a5(f,u,p,T,D,z){if(u.imageName){const F=T[u.imageName];return F?F.displaySize[0]*u.scale*ls/z+D:0}{const F=p[u.fontStack],j=F&&F[f];return j?j.metrics.advance*u.scale+D:0}}function l5(f,u,p,T){const D=Math.pow(f-u,2);return T?f<u?D/2:2*D:D+Math.abs(p)*p}function iU(f,u,p){let T=0;return f===10&&(T-=1e4),p&&(T+=150),f!==40&&f!==65288||(T+=50),u!==41&&u!==65289||(T+=50),T}function A5(f,u,p,T,D,z){let F=null,j=l5(u,p,D,z);for(const Y of T){const ie=l5(u-Y.x,p,D,z)+Y.badness;ie<=j&&(F=Y,j=ie)}return{index:f,x:u,priorBreak:F,badness:j}}function u5(f){return f?u5(f.priorBreak).concat(f.index):[]}function qv(f,u,p,T,D,z,F){if(z!=="point")return[];if(!f)return[];const j=[],Y=function(ge,ve,xe,Ge,Ne,nt){let ut=0;for(let et=0;et<ge.length();et++){const at=ge.getSection(et);ut+=a5(ge.getCharCode(et),at,Ge,Ne,ve,nt)}return ut/Math.max(1,Math.ceil(ut/xe))}(f,u,p,T,D,F),ie=f.text.indexOf("")>=0;let Ae=0;for(let ge=0;ge<f.length();ge++){const ve=f.getSection(ge),xe=f.getCharCode(ge);if(Hm[xe]||(Ae+=a5(xe,ve,T,D,u,F)),ge<f.length()-1){const Ge=!((he=xe)<11904||!($t["Bopomofo Extended"](he)||$t.Bopomofo(he)||$t["CJK Compatibility Forms"](he)||$t["CJK Compatibility Ideographs"](he)||$t["CJK Compatibility"](he)||$t["CJK Radicals Supplement"](he)||$t["CJK Strokes"](he)||$t["CJK Symbols and Punctuation"](he)||$t["CJK Unified Ideographs Extension A"](he)||$t["CJK Unified Ideographs"](he)||$t["Enclosed CJK Letters and Months"](he)||$t["Halfwidth and Fullwidth Forms"](he)||$t.Hiragana(he)||$t["Ideographic Description Characters"](he)||$t["Kangxi Radicals"](he)||$t["Katakana Phonetic Extensions"](he)||$t.Katakana(he)||$t["Vertical Forms"](he)||$t["Yi Radicals"](he)||$t["Yi Syllables"](he)));(rU[xe]||Ge||ve.imageName)&&j.push(A5(ge+1,Ae,Y,j,iU(xe,f.getCharCode(ge+1),Ge&&ie),!1))}}var he;return u5(A5(f.length(),Ae,Y,j,0,!0))}function Zv(f){let u=.5,p=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}return{horizontalAlign:u,verticalAlign:p}}function sU(f,u,p,T,D){if(!T&&!D)return;const z=f[p],F=(f[p].x+z.metrics.advance*z.scale)*T;for(let j=u;j<=p;j++)f[j].x-=F,f[j].y+=D}function oU(f,u,p){const{horizontalAlign:T,verticalAlign:D}=Zv(p),z=u[0]-f.displaySize[0]*T,F=u[1]-f.displaySize[1]*D;return{image:f,top:F,bottom:F+f.displaySize[1],left:z,right:z+f.displaySize[0]}}function c5(f,u,p,T,D,z){const F=f.image;let j;if(F.content){const Ne=F.content,nt=F.pixelRatio||1;j=[Ne[0]/nt,Ne[1]/nt,F.displaySize[0]-Ne[2]/nt,F.displaySize[1]-Ne[3]/nt]}const Y=u.left*z,ie=u.right*z;let Ae,he,ge,ve;p==="width"||p==="both"?(ve=D[0]+Y-T[3],he=D[0]+ie+T[1]):(ve=D[0]+(Y+ie-F.displaySize[0])/2,he=ve+F.displaySize[0]);const xe=u.top*z,Ge=u.bottom*z;return p==="height"||p==="both"?(Ae=D[1]+xe-T[0],ge=D[1]+Ge+T[2]):(Ae=D[1]+(xe+Ge-F.displaySize[1])/2,ge=Ae+F.displaySize[1]),{image:F,top:Ae,right:he,bottom:ge,left:ve,collisionPadding:j}}const vu=128;function h5(f,u){const{expression:p}=u;if(p.kind==="constant")return{kind:"constant",layoutSize:p.evaluate(new Fr(f+1))};if(p.kind==="source")return{kind:"source"};{const{zoomStops:T,interpolationType:D}=p;let z=0;for(;z<T.length&&T[z]<=f;)z++;z=Math.max(0,z-1);let F=z;for(;F<T.length&&T[F]<f+1;)F++;F=Math.min(T.length-1,F);const j=T[z],Y=T[F];return p.kind==="composite"?{kind:"composite",minZoom:j,maxZoom:Y,interpolationType:D}:{kind:"camera",minZoom:j,maxZoom:Y,minSize:p.evaluate(new Fr(j)),maxSize:p.evaluate(new Fr(Y)),interpolationType:D}}}class vc extends Mt{constructor(u,p,T,D){super(u,p),this.angle=T,D!==void 0&&(this.segment=D)}clone(){return new vc(this.x,this.y,this.angle,this.segment)}}function f5(f,u,p,T,D){if(u.segment===void 0)return!0;let z=u,F=u.segment+1,j=0;for(;j>-p/2;){if(F--,F<0)return!1;j-=f[F].dist(z),z=f[F]}j+=f[F].dist(f[F+1]),F++;const Y=[];let ie=0;for(;j<p/2;){const Ae=f[F],he=f[F+1];if(!he)return!1;let ge=f[F-1].angleTo(Ae)-Ae.angleTo(he);for(ge=Math.abs((ge+3*Math.PI)%(2*Math.PI)-Math.PI),Y.push({distance:j,angleDelta:ge}),ie+=ge;j-Y[0].distance>T;)ie-=Y.shift().angleDelta;if(ie>D)return!1;F++,j+=Ae.dist(he)}return!0}function d5(f){let u=0;for(let p=0;p<f.length-1;p++)u+=f[p].dist(f[p+1]);return u}function p5(f,u,p){return f?.6*u*p:0}function g5(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function aU(f,u,p,T,D,z){const F=p5(p,D,z),j=g5(p,T)*z;let Y=0;const ie=d5(f)/2;for(let Ae=0;Ae<f.length-1;Ae++){const he=f[Ae],ge=f[Ae+1],ve=he.dist(ge);if(Y+ve>ie){const xe=(ie-Y)/ve,Ge=An(he.x,ge.x,xe),Ne=An(he.y,ge.y,xe),nt=new vc(Ge,Ne,ge.angleTo(he),Ae);return nt._round(),!F||f5(f,nt,j,F,u)?nt:void 0}Y+=ve}}function lU(f,u,p,T,D,z,F,j,Y){const ie=p5(T,z,F),Ae=g5(T,D),he=Ae*F,ge=f[0].x===0||f[0].x===Y||f[0].y===0||f[0].y===Y;return u-he<u/4&&(u=he+u/4),m5(f,ge?u/2*j%u:(Ae/2+2*z)*F*j%u,u,ie,p,he,ge,!1,Y)}function m5(f,u,p,T,D,z,F,j,Y){const ie=z/2,Ae=d5(f);let he=0,ge=u-p,ve=[];for(let xe=0;xe<f.length-1;xe++){const Ge=f[xe],Ne=f[xe+1],nt=Ge.dist(Ne),ut=Ne.angleTo(Ge);for(;ge+p<he+nt;){ge+=p;const et=(ge-he)/nt,at=An(Ge.x,Ne.x,et),_t=An(Ge.y,Ne.y,et);if(at>=0&&at<Y&&_t>=0&&_t<Y&&ge-ie>=0&&ge+ie<=Ae){const yt=new vc(at,_t,ut,xe);yt._round(),T&&!f5(f,yt,z,T,D)||ve.push(yt)}}he+=nt}return j||ve.length||F||(ve=m5(f,he/2,p,T,D,z,F,!0,Y)),ve}function y5(f,u,p,T,D){const z=[];for(let F=0;F<f.length;F++){const j=f[F];let Y;for(let ie=0;ie<j.length-1;ie++){let Ae=j[ie],he=j[ie+1];Ae.x<u&&he.x<u||(Ae.x<u?Ae=new Mt(u,Ae.y+(u-Ae.x)/(he.x-Ae.x)*(he.y-Ae.y))._round():he.x<u&&(he=new Mt(u,Ae.y+(u-Ae.x)/(he.x-Ae.x)*(he.y-Ae.y))._round()),Ae.y<p&&he.y<p||(Ae.y<p?Ae=new Mt(Ae.x+(p-Ae.y)/(he.y-Ae.y)*(he.x-Ae.x),p)._round():he.y<p&&(he=new Mt(Ae.x+(p-Ae.y)/(he.y-Ae.y)*(he.x-Ae.x),p)._round()),Ae.x>=T&&he.x>=T||(Ae.x>=T?Ae=new Mt(T,Ae.y+(T-Ae.x)/(he.x-Ae.x)*(he.y-Ae.y))._round():he.x>=T&&(he=new Mt(T,Ae.y+(T-Ae.x)/(he.x-Ae.x)*(he.y-Ae.y))._round()),Ae.y>=D&&he.y>=D||(Ae.y>=D?Ae=new Mt(Ae.x+(D-Ae.y)/(he.y-Ae.y)*(he.x-Ae.x),D)._round():he.y>=D&&(he=new Mt(Ae.x+(D-Ae.y)/(he.y-Ae.y)*(he.x-Ae.x),D)._round()),Y&&Ae.equals(Y[Y.length-1])||(Y=[Ae],z.push(Y)),Y.push(he)))))}}return z}function _5(f,u,p,T){const D=[],z=f.image,F=z.pixelRatio,j=z.paddedRect.w-2,Y=z.paddedRect.h-2,ie=f.right-f.left,Ae=f.bottom-f.top,he=z.stretchX||[[0,j]],ge=z.stretchY||[[0,Y]],ve=(Nt,Yt)=>Nt+Yt[1]-Yt[0],xe=he.reduce(ve,0),Ge=ge.reduce(ve,0),Ne=j-xe,nt=Y-Ge;let ut=0,et=xe,at=0,_t=Ge,yt=0,rn=Ne,un=0,Zt=nt;if(z.content&&T){const Nt=z.content;ut=Wm(he,0,Nt[0]),at=Wm(ge,0,Nt[1]),et=Wm(he,Nt[0],Nt[2]),_t=Wm(ge,Nt[1],Nt[3]),yt=Nt[0]-ut,un=Nt[1]-at,rn=Nt[2]-Nt[0]-et,Zt=Nt[3]-Nt[1]-_t}const jt=(Nt,Yt,Wt,Pt)=>{const Tn=Qm(Nt.stretch-ut,et,ie,f.left),gn=qm(Nt.fixed-yt,rn,Nt.stretch,xe),rr=Qm(Yt.stretch-at,_t,Ae,f.top),Qr=qm(Yt.fixed-un,Zt,Yt.stretch,Ge),Jr=Qm(Wt.stretch-ut,et,ie,f.left),Qi=qm(Wt.fixed-yt,rn,Wt.stretch,xe),Sa=Qm(Pt.stretch-at,_t,Ae,f.top),vs=qm(Pt.fixed-un,Zt,Pt.stretch,Ge),Oi=new Mt(Tn,rr),es=new Mt(Jr,rr),xs=new Mt(Jr,Sa),Rs=new Mt(Tn,Sa),Mo=new Mt(gn/F,Qr/F),Fi=new Mt(Qi/F,vs/F),ws=u*Math.PI/180;if(ws){const Co=Math.sin(ws),Po=Math.cos(ws),si=[Po,-Co,Co,Po];Oi._matMult(si),es._matMult(si),Rs._matMult(si),xs._matMult(si)}const Bs=Nt.stretch+Nt.fixed,to=Yt.stretch+Yt.fixed;return{tl:Oi,tr:es,bl:Rs,br:xs,tex:{x:z.paddedRect.x+1+Bs,y:z.paddedRect.y+1+to,w:Wt.stretch+Wt.fixed-Bs,h:Pt.stretch+Pt.fixed-to},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mo,pixelOffsetBR:Fi,minFontScaleX:rn/F/ie,minFontScaleY:Zt/F/Ae,isSDF:p}};if(T&&(z.stretchX||z.stretchY)){const Nt=v5(he,Ne,xe),Yt=v5(ge,nt,Ge);for(let Wt=0;Wt<Nt.length-1;Wt++){const Pt=Nt[Wt],Tn=Nt[Wt+1];for(let gn=0;gn<Yt.length-1;gn++)D.push(jt(Pt,Yt[gn],Tn,Yt[gn+1]))}}else D.push(jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:j+1},{fixed:0,stretch:Y+1}));return D}function Wm(f,u,p){let T=0;for(const D of f)T+=Math.max(u,Math.min(p,D[1]))-Math.max(u,Math.min(p,D[0]));return T}function v5(f,u,p){const T=[{fixed:-1,stretch:0}];for(const[D,z]of f){const F=T[T.length-1];T.push({fixed:D-F.stretch,stretch:F.stretch}),T.push({fixed:D-F.stretch,stretch:F.stretch+(z-D)})}return T.push({fixed:u+1,stretch:p}),T}function Qm(f,u,p,T){return f/u*p+T}function qm(f,u,p,T){return f-u*p/T}Gt("Anchor",vc);class Zm{constructor(u,p,T,D,z,F,j,Y,ie,Ae){if(this.boxStartIndex=u.length,ie){let he=F.top,ge=F.bottom;const ve=F.collisionPadding;ve&&(he-=ve[1],ge+=ve[3]);let xe=ge-he;xe>0&&(xe=Math.max(10,xe),this.circleDiameter=xe)}else{let he=F.top*j-Y[0],ge=F.bottom*j+Y[2],ve=F.left*j-Y[3],xe=F.right*j+Y[1];const Ge=F.collisionPadding;if(Ge&&(ve-=Ge[0]*j,he-=Ge[1]*j,xe+=Ge[2]*j,ge+=Ge[3]*j),Ae){const Ne=new Mt(ve,he),nt=new Mt(xe,he),ut=new Mt(ve,ge),et=new Mt(xe,ge),at=Ae*Math.PI/180;Ne._rotate(at),nt._rotate(at),ut._rotate(at),et._rotate(at),ve=Math.min(Ne.x,nt.x,ut.x,et.x),xe=Math.max(Ne.x,nt.x,ut.x,et.x),he=Math.min(Ne.y,nt.y,ut.y,et.y),ge=Math.max(Ne.y,nt.y,ut.y,et.y)}u.emplaceBack(p.x,p.y,ve,he,xe,ge,T,D,z)}this.boxEndIndex=u.length}}class AU{constructor(u=[],p=uU){if(this.data=u,this.length=this.data.length,this.compare=p,this.length>0)for(let T=(this.length>>1)-1;T>=0;T--)this._down(T)}push(u){this.data.push(u),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const u=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:p,compare:T}=this,D=p[u];for(;u>0;){const z=u-1>>1,F=p[z];if(T(D,F)>=0)break;p[u]=F,u=z}p[u]=D}_down(u){const{data:p,compare:T}=this,D=this.length>>1,z=p[u];for(;u<D;){let F=1+(u<<1),j=p[F];const Y=F+1;if(Y<this.length&&T(p[Y],j)<0&&(F=Y,j=p[Y]),T(j,z)>=0)break;p[u]=j,u=F}p[u]=z}}function uU(f,u){return f<u?-1:f>u?1:0}function cU(f,u=1,p=!1){let T=1/0,D=1/0,z=-1/0,F=-1/0;const j=f[0];for(let ve=0;ve<j.length;ve++){const xe=j[ve];(!ve||xe.x<T)&&(T=xe.x),(!ve||xe.y<D)&&(D=xe.y),(!ve||xe.x>z)&&(z=xe.x),(!ve||xe.y>F)&&(F=xe.y)}const Y=Math.min(z-T,F-D);let ie=Y/2;const Ae=new AU([],hU);if(Y===0)return new Mt(T,D);for(let ve=T;ve<z;ve+=Y)for(let xe=D;xe<F;xe+=Y)Ae.push(new B0(ve+ie,xe+ie,ie,f));let he=function(ve){let xe=0,Ge=0,Ne=0;const nt=ve[0];for(let ut=0,et=nt.length,at=et-1;ut<et;at=ut++){const _t=nt[ut],yt=nt[at],rn=_t.x*yt.y-yt.x*_t.y;Ge+=(_t.x+yt.x)*rn,Ne+=(_t.y+yt.y)*rn,xe+=3*rn}return new B0(Ge/xe,Ne/xe,0,ve)}(f),ge=Ae.length;for(;Ae.length;){const ve=Ae.pop();(ve.d>he.d||!he.d)&&(he=ve,p&&console.log("found best %d after %d probes",Math.round(1e4*ve.d)/1e4,ge)),ve.max-he.d<=u||(ie=ve.h/2,Ae.push(new B0(ve.p.x-ie,ve.p.y-ie,ie,f)),Ae.push(new B0(ve.p.x+ie,ve.p.y-ie,ie,f)),Ae.push(new B0(ve.p.x-ie,ve.p.y+ie,ie,f)),Ae.push(new B0(ve.p.x+ie,ve.p.y+ie,ie,f)),ge+=4)}return p&&(console.log(`num probes: ${ge}`),console.log(`best distance: ${he.d}`)),he.p}function hU(f,u){return u.max-f.max}function B0(f,u,p,T){this.p=new Mt(f,u),this.h=p,this.d=function(D,z){let F=!1,j=1/0;for(let Y=0;Y<z.length;Y++){const ie=z[Y];for(let Ae=0,he=ie.length,ge=he-1;Ae<he;ge=Ae++){const ve=ie[Ae],xe=ie[ge];ve.y>D.y!=xe.y>D.y&&D.x<(xe.x-ve.x)*(D.y-ve.y)/(xe.y-ve.y)+ve.x&&(F=!F),j=Math.min(j,C4(D,ve,xe))}}return(F?1:-1)*Math.sqrt(j)}(this.p,T),this.max=this.d+this.h*Math.SQRT2}const Yv=Number.POSITIVE_INFINITY;function x5(f,u){return u[1]!==Yv?function(p,T,D){let z=0,F=0;switch(T=Math.abs(T),D=Math.abs(D),p){case"top-right":case"top-left":case"top":F=D-7;break;case"bottom-right":case"bottom-left":case"bottom":F=7-D}switch(p){case"top-right":case"bottom-right":case"right":z=-T;break;case"top-left":case"bottom-left":case"left":z=T}return[z,F]}(f,u[0],u[1]):function(p,T){let D=0,z=0;T<0&&(T=0);const F=T/Math.sqrt(2);switch(p){case"top-right":case"top-left":z=F-7;break;case"bottom-right":case"bottom-left":z=7-F;break;case"bottom":z=7-T;break;case"top":z=T-7}switch(p){case"top-right":case"bottom-right":D=-F;break;case"top-left":case"bottom-left":D=F;break;case"left":D=T;break;case"right":D=-T}return[D,z]}(f,u[0])}function Xv(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fU(f,u,p,T,D,z,F,j,Y,ie,Ae){let he=z.textMaxSize.evaluate(u,{});he===void 0&&(he=F);const ge=f.layers[0].layout,ve=ge.get("icon-offset").evaluate(u,{},Ae),xe=b5(p.horizontal),Ge=F/24,Ne=f.tilePixelRatio*Ge,nt=f.tilePixelRatio*he/24,ut=f.tilePixelRatio*j,et=f.tilePixelRatio*ge.get("symbol-spacing"),at=ge.get("text-padding")*f.tilePixelRatio,_t=function(Pt,Tn,gn,rr=1){const Qr=Pt.get("icon-padding").evaluate(Tn,{},gn),Jr=Qr&&Qr.values;return[Jr[0]*rr,Jr[1]*rr,Jr[2]*rr,Jr[3]*rr]}(ge,u,Ae,f.tilePixelRatio),yt=ge.get("text-max-angle")/180*Math.PI,rn=ge.get("text-rotation-alignment")!=="viewport"&&ge.get("symbol-placement")!=="point",un=ge.get("icon-rotation-alignment")==="map"&&ge.get("symbol-placement")!=="point",Zt=ge.get("symbol-placement"),jt=et/2,Nt=ge.get("icon-text-fit");let Yt;T&&Nt!=="none"&&(f.allowVerticalPlacement&&p.vertical&&(Yt=c5(T,p.vertical,Nt,ge.get("icon-text-fit-padding"),ve,Ge)),xe&&(T=c5(T,xe,Nt,ge.get("icon-text-fit-padding"),ve,Ge)));const Wt=(Pt,Tn)=>{Tn.x<0||Tn.x>=Wi||Tn.y<0||Tn.y>=Wi||function(gn,rr,Qr,Jr,Qi,Sa,vs,Oi,es,xs,Rs,Mo,Fi,ws,Bs,to,Co,Po,si,ts,cr,Jo,bs,zs,sl){const Gl=gn.addToLineVertexArray(rr,Qr);let jl,xu,ol,Ma,Io=0,wu=0,Qd=0,N5=0,ax=-1,lx=-1;const bu={};let U5=zn.exports(""),Ax=0,ux=0;if(Oi._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Ax,ux]=Oi.layout.get("text-offset").evaluate(cr,{},zs).map(ko=>ko*ls):(Ax=Oi.layout.get("text-radial-offset").evaluate(cr,{},zs)*ls,ux=Yv),gn.allowVerticalPlacement&&Jr.vertical){const ko=Oi.layout.get("text-rotate").evaluate(cr,{},zs)+90;ol=new Zm(es,rr,xs,Rs,Mo,Jr.vertical,Fi,ws,Bs,ko),vs&&(Ma=new Zm(es,rr,xs,Rs,Mo,vs,Co,Po,Bs,ko))}if(Qi){const ko=Oi.layout.get("icon-rotate").evaluate(cr,{}),TA=Oi.layout.get("icon-text-fit")!=="none",qd=_5(Qi,ko,bs,TA),Zd=vs?_5(vs,ko,bs,TA):void 0;xu=new Zm(es,rr,xs,Rs,Mo,Qi,Co,Po,!1,ko),Io=4*qd.length;const j5=gn.iconSizeData;let vh=null;j5.kind==="source"?(vh=[vu*Oi.layout.get("icon-size").evaluate(cr,{})],vh[0]>xc&&_e(`${gn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):j5.kind==="composite"&&(vh=[vu*Jo.compositeIconSizes[0].evaluate(cr,{},zs),vu*Jo.compositeIconSizes[1].evaluate(cr,{},zs)],(vh[0]>xc||vh[1]>xc)&&_e(`${gn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),gn.addSymbols(gn.icon,qd,vh,ts,si,cr,a.WritingMode.none,rr,Gl.lineStartIndex,Gl.lineLength,-1,zs),ax=gn.icon.placedSymbolArray.length-1,Zd&&(wu=4*Zd.length,gn.addSymbols(gn.icon,Zd,vh,ts,si,cr,a.WritingMode.vertical,rr,Gl.lineStartIndex,Gl.lineLength,-1,zs),lx=gn.icon.placedSymbolArray.length-1)}const V5=Object.keys(Jr.horizontal);for(const ko of V5){const TA=Jr.horizontal[ko];if(!jl){U5=zn.exports(TA.text);const Zd=Oi.layout.get("text-rotate").evaluate(cr,{},zs);jl=new Zm(es,rr,xs,Rs,Mo,TA,Fi,ws,Bs,Zd)}const qd=TA.positionedLines.length===1;if(Qd+=w5(gn,rr,TA,Sa,Oi,Bs,cr,to,Gl,Jr.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,qd?V5:[ko],bu,ax,Jo,zs),qd)break}Jr.vertical&&(N5+=w5(gn,rr,Jr.vertical,Sa,Oi,Bs,cr,to,Gl,a.WritingMode.vertical,["vertical"],bu,lx,Jo,zs));const SU=jl?jl.boxStartIndex:gn.collisionBoxArray.length,MU=jl?jl.boxEndIndex:gn.collisionBoxArray.length,CU=ol?ol.boxStartIndex:gn.collisionBoxArray.length,PU=ol?ol.boxEndIndex:gn.collisionBoxArray.length,IU=xu?xu.boxStartIndex:gn.collisionBoxArray.length,kU=xu?xu.boxEndIndex:gn.collisionBoxArray.length,LU=Ma?Ma.boxStartIndex:gn.collisionBoxArray.length,DU=Ma?Ma.boxEndIndex:gn.collisionBoxArray.length;let $l=-1;const e1=(ko,TA)=>ko&&ko.circleDiameter?Math.max(ko.circleDiameter,TA):TA;$l=e1(jl,$l),$l=e1(ol,$l),$l=e1(xu,$l),$l=e1(Ma,$l);const G5=$l>-1?1:0;G5&&($l*=sl/ls),gn.glyphOffsetArray.length>=z0.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),cr.sortKey!==void 0&&gn.addToSortKeyRanges(gn.symbolInstances.length,cr.sortKey),gn.symbolInstances.emplaceBack(rr.x,rr.y,bu.right>=0?bu.right:-1,bu.center>=0?bu.center:-1,bu.left>=0?bu.left:-1,bu.vertical||-1,ax,lx,U5,SU,MU,CU,PU,IU,kU,LU,DU,xs,Qd,N5,Io,wu,G5,0,Fi,Ax,ux,$l)}(f,Tn,Pt,p,T,D,Yt,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,Ne,[at,at,at,at],rn,Y,ut,_t,un,ve,u,z,ie,Ae,F)};if(Zt==="line")for(const Pt of y5(u.geometry,0,0,Wi,Wi)){const Tn=lU(Pt,et,yt,p.vertical||xe,T,24,nt,f.overscaling,Wi);for(const gn of Tn){const rr=xe;rr&&dU(f,rr.text,jt,gn)||Wt(Pt,gn)}}else if(Zt==="line-center"){for(const Pt of u.geometry)if(Pt.length>1){const Tn=aU(Pt,yt,p.vertical||xe,T,24,nt);Tn&&Wt(Pt,Tn)}}else if(u.type==="Polygon")for(const Pt of Fv(u.geometry,0)){const Tn=cU(Pt,16);Wt(Pt[0],new vc(Tn.x,Tn.y,0))}else if(u.type==="LineString")for(const Pt of u.geometry)Wt(Pt,new vc(Pt[0].x,Pt[0].y,0));else if(u.type==="Point")for(const Pt of u.geometry)for(const Tn of Pt)Wt([Tn],new vc(Tn.x,Tn.y,0))}const xc=32640;function w5(f,u,p,T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe){const Ge=function(ut,et,at,_t,yt,rn,un,Zt){const jt=_t.layout.get("text-rotate").evaluate(rn,{})*Math.PI/180,Nt=[];for(const Yt of et.positionedLines)for(const Wt of Yt.positionedGlyphs){if(!Wt.rect)continue;const Pt=Wt.rect||{};let Tn=4,gn=!0,rr=1,Qr=0;const Jr=(yt||Zt)&&Wt.vertical,Qi=Wt.metrics.advance*Wt.scale/2;if(Zt&&et.verticalizable){const si=(Wt.scale-1)*ls,ts=(ls-Wt.metrics.width*Wt.scale)/2;Qr=Yt.lineOffset/2-(Wt.imageName?-ts:si)}if(Wt.imageName){const si=un[Wt.imageName];gn=si.sdf,rr=si.pixelRatio,Tn=1/rr}const Sa=yt?[Wt.x+Qi,Wt.y]:[0,0];let vs=yt?[0,0]:[Wt.x+Qi+at[0],Wt.y+at[1]-Qr],Oi=[0,0];Jr&&(Oi=vs,vs=[0,0]);const es=(Wt.metrics.left-Tn)*Wt.scale-Qi+vs[0],xs=(-Wt.metrics.top-Tn)*Wt.scale+vs[1],Rs=es+Pt.w*Wt.scale/rr,Mo=xs+Pt.h*Wt.scale/rr,Fi=new Mt(es,xs),ws=new Mt(Rs,xs),Bs=new Mt(es,Mo),to=new Mt(Rs,Mo);if(Jr){const si=new Mt(-Qi,Qi-jm),ts=-Math.PI/2,cr=12-Qi,Jo=new Mt(22-cr,-(Wt.imageName?cr:0)),bs=new Mt(...Oi);Fi._rotateAround(ts,si)._add(Jo)._add(bs),ws._rotateAround(ts,si)._add(Jo)._add(bs),Bs._rotateAround(ts,si)._add(Jo)._add(bs),to._rotateAround(ts,si)._add(Jo)._add(bs)}if(jt){const si=Math.sin(jt),ts=Math.cos(jt),cr=[ts,-si,si,ts];Fi._matMult(cr),ws._matMult(cr),Bs._matMult(cr),to._matMult(cr)}const Co=new Mt(0,0),Po=new Mt(0,0);Nt.push({tl:Fi,tr:ws,bl:Bs,br:to,tex:Pt,writingMode:et.writingMode,glyphOffset:Sa,sectionIndex:Wt.sectionIndex,isSDF:gn,pixelOffsetTL:Co,pixelOffsetBR:Po,minFontScaleX:0,minFontScaleY:0})}return Nt}(0,p,j,D,z,F,T,f.allowVerticalPlacement),Ne=f.textSizeData;let nt=null;Ne.kind==="source"?(nt=[vu*D.layout.get("text-size").evaluate(F,{})],nt[0]>xc&&_e(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ne.kind==="composite"&&(nt=[vu*ve.compositeTextSizes[0].evaluate(F,{},xe),vu*ve.compositeTextSizes[1].evaluate(F,{},xe)],(nt[0]>xc||nt[1]>xc)&&_e(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,Ge,nt,j,z,F,ie,u,Y.lineStartIndex,Y.lineLength,ge,xe);for(const ut of Ae)he[ut]=f.text.placedSymbolArray.length-1;return 4*Ge.length}function b5(f){for(const u in f)return f[u];return null}function dU(f,u,p,T){const D=f.compareText;if(u in D){const z=D[u];for(let F=z.length-1;F>=0;F--)if(T.dist(z[F])<p)return!0}else D[u]=[];return D[u].push(T),!1}const pU=yc.VectorTileFeature.types,gU=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ym(f,u,p,T,D,z,F,j,Y,ie,Ae,he,ge){const ve=j?Math.min(xc,Math.round(j[0])):0,xe=j?Math.min(xc,Math.round(j[1])):0;f.emplaceBack(u,p,Math.round(32*T),Math.round(32*D),z,F,(ve<<1)+(Y?1:0),xe,16*ie,16*Ae,256*he,256*ge)}function Kv(f,u,p){f.emplaceBack(u.x,u.y,p),f.emplaceBack(u.x,u.y,p),f.emplaceBack(u.x,u.y,p),f.emplaceBack(u.x,u.y,p)}function mU(f){for(const u of f.sections)if(fc(u.text))return!0;return!1}class Jv{constructor(u){this.layoutVertexArray=new ze,this.indexArray=new st,this.programConfigurations=u,this.segments=new mt,this.dynamicLayoutVertexArray=new Xe,this.opacityVertexArray=new dt,this.placedSymbolArray=new m}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,p,T,D){this.isEmpty()||(T&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,UN.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,VN.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,gU,!0),this.opacityVertexBuffer.itemSize=1),(T||D)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Gt("SymbolBuffers",Jv);class ex{constructor(u,p,T){this.layoutVertexArray=new u,this.layoutAttributes=p,this.indexArray=new T,this.segments=new mt,this.collisionVertexArray=new it}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,GN.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Gt("CollisionBuffers",ex);class z0{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(F=>F.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Lv([]),this.placementViewportMatrix=Lv([]);const p=this.layers[0]._unevaluatedLayout._values;this.textSizeData=h5(this.zoom,p["text-size"]),this.iconSizeData=h5(this.zoom,p["icon-size"]);const T=this.layers[0].layout,D=T.get("symbol-sort-key"),z=T.get("symbol-z-order");this.canOverlap=nx(T,"text-overlap","text-allow-overlap")!=="never"||nx(T,"icon-overlap","icon-allow-overlap")!=="never"||T.get("text-ignore-placement")||T.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!D.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,T.get("symbol-placement")==="point"&&(this.writingModes=T.get("text-writing-mode").map(F=>a.WritingMode[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=u.sourceID}createArrays(){this.text=new Jv(new ph(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new Jv(new ph(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new E,this.lineVertexArray=new I,this.symbolInstances=new v}calculateGlyphDependencies(u,p,T,D,z){for(let F=0;F<u.length;F++)if(p[u.charCodeAt(F)]=!0,(T||D)&&z){const j=jd[u.charAt(F)];j&&(p[j.charCodeAt(0)]=!0)}}populate(u,p,T){const D=this.layers[0],z=D.layout,F=z.get("text-font"),j=z.get("text-field"),Y=z.get("icon-image"),ie=(j.value.kind!=="constant"||j.value.value instanceof ke&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Ae=Y.value.kind!=="constant"||!!Y.value.value||Object.keys(Y.parameters).length>0,he=z.get("symbol-sort-key");if(this.features=[],!ie&&!Ae)return;const ge=p.iconDependencies,ve=p.glyphDependencies,xe=p.availableImages,Ge=new Fr(this.zoom);for(const{feature:Ne,id:nt,index:ut,sourceLayerIndex:et}of u){const at=D._featureFilter.needGeometry,_t=mh(Ne,at);if(!D._featureFilter.filter(Ge,_t,T))continue;let yt,rn;if(at||(_t.geometry=gh(Ne)),ie){const Zt=D.getValueAndResolveTokens("text-field",_t,T,xe),jt=ke.factory(Zt);mU(jt)&&(this.hasRTLText=!0),(!this.hasRTLText||Fl()==="unavailable"||this.hasRTLText&&_s.isParsed())&&(yt=$N(jt,D,_t))}if(Ae){const Zt=D.getValueAndResolveTokens("icon-image",_t,T,xe);rn=Zt instanceof Le?Zt:Le.fromString(Zt)}if(!yt&&!rn)continue;const un=this.sortFeaturesByKey?he.evaluate(_t,{},T):void 0;if(this.features.push({id:nt,text:yt,icon:rn,index:ut,sourceLayerIndex:et,geometry:_t.geometry,properties:Ne.properties,type:pU[Ne.type],sortKey:un}),rn&&(ge[rn.name]=!0),yt){const Zt=F.evaluate(_t,{},T).join(","),jt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const Nt of yt.sections)if(Nt.image)ge[Nt.image.name]=!0;else{const Yt=bA(yt.toString()),Wt=Nt.fontStack||Zt,Pt=ve[Wt]=ve[Wt]||{};this.calculateGlyphDependencies(Nt.text,Pt,jt,this.allowVerticalPlacement,Yt)}}}z.get("symbol-placement")==="line"&&(this.features=function(Ne){const nt={},ut={},et=[];let at=0;function _t(Zt){et.push(Ne[Zt]),at++}function yt(Zt,jt,Nt){const Yt=ut[Zt];return delete ut[Zt],ut[jt]=Yt,et[Yt].geometry[0].pop(),et[Yt].geometry[0]=et[Yt].geometry[0].concat(Nt[0]),Yt}function rn(Zt,jt,Nt){const Yt=nt[jt];return delete nt[jt],nt[Zt]=Yt,et[Yt].geometry[0].shift(),et[Yt].geometry[0]=Nt[0].concat(et[Yt].geometry[0]),Yt}function un(Zt,jt,Nt){const Yt=Nt?jt[0][jt[0].length-1]:jt[0][0];return`${Zt}:${Yt.x}:${Yt.y}`}for(let Zt=0;Zt<Ne.length;Zt++){const jt=Ne[Zt],Nt=jt.geometry,Yt=jt.text?jt.text.toString():null;if(!Yt){_t(Zt);continue}const Wt=un(Yt,Nt),Pt=un(Yt,Nt,!0);if(Wt in ut&&Pt in nt&&ut[Wt]!==nt[Pt]){const Tn=rn(Wt,Pt,Nt),gn=yt(Wt,Pt,et[Tn].geometry);delete nt[Wt],delete ut[Pt],ut[un(Yt,et[gn].geometry,!0)]=gn,et[Tn].geometry=null}else Wt in ut?yt(Wt,Pt,Nt):Pt in nt?rn(Wt,Pt,Nt):(_t(Zt),nt[Wt]=at-1,ut[Pt]=at-1)}return et.filter(Zt=>Zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ne,nt)=>Ne.sortKey-nt.sortKey)}update(u,p,T){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,p,this.layers,T),this.icon.programConfigurations.updatePaintArrays(u,p,this.layers,T))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,p){const T=this.lineVertexArray.length;if(u.segment!==void 0){let D=u.dist(p[u.segment+1]),z=u.dist(p[u.segment]);const F={};for(let j=u.segment+1;j<p.length;j++)F[j]={x:p[j].x,y:p[j].y,tileUnitDistanceFromAnchor:D},j<p.length-1&&(D+=p[j+1].dist(p[j]));for(let j=u.segment||0;j>=0;j--)F[j]={x:p[j].x,y:p[j].y,tileUnitDistanceFromAnchor:z},j>0&&(z+=p[j-1].dist(p[j]));for(let j=0;j<p.length;j++){const Y=F[j];this.lineVertexArray.emplaceBack(Y.x,Y.y,Y.tileUnitDistanceFromAnchor)}}return{lineStartIndex:T,lineLength:this.lineVertexArray.length-T}}addSymbols(u,p,T,D,z,F,j,Y,ie,Ae,he,ge){const ve=u.indexArray,xe=u.layoutVertexArray,Ge=u.segments.prepareSegment(4*p.length,xe,ve,this.canOverlap?F.sortKey:void 0),Ne=this.glyphOffsetArray.length,nt=Ge.vertexLength,ut=this.allowVerticalPlacement&&j===a.WritingMode.vertical?Math.PI/2:0,et=F.text&&F.text.sections;for(let at=0;at<p.length;at++){const{tl:_t,tr:yt,bl:rn,br:un,tex:Zt,pixelOffsetTL:jt,pixelOffsetBR:Nt,minFontScaleX:Yt,minFontScaleY:Wt,glyphOffset:Pt,isSDF:Tn,sectionIndex:gn}=p[at],rr=Ge.vertexLength,Qr=Pt[1];Ym(xe,Y.x,Y.y,_t.x,Qr+_t.y,Zt.x,Zt.y,T,Tn,jt.x,jt.y,Yt,Wt),Ym(xe,Y.x,Y.y,yt.x,Qr+yt.y,Zt.x+Zt.w,Zt.y,T,Tn,Nt.x,jt.y,Yt,Wt),Ym(xe,Y.x,Y.y,rn.x,Qr+rn.y,Zt.x,Zt.y+Zt.h,T,Tn,jt.x,Nt.y,Yt,Wt),Ym(xe,Y.x,Y.y,un.x,Qr+un.y,Zt.x+Zt.w,Zt.y+Zt.h,T,Tn,Nt.x,Nt.y,Yt,Wt),Kv(u.dynamicLayoutVertexArray,Y,ut),ve.emplaceBack(rr,rr+1,rr+2),ve.emplaceBack(rr+1,rr+2,rr+3),Ge.vertexLength+=4,Ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),at!==p.length-1&&gn===p[at+1].sectionIndex||u.programConfigurations.populatePaintArrays(xe.length,F,F.index,{},ge,et&&et[gn])}u.placedSymbolArray.emplaceBack(Y.x,Y.y,Ne,this.glyphOffsetArray.length-Ne,nt,ie,Ae,Y.segment,T?T[0]:0,T?T[1]:0,D[0],D[1],j,0,!1,0,he)}_addCollisionDebugVertex(u,p,T,D,z,F){return p.emplaceBack(0,0),u.emplaceBack(T.x,T.y,D,z,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(u,p,T,D,z,F,j){const Y=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),ie=Y.vertexLength,Ae=z.layoutVertexArray,he=z.collisionVertexArray,ge=j.anchorX,ve=j.anchorY;this._addCollisionDebugVertex(Ae,he,F,ge,ve,new Mt(u,p)),this._addCollisionDebugVertex(Ae,he,F,ge,ve,new Mt(T,p)),this._addCollisionDebugVertex(Ae,he,F,ge,ve,new Mt(T,D)),this._addCollisionDebugVertex(Ae,he,F,ge,ve,new Mt(u,D)),Y.vertexLength+=4;const xe=z.indexArray;xe.emplaceBack(ie,ie+1),xe.emplaceBack(ie+1,ie+2),xe.emplaceBack(ie+2,ie+3),xe.emplaceBack(ie+3,ie),Y.primitiveLength+=4}addDebugCollisionBoxes(u,p,T,D){for(let z=u;z<p;z++){const F=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,D?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,T)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ex(ct,K4.members,Je),this.iconCollisionBox=new ex(ct,K4.members,Je);for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}}_deserializeCollisionBoxesForSymbol(u,p,T,D,z,F,j,Y,ie){const Ae={};for(let he=p;he<T;he++){const ge=u.get(he);Ae.textBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},Ae.textFeatureIndex=ge.featureIndex;break}for(let he=D;he<z;he++){const ge=u.get(he);Ae.verticalTextBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},Ae.verticalTextFeatureIndex=ge.featureIndex;break}for(let he=F;he<j;he++){const ge=u.get(he);Ae.iconBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},Ae.iconFeatureIndex=ge.featureIndex;break}for(let he=Y;he<ie;he++){const ge=u.get(he);Ae.verticalIconBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},Ae.verticalIconFeatureIndex=ge.featureIndex;break}return Ae}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let p=0;p<this.symbolInstances.length;p++){const T=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,T.textBoxStartIndex,T.textBoxEndIndex,T.verticalTextBoxStartIndex,T.verticalTextBoxEndIndex,T.iconBoxStartIndex,T.iconBoxEndIndex,T.verticalIconBoxStartIndex,T.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,p){const T=u.placedSymbolArray.get(p),D=T.vertexStartIndex+4*T.numGlyphs;for(let z=T.vertexStartIndex;z<D;z+=4)u.indexArray.emplaceBack(z,z+1,z+2),u.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const p=Math.sin(u),T=Math.cos(u),D=[],z=[],F=[];for(let j=0;j<this.symbolInstances.length;++j){F.push(j);const Y=this.symbolInstances.get(j);D.push(0|Math.round(p*Y.anchorX+T*Y.anchorY)),z.push(Y.featureIndex)}return F.sort((j,Y)=>D[j]-D[Y]||z[Y]-z[j]),F}addToSortKeyRanges(u,p){const T=this.sortKeyRanges[this.sortKeyRanges.length-1];T&&T.sortKey===p?T.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const p of this.symbolInstanceIndexes){const T=this.symbolInstances.get(p);this.featureSortOrder.push(T.featureIndex),[T.rightJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.leftJustifiedTextSymbolIndex].forEach((D,z,F)=>{D>=0&&F.indexOf(D)===z&&this.addIndicesForPlacedSymbol(this.text,D)}),T.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,T.verticalPlacedTextSymbolIndex),T.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,T.placedIconSymbolIndex),T.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,T.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Gt("SymbolBucket",z0,{omit:["layers","collisionBoxArray","features","compareText"]}),z0.MAX_GLYPHS=65535,z0.addDynamicAttributes=Kv;const yU=new Xr({"symbol-placement":new sn(ht.layout_symbol["symbol-placement"]),"symbol-spacing":new sn(ht.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sn(ht.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new on(ht.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sn(ht.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sn(ht.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sn(ht.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sn(ht.layout_symbol["icon-ignore-placement"]),"icon-optional":new sn(ht.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sn(ht.layout_symbol["icon-rotation-alignment"]),"icon-size":new on(ht.layout_symbol["icon-size"]),"icon-text-fit":new sn(ht.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sn(ht.layout_symbol["icon-text-fit-padding"]),"icon-image":new on(ht.layout_symbol["icon-image"]),"icon-rotate":new on(ht.layout_symbol["icon-rotate"]),"icon-padding":new on(ht.layout_symbol["icon-padding"]),"icon-keep-upright":new sn(ht.layout_symbol["icon-keep-upright"]),"icon-offset":new on(ht.layout_symbol["icon-offset"]),"icon-anchor":new on(ht.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sn(ht.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sn(ht.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sn(ht.layout_symbol["text-rotation-alignment"]),"text-field":new on(ht.layout_symbol["text-field"]),"text-font":new on(ht.layout_symbol["text-font"]),"text-size":new on(ht.layout_symbol["text-size"]),"text-max-width":new on(ht.layout_symbol["text-max-width"]),"text-line-height":new sn(ht.layout_symbol["text-line-height"]),"text-letter-spacing":new on(ht.layout_symbol["text-letter-spacing"]),"text-justify":new on(ht.layout_symbol["text-justify"]),"text-radial-offset":new on(ht.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sn(ht.layout_symbol["text-variable-anchor"]),"text-anchor":new on(ht.layout_symbol["text-anchor"]),"text-max-angle":new sn(ht.layout_symbol["text-max-angle"]),"text-writing-mode":new sn(ht.layout_symbol["text-writing-mode"]),"text-rotate":new on(ht.layout_symbol["text-rotate"]),"text-padding":new sn(ht.layout_symbol["text-padding"]),"text-keep-upright":new sn(ht.layout_symbol["text-keep-upright"]),"text-transform":new on(ht.layout_symbol["text-transform"]),"text-offset":new on(ht.layout_symbol["text-offset"]),"text-allow-overlap":new sn(ht.layout_symbol["text-allow-overlap"]),"text-overlap":new sn(ht.layout_symbol["text-overlap"]),"text-ignore-placement":new sn(ht.layout_symbol["text-ignore-placement"]),"text-optional":new sn(ht.layout_symbol["text-optional"])});var tx={paint:new Xr({"icon-opacity":new on(ht.paint_symbol["icon-opacity"]),"icon-color":new on(ht.paint_symbol["icon-color"]),"icon-halo-color":new on(ht.paint_symbol["icon-halo-color"]),"icon-halo-width":new on(ht.paint_symbol["icon-halo-width"]),"icon-halo-blur":new on(ht.paint_symbol["icon-halo-blur"]),"icon-translate":new sn(ht.paint_symbol["icon-translate"]),"icon-translate-anchor":new sn(ht.paint_symbol["icon-translate-anchor"]),"text-opacity":new on(ht.paint_symbol["text-opacity"]),"text-color":new on(ht.paint_symbol["text-color"],{runtimeType:Ur,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new on(ht.paint_symbol["text-halo-color"]),"text-halo-width":new on(ht.paint_symbol["text-halo-width"]),"text-halo-blur":new on(ht.paint_symbol["text-halo-blur"]),"text-translate":new sn(ht.paint_symbol["text-translate"]),"text-translate-anchor":new sn(ht.paint_symbol["text-translate-anchor"])}),layout:yU};class E5{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:$i,this.defaultValue=u}evaluate(u){if(u.formattedSection){const p=this.defaultValue.property.overrides;if(p&&p.hasOverride(u.formattedSection))return p.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Gt("FormatSectionOverride",E5,{omit:["defaultValue"]});class Xm extends Ds{constructor(u){super(u,tx)}recalculate(u,p){if(super.recalculate(u,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const T=this.layout.get("text-writing-mode");if(T){const D=[];for(const z of T)D.indexOf(z)<0&&D.push(z);this.layout._values["text-writing-mode"]=D}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,p,T,D){const z=this.layout.get(u).evaluate(p,{},T,D),F=this._unevaluatedLayout._values[u];return F.isDataDriven()||Il(F.value)||!z?z:function(j,Y){return Y.replace(/{([^{}]+)}/g,(ie,Ae)=>Ae in j?String(j[Ae]):"")}(p.properties,z)}createBucket(u){return new z0(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of tx.paint.overridableProperties){if(!Xm.hasPaintOverride(this.layout,u))continue;const p=this.paint.get(u),T=new E5(p),D=new Hs(T,p.property.specification);let z=null;z=p.value.kind==="constant"||p.value.kind==="source"?new ya("source",D):new kl("composite",D,p.value.zoomStops),this.paint._values[u]=new Pr(p.property,z,p.parameters)}}_handleOverridablePaintPropertyUpdate(u,p,T){return!(!this.layout||p.isDataDriven()||T.isDataDriven())&&Xm.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,p){const T=u.get("text-field"),D=tx.paint.properties[p];let z=!1;const F=j=>{for(const Y of j)if(D.overrides&&D.overrides.hasOverride(Y))return void(z=!0)};if(T.value.kind==="constant"&&T.value.value instanceof ke)F(T.value.value.sections);else if(T.value.kind==="source"){const j=ie=>{z||(ie instanceof vt&&Qe(ie.value)===ot?F(ie.value.sections):ie instanceof vA?F(ie.sections):ie.eachChild(j))},Y=T.value;Y._styleExpression&&j(Y._styleExpression.expression)}return z}}function nx(f,u,p){let T="never";const D=f.get(u);return D?T=D:f.get(p)&&(T="always"),T}var _U={paint:new Xr({"background-color":new sn(ht.paint_background["background-color"]),"background-pattern":new as(ht.paint_background["background-pattern"]),"background-opacity":new sn(ht.paint_background["background-opacity"])})},vU={paint:new Xr({"raster-opacity":new sn(ht.paint_raster["raster-opacity"]),"raster-hue-rotate":new sn(ht.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sn(ht.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sn(ht.paint_raster["raster-brightness-max"]),"raster-saturation":new sn(ht.paint_raster["raster-saturation"]),"raster-contrast":new sn(ht.paint_raster["raster-contrast"]),"raster-resampling":new sn(ht.paint_raster["raster-resampling"]),"raster-fade-duration":new sn(ht.paint_raster["raster-fade-duration"])})};class xU extends Ds{constructor(u){super(u,{}),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const wU={circle:class extends Ds{constructor(f){super(f,J7)}createBucket(f){return new Pv(f)}queryRadius(f){const u=f;return Rd("circle-radius",this,u)+Rd("circle-stroke-width",this,u)+Rm(this.paint.get("circle-translate"))}queryIntersectsFeature(f,u,p,T,D,z,F,j){const Y=Bm(f,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,F),ie=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),Ae=this.paint.get("circle-pitch-alignment")==="map",he=Ae?Y:function(ve,xe){return ve.map(Ge=>B4(Ge,xe))}(Y,j),ge=Ae?ie*F:ie;for(const ve of T)for(const xe of ve){const Ge=Ae?xe:B4(xe,j);let Ne=ge;const nt=zm([],[xe.x,xe.y,0,1],j);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=nt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=z.cameraToCenterDistance/nt[3]),q7(he,Ge,Ne))return!0}return!1}},heatmap:class extends Ds{constructor(f){super(f,tN),this._updateColorRamp()}createBucket(f){return new z4(f)}_handleSpecialPaintPropertyUpdate(f){f==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=F4({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Ds{constructor(f){super(f,nN)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Ds{constructor(f){super(f,yN)}recalculate(f,u){super.recalculate(f,u);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(f){return new Vv(f)}queryRadius(){return Rm(this.paint.get("fill-translate"))}queryIntersectsFeature(f,u,p,T,D,z,F){return M4(Bm(f,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,F),T)}isTileClipped(){return!0}},"fill-extrusion":class extends Ds{constructor(f){super(f,LN)}createBucket(f){return new jv(f)}queryRadius(){return Rm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(f,u,p,T,D,z,F,j){const Y=Bm(f,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,F),ie=this.paint.get("fill-extrusion-height").evaluate(u,p),Ae=this.paint.get("fill-extrusion-base").evaluate(u,p),he=function(ve,xe,Ge,Ne){const nt=[];for(const ut of ve){const et=[ut.x,ut.y,0,1];zm(et,et,xe),nt.push(new Mt(et[0]/et[3],et[1]/et[3]))}return nt}(Y,j),ge=function(ve,xe,Ge,Ne){const nt=[],ut=[],et=Ne[8]*xe,at=Ne[9]*xe,_t=Ne[10]*xe,yt=Ne[11]*xe,rn=Ne[8]*Ge,un=Ne[9]*Ge,Zt=Ne[10]*Ge,jt=Ne[11]*Ge;for(const Nt of ve){const Yt=[],Wt=[];for(const Pt of Nt){const Tn=Pt.x,gn=Pt.y,rr=Ne[0]*Tn+Ne[4]*gn+Ne[12],Qr=Ne[1]*Tn+Ne[5]*gn+Ne[13],Jr=Ne[2]*Tn+Ne[6]*gn+Ne[14],Qi=Ne[3]*Tn+Ne[7]*gn+Ne[15],Sa=Jr+_t,vs=Qi+yt,Oi=rr+rn,es=Qr+un,xs=Jr+Zt,Rs=Qi+jt,Mo=new Mt((rr+et)/vs,(Qr+at)/vs);Mo.z=Sa/vs,Yt.push(Mo);const Fi=new Mt(Oi/Rs,es/Rs);Fi.z=xs/Rs,Wt.push(Fi)}nt.push(Yt),ut.push(Wt)}return[nt,ut]}(T,Ae,ie,j);return function(ve,xe,Ge){let Ne=1/0;M4(Ge,xe)&&(Ne=Q4(Ge,xe[0]));for(let nt=0;nt<xe.length;nt++){const ut=xe[nt],et=ve[nt];for(let at=0;at<ut.length-1;at++){const _t=ut[at],yt=[_t,ut[at+1],et[at+1],et[at],_t];S4(Ge,yt)&&(Ne=Math.min(Ne,Q4(Ge,yt)))}}return Ne!==1/0&&Ne}(ge[0],ge[1],he)}},line:class extends Ds{constructor(f){super(f,Z4),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(f){f==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Gr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(f,u){super.recalculate(f,u),this.paint._values["line-floorwidth"]=Y4.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)}createBucket(f){return new $v(f)}queryRadius(f){const u=f,p=X4(Rd("line-width",this,u),Rd("line-gap-width",this,u)),T=Rd("line-offset",this,u);return p/2+Math.abs(T)+Rm(this.paint.get("line-translate"))}queryIntersectsFeature(f,u,p,T,D,z,F){const j=Bm(f,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,F),Y=F/2*X4(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),ie=this.paint.get("line-offset").evaluate(u,p);return ie&&(T=function(Ae,he){const ge=[];for(let ve=0;ve<Ae.length;ve++){const xe=Ae[ve],Ge=[];for(let Ne=0;Ne<xe.length;Ne++){const nt=xe[Ne-1],ut=xe[Ne],et=xe[Ne+1],at=Ne===0?new Mt(0,0):ut.sub(nt)._unit()._perp(),_t=Ne===xe.length-1?new Mt(0,0):et.sub(ut)._unit()._perp(),yt=at._add(_t)._unit(),rn=yt.x*_t.x+yt.y*_t.y;rn!==0&&yt._mult(1/rn),Ge.push(yt._mult(he)._add(ut))}ge.push(Ge)}return ge}(T,ie*F)),function(Ae,he,ge){for(let ve=0;ve<he.length;ve++){const xe=he[ve];if(Ae.length>=3){for(let Ge=0;Ge<xe.length;Ge++)if(P0(Ae,xe[Ge]))return!0}if(Z7(Ae,xe,ge))return!0}return!1}(j,T,Y)}isTileClipped(){return!0}},symbol:Xm,background:class extends Ds{constructor(f){super(f,_U)}},raster:class extends Ds{constructor(f){super(f,vU)}}};class bU{constructor(u){this._callback=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const T5=63710088e-1;class vi{constructor(u,p){if(isNaN(u)||isNaN(p))throw new Error(`Invalid LngLat object: (${u}, ${p})`);if(this.lng=+u,this.lat=+p,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vi(U(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const p=Math.PI/180,T=this.lat*p,D=u.lat*p,z=Math.sin(T)*Math.sin(D)+Math.cos(T)*Math.cos(D)*Math.cos((u.lng-this.lng)*p);return T5*Math.acos(Math.min(z,1))}toBounds(u=0){const p=360*u/40075017,T=p/Math.cos(Math.PI/180*this.lat);return new _h(new vi(this.lng-T,this.lat-p),new vi(this.lng+T,this.lat+p))}static convert(u){if(u instanceof vi)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new vi(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new vi(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class _h{constructor(u,p){u&&(p?this.setSouthWest(u).setNorthEast(p):u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))}setNorthEast(u){return this._ne=u instanceof vi?new vi(u.lng,u.lat):vi.convert(u),this}setSouthWest(u){return this._sw=u instanceof vi?new vi(u.lng,u.lat):vi.convert(u),this}extend(u){const p=this._sw,T=this._ne;let D,z;if(u instanceof vi)D=u,z=u;else{if(!(u instanceof _h))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(_h.convert(u)):this.extend(vi.convert(u)):this;if(D=u._sw,z=u._ne,!D||!z)return this}return p||T?(p.lng=Math.min(D.lng,p.lng),p.lat=Math.min(D.lat,p.lat),T.lng=Math.max(z.lng,T.lng),T.lat=Math.max(z.lat,T.lat)):(this._sw=new vi(D.lng,D.lat),this._ne=new vi(z.lng,z.lat)),this}getCenter(){return new vi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new vi(this.getWest(),this.getNorth())}getSouthEast(){return new vi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:p,lat:T}=vi.convert(u);let D=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(D=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=T&&T<=this._ne.lat&&D}static convert(u){return u instanceof _h?u:u&&new _h(u)}}const S5=2*Math.PI*T5;function M5(f){return S5*Math.cos(f*Math.PI/180)}function C5(f){return(180+f)/360}function P5(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function I5(f,u){return f/M5(u)}function rx(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class Km{constructor(u,p,T=0){this.x=+u,this.y=+p,this.z=+T}static fromLngLat(u,p=0){const T=vi.convert(u);return new Km(C5(T.lng),P5(T.lat),I5(p,T.lat))}toLngLat(){return new vi(360*this.x-180,rx(this.y))}toAltitude(){return this.z*M5(rx(this.y))}meterInMercatorCoordinateUnits(){return 1/S5*(u=rx(this.y),1/Math.cos(u*Math.PI/180));var u}}function k5(f,u,p){var T=2*Math.PI*6378137/256/Math.pow(2,p);return[f*T-2*Math.PI*6378137/2,u*T-2*Math.PI*6378137/2]}class ix{constructor(u,p,T){if(u<0||u>25||T<0||T>=Math.pow(2,u)||p<0||p>=Math.pow(2,u))throw new Error(`x=${p}, y=${T}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=p,this.y=T,this.key=Hd(0,u,u,p,T)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,p,T){const D=(F=this.y,j=this.z,Y=k5(256*(z=this.x),256*(F=Math.pow(2,j)-F-1),j),ie=k5(256*(z+1),256*(F+1),j),Y[0]+","+Y[1]+","+ie[0]+","+ie[1]);var z,F,j,Y,ie;const Ae=function(he,ge,ve){let xe,Ge="";for(let Ne=he;Ne>0;Ne--)xe=1<<Ne-1,Ge+=(ge&xe?1:0)+(ve&xe?2:0);return Ge}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(T==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,p>1?"@2x":"").replace(/{quadkey}/g,Ae).replace(/{bbox-epsg-3857}/g,D)}isChildOf(u){const p=this.z-u.z;return p>0&&u.x===this.x>>p&&u.y===this.y>>p}getTilePoint(u){const p=Math.pow(2,this.z);return new Mt((u.x*p-this.x)*Wi,(u.y*p-this.y)*Wi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class L5{constructor(u,p){this.wrap=u,this.canonical=p,this.key=Hd(u,p.z,p.z,p.x,p.y)}}class Ta{constructor(u,p,T,D,z){if(u<T)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${T}`);this.overscaledZ=u,this.wrap=p,this.canonical=new ix(T,+D,+z),this.key=Hd(p,u,T,D,z)}clone(){return new Ta(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-u;return u>this.canonical.z?new Ta(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ta(u,this.wrap,u,this.canonical.x>>p,this.canonical.y>>p)}calculateScaledKey(u,p){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const T=this.canonical.z-u;return u>this.canonical.z?Hd(this.wrap*+p,u,this.canonical.z,this.canonical.x,this.canonical.y):Hd(this.wrap*+p,u,u,this.canonical.x>>T,this.canonical.y>>T)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const p=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>p&&u.canonical.y===this.canonical.y>>p}children(u){if(this.overscaledZ>=u)return[new Ta(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const p=this.canonical.z+1,T=2*this.canonical.x,D=2*this.canonical.y;return[new Ta(p,this.wrap,p,T,D),new Ta(p,this.wrap,p,T+1,D),new Ta(p,this.wrap,p,T,D+1),new Ta(p,this.wrap,p,T+1,D+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Ta(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Ta(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new L5(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new Km(u.x-this.wrap,u.y))}}function Hd(f,u,p,T,D){(f*=2)<0&&(f=-1*f-1);const z=1<<p;return(z*z*f+z*D+T).toString(36)+p.toString(36)+u.toString(36)}Gt("CanonicalTileID",ix),Gt("OverscaledTileID",Ta,{omit:["posMatrix"]});class D5{constructor(u,p,T){if(this.uid=u,p.height!==p.width)throw new RangeError("DEM tiles must be square");if(T&&T!=="mapbox"&&T!=="terrarium")return void _e(`"${T}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=p.height;const D=this.dim=p.height-2;this.data=new Uint32Array(p.data.buffer),this.encoding=T||"mapbox";for(let z=0;z<D;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(D,z)]=this.data[this._idx(D-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,D)]=this.data[this._idx(z,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<D;z++)for(let F=0;F<D;F++){const j=this.get(z,F);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(u,p){const T=new Uint8Array(this.data.buffer),D=4*this._idx(u,p);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(T[D],T[D+1],T[D+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(u,p){if(u<-1||u>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(u+1)}_unpackMapbox(u,p,T){return(256*u*256+256*p+T)/10-1e4}_unpackTerrarium(u,p,T){return 256*u+p+T/256-32768}getPixels(){return new Ea({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,p,T){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let D=p*this.dim,z=p*this.dim+this.dim,F=T*this.dim,j=T*this.dim+this.dim;switch(p){case-1:D=z-1;break;case 1:z=D+1}switch(T){case-1:F=j-1;break;case 1:j=F+1}const Y=-p*this.dim,ie=-T*this.dim;for(let Ae=F;Ae<j;Ae++)for(let he=D;he<z;he++)this.data[this._idx(he,Ae)]=u.data[this._idx(he+Y,Ae+ie)]}}Gt("DEMData",D5);class R5{constructor(u){this._stringToNumber={},this._numberToString=[];for(let p=0;p<u.length;p++){const T=u[p];this._stringToNumber[T]=p,this._numberToString[p]=T}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class B5{constructor(u,p,T,D,z){this.type="Feature",this._vectorTileFeature=u,u._z=p,u._x=T,u._y=D,this.properties=u.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(u[p]=this[p]);return u}}class z5{constructor(u,p){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new xa(Wi,16,0),this.grid3D=new xa(Wi,16,0),this.featureIndexArray=new O,this.promoteId=p}insert(u,p,T,D,z,F){const j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(T,D,z);const Y=F?this.grid3D:this.grid;for(let ie=0;ie<p.length;ie++){const Ae=p[ie],he=[1/0,1/0,-1/0,-1/0];for(let ge=0;ge<Ae.length;ge++){const ve=Ae[ge];he[0]=Math.min(he[0],ve.x),he[1]=Math.min(he[1],ve.y),he[2]=Math.max(he[2],ve.x),he[3]=Math.max(he[3],ve.y)}he[0]<Wi&&he[1]<Wi&&he[2]>=0&&he[3]>=0&&Y.insert(j,he[0],he[1],he[2],he[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new yc.VectorTile(new Hv(this.rawTileData)).layers,this.sourceLayerCoder=new R5(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,p,T,D){this.loadVTLayers();const z=u.params||{},F=Wi/u.tileSize/u.scale,j=Ws(z.filter),Y=u.queryGeometry,ie=u.queryPadding*F,Ae=F5(Y),he=this.grid.query(Ae.minX-ie,Ae.minY-ie,Ae.maxX+ie,Ae.maxY+ie),ge=F5(u.cameraQueryGeometry),ve=this.grid3D.query(ge.minX-ie,ge.minY-ie,ge.maxX+ie,ge.maxY+ie,(Ne,nt,ut,et)=>function(at,_t,yt,rn,un){for(const jt of at)if(_t<=jt.x&&yt<=jt.y&&rn>=jt.x&&un>=jt.y)return!0;const Zt=[new Mt(_t,yt),new Mt(_t,un),new Mt(rn,un),new Mt(rn,yt)];if(at.length>2){for(const jt of Zt)if(P0(at,jt))return!0}for(let jt=0;jt<at.length-1;jt++)if(X7(at[jt],at[jt+1],Zt))return!0;return!1}(u.cameraQueryGeometry,Ne-ie,nt-ie,ut+ie,et+ie));for(const Ne of ve)he.push(Ne);he.sort(EU);const xe={};let Ge;for(let Ne=0;Ne<he.length;Ne++){const nt=he[Ne];if(nt===Ge)continue;Ge=nt;const ut=this.featureIndexArray.get(nt);let et=null;this.loadMatchingFeature(xe,ut.bucketIndex,ut.sourceLayerIndex,ut.featureIndex,j,z.layers,z.availableImages,p,T,D,(at,_t,yt)=>(et||(et=gh(at)),_t.queryIntersectsFeature(Y,at,yt,et,this.z,u.transform,F,u.pixelPosMatrix)))}return xe}loadMatchingFeature(u,p,T,D,z,F,j,Y,ie,Ae,he){const ge=this.bucketLayerIDs[p];if(F&&!function(Ne,nt){for(let ut=0;ut<Ne.length;ut++)if(nt.indexOf(Ne[ut])>=0)return!0;return!1}(F,ge))return;const ve=this.sourceLayerCoder.decode(T),xe=this.vtLayers[ve].feature(D);if(z.needGeometry){const Ne=mh(xe,!0);if(!z.filter(new Fr(this.tileID.overscaledZ),Ne,this.tileID.canonical))return}else if(!z.filter(new Fr(this.tileID.overscaledZ),xe))return;const Ge=this.getId(xe,ve);for(let Ne=0;Ne<ge.length;Ne++){const nt=ge[Ne];if(F&&F.indexOf(nt)<0)continue;const ut=Y[nt];if(!ut)continue;let et={};Ge&&Ae&&(et=Ae.getState(ut.sourceLayer||"_geojsonTileLayer",Ge));const at=H({},ie[nt]);at.paint=O5(at.paint,ut.paint,xe,et,j),at.layout=O5(at.layout,ut.layout,xe,et,j);const _t=!he||he(xe,ut,et);if(!_t)continue;const yt=new B5(xe,this.z,this.x,this.y,Ge);yt.layer=at;let rn=u[nt];rn===void 0&&(rn=u[nt]=[]),rn.push({featureIndex:D,feature:yt,intersectionZ:_t})}}lookupSymbolFeatures(u,p,T,D,z,F,j,Y){const ie={};this.loadVTLayers();const Ae=Ws(z);for(const he of u)this.loadMatchingFeature(ie,T,D,he,Ae,F,j,Y,p);return ie}hasLayer(u){for(const p of this.bucketLayerIDs)for(const T of p)if(u===T)return!0;return!1}getId(u,p){let T=u.id;return this.promoteId&&(T=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]],typeof T=="boolean"&&(T=Number(T))),T}}function O5(f,u,p,T,D){return Z(f,(z,F)=>{const j=u instanceof Ul?u.get(F):null;return j&&j.evaluate?j.evaluate(p,T,D):j})}function F5(f){let u=1/0,p=1/0,T=-1/0,D=-1/0;for(const z of f)u=Math.min(u,z.x),p=Math.min(p,z.y),T=Math.max(T,z.x),D=Math.max(D,z.y);return{minX:u,minY:p,maxX:T,maxY:D}}function EU(f,u){return u-f}var sx;Gt("FeatureIndex",z5,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(sx=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",sx.load="load",sx.fullLoad="fullLoad";let Jm=null,Wd=[];const ox=1e3/30,TU={mark(f){performance.mark(f)},frame(f){const u=f;Jm!=null&&Wd.push(u-Jm),Jm=u},clearMetrics(){Jm=null,Wd=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const f in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[f])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const f=performance.getEntriesByName("loadTime")[0].duration,u=performance.getEntriesByName("fullLoadTime")[0].duration,p=Wd.length,T=1/(Wd.reduce((z,F)=>z+F,0)/p/1e3),D=Wd.filter(z=>z>ox).reduce((z,F)=>z+(F-ox)/ox,0);return{loadTime:f,fullLoadTime:u,fps:T,percentDroppedFrames:D/(p+D)*100}}};a.AJAXError=sr,a.ARRAY_TYPE=eo,a.Actor=class{constructor(f,u,p){this.target=f,this.parent=u,this.mapId=p,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},se(["receive","process"],this),this.invoker=new bU(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=We()?f:window}send(f,u,p,T,D=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);p&&(this.callbacks[z]=p);const F=Ye(this.globalScope)?void 0:[];return this.target.postMessage({id:z,type:f,hasCallback:!!p,targetMapId:T,mustQueue:D,sourceMapId:this.mapId,data:wa(u,F)},F),{cancel:()=>{p&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:T,sourceMapId:this.mapId})}}}receive(f){const u=f.data,p=u.id;if(p&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){delete this.tasks[p];const T=this.cancelCallbacks[p];delete this.cancelCallbacks[p],T&&T()}else We()||u.mustQueue?(this.tasks[p]=u,this.taskQueue.push(p),this.invoker.trigger()):this.processTask(p,u)}process(){if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){if(u.type==="<response>"){const p=this.callbacks[f];delete this.callbacks[f],p&&(u.error?p(Xo(u.error)):p(null,Xo(u.data)))}else{let p=!1;const T=Ye(this.globalScope)?void 0:[],D=u.hasCallback?(j,Y)=>{p=!0,delete this.cancelCallbacks[f],this.target.postMessage({id:f,type:"<response>",sourceMapId:this.mapId,error:j?wa(j):null,data:wa(Y,T)},T)}:j=>{p=!0};let z=null;const F=Xo(u.data);if(this.parent[u.type])z=this.parent[u.type](u.sourceMapId,F,D);else if(this.parent.getWorkerSource){const j=u.type.split(".");z=this.parent.getWorkerSource(u.sourceMapId,j[0],F.source)[j[1]](F,D)}else D(new Error(`Could not find function ${u.type}`));!p&&z&&z.cancel&&(this.cancelCallbacks[f]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=zd,a.CanonicalTileID=ix,a.CollisionBoxArray=je,a.CollisionCircleLayoutArray=class extends B{},a.Color=o,a.DEMData=D5,a.DataConstantProperty=sn,a.DictionaryCoder=R5,a.EXTENT=Wi,a.ErrorEvent=Ps,a.EvaluationParameters=Fr,a.Event=Yr,a.Evented=Si,a.FeatureIndex=z5,a.FillBucket=Vv,a.FillExtrusionBucket=jv,a.GeoJSONFeature=B5,a.ImageAtlas=o5,a.ImagePosition=Qv,a.LineBucket=$v,a.LineStripIndexArray=class extends we{},a.LngLat=vi,a.LngLatBounds=_h,a.MercatorCoordinate=Km,a.ONE_EM=ls,a.OverscaledTileID=Ta,a.PerformanceUtils=TU,a.PosArray=N,a.Properties=Xr,a.QuadTriangleArray=class extends ${},a.RGBAImage=Ea,a.RasterBoundsArray=class extends L{},a.RequestPerformance=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.ResourceType=bt,a.SegmentVector=mt,a.SymbolBucket=z0,a.Transitionable=pu,a.TriangleIndexArray=st,a.Uniform1f=mu,a.Uniform1i=class extends il{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.Uniform2f=class extends il{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.Uniform3f=class extends il{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.Uniform4f=M0,a.UniformColor=w4,a.UniformMatrix4f=class extends il{constructor(f,u){super(f,u),this.current=W7}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.UnwrappedTileID=L5,a.ValidationError=kt,a.ZoomHistory=Au,a.add=function(f,u,p){return f[0]=u[0]+p[0],f[1]=u[1]+p[1],f[2]=u[2]+p[2],f},a.addDynamicAttributes=Kv,a.asyncAll=function(f,u,p){if(!f.length)return p(null,[]);let T=f.length;const D=new Array(f.length);let z=null;f.forEach((F,j)=>{u(F,(Y,ie)=>{Y&&(z=Y),D[j]=ie,--T==0&&p(z,D)})})},a.bezier=M,a.bindAll=se,a.cacheEntryPossiblyAdded=function(f){Jn++,Jn>vr&&(f.getActor().send("enforceCacheSizeLimit",Cn),Jn=0)},a.clamp=k,a.clearTileCache=function(f){const u=caches.delete(Tt);f&&u.catch(f).then(()=>f())},a.clipLine=y5,a.clone=function(f){var u=new eo(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},a.clone$1=re,a.clone$2=function(f){var u=new eo(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},a.collisionCircleLayout=jN,a.config=xt,a.copy=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.create=function(){var f=new eo(16);return eo!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.create$1=I4,a.createExpression=Za,a.createFilter=Ws,a.createLayout=Kr,a.createStyleLayer=function(f){return f.type==="custom"?new xU(f):new wU[f.type](f)},a.cross=function(f,u,p){var T=u[0],D=u[1],z=u[2],F=p[0],j=p[1],Y=p[2];return f[0]=D*Y-z*j,f[1]=z*F-T*Y,f[2]=T*j-D*F,f},a.dot=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},a.dot$1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]*u[3]},a.ease=C,a.emitValidationErrors=el,a.enforceCacheSizeLimit=function(f){Gn(),Xt&&Xt.then(u=>{u.keys().then(p=>{for(let T=0;T<p.length-f;T++)u.delete(p[T])})})},a.equals=function(f,u){var p=f[0],T=f[1],D=f[2],z=f[3],F=f[4],j=f[5],Y=f[6],ie=f[7],Ae=f[8],he=f[9],ge=f[10],ve=f[11],xe=f[12],Ge=f[13],Ne=f[14],nt=f[15],ut=u[0],et=u[1],at=u[2],_t=u[3],yt=u[4],rn=u[5],un=u[6],Zt=u[7],jt=u[8],Nt=u[9],Yt=u[10],Wt=u[11],Pt=u[12],Tn=u[13],gn=u[14],rr=u[15];return Math.abs(p-ut)<=Js*Math.max(1,Math.abs(p),Math.abs(ut))&&Math.abs(T-et)<=Js*Math.max(1,Math.abs(T),Math.abs(et))&&Math.abs(D-at)<=Js*Math.max(1,Math.abs(D),Math.abs(at))&&Math.abs(z-_t)<=Js*Math.max(1,Math.abs(z),Math.abs(_t))&&Math.abs(F-yt)<=Js*Math.max(1,Math.abs(F),Math.abs(yt))&&Math.abs(j-rn)<=Js*Math.max(1,Math.abs(j),Math.abs(rn))&&Math.abs(Y-un)<=Js*Math.max(1,Math.abs(Y),Math.abs(un))&&Math.abs(ie-Zt)<=Js*Math.max(1,Math.abs(ie),Math.abs(Zt))&&Math.abs(Ae-jt)<=Js*Math.max(1,Math.abs(Ae),Math.abs(jt))&&Math.abs(he-Nt)<=Js*Math.max(1,Math.abs(he),Math.abs(Nt))&&Math.abs(ge-Yt)<=Js*Math.max(1,Math.abs(ge),Math.abs(Yt))&&Math.abs(ve-Wt)<=Js*Math.max(1,Math.abs(ve),Math.abs(Wt))&&Math.abs(xe-Pt)<=Js*Math.max(1,Math.abs(xe),Math.abs(Pt))&&Math.abs(Ge-Tn)<=Js*Math.max(1,Math.abs(Ge),Math.abs(Tn))&&Math.abs(Ne-gn)<=Js*Math.max(1,Math.abs(Ne),Math.abs(gn))&&Math.abs(nt-rr)<=Js*Math.max(1,Math.abs(nt),Math.abs(rr))},a.evaluateSizeForFeature=function(f,{uSize:u,uSizeT:p},{lowerSize:T,upperSize:D}){return f.kind==="source"?T/vu:f.kind==="composite"?An(T/vu,D/vu,p):u},a.evaluateSizeForZoom=function(f,u){let p=0,T=0;if(f.kind==="constant")T=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:D,minZoom:z,maxZoom:F}=f,j=D?k(qn.interpolationFactor(D,u,z,F),0,1):0;f.kind==="camera"?T=An(f.minSize,f.maxSize,j):p=j}return{uSizeT:p,uSize:T}},a.evaluateVariableOffset=x5,a.evented=Wr,a.exported=en,a.exported$1=ir,a.extend=H,a.filterObject=J,a.fromRotation=function(f,u){var p=Math.sin(u),T=Math.cos(u);return f[0]=T,f[1]=p,f[2]=0,f[3]=-p,f[4]=T,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},a.fromScaling=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.getAnchorAlignment=Zv,a.getAnchorJustification=Xv,a.getArrayBuffer=Ar,a.getImage=Ti,a.getJSON=function(f,u){return gr(H(f,{type:"json"}),u)},a.getOverlapMode=nx,a.getRTLTextPluginStatus=Fl,a.getReferrer=er,a.getVideo=function(f,u){const p=window.document.createElement("video");p.muted=!0,p.onloadstart=function(){u(null,p)};for(let T=0;T<f.length;T++){const D=window.document.createElement("source");Zr(f[T])||(p.crossOrigin="Anonymous"),D.src=f[T],p.appendChild(D)}return{cancel:()=>{}}},a.identity=Lv,a.invert=function(f,u){var p=u[0],T=u[1],D=u[2],z=u[3],F=u[4],j=u[5],Y=u[6],ie=u[7],Ae=u[8],he=u[9],ge=u[10],ve=u[11],xe=u[12],Ge=u[13],Ne=u[14],nt=u[15],ut=p*j-T*F,et=p*Y-D*F,at=p*ie-z*F,_t=T*Y-D*j,yt=T*ie-z*j,rn=D*ie-z*Y,un=Ae*Ge-he*xe,Zt=Ae*Ne-ge*xe,jt=Ae*nt-ve*xe,Nt=he*Ne-ge*Ge,Yt=he*nt-ve*Ge,Wt=ge*nt-ve*Ne,Pt=ut*Wt-et*Yt+at*Nt+_t*jt-yt*Zt+rn*un;return Pt?(f[0]=(j*Wt-Y*Yt+ie*Nt)*(Pt=1/Pt),f[1]=(D*Yt-T*Wt-z*Nt)*Pt,f[2]=(Ge*rn-Ne*yt+nt*_t)*Pt,f[3]=(ge*yt-he*rn-ve*_t)*Pt,f[4]=(Y*jt-F*Wt-ie*Zt)*Pt,f[5]=(p*Wt-D*jt+z*Zt)*Pt,f[6]=(Ne*at-xe*rn-nt*et)*Pt,f[7]=(Ae*rn-ge*at+ve*et)*Pt,f[8]=(F*Yt-j*jt+ie*un)*Pt,f[9]=(T*jt-p*Yt-z*un)*Pt,f[10]=(xe*yt-Ge*at+nt*ut)*Pt,f[11]=(he*at-Ae*yt-ve*ut)*Pt,f[12]=(j*Zt-F*Nt-Y*un)*Pt,f[13]=(p*Nt-T*Zt+D*un)*Pt,f[14]=(Ge*et-xe*_t-Ne*ut)*Pt,f[15]=(Ae*_t-he*et+ge*ut)*Pt,f):null},a.isImageBitmap=pt,a.isSafari=Ye,a.isWorker=We,a.keysDifference=function(f,u){const p=[];for(const T in f)T in u||p.push(T);return p},a.lazyLoadRTLTextPlugin=function(){_s.isLoading()||_s.isLoaded()||Fl()!=="deferred"||dc()},a.makeRequest=gr,a.mapObject=Z,a.mercatorXfromLng=C5,a.mercatorYfromLat=P5,a.mercatorZfromAltitude=I5,a.mul=eN,a.mul$1=function(f,u,p){return f[0]=u[0]*p[0],f[1]=u[1]*p[1],f[2]=u[2]*p[2],f[3]=u[3]*p[3],f},a.multiply=k4,a.nextPowerOfTwo=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.normalize=function(f,u){var p=u[0],T=u[1],D=u[2],z=p*p+T*T+D*D;return z>0&&(z=1/Math.sqrt(z)),f[0]=u[0]*z,f[1]=u[1]*z,f[2]=u[2]*z,f},a.number=An,a.ortho=function(f,u,p,T,D,z,F){var j=1/(u-p),Y=1/(T-D),ie=1/(z-F);return f[0]=-2*j,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*Y,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*ie,f[11]=0,f[12]=(u+p)*j,f[13]=(D+T)*Y,f[14]=(F+z)*ie,f[15]=1,f},a.parseCacheControl=qe,a.parseGlyphPbf=function(f){return new Hv(f).readFields(eU,[])},a.pbf=Hv,a.performSymbolLayout=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Wi/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0].layout,p=f.bucket.layers[0]._unevaluatedLayout._values,T={layoutIconSize:p["icon-size"].possiblyEvaluate(new Fr(f.bucket.zoom+1),f.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Fr(f.bucket.zoom+1),f.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Fr(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ie}=f.bucket.textSizeData;T.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Fr(Y),f.canonical),p["text-size"].possiblyEvaluate(new Fr(ie),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ie}=f.bucket.iconSizeData;T.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Fr(Y),f.canonical),p["icon-size"].possiblyEvaluate(new Fr(ie),f.canonical)]}const D=u.get("text-line-height")*ls,z=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",F=u.get("text-keep-upright"),j=u.get("text-size");for(const Y of f.bucket.features){const ie=u.get("text-font").evaluate(Y,{},f.canonical).join(","),Ae=j.evaluate(Y,{},f.canonical),he=T.layoutTextSize.evaluate(Y,{},f.canonical),ge=T.layoutIconSize.evaluate(Y,{},f.canonical),ve={horizontal:{},vertical:void 0},xe=Y.text;let Ge,Ne=[0,0];if(xe){const et=xe.toString(),at=u.get("text-letter-spacing").evaluate(Y,{},f.canonical)*ls,_t=Ol(et)?at:0,yt=u.get("text-anchor").evaluate(Y,{},f.canonical),rn=u.get("text-variable-anchor");if(!rn){const Yt=u.get("text-radial-offset").evaluate(Y,{},f.canonical);Ne=Yt?x5(yt,[Yt*ls,Yv]):u.get("text-offset").evaluate(Y,{},f.canonical).map(Wt=>Wt*ls)}let un=z?"center":u.get("text-justify").evaluate(Y,{},f.canonical);const Zt=u.get("symbol-placement"),jt=Zt==="point"?u.get("text-max-width").evaluate(Y,{},f.canonical)*ls:0,Nt=()=>{f.bucket.allowVerticalPlacement&&bA(et)&&(ve.vertical=$m(xe,f.glyphMap,f.glyphPositions,f.imagePositions,ie,jt,D,yt,"left",_t,Ne,a.WritingMode.vertical,!0,Zt,he,Ae))};if(!z&&rn){const Yt=un==="auto"?rn.map(Pt=>Xv(Pt)):[un];let Wt=!1;for(let Pt=0;Pt<Yt.length;Pt++){const Tn=Yt[Pt];if(!ve.horizontal[Tn])if(Wt)ve.horizontal[Tn]=ve.horizontal[0];else{const gn=$m(xe,f.glyphMap,f.glyphPositions,f.imagePositions,ie,jt,D,"center",Tn,_t,Ne,a.WritingMode.horizontal,!1,Zt,he,Ae);gn&&(ve.horizontal[Tn]=gn,Wt=gn.positionedLines.length===1)}}Nt()}else{un==="auto"&&(un=Xv(yt));const Yt=$m(xe,f.glyphMap,f.glyphPositions,f.imagePositions,ie,jt,D,yt,un,_t,Ne,a.WritingMode.horizontal,!1,Zt,he,Ae);Yt&&(ve.horizontal[un]=Yt),Nt(),bA(et)&&z&&F&&(ve.vertical=$m(xe,f.glyphMap,f.glyphPositions,f.imagePositions,ie,jt,D,yt,un,_t,Ne,a.WritingMode.vertical,!1,Zt,he,Ae))}}let nt=!1;if(Y.icon&&Y.icon.name){const et=f.imageMap[Y.icon.name];et&&(Ge=oU(f.imagePositions[Y.icon.name],u.get("icon-offset").evaluate(Y,{},f.canonical),u.get("icon-anchor").evaluate(Y,{},f.canonical)),nt=!!et.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=nt:f.bucket.sdfIcons!==nt&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(et.pixelRatio!==f.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const ut=b5(ve.horizontal)||ve.vertical;f.bucket.iconsInText=!!ut&&ut.iconsInText,(ut||Ge)&&fU(f.bucket,Y,ve,Ge,f.imageMap,T,he,ge,Ne,nt,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.perspective=function(f,u,p,T,D){var z,F=1/Math.tan(u/2);return f[0]=F/p,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=F,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,D!=null&&D!==1/0?(f[10]=(D+T)*(z=1/(T-D)),f[14]=2*D*T*z):(f[10]=-1,f[14]=-2*T),f},a.pick=function(f,u){const p={};for(let T=0;T<u.length;T++){const D=u[T];D in f&&(p[D]=f[D])}return p},a.plugin=_s,a.pointGeometry=Mt,a.polygonIntersectsPolygon=S4,a.potpack=s5,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=Gt,a.registerForPluginStateChange=function(f){return f({pluginStatus:Hi,pluginURL:So}),Wr.on("pluginStateChange",f),f},a.renderColorRamp=F4,a.rotateX=function(f,u,p){var T=Math.sin(p),D=Math.cos(p),z=u[4],F=u[5],j=u[6],Y=u[7],ie=u[8],Ae=u[9],he=u[10],ge=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=z*D+ie*T,f[5]=F*D+Ae*T,f[6]=j*D+he*T,f[7]=Y*D+ge*T,f[8]=ie*D-z*T,f[9]=Ae*D-F*T,f[10]=he*D-j*T,f[11]=ge*D-Y*T,f},a.rotateZ=function(f,u,p){var T=Math.sin(p),D=Math.cos(p),z=u[0],F=u[1],j=u[2],Y=u[3],ie=u[4],Ae=u[5],he=u[6],ge=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=z*D+ie*T,f[1]=F*D+Ae*T,f[2]=j*D+he*T,f[3]=Y*D+ge*T,f[4]=ie*D-z*T,f[5]=Ae*D-F*T,f[6]=he*D-j*T,f[7]=ge*D-Y*T,f},a.scale=function(f,u,p){var T=p[0],D=p[1],z=p[2];return f[0]=u[0]*T,f[1]=u[1]*T,f[2]=u[2]*T,f[3]=u[3]*T,f[4]=u[4]*D,f[5]=u[5]*D,f[6]=u[6]*D,f[7]=u[7]*D,f[8]=u[8]*z,f[9]=u[9]*z,f[10]=u[10]*z,f[11]=u[11]*z,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.scale$1=function(f,u,p){return f[0]=u[0]*p,f[1]=u[1]*p,f[2]=u[2]*p,f},a.setCacheLimits=function(f,u){Cn=f,vr=u},a.setRTLTextPlugin=function(f,u,p=!1){if(Hi===cu||Hi===hu||Hi===fu)throw new Error("setRTLTextPlugin cannot be called multiple times.");So=en.resolveURL(f),Hi=cu,Zs=u,ba(),p||dc()},a.spec=ht,a.sphericalToCartesian=function([f,u,p]){return u+=90,u*=Math.PI/180,p*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(p),y:f*Math.sin(u)*Math.sin(p),z:f*Math.cos(p)}},a.sqrLen=function(f){var u=f[0],p=f[1];return u*u+p*p},a.sub=function(f,u,p){return f[0]=u[0]-p[0],f[1]=u[1]-p[1],f[2]=u[2]-p[2],f},a.toEvaluationFeature=mh,a.transformMat3=function(f,u,p){var T=u[0],D=u[1],z=u[2];return f[0]=T*p[0]+D*p[3]+z*p[6],f[1]=T*p[1]+D*p[4]+z*p[7],f[2]=T*p[2]+D*p[5]+z*p[8],f},a.transformMat4=zm,a.transformMat4$1=function(f,u,p){var T=u[0],D=u[1];return f[0]=p[0]*T+p[4]*D+p[12],f[1]=p[1]*T+p[5]*D+p[13],f},a.translate=function(f,u,p){var T,D,z,F,j,Y,ie,Ae,he,ge,ve,xe,Ge=p[0],Ne=p[1],nt=p[2];return u===f?(f[12]=u[0]*Ge+u[4]*Ne+u[8]*nt+u[12],f[13]=u[1]*Ge+u[5]*Ne+u[9]*nt+u[13],f[14]=u[2]*Ge+u[6]*Ne+u[10]*nt+u[14],f[15]=u[3]*Ge+u[7]*Ne+u[11]*nt+u[15]):(D=u[1],z=u[2],F=u[3],j=u[4],Y=u[5],ie=u[6],Ae=u[7],he=u[8],ge=u[9],ve=u[10],xe=u[11],f[0]=T=u[0],f[1]=D,f[2]=z,f[3]=F,f[4]=j,f[5]=Y,f[6]=ie,f[7]=Ae,f[8]=he,f[9]=ge,f[10]=ve,f[11]=xe,f[12]=T*Ge+j*Ne+he*nt+u[12],f[13]=D*Ge+Y*Ne+ge*nt+u[13],f[14]=z*Ge+ie*Ne+ve*nt+u[14],f[15]=F*Ge+Ae*Ne+xe*nt+u[15]),f},a.triggerPluginCompletionEvent=du,a.unicodeBlockLookup=$t,a.uniqueId=function(){return q++},a.validateCustomStyleLayer=function(f){const u=[],p=f.id;return p===void 0&&u.push({message:`layers.${p}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${p}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${p}: property "renderingMode" must be either "2d" or "3d"`}),u},a.validateLight=Ja,a.validateStyle=zl,a.vectorTile=yc,a.warnOnce=_e,a.wrap=U}),s(["./shared"],function(a){function y(K){const W=typeof K;if(W==="number"||W==="boolean"||W==="string"||K==null)return JSON.stringify(K);if(Array.isArray(K)){let o="[";for(const G of K)o+=`${y(G)},`;return`${o}]`}const ee=Object.keys(K).sort();let ce="{";for(let o=0;o<ee.length;o++)ce+=`${JSON.stringify(ee[o])}:${y(K[ee[o]])},`;return`${ce}}`}function w(K){let W="";for(const ee of a.refProperties)W+=`/${y(K[ee])}`;return W}class M{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,ee){for(const o of W){this._layerConfigs[o.id]=o;const G=this._layers[o.id]=a.createStyleLayer(o);G._featureFilter=a.createFilter(G.filter),this.keyCache[o.id]&&delete this.keyCache[o.id]}for(const o of ee)delete this.keyCache[o],delete this._layerConfigs[o],delete this._layers[o];this.familiesBySource={};const ce=function(o,G){const De={};for(let Pe=0;Pe<o.length;Pe++){const Le=G&&G[o[Pe].id]||w(o[Pe]);G&&(G[o[Pe].id]=Le);let Ze=De[Le];Ze||(Ze=De[Le]=[]),Ze.push(o[Pe])}const ke=[];for(const Pe in De)ke.push(De[Pe]);return ke}(Object.values(this._layerConfigs),this.keyCache);for(const o of ce){const G=o.map(lt=>this._layers[lt.id]),De=G[0];if(De.visibility==="none")continue;const ke=De.source||"";let Pe=this.familiesBySource[ke];Pe||(Pe=this.familiesBySource[ke]={});const Le=De.sourceLayer||"_geojsonTileLayer";let Ze=Pe[Le];Ze||(Ze=Pe[Le]=[]),Ze.push(G)}}}class C{constructor(W){const ee={},ce=[];for(const ke in W){const Pe=W[ke],Le=ee[ke]={};for(const Ze in Pe){const lt=Pe[+Ze];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const Qe={x:0,y:0,w:lt.bitmap.width+2,h:lt.bitmap.height+2};ce.push(Qe),Le[Ze]={rect:Qe,metrics:lt.metrics}}}const{w:o,h:G}=a.potpack(ce),De=new a.AlphaImage({width:o||1,height:G||1});for(const ke in W){const Pe=W[ke];for(const Le in Pe){const Ze=Pe[+Le];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const lt=ee[ke][Le].rect;a.AlphaImage.copy(Ze.bitmap,De,{x:0,y:0},{x:lt.x+1,y:lt.y+1},Ze.bitmap)}}this.image=De,this.positions=ee}}a.register("GlyphAtlas",C);class k{constructor(W){this.tileID=new a.OverscaledTileID(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId}parse(W,ee,ce,o,G){this.status="parsing",this.data=W,this.collisionBoxArray=new a.CollisionBoxArray;const De=new a.DictionaryCoder(Object.keys(W.layers).sort()),ke=new a.FeatureIndex(this.tileID,this.promoteId);ke.bucketLayerIDs=[];const Pe={},Le={featureIndex:ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ce},Ze=ee.familiesBySource[this.source];for(const nn in Ze){const pn=W.layers[nn];if(!pn)continue;pn.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${nn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bn=De.encode(nn),Vt=[];for(let Ue=0;Ue<pn.length;Ue++){const Dt=pn.feature(Ue),Ce=ke.getId(Dt,nn);Vt.push({feature:Dt,id:Ce,index:Ue,sourceLayerIndex:Bn})}for(const Ue of Ze[nn]){const Dt=Ue[0];Dt.source!==this.source&&a.warnOnce(`layer.source = ${Dt.source} does not equal this.source = ${this.source}`),Dt.minzoom&&this.zoom<Math.floor(Dt.minzoom)||Dt.maxzoom&&this.zoom>=Dt.maxzoom||Dt.visibility!=="none"&&(U(Ue,this.zoom,ce),(Pe[Dt.id]=Dt.createBucket({index:ke.bucketLayerIDs.length,layers:Ue,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bn,sourceID:this.source})).populate(Vt,Le,this.tileID.canonical),ke.bucketLayerIDs.push(Ue.map(Ce=>Ce.id)))}}let lt,Qe,ft,vt;const wt=a.mapObject(Le.glyphDependencies,nn=>Object.keys(nn).map(Number));Object.keys(wt).length?o.send("getGlyphs",{uid:this.uid,stacks:wt},(nn,pn)=>{lt||(lt=nn,Qe=pn,xn.call(this))}):Qe={};const Jt=Object.keys(Le.iconDependencies);Jt.length?o.send("getImages",{icons:Jt,source:this.source,tileID:this.tileID,type:"icons"},(nn,pn)=>{lt||(lt=nn,ft=pn,xn.call(this))}):ft={};const Ut=Object.keys(Le.patternDependencies);function xn(){if(lt)return G(lt);if(Qe&&ft&&vt){const nn=new C(Qe),pn=new a.ImageAtlas(ft,vt);for(const Bn in Pe){const Vt=Pe[Bn];Vt instanceof a.SymbolBucket?(U(Vt.layers,this.zoom,ce),a.performSymbolLayout({bucket:Vt,glyphMap:Qe,glyphPositions:nn.positions,imageMap:ft,imagePositions:pn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Vt.hasPattern&&(Vt instanceof a.LineBucket||Vt instanceof a.FillBucket||Vt instanceof a.FillExtrusionBucket)&&(U(Vt.layers,this.zoom,ce),Vt.addFeatures(Le,this.tileID.canonical,pn.patternPositions))}this.status="done",G(null,{buckets:Object.values(Pe).filter(Bn=>!Bn.isEmpty()),featureIndex:ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nn.image,imageAtlas:pn,glyphMap:this.returnDependencies?Qe:null,iconMap:this.returnDependencies?ft:null,glyphPositions:this.returnDependencies?nn.positions:null})}}Ut.length?o.send("getImages",{icons:Ut,source:this.source,tileID:this.tileID,type:"patterns"},(nn,pn)=>{lt||(lt=nn,vt=pn,xn.call(this))}):vt={},xn.call(this)}}function U(K,W,ee){const ce=new a.EvaluationParameters(W);for(const o of K)o.recalculate(ce,ee)}function H(K,W){const ee=a.getArrayBuffer(K.request,(ce,o,G,De)=>{ce?W(ce):o&&W(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(o)),rawData:o,cacheControl:G,expires:De})});return()=>{ee.cancel(),W()}}class q{constructor(W,ee,ce,o){this.actor=W,this.layerIndex=ee,this.availableImages=ce,this.loadVectorData=o||H,this.loading={},this.loaded={}}loadTile(W,ee){const ce=W.uid;this.loading||(this.loading={});const o=!!(W&&W.request&&W.request.collectResourceTiming)&&new a.RequestPerformance(W.request),G=this.loading[ce]=new k(W);G.abort=this.loadVectorData(W,(De,ke)=>{if(delete this.loading[ce],De||!ke)return G.status="done",this.loaded[ce]=G,ee(De);const Pe=ke.rawData,Le={};ke.expires&&(Le.expires=ke.expires),ke.cacheControl&&(Le.cacheControl=ke.cacheControl);const Ze={};if(o){const lt=o.finish();lt&&(Ze.resourceTiming=JSON.parse(JSON.stringify(lt)))}G.vectorTile=ke.vectorTile,G.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,(lt,Qe)=>{if(lt||!Qe)return ee(lt);ee(null,a.extend({rawTileData:Pe.slice(0)},Qe,Le,Ze))}),this.loaded=this.loaded||{},this.loaded[ce]=G})}reloadTile(W,ee){const ce=this.loaded,o=W.uid,G=this;if(ce&&ce[o]){const De=ce[o];De.showCollisionBoxes=W.showCollisionBoxes;const ke=(Pe,Le)=>{const Ze=De.reloadCallback;Ze&&(delete De.reloadCallback,De.parse(De.vectorTile,G.layerIndex,this.availableImages,G.actor,Ze)),ee(Pe,Le)};De.status==="parsing"?De.reloadCallback=ke:De.status==="done"&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,ke):ke())}}abortTile(W,ee){const ce=this.loading,o=W.uid;ce&&ce[o]&&ce[o].abort&&(ce[o].abort(),delete ce[o]),ee()}removeTile(W,ee){const ce=this.loaded,o=W.uid;ce&&ce[o]&&delete ce[o],ee()}}class se{constructor(){this.loaded={}}loadTile(W,ee){const{uid:ce,encoding:o,rawImageData:G}=W,De=a.isImageBitmap(G)?this.getImageData(G):G,ke=new a.DEMData(ce,De,o);this.loaded=this.loaded||{},this.loaded[ce]=ke,ee(null,ke)}getImageData(W){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const ee=this.offscreenCanvasContext.getImageData(-1,-1,W.width+2,W.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:ee.width,height:ee.height},ee.data)}removeTile(W){const ee=this.loaded,ce=W.uid;ee&&ee[ce]&&delete ee[ce]}}var Z=function K(W,ee){var ce,o=W&&W.type;if(o==="FeatureCollection")for(ce=0;ce<W.features.length;ce++)K(W.features[ce],ee);else if(o==="GeometryCollection")for(ce=0;ce<W.geometries.length;ce++)K(W.geometries[ce],ee);else if(o==="Feature")K(W.geometry,ee);else if(o==="Polygon")J(W.coordinates,ee);else if(o==="MultiPolygon")for(ce=0;ce<W.coordinates.length;ce++)J(W.coordinates[ce],ee);return W};function J(K,W){if(K.length!==0){re(K[0],W);for(var ee=1;ee<K.length;ee++)re(K[ee],!W)}}function re(K,W){for(var ee=0,ce=0,o=0,G=K.length,De=G-1;o<G;De=o++){var ke=(K[o][0]-K[De][0])*(K[De][1]+K[o][1]),Pe=ee+ke;ce+=Math.abs(ee)>=Math.abs(ke)?ee-Pe+ke:ke-Pe+ee,ee=Pe}ee+ce>=0!=!!W&&K.reverse()}const de=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class _e{constructor(W){this._feature=W,this.extent=a.EXTENT,this.type=W.type,this.properties=W.tags,"id"in W&&!isNaN(W.id)&&(this.id=parseInt(W.id,10))}loadGeometry(){if(this._feature.type===1){const W=[];for(const ee of this._feature.geometry)W.push([new a.pointGeometry(ee[0],ee[1])]);return W}{const W=[];for(const ee of this._feature.geometry){const ce=[];for(const o of ee)ce.push(new a.pointGeometry(o[0],o[1]));W.push(ce)}return W}}toGeoJSON(W,ee,ce){return de.call(this,W,ee,ce)}}class fe{constructor(W){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=W.length,this._features=W}feature(W){return new _e(this._features[W])}}var Fe={exports:{}},We=a.pointGeometry,qe=a.vectorTile.VectorTileFeature,Ke=Oe;function Oe(K,W){this.options=W||{},this.features=K,this.length=K.length}function tt(K,W){this.id=typeof K.id=="number"?K.id:void 0,this.type=K.type,this.rawGeometry=K.type===1?[K.geometry]:K.geometry,this.properties=K.tags,this.extent=W||4096}Oe.prototype.feature=function(K){return new tt(this.features[K],this.options.extent)},tt.prototype.loadGeometry=function(){var K=this.rawGeometry;this.geometry=[];for(var W=0;W<K.length;W++){for(var ee=K[W],ce=[],o=0;o<ee.length;o++)ce.push(new We(ee[o][0],ee[o][1]));this.geometry.push(ce)}return this.geometry},tt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var K=this.geometry,W=1/0,ee=-1/0,ce=1/0,o=-1/0,G=0;G<K.length;G++)for(var De=K[G],ke=0;ke<De.length;ke++){var Pe=De[ke];W=Math.min(W,Pe.x),ee=Math.max(ee,Pe.x),ce=Math.min(ce,Pe.y),o=Math.max(o,Pe.y)}return[W,ce,ee,o]},tt.prototype.toGeoJSON=qe.prototype.toGeoJSON;var Ye=a.pbf,pt=Ke;function en(K){var W=new Ye;return function(ee,ce){for(var o in ee.layers)ce.writeMessage(3,Mt,ee.layers[o])}(K,W),W.finish()}function Mt(K,W){var ee;W.writeVarintField(15,K.version||1),W.writeStringField(1,K.name||""),W.writeVarintField(5,K.extent||4096);var ce={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<K.length;ee++)ce.feature=K.feature(ee),W.writeMessage(2,Qt,ce);var o=ce.keys;for(ee=0;ee<o.length;ee++)W.writeStringField(3,o[ee]);var G=ce.values;for(ee=0;ee<G.length;ee++)W.writeMessage(4,Cn,G[ee])}function Qt(K,W){var ee=K.feature;ee.id!==void 0&&W.writeVarintField(1,ee.id),W.writeMessage(2,xt,K),W.writeVarintField(3,ee.type),W.writeMessage(4,Mn,ee)}function xt(K,W){var ee=K.feature,ce=K.keys,o=K.values,G=K.keycache,De=K.valuecache;for(var ke in ee.properties){var Pe=ee.properties[ke],Le=G[ke];if(Pe!==null){Le===void 0&&(ce.push(ke),G[ke]=Le=ce.length-1),W.writeVarint(Le);var Ze=typeof Pe;Ze!=="string"&&Ze!=="boolean"&&Ze!=="number"&&(Pe=JSON.stringify(Pe));var lt=Ze+":"+Pe,Qe=De[lt];Qe===void 0&&(o.push(Pe),De[lt]=Qe=o.length-1),W.writeVarint(Qe)}}}function Tt(K,W){return(W<<3)+(7&K)}function Xt(K){return K<<1^K>>31}function Mn(K,W){for(var ee=K.loadGeometry(),ce=K.type,o=0,G=0,De=ee.length,ke=0;ke<De;ke++){var Pe=ee[ke],Le=1;ce===1&&(Le=Pe.length),W.writeVarint(Tt(1,Le));for(var Ze=ce===3?Pe.length-1:Pe.length,lt=0;lt<Ze;lt++){lt===1&&ce!==1&&W.writeVarint(Tt(2,Ze-1));var Qe=Pe[lt].x-o,ft=Pe[lt].y-G;W.writeVarint(Xt(Qe)),W.writeVarint(Xt(ft)),o+=Qe,G+=ft}ce===3&&W.writeVarint(Tt(7,1))}}function Cn(K,W){var ee=typeof K;ee==="string"?W.writeStringField(1,K):ee==="boolean"?W.writeBooleanField(7,K):ee==="number"&&(K%1!=0?W.writeDoubleField(3,K):K<0?W.writeSVarintField(6,K):W.writeVarintField(5,K))}function vr(K,W,ee,ce,o,G){if(o-ce<=ee)return;const De=ce+o>>1;Gn(K,W,De,ce,o,G%2),vr(K,W,ee,ce,De-1,G+1),vr(K,W,ee,De+1,o,G+1)}function Gn(K,W,ee,ce,o,G){for(;o>ce;){if(o-ce>600){const Le=o-ce+1,Ze=ee-ce+1,lt=Math.log(Le),Qe=.5*Math.exp(2*lt/3),ft=.5*Math.sqrt(lt*Qe*(Le-Qe)/Le)*(Ze-Le/2<0?-1:1);Gn(K,W,ee,Math.max(ce,Math.floor(ee-Ze*Qe/Le+ft)),Math.min(o,Math.floor(ee+(Le-Ze)*Qe/Le+ft)),G)}const De=W[2*ee+G];let ke=ce,Pe=o;for(Jn(K,W,ce,ee),W[2*o+G]>De&&Jn(K,W,ce,o);ke<Pe;){for(Jn(K,W,ke,Pe),ke++,Pe--;W[2*ke+G]<De;)ke++;for(;W[2*Pe+G]>De;)Pe--}W[2*ce+G]===De?Jn(K,W,ce,Pe):(Pe++,Jn(K,W,Pe,o)),Pe<=ee&&(ce=Pe+1),ee<=Pe&&(o=Pe-1)}}function Jn(K,W,ee,ce){ir(K,ee,ce),ir(W,2*ee,2*ce),ir(W,2*ee+1,2*ce+1)}function ir(K,W,ee){const ce=K[W];K[W]=K[ee],K[ee]=ce}function jn(K,W,ee,ce){const o=K-ee,G=W-ce;return o*o+G*G}Fe.exports=en,Fe.exports.fromVectorTileJs=en,Fe.exports.fromGeojsonVt=function(K,W){W=W||{};var ee={};for(var ce in K)ee[ce]=new pt(K[ce].features,W),ee[ce].name=ce,ee[ce].version=W.version,ee[ce].extent=W.extent;return en({layers:ee})},Fe.exports.GeoJSONWrapper=pt;const Lr=K=>K[0],St=K=>K[1];class ln{constructor(W,ee=Lr,ce=St,o=64,G=Float64Array){this.nodeSize=o,this.points=W;const De=W.length<65536?Uint16Array:Uint32Array,ke=this.ids=new De(W.length),Pe=this.coords=new G(2*W.length);for(let Le=0;Le<W.length;Le++)ke[Le]=Le,Pe[2*Le]=ee(W[Le]),Pe[2*Le+1]=ce(W[Le]);vr(ke,Pe,o,0,ke.length-1,0)}range(W,ee,ce,o){return function(G,De,ke,Pe,Le,Ze,lt){const Qe=[0,G.length-1,0],ft=[];let vt,wt;for(;Qe.length;){const Jt=Qe.pop(),Ut=Qe.pop(),xn=Qe.pop();if(Ut-xn<=lt){for(let Bn=xn;Bn<=Ut;Bn++)vt=De[2*Bn],wt=De[2*Bn+1],vt>=ke&&vt<=Le&&wt>=Pe&&wt<=Ze&&ft.push(G[Bn]);continue}const nn=Math.floor((xn+Ut)/2);vt=De[2*nn],wt=De[2*nn+1],vt>=ke&&vt<=Le&&wt>=Pe&&wt<=Ze&&ft.push(G[nn]);const pn=(Jt+1)%2;(Jt===0?ke<=vt:Pe<=wt)&&(Qe.push(xn),Qe.push(nn-1),Qe.push(pn)),(Jt===0?Le>=vt:Ze>=wt)&&(Qe.push(nn+1),Qe.push(Ut),Qe.push(pn))}return ft}(this.ids,this.coords,W,ee,ce,o,this.nodeSize)}within(W,ee,ce){return function(o,G,De,ke,Pe,Le){const Ze=[0,o.length-1,0],lt=[],Qe=Pe*Pe;for(;Ze.length;){const ft=Ze.pop(),vt=Ze.pop(),wt=Ze.pop();if(vt-wt<=Le){for(let pn=wt;pn<=vt;pn++)jn(G[2*pn],G[2*pn+1],De,ke)<=Qe&&lt.push(o[pn]);continue}const Jt=Math.floor((wt+vt)/2),Ut=G[2*Jt],xn=G[2*Jt+1];jn(Ut,xn,De,ke)<=Qe&&lt.push(o[Jt]);const nn=(ft+1)%2;(ft===0?De-Pe<=Ut:ke-Pe<=xn)&&(Ze.push(wt),Ze.push(Jt-1),Ze.push(nn)),(ft===0?De+Pe>=Ut:ke+Pe>=xn)&&(Ze.push(Jt+1),Ze.push(vt),Ze.push(nn))}return lt}(this.ids,this.coords,W,ee,ce,this.nodeSize)}}const yn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:K=>K},bt=Math.fround||(sr=new Float32Array(1),K=>(sr[0]=+K,sr[0]));var sr;class er{constructor(W){this.options=Ti(Object.create(yn),W),this.trees=new Array(this.options.maxZoom+1)}load(W){const{log:ee,minZoom:ce,maxZoom:o,nodeSize:G}=this.options;ee&&console.time("total time");const De=`prepare ${W.length} points`;ee&&console.time(De),this.points=W;let ke=[];for(let Pe=0;Pe<W.length;Pe++)W[Pe].geometry&&ke.push(gr(W[Pe],Pe));this.trees[o+1]=new ln(ke,rs,Er,G,Float32Array),ee&&console.timeEnd(De);for(let Pe=o;Pe>=ce;Pe--){const Le=+Date.now();ke=this._cluster(ke,Pe),this.trees[Pe]=new ln(ke,rs,Er,G,Float32Array),ee&&console.log("z%d: %d clusters in %dms",Pe,ke.length,+Date.now()-Le)}return ee&&console.timeEnd("total time"),this}getClusters(W,ee){let ce=((W[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,W[1]));let G=W[2]===180?180:((W[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ce=-180,G=180;else if(ce>G){const Ze=this.getClusters([ce,o,180,De],ee),lt=this.getClusters([-180,o,G,De],ee);return Ze.concat(lt)}const ke=this.trees[this._limitZoom(ee)],Pe=ke.range(Zn(ce),Ei(De),Zn(G),Ei(o)),Le=[];for(const Ze of Pe){const lt=ke.points[Ze];Le.push(lt.numPoints?Ar(lt):this.points[lt.index])}return Le}getChildren(W){const ee=this._getOriginId(W),ce=this._getOriginZoom(W),o="No cluster with the specified id.",G=this.trees[ce];if(!G)throw new Error(o);const De=G.points[ee];if(!De)throw new Error(o);const ke=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),Pe=G.within(De.x,De.y,ke),Le=[];for(const Ze of Pe){const lt=G.points[Ze];lt.parentId===W&&Le.push(lt.numPoints?Ar(lt):this.points[lt.index])}if(Le.length===0)throw new Error(o);return Le}getLeaves(W,ee,ce){const o=[];return this._appendLeaves(o,W,ee=ee||10,ce=ce||0,0),o}getTile(W,ee,ce){const o=this.trees[this._limitZoom(W)],G=Math.pow(2,W),{extent:De,radius:ke}=this.options,Pe=ke/De,Le=(ce-Pe)/G,Ze=(ce+1+Pe)/G,lt={features:[]};return this._addTileFeatures(o.range((ee-Pe)/G,Le,(ee+1+Pe)/G,Ze),o.points,ee,ce,G,lt),ee===0&&this._addTileFeatures(o.range(1-Pe/G,Le,1,Ze),o.points,G,ce,G,lt),ee===G-1&&this._addTileFeatures(o.range(0,Le,Pe/G,Ze),o.points,-1,ce,G,lt),lt.features.length?lt:null}getClusterExpansionZoom(W){let ee=this._getOriginZoom(W)-1;for(;ee<=this.options.maxZoom;){const ce=this.getChildren(W);if(ee++,ce.length!==1)break;W=ce[0].properties.cluster_id}return ee}_appendLeaves(W,ee,ce,o,G){const De=this.getChildren(ee);for(const ke of De){const Pe=ke.properties;if(Pe&&Pe.cluster?G+Pe.point_count<=o?G+=Pe.point_count:G=this._appendLeaves(W,Pe.cluster_id,ce,o,G):G<o?G++:W.push(ke),W.length===ce)break}return G}_addTileFeatures(W,ee,ce,o,G,De){for(const ke of W){const Pe=ee[ke],Le=Pe.numPoints;let Ze,lt,Qe;if(Le)Ze=Zr(Pe),lt=Pe.x,Qe=Pe.y;else{const wt=this.points[Pe.index];Ze=wt.properties,lt=Zn(wt.geometry.coordinates[0]),Qe=Ei(wt.geometry.coordinates[1])}const ft={type:1,geometry:[[Math.round(this.options.extent*(lt*G-ce)),Math.round(this.options.extent*(Qe*G-o))]],tags:Ze};let vt;Le?vt=Pe.id:this.options.generateId?vt=Pe.index:this.points[Pe.index].id&&(vt=this.points[Pe.index].id),vt!==void 0&&(ft.id=vt),De.features.push(ft)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,ee){const ce=[],{radius:o,extent:G,reduce:De,minPoints:ke}=this.options,Pe=o/(G*Math.pow(2,ee));for(let Le=0;Le<W.length;Le++){const Ze=W[Le];if(Ze.zoom<=ee)continue;Ze.zoom=ee;const lt=this.trees[ee+1],Qe=lt.within(Ze.x,Ze.y,Pe),ft=Ze.numPoints||1;let vt=ft;for(const wt of Qe){const Jt=lt.points[wt];Jt.zoom>ee&&(vt+=Jt.numPoints||1)}if(vt>ft&&vt>=ke){let wt=Ze.x*ft,Jt=Ze.y*ft,Ut=De&&ft>1?this._map(Ze,!0):null;const xn=(Le<<5)+(ee+1)+this.points.length;for(const nn of Qe){const pn=lt.points[nn];if(pn.zoom<=ee)continue;pn.zoom=ee;const Bn=pn.numPoints||1;wt+=pn.x*Bn,Jt+=pn.y*Bn,pn.parentId=xn,De&&(Ut||(Ut=this._map(Ze,!0)),De(Ut,this._map(pn)))}Ze.parentId=xn,ce.push(lr(wt/vt,Jt/vt,xn,vt,Ut))}else if(ce.push(Ze),vt>1)for(const wt of Qe){const Jt=lt.points[wt];Jt.zoom<=ee||(Jt.zoom=ee,ce.push(Jt))}}return ce}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,ee){if(W.numPoints)return ee?Ti({},W.properties):W.properties;const ce=this.points[W.index].properties,o=this.options.map(ce);return ee&&o===ce?Ti({},o):o}}function lr(K,W,ee,ce,o){return{x:bt(K),y:bt(W),zoom:1/0,id:ee,parentId:-1,numPoints:ce,properties:o}}function gr(K,W){const[ee,ce]=K.geometry.coordinates;return{x:bt(Zn(ee)),y:bt(Ei(ce)),zoom:1/0,index:W,parentId:-1}}function Ar(K){return{type:"Feature",id:K.id,properties:Zr(K),geometry:{type:"Point",coordinates:[(W=K.x,360*(W-.5)),$n(K.y)]}};var W}function Zr(K){const W=K.numPoints,ee=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W;return Ti(Ti({},K.properties),{cluster:!0,cluster_id:K.id,point_count:W,point_count_abbreviated:ee})}function Zn(K){return K/360+.5}function Ei(K){const W=Math.sin(K*Math.PI/180),ee=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return ee<0?0:ee>1?1:ee}function $n(K){const W=(180-360*K)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function Ti(K,W){for(const ee in W)K[ee]=W[ee];return K}function rs(K){return K.x}function Er(K){return K.y}function Yr(K,W,ee,ce){for(var o,G=ce,De=ee-W>>1,ke=ee-W,Pe=K[W],Le=K[W+1],Ze=K[ee],lt=K[ee+1],Qe=W+3;Qe<ee;Qe+=3){var ft=Ps(K[Qe],K[Qe+1],Pe,Le,Ze,lt);if(ft>G)o=Qe,G=ft;else if(ft===G){var vt=Math.abs(Qe-De);vt<ke&&(o=Qe,ke=vt)}}G>ce&&(o-W>3&&Yr(K,W,o,ce),K[o+2]=G,ee-o>3&&Yr(K,o,ee,ce))}function Ps(K,W,ee,ce,o,G){var De=o-ee,ke=G-ce;if(De!==0||ke!==0){var Pe=((K-ee)*De+(W-ce)*ke)/(De*De+ke*ke);Pe>1?(ee=o,ce=G):Pe>0&&(ee+=De*Pe,ce+=ke*Pe)}return(De=K-ee)*De+(ke=W-ce)*ke}function Si(K,W,ee,ce){var o={id:K===void 0?null:K,type:W,geometry:ee,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(G){var De=G.geometry,ke=G.type;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")ht(G,De);else if(ke==="Polygon"||ke==="MultiLineString")for(var Pe=0;Pe<De.length;Pe++)ht(G,De[Pe]);else if(ke==="MultiPolygon")for(Pe=0;Pe<De.length;Pe++)for(var Le=0;Le<De[Pe].length;Le++)ht(G,De[Pe][Le])}(o),o}function ht(K,W){for(var ee=0;ee<W.length;ee+=3)K.minX=Math.min(K.minX,W[ee]),K.minY=Math.min(K.minY,W[ee+1]),K.maxX=Math.max(K.maxX,W[ee]),K.maxY=Math.max(K.maxY,W[ee+1])}function kt(K,W,ee,ce){if(W.geometry){var o=W.geometry.coordinates,G=W.geometry.type,De=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2),ke=[],Pe=W.id;if(ee.promoteId?Pe=W.properties[ee.promoteId]:ee.generateId&&(Pe=ce||0),G==="Point")is(o,ke);else if(G==="MultiPoint")for(var Le=0;Le<o.length;Le++)is(o[Le],ke);else if(G==="LineString")Ai(o,ke,De,!1);else if(G==="MultiLineString"){if(ee.lineMetrics){for(Le=0;Le<o.length;Le++)Ai(o[Le],ke=[],De,!1),K.push(Si(Pe,"LineString",ke,W.properties));return}Vn(o,ke,De,!1)}else if(G==="Polygon")Vn(o,ke,De,!0);else{if(G!=="MultiPolygon"){if(G==="GeometryCollection"){for(Le=0;Le<W.geometry.geometries.length;Le++)kt(K,{id:Pe,geometry:W.geometry.geometries[Le],properties:W.properties},ee,ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Le=0;Le<o.length;Le++){var Ze=[];Vn(o[Le],Ze,De,!0),ke.push(Ze)}}K.push(Si(Pe,G,ke,W.properties))}}function is(K,W){W.push(Bi(K[0])),W.push(mi(K[1])),W.push(0)}function Ai(K,W,ee,ce){for(var o,G,De=0,ke=0;ke<K.length;ke++){var Pe=Bi(K[ke][0]),Le=mi(K[ke][1]);W.push(Pe),W.push(Le),W.push(0),ke>0&&(De+=ce?(o*Le-Pe*G)/2:Math.sqrt(Math.pow(Pe-o,2)+Math.pow(Le-G,2))),o=Pe,G=Le}var Ze=W.length-3;W[2]=1,Yr(W,0,Ze,ee),W[Ze+2]=1,W.size=Math.abs(De),W.start=0,W.end=W.size}function Vn(K,W,ee,ce){for(var o=0;o<K.length;o++){var G=[];Ai(K[o],G,ee,ce),W.push(G)}}function Bi(K){return K/360+.5}function mi(K){var W=Math.sin(K*Math.PI/180),ee=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return ee<0?0:ee>1?1:ee}function ti(K,W,ee,ce,o,G,De,ke){if(ce/=W,G>=(ee/=W)&&De<ce)return K;if(De<ee||G>=ce)return null;for(var Pe=[],Le=0;Le<K.length;Le++){var Ze=K[Le],lt=Ze.geometry,Qe=Ze.type,ft=o===0?Ze.minX:Ze.minY,vt=o===0?Ze.maxX:Ze.maxY;if(ft>=ee&&vt<ce)Pe.push(Ze);else if(!(vt<ee||ft>=ce)){var wt=[];if(Qe==="Point"||Qe==="MultiPoint")$i(lt,wt,ee,ce,o);else if(Qe==="LineString")Bt(lt,wt,ee,ce,o,!1,ke.lineMetrics);else if(Qe==="MultiLineString")In(lt,wt,ee,ce,o,!1);else if(Qe==="Polygon")In(lt,wt,ee,ce,o,!0);else if(Qe==="MultiPolygon")for(var Jt=0;Jt<lt.length;Jt++){var Ut=[];In(lt[Jt],Ut,ee,ce,o,!0),Ut.length&&wt.push(Ut)}if(wt.length){if(ke.lineMetrics&&Qe==="LineString"){for(Jt=0;Jt<wt.length;Jt++)Pe.push(Si(Ze.id,Qe,wt[Jt],Ze.tags));continue}Qe!=="LineString"&&Qe!=="MultiLineString"||(wt.length===1?(Qe="LineString",wt=wt[0]):Qe="MultiLineString"),Qe!=="Point"&&Qe!=="MultiPoint"||(Qe=wt.length===3?"Point":"MultiPoint"),Pe.push(Si(Ze.id,Qe,wt,Ze.tags))}}}return Pe.length?Pe:null}function $i(K,W,ee,ce,o){for(var G=0;G<K.length;G+=3){var De=K[G+o];De>=ee&&De<=ce&&(W.push(K[G]),W.push(K[G+1]),W.push(K[G+2]))}}function Bt(K,W,ee,ce,o,G,De){for(var ke,Pe,Le=Rn(K),Ze=o===0?Xi:Pn,lt=K.start,Qe=0;Qe<K.length-3;Qe+=3){var ft=K[Qe],vt=K[Qe+1],wt=K[Qe+2],Jt=K[Qe+3],Ut=K[Qe+4],xn=o===0?ft:vt,nn=o===0?Jt:Ut,pn=!1;De&&(ke=Math.sqrt(Math.pow(ft-Jt,2)+Math.pow(vt-Ut,2))),xn<ee?nn>ee&&(Pe=Ze(Le,ft,vt,Jt,Ut,ee),De&&(Le.start=lt+ke*Pe)):xn>ce?nn<ce&&(Pe=Ze(Le,ft,vt,Jt,Ut,ce),De&&(Le.start=lt+ke*Pe)):Ur(Le,ft,vt,wt),nn<ee&&xn>=ee&&(Pe=Ze(Le,ft,vt,Jt,Ut,ee),pn=!0),nn>ce&&xn<=ce&&(Pe=Ze(Le,ft,vt,Jt,Ut,ce),pn=!0),!G&&pn&&(De&&(Le.end=lt+ke*Pe),W.push(Le),Le=Rn(K)),De&&(lt+=ke)}var Bn=K.length-3;ft=K[Bn],vt=K[Bn+1],wt=K[Bn+2],(xn=o===0?ft:vt)>=ee&&xn<=ce&&Ur(Le,ft,vt,wt),Bn=Le.length-3,G&&Bn>=3&&(Le[Bn]!==Le[0]||Le[Bn+1]!==Le[1])&&Ur(Le,Le[0],Le[1],Le[2]),Le.length&&W.push(Le)}function Rn(K){var W=[];return W.size=K.size,W.start=K.start,W.end=K.end,W}function In(K,W,ee,ce,o,G){for(var De=0;De<K.length;De++)Bt(K[De],W,ee,ce,o,G,!1)}function Ur(K,W,ee,ce){K.push(W),K.push(ee),K.push(ce)}function Xi(K,W,ee,ce,o,G){var De=(G-W)/(ce-W);return K.push(G),K.push(ee+(o-ee)*De),K.push(1),De}function Pn(K,W,ee,ce,o,G){var De=(G-ee)/(o-ee);return K.push(W+(ce-W)*De),K.push(G),K.push(1),De}function ye(K,W){for(var ee=[],ce=0;ce<K.length;ce++){var o,G=K[ce],De=G.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")o=ot(G.geometry,W);else if(De==="MultiLineString"||De==="Polygon"){o=[];for(var ke=0;ke<G.geometry.length;ke++)o.push(ot(G.geometry[ke],W))}else if(De==="MultiPolygon")for(o=[],ke=0;ke<G.geometry.length;ke++){for(var Pe=[],Le=0;Le<G.geometry[ke].length;Le++)Pe.push(ot(G.geometry[ke][Le],W));o.push(Pe)}ee.push(Si(G.id,De,o,G.tags))}return ee}function ot(K,W){var ee=[];ee.size=K.size,K.start!==void 0&&(ee.start=K.start,ee.end=K.end);for(var ce=0;ce<K.length;ce+=3)ee.push(K[ce]+W,K[ce+1],K[ce+2]);return ee}function gt(K,W){if(K.transformed)return K;var ee,ce,o,G=1<<K.z,De=K.x,ke=K.y;for(ee=0;ee<K.features.length;ee++){var Pe=K.features[ee],Le=Pe.geometry,Ze=Pe.type;if(Pe.geometry=[],Ze===1)for(ce=0;ce<Le.length;ce+=2)Pe.geometry.push(Lt(Le[ce],Le[ce+1],W,G,De,ke));else for(ce=0;ce<Le.length;ce++){var lt=[];for(o=0;o<Le[ce].length;o+=2)lt.push(Lt(Le[ce][o],Le[ce][o+1],W,G,De,ke));Pe.geometry.push(lt)}}return K.transformed=!0,K}function Lt(K,W,ee,ce,o,G){return[Math.round(ee*(K*ce-o)),Math.round(ee*(W*ce-G))]}function qt(K,W,ee,ce,o){for(var G=W===o.maxZoom?0:o.tolerance/((1<<W)*o.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ee,y:ce,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<K.length;ke++){De.numFeatures++,Kt(De,K[ke],G,o);var Pe=K[ke].minX,Le=K[ke].minY,Ze=K[ke].maxX,lt=K[ke].maxY;Pe<De.minX&&(De.minX=Pe),Le<De.minY&&(De.minY=Le),Ze>De.maxX&&(De.maxX=Ze),lt>De.maxY&&(De.maxY=lt)}return De}function Kt(K,W,ee,ce){var o=W.geometry,G=W.type,De=[];if(G==="Point"||G==="MultiPoint")for(var ke=0;ke<o.length;ke+=3)De.push(o[ke]),De.push(o[ke+1]),K.numPoints++,K.numSimplified++;else if(G==="LineString")En(De,o,K,ee,!1,!1);else if(G==="MultiLineString"||G==="Polygon")for(ke=0;ke<o.length;ke++)En(De,o[ke],K,ee,G==="Polygon",ke===0);else if(G==="MultiPolygon")for(var Pe=0;Pe<o.length;Pe++){var Le=o[Pe];for(ke=0;ke<Le.length;ke++)En(De,Le[ke],K,ee,!0,ke===0)}if(De.length){var Ze=W.tags||null;if(G==="LineString"&&ce.lineMetrics){for(var lt in Ze={},W.tags)Ze[lt]=W.tags[lt];Ze.mapbox_clip_start=o.start/o.size,Ze.mapbox_clip_end=o.end/o.size}var Qe={geometry:De,type:G==="Polygon"||G==="MultiPolygon"?3:G==="LineString"||G==="MultiLineString"?2:1,tags:Ze};W.id!==null&&(Qe.id=W.id),K.features.push(Qe)}}function En(K,W,ee,ce,o,G){var De=ce*ce;if(ce>0&&W.size<(o?De:ce))ee.numPoints+=W.length/3;else{for(var ke=[],Pe=0;Pe<W.length;Pe+=3)(ce===0||W[Pe+2]>De)&&(ee.numSimplified++,ke.push(W[Pe]),ke.push(W[Pe+1])),ee.numPoints++;o&&function(Le,Ze){for(var lt=0,Qe=0,ft=Le.length,vt=ft-2;Qe<ft;vt=Qe,Qe+=2)lt+=(Le[Qe]-Le[vt])*(Le[Qe+1]+Le[vt+1]);if(lt>0===Ze)for(Qe=0,ft=Le.length;Qe<ft/2;Qe+=2){var wt=Le[Qe],Jt=Le[Qe+1];Le[Qe]=Le[ft-2-Qe],Le[Qe+1]=Le[ft-1-Qe],Le[ft-2-Qe]=wt,Le[ft-1-Qe]=Jt}}(ke,G),K.push(ke)}}function hn(K,W){var ee=(W=this.options=function(o,G){for(var De in G)o[De]=G[De];return o}(Object.create(this.options),W)).debug;if(ee&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var ce=function(o,G){var De=[];if(o.type==="FeatureCollection")for(var ke=0;ke<o.features.length;ke++)kt(De,o.features[ke],G,ke);else kt(De,o.type==="Feature"?o:{geometry:o},G);return De}(K,W);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ce=function(o,G){var De=G.buffer/G.extent,ke=o,Pe=ti(o,1,-1-De,De,0,-1,2,G),Le=ti(o,1,1-De,2+De,0,-1,2,G);return(Pe||Le)&&(ke=ti(o,1,-De,1+De,0,-1,2,G)||[],Pe&&(ke=ye(Pe,1).concat(ke)),Le&&(ke=ke.concat(ye(Le,-1)))),ke}(ce,W),ce.length&&this.splitTile(ce,0,0,0),ee&&(ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function an(K,W,ee){return 32*((1<<K)*ee+W)+K}function Dn(K,W){const ee=K.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const ce=this._geoJSONIndex.getTile(ee.z,ee.x,ee.y);if(!ce)return W(null,null);const o=new fe(ce.features);let G=Fe.exports(o);G.byteOffset===0&&G.byteLength===G.buffer.byteLength||(G=new Uint8Array(G)),W(null,{vectorTile:o,rawData:G.buffer})}hn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},hn.prototype.splitTile=function(K,W,ee,ce,o,G,De){for(var ke=[K,W,ee,ce],Pe=this.options,Le=Pe.debug;ke.length;){ce=ke.pop(),ee=ke.pop(),W=ke.pop(),K=ke.pop();var Ze=1<<W,lt=an(W,ee,ce),Qe=this.tiles[lt];if(!Qe&&(Le>1&&console.time("creation"),Qe=this.tiles[lt]=qt(K,W,ee,ce,Pe),this.tileCoords.push({z:W,x:ee,y:ce}),Le)){Le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,ee,ce,Qe.numFeatures,Qe.numPoints,Qe.numSimplified),console.timeEnd("creation"));var ft="z"+W;this.stats[ft]=(this.stats[ft]||0)+1,this.total++}if(Qe.source=K,o){if(W===Pe.maxZoom||W===o)continue;var vt=1<<o-W;if(ee!==Math.floor(G/vt)||ce!==Math.floor(De/vt))continue}else if(W===Pe.indexMaxZoom||Qe.numPoints<=Pe.indexMaxPoints)continue;if(Qe.source=null,K.length!==0){Le>1&&console.time("clipping");var wt,Jt,Ut,xn,nn,pn,Bn=.5*Pe.buffer/Pe.extent,Vt=.5-Bn,Ue=.5+Bn,Dt=1+Bn;wt=Jt=Ut=xn=null,nn=ti(K,Ze,ee-Bn,ee+Ue,0,Qe.minX,Qe.maxX,Pe),pn=ti(K,Ze,ee+Vt,ee+Dt,0,Qe.minX,Qe.maxX,Pe),K=null,nn&&(wt=ti(nn,Ze,ce-Bn,ce+Ue,1,Qe.minY,Qe.maxY,Pe),Jt=ti(nn,Ze,ce+Vt,ce+Dt,1,Qe.minY,Qe.maxY,Pe),nn=null),pn&&(Ut=ti(pn,Ze,ce-Bn,ce+Ue,1,Qe.minY,Qe.maxY,Pe),xn=ti(pn,Ze,ce+Vt,ce+Dt,1,Qe.minY,Qe.maxY,Pe),pn=null),Le>1&&console.timeEnd("clipping"),ke.push(wt||[],W+1,2*ee,2*ce),ke.push(Jt||[],W+1,2*ee,2*ce+1),ke.push(Ut||[],W+1,2*ee+1,2*ce),ke.push(xn||[],W+1,2*ee+1,2*ce+1)}}},hn.prototype.getTile=function(K,W,ee){var ce=this.options,o=ce.extent,G=ce.debug;if(K<0||K>24)return null;var De=1<<K,ke=an(K,W=(W%De+De)%De,ee);if(this.tiles[ke])return gt(this.tiles[ke],o);G>1&&console.log("drilling down to z%d-%d-%d",K,W,ee);for(var Pe,Le=K,Ze=W,lt=ee;!Pe&&Le>0;)Le--,Ze=Math.floor(Ze/2),lt=Math.floor(lt/2),Pe=this.tiles[an(Le,Ze,lt)];return Pe&&Pe.source?(G>1&&console.log("found parent tile z%d-%d-%d",Le,Ze,lt),G>1&&console.time("drilling down"),this.splitTile(Pe.source,Le,Ze,lt,K,W,ee),G>1&&console.timeEnd("drilling down"),this.tiles[ke]?gt(this.tiles[ke],o):null):null};class xr extends q{constructor(W,ee,ce,o){super(W,ee,ce,Dn),o&&(this.loadGeoJSON=o)}loadData(W,ee){var ce;(ce=this._pendingRequest)===null||ce===void 0||ce.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const o=!!(W&&W.request&&W.request.collectResourceTiming)&&new a.RequestPerformance(W.request);this._pendingCallback=ee,this._pendingRequest=this.loadGeoJSON(W,(G,De)=>{if(delete this._pendingCallback,delete this._pendingRequest,G||!De)return ee(G);if(typeof De!="object")return ee(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{Z(De,!0);try{if(W.filter){const Pe=a.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Pe.result==="error")throw new Error(Pe.value.map(Ze=>`${Ze.key}: ${Ze.message}`).join(", "));De={type:"FeatureCollection",features:De.features.filter(Ze=>Pe.value.evaluate({zoom:0},Ze))}}this._geoJSONIndex=W.cluster?new er(function({superclusterOptions:Pe,clusterProperties:Le}){if(!Le||!Pe)return Pe;const Ze={},lt={},Qe={accumulated:null,zoom:0},ft={properties:null},vt=Object.keys(Le);for(const wt of vt){const[Jt,Ut]=Le[wt],xn=a.createExpression(Ut),nn=a.createExpression(typeof Jt=="string"?[Jt,["accumulated"],["get",wt]]:Jt);Ze[wt]=xn.value,lt[wt]=nn.value}return Pe.map=wt=>{ft.properties=wt;const Jt={};for(const Ut of vt)Jt[Ut]=Ze[Ut].evaluate(Qe,ft);return Jt},Pe.reduce=(wt,Jt)=>{ft.properties=Jt;for(const Ut of vt)Qe.accumulated=wt[Ut],wt[Ut]=lt[Ut].evaluate(Qe,ft)},Pe}(W)).load(De.features):function(Pe,Le){return new hn(Pe,Le)}(De,W.geojsonVtOptions)}catch(Pe){return ee(Pe)}this.loaded={};const ke={};if(o){const Pe=o.finish();Pe&&(ke.resourceTiming={},ke.resourceTiming[W.source]=JSON.parse(JSON.stringify(Pe)))}ee(null,ke)}})}reloadTile(W,ee){const ce=this.loaded;return ce&&ce[W.uid]?super.reloadTile(W,ee):this.loadTile(W,ee)}loadGeoJSON(W,ee){if(W.request)return a.getJSON(W.request,ee);if(typeof W.data=="string")try{ee(null,JSON.parse(W.data))}catch{ee(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}else ee(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(W,ee){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ee()}getClusterExpansionZoom(W,ee){try{ee(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(ce){ee(ce)}}getClusterChildren(W,ee){try{ee(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(ce){ee(ce)}}getClusterLeaves(W,ee){try{ee(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(ce){ee(ce)}}}class fn{constructor(W){this.self=W,this.actor=new a.Actor(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:q,geojson:xr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ee,ce)=>{if(this.workerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.workerSourceTypes[ee]=ce},this.self.registerRTLTextPlugin=ee=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ee.applyArabicShaping,a.plugin.processBidirectionalText=ee.processBidirectionalText,a.plugin.processStyledBidirectionalText=ee.processStyledBidirectionalText}}setReferrer(W,ee){this.referrer=ee}setImages(W,ee,ce){this.availableImages[W]=ee;for(const o in this.workerSources[W]){const G=this.workerSources[W][o];for(const De in G)G[De].availableImages=ee}ce()}setLayers(W,ee,ce){this.getLayerIndex(W).replace(ee),ce()}updateLayers(W,ee,ce){this.getLayerIndex(W).update(ee.layers,ee.removedIds),ce()}loadTile(W,ee,ce){this.getWorkerSource(W,ee.type,ee.source).loadTile(ee,ce)}loadDEMTile(W,ee,ce){this.getDEMWorkerSource(W,ee.source).loadTile(ee,ce)}reloadTile(W,ee,ce){this.getWorkerSource(W,ee.type,ee.source).reloadTile(ee,ce)}abortTile(W,ee,ce){this.getWorkerSource(W,ee.type,ee.source).abortTile(ee,ce)}removeTile(W,ee,ce){this.getWorkerSource(W,ee.type,ee.source).removeTile(ee,ce)}removeDEMTile(W,ee){this.getDEMWorkerSource(W,ee.source).removeTile(ee)}removeSource(W,ee,ce){if(!this.workerSources[W]||!this.workerSources[W][ee.type]||!this.workerSources[W][ee.type][ee.source])return;const o=this.workerSources[W][ee.type][ee.source];delete this.workerSources[W][ee.type][ee.source],o.removeSource!==void 0?o.removeSource(ee,ce):ce()}loadWorkerSource(W,ee,ce){try{this.self.importScripts(ee.url),ce()}catch(o){ce(o.toString())}}syncRTLPluginState(W,ee,ce){try{a.plugin.setState(ee);const o=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&o!=null){this.self.importScripts(o);const G=a.plugin.isParsed();ce(G?void 0:new Error(`RTL Text Plugin failed to import scripts from ${o}`),G)}}catch(o){ce(o.toString())}}getAvailableImages(W){let ee=this.availableImages[W];return ee||(ee=[]),ee}getLayerIndex(W){let ee=this.layerIndexes[W];return ee||(ee=this.layerIndexes[W]=new M),ee}getWorkerSource(W,ee,ce){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][ee]||(this.workerSources[W][ee]={}),!this.workerSources[W][ee][ce]){const o={send:(G,De,ke)=>{this.actor.send(G,De,ke,W)}};this.workerSources[W][ee][ce]=new this.workerSourceTypes[ee](o,this.getLayerIndex(W),this.getAvailableImages(W))}return this.workerSources[W][ee][ce]}getDEMWorkerSource(W,ee){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][ee]||(this.demWorkerSources[W][ee]=new se),this.demWorkerSources[W][ee]}enforceCacheSizeLimit(W,ee){a.enforceCacheSizeLimit(ee)}}return a.isWorker()&&(self.worker=new fn(self)),fn}),s(["./shared"],function(a){var y=w;function w(L){return!function(c){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var l,h,d=new Blob([""],{type:"text/javascript"}),x=URL.createObjectURL(d);try{h=new Worker(x),l=!0}catch{l=!1}return h&&h.terminate(),URL.revokeObjectURL(x),l}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var l=document.createElement("canvas");l.width=l.height=1;var h=l.getContext("2d");if(!h)return!1;var d=h.getImageData(0,0,1,1);return d&&d.width===l.width}()?(M[_=c&&c.failIfMajorPerformanceCaveat]===void 0&&(M[_]=function(l){var h,d=function(x){var b=document.createElement("canvas"),S=Object.create(w.webGLContextAttributes);return S.failIfMajorPerformanceCaveat=x,b.getContext("webgl",S)||b.getContext("experimental-webgl",S)}(l);if(!d)return!1;try{h=d.createShader(d.VERTEX_SHADER)}catch{return!1}return!(!h||d.isContextLost())&&(d.shaderSource(h,"void main() {}"),d.compileShader(h),d.getShaderParameter(h,d.COMPILE_STATUS)===!0)}(_)),M[_]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}(L)}var M={};function C(L,c){if(Array.isArray(L)){if(!Array.isArray(c)||L.length!==c.length)return!1;for(let _=0;_<L.length;_++)if(!C(L[_],c[_]))return!1;return!0}if(typeof L=="object"&&L!==null&&c!==null){if(typeof c!="object"||Object.keys(L).length!==Object.keys(c).length)return!1;for(const _ in L)if(!C(L[_],c[_]))return!1;return!0}return L===c}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class k{static testProp(c){if(!k.docStyle)return c[0];for(let _=0;_<c.length;_++)if(c[_]in k.docStyle)return c[_];return c[0]}static create(c,_,l){const h=window.document.createElement(c);return _!==void 0&&(h.className=_),l&&l.appendChild(h),h}static createNS(c,_){return window.document.createElementNS(c,_)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(c,_){c.style[k.transformProp]=_}static addEventListener(c,_,l,h={}){c.addEventListener(_,l,"passive"in h?h:h.capture)}static removeEventListener(c,_,l,h={}){c.removeEventListener(_,l,"passive"in h?h:h.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static mousePos(c,_){const l=c.getBoundingClientRect();return new a.pointGeometry(_.clientX-l.left-c.clientLeft,_.clientY-l.top-c.clientTop)}static touchPos(c,_){const l=c.getBoundingClientRect(),h=[];for(let d=0;d<_.length;d++)h.push(new a.pointGeometry(_[d].clientX-l.left-c.clientLeft,_[d].clientY-l.top-c.clientTop));return h}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);class U{constructor(c){this._transformRequestFn=c}transformRequest(c,_){return this._transformRequestFn&&this._transformRequestFn(c,_)||{url:c}}normalizeSpriteURL(c,_,l){const h=function(d){const x=d.match(H);if(!x)throw new Error(`Unable to parse URL "${d}"`);return{protocol:x[1],authority:x[2],path:x[3]||"/",params:x[4]?x[4].split("&"):[]}}(c);return h.path+=`${_}${l}`,function(d){const x=d.params.length?`?${d.params.join("&")}`:"";return`${d.protocol}://${d.authority}${d.path}${x}`}(h)}setTransformRequest(c){this._transformRequestFn=c}}const H=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class q{constructor(c,_,l,h){this.context=c,this.format=l,this.texture=c.gl.createTexture(),this.update(_,h)}update(c,_,l){const{width:h,height:d}=c,x=!(this.size&&this.size[0]===h&&this.size[1]===d||l),{context:b}=this,{gl:S}=b;if(this.useMipmap=!!(_&&_.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!_||_.premultiply!==!1)),x)this.size=[h,d],c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||a.isImageBitmap(c)?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,c):S.texImage2D(S.TEXTURE_2D,0,this.format,h,d,0,this.format,S.UNSIGNED_BYTE,c.data);else{const{x:P,y:B}=l||{x:0,y:0};c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||a.isImageBitmap(c)?S.texSubImage2D(S.TEXTURE_2D,0,P,B,S.RGBA,S.UNSIGNED_BYTE,c):S.texSubImage2D(S.TEXTURE_2D,0,P,B,h,d,S.RGBA,S.UNSIGNED_BYTE,c.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)}bind(c,_,l){const{context:h}=this,{gl:d}=h;d.bindTexture(d.TEXTURE_2D,this.texture),l!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=d.LINEAR),c!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,c),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,l||c),this.filter=c),_!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,_),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,_),this.wrap=_)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}}function se(L){const{userImage:c}=L;return!!(c&&c.render&&c.render())&&(L.data.replace(new Uint8Array(c.data.buffer)),!0)}class Z extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:_,callback:l}of this.requestors)this._notify(_,l);this.requestors=[]}}getImage(c){return this.images[c]}addImage(c,_){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,_)&&(this.images[c]=_)}_validate(c,_){let l=!0;return this._validateStretch(_.stretchX,_.data&&_.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),l=!1),this._validateStretch(_.stretchY,_.data&&_.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),l=!1),this._validateContent(_.content,_)||(this.fire(new a.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),l=!1),l}_validateStretch(c,_){if(!c)return!0;let l=0;for(const h of c){if(h[0]<l||h[1]<h[0]||_<h[1])return!1;l=h[1]}return!0}_validateContent(c,_){return!(c&&(c.length!==4||c[0]<0||_.data.width<c[0]||c[1]<0||_.data.height<c[1]||c[2]<0||_.data.width<c[2]||c[3]<0||_.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,_){const l=this.images[c];if(l.data.width!==_.data.width||l.data.height!==_.data.height)throw new Error(`size mismatch between old image (${l.data.width}x${l.data.height}) and new image (${_.data.width}x${_.data.height}).`);_.version=l.version+1,this.images[c]=_,this.updatedImages[c]=!0}removeImage(c){const _=this.images[c];delete this.images[c],delete this.patterns[c],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,_){let l=!0;if(!this.isLoaded())for(const h of c)this.images[h]||(l=!1);this.isLoaded()||l?this._notify(c,_):this.requestors.push({ids:c,callback:_})}_notify(c,_){const l={};for(const h of c){this.images[h]||this.fire(new a.Event("styleimagemissing",{id:h}));const d=this.images[h];d?l[h]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:a.warnOnce(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,l)}getPixelSize(){const{width:c,height:_}=this.atlasImage;return{width:c,height:_}}getPattern(c){const _=this.patterns[c],l=this.getImage(c);if(!l)return null;if(_&&_.position.version===l.version)return _.position;if(_)_.position.version=l.version;else{const h={w:l.data.width+2,h:l.data.height+2,x:0,y:0},d=new a.ImagePosition(h,l);this.patterns[c]={bin:h,position:d}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const _=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(c,this.atlasImage,_.RGBA),this.atlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const d in this.patterns)c.push(this.patterns[d].bin);const{w:_,h:l}=a.potpack(c),h=this.atlasImage;h.resize({width:_||1,height:l||1});for(const d in this.patterns){const{bin:x}=this.patterns[d],b=x.x+1,S=x.y+1,P=this.images[d].data,B=P.width,V=P.height;a.RGBAImage.copy(P,h,{x:0,y:0},{x:b,y:S},{width:B,height:V}),a.RGBAImage.copy(P,h,{x:0,y:V-1},{x:b,y:S-1},{width:B,height:1}),a.RGBAImage.copy(P,h,{x:0,y:0},{x:b,y:S+V},{width:B,height:1}),a.RGBAImage.copy(P,h,{x:B-1,y:0},{x:b-1,y:S},{width:1,height:V}),a.RGBAImage.copy(P,h,{x:0,y:0},{x:b+B,y:S},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const _ of c){if(this.callbackDispatchedThisFrame[_])continue;this.callbackDispatchedThisFrame[_]=!0;const l=this.images[_];l||a.warnOnce(`Image with ID: "${_}" was not found`),se(l)&&this.updateImage(_,l)}}}const J=1e20;function re(L,c,_,l,h,d,x,b,S){for(let P=c;P<c+l;P++)de(L,_*d+P,d,h,x,b,S);for(let P=_;P<_+h;P++)de(L,P*d+c,1,l,x,b,S)}function de(L,c,_,l,h,d,x){d[0]=0,x[0]=-J,x[1]=J,h[0]=L[c];for(let b=1,S=0,P=0;b<l;b++){h[b]=L[c+b*_];const B=b*b;do{const V=d[S];P=(h[b]-h[V]+B-V*V)/(b-V)/2}while(P<=x[S]&&--S>-1);S++,d[S]=b,x[S]=P,x[S+1]=J}for(let b=0,S=0;b<l;b++){for(;x[S+1]<b;)S++;const P=d[S],B=b-P;L[c+b*_]=h[P]+B*B}}class _e{constructor(c,_){this.requestManager=c,this.localIdeographFontFamily=_,this.entries={}}setURL(c){this.url=c}getGlyphs(c,_){const l=[];for(const h in c)for(const d of c[h])l.push({stack:h,id:d});a.asyncAll(l,({stack:h,id:d},x)=>{let b=this.entries[h];b||(b=this.entries[h]={glyphs:{},requests:{},ranges:{}});let S=b.glyphs[d];if(S!==void 0)return void x(null,{stack:h,id:d,glyph:S});if(S=this._tinySDF(b,h,d),S)return b.glyphs[d]=S,void x(null,{stack:h,id:d,glyph:S});const P=Math.floor(d/256);if(256*P>65535)return void x(new Error("glyphs > 65535 not supported"));if(b.ranges[P])return void x(null,{stack:h,id:d,glyph:S});let B=b.requests[P];B||(B=b.requests[P]=[],_e.loadGlyphRange(h,P,this.url,this.requestManager,(V,$)=>{if($){for(const X in $)this._doesCharSupportLocalGlyph(+X)||(b.glyphs[+X]=$[+X]);b.ranges[P]=!0}for(const X of B)X(V,$);delete b.requests[P]})),B.push((V,$)=>{V?x(V):$&&x(null,{stack:h,id:d,glyph:$[d]||null})})},(h,d)=>{if(h)_(h);else if(d){const x={};for(const{stack:b,id:S,glyph:P}of d)(x[b]||(x[b]={}))[S]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};_(null,x)}})}_doesCharSupportLocalGlyph(c){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](c)||a.unicodeBlockLookup["Hangul Syllables"](c)||a.unicodeBlockLookup.Hiragana(c)||a.unicodeBlockLookup.Katakana(c))}_tinySDF(c,_,l){const h=this.localIdeographFontFamily;if(!h||!this._doesCharSupportLocalGlyph(l))return;let d=c.tinySDF;if(!d){let b="400";/bold/i.test(_)?b="900":/medium/i.test(_)?b="500":/light/i.test(_)&&(b="200"),d=c.tinySDF=new _e.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:h,fontWeight:b})}const x=d.draw(String.fromCharCode(l));return{id:l,bitmap:new a.AlphaImage({width:x.width||30,height:x.height||30},x.data),metrics:{width:x.glyphWidth||24,height:x.glyphHeight||24,left:x.glyphLeft||0,top:x.glyphTop-27||-8,advance:x.glyphAdvance||24}}}}_e.loadGlyphRange=function(L,c,_,l,h){const d=256*c,x=d+255,b=l.transformRequest(_.replace("{fontstack}",L).replace("{range}",`${d}-${x}`),a.ResourceType.Glyphs);a.getArrayBuffer(b,(S,P)=>{if(S)h(S);else if(P){const B={};for(const V of a.parseGlyphPbf(P))B[V.id]=V;h(null,B)}})},_e.TinySDF=class{constructor({fontSize:L=24,buffer:c=3,radius:_=8,cutoff:l=.25,fontFamily:h="sans-serif",fontWeight:d="normal",fontStyle:x="normal"}={}){this.buffer=c,this.cutoff=l,this.radius=_;const b=this.size=L+4*c,S=this._createCanvas(b),P=this.ctx=S.getContext("2d",{willReadFrequently:!0});P.font=`${x} ${d} ${L}px ${h}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(L){const c=document.createElement("canvas");return c.width=c.height=L,c}draw(L){const{width:c,actualBoundingBoxAscent:_,actualBoundingBoxDescent:l,actualBoundingBoxLeft:h,actualBoundingBoxRight:d}=this.ctx.measureText(L),x=Math.ceil(_),b=Math.min(this.size-this.buffer,Math.ceil(d-h)),S=Math.min(this.size-this.buffer,x+Math.ceil(l)),P=b+2*this.buffer,B=S+2*this.buffer,V=Math.max(P*B,0),$=new Uint8ClampedArray(V),X={data:$,width:P,height:B,glyphWidth:b,glyphHeight:S,glyphTop:x,glyphLeft:0,glyphAdvance:c};if(b===0||S===0)return X;const{ctx:oe,buffer:ne,gridInner:ue,gridOuter:Te}=this;oe.clearRect(ne,ne,b,S),oe.fillText(L,ne,ne+x);const Ie=oe.getImageData(ne,ne,b,S);Te.fill(J,0,V),ue.fill(0,0,V);for(let we=0;we<S;we++)for(let $e=0;$e<b;$e++){const Me=Ie.data[4*(we*b+$e)+3]/255;if(Me===0)continue;const je=(we+ne)*P+$e+ne;if(Me===1)Te[je]=0,ue[je]=J;else{const be=.5-Me;Te[je]=be>0?be*be:0,ue[je]=be<0?be*be:0}}re(Te,0,0,P,B,P,this.f,this.v,this.z),re(ue,ne,ne,b,S,P,this.f,this.v,this.z);for(let we=0;we<V;we++){const $e=Math.sqrt(Te[we])-Math.sqrt(ue[we]);$[we]=Math.round(255-255*($e/this.radius+this.cutoff))}return X}};const fe=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(L,c){return a.sphericalToCartesian(L.expression.evaluate(c))}interpolate(L,c,_){return{x:a.number(L.x,c.x,_),y:a.number(L.y,c.y,_),z:a.number(L.z,c.z,_)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),Fe="-transition";class We extends a.Evented{constructor(c){super(),this._transitionable=new a.Transitionable(fe),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,_={}){if(!this._validate(a.validateLight,c,_))for(const l in c){const h=c[l];l.endsWith(Fe)?this._transitionable.setTransition(l.slice(0,-Fe.length),h):this._transitionable.setValue(l,h)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,_,l){return(!l||l.validate!==!1)&&a.emitValidationErrors(this,c.call(a.validateStyle,a.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class qe{constructor(c,_){this.width=c,this.height=_,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,_){const l=c.join(",")+String(_);return this.dashEntry[l]||(this.dashEntry[l]=this.addDash(c,_)),this.dashEntry[l]}getDashRanges(c,_,l){const h=[];let d=c.length%2==1?-c[c.length-1]*l:0,x=c[0]*l,b=!0;h.push({left:d,right:x,isDash:b,zeroLength:c[0]===0});let S=c[0];for(let P=1;P<c.length;P++){b=!b;const B=c[P];d=S*l,S+=B,x=S*l,h.push({left:d,right:x,isDash:b,zeroLength:B===0})}return h}addRoundDash(c,_,l){const h=_/2;for(let d=-l;d<=l;d++){const x=this.width*(this.nextRow+l+d);let b=0,S=c[b];for(let P=0;P<this.width;P++){P/S.right>1&&(S=c[++b]);const B=Math.abs(P-S.left),V=Math.abs(P-S.right),$=Math.min(B,V);let X;const oe=d/l*(h+1);if(S.isDash){const ne=h-Math.abs(oe);X=Math.sqrt($*$+ne*ne)}else X=h-Math.sqrt($*$+oe*oe);this.data[x+P]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(c){for(let b=c.length-1;b>=0;--b){const S=c[b],P=c[b+1];S.zeroLength?c.splice(b,1):P&&P.isDash===S.isDash&&(P.left=S.left,c.splice(b,1))}const _=c[0],l=c[c.length-1];_.isDash===l.isDash&&(_.left=l.left-this.width,l.right=_.right+this.width);const h=this.width*this.nextRow;let d=0,x=c[d];for(let b=0;b<this.width;b++){b/x.right>1&&(x=c[++d]);const S=Math.abs(b-x.left),P=Math.abs(b-x.right),B=Math.min(S,P);this.data[h+b]=Math.max(0,Math.min(255,(x.isDash?B:-B)+128))}}addDash(c,_){const l=_?7:0,h=2*l+1;if(this.nextRow+h>this.height)return a.warnOnce("LineAtlas out of space"),null;let d=0;for(let b=0;b<c.length;b++)d+=c[b];if(d!==0){const b=this.width/d,S=this.getDashRanges(c,this.width,b);_?this.addRoundDash(S,b,l):this.addRegularDash(S)}const x={y:(this.nextRow+l+.5)/this.height,height:2*l/this.height,width:d};return this.nextRow+=h,this.dirty=!0,x}bind(c){const _=c.gl;this.texture?(_.bindTexture(_.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,_.texSubImage2D(_.TEXTURE_2D,0,0,0,this.width,this.height,_.ALPHA,_.UNSIGNED_BYTE,this.data))):(this.texture=_.createTexture(),_.bindTexture(_.TEXTURE_2D,this.texture),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texImage2D(_.TEXTURE_2D,0,_.ALPHA,this.width,this.height,0,_.ALPHA,_.UNSIGNED_BYTE,this.data))}}class Ke{constructor(c,_){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const l=this.workerPool.acquire(this.id);for(let h=0;h<l.length;h++){const d=new Ke.Actor(l[h],_,this.id);d.name=`Worker ${h}`,this.actors.push(d)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,_,l){a.asyncAll(this.actors,(h,d)=>{h.send(c,_,d)},l=l||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Oe(L,c,_){const l=function(h,d){if(h)return _(h);if(d){const x=a.pick(a.extend(d,L),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);d.vector_layers&&(x.vectorLayers=d.vector_layers,x.vectorLayerIds=x.vectorLayers.map(b=>b.id)),_(null,x)}};return L.url?a.getJSON(c.transformRequest(L.url,a.ResourceType.Source),l):a.exported.frame(()=>l(null,L))}Ke.Actor=a.Actor;class tt{constructor(c,_,l){this.bounds=a.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=_||0,this.maxzoom=l||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const _=Math.pow(2,c.z),l=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*_),h=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*_),d=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*_),x=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*_);return c.x>=l&&c.x<d&&c.y>=h&&c.y<x}}class Ye extends a.Evented{constructor(c,_,l,h){if(super(),this.id=c,this.dispatcher=l,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(_,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(h)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Oe(this._options,this.map._requestManager,(c,_)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),c?this.fire(new a.ErrorEvent(c)):_&&(a.extend(this,_),_.bounds&&(this.tileBounds=new tt(_.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(c,_){const l=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(l,a.ResourceType.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function d(x,b){return delete c.request,c.aborted?_(null):x&&x.status!==404?_(x):(b&&b.resourceTiming&&(c.resourceTiming=b.resourceTiming),this.map._refreshExpiredTiles&&b&&c.setExpiryData(b),c.loadVectorData(b,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),_(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}h.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired"?c.state==="loading"?c.reloadCallback=_:c.request=c.actor.send("reloadTile",h,d.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",h,d.bind(this)))}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class pt extends a.Evented{constructor(c,_,l,h){super(),this.id=c,this.dispatcher=l,this.setEventedParent(h),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},_),a.extend(this,a.pick(_,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Oe(this._options,this.map._requestManager,(c,_)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new a.ErrorEvent(c)):_&&(a.extend(this,_),_.bounds&&(this.tileBounds=new tt(_.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,_){const l=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.request=a.getImage(this.map._requestManager.transformRequest(l,a.ResourceType.Tile),(h,d,x)=>{if(delete c.request,c.aborted)c.state="unloaded",_(null);else if(h)c.state="errored",_(h);else if(d){this.map._refreshExpiredTiles&&c.setExpiryData(x);const b=this.map.painter.context,S=b.gl;c.texture=this.map.painter.getTileTexture(d.width),c.texture?c.texture.update(d,{useMipmap:!0}):(c.texture=new q(b,d,S.RGBA,{useMipmap:!0}),c.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),b.extTextureFilterAnisotropic&&S.texParameterf(S.TEXTURE_2D,b.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,b.extTextureFilterAnisotropicMax)),c.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),_(null)}})}abortTile(c,_){c.request&&(c.request.cancel(),delete c.request),_()}unloadTile(c,_){c.texture&&this.map.painter.saveTileTexture(c.texture),_()}hasTransition(){return!1}}let en;class Mt extends pt{constructor(c,_,l,h){super(c,_,l,h),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},_),this.encoding=_.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(c,_){const l=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function h(d,x){d&&(c.state="errored",_(d)),x&&(c.dem=x,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded",_(null))}c.request=a.getImage(this.map._requestManager.transformRequest(l,a.ResourceType.Tile),function(d,x){if(delete c.request,c.aborted)c.state="unloaded",_(null);else if(d)c.state="errored",_(d);else if(x){this.map._refreshExpiredTiles&&c.setExpiryData(x),delete x.cacheControl,delete x.expires;const b=a.isImageBitmap(x)&&(en==null&&(en=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),en)?x:a.exported.getImageData(x,1),S={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:b,encoding:this.encoding};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",S,h.bind(this)))}}.bind(this)),c.neighboringTiles=this._getNeighboringTiles(c.tileID)}_getNeighboringTiles(c){const _=c.canonical,l=Math.pow(2,_.z),h=(_.x-1+l)%l,d=_.x===0?c.wrap-1:c.wrap,x=(_.x+1+l)%l,b=_.x+1===l?c.wrap+1:c.wrap,S={};return S[new a.OverscaledTileID(c.overscaledZ,d,_.z,h,_.y).key]={backfilled:!1},S[new a.OverscaledTileID(c.overscaledZ,b,_.z,x,_.y).key]={backfilled:!1},_.y>0&&(S[new a.OverscaledTileID(c.overscaledZ,d,_.z,h,_.y-1).key]={backfilled:!1},S[new a.OverscaledTileID(c.overscaledZ,c.wrap,_.z,_.x,_.y-1).key]={backfilled:!1},S[new a.OverscaledTileID(c.overscaledZ,b,_.z,x,_.y-1).key]={backfilled:!1}),_.y+1<l&&(S[new a.OverscaledTileID(c.overscaledZ,d,_.z,h,_.y+1).key]={backfilled:!1},S[new a.OverscaledTileID(c.overscaledZ,c.wrap,_.z,_.x,_.y+1).key]={backfilled:!1},S[new a.OverscaledTileID(c.overscaledZ,b,_.z,x,_.y+1).key]={backfilled:!1}),S}unloadTile(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})}}class Qt extends a.Evented{constructor(c,_,l,h){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=l.getActor(),this.setEventedParent(h),this._data=_.data,this._options=a.extend({},_),this._collectResourceTiming=_.collectResourceTiming,_.maxzoom!==void 0&&(this.maxzoom=_.maxzoom),_.type&&(this.type=_.type),_.attribution&&(this.attribution=_.attribution),this.promoteId=_.promoteId;const d=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:_.cluster||!1,geojsonVtOptions:{buffer:(_.buffer!==void 0?_.buffer:128)*d,tolerance:(_.tolerance!==void 0?_.tolerance:.375)*d,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:_.lineMetrics||!1,generateId:_.generateId||!1},superclusterOptions:{maxZoom:_.clusterMaxZoom!==void 0?_.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,_.clusterMinPoints||2),extent:a.EXTENT,radius:(_.clusterRadius||50)*d,log:!1,generateId:_.generateId||!1},clusterProperties:_.clusterProperties,filter:_.filter},_.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(c){this.map=c,this.load()}setData(c){return this._data=c,this._updateWorkerData("content"),this}getClusterExpansionZoom(c,_){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},_),this}getClusterChildren(c,_){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},_),this}getClusterLeaves(c,_,l,h){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:_,offset:l},h),this}_updateWorkerData(c){const _=a.extend({},this.workerOptions),l=this._data;typeof l=="string"?(_.request=this.map._requestManager.transformRequest(a.exported.resolveURL(l),a.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(l),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,_,(h,d)=>{if(this._pendingLoads--,this._removed||d&&d.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source",sourceDataType:c}));let x=null;if(d&&d.resourceTiming&&d.resourceTiming[this.id]&&(x=d.resourceTiming[this.id].slice(0)),h)return void this.fire(new a.ErrorEvent(h));const b={dataType:"source",sourceDataType:c};this._collectResourceTiming&&x&&x.length>0&&a.extend(b,{resourceTiming:x}),this.fire(new a.Event("data",b))})}loaded(){return this._pendingLoads===0}loadTile(c,_){const l=c.actor?"reloadTile":"loadTile";c.actor=this.actor;const h={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request=this.actor.send(l,h,(d,x)=>(delete c.request,c.unloadVectorData(),c.aborted?_(null):d?_(d):(c.loadVectorData(x,this.map.painter,l==="reloadTile"),_(null))))}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0}unloadTile(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var xt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Tt extends a.Evented{constructor(c,_,l,h){super(),this.id=c,this.dispatcher=l,this.coordinates=_.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(h),this.options=_}load(c,_){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(l,h)=>{this._loaded=!0,l?this.fire(new a.ErrorEvent(l)):h&&(this.image=h,c&&(this.coordinates=c),_&&_(),this._finishLoading())})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}setCoordinates(c){this.coordinates=c;const _=c.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(h){let d=1/0,x=1/0,b=-1/0,S=-1/0;for(const $ of h)d=Math.min(d,$.x),x=Math.min(x,$.y),b=Math.max(b,$.x),S=Math.max(S,$.y);const P=Math.max(b-d,S-x),B=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),V=Math.pow(2,B);return new a.CanonicalTileID(B,Math.floor((d+b)/2*V),Math.floor((x+S)/2*V))}(_),this.minzoom=this.maxzoom=this.tileID.z;const l=_.map(h=>this.tileID.getTilePoint(h)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(l[0].x,l[0].y,0,0),this._boundsArray.emplaceBack(l[1].x,l[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(l[3].x,l[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(l[2].x,l[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,_=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,xt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(c,this.image,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const l in this.tiles){const h=this.tiles[l];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture)}}loadTile(c,_){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},_(null)):(c.state="errored",_(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xt extends Tt{constructor(c,_,l,h){super(c,_,l,h),this.roundZoom=!0,this.type="video",this.options=_}load(){this._loaded=!1;const c=this.options;this.urls=[];for(const _ of c.urls)this.urls.push(this.map._requestManager.transformRequest(_,a.ResourceType.Source).url);a.getVideo(this.urls,(_,l)=>{this._loaded=!0,_?this.fire(new a.ErrorEvent(_)):l&&(this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const _=this.video.seekable;c<_.start(0)||c>_.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${_.start(0)} and ${_.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,_=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,xt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE),_.texSubImage2D(_.TEXTURE_2D,0,0,0,_.RGBA,_.UNSIGNED_BYTE,this.video)):(this.texture=new q(c,this.video,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const l in this.tiles){const h=this.tiles[l];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Mn extends Tt{constructor(c,_,l,h){super(c,_,l,h),_.coordinates?Array.isArray(_.coordinates)&&_.coordinates.length===4&&!_.coordinates.some(d=>!Array.isArray(d)||d.length!==2||d.some(x=>typeof x!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${c}`,null,'missing required property "coordinates"'))),_.animate&&typeof _.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),_.canvas?typeof _.canvas=="string"||_.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${c}`,null,'missing required property "canvas"'))),this.options=_,this.animate=_.animate===void 0||_.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const _=this.map.painter.context,l=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,xt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(_,this.canvas,l.RGBA,{premultiply:!0});for(const h in this.tiles){const d=this.tiles[h];d.state!=="loaded"&&(d.state="loaded",d.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const Cn={vector:Ye,raster:pt,"raster-dem":Mt,geojson:Qt,video:Xt,image:Tt,canvas:Mn};function vr(L,c){const _=a.create();return a.translate(_,_,[1,1,0]),a.scale(_,_,[.5*L.width,.5*L.height,1]),a.multiply(_,_,L.calculatePosMatrix(c.toUnwrapped()))}function Gn(L,c,_,l,h,d){const x=function(V,$,X){if(V)for(const oe of V){const ne=$[oe];if(ne&&ne.source===X&&ne.type==="fill-extrusion")return!0}else for(const oe in $){const ne=$[oe];if(ne.source===X&&ne.type==="fill-extrusion")return!0}return!1}(h&&h.layers,c,L.id),b=d.maxPitchScaleFactor(),S=L.tilesIn(l,b,x);S.sort(Jn);const P=[];for(const V of S)P.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(c,_,L._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,h,d,b,vr(L.transform,V.tileID))});const B=function(V){const $={},X={};for(const oe of V){const ne=oe.queryResults,ue=oe.wrappedTileID,Te=X[ue]=X[ue]||{};for(const Ie in ne){const we=ne[Ie],$e=Te[Ie]=Te[Ie]||{},Me=$[Ie]=$[Ie]||[];for(const je of we)$e[je.featureIndex]||($e[je.featureIndex]=!0,Me.push(je))}}return $}(P);for(const V in B)B[V].forEach($=>{const X=$.feature,oe=L.getFeatureState(X.layer["source-layer"],X.id);X.source=X.layer.source,X.layer["source-layer"]&&(X.sourceLayer=X.layer["source-layer"]),X.state=oe});return B}function Jn(L,c){const _=L.tileID,l=c.tileID;return _.overscaledZ-l.overscaledZ||_.canonical.y-l.canonical.y||_.wrap-l.wrap||_.canonical.x-l.canonical.x}class ir{constructor(c,_){this.tileID=c,this.uid=a.uniqueId(),this.uses=0,this.tileSize=_,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(c){const _=c+this.timeAdded;_<a.exported.now()||this.fadeEndTime&&_<this.fadeEndTime||(this.fadeEndTime=_)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.textures.forEach(_=>c.saveTileTexture(_)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(c,_,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(h,d){const x={};if(!d)return x;for(const b of h){const S=b.layerIds.map(P=>d.getLayer(P)).filter(Boolean);if(S.length!==0){b.layers=S,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(P=>S.filter(B=>B.id===P)[0]));for(const P of S)x[P.id]=b}}return x}(c.buckets,_.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const d=this.buckets[h];if(d instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!l)break;d.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const d=this.buckets[h];if(d instanceof a.SymbolBucket&&d.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const h in this.buckets){const d=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,_.style.getLayer(h).queryRadius(d))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const l in this.buckets){const h=this.buckets[l];h.uploadPending()&&h.upload(c)}const _=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(c,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(c,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,_,l,h,d,x,b,S,P,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:d,scale:x,tileSize:this.tileSize,pixelPosMatrix:B,transform:S,params:b,queryPadding:this.queryPadding*P},c,_,l):{}}querySourceFeatures(c,_){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const h=l.loadVTLayers(),d=_?_.sourceLayer:"",x=h._geojsonTileLayer||h[d];if(!x)return;const b=a.createFilter(_&&_.filter),{z:S,x:P,y:B}=this.tileID.canonical,V={z:S,x:P,y:B};for(let $=0;$<x.length;$++){const X=x.feature($);if(b.needGeometry){const ue=a.toEvaluationFeature(X,!0);if(!b.filter(new a.EvaluationParameters(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!b.filter(new a.EvaluationParameters(this.tileID.overscaledZ),X))continue;const oe=l.getId(X,d),ne=new a.GeoJSONFeature(X,S,P,B,oe);ne.tile=V,c.push(ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const _=this.expirationTime;if(c.cacheControl){const l=a.parseCacheControl(c.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const l=Date.now();let h=!1;if(this.expirationTime>l)h=!1;else if(_)if(this.expirationTime<_)h=!0;else{const d=this.expirationTime-_;d?this.expirationTime=l+Math.max(d,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,_){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const l=this.latestFeatureIndex.loadVTLayers();for(const h in this.buckets){if(!_.style.hasLayer(h))continue;const d=this.buckets[h],x=d.layers[0].sourceLayer||"_geojsonTileLayer",b=l[x],S=c[x];if(!b||!S||Object.keys(S).length===0)continue;d.update(S,b,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=_&&_.style&&_.style.getLayer(h);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(d)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=a.exported.now()+c}setDependencies(c,_){const l={};for(const h of _)l[h]=!0;this.dependencies[c]=l}hasDependency(c,_){for(const l of c){const h=this.dependencies[l];if(h){for(const d of _)if(h[d])return!0}}return!1}}class jn{constructor(c,_){this.max=c,this.onRemove=_,this.reset()}reset(){for(const c in this.data)for(const _ of this.data[c])_.timeout&&clearTimeout(_.timeout),this.onRemove(_.value);return this.data={},this.order=[],this}add(c,_,l){const h=c.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const d={value:_,timeout:void 0};if(l!==void 0&&(d.timeout=setTimeout(()=>{this.remove(c,d)},l)),this.data[h].push(d),this.order.push(h),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const _=this.data[c].shift();return _.timeout&&clearTimeout(_.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),_.value}getByKey(c){const _=this.data[c];return _?_[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,_){if(!this.has(c))return this;const l=c.wrapped().key,h=_===void 0?0:this.data[l].indexOf(_),d=this.data[l][h];return this.data[l].splice(h,1),d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(d.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}filter(c){const _=[];for(const l in this.data)for(const h of this.data[l])c(h.value)||_.push(h);for(const l of _)this.remove(l.value.tileID,l)}}class Lr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,_,l){const h=String(_);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][h]=this.stateChanges[c][h]||{},a.extend(this.stateChanges[c][h],l),this.deletedStates[c]===null){this.deletedStates[c]={};for(const d in this.state[c])d!==h&&(this.deletedStates[c][d]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][h]===null){this.deletedStates[c][h]={};for(const d in this.state[c][h])l[d]||(this.deletedStates[c][h][d]=null)}else for(const d in l)this.deletedStates[c]&&this.deletedStates[c][h]&&this.deletedStates[c][h][d]===null&&delete this.deletedStates[c][h][d]}removeFeatureState(c,_,l){if(this.deletedStates[c]===null)return;const h=String(_);if(this.deletedStates[c]=this.deletedStates[c]||{},l&&_!==void 0)this.deletedStates[c][h]!==null&&(this.deletedStates[c][h]=this.deletedStates[c][h]||{},this.deletedStates[c][h][l]=null);else if(_!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][h])for(l in this.deletedStates[c][h]={},this.stateChanges[c][h])this.deletedStates[c][h][l]=null;else this.deletedStates[c][h]=null;else this.deletedStates[c]=null}getState(c,_){const l=String(_),h=a.extend({},(this.state[c]||{})[l],(this.stateChanges[c]||{})[l]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const d=this.deletedStates[c][_];if(d===null)return{};for(const x in d)delete h[x]}return h}initializeTileState(c,_){c.setFeatureState(this.state,_)}coalesceChanges(c,_){const l={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const d={};for(const x in this.stateChanges[h])this.state[h][x]||(this.state[h][x]={}),a.extend(this.state[h][x],this.stateChanges[h][x]),d[x]=this.state[h][x];l[h]=d}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const d={};if(this.deletedStates[h]===null)for(const x in this.state[h])d[x]={},this.state[h][x]={};else for(const x in this.deletedStates[h]){if(this.deletedStates[h][x]===null)this.state[h][x]={};else for(const b of Object.keys(this.deletedStates[h][x]))delete this.state[h][x][b];d[x]=this.state[h][x]}l[h]=l[h]||{},a.extend(l[h],d)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(const h in c)c[h].setFeatureState(l,_)}}class St extends a.Evented{constructor(c,_,l){super(),this.id=c,this.dispatcher=l,this.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(h,d,x,b){const S=new Cn[d.type](h,d,x,b);if(S.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${S.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],S),S}(c,_,l,this),this._tiles={},this._cache=new jn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Lr}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const c in this._tiles){const _=this._tiles[c];if(_.state!=="loaded"&&_.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,_){return this._source.loadTile(c,_)}_unloadTile(c){if(this._source.unloadTile)return this._source.unloadTile(c,()=>{})}_abortTile(c){this._source.abortTile&&this._source.abortTile(c,()=>{}),this._source.fire(new a.Event("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const _ in this._tiles){const l=this._tiles[_];l.upload(c),l.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(c=>c.tileID).sort(ln).map(c=>c.key)}getRenderableIds(c){const _=[];for(const l in this._tiles)this._isIdRenderable(l,c)&&_.push(this._tiles[l]);return c?_.sort((l,h)=>{const d=l.tileID,x=h.tileID,b=new a.pointGeometry(d.canonical.x,d.canonical.y)._rotate(this.transform.angle),S=new a.pointGeometry(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return d.overscaledZ-x.overscaledZ||S.y-b.y||S.x-b.x}).map(l=>l.tileID.key):_.map(l=>l.tileID).sort(ln).map(l=>l.key)}hasRenderableParent(c){const _=this.findLoadedParent(c,0);return!!_&&this._isIdRenderable(_.tileID.key)}_isIdRenderable(c,_){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(_||!this._tiles[c].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(c,_){const l=this._tiles[c];l&&(l.state!=="loading"&&(l.state=_),this._loadTile(l,this._tileLoaded.bind(this,l,c,_)))}_tileLoaded(c,_,l,h){if(h)return c.state="errored",void(h.status!==404?this._source.fire(new a.ErrorEvent(h,{tile:c})):this.update(this.transform,this.terrain));c.timeAdded=a.exported.now(),l==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(_,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:c,coord:c.tileID}))}_backfillDEM(c){const _=this.getRenderableIds();for(let h=0;h<_.length;h++){const d=_[h];if(c.neighboringTiles&&c.neighboringTiles[d]){const x=this.getTileByID(d);l(c,x),l(x,c)}}function l(h,d){h.needsHillshadePrepare=!0,h.needsTerrainPrepare=!0;let x=d.tileID.canonical.x-h.tileID.canonical.x;const b=d.tileID.canonical.y-h.tileID.canonical.y,S=Math.pow(2,h.tileID.canonical.z),P=d.tileID.key;x===0&&b===0||Math.abs(b)>1||(Math.abs(x)>1&&(Math.abs(x+S)===1?x+=S:Math.abs(x-S)===1&&(x-=S)),d.dem&&h.dem&&(h.dem.backfillBorder(d.dem,x,b),h.neighboringTiles&&h.neighboringTiles[P]&&(h.neighboringTiles[P].backfilled=!0)))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,_,l,h){for(const d in this._tiles){let x=this._tiles[d];if(h[d]||!x.hasData()||x.tileID.overscaledZ<=_||x.tileID.overscaledZ>l)continue;let b=x.tileID;for(;x&&x.tileID.overscaledZ>_+1;){const P=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[P.key],x&&x.hasData()&&(b=P)}let S=b;for(;S.overscaledZ>_;)if(S=S.scaledTo(S.overscaledZ-1),c[S.key]){h[b.key]=b;break}}}findLoadedParent(c,_){if(c.key in this._loadedParentTiles){const l=this._loadedParentTiles[c.key];return l&&l.tileID.overscaledZ>=_?l:null}for(let l=c.overscaledZ-1;l>=_;l--){const h=c.scaledTo(l),d=this._getLoadedTile(h);if(d)return d}}_getLoadedTile(c){const _=this._tiles[c.key];return _&&_.hasData()?_:this._cache.getByKey(c.wrapped().key)}updateCacheSize(c){const _=Math.ceil(c.width/this._source.tileSize)+1,l=Math.ceil(c.height/this._source.tileSize)+1,h=Math.floor(_*l*5),d=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(d)}handleWrapJump(c){const _=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,_){const l={};for(const h in this._tiles){const d=this._tiles[h];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+_),l[d.tileID.key]=d}this._tiles=l;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(h,this._tiles[h])}}update(c,_){if(this.transform=c,this.terrain=_,!this._sourceLoaded||this._paused)return;let l;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?l=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(P=>new a.OverscaledTileID(P.canonical.z,P.wrap,P.canonical.z,P.canonical.x,P.canonical.y)):(l=c.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:_}),this._source.hasTile&&(l=l.filter(P=>this._source.hasTile(P)))):l=[];const h=c.coveringZoomLevel(this._source),d=Math.max(h-St.maxOverzooming,this._source.minzoom),x=Math.max(h+St.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const P={};for(const B of l)if(B.canonical.z>this._source.minzoom){const V=B.scaledTo(B.canonical.z-1);P[V.key]=V;const $=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));P[$.key]=$}l=l.concat(Object.values(P))}const b=this._updateRetainedTiles(l,h);if(yn(this._source.type)){const P={},B={},V=Object.keys(b);for(const $ of V){const X=b[$],oe=this._tiles[$];if(!oe||oe.fadeEndTime&&oe.fadeEndTime<=a.exported.now())continue;const ne=this.findLoadedParent(X,d);ne&&(this._addTile(ne.tileID),P[ne.tileID.key]=ne.tileID),B[$]=X}this._retainLoadedChildren(B,h,x,b);for(const $ in P)b[$]||(this._coveredTiles[$]=!0,b[$]=P[$]);if(_){const $={},X={};for(const oe of l)this._tiles[oe.key].hasData()?$[oe.key]=oe:X[oe.key]=oe;for(const oe in X){const ne=X[oe].children(this._source.maxzoom);this._tiles[ne[0].key]&&this._tiles[ne[1].key]&&this._tiles[ne[2].key]&&this._tiles[ne[3].key]&&($[ne[0].key]=b[ne[0].key]=ne[0],$[ne[1].key]=b[ne[1].key]=ne[1],$[ne[2].key]=b[ne[2].key]=ne[2],$[ne[3].key]=b[ne[3].key]=ne[3],delete X[oe])}for(const oe in X){const ne=this.findLoadedParent(X[oe],this._source.minzoom);if(ne){$[ne.tileID.key]=b[ne.tileID.key]=ne.tileID;for(const ue in $)$[ue].isChildOf(ne.tileID)&&delete $[ue]}}for(const oe in this._tiles)$[oe]||(this._coveredTiles[oe]=!0)}}for(const P in b)this._tiles[P].clearFadeHold();const S=a.keysDifference(this._tiles,b);for(const P of S){const B=this._tiles[P];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(P)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)}_updateRetainedTiles(c,_){const l={},h={},d=Math.max(_-St.maxOverzooming,this._source.minzoom),x=Math.max(_+St.maxUnderzooming,this._source.minzoom),b={};for(const S of c){const P=this._addTile(S);l[S.key]=S,P.hasData()||_<this._source.maxzoom&&(b[S.key]=S)}this._retainLoadedChildren(b,_,x,l);for(const S of c){let P=this._tiles[S.key];if(P.hasData())continue;if(_+1>this._source.maxzoom){const V=S.children(this._source.maxzoom)[0],$=this.getTile(V);if($&&$.hasData()){l[V.key]=V;continue}}else{const V=S.children(this._source.maxzoom);if(l[V[0].key]&&l[V[1].key]&&l[V[2].key]&&l[V[3].key])continue}let B=P.wasRequested();for(let V=S.overscaledZ-1;V>=d;--V){const $=S.scaledTo(V);if(h[$.key]||(h[$.key]=!0,P=this.getTile($),!P&&B&&(P=this._addTile($)),P&&(l[$.key]=$,B=P.wasRequested(),P.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const c in this._tiles){const _=[];let l,h=this._tiles[c].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){l=this._loadedParentTiles[h.key];break}_.push(h.key);const d=h.scaledTo(h.overscaledZ-1);if(l=this._getLoadedTile(d),l)break;h=d}for(const d of _)this._loadedParentTiles[d]=l}}_addTile(c){let _=this._tiles[c.key];if(_)return _;_=this._cache.getAndRemove(c),_&&(this._setTileReloadTimer(c.key,_),_.tileID=c,this._state.initializeTileState(_,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,_)));const l=_;return _||(_=new ir(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(_,this._tileLoaded.bind(this,_,c.key,_.state))),_.uses++,this._tiles[c.key]=_,l||this._source.fire(new a.Event("dataloading",{tile:_,coord:_.tileID,dataType:"source"})),_}_setTileReloadTimer(c,_){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);const l=_.getExpiryTimeout();l&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},l))}_removeTile(c){const _=this._tiles[c];_&&(_.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),_.uses>0||(_.hasData()&&_.state!=="reloading"?this._cache.add(_.tileID,_,_.getExpiryTimeout()):(_.aborted=!0,this._abortTile(_),this._unloadTile(_))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(c);this._cache.reset()}tilesIn(c,_,l){const h=[],d=this.transform;if(!d)return h;const x=l?d.getCameraQueryGeometry(c):c,b=c.map(oe=>d.pointCoordinate(oe,this.terrain)),S=x.map(oe=>d.pointCoordinate(oe,this.terrain)),P=this.getIds();let B=1/0,V=1/0,$=-1/0,X=-1/0;for(const oe of S)B=Math.min(B,oe.x),V=Math.min(V,oe.y),$=Math.max($,oe.x),X=Math.max(X,oe.y);for(let oe=0;oe<P.length;oe++){const ne=this._tiles[P[oe]];if(ne.holdingForFade())continue;const ue=ne.tileID,Te=Math.pow(2,d.zoom-ne.tileID.overscaledZ),Ie=_*ne.queryPadding*a.EXTENT/ne.tileSize/Te,we=[ue.getTilePoint(new a.MercatorCoordinate(B,V)),ue.getTilePoint(new a.MercatorCoordinate($,X))];if(we[0].x-Ie<a.EXTENT&&we[0].y-Ie<a.EXTENT&&we[1].x+Ie>=0&&we[1].y+Ie>=0){const $e=b.map(je=>ue.getTilePoint(je)),Me=S.map(je=>ue.getTilePoint(je));h.push({tile:ne,tileID:ue,queryGeometry:$e,cameraQueryGeometry:Me,scale:Te})}}return h}getVisibleCoordinates(c){const _=this.getRenderableIds(c).map(l=>this._tiles[l].tileID);for(const l of _)l.posMatrix=this.transform.calculatePosMatrix(l.toUnwrapped());return _}hasTransition(){if(this._source.hasTransition())return!0;if(yn(this._source.type))for(const c in this._tiles){const _=this._tiles[c];if(_.fadeEndTime!==void 0&&_.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(c,_,l){this._state.updateState(c=c||"_geojsonTileLayer",_,l)}removeFeatureState(c,_,l){this._state.removeFeatureState(c=c||"_geojsonTileLayer",_,l)}getFeatureState(c,_){return this._state.getState(c=c||"_geojsonTileLayer",_)}setDependencies(c,_,l){const h=this._tiles[c];h&&h.setDependencies(_,l)}reloadTilesForDependencies(c,_){for(const l in this._tiles)this._tiles[l].hasDependency(c,_)&&this._reloadTile(l,"reloading");this._cache.filter(l=>!l.hasDependency(c,_))}}function ln(L,c){const _=Math.abs(2*L.wrap)-+(L.wrap<0),l=Math.abs(2*c.wrap)-+(c.wrap<0);return L.overscaledZ-c.overscaledZ||l-_||c.canonical.y-L.canonical.y||c.canonical.x-L.canonical.x}function yn(L){return L==="raster"||L==="image"||L==="video"}St.maxOverzooming=10,St.maxUnderzooming=3;const bt="mapboxgl_preloaded_worker_pool";class sr{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<sr.workerCount;)this.workers.push(new Worker(Ks.workerUrl));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(_=>{_.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[bt]}numActive(){return Object.keys(this.active).length}}const er=Math.floor(a.exported.hardwareConcurrency/2);let lr;function gr(){return lr||(lr=new sr),lr}function Ar(L,c){const _={};for(const l in L)l!=="ref"&&(_[l]=L[l]);return a.refProperties.forEach(l=>{l in c&&(_[l]=c[l])}),_}function Zr(L){L=L.slice();const c=Object.create(null);for(let _=0;_<L.length;_++)c[L[_].id]=L[_];for(let _=0;_<L.length;_++)"ref"in L[_]&&(L[_]=Ar(L[_],c[L[_].ref]));return L}sr.workerCount=Math.max(Math.min(er,6),1);const Zn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ei(L,c,_){_.push({command:Zn.addSource,args:[L,c[L]]})}function $n(L,c,_){c.push({command:Zn.removeSource,args:[L]}),_[L]=!0}function Ti(L,c,_,l){$n(L,_,l),Ei(L,c,_)}function rs(L,c,_){let l;for(l in L[_])if(Object.prototype.hasOwnProperty.call(L[_],l)&&l!=="data"&&!C(L[_][l],c[_][l]))return!1;for(l in c[_])if(Object.prototype.hasOwnProperty.call(c[_],l)&&l!=="data"&&!C(L[_][l],c[_][l]))return!1;return!0}function Er(L,c,_,l,h,d){let x;for(x in c=c||{},L=L||{})Object.prototype.hasOwnProperty.call(L,x)&&(C(L[x],c[x])||_.push({command:d,args:[l,x,c[x],h]}));for(x in c)Object.prototype.hasOwnProperty.call(c,x)&&!Object.prototype.hasOwnProperty.call(L,x)&&(C(L[x],c[x])||_.push({command:d,args:[l,x,c[x],h]}))}function Yr(L){return L.id}function Ps(L,c){return L[c.id]=c,L}class Si{constructor(c,_){this.reset(c,_)}reset(c,_){this.points=c||[],this._distances=[0];for(let l=1;l<this.points.length;l++)this._distances[l]=this._distances[l-1]+this.points[l].dist(this.points[l-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=a.clamp(c,0,1);let _=1,l=this._distances[_];const h=c*this.paddedLength+this.padding;for(;l<h&&_<this._distances.length;)l=this._distances[++_];const d=_-1,x=this._distances[d],b=l-x,S=b>0?(h-x)/b:0;return this.points[d].mult(1-S).add(this.points[_].mult(S))}}function ht(L,c){let _=!0;return L==="always"||L!=="never"&&c!=="never"||(_=!1),_}class kt{constructor(c,_,l){const h=this.boxCells=[],d=this.circleCells=[];this.xCellCount=Math.ceil(c/l),this.yCellCount=Math.ceil(_/l);for(let x=0;x<this.xCellCount*this.yCellCount;x++)h.push([]),d.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=_,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,_,l,h,d){this._forEachCell(_,l,h,d,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(_),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(d)}insertCircle(c,_,l,h){this._forEachCell(_-h,l-h,_+h,l+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(_),this.circles.push(l),this.circles.push(h)}_insertBoxCell(c,_,l,h,d,x){this.boxCells[d].push(x)}_insertCircleCell(c,_,l,h,d,x){this.circleCells[d].push(x)}_query(c,_,l,h,d,x,b){if(l<0||c>this.width||h<0||_>this.height)return[];const S=[];if(c<=0&&_<=0&&this.width<=l&&this.height<=h){if(d)return[{key:null,x1:c,y1:_,x2:l,y2:h}];for(let P=0;P<this.boxKeys.length;P++)S.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const B=this.circles[3*P],V=this.circles[3*P+1],$=this.circles[3*P+2];S.push({key:this.circleKeys[P],x1:B-$,y1:V-$,x2:B+$,y2:V+$})}}else this._forEachCell(c,_,l,h,this._queryCell,S,{hitTest:d,overlapMode:x,seenUids:{box:{},circle:{}}},b);return S}query(c,_,l,h){return this._query(c,_,l,h,!1,null)}hitTest(c,_,l,h,d,x){return this._query(c,_,l,h,!0,d,x).length>0}hitTestCircle(c,_,l,h,d){const x=c-l,b=c+l,S=_-l,P=_+l;if(b<0||x>this.width||P<0||S>this.height)return!1;const B=[];return this._forEachCell(x,S,b,P,this._queryCellCircle,B,{hitTest:!0,overlapMode:h,circle:{x:c,y:_,radius:l},seenUids:{box:{},circle:{}}},d),B.length>0}_queryCell(c,_,l,h,d,x,b,S){const{seenUids:P,hitTest:B,overlapMode:V}=b,$=this.boxCells[d];if($!==null){const oe=this.bboxes;for(const ne of $)if(!P.box[ne]){P.box[ne]=!0;const ue=4*ne,Te=this.boxKeys[ne];if(c<=oe[ue+2]&&_<=oe[ue+3]&&l>=oe[ue+0]&&h>=oe[ue+1]&&(!S||S(Te))&&(!B||!ht(V,Te.overlapMode))&&(x.push({key:Te,x1:oe[ue],y1:oe[ue+1],x2:oe[ue+2],y2:oe[ue+3]}),B))return!0}}const X=this.circleCells[d];if(X!==null){const oe=this.circles;for(const ne of X)if(!P.circle[ne]){P.circle[ne]=!0;const ue=3*ne,Te=this.circleKeys[ne];if(this._circleAndRectCollide(oe[ue],oe[ue+1],oe[ue+2],c,_,l,h)&&(!S||S(Te))&&(!B||!ht(V,Te.overlapMode))){const Ie=oe[ue],we=oe[ue+1],$e=oe[ue+2];if(x.push({key:Te,x1:Ie-$e,y1:we-$e,x2:Ie+$e,y2:we+$e}),B)return!0}}}return!1}_queryCellCircle(c,_,l,h,d,x,b,S){const{circle:P,seenUids:B,overlapMode:V}=b,$=this.boxCells[d];if($!==null){const oe=this.bboxes;for(const ne of $)if(!B.box[ne]){B.box[ne]=!0;const ue=4*ne,Te=this.boxKeys[ne];if(this._circleAndRectCollide(P.x,P.y,P.radius,oe[ue+0],oe[ue+1],oe[ue+2],oe[ue+3])&&(!S||S(Te))&&!ht(V,Te.overlapMode))return x.push(!0),!0}}const X=this.circleCells[d];if(X!==null){const oe=this.circles;for(const ne of X)if(!B.circle[ne]){B.circle[ne]=!0;const ue=3*ne,Te=this.circleKeys[ne];if(this._circlesCollide(oe[ue],oe[ue+1],oe[ue+2],P.x,P.y,P.radius)&&(!S||S(Te))&&!ht(V,Te.overlapMode))return x.push(!0),!0}}}_forEachCell(c,_,l,h,d,x,b,S){const P=this._convertToXCellCoord(c),B=this._convertToYCellCoord(_),V=this._convertToXCellCoord(l),$=this._convertToYCellCoord(h);for(let X=P;X<=V;X++)for(let oe=B;oe<=$;oe++)if(d.call(this,c,_,l,h,this.xCellCount*oe+X,x,b,S))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,_,l,h,d,x){const b=h-c,S=d-_,P=l+x;return P*P>b*b+S*S}_circleAndRectCollide(c,_,l,h,d,x,b){const S=(x-h)/2,P=Math.abs(c-(h+S));if(P>S+l)return!1;const B=(b-d)/2,V=Math.abs(_-(d+B));if(V>B+l)return!1;if(P<=S||V<=B)return!0;const $=P-S,X=V-B;return $*$+X*X<=l*l}}function is(L,c,_,l,h){const d=a.create();return c?(a.scale(d,d,[1/h,1/h,1]),_||a.rotateZ(d,d,l.angle)):a.multiply(d,l.labelPlaneMatrix,L),d}function Ai(L,c,_,l,h){if(c){const d=a.clone(L);return a.scale(d,d,[h,h,1]),_||a.rotateZ(d,d,-l.angle),d}return l.glCoordMatrix}function Vn(L,c,_){let l;_?(l=[L.x,L.y,_(L.x,L.y),1],a.transformMat4(l,l,c)):(l=[L.x,L.y,0,1],ye(l,l,c));const h=l[3];return{point:new a.pointGeometry(l[0]/h,l[1]/h),signedDistanceFromCamera:h}}function Bi(L,c){return .5+L/c*.5}function mi(L,c){const _=L[0]/L[3],l=L[1]/L[3];return _>=-c[0]&&_<=c[0]&&l>=-c[1]&&l<=c[1]}function ti(L,c,_,l,h,d,x,b,S,P){const B=l?L.textSizeData:L.iconSizeData,V=a.evaluateSizeForZoom(B,_.transform.zoom),$=[256/_.width*2+1,256/_.height*2+1],X=l?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;X.clear();const oe=L.lineVertexArray,ne=l?L.text.placedSymbolArray:L.icon.placedSymbolArray,ue=_.transform.width/_.transform.height;let Te=!1;for(let Ie=0;Ie<ne.length;Ie++){const we=ne.get(Ie);if(we.hidden||we.writingMode===a.WritingMode.vertical&&!Te){Pn(we.numGlyphs,X);continue}let $e;if(Te=!1,P?($e=[we.anchorX,we.anchorY,P(we.anchorX,we.anchorY),1],a.transformMat4($e,$e,c)):($e=[we.anchorX,we.anchorY,0,1],ye($e,$e,c)),!mi($e,$)){Pn(we.numGlyphs,X);continue}const Me=Bi(_.transform.cameraToCenterDistance,$e[3]),je=a.evaluateSizeForFeature(B,V,we),be=x?je/Me:je*Me,m=new a.pointGeometry(we.anchorX,we.anchorY),g=Vn(m,h,P).point,v={},E=Rn(we,be,!1,b,c,h,d,L.glyphOffsetArray,oe,X,g,m,v,ue,S,P);Te=E.useVertical,(E.notEnoughRoom||Te||E.needsFlipping&&Rn(we,be,!0,b,c,h,d,L.glyphOffsetArray,oe,X,g,m,v,ue,S,P).notEnoughRoom)&&Pn(we.numGlyphs,X)}l?L.text.dynamicLayoutVertexBuffer.updateData(X):L.icon.dynamicLayoutVertexBuffer.updateData(X)}function $i(L,c,_,l,h,d,x,b,S,P,B,V,$){const X=b.glyphStartIndex+b.numGlyphs,oe=b.lineStartIndex,ne=b.lineStartIndex+b.lineLength,ue=c.getoffsetX(b.glyphStartIndex),Te=c.getoffsetX(X-1),Ie=Ur(L*ue,_,l,h,d,x,b.segment,oe,ne,S,P,B,V,$);if(!Ie)return null;const we=Ur(L*Te,_,l,h,d,x,b.segment,oe,ne,S,P,B,V,$);return we?{first:Ie,last:we}:null}function Bt(L,c,_,l){return L===a.WritingMode.horizontal&&Math.abs(_.y-c.y)>Math.abs(_.x-c.x)*l?{useVertical:!0}:(L===a.WritingMode.vertical?c.y<_.y:c.x>_.x)?{needsFlipping:!0}:null}function Rn(L,c,_,l,h,d,x,b,S,P,B,V,$,X,oe,ne){const ue=c/24,Te=L.lineOffsetX*ue,Ie=L.lineOffsetY*ue;let we;if(L.numGlyphs>1){const $e=L.glyphStartIndex+L.numGlyphs,Me=L.lineStartIndex,je=L.lineStartIndex+L.lineLength,be=$i(ue,b,Te,Ie,_,B,V,L,S,d,$,oe,ne);if(!be)return{notEnoughRoom:!0};const m=Vn(be.first.point,x,ne).point,g=Vn(be.last.point,x,ne).point;if(l&&!_){const v=Bt(L.writingMode,m,g,X);if(v)return v}we=[be.first];for(let v=L.glyphStartIndex+1;v<$e-1;v++)we.push(Ur(ue*b.getoffsetX(v),Te,Ie,_,B,V,L.segment,Me,je,S,d,$,oe,ne));we.push(be.last)}else{if(l&&!_){const Me=Vn(V,h,ne).point,je=L.lineStartIndex+L.segment+1,be=new a.pointGeometry(S.getx(je),S.gety(je)),m=Vn(be,h,ne),g=m.signedDistanceFromCamera>0?m.point:In(V,be,Me,1,h,ne),v=Bt(L.writingMode,Me,g,X);if(v)return v}const $e=Ur(ue*b.getoffsetX(L.glyphStartIndex),Te,Ie,_,B,V,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,S,d,$,oe,ne);if(!$e)return{notEnoughRoom:!0};we=[$e]}for(const $e of we)a.addDynamicAttributes(P,$e.point,$e.angle);return{}}function In(L,c,_,l,h,d){const x=Vn(L.add(L.sub(c)._unit()),h,d).point,b=_.sub(x);return _.add(b._mult(l/b.mag()))}function Ur(L,c,_,l,h,d,x,b,S,P,B,V,$,X){const oe=l?L-c:L+c;let ne=oe>0?1:-1,ue=0;l&&(ne*=-1,ue=Math.PI),ne<0&&(ue+=Math.PI);let Te=ne>0?b+x:b+x+1,Ie=h,we=h,$e=0,Me=0;const je=Math.abs(oe),be=[];for(;$e+Me<=je;){if(Te+=ne,Te<b||Te>=S)return null;if(we=Ie,be.push(Ie),Ie=V[Te],Ie===void 0){const I=new a.pointGeometry(P.getx(Te),P.gety(Te)),R=Vn(I,B,X);if(R.signedDistanceFromCamera>0)Ie=V[Te]=R.point;else{const O=Te-ne;Ie=In($e===0?d:new a.pointGeometry(P.getx(O),P.gety(O)),I,we,je-$e+1,B,X)}}$e+=Me,Me=we.dist(Ie)}const m=(je-$e)/Me,g=Ie.sub(we),v=g.mult(m)._add(we);v._add(g._unit()._perp()._mult(_*ne));const E=ue+Math.atan2(Ie.y-we.y,Ie.x-we.x);return be.push(v),{point:v,angle:$?E:0,path:be}}const Xi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pn(L,c){for(let _=0;_<L;_++){const l=c.length;c.resize(l+4),c.float32.set(Xi,3*l)}}function ye(L,c,_){const l=c[0],h=c[1];return L[0]=_[0]*l+_[4]*h+_[12],L[1]=_[1]*l+_[5]*h+_[13],L[3]=_[3]*l+_[7]*h+_[15],L}const ot=100;class gt{constructor(c,_=new kt(c.width+200,c.height+200,25),l=new kt(c.width+200,c.height+200,25)){this.transform=c,this.grid=_,this.ignoredGrid=l,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+ot,this.screenBottomBoundary=c.height+ot,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,_,l,h,d,x){const b=this.projectAndGetPerspectiveRatio(h,c.anchorPointX,c.anchorPointY,x),S=l*b.perspectiveRatio,P=c.x1*S+b.point.x,B=c.y1*S+b.point.y,V=c.x2*S+b.point.x,$=c.y2*S+b.point.y;return!this.isInsideGrid(P,B,V,$)||_!=="always"&&this.grid.hitTest(P,B,V,$,_,d)||b.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[P,B,V,$],offscreen:this.isOffscreen(P,B,V,$)}}placeCollisionCircles(c,_,l,h,d,x,b,S,P,B,V,$,X,oe){const ne=[],ue=new a.pointGeometry(_.anchorX,_.anchorY),Te=Vn(ue,x,oe),Ie=Bi(this.transform.cameraToCenterDistance,Te.signedDistanceFromCamera),we=(B?d/Ie:d*Ie)/a.ONE_EM,$e=Vn(ue,b,oe).point,Me=$i(we,h,_.lineOffsetX*we,_.lineOffsetY*we,!1,$e,ue,_,l,b,{},!1,oe);let je=!1,be=!1,m=!0;if(Me){const g=.5*$*Ie+X,v=new a.pointGeometry(-100,-100),E=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),I=new Si,R=Me.first,O=Me.last;let N=[];for(let le=R.path.length-1;le>=1;le--)N.push(R.path[le]);for(let le=1;le<O.path.length;le++)N.push(O.path[le]);const Q=2.5*g;if(S){const le=N.map(pe=>Vn(pe,S,oe));N=le.some(pe=>pe.signedDistanceFromCamera<=0)?[]:le.map(pe=>pe.point)}let te=[];if(N.length>0){const le=N[0].clone(),pe=N[0].clone();for(let Be=1;Be<N.length;Be++)le.x=Math.min(le.x,N[Be].x),le.y=Math.min(le.y,N[Be].y),pe.x=Math.max(pe.x,N[Be].x),pe.y=Math.max(pe.y,N[Be].y);te=le.x>=v.x&&pe.x<=E.x&&le.y>=v.y&&pe.y<=E.y?[N]:pe.x<v.x||le.x>E.x||pe.y<v.y||le.y>E.y?[]:a.clipLine([N],v.x,v.y,E.x,E.y)}for(const le of te){I.reset(le,.25*g);let pe=0;pe=I.length<=.5*g?1:Math.ceil(I.paddedLength/Q)+1;for(let Be=0;Be<pe;Be++){const He=Be/Math.max(pe-1,1),ze=I.lerp(He),Xe=ze.x+ot,dt=ze.y+ot;ne.push(Xe,dt,g,0);const ct=Xe-g,it=dt-g,st=Xe+g,Je=dt+g;if(m=m&&this.isOffscreen(ct,it,st,Je),be=be||this.isInsideGrid(ct,it,st,Je),c!=="always"&&this.grid.hitTestCircle(Xe,dt,g,c,V)&&(je=!0,!P))return{circles:[],offscreen:!1,collisionDetected:je}}}}return{circles:!P&&je||!be||Ie<this.perspectiveRatioCutoff?[]:ne,offscreen:m,collisionDetected:je}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const _=[];let l=1/0,h=1/0,d=-1/0,x=-1/0;for(const B of c){const V=new a.pointGeometry(B.x+ot,B.y+ot);l=Math.min(l,V.x),h=Math.min(h,V.y),d=Math.max(d,V.x),x=Math.max(x,V.y),_.push(V)}const b=this.grid.query(l,h,d,x).concat(this.ignoredGrid.query(l,h,d,x)),S={},P={};for(const B of b){const V=B.key;if(S[V.bucketInstanceId]===void 0&&(S[V.bucketInstanceId]={}),S[V.bucketInstanceId][V.featureIndex])continue;const $=[new a.pointGeometry(B.x1,B.y1),new a.pointGeometry(B.x2,B.y1),new a.pointGeometry(B.x2,B.y2),new a.pointGeometry(B.x1,B.y2)];a.polygonIntersectsPolygon(_,$)&&(S[V.bucketInstanceId][V.featureIndex]=!0,P[V.bucketInstanceId]===void 0&&(P[V.bucketInstanceId]=[]),P[V.bucketInstanceId].push(V.featureIndex))}return P}insertCollisionBox(c,_,l,h,d,x){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:d,collisionGroupID:x,overlapMode:_},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,_,l,h,d,x){const b=l?this.ignoredGrid:this.grid,S={bucketInstanceId:h,featureIndex:d,collisionGroupID:x,overlapMode:_};for(let P=0;P<c.length;P+=4)b.insertCircle(S,c[P],c[P+1],c[P+2])}projectAndGetPerspectiveRatio(c,_,l,h){let d;return h?(d=[_,l,h(_,l),1],a.transformMat4(d,d,c)):(d=[_,l,0,1],ye(d,d,c)),{point:new a.pointGeometry((d[0]/d[3]+1)/2*this.transform.width+ot,(-d[1]/d[3]+1)/2*this.transform.height+ot),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}}isOffscreen(c,_,l,h){return l<ot||c>=this.screenRightBoundary||h<ot||_>this.screenBottomBoundary}isInsideGrid(c,_,l,h){return l>=0&&c<this.gridRightBoundary&&h>=0&&_<this.gridBottomBoundary}getViewportMatrix(){const c=a.identity([]);return a.translate(c,c,[-100,-100,0]),c}}function Lt(L,c,_){return c*(a.EXTENT/(L.tileSize*Math.pow(2,_-L.tileID.overscaledZ)))}class qt{constructor(c,_,l,h){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?_:-_))):h&&l?1:0,this.placed=l}isHidden(){return this.opacity===0&&!this.placed}}class Kt{constructor(c,_,l,h,d){this.text=new qt(c?c.text:null,_,l,d),this.icon=new qt(c?c.icon:null,_,h,d)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class En{constructor(c,_,l){this.text=c,this.icon=_,this.skipFade=l}}class hn{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class an{constructor(c,_,l,h,d){this.bucketInstanceId=c,this.featureIndex=_,this.sourceLayerIndex=l,this.bucketIndex=h,this.tileID=d}}class Dn{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const _=++this.maxGroupID;this.collisionGroups[c]={ID:_,predicate:l=>l.collisionGroupID===_}}return this.collisionGroups[c]}}function xr(L,c,_,l,h){const{horizontalAlign:d,verticalAlign:x}=a.getAnchorAlignment(L),b=-(d-.5)*c,S=-(x-.5)*_,P=a.evaluateVariableOffset(L,l);return new a.pointGeometry(b+P[0]*h,S+P[1]*h)}function fn(L,c,_,l,h,d){const{x1:x,x2:b,y1:S,y2:P,anchorPointX:B,anchorPointY:V}=L,$=new a.pointGeometry(c,_);return l&&$._rotate(h?d:-d),{x1:x+$.x,y1:S+$.y,x2:b+$.x,y2:P+$.y,anchorPointX:B,anchorPointY:V}}class K{constructor(c,_,l,h,d){this.transform=c.clone(),this.terrain=_,this.collisionIndex=new gt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new Dn(h),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,_,l,h){const d=l.getBucket(_),x=l.latestFeatureIndex;if(!d||!x||_.id!==d.layerIds[0])return;const b=l.collisionBoxArray,S=d.layers[0].layout,P=Math.pow(2,this.transform.zoom-l.tileID.overscaledZ),B=l.tileSize/a.EXTENT,V=this.transform.calculatePosMatrix(l.tileID.toUnwrapped()),$=S.get("text-pitch-alignment")==="map",X=S.get("text-rotation-alignment")==="map",oe=Lt(l,1,this.transform.zoom),ne=is(V,$,X,this.transform,oe);let ue=null;if($){const Ie=Ai(V,$,X,this.transform,oe);ue=a.multiply([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[d.bucketInstanceId]=new an(d.bucketInstanceId,x,d.sourceLayerIndex,d.index,l.tileID);const Te={bucket:d,layout:S,posMatrix:V,textLabelPlaneMatrix:ne,labelToScreenMatrix:ue,scale:P,textPixelRatio:B,holdingForFade:l.holdingForFade(),collisionBoxArray:b,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(d.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(d.sourceID)};if(h)for(const Ie of d.sortKeyRanges){const{sortKey:we,symbolInstanceStart:$e,symbolInstanceEnd:Me}=Ie;c.push({sortKey:we,symbolInstanceStart:$e,symbolInstanceEnd:Me,parameters:Te})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:d.symbolInstances.length,parameters:Te})}attemptAnchorPlacement(c,_,l,h,d,x,b,S,P,B,V,$,X,oe,ne,ue){const Te=[$.textOffset0,$.textOffset1],Ie=xr(c,l,h,Te,d),we=this.collisionIndex.placeCollisionBox(fn(_,Ie.x,Ie.y,x,b,this.transform.angle),V,S,P,B.predicate,ue);if((!ne||this.collisionIndex.placeCollisionBox(fn(ne,Ie.x,Ie.y,x,b,this.transform.angle),V,S,P,B.predicate,ue).box.length!==0)&&we.box.length>0){let $e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID].text&&($e=this.prevPlacement.variableOffsets[$.crossTileID].anchor),$.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[$.crossTileID]={textOffset:Te,width:l,height:h,anchor:c,textBoxScale:d,prevAnchor:$e},this.markUsedJustification(X,c,$,oe),X.allowVerticalPlacement&&(this.markUsedOrientation(X,oe,$),this.placedOrientations[$.crossTileID]=oe),{shift:Ie,placedGlyphBoxes:we}}}placeLayerBucketPart(c,_,l){const{bucket:h,layout:d,posMatrix:x,textLabelPlaneMatrix:b,labelToScreenMatrix:S,textPixelRatio:P,holdingForFade:B,collisionBoxArray:V,partiallyEvaluatedTextSize:$,collisionGroup:X}=c.parameters,oe=d.get("text-optional"),ne=d.get("icon-optional"),ue=a.getOverlapMode(d,"text-overlap","text-allow-overlap"),Te=ue==="always",Ie=a.getOverlapMode(d,"icon-overlap","icon-allow-overlap"),we=Ie==="always",$e=d.get("text-rotation-alignment")==="map",Me=d.get("text-pitch-alignment")==="map",je=d.get("icon-text-fit")!=="none",be=d.get("symbol-z-order")==="viewport-y",m=Te&&(we||!h.hasIconData()||ne),g=we&&(Te||!h.hasTextData()||oe);!h.collisionArrays&&V&&h.deserializeCollisionBoxes(V);const v=(E,I)=>{if(_[E.crossTileID])return;if(B)return void(this.placements[E.crossTileID]=new En(!1,!1,!1));let R=!1,O=!1,N=!0,Q=null,te={box:null,offscreen:null},le={box:null,offscreen:null},pe=null,Be=null,He=null,ze=0,Xe=0,dt=0;I.textFeatureIndex?ze=I.textFeatureIndex:E.useRuntimeCollisionCircles&&(ze=E.featureIndex),I.verticalTextFeatureIndex&&(Xe=I.verticalTextFeatureIndex);const ct=this.retainedQueryData[h.bucketInstanceId].tileID,it=this.terrain?(Ft,mt)=>this.terrain.getElevation(ct,Ft,mt):null;for(const Ft of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const mt=I[Ft];mt&&(mt.elevation=it?it(mt.anchorPointX,mt.anchorPointY):0)}const st=I.textBox;if(st){const Ft=Et=>{let Nn=a.WritingMode.horizontal;if(h.allowVerticalPlacement&&!Et&&this.prevPlacement){const zn=this.prevPlacement.placedOrientations[E.crossTileID];zn&&(this.placedOrientations[E.crossTileID]=zn,Nn=zn,this.markUsedOrientation(h,Nn,E))}return Nn},mt=(Et,Nn)=>{if(h.allowVerticalPlacement&&E.numVerticalGlyphVertices>0&&I.verticalTextBox){for(const zn of h.writingModes)if(zn===a.WritingMode.vertical?(te=Nn(),le=te):te=Et(),te&&te.box&&te.box.length)break}else te=Et()};if(d.get("text-variable-anchor")){let Et=d.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[E.crossTileID]){const Sn=this.prevPlacement.variableOffsets[E.crossTileID];Et.indexOf(Sn.anchor)>0&&(Et=Et.filter(kn=>kn!==Sn.anchor),Et.unshift(Sn.anchor))}const Nn=(Sn,kn,On)=>{const Wn=Sn.x2-Sn.x1,_r=Sn.y2-Sn.y1,Un=E.textBoxScale,zr=je&&Ie==="never"?kn:null;let ii={box:[],offscreen:!1};const il=ue!=="never"?2*Et.length:Et.length;for(let mu=0;mu<il;++mu){const M0=this.attemptAnchorPlacement(Et[mu%Et.length],Sn,Wn,_r,Un,$e,Me,P,x,X,mu>=Et.length?ue:"never",E,h,On,zr,it);if(M0&&(ii=M0.placedGlyphBoxes,ii&&ii.box&&ii.box.length)){R=!0,Q=M0.shift;break}}return ii};mt(()=>Nn(st,I.iconBox,a.WritingMode.horizontal),()=>{const Sn=I.verticalTextBox;return h.allowVerticalPlacement&&!(te&&te.box&&te.box.length)&&E.numVerticalGlyphVertices>0&&Sn?Nn(Sn,I.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),te&&(R=te.box,N=te.offscreen);const zn=Ft(te&&te.box);if(!R&&this.prevPlacement){const Sn=this.prevPlacement.variableOffsets[E.crossTileID];Sn&&(this.variableOffsets[E.crossTileID]=Sn,this.markUsedJustification(h,Sn.anchor,E,zn))}}else{const Et=(Nn,zn)=>{const Sn=this.collisionIndex.placeCollisionBox(Nn,ue,P,x,X.predicate,it);return Sn&&Sn.box&&Sn.box.length&&(this.markUsedOrientation(h,zn,E),this.placedOrientations[E.crossTileID]=zn),Sn};mt(()=>Et(st,a.WritingMode.horizontal),()=>{const Nn=I.verticalTextBox;return h.allowVerticalPlacement&&E.numVerticalGlyphVertices>0&&Nn?Et(Nn,a.WritingMode.vertical):{box:null,offscreen:null}}),Ft(te&&te.box&&te.box.length)}}if(pe=te,R=pe&&pe.box&&pe.box.length>0,N=pe&&pe.offscreen,E.useRuntimeCollisionCircles){const Ft=h.text.placedSymbolArray.get(E.centerJustifiedTextSymbolIndex),mt=a.evaluateSizeForFeature(h.textSizeData,$,Ft),Et=d.get("text-padding");Be=this.collisionIndex.placeCollisionCircles(ue,Ft,h.lineVertexArray,h.glyphOffsetArray,mt,x,b,S,l,Me,X.predicate,E.collisionCircleDiameter,Et,it),Be.circles.length&&Be.collisionDetected&&!l&&a.warnOnce("Collisions detected, but collision boxes are not shown"),R=Te||Be.circles.length>0&&!Be.collisionDetected,N=N&&Be.offscreen}if(I.iconFeatureIndex&&(dt=I.iconFeatureIndex),I.iconBox){const Ft=mt=>{const Et=je&&Q?fn(mt,Q.x,Q.y,$e,Me,this.transform.angle):mt;return this.collisionIndex.placeCollisionBox(Et,Ie,P,x,X.predicate,it)};le&&le.box&&le.box.length&&I.verticalIconBox?(He=Ft(I.verticalIconBox),O=He.box.length>0):(He=Ft(I.iconBox),O=He.box.length>0),N=N&&He.offscreen}const Je=oe||E.numHorizontalGlyphVertices===0&&E.numVerticalGlyphVertices===0,Ht=ne||E.numIconVertices===0;if(Je||Ht?Ht?Je||(O=O&&R):R=O&&R:O=R=O&&R,R&&pe&&pe.box&&this.collisionIndex.insertCollisionBox(pe.box,ue,d.get("text-ignore-placement"),h.bucketInstanceId,le&&le.box&&Xe?Xe:ze,X.ID),O&&He&&this.collisionIndex.insertCollisionBox(He.box,Ie,d.get("icon-ignore-placement"),h.bucketInstanceId,dt,X.ID),Be&&(R&&this.collisionIndex.insertCollisionCircles(Be.circles,ue,d.get("text-ignore-placement"),h.bucketInstanceId,ze,X.ID),l)){const Ft=h.bucketInstanceId;let mt=this.collisionCircleArrays[Ft];mt===void 0&&(mt=this.collisionCircleArrays[Ft]=new hn);for(let Et=0;Et<Be.circles.length;Et+=4)mt.circles.push(Be.circles[Et+0]),mt.circles.push(Be.circles[Et+1]),mt.circles.push(Be.circles[Et+2]),mt.circles.push(Be.collisionDetected?1:0)}if(E.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(h.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[E.crossTileID]=new En(R||m,O||g,N||h.justReloaded),_[E.crossTileID]=!0};if(be){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const E=h.getSortedSymbolIndexes(this.transform.angle);for(let I=E.length-1;I>=0;--I){const R=E[I];v(h.symbolInstances.get(R),h.collisionArrays[R])}}else for(let E=c.symbolInstanceStart;E<c.symbolInstanceEnd;E++)v(h.symbolInstances.get(E),h.collisionArrays[E]);if(l&&h.bucketInstanceId in this.collisionCircleArrays){const E=this.collisionCircleArrays[h.bucketInstanceId];a.invert(E.invProjMatrix,x),E.viewportMatrix=this.collisionIndex.getViewportMatrix()}h.justReloaded=!1}markUsedJustification(c,_,l,h){let d;d=h===a.WritingMode.vertical?l.verticalPlacedTextSymbolIndex:{left:l.leftJustifiedTextSymbolIndex,center:l.centerJustifiedTextSymbolIndex,right:l.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(_)];const x=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex,l.verticalPlacedTextSymbolIndex];for(const b of x)b>=0&&(c.text.placedSymbolArray.get(b).crossTileID=d>=0&&b!==d?0:l.crossTileID)}markUsedOrientation(c,_,l){const h=_===a.WritingMode.horizontal||_===a.WritingMode.horizontalOnly?_:0,d=_===a.WritingMode.vertical?_:0,x=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex];for(const b of x)c.text.placedSymbolArray.get(b).placedOrientation=h;l.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).placedOrientation=d)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const _=this.prevPlacement;let l=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;const h=_?_.symbolFadeChange(c):1,d=_?_.opacities:{},x=_?_.variableOffsets:{},b=_?_.placedOrientations:{};for(const S in this.placements){const P=this.placements[S],B=d[S];B?(this.opacities[S]=new Kt(B,h,P.text,P.icon),l=l||P.text!==B.text.placed||P.icon!==B.icon.placed):(this.opacities[S]=new Kt(null,h,P.text,P.icon,P.skipFade),l=l||P.text||P.icon)}for(const S in d){const P=d[S];if(!this.opacities[S]){const B=new Kt(P,h,!1,!1);B.isHidden()||(this.opacities[S]=B,l=l||P.text.placed||P.icon.placed)}}for(const S in x)this.variableOffsets[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.variableOffsets[S]=x[S]);for(const S in b)this.placedOrientations[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.placedOrientations[S]=b[S]);if(_&&_.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");l?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:c)}updateLayerOpacities(c,_){const l={};for(const h of _){const d=h.getBucket(c);d&&h.latestFeatureIndex&&c.id===d.layerIds[0]&&this.updateBucketOpacities(d,l,h.collisionBoxArray)}}updateBucketOpacities(c,_,l){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const h=c.layers[0].layout,d=new Kt(null,0,!1,!1,!0),x=h.get("text-allow-overlap"),b=h.get("icon-allow-overlap"),S=h.get("text-variable-anchor"),P=h.get("text-rotation-alignment")==="map",B=h.get("text-pitch-alignment")==="map",V=h.get("icon-text-fit")!=="none",$=new Kt(null,0,x&&(b||!c.hasIconData()||h.get("icon-optional")),b&&(x||!c.hasTextData()||h.get("text-optional")),!0);!c.collisionArrays&&l&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(l);const X=(oe,ne,ue)=>{for(let Te=0;Te<ne/4;Te++)oe.opacityVertexArray.emplaceBack(ue)};for(let oe=0;oe<c.symbolInstances.length;oe++){const ne=c.symbolInstances.get(oe),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:Te,crossTileID:Ie}=ne;let we=this.opacities[Ie];_[Ie]?we=d:we||(we=$,this.opacities[Ie]=we),_[Ie]=!0;const $e=ne.numIconVertices>0,Me=this.placedOrientations[ne.crossTileID],je=Me===a.WritingMode.vertical,be=Me===a.WritingMode.horizontal||Me===a.WritingMode.horizontalOnly;if(ue>0||Te>0){const m=Le(we.text);X(c.text,ue,je?Ze:m),X(c.text,Te,be?Ze:m);const g=we.text.isHidden();[ne.rightJustifiedTextSymbolIndex,ne.centerJustifiedTextSymbolIndex,ne.leftJustifiedTextSymbolIndex].forEach(I=>{I>=0&&(c.text.placedSymbolArray.get(I).hidden=g||je?1:0)}),ne.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(ne.verticalPlacedTextSymbolIndex).hidden=g||be?1:0);const v=this.variableOffsets[ne.crossTileID];v&&this.markUsedJustification(c,v.anchor,ne,Me);const E=this.placedOrientations[ne.crossTileID];E&&(this.markUsedJustification(c,"left",ne,E),this.markUsedOrientation(c,E,ne))}if($e){const m=Le(we.icon),g=!(V&&ne.verticalPlacedIconSymbolIndex&&je);ne.placedIconSymbolIndex>=0&&(X(c.icon,ne.numIconVertices,g?m:Ze),c.icon.placedSymbolArray.get(ne.placedIconSymbolIndex).hidden=we.icon.isHidden()),ne.verticalPlacedIconSymbolIndex>=0&&(X(c.icon,ne.numVerticalIconVertices,g?Ze:m),c.icon.placedSymbolArray.get(ne.verticalPlacedIconSymbolIndex).hidden=we.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const m=c.collisionArrays[oe];if(m){let g=new a.pointGeometry(0,0);if(m.textBox||m.verticalTextBox){let E=!0;if(S){const I=this.variableOffsets[Ie];I?(g=xr(I.anchor,I.width,I.height,I.textOffset,I.textBoxScale),P&&g._rotate(B?this.transform.angle:-this.transform.angle)):E=!1}m.textBox&&W(c.textCollisionBox.collisionVertexArray,we.text.placed,!E||je,g.x,g.y),m.verticalTextBox&&W(c.textCollisionBox.collisionVertexArray,we.text.placed,!E||be,g.x,g.y)}const v=!!(!be&&m.verticalIconBox);m.iconBox&&W(c.iconCollisionBox.collisionVertexArray,we.icon.placed,v,V?g.x:0,V?g.y:0),m.verticalIconBox&&W(c.iconCollisionBox.collisionVertexArray,we.icon.placed,!v,V?g.x:0,V?g.y:0)}}}if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);if(c.bucketInstanceId in this.collisionCircleArrays){const oe=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=oe.invProjMatrix,c.placementViewportMatrix=oe.viewportMatrix,c.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,_){const l=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*l>c}setStale(){this.stale=!0}}function W(L,c,_,l,h){L.emplaceBack(c?1:0,_?1:0,l||0,h||0),L.emplaceBack(c?1:0,_?1:0,l||0,h||0),L.emplaceBack(c?1:0,_?1:0,l||0,h||0),L.emplaceBack(c?1:0,_?1:0,l||0,h||0)}const ee=Math.pow(2,25),ce=Math.pow(2,24),o=Math.pow(2,17),G=Math.pow(2,16),De=Math.pow(2,9),ke=Math.pow(2,8),Pe=Math.pow(2,1);function Le(L){if(L.opacity===0&&!L.placed)return 0;if(L.opacity===1&&L.placed)return 4294967295;const c=L.placed?1:0,_=Math.floor(127*L.opacity);return _*ee+c*ce+_*o+c*G+_*De+c*ke+_*Pe+c}const Ze=0;class lt{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,_,l,h,d){const x=this._bucketParts;for(;this._currentTileIndex<c.length;)if(_.getBucketParts(x,h,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,d())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,x.sort((b,S)=>b.sortKey-S.sortKey));this._currentPartIndex<x.length;)if(_.placeLayerBucketPart(x[this._currentPartIndex],this._seenCrossTileIDs,l),this._currentPartIndex++,d())return!0;return!1}}class Qe{constructor(c,_,l,h,d,x,b,S){this.placement=new K(c,_,x,b,S),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=d,this._done=!1}isDone(){return this._done}continuePlacement(c,_,l){const h=a.exported.now(),d=()=>{const x=a.exported.now()-h;return!this._forceFullPlacement&&x>2};for(;this._currentPlacementIndex>=0;){const x=_[c[this._currentPlacementIndex]],b=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=b)&&(!x.maxzoom||x.maxzoom>b)){if(this._inProgressLayer||(this._inProgressLayer=new lt(x)),this._inProgressLayer.continuePlacement(l[x.source],this.placement,this._showCollisionBoxes,x,d))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const ft=512/a.EXTENT/2;class vt{constructor(c,_,l){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=l;for(let h=0;h<_.length;h++){const d=_.get(h),x=d.key;this.indexedSymbolInstances[x]||(this.indexedSymbolInstances[x]=[]),this.indexedSymbolInstances[x].push({crossTileID:d.crossTileID,coord:this.getScaledCoordinates(d,c)})}}getScaledCoordinates(c,_){const l=ft/Math.pow(2,_.canonical.z-this.tileID.canonical.z);return{x:Math.floor((_.canonical.x*a.EXTENT+c.anchorX)*l),y:Math.floor((_.canonical.y*a.EXTENT+c.anchorY)*l)}}findMatches(c,_,l){const h=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z);for(let d=0;d<c.length;d++){const x=c.get(d);if(x.crossTileID)continue;const b=this.indexedSymbolInstances[x.key];if(!b)continue;const S=this.getScaledCoordinates(x,_);for(const P of b)if(Math.abs(P.coord.x-S.x)<=h&&Math.abs(P.coord.y-S.y)<=h&&!l[P.crossTileID]){l[P.crossTileID]=!0,x.crossTileID=P.crossTileID;break}}}}class wt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Jt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const _=Math.round((c-this.lng)/360);if(_!==0)for(const l in this.indexes){const h=this.indexes[l],d={};for(const x in h){const b=h[x];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+_),d[b.tileID.key]=b}this.indexes[l]=d}this.lng=c}addBucket(c,_,l){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let d=0;d<_.symbolInstances.length;d++)_.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const h=this.usedCrossTileIDs[c.overscaledZ];for(const d in this.indexes){const x=this.indexes[d];if(Number(d)>c.overscaledZ)for(const b in x){const S=x[b];S.tileID.isChildOf(c)&&S.findMatches(_.symbolInstances,c,h)}else{const b=x[c.scaledTo(Number(d)).key];b&&b.findMatches(_.symbolInstances,c,h)}}for(let d=0;d<_.symbolInstances.length;d++){const x=_.symbolInstances.get(d);x.crossTileID||(x.crossTileID=l.generate(),h[x.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new vt(c,_.symbolInstances,_.bucketInstanceId),!0}removeBucketCrossTileIDs(c,_){for(const l in _.indexedSymbolInstances)for(const h of _.indexedSymbolInstances[l])delete this.usedCrossTileIDs[c][h.crossTileID]}removeStaleBuckets(c){let _=!1;for(const l in this.indexes){const h=this.indexes[l];for(const d in h)c[h[d].bucketInstanceId]||(this.removeBucketCrossTileIDs(l,h[d]),delete h[d],_=!0)}return _}}class Ut{constructor(){this.layerIndexes={},this.crossTileIDs=new wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,_,l){let h=this.layerIndexes[c.id];h===void 0&&(h=this.layerIndexes[c.id]=new Jt);let d=!1;const x={};h.handleWrapJump(l);for(const b of _){const S=b.getBucket(c);S&&c.id===S.layerIds[0]&&(S.bucketInstanceId||(S.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(b.tileID,S,this.crossTileIDs)&&(d=!0),x[S.bucketInstanceId]=!0)}return h.removeStaleBuckets(x)&&(d=!0),d}pruneUnusedLayers(c){const _={};c.forEach(l=>{_[l]=!0});for(const l in this.layerIndexes)_[l]||delete this.layerIndexes[l]}}var xn=a.createLayout([{name:"a_pos",type:"Int16",components:2}]);class nn extends a.Evented{constructor(c){super(),this.sourceCache=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=c._cache.max,c.usedForTerrain=!0,c.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const c in this._tiles){const _=this._tiles[c];_.textures.forEach(l=>l.destroy()),_.textures=[]}}update(c,_){this.sourceCache.update(c,_),this._renderableTilesKeys=[];for(const l of c.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:_}))this._renderableTilesKeys.push(l.key),this._tiles[l.key]||(l.posMatrix=new Float64Array(16),a.ortho(l.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[l.key]=new ir(l,this.tileSize))}removeOutdated(c){const _={};this.renderHistory=this.renderHistory.filter((l,h)=>this.renderHistory.indexOf(l)===h).slice(0,this.renderHistorySize);for(const l of this._renderableTilesKeys)_[l]=!0;for(const l of this.renderHistory)_[l]=!0;for(const l in this._tiles)_[l]||(this._tiles[l].clearTextures(c),delete this._tiles[l])}getRenderableTiles(){return this._renderableTilesKeys.map(c=>this.getTileByID(c))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c){const _={};for(const l of this._renderableTilesKeys){const h=this._tiles[l].tileID;if(h.canonical.equals(c.canonical)){const d=c.clone();d.posMatrix=new Float64Array(16),a.ortho(d.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),_[l]=d}else if(h.canonical.isChildOf(c.canonical)){const d=c.clone();d.posMatrix=new Float64Array(16);const x=h.canonical.z-c.canonical.z,b=h.canonical.x-(h.canonical.x>>x<<x),S=h.canonical.y-(h.canonical.y>>x<<x),P=a.EXTENT>>x;a.ortho(d.posMatrix,0,P,0,P,0,1),a.translate(d.posMatrix,d.posMatrix,[-b*P,-S*P,0]),_[l]=d}else if(c.canonical.isChildOf(h.canonical)){const d=c.clone();d.posMatrix=new Float64Array(16);const x=c.canonical.z-h.canonical.z,b=c.canonical.x-(c.canonical.x>>x<<x),S=c.canonical.y-(c.canonical.y>>x<<x),P=a.EXTENT>>x;a.ortho(d.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(d.posMatrix,d.posMatrix,[b*P,S*P,0]),a.scale(d.posMatrix,d.posMatrix,[1/2**x,1/2**x,0]),_[l]=d}}return _}getSourceTile(c,_){const l=this.sourceCache._source;let h=c.overscaledZ-this.deltaZoom;if(h>l.maxzoom&&(h=l.maxzoom),h<l.minzoom)return null;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(h).key);let d=this.sourceCache.getTileByID(this._sourceTileCache[c.key]);if((!d||!d.dem)&&_)for(;h>=l.minzoom&&(!d||!d.dem);)d=this.sourceCache.getTileByID(c.scaledTo(h--).key);return d}tilesAfterTime(c=Date.now()){return Object.values(this._tiles).filter(_=>_.timeLoaded>=c)}}class pn{constructor(c,_,l){this.style=c,this.sourceCache=new nn(_),this.options=l,this.exaggeration=typeof l.exaggeration=="number"?l.exaggeration:1,this.elevationOffset=typeof l.elevationOffset=="number"?l.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(c,_,l,h=a.EXTENT){if(!(_>=0&&_<h&&l>=0&&l<h))return this.elevationOffset;let d=0;const x=this.getTerrainData(c);if(x.tile&&x.tile.dem){const b=a.transformMat4$1([],[_/h*a.EXTENT,l/h*a.EXTENT],x.u_terrain_matrix),S=[b[0]*x.tile.dem.dim,b[1]*x.tile.dem.dim],P=[Math.floor(S[0]),Math.floor(S[1])],B=x.tile.dem.get(P[0],P[1]),V=x.tile.dem.get(P[0],P[1]+1),$=x.tile.dem.get(P[0]+1,P[1]),X=x.tile.dem.get(P[0]+1,P[1]+1);d=a.number(a.number(B,V,S[0]-P[0]),a.number($,X,S[0]-P[0]),S[1]-P[1])}return d}rememberForRerender(c,_){for(const l in this.sourceCache._tiles){const h=this.sourceCache._tiles[l];(h.tileID.equals(_)||h.tileID.isChildOf(_))&&(c===this.sourceCache.sourceCache.id&&(h.timeLoaded=Date.now()),this._rerender[c]=this._rerender[c]||{},this._rerender[c][h.tileID.key]=!0)}}needsRerender(c,_){return this._rerender[c]&&this._rerender[c][_.key]}clearRerenderCache(){this._rerender={}}getElevation(c,_,l,h=a.EXTENT){return(this.getDEMElevation(c,_,l,h)+this.elevationOffset)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const h=this.style.map.painter.context,d=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(h,d,h.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(h,new a.RGBAImage({width:1,height:1}),h.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const _=this.sourceCache.getSourceTile(c,!0);if(_&&_.dem&&(!_.demTexture||_.needsTerrainPrepare)){const h=this.style.map.painter.context;_.demTexture=this.style.map.painter.getTileTexture(_.dem.stride),_.demTexture?_.demTexture.update(_.dem.getPixels(),{premultiply:!1}):_.demTexture=new q(h,_.dem.getPixels(),h.gl.RGBA,{premultiply:!1}),_.demTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),_.needsTerrainPrepare=!1}const l=_&&_+_.tileID.key+c.key;if(l&&!this._demMatrixCache[l]){const h=this.sourceCache.sourceCache._source.maxzoom;let d=c.canonical.z-_.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=h?d=c.canonical.z-h:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const x=c.canonical.x-(c.canonical.x>>d<<d),b=c.canonical.y-(c.canonical.y>>d<<d),S=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<d),1/(a.EXTENT<<d),0]);a.translate(S,S,[x*a.EXTENT,b*a.EXTENT,0]),this._demMatrixCache[c.key]={matrix:S,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:_&&_.dem&&_.dem.dim||1,u_terrain_matrix:l?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:_&&_.dem&&_.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(_&&_.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:_}}getRTTFramebuffer(){const c=this.style.map.painter;if(!this._rttFramebuffer){const _=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=c.context.createFramebuffer(_,_,!0),this._rttFramebuffer.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,_,_))}return this._rttFramebuffer}getFramebuffer(c){const _=this.style.map.painter,l=_.width/devicePixelRatio,h=_.height/devicePixelRatio;return!this._fbo||this._fbo.width===l&&this._fbo.height===h||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(_.context,{width:l,height:h,data:null},_.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(_.context.gl.NEAREST,_.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(_.context,{width:l,height:h,data:null},_.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(_.context.gl.NEAREST,_.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=_.context.createFramebuffer(l,h,!0),this._fbo.depthAttachment.set(_.context.createRenderbuffer(_.context.gl.DEPTH_COMPONENT16,l,h))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const _=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let d=0,x=0;d<this._coordsTextureSize;d++)for(let b=0;b<this._coordsTextureSize;b++,x+=4)_[x+0]=255&b,_[x+1]=255&d,_[x+2]=b>>8<<4|d>>8,_[x+3]=0;const l=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(_.buffer)),h=new q(c,l,c.gl.RGBA,{premultiply:!1});return h.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=h,h}pointCoordinate(c){const _=new Uint8Array(4),l=this.style.map.painter,h=l.context,d=h.gl;h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(c.x,l.height/devicePixelRatio-c.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,_),h.bindFramebuffer.set(null);const x=_[0]+(_[2]>>4<<8),b=_[1]+((15&_[2])<<8),S=this.coordsIndex[255-_[3]],P=S&&this.sourceCache.getTileByID(S);if(!P)return null;const B=this._coordsTextureSize,V=(1<<P.tileID.canonical.z)*B;return new a.MercatorCoordinate((P.tileID.canonical.x*B+x)/V,(P.tileID.canonical.y*B+b)/V,this.getElevation(P.tileID,x,b,B))}getTerrainMesh(){if(this._mesh)return this._mesh;const c=this.style.map.painter.context,_=new a.PosArray,l=new a.TriangleIndexArray,h=this.meshSize,d=a.EXTENT/h,x=h*h;for(let b=0;b<=h;b++)for(let S=0;S<=h;S++)_.emplaceBack(S*d,b*d);for(let b=0;b<x;b+=h+1)for(let S=0;S<h;S++)l.emplaceBack(S+b,h+S+b+1,h+S+b+2),l.emplaceBack(S+b,h+S+b+2,S+b+1);return this._mesh={indexBuffer:c.createIndexBuffer(l),vertexBuffer:c.createVertexBuffer(_,xn.members),segments:a.SegmentVector.simpleSegment(0,0,_.length,l.length)},this._mesh}getMinMaxElevation(c){const _=this.getTerrainData(c).tile,l={minElevation:null,maxElevation:null};return _&&_.dem&&(l.minElevation=(_.dem.min+this.elevationOffset)*this.exaggeration,l.maxElevation=(_.dem.max+this.elevationOffset)*this.exaggeration),l}}const Bn=(L,c)=>a.emitValidationErrors(L,c&&c.filter(_=>_.identifier!=="source.canvas")),Vt=a.pick(Zn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ue=a.pick(Zn,["setCenter","setZoom","setBearing","setPitch"]),Dt=function(){const L={},c=a.spec.$version;for(const _ in a.spec.$root){const l=a.spec.$root[_];if(l.required){let h=null;h=_==="version"?c:l.type==="array"?[]:{},h!=null&&(L[_]=h)}}return L}();class Ce extends a.Evented{constructor(c,_={}){super(),this.map=c,this.dispatcher=new Ke(gr(),this),this.imageManager=new Z,this.imageManager.setEventedParent(this),this.glyphManager=new _e(c._requestManager,_.localIdeographFontFamily),this.lineAtlas=new qe(256,512),this.crossTileSymbolIndex=new Ut,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const l=this;this._rtlTextPluginCallback=Ce.registerForPluginStateChange(h=>{l.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:h.pluginStatus,pluginURL:h.pluginURL},(d,x)=>{if(a.triggerPluginCompletionEvent(d),x&&x.every(b=>b))for(const b in l.sourceCaches)l.sourceCaches[b].reload()})}),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const d=this.sourceCaches[h.sourceId];if(!d)return;const x=d.getSource();if(x&&x.vectorLayerIds)for(const b in this._layers){const S=this._layers[b];S.source===x.id&&this._validateLayer(S)}})}loadURL(c,_={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const l=typeof _.validate!="boolean"||_.validate,h=this.map._requestManager.transformRequest(c,a.ResourceType.Style);this._request=a.getJSON(h,(d,x)=>{this._request=null,d?this.fire(new a.ErrorEvent(d)):x&&this._load(x,l)})}loadJSON(c,_={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(c,_.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Dt,!1)}_load(c,_){if(_&&Bn(this,a.validateStyle(c)))return;this._loaded=!0,this.stylesheet=c;for(const h in c.sources)this.addSource(h,c.sources[h],{validate:!1});c.sprite?this._loadSprite(c.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(c.glyphs);const l=Zr(this.stylesheet.layers);this._order=l.map(h=>h.id),this._layers={},this._serializedLayers={};for(let h of l)h=a.createStyleLayer(h),h.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=h,this._serializedLayers[h.id]=h.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new We(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(c){this._spriteRequest=function(_,l,h,d){let x,b,S;const P=h>1?"@2x":"";let B=a.getJSON(l.transformRequest(l.normalizeSpriteURL(_,P,".json"),a.ResourceType.SpriteJSON),(X,oe)=>{B=null,S||(S=X,x=oe,$())}),V=a.getImage(l.transformRequest(l.normalizeSpriteURL(_,P,".png"),a.ResourceType.SpriteImage),(X,oe)=>{V=null,S||(S=X,b=oe,$())});function $(){if(S)d(S);else if(x&&b){const X=a.exported.getImageData(b),oe={};for(const ne in x){const{width:ue,height:Te,x:Ie,y:we,sdf:$e,pixelRatio:Me,stretchX:je,stretchY:be,content:m}=x[ne],g=new a.RGBAImage({width:ue,height:Te});a.RGBAImage.copy(X,g,{x:Ie,y:we},{x:0,y:0},{width:ue,height:Te}),oe[ne]={data:g,pixelRatio:Me,sdf:$e,stretchX:je,stretchY:be,content:m}}d(null,oe)}}return{cancel(){B&&(B.cancel(),B=null),V&&(V.cancel(),V=null)}}}(c,this.map._requestManager,this.map.getPixelRatio(),(_,l)=>{if(this._spriteRequest=null,_)this.fire(new a.ErrorEvent(_));else if(l)for(const h in l)this.imageManager.addImage(h,l[h]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(c){const _=this.sourceCaches[c.source];if(!_)return;const l=c.sourceLayer;if(!l)return;const h=_.getSource();(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(l)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${l}" does not exist on source "${h.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const _=[];for(const l of c){const h=this._layers[l];h.type!=="custom"&&_.push(h.serialize())}return _}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const _=this._changed;if(this._changed){const h=Object.keys(this._updatedLayers),d=Object.keys(this._removedLayers);(h.length||d.length)&&this._updateWorkerLayers(h,d);for(const x in this._updatedSources){const b=this._updatedSources[x];if(b==="reload")this._reloadSource(x);else{if(b!=="clear")throw new Error(`Invalid action ${b}`);this._clearSource(x)}}this._updateTilesForChangedImages();for(const x in this._updatedPaintProps)this._layers[x].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}const l={};for(const h in this.sourceCaches){const d=this.sourceCaches[h];l[h]=d.used,d.used=!1}for(const h of this._order){const d=this._layers[h];d.recalculate(c,this._availableImages),!d.isHidden(c.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}for(const h in l){const d=this.sourceCaches[h];l[h]!==d.used&&d.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:h}))}this.light.recalculate(c),this.z=c.zoom,_&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const _ in this.sourceCaches)this.sourceCaches[_].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,_){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:_})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(c){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),c){const _=this.sourceCaches[c.source];if(!_)throw new Error(`cannot load terrain, because there exists no source with ID: ${c.source}`);this.terrain=new pn(this,_,c),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=l=>{l.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=l=>{l.tile&&(l.sourceId===c.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(l.sourceId,l.tile.tileID)):l.source.type==="geojson"&&this.terrain.rememberForRerender(l.sourceId,l.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new a.Event("terrain",{terrain:c}))}setState(c){if(this._checkLoaded(),Bn(this,a.validateStyle(c)))return!1;(c=a.clone$1(c)).layers=Zr(c.layers);const _=function(h,d){if(!h)return[{command:Zn.setStyle,args:[d]}];let x=[];try{if(!C(h.version,d.version))return[{command:Zn.setStyle,args:[d]}];C(h.center,d.center)||x.push({command:Zn.setCenter,args:[d.center]}),C(h.zoom,d.zoom)||x.push({command:Zn.setZoom,args:[d.zoom]}),C(h.bearing,d.bearing)||x.push({command:Zn.setBearing,args:[d.bearing]}),C(h.pitch,d.pitch)||x.push({command:Zn.setPitch,args:[d.pitch]}),C(h.sprite,d.sprite)||x.push({command:Zn.setSprite,args:[d.sprite]}),C(h.glyphs,d.glyphs)||x.push({command:Zn.setGlyphs,args:[d.glyphs]}),C(h.transition,d.transition)||x.push({command:Zn.setTransition,args:[d.transition]}),C(h.light,d.light)||x.push({command:Zn.setLight,args:[d.light]});const b={},S=[];(function(B,V,$,X){let oe;for(oe in V=V||{},B=B||{})Object.prototype.hasOwnProperty.call(B,oe)&&(Object.prototype.hasOwnProperty.call(V,oe)||$n(oe,$,X));for(oe in V)Object.prototype.hasOwnProperty.call(V,oe)&&(Object.prototype.hasOwnProperty.call(B,oe)?C(B[oe],V[oe])||(B[oe].type==="geojson"&&V[oe].type==="geojson"&&rs(B,V,oe)?$.push({command:Zn.setGeoJSONSourceData,args:[oe,V[oe].data]}):Ti(oe,V,$,X)):Ei(oe,V,$))})(h.sources,d.sources,S,b);const P=[];h.layers&&h.layers.forEach(B=>{b[B.source]?x.push({command:Zn.removeLayer,args:[B.id]}):P.push(B)}),x=x.concat(S),function(B,V,$){V=V||[];const X=(B=B||[]).map(Yr),oe=V.map(Yr),ne=B.reduce(Ps,{}),ue=V.reduce(Ps,{}),Te=X.slice(),Ie=Object.create(null);let we,$e,Me,je,be,m,g;for(we=0,$e=0;we<X.length;we++)Me=X[we],Object.prototype.hasOwnProperty.call(ue,Me)?$e++:($.push({command:Zn.removeLayer,args:[Me]}),Te.splice(Te.indexOf(Me,$e),1));for(we=0,$e=0;we<oe.length;we++)Me=oe[oe.length-1-we],Te[Te.length-1-we]!==Me&&(Object.prototype.hasOwnProperty.call(ne,Me)?($.push({command:Zn.removeLayer,args:[Me]}),Te.splice(Te.lastIndexOf(Me,Te.length-$e),1)):$e++,m=Te[Te.length-we],$.push({command:Zn.addLayer,args:[ue[Me],m]}),Te.splice(Te.length-we,0,Me),Ie[Me]=!0);for(we=0;we<oe.length;we++)if(Me=oe[we],je=ne[Me],be=ue[Me],!Ie[Me]&&!C(je,be))if(C(je.source,be.source)&&C(je["source-layer"],be["source-layer"])&&C(je.type,be.type)){for(g in Er(je.layout,be.layout,$,Me,null,Zn.setLayoutProperty),Er(je.paint,be.paint,$,Me,null,Zn.setPaintProperty),C(je.filter,be.filter)||$.push({command:Zn.setFilter,args:[Me,be.filter]}),C(je.minzoom,be.minzoom)&&C(je.maxzoom,be.maxzoom)||$.push({command:Zn.setLayerZoomRange,args:[Me,be.minzoom,be.maxzoom]}),je)Object.prototype.hasOwnProperty.call(je,g)&&g!=="layout"&&g!=="paint"&&g!=="filter"&&g!=="metadata"&&g!=="minzoom"&&g!=="maxzoom"&&(g.indexOf("paint.")===0?Er(je[g],be[g],$,Me,g.slice(6),Zn.setPaintProperty):C(je[g],be[g])||$.push({command:Zn.setLayerProperty,args:[Me,g,be[g]]}));for(g in be)Object.prototype.hasOwnProperty.call(be,g)&&!Object.prototype.hasOwnProperty.call(je,g)&&g!=="layout"&&g!=="paint"&&g!=="filter"&&g!=="metadata"&&g!=="minzoom"&&g!=="maxzoom"&&(g.indexOf("paint.")===0?Er(je[g],be[g],$,Me,g.slice(6),Zn.setPaintProperty):C(je[g],be[g])||$.push({command:Zn.setLayerProperty,args:[Me,g,be[g]]}))}else $.push({command:Zn.removeLayer,args:[Me]}),m=Te[Te.lastIndexOf(Me)+1],$.push({command:Zn.addLayer,args:[be,m]})}(P,d.layers,x)}catch(b){console.warn("Unable to compute style diff:",b),x=[{command:Zn.setStyle,args:[d]}]}return x}(this.serialize(),c).filter(h=>!(h.command in Ue));if(_.length===0)return!1;const l=_.filter(h=>!(h.command in Vt));if(l.length>0)throw new Error(`Unimplemented: ${l.map(h=>h.command).join(", ")}.`);return _.forEach(h=>{h.command!=="setTransition"&&this[h.command].apply(this,h.args)}),this.stylesheet=c,!0}addImage(c,_){if(this.getImage(c))return this.fire(new a.ErrorEvent(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,_),this._afterImageUpdated(c)}updateImage(c,_){this.imageManager.updateImage(c,_)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new a.ErrorEvent(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,_,l={}){if(this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!_.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(_).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(_.type)>=0&&this._validate(a.validateStyle.source,`sources.${c}`,_,null,l))return;this.map&&this.map._collectResourceTiming&&(_.collectResourceTiming=!0);const h=this.sourceCaches[c]=new St(c,_,this.dispatcher);h.style=this,h.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:h.serialize(),sourceId:c})),h.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(const l in this._layers)if(this._layers[l].source===c)return this.fire(new a.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${l}" is using it.`)));const _=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],_.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),_.setEventedParent(null),_.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,_){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const l=this.sourceCaches[c].getSource();if(l.type!=="geojson")throw new Error(`geojsonSource.type is ${l.type}, which is !== 'geojson`);l.setData(_),this._changed=!0}getSource(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()}addLayer(c,_,l={}){this._checkLoaded();const h=c.id;if(this.getLayer(h))return void this.fire(new a.ErrorEvent(new Error(`Layer "${h}" already exists on this map.`)));let d;if(c.type==="custom"){if(Bn(this,a.validateCustomStyleLayer(c)))return;d=a.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(h,c.source),c=a.clone$1(c),c=a.extend(c,{source:h})),this._validate(a.validateStyle.layer,`layers.${h}`,c,{arrayIndex:-1},l))return;d=a.createStyleLayer(c),this._validateLayer(d),d.setEventedParent(this,{layer:{id:h}}),this._serializedLayers[d.id]=d.serialize()}const x=_?this._order.indexOf(_):this._order.length;if(_&&x===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${h}" before non-existing layer "${_}".`)));else{if(this._order.splice(x,0,h),this._layerOrderChanged=!0,this._layers[h]=d,this._removedLayers[h]&&d.source&&d.type!=="custom"){const b=this._removedLayers[h];delete this._removedLayers[h],b.type!==d.type?this._updatedSources[d.source]="clear":(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause())}this._updateLayer(d),d.onAdd&&d.onAdd(this.map)}}moveLayer(c,_){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new a.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===_)return;const l=this._order.indexOf(c);this._order.splice(l,1);const h=_?this._order.indexOf(_):this._order.length;_&&h===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${c}" before non-existing layer "${_}".`))):(this._order.splice(h,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const _=this._layers[c];if(!_)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${c}".`)));_.setEventedParent(null);const l=this._order.indexOf(c);this._order.splice(l,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=_,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],_.onRemove&&_.onRemove(this.map)}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,_,l){this._checkLoaded();const h=this.getLayer(c);h?h.minzoom===_&&h.maxzoom===l||(_!=null&&(h.minzoom=_),l!=null&&(h.maxzoom=l),this._updateLayer(h)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,_,l={}){this._checkLoaded();const h=this.getLayer(c);if(h){if(!C(h.filter,_))return _==null?(h.filter=void 0,void this._updateLayer(h)):void(this._validate(a.validateStyle.filter,`layers.${h.id}.filter`,_,null,l)||(h.filter=a.clone$1(_),this._updateLayer(h)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return a.clone$1(this.getLayer(c).filter)}setLayoutProperty(c,_,l,h={}){this._checkLoaded();const d=this.getLayer(c);d?C(d.getLayoutProperty(_),l)||(d.setLayoutProperty(_,l,h),this._updateLayer(d)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,_){const l=this.getLayer(c);if(l)return l.getLayoutProperty(_);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,_,l,h={}){this._checkLoaded();const d=this.getLayer(c);d?C(d.getPaintProperty(_),l)||(d.setPaintProperty(_,l,h)&&this._updateLayer(d),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${c}".`)))}getPaintProperty(c,_){return this.getLayer(c).getPaintProperty(_)}setFeatureState(c,_){this._checkLoaded();const l=c.source,h=c.sourceLayer,d=this.sourceCaches[l];if(d===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)));const x=d.getSource().type;x==="geojson"&&h?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):x!=="vector"||h?(c.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),d.setFeatureState(h,c.id,_)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,_){this._checkLoaded();const l=c.source,h=this.sourceCaches[l];if(h===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)));const d=h.getSource().type,x=d==="vector"?c.sourceLayer:void 0;d!=="vector"||x?_&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):h.removeFeatureState(x,c.id,_):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const _=c.source,l=c.sourceLayer,h=this.sourceCaches[_];if(h!==void 0)return h.getSource().type!=="vector"||l?(c.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),h.getFeatureState(l,c.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,c=>c.serialize()),layers:this._serializeLayers(this._order)},c=>c!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(c){const _=x=>this._layers[x].type==="fill-extrusion",l={},h=[];for(let x=this._order.length-1;x>=0;x--){const b=this._order[x];if(_(b)){l[b]=x;for(const S of c){const P=S[b];if(P)for(const B of P)h.push(B)}}}h.sort((x,b)=>b.intersectionZ-x.intersectionZ);const d=[];for(let x=this._order.length-1;x>=0;x--){const b=this._order[x];if(_(b))for(let S=h.length-1;S>=0;S--){const P=h[S].feature;if(l[P.layer.id]<x)break;d.push(P),h.pop()}else for(const S of c){const P=S[b];if(P)for(const B of P)d.push(B.feature)}}return d}queryRenderedFeatures(c,_,l){_&&_.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",_.filter,null,_);const h={};if(_&&_.layers){if(!Array.isArray(_.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const x of _.layers){const b=this._layers[x];if(!b)return this.fire(new a.ErrorEvent(new Error(`The layer '${x}' does not exist in the map's style and cannot be queried for features.`))),[];h[b.source]=!0}}const d=[];_.availableImages=this._availableImages;for(const x in this.sourceCaches)_.layers&&!h[x]||d.push(Gn(this.sourceCaches[x],this._layers,this._serializedLayers,c,_,l));return this.placement&&d.push(function(x,b,S,P,B,V,$){const X={},oe=V.queryRenderedSymbols(P),ne=[];for(const ue of Object.keys(oe).map(Number))ne.push($[ue]);ne.sort(Jn);for(const ue of ne){const Te=ue.featureIndex.lookupSymbolFeatures(oe[ue.bucketInstanceId],b,ue.bucketIndex,ue.sourceLayerIndex,B.filter,B.layers,B.availableImages,x);for(const Ie in Te){const we=X[Ie]=X[Ie]||[],$e=Te[Ie];$e.sort((Me,je)=>{const be=ue.featureSortOrder;if(be){const m=be.indexOf(Me.featureIndex);return be.indexOf(je.featureIndex)-m}return je.featureIndex-Me.featureIndex});for(const Me of $e)we.push(Me)}}for(const ue in X)X[ue].forEach(Te=>{const Ie=Te.feature,we=S[x[ue].source].getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=we});return X}(this._layers,this._serializedLayers,this.sourceCaches,c,_,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(d)}querySourceFeatures(c,_){_&&_.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",_.filter,null,_);const l=this.sourceCaches[c];return l?function(h,d){const x=h.getRenderableIds().map(P=>h.getTileByID(P)),b=[],S={};for(let P=0;P<x.length;P++){const B=x[P],V=B.tileID.canonical.key;S[V]||(S[V]=!0,B.querySourceFeatures(b,d))}return b}(l,_):[]}addSourceType(c,_,l){return Ce.getSourceType(c)?l(new Error(`A source type called "${c}" already exists.`)):(Ce.setSourceType(c,_),_.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:_.workerSourceURL},l):l(null,null))}getLight(){return this.light.getLight()}setLight(c,_={}){this._checkLoaded();const l=this.light.getLight();let h=!1;for(const x in c)if(!C(c[x],l[x])){h=!0;break}if(!h)return;const d={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,_),this.light.updateTransitions(d)}_validate(c,_,l,h,d={}){return(!d||d.validate!==!1)&&Bn(this,c.call(a.validateStyle,a.extend({key:_,style:this.serialize(),value:l,styleSpec:a.spec},h)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const _=this.sourceCaches[c];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){this.sourceCaches[c].clearTiles()}_reloadSource(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()}_updateSources(c){for(const _ in this.sourceCaches)this.sourceCaches[_].update(c,this.terrain)}_generateCollisionBoxes(){for(const c in this.sourceCaches)this._reloadSource(c)}_updatePlacement(c,_,l,h,d=!1){let x=!1,b=!1;const S={};for(const P of this._order){const B=this._layers[P];if(B.type!=="symbol")continue;if(!S[B.source]){const $=this.sourceCaches[B.source];S[B.source]=$.getRenderableIds(!0).map(X=>$.getTileByID(X)).sort((X,oe)=>oe.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(oe.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(B,S[B.source],c.center.lng);x=x||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((d=d||this._layerOrderChanged||l===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),c.zoom))&&(this.pauseablePlacement=new Qe(c,this.terrain,this._order,d,_,l,h,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,S),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),b=!0),x&&this.pauseablePlacement.placement.setStale()),b||x)for(const P of this._order){const B=this._layers[P];B.type==="symbol"&&this.placement.updateLayerOpacities(B,S[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,_,l){this.imageManager.getImages(_.icons,l),this._updateTilesForChangedImages();const h=this.sourceCaches[_.source];h&&h.setDependencies(_.tileID.key,_.type,_.icons)}getGlyphs(c,_,l){this.glyphManager.getGlyphs(_.stacks,l)}getResource(c,_,l){return a.makeRequest(_,l)}}Ce.getSourceType=function(L){return Cn[L]},Ce.setSourceType=function(L,c){Cn[L]=c},Ce.registerForPluginStateChange=a.registerForPluginStateChange;var _n="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const yi={prelude:dr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:dr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:dr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:dr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:dr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:dr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:dr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:dr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:dr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:dr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:dr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:dr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:dr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:dr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:dr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:dr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:dr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:dr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:dr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:dr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",_n),terrainDepth:dr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",_n),terrainCoords:dr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",_n)};function dr(L,c){const _=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,l=c.match(/attribute ([\w]+) ([\w]+)/g),h=L.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),d=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=d?d.concat(h):h,b={};return{fragmentSource:L=L.replace(_,(S,P,B,V,$)=>(b[$]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${$}
varying ${B} ${V} ${$};
#else
uniform ${B} ${V} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${B} ${V} ${$} = u_${$};
#endif
`)),vertexSource:c=c.replace(_,(S,P,B,V,$)=>{const X=V==="float"?"vec2":"vec4",oe=$.match(/color/)?"color":X;return b[$]?P==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${B} ${X} a_${$};
varying ${B} ${V} ${$};
#else
uniform ${B} ${V} u_${$};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${B} ${V} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${oe}(a_${$}, u_${$}_t);
#else
    ${B} ${V} ${$} = u_${$};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${B} ${X} a_${$};
#else
uniform ${B} ${V} u_${$};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${B} ${V} ${$} = a_${$};
#else
    ${B} ${V} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${B} ${V} ${$} = unpack_mix_${oe}(a_${$}, u_${$}_t);
#else
    ${B} ${V} ${$} = u_${$};
#endif
`}),staticAttributes:l,staticUniforms:x}}class ha{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,_,l,h,d,x,b,S,P){this.context=c;let B=this.boundPaintVertexBuffers.length!==h.length;for(let V=0;!B&&V<h.length;V++)this.boundPaintVertexBuffers[V]!==h[V]&&(B=!0);c.extVertexArrayObject&&this.vao&&this.boundProgram===_&&this.boundLayoutVertexBuffer===l&&!B&&this.boundIndexBuffer===d&&this.boundVertexOffset===x&&this.boundDynamicVertexBuffer===b&&this.boundDynamicVertexBuffer2===S&&this.boundDynamicVertexBuffer3===P?(c.bindVertexArrayOES.set(this.vao),b&&b.bind(),d&&d.dynamicDraw&&d.bind(),S&&S.bind(),P&&P.bind()):this.freshBind(_,l,h,d,x,b,S,P)}freshBind(c,_,l,h,d,x,b,S){let P;const B=c.numAttributes,V=this.context,$=V.gl;if(V.extVertexArrayObject)this.vao&&this.destroy(),this.vao=V.extVertexArrayObject.createVertexArrayOES(),V.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=c,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=l,this.boundIndexBuffer=h,this.boundVertexOffset=d,this.boundDynamicVertexBuffer=x,this.boundDynamicVertexBuffer2=b,this.boundDynamicVertexBuffer3=S;else{P=V.currentNumAttributes||0;for(let X=B;X<P;X++)$.disableVertexAttribArray(X)}_.enableAttributes($,c);for(const X of l)X.enableAttributes($,c);x&&x.enableAttributes($,c),b&&b.enableAttributes($,c),S&&S.enableAttributes($,c),_.bind(),_.setVertexAttribPointers($,c,d);for(const X of l)X.bind(),X.setVertexAttribPointers($,c,d);x&&(x.bind(),x.setVertexAttribPointers($,c,d)),h&&h.bind(),b&&(b.bind(),b.setVertexAttribPointers($,c,d)),S&&(S.bind(),S.setVertexAttribPointers($,c,d)),V.currentNumAttributes=B}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Re(L){const c=[];for(let _=0;_<L.length;_++){if(L[_]===null)continue;const l=L[_].split(" ");c.push(l.pop())}return c}class ja{constructor(c,_,l,h,d,x,b){const S=c.gl;this.program=S.createProgram();const P=Re(l.staticAttributes),B=h?h.getBinderAttributes():[],V=P.concat(B),$=yi.prelude.staticUniforms?Re(yi.prelude.staticUniforms):[],X=l.staticUniforms?Re(l.staticUniforms):[],oe=h?h.getBinderUniforms():[],ne=$.concat(X).concat(oe),ue=[];for(const be of ne)ue.indexOf(be)<0&&ue.push(be);const Te=h?h.defines():[];x&&Te.push("#define OVERDRAW_INSPECTOR;"),b&&Te.push("#define TERRAIN3D;");const Ie=Te.concat(yi.prelude.fragmentSource,l.fragmentSource).join(`
`),we=Te.concat(yi.prelude.vertexSource,l.vertexSource).join(`
`),$e=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource($e,Ie),S.compileShader($e),S.attachShader(this.program,$e);const Me=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(Me,we),S.compileShader(Me),S.attachShader(this.program,Me),this.attributes={};const je={};this.numAttributes=V.length;for(let be=0;be<this.numAttributes;be++)V[be]&&(S.bindAttribLocation(this.program,be,V[be]),this.attributes[V[be]]=be);S.linkProgram(this.program),S.deleteShader(Me),S.deleteShader($e);for(let be=0;be<ue.length;be++){const m=ue[be];if(m&&!je[m]){const g=S.getUniformLocation(this.program,m);g&&(je[m]=g)}}this.fixedUniforms=d(c,je),this.terrainUniforms=((be,m)=>({u_depth:new a.Uniform1i(be,m.u_depth),u_terrain:new a.Uniform1i(be,m.u_terrain),u_terrain_dim:new a.Uniform1f(be,m.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(be,m.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(be,m.u_terrain_unpack),u_terrain_offset:new a.Uniform1f(be,m.u_terrain_offset),u_terrain_exaggeration:new a.Uniform1f(be,m.u_terrain_exaggeration)}))(c,je),this.binderUniforms=h?h.getUniforms(c,je):[]}draw(c,_,l,h,d,x,b,S,P,B,V,$,X,oe,ne,ue,Te,Ie){const we=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(l),c.setStencilMode(h),c.setColorMode(d),c.setCullFace(x),S){c.activeTexture.set(we.TEXTURE2),we.bindTexture(we.TEXTURE_2D,S.depthTexture),c.activeTexture.set(we.TEXTURE3),we.bindTexture(we.TEXTURE_2D,S.texture);for(const Me in this.terrainUniforms)this.terrainUniforms[Me].set(S[Me])}for(const Me in this.fixedUniforms)this.fixedUniforms[Me].set(b[Me]);ne&&ne.setUniforms(c,this.binderUniforms,X,{zoom:oe});let $e=0;switch(_){case we.LINES:$e=2;break;case we.TRIANGLES:$e=3;break;case we.LINE_STRIP:$e=1}for(const Me of $.get()){const je=Me.vaos||(Me.vaos={});(je[P]||(je[P]=new ha)).bind(c,this,B,ne?ne.getPaintVertexBuffers():[],V,Me.vertexOffset,ue,Te,Ie),we.drawElements(_,Me.primitiveLength*$e,we.UNSIGNED_SHORT,Me.primitiveOffset*$e*2)}}}function Ee(L,c,_){const l=1/Lt(_,1,c.transform.tileZoom),h=Math.pow(2,_.tileID.overscaledZ),d=_.tileSize*Math.pow(2,c.transform.tileZoom)/h,x=d*(_.tileID.canonical.x+_.tileID.wrap*h),b=d*_.tileID.canonical.y;return{u_image:0,u_texsize:_.imageAtlasTexture.size,u_scale:[l,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[x>>16,b>>16],u_pixel_coord_lower:[65535&x,65535&b]}}const jo=(L,c,_,l)=>{const h=c.style.light,d=h.properties.get("position"),x=[d.x,d.y,d.z],b=a.create$1();h.properties.get("anchor")==="viewport"&&a.fromRotation(b,-c.transform.angle),a.transformMat3(x,x,b);const S=h.properties.get("color");return{u_matrix:L,u_lightpos:x,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[S.r,S.g,S.b],u_vertical_gradient:+_,u_opacity:l}},Is=(L,c,_,l,h,d,x)=>a.extend(jo(L,c,_,l),Ee(d,c,x),{u_height_factor:-Math.pow(2,h.overscaledZ)/x.tileSize/8}),$a=L=>({u_matrix:L}),Ha=(L,c,_,l)=>a.extend($a(L),Ee(_,c,l)),fa=(L,c)=>({u_matrix:L,u_world:c}),wl=(L,c,_,l,h)=>a.extend(Ha(L,c,_,l),{u_world:h}),da=(L,c,_,l)=>{const h=L.transform;let d,x;if(l.paint.get("circle-pitch-alignment")==="map"){const b=Lt(_,1,h.zoom);d=!0,x=[b,b]}else d=!1,x=h.pixelsToGLUnits;return{u_camera_to_center_distance:h.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_matrix:L.translatePosMatrix(c.posMatrix,_,l.paint.get("circle-translate"),l.paint.get("circle-translate-anchor")),u_pitch_with_map:+d,u_device_pixel_ratio:L.pixelRatio,u_extrude_scale:x}},ui=(L,c,_)=>{const l=Lt(_,1,c.zoom),h=Math.pow(2,c.zoom-_.tileID.overscaledZ),d=_.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:l,u_extrude_scale:[c.pixelsToGLUnits[0]/(l*h),c.pixelsToGLUnits[1]/(l*h)],u_overscale_factor:d}},me=(L,c,_=1)=>({u_matrix:L,u_color:c,u_overlay:0,u_overlay_scale:_}),Se=L=>({u_matrix:L}),Ve=(L,c,_,l)=>({u_matrix:L,u_extrude_scale:Lt(c,1,_),u_intensity:l});function At(L,c){const _=Math.pow(2,c.canonical.z),l=c.canonical.y;return[new a.MercatorCoordinate(0,l/_).toLngLat().lat,new a.MercatorCoordinate(0,(l+1)/_).toLngLat().lat]}const Ct=(L,c,_,l)=>{const h=L.transform;return{u_matrix:jr(L,c,_,l),u_ratio:1/Lt(c,1,h.zoom),u_device_pixel_ratio:L.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},tn=(L,c,_,l,h)=>a.extend(Ct(L,c,_,h),{u_image:0,u_image_height:l}),Hn=(L,c,_,l,h)=>{const d=L.transform,x=An(c,d);return{u_matrix:jr(L,c,_,h),u_texsize:c.imageAtlasTexture.size,u_ratio:1/Lt(c,1,d.zoom),u_device_pixel_ratio:L.pixelRatio,u_image:0,u_scale:[x,l.fromScale,l.toScale],u_fade:l.t,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Gr=(L,c,_,l,h,d)=>{const x=L.lineAtlas,b=An(c,L.transform),S=_.layout.get("line-cap")==="round",P=x.getDash(l.from,S),B=x.getDash(l.to,S),V=P.width*h.fromScale,$=B.width*h.toScale;return a.extend(Ct(L,c,_,d),{u_patternscale_a:[b/V,-P.height/2],u_patternscale_b:[b/$,-B.height/2],u_sdfgamma:x.width/(256*Math.min(V,$)*L.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:B.y,u_mix:h.t})};function An(L,c){return 1/Lt(L,1,c.tileZoom)}function jr(L,c,_,l){return L.translatePosMatrix(l?l.posMatrix:c.tileID.posMatrix,c,_.paint.get("line-translate"),_.paint.get("line-translate-anchor"))}const tr=(L,c,_,l,h)=>{return{u_matrix:L,u_tl_parent:c,u_scale_parent:_,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(x=h.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(d=h.paint.get("raster-contrast"),d>0?1/(1-d):1+d),u_spin_weights:fA(h.paint.get("raster-hue-rotate"))};var d,x};function fA(L){L*=Math.PI/180;const c=Math.sin(L),_=Math.cos(L);return[(2*_+1)/3,(-Math.sqrt(3)*c-_+1)/3,(Math.sqrt(3)*c-_+1)/3]}const dA=(L,c,_,l,h,d,x,b,S,P)=>{const B=h.transform;return{u_is_size_zoom_constant:+(L==="constant"||L==="source"),u_is_size_feature_constant:+(L==="constant"||L==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:B.cameraToCenterDistance,u_pitch:B.pitch/360*2*Math.PI,u_rotate_symbol:+_,u_aspect_ratio:B.width/B.height,u_fade_change:h.options.fadeDuration?h.symbolFadeChange:1,u_matrix:d,u_label_plane_matrix:x,u_coord_matrix:b,u_is_text:+S,u_pitch_with_map:+l,u_texsize:P,u_texture:0}},pA=(L,c,_,l,h,d,x,b,S,P,B)=>{const V=h.transform;return a.extend(dA(L,c,_,l,h,d,x,b,S,P),{u_gamma_scale:l?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:h.pixelRatio,u_is_halo:+B})},YA=(L,c,_,l,h,d,x,b,S,P)=>a.extend(pA(L,c,_,l,h,d,x,b,!0,S,!0),{u_texsize_icon:P,u_texture_icon:1}),XA=(L,c,_)=>({u_matrix:L,u_opacity:c,u_color:_}),gA=(L,c,_,l,h,d)=>a.extend(function(x,b,S,P){const B=S.imageManager.getPattern(x.from.toString()),V=S.imageManager.getPattern(x.to.toString()),{width:$,height:X}=S.imageManager.getPixelSize(),oe=Math.pow(2,P.tileID.overscaledZ),ne=P.tileSize*Math.pow(2,S.transform.tileZoom)/oe,ue=ne*(P.tileID.canonical.x+P.tileID.wrap*oe),Te=ne*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[$,X],u_mix:b.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/Lt(P,1,S.transform.tileZoom),u_pixel_coord_upper:[ue>>16,Te>>16],u_pixel_coord_lower:[65535&ue,65535&Te]}}(l,d,_,h),{u_matrix:L,u_opacity:c}),bl={fillExtrusion:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_lightpos:new a.Uniform3f(L,c.u_lightpos),u_lightintensity:new a.Uniform1f(L,c.u_lightintensity),u_lightcolor:new a.Uniform3f(L,c.u_lightcolor),u_vertical_gradient:new a.Uniform1f(L,c.u_vertical_gradient),u_opacity:new a.Uniform1f(L,c.u_opacity)}),fillExtrusionPattern:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_lightpos:new a.Uniform3f(L,c.u_lightpos),u_lightintensity:new a.Uniform1f(L,c.u_lightintensity),u_lightcolor:new a.Uniform3f(L,c.u_lightcolor),u_vertical_gradient:new a.Uniform1f(L,c.u_vertical_gradient),u_height_factor:new a.Uniform1f(L,c.u_height_factor),u_image:new a.Uniform1i(L,c.u_image),u_texsize:new a.Uniform2f(L,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(L,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(L,c.u_scale),u_fade:new a.Uniform1f(L,c.u_fade),u_opacity:new a.Uniform1f(L,c.u_opacity)}),fill:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix)}),fillPattern:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_image:new a.Uniform1i(L,c.u_image),u_texsize:new a.Uniform2f(L,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(L,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(L,c.u_scale),u_fade:new a.Uniform1f(L,c.u_fade)}),fillOutline:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_world:new a.Uniform2f(L,c.u_world)}),fillOutlinePattern:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_world:new a.Uniform2f(L,c.u_world),u_image:new a.Uniform1i(L,c.u_image),u_texsize:new a.Uniform2f(L,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(L,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(L,c.u_scale),u_fade:new a.Uniform1f(L,c.u_fade)}),circle:(L,c)=>({u_camera_to_center_distance:new a.Uniform1f(L,c.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(L,c.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(L,c.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(L,c.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(L,c.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(L,c.u_matrix)}),collisionBox:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_camera_to_center_distance:new a.Uniform1f(L,c.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(L,c.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(L,c.u_extrude_scale),u_overscale_factor:new a.Uniform1f(L,c.u_overscale_factor)}),collisionCircle:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_inv_matrix:new a.UniformMatrix4f(L,c.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(L,c.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(L,c.u_viewport_size)}),debug:(L,c)=>({u_color:new a.UniformColor(L,c.u_color),u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_overlay:new a.Uniform1i(L,c.u_overlay),u_overlay_scale:new a.Uniform1f(L,c.u_overlay_scale)}),clippingMask:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix)}),heatmap:(L,c)=>({u_extrude_scale:new a.Uniform1f(L,c.u_extrude_scale),u_intensity:new a.Uniform1f(L,c.u_intensity),u_matrix:new a.UniformMatrix4f(L,c.u_matrix)}),heatmapTexture:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_world:new a.Uniform2f(L,c.u_world),u_image:new a.Uniform1i(L,c.u_image),u_color_ramp:new a.Uniform1i(L,c.u_color_ramp),u_opacity:new a.Uniform1f(L,c.u_opacity)}),hillshade:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_image:new a.Uniform1i(L,c.u_image),u_latrange:new a.Uniform2f(L,c.u_latrange),u_light:new a.Uniform2f(L,c.u_light),u_shadow:new a.UniformColor(L,c.u_shadow),u_highlight:new a.UniformColor(L,c.u_highlight),u_accent:new a.UniformColor(L,c.u_accent)}),hillshadePrepare:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_image:new a.Uniform1i(L,c.u_image),u_dimension:new a.Uniform2f(L,c.u_dimension),u_zoom:new a.Uniform1f(L,c.u_zoom),u_unpack:new a.Uniform4f(L,c.u_unpack)}),line:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_ratio:new a.Uniform1f(L,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(L,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(L,c.u_units_to_pixels)}),lineGradient:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_ratio:new a.Uniform1f(L,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(L,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(L,c.u_units_to_pixels),u_image:new a.Uniform1i(L,c.u_image),u_image_height:new a.Uniform1f(L,c.u_image_height)}),linePattern:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_texsize:new a.Uniform2f(L,c.u_texsize),u_ratio:new a.Uniform1f(L,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(L,c.u_device_pixel_ratio),u_image:new a.Uniform1i(L,c.u_image),u_units_to_pixels:new a.Uniform2f(L,c.u_units_to_pixels),u_scale:new a.Uniform3f(L,c.u_scale),u_fade:new a.Uniform1f(L,c.u_fade)}),lineSDF:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_ratio:new a.Uniform1f(L,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(L,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(L,c.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(L,c.u_patternscale_a),u_patternscale_b:new a.Uniform2f(L,c.u_patternscale_b),u_sdfgamma:new a.Uniform1f(L,c.u_sdfgamma),u_image:new a.Uniform1i(L,c.u_image),u_tex_y_a:new a.Uniform1f(L,c.u_tex_y_a),u_tex_y_b:new a.Uniform1f(L,c.u_tex_y_b),u_mix:new a.Uniform1f(L,c.u_mix)}),raster:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_tl_parent:new a.Uniform2f(L,c.u_tl_parent),u_scale_parent:new a.Uniform1f(L,c.u_scale_parent),u_buffer_scale:new a.Uniform1f(L,c.u_buffer_scale),u_fade_t:new a.Uniform1f(L,c.u_fade_t),u_opacity:new a.Uniform1f(L,c.u_opacity),u_image0:new a.Uniform1i(L,c.u_image0),u_image1:new a.Uniform1i(L,c.u_image1),u_brightness_low:new a.Uniform1f(L,c.u_brightness_low),u_brightness_high:new a.Uniform1f(L,c.u_brightness_high),u_saturation_factor:new a.Uniform1f(L,c.u_saturation_factor),u_contrast_factor:new a.Uniform1f(L,c.u_contrast_factor),u_spin_weights:new a.Uniform3f(L,c.u_spin_weights)}),symbolIcon:(L,c)=>({u_is_size_zoom_constant:new a.Uniform1i(L,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(L,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(L,c.u_size_t),u_size:new a.Uniform1f(L,c.u_size),u_camera_to_center_distance:new a.Uniform1f(L,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(L,c.u_pitch),u_rotate_symbol:new a.Uniform1i(L,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(L,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(L,c.u_fade_change),u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(L,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(L,c.u_coord_matrix),u_is_text:new a.Uniform1i(L,c.u_is_text),u_pitch_with_map:new a.Uniform1i(L,c.u_pitch_with_map),u_texsize:new a.Uniform2f(L,c.u_texsize),u_texture:new a.Uniform1i(L,c.u_texture)}),symbolSDF:(L,c)=>({u_is_size_zoom_constant:new a.Uniform1i(L,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(L,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(L,c.u_size_t),u_size:new a.Uniform1f(L,c.u_size),u_camera_to_center_distance:new a.Uniform1f(L,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(L,c.u_pitch),u_rotate_symbol:new a.Uniform1i(L,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(L,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(L,c.u_fade_change),u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(L,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(L,c.u_coord_matrix),u_is_text:new a.Uniform1i(L,c.u_is_text),u_pitch_with_map:new a.Uniform1i(L,c.u_pitch_with_map),u_texsize:new a.Uniform2f(L,c.u_texsize),u_texture:new a.Uniform1i(L,c.u_texture),u_gamma_scale:new a.Uniform1f(L,c.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(L,c.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(L,c.u_is_halo)}),symbolTextAndIcon:(L,c)=>({u_is_size_zoom_constant:new a.Uniform1i(L,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(L,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(L,c.u_size_t),u_size:new a.Uniform1f(L,c.u_size),u_camera_to_center_distance:new a.Uniform1f(L,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(L,c.u_pitch),u_rotate_symbol:new a.Uniform1i(L,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(L,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(L,c.u_fade_change),u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(L,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(L,c.u_coord_matrix),u_is_text:new a.Uniform1i(L,c.u_is_text),u_pitch_with_map:new a.Uniform1i(L,c.u_pitch_with_map),u_texsize:new a.Uniform2f(L,c.u_texsize),u_texsize_icon:new a.Uniform2f(L,c.u_texsize_icon),u_texture:new a.Uniform1i(L,c.u_texture),u_texture_icon:new a.Uniform1i(L,c.u_texture_icon),u_gamma_scale:new a.Uniform1f(L,c.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(L,c.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(L,c.u_is_halo)}),background:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_opacity:new a.Uniform1f(L,c.u_opacity),u_color:new a.UniformColor(L,c.u_color)}),backgroundPattern:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_opacity:new a.Uniform1f(L,c.u_opacity),u_image:new a.Uniform1i(L,c.u_image),u_pattern_tl_a:new a.Uniform2f(L,c.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(L,c.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(L,c.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(L,c.u_pattern_br_b),u_texsize:new a.Uniform2f(L,c.u_texsize),u_mix:new a.Uniform1f(L,c.u_mix),u_pattern_size_a:new a.Uniform2f(L,c.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(L,c.u_pattern_size_b),u_scale_a:new a.Uniform1f(L,c.u_scale_a),u_scale_b:new a.Uniform1f(L,c.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(L,c.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(L,c.u_tile_units_to_pixels)}),terrain:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_texture:new a.Uniform1i(L,c.u_texture)}),terrainDepth:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix)}),terrainCoords:(L,c)=>({u_matrix:new a.UniformMatrix4f(L,c.u_matrix),u_texture:new a.Uniform1i(L,c.u_texture),u_terrain_coords_id:new a.Uniform1f(L,c.u_terrain_coords_id)})};class El{constructor(c,_,l){this.context=c;const h=c.gl;this.buffer=h.createBuffer(),this.dynamicDraw=!!l,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const _=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),_.bufferSubData(_.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const mA={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yA{constructor(c,_,l,h){this.length=_.length,this.attributes=l,this.itemSize=_.bytesPerElement,this.dynamicDraw=h,this.context=c;const d=c.gl;this.buffer=d.createBuffer(),c.bindVertexBuffer.set(this.buffer),d.bufferData(d.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,_){for(let l=0;l<this.attributes.length;l++){const h=_.attributes[this.attributes[l].name];h!==void 0&&c.enableVertexAttribArray(h)}}setVertexAttribPointers(c,_,l){for(let h=0;h<this.attributes.length;h++){const d=this.attributes[h],x=_.attributes[d.name];x!==void 0&&c.vertexAttribPointer(x,d.components,c[mA[d.type]],!1,this.itemSize,d.offset+this.itemSize*(l||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ur{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class KA extends ur{getDefault(){return a.Color.transparent}set(c){const _=this.current;(c.r!==_.r||c.g!==_.g||c.b!==_.b||c.a!==_.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class sc extends ur{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Tl extends ur{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class ni extends ur{getDefault(){return[!0,!0,!0,!0]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||c[2]!==_[2]||c[3]!==_[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class $o extends ur{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class qn extends ur{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class ks extends ur{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const _=this.current;(c.func!==_.func||c.ref!==_.ref||c.mask!==_.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class ci extends ur{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||c[2]!==_[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class vo extends ur{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.STENCIL_TEST):_.disable(_.STENCIL_TEST),this.current=c,this.dirty=!1}}class Sl extends ur{getDefault(){return[0,1]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Ho extends ur{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.DEPTH_TEST):_.disable(_.DEPTH_TEST),this.current=c,this.dirty=!1}}class pa extends ur{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class xo extends ur{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.BLEND):_.disable(_.BLEND),this.current=c,this.dirty=!1}}class _A extends ur{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Wa extends ur{getDefault(){return a.Color.transparent}set(c){const _=this.current;(c.r!==_.r||c.g!==_.g||c.b!==_.b||c.a!==_.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Wo extends ur{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Ki extends ur{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.CULL_FACE):_.disable(_.CULL_FACE),this.current=c,this.dirty=!1}}class Ji extends ur{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class JA extends ur{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Ml extends ur{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class wo extends ur{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Qo extends ur{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||c[2]!==_[2]||c[3]!==_[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class oc extends ur{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class eu extends ur{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindRenderbuffer(_.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Cl extends ur{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindTexture(_.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class vA extends ur{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindBuffer(_.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class tu extends ur{getDefault(){return null}set(c){const _=this.gl;_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class qo extends ur{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class Qa extends ur{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class nu extends ur{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class ru extends ur{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class bo extends ur{constructor(c,_){super(c),this.context=c,this.parent=_}getDefault(){return null}}class ga extends bo{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class iu extends bo{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class ma{constructor(c,_,l,h){this.context=c,this.width=_,this.height=l;const d=c.gl,x=this.framebuffer=d.createFramebuffer();if(this.colorAttachment=new ga(c,x),h&&(this.depthAttachment=new iu(c,x)),d.checkFramebufferStatus(d.FRAMEBUFFER)!==d.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const c=this.context.gl,_=this.colorAttachment.get();if(_&&c.deleteTexture(_),this.depthAttachment){const l=this.depthAttachment.get();l&&c.deleteRenderbuffer(l)}c.deleteFramebuffer(this.framebuffer)}}class Tr{constructor(c,_,l){this.blendFunction=c,this.blendColor=_,this.mask=l}}Tr.Replace=[1,0],Tr.disabled=new Tr(Tr.Replace,a.Color.transparent,[!1,!1,!1,!1]),Tr.unblended=new Tr(Tr.Replace,a.Color.transparent,[!0,!0,!0,!0]),Tr.alphaBlended=new Tr([1,771],a.Color.transparent,[!0,!0,!0,!0]);class $s{constructor(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new KA(this),this.clearDepth=new sc(this),this.clearStencil=new Tl(this),this.colorMask=new ni(this),this.depthMask=new $o(this),this.stencilMask=new qn(this),this.stencilFunc=new ks(this),this.stencilOp=new ci(this),this.stencilTest=new vo(this),this.depthRange=new Sl(this),this.depthTest=new Ho(this),this.depthFunc=new pa(this),this.blend=new xo(this),this.blendFunc=new _A(this),this.blendColor=new Wa(this),this.blendEquation=new Wo(this),this.cullFace=new Ki(this),this.cullFaceSide=new Ji(this),this.frontFace=new JA(this),this.program=new Ml(this),this.activeTexture=new wo(this),this.viewport=new Qo(this),this.bindFramebuffer=new oc(this),this.bindRenderbuffer=new eu(this),this.bindTexture=new Cl(this),this.bindVertexBuffer=new vA(this),this.bindElementBuffer=new tu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new qo(this),this.pixelStoreUnpack=new Qa(this),this.pixelStoreUnpackPremultiplyAlpha=new nu(this),this.pixelStoreUnpackFlipY=new ru(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,_){return new El(this,c,_)}createVertexBuffer(c,_,l){return new yA(this,c,_,l)}createRenderbuffer(c,_,l){const h=this.gl,d=h.createRenderbuffer();return this.bindRenderbuffer.set(d),h.renderbufferStorage(h.RENDERBUFFER,c,_,l),this.bindRenderbuffer.set(null),d}createFramebuffer(c,_,l){return new ma(this,c,_,l)}clear({color:c,depth:_}){const l=this.gl;let h=0;c&&(h|=l.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),_!==void 0&&(h|=l.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),l.clear(h)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){C(c.blendFunction,Tr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class nr{constructor(c,_,l){this.func=c,this.mask=_,this.range=l}}nr.ReadOnly=!1,nr.ReadWrite=!0,nr.disabled=new nr(519,nr.ReadOnly,[0,1]);const or=7680;class Br{constructor(c,_,l,h,d,x){this.test=c,this.ref=_,this.mask=l,this.fail=h,this.depthFail=d,this.pass=x}}Br.disabled=new Br({func:519,mask:0},0,0,or,or,or);class Mr{constructor(c,_,l){this.enable=c,this.mode=_,this.frontFace=l}}let Pl;function Zo(L,c,_,l,h,d,x){const b=L.context,S=b.gl,P=L.useProgram("collisionBox"),B=[];let V=0,$=0;for(let we=0;we<l.length;we++){const $e=l[we],Me=c.getTile($e),je=Me.getBucket(_);if(!je)continue;let be=$e.posMatrix;h[0]===0&&h[1]===0||(be=L.translatePosMatrix($e.posMatrix,Me,h,d));const m=x?je.textCollisionBox:je.iconCollisionBox,g=je.collisionCircleArray;if(g.length>0){const v=a.create(),E=be;a.mul(v,je.placementInvProjMatrix,L.transform.glCoordMatrix),a.mul(v,v,je.placementViewportMatrix),B.push({circleArray:g,circleOffset:$,transform:E,invTransform:v,coord:$e}),V+=g.length/4,$=V}m&&P.draw(b,S.LINES,nr.disabled,Br.disabled,L.colorModeForRenderPass(),Mr.disabled,ui(be,L.transform,Me),L.style.terrain&&L.style.terrain.getTerrainData($e),_.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,L.transform.zoom,null,null,m.collisionVertexBuffer)}if(!x||!B.length)return;const X=L.useProgram("collisionCircle"),oe=new a.CollisionCircleLayoutArray;oe.resize(4*V),oe._trim();let ne=0;for(const we of B)for(let $e=0;$e<we.circleArray.length/4;$e++){const Me=4*$e,je=we.circleArray[Me+0],be=we.circleArray[Me+1],m=we.circleArray[Me+2],g=we.circleArray[Me+3];oe.emplace(ne++,je,be,m,g,0),oe.emplace(ne++,je,be,m,g,1),oe.emplace(ne++,je,be,m,g,2),oe.emplace(ne++,je,be,m,g,3)}(!Pl||Pl.length<2*V)&&(Pl=function(we){const $e=2*we,Me=new a.QuadTriangleArray;Me.resize($e),Me._trim();for(let je=0;je<$e;je++){const be=6*je;Me.uint16[be+0]=4*je+0,Me.uint16[be+1]=4*je+1,Me.uint16[be+2]=4*je+2,Me.uint16[be+3]=4*je+2,Me.uint16[be+4]=4*je+3,Me.uint16[be+5]=4*je+0}return Me}(V));const ue=b.createIndexBuffer(Pl,!0),Te=b.createVertexBuffer(oe,a.collisionCircleLayout.members,!0);for(const we of B){const $e={u_matrix:we.transform,u_inv_matrix:we.invTransform,u_camera_to_center_distance:(Ie=L.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};X.draw(b,S.TRIANGLES,nr.disabled,Br.disabled,L.colorModeForRenderPass(),Mr.disabled,$e,L.style.terrain&&L.style.terrain.getTerrainData(we.coord),_.id,Te,ue,a.SegmentVector.simpleSegment(0,2*we.circleOffset,we.circleArray.length,we.circleArray.length/2),null,L.transform.zoom,null,null,null)}var Ie;Te.destroy(),ue.destroy()}Mr.disabled=new Mr(!1,1029,2305),Mr.backCCW=new Mr(!0,1029,2305);const ac=a.identity(new Float32Array(16));function qa(L,c,_,l,h,d){const{horizontalAlign:x,verticalAlign:b}=a.getAnchorAlignment(L),S=-(x-.5)*c,P=-(b-.5)*_,B=a.evaluateVariableOffset(L,l);return new a.pointGeometry((S/h+B[0])*d,(P/h+B[1])*d)}function lc(L,c,_,l,h,d,x,b,S,P,B){const V=L.text.placedSymbolArray,$=L.text.dynamicLayoutVertexArray,X=L.icon.dynamicLayoutVertexArray,oe={};$.clear();for(let ne=0;ne<V.length;ne++){const ue=V.get(ne),Te=L.allowVerticalPlacement&&!ue.placedOrientation,Ie=ue.hidden||!ue.crossTileID||Te?null:l[ue.crossTileID];if(Ie){const we=new a.pointGeometry(ue.anchorX,ue.anchorY),$e=Vn(we,_?x:d,B),Me=Bi(h.cameraToCenterDistance,$e.signedDistanceFromCamera);let je=a.evaluateSizeForFeature(L.textSizeData,S,ue)*Me/a.ONE_EM;_&&(je*=L.tilePixelRatio/b);const{width:be,height:m,anchor:g,textOffset:v,textBoxScale:E}=Ie,I=qa(g,be,m,v,E,je),R=_?Vn(we.add(I),d,B).point:$e.point.add(c?I.rotate(-h.angle):I),O=L.allowVerticalPlacement&&ue.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let N=0;N<ue.numGlyphs;N++)a.addDynamicAttributes($,R,O);P&&ue.associatedIconIndex>=0&&(oe[ue.associatedIconIndex]={shiftedAnchor:R,angle:O})}else Pn(ue.numGlyphs,$)}if(P){X.clear();const ne=L.icon.placedSymbolArray;for(let ue=0;ue<ne.length;ue++){const Te=ne.get(ue);if(Te.hidden)Pn(Te.numGlyphs,X);else{const Ie=oe[ue];if(Ie)for(let we=0;we<Te.numGlyphs;we++)a.addDynamicAttributes(X,Ie.shiftedAnchor,Ie.angle);else Pn(Te.numGlyphs,X)}}L.icon.dynamicLayoutVertexBuffer.updateData(X)}L.text.dynamicLayoutVertexBuffer.updateData($)}function su(L,c,_){return _.iconsInText&&c?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Hs(L,c,_,l,h,d,x,b,S,P,B,V){const $=L.context,X=$.gl,oe=L.transform,ne=b==="map",ue=S==="map",Te=b!=="viewport"&&_.layout.get("symbol-placement")!=="point",Ie=ne&&!ue&&!Te,we=!_.layout.get("symbol-sort-key").isConstant();let $e=!1;const Me=L.depthModeForSublayer(0,nr.ReadOnly),je=_.layout.get("text-variable-anchor"),be=[];for(const m of l){const g=c.getTile(m),v=g.getBucket(_);if(!v)continue;const E=h?v.text:v.icon;if(!E||!E.segments.get().length)continue;const I=E.programConfigurations.get(_.id),R=h||v.sdfIcons,O=h?v.textSizeData:v.iconSizeData,N=ue||oe.pitch!==0,Q=L.useProgram(su(R,h,v),I),te=a.evaluateSizeForZoom(O,oe.zoom),le=L.style.terrain&&L.style.terrain.getTerrainData(m);let pe,Be,He,ze,Xe=[0,0],dt=null;if(h){if(Be=g.glyphAtlasTexture,He=X.LINEAR,pe=g.glyphAtlasTexture.size,v.iconsInText){Xe=g.imageAtlasTexture.size,dt=g.imageAtlasTexture;const kn=O.kind==="composite"||O.kind==="camera";ze=N||L.options.rotating||L.options.zooming||kn?X.LINEAR:X.NEAREST}}else{const kn=_.layout.get("icon-size").constantOr(0)!==1||v.iconsNeedLinear;Be=g.imageAtlasTexture,He=R||L.options.rotating||L.options.zooming||kn||N?X.LINEAR:X.NEAREST,pe=g.imageAtlasTexture.size}const ct=Lt(g,1,L.transform.zoom),it=is(m.posMatrix,ue,ne,L.transform,ct),st=Ai(m.posMatrix,ue,ne,L.transform,ct),Je=je&&v.hasTextData(),Ht=_.layout.get("icon-text-fit")!=="none"&&Je&&v.hasIconData();if(Te){const kn=L.style.terrain?(Wn,_r)=>L.style.terrain.getElevation(m,Wn,_r):null,On=_.layout.get("text-rotation-alignment")==="map";ti(v,m.posMatrix,L,h,it,st,ue,P,On,kn)}const Ft=L.translatePosMatrix(m.posMatrix,g,d,x),mt=Te||h&&je||Ht?ac:it,Et=L.translatePosMatrix(st,g,d,x,!0),Nn=R&&_.paint.get(h?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zn;zn=R?v.iconsInText?YA(O.kind,te,Ie,ue,L,Ft,mt,Et,pe,Xe):pA(O.kind,te,Ie,ue,L,Ft,mt,Et,h,pe,!0):dA(O.kind,te,Ie,ue,L,Ft,mt,Et,h,pe);const Sn={program:Q,buffers:E,uniformValues:zn,atlasTexture:Be,atlasTextureIcon:dt,atlasInterpolation:He,atlasInterpolationIcon:ze,isSDF:R,hasHalo:Nn};if(we&&v.canOverlap){$e=!0;const kn=E.segments.get();for(const On of kn)be.push({segments:new a.SegmentVector([On]),sortKey:On.sortKey,state:Sn,terrainData:le})}else be.push({segments:E.segments,sortKey:0,state:Sn,terrainData:le})}$e&&be.sort((m,g)=>m.sortKey-g.sortKey);for(const m of be){const g=m.state;if($.activeTexture.set(X.TEXTURE0),g.atlasTexture.bind(g.atlasInterpolation,X.CLAMP_TO_EDGE),g.atlasTextureIcon&&($.activeTexture.set(X.TEXTURE1),g.atlasTextureIcon&&g.atlasTextureIcon.bind(g.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),g.isSDF){const v=g.uniformValues;g.hasHalo&&(v.u_is_halo=1,Il(g.buffers,m.segments,_,L,g.program,Me,B,V,v,m.terrainData)),v.u_is_halo=0}Il(g.buffers,m.segments,_,L,g.program,Me,B,V,g.uniformValues,m.terrainData)}}function Il(L,c,_,l,h,d,x,b,S,P){const B=l.context;h.draw(B,B.gl.TRIANGLES,d,x,b,Mr.disabled,S,P,_.id,L.layoutVertexBuffer,L.indexBuffer,c,_.paint,l.transform.zoom,L.programConfigurations.get(_.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Za(L,c,_,l,h,d,x){const b=L.context.gl,S=_.paint.get("fill-pattern"),P=S&&S.constantOr(1),B=_.getCrossfadeParameters();let V,$,X,oe,ne;x?($=P&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=b.LINES):($=P?"fillPattern":"fill",V=b.TRIANGLES);for(const ue of l){const Te=c.getTile(ue);if(P&&!Te.patternsLoaded())continue;const Ie=Te.getBucket(_);if(!Ie)continue;const we=Ie.programConfigurations.get(_.id),$e=L.useProgram($,we),Me=L.style.terrain&&L.style.terrain.getTerrainData(ue);P&&(L.context.activeTexture.set(b.TEXTURE0),Te.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),we.updatePaintBuffers(B));const je=S.constantOr(null);if(je&&Te.imageAtlas){const g=Te.imageAtlas,v=g.patternPositions[je.to.toString()],E=g.patternPositions[je.from.toString()];v&&E&&we.setConstantPatternPositions(v,E)}const be=Me?ue:null,m=L.translatePosMatrix(be?be.posMatrix:ue.posMatrix,Te,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor"));if(x){oe=Ie.indexBuffer2,ne=Ie.segments2;const g=[b.drawingBufferWidth,b.drawingBufferHeight];X=$==="fillOutlinePattern"&&P?wl(m,L,B,Te,g):fa(m,g)}else oe=Ie.indexBuffer,ne=Ie.segments,X=P?Ha(m,L,B,Te):$a(m);$e.draw(L.context,V,h,L.stencilModeForClipping(ue),d,Mr.disabled,X,Me,_.id,Ie.layoutVertexBuffer,oe,ne,_.paint,L.transform.zoom,we)}}function ya(L,c,_,l,h,d,x){const b=L.context,S=b.gl,P=_.paint.get("fill-extrusion-pattern"),B=P.constantOr(1),V=_.getCrossfadeParameters(),$=_.paint.get("fill-extrusion-opacity");for(const X of l){const oe=c.getTile(X),ne=oe.getBucket(_);if(!ne)continue;const ue=L.style.terrain&&L.style.terrain.getTerrainData(X),Te=ne.programConfigurations.get(_.id),Ie=L.useProgram(B?"fillExtrusionPattern":"fillExtrusion",Te);B&&(L.context.activeTexture.set(S.TEXTURE0),oe.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),Te.updatePaintBuffers(V));const we=P.constantOr(null);if(we&&oe.imageAtlas){const be=oe.imageAtlas,m=be.patternPositions[we.to.toString()],g=be.patternPositions[we.from.toString()];m&&g&&Te.setConstantPatternPositions(m,g)}const $e=L.translatePosMatrix(X.posMatrix,oe,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),Me=_.paint.get("fill-extrusion-vertical-gradient"),je=B?Is($e,L,Me,$,X,V,oe):jo($e,L,Me,$);Ie.draw(b,b.gl.TRIANGLES,h,d,x,Mr.backCCW,je,ue,_.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,_.paint,L.transform.zoom,Te,L.style.terrain&&ne.centroidVertexBuffer)}}function kl(L,c,_,l,h,d,x){const b=L.context,S=b.gl,P=_.fbo;if(!P)return;const B=L.useProgram("hillshade"),V=L.style.terrain&&L.style.terrain.getTerrainData(c);b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,P.colorAttachment.get()),B.draw(b,S.TRIANGLES,h,d,x,Mr.disabled,(($,X,oe,ne)=>{const ue=oe.paint.get("hillshade-shadow-color"),Te=oe.paint.get("hillshade-highlight-color"),Ie=oe.paint.get("hillshade-accent-color");let we=oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);oe.paint.get("hillshade-illumination-anchor")==="viewport"&&(we-=$.transform.angle);const $e=!$.options.moving;return{u_matrix:ne?ne.posMatrix:$.transform.calculatePosMatrix(X.tileID.toUnwrapped(),$e),u_image:0,u_latrange:At(0,X.tileID),u_light:[oe.paint.get("hillshade-exaggeration"),we],u_shadow:ue,u_highlight:Te,u_accent:Ie}})(L,_,l,V?c:null),V,l.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}function Ll(L,c,_,l,h,d){const x=L.context,b=x.gl,S=c.dem;if(S&&S.data){const P=S.dim,B=S.stride,V=S.getPixels();if(x.activeTexture.set(b.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||L.getTileTexture(B),c.demTexture){const X=c.demTexture;X.update(V,{premultiply:!1}),X.bind(b.NEAREST,b.CLAMP_TO_EDGE)}else c.demTexture=new q(x,V,b.RGBA,{premultiply:!1}),c.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE);x.activeTexture.set(b.TEXTURE0);let $=c.fbo;if(!$){const X=new q(x,{width:P,height:P,data:null},b.RGBA);X.bind(b.LINEAR,b.CLAMP_TO_EDGE),$=c.fbo=x.createFramebuffer(P,P,!0),$.colorAttachment.set(X.texture)}x.bindFramebuffer.set($.framebuffer),x.viewport.set([0,0,P,P]),L.useProgram("hillshadePrepare").draw(x,b.TRIANGLES,l,h,d,Mr.disabled,((X,oe)=>{const ne=oe.stride,ue=a.create();return a.ortho(ue,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(ue,ue,[0,-a.EXTENT,0]),{u_matrix:ue,u_image:1,u_dimension:[ne,ne],u_zoom:X.overscaledZ,u_unpack:oe.getUnpackVector()}})(c.tileID,S),null,_.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function Cr(L,c,_,l,h,d){const x=l.paint.get("raster-fade-duration");if(!d&&x>0){const b=a.exported.now(),S=(b-L.timeAdded)/x,P=c?(b-c.timeAdded)/x:-1,B=_.getSource(),V=h.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),$=!c||Math.abs(c.tileID.overscaledZ-V)>Math.abs(L.tileID.overscaledZ-V),X=$&&L.refreshedUponExpiration?1:a.clamp($?S:1-P,0,1);return L.refreshedUponExpiration&&S>=1&&(L.refreshedUponExpiration=!1),c?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}const xA=new a.Color(1,0,0,1),ps=new a.Color(0,1,0,1),ou=new a.Color(0,0,1,1),Dl=new a.Color(1,0,1,1),Ac=new a.Color(0,1,1,1);function ri(L,c,_,l){hi(L,0,c+_/2,L.transform.width,_,l)}function $r(L,c,_,l){hi(L,c-_/2,0,_,L.transform.height,l)}function hi(L,c,_,l,h,d){const x=L.context,b=x.gl;b.enable(b.SCISSOR_TEST),b.scissor(c*L.pixelRatio,_*L.pixelRatio,l*L.pixelRatio,h*L.pixelRatio),x.clear({color:d}),b.disable(b.SCISSOR_TEST)}function au(L,c,_){const l=L.context,h=l.gl,d=_.posMatrix,x=L.useProgram("debug"),b=nr.disabled,S=Br.disabled,P=L.colorModeForRenderPass(),B="$debug",V=L.style.terrain&&L.style.terrain.getTerrainData(_);l.activeTexture.set(h.TEXTURE0),L.emptyTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE);const $=c.getTileByID(_.key).latestRawTileData,X=Math.floor(($&&$.byteLength||0)/1024),oe=c.getTile(_).tileSize,ne=512/Math.min(oe,512)*(_.overscaledZ/L.transform.zoom)*.5;let ue=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(ue+=` => ${_.overscaledZ}`),function(Te,Ie){Te.initDebugOverlayCanvas();const we=Te.debugOverlayCanvas,$e=Te.context.gl,Me=Te.debugOverlayCanvas.getContext("2d");Me.clearRect(0,0,we.width,we.height),Me.shadowColor="white",Me.shadowBlur=2,Me.lineWidth=1.5,Me.strokeStyle="white",Me.textBaseline="top",Me.font="bold 36px Open Sans, sans-serif",Me.fillText(Ie,5,5),Me.strokeText(Ie,5,5),Te.debugOverlayTexture.update(we),Te.debugOverlayTexture.bind($e.LINEAR,$e.CLAMP_TO_EDGE)}(L,`${ue} ${X}kB`),x.draw(l,h.TRIANGLES,b,S,Tr.alphaBlended,Mr.disabled,me(d,a.Color.transparent,ne),null,B,L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments),x.draw(l,h.LINE_STRIP,b,S,P,Mr.disabled,me(d,a.Color.red),V,B,L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments)}function Ws(L,c,_){const l=L.context,h=l.gl,d=L.colorModeForRenderPass(),x=new nr(h.LEQUAL,nr.ReadWrite,L.depthRangeFor3D),b=L.useProgram("terrain"),S=c.getTerrainMesh(),P=c.getTerrainData(_.tileID);l.bindFramebuffer.set(null),l.viewport.set([0,0,L.width,L.height]),l.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,c.getRTTFramebuffer().colorAttachment.get());const B=L.transform.calculatePosMatrix(_.tileID.toUnwrapped());b.draw(l,h.TRIANGLES,x,Br.disabled,d,Mr.backCCW,{u_matrix:B,u_texture:0},P,"terrain",S.vertexBuffer,S.indexBuffer,S.segments)}function uc(L,c,_,l){const h=L.context,d=_.tileSize*c.qualityFactor;_.textures[l]||(_.textures[l]=L.getTileTexture(d)||new q(h,{width:d,height:d,data:null},h.gl.RGBA),_.textures[l].bind(h.gl.LINEAR,h.gl.CLAMP_TO_EDGE),l===0&&c.sourceCache.renderHistory.unshift(_.tileID.key));const x=c.getRTTFramebuffer();x.colorAttachment.set(_.textures[l].texture),h.bindFramebuffer.set(x.framebuffer),h.viewport.set([0,0,d,d])}class wA{constructor(c){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=c,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=c.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const c=this.painter.style,_=c.terrain;for(const l in c.sourceCaches){this._coordsDescendingInv[l]={};const h=c.sourceCaches[l].getVisibleCoordinates();for(const d of h){const x=_.sourceCache.getTerrainCoords(d);for(const b in x)this._coordsDescendingInv[l][b]||(this._coordsDescendingInv[l][b]=[]),this._coordsDescendingInv[l][b].push(x[b])}}for(const l of c._order){const h=c._layers[l],d=h.source;if(this._renderToTexture[h.type]&&!this._coordsDescendingInvStr[d]){this._coordsDescendingInvStr[d]={};for(const x in this._coordsDescendingInv[d])this._coordsDescendingInvStr[d][x]=this._coordsDescendingInv[d][x].map(b=>b.key).sort().join()}}return this._renderableTiles.forEach(l=>{for(const h in this._coordsDescendingInvStr){const d=this._coordsDescendingInvStr[h][l.tileID.key];d&&d!==l.textureCoords[h]&&l.clearTextures(this.painter),_.needsRerender(h,l.tileID)&&l.clearTextures(this.painter)}this._rerender[l.tileID.key]=!l.textures.length}),_.clearRerenderCache(),_.sourceCache.removeOutdated(this.painter),this}renderLayer(c){const _=c.type,l=this.painter,h=l.style._order,d=l.currentLayer,x=d+1===h.length;if(this._renderToTexture[_]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(h[d]),!x))return!0;if(this._renderToTexture[this._prevType]||_==="hillshade"||this._renderToTexture[_]&&x){this._prevType=_;const b=this._stacks.length-1,S=this._stacks[b]||[];for(const P of this._renderableTiles){if(uc(l,l.style.terrain,P,b),this._rerender[P.tileID.key]){l.context.clear({color:a.Color.transparent});for(let B=0;B<S.length;B++){const V=l.style._layers[S[B]],$=V.source?this._coordsDescendingInv[V.source][P.tileID.key]:[P.tileID];l._renderTileClippingMasks(V,$),l.renderLayer(l,l.style.sourceCaches[V.source],V,$),V.source&&(P.textureCoords[V.source]=this._coordsDescendingInvStr[V.source][P.tileID.key])}}Ws(l,l.style.terrain,P)}if(_==="hillshade"){this._stacks.push([h[d]]);for(const P of this._renderableTiles){const B=this._coordsDescendingInv[c.source][P.tileID.key];uc(l,l.style.terrain,P,this._stacks.length-1),l.context.clear({color:a.Color.transparent}),l._renderTileClippingMasks(c,B),l.renderLayer(l,l.style.sourceCaches[c.source],c,B),Ws(l,l.style.terrain,P)}return!0}return this._renderToTexture[_]}return!1}}const _i={symbol:function(L,c,_,l,h){if(L.renderPass!=="translucent")return;const d=Br.disabled,x=L.colorModeForRenderPass();_.layout.get("text-variable-anchor")&&function(b,S,P,B,V,$,X){const oe=S.transform,ne=V==="map",ue=$==="map";for(const Te of b){const Ie=B.getTile(Te),we=Ie.getBucket(P);if(!we||!we.text||!we.text.segments.get().length)continue;const $e=a.evaluateSizeForZoom(we.textSizeData,oe.zoom),Me=Lt(Ie,1,S.transform.zoom),je=is(Te.posMatrix,ue,ne,S.transform,Me),be=P.layout.get("icon-text-fit")!=="none"&&we.hasIconData();if($e){const m=Math.pow(2,oe.zoom-Ie.tileID.overscaledZ);lc(we,ne,ue,X,oe,je,Te.posMatrix,m,$e,be,S.style.terrain?(g,v)=>S.style.terrain.getElevation(Te,g,v):null)}}}(l,L,_,c,_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),h),_.paint.get("icon-opacity").constantOr(1)!==0&&Hs(L,c,_,l,!1,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),_.layout.get("icon-rotation-alignment"),_.layout.get("icon-pitch-alignment"),_.layout.get("icon-keep-upright"),d,x),_.paint.get("text-opacity").constantOr(1)!==0&&Hs(L,c,_,l,!0,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),_.layout.get("text-keep-upright"),d,x),c.map.showCollisionBoxes&&(Zo(L,c,_,l,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),!0),Zo(L,c,_,l,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),!1))},circle:function(L,c,_,l){if(L.renderPass!=="translucent")return;const h=_.paint.get("circle-opacity"),d=_.paint.get("circle-stroke-width"),x=_.paint.get("circle-stroke-opacity"),b=!_.layout.get("circle-sort-key").isConstant();if(h.constantOr(1)===0&&(d.constantOr(1)===0||x.constantOr(1)===0))return;const S=L.context,P=S.gl,B=L.depthModeForSublayer(0,nr.ReadOnly),V=Br.disabled,$=L.colorModeForRenderPass(),X=[];for(let oe=0;oe<l.length;oe++){const ne=l[oe],ue=c.getTile(ne),Te=ue.getBucket(_);if(!Te)continue;const Ie=Te.programConfigurations.get(_.id),we=L.useProgram("circle",Ie),$e=Te.layoutVertexBuffer,Me=Te.indexBuffer,je=L.style.terrain&&L.style.terrain.getTerrainData(ne),be={programConfiguration:Ie,program:we,layoutVertexBuffer:$e,indexBuffer:Me,uniformValues:da(L,ne,ue,_),terrainData:je};if(b){const m=Te.segments.get();for(const g of m)X.push({segments:new a.SegmentVector([g]),sortKey:g.sortKey,state:be})}else X.push({segments:Te.segments,sortKey:0,state:be})}b&&X.sort((oe,ne)=>oe.sortKey-ne.sortKey);for(const oe of X){const{programConfiguration:ne,program:ue,layoutVertexBuffer:Te,indexBuffer:Ie,uniformValues:we,terrainData:$e}=oe.state;ue.draw(S,P.TRIANGLES,B,V,$,Mr.disabled,we,$e,_.id,Te,Ie,oe.segments,_.paint,L.transform.zoom,ne)}},heatmap:function(L,c,_,l){if(_.paint.get("heatmap-opacity")!==0)if(L.renderPass==="offscreen"){const h=L.context,d=h.gl,x=Br.disabled,b=new Tr([d.ONE,d.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(S,P,B){const V=S.gl;S.activeTexture.set(V.TEXTURE1),S.viewport.set([0,0,P.width/4,P.height/4]);let $=B.heatmapFbo;if($)V.bindTexture(V.TEXTURE_2D,$.colorAttachment.get()),S.bindFramebuffer.set($.framebuffer);else{const X=V.createTexture();V.bindTexture(V.TEXTURE_2D,X),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.LINEAR),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.LINEAR),$=B.heatmapFbo=S.createFramebuffer(P.width/4,P.height/4,!1),function(oe,ne,ue,Te){const Ie=oe.gl;Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,ne.width/4,ne.height/4,0,Ie.RGBA,oe.extRenderToTextureHalfFloat?oe.extTextureHalfFloat.HALF_FLOAT_OES:Ie.UNSIGNED_BYTE,null),Te.colorAttachment.set(ue)}(S,P,X,$)}})(h,L,_),h.clear({color:a.Color.transparent});for(let S=0;S<l.length;S++){const P=l[S];if(c.hasRenderableParent(P))continue;const B=c.getTile(P),V=B.getBucket(_);if(!V)continue;const $=V.programConfigurations.get(_.id),X=L.useProgram("heatmap",$),{zoom:oe}=L.transform;X.draw(h,d.TRIANGLES,nr.disabled,x,b,Mr.disabled,Ve(P.posMatrix,B,oe,_.paint.get("heatmap-intensity")),null,_.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,_.paint,L.transform.zoom,$)}h.viewport.set([0,0,L.width,L.height])}else L.renderPass==="translucent"&&(L.context.setColorMode(L.colorModeForRenderPass()),function(h,d){const x=h.context,b=x.gl,S=d.heatmapFbo;if(!S)return;x.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,S.colorAttachment.get()),x.activeTexture.set(b.TEXTURE1);let P=d.colorRampTexture;P||(P=d.colorRampTexture=new q(x,d.colorRamp,b.RGBA)),P.bind(b.LINEAR,b.CLAMP_TO_EDGE),h.useProgram("heatmapTexture").draw(x,b.TRIANGLES,nr.disabled,Br.disabled,h.colorModeForRenderPass(),Mr.disabled,((B,V,$,X)=>{const oe=a.create();a.ortho(oe,0,B.width,B.height,0,0,1);const ne=B.context.gl;return{u_matrix:oe,u_world:[ne.drawingBufferWidth,ne.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:V.paint.get("heatmap-opacity")}})(h,d),null,d.id,h.viewportBuffer,h.quadTriangleIndexBuffer,h.viewportSegments,d.paint,h.transform.zoom)}(L,_))},line:function(L,c,_,l){if(L.renderPass!=="translucent")return;const h=_.paint.get("line-opacity"),d=_.paint.get("line-width");if(h.constantOr(1)===0||d.constantOr(1)===0)return;const x=L.depthModeForSublayer(0,nr.ReadOnly),b=L.colorModeForRenderPass(),S=_.paint.get("line-dasharray"),P=_.paint.get("line-pattern"),B=P.constantOr(1),V=_.paint.get("line-gradient"),$=_.getCrossfadeParameters(),X=B?"linePattern":S?"lineSDF":V?"lineGradient":"line",oe=L.context,ne=oe.gl;let ue=!0;for(const Te of l){const Ie=c.getTile(Te);if(B&&!Ie.patternsLoaded())continue;const we=Ie.getBucket(_);if(!we)continue;const $e=we.programConfigurations.get(_.id),Me=L.context.program.get(),je=L.useProgram(X,$e),be=ue||je.program!==Me,m=L.style.terrain&&L.style.terrain.getTerrainData(Te),g=P.constantOr(null);if(g&&Ie.imageAtlas){const I=Ie.imageAtlas,R=I.patternPositions[g.to.toString()],O=I.patternPositions[g.from.toString()];R&&O&&$e.setConstantPatternPositions(R,O)}const v=m?Te:null,E=B?Hn(L,Ie,_,$,v):S?Gr(L,Ie,_,S,$,v):V?tn(L,Ie,_,we.lineClipsArray.length,v):Ct(L,Ie,_,v);if(B)oe.activeTexture.set(ne.TEXTURE0),Ie.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),$e.updatePaintBuffers($);else if(S&&(be||L.lineAtlas.dirty))oe.activeTexture.set(ne.TEXTURE0),L.lineAtlas.bind(oe);else if(V){const I=we.gradients[_.id];let R=I.texture;if(_.gradientVersion!==I.version){let O=256;if(_.stepInterpolant){const N=c.getSource().maxzoom,Q=Te.canonical.z===N?Math.ceil(1<<L.transform.maxZoom-Te.canonical.z):1;O=a.clamp(a.nextPowerOfTwo(we.maxLineLength/a.EXTENT*1024*Q),256,oe.maxTextureSize)}I.gradient=a.renderColorRamp({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:O,image:I.gradient||void 0,clips:we.lineClipsArray}),I.texture?I.texture.update(I.gradient):I.texture=new q(oe,I.gradient,ne.RGBA),I.version=_.gradientVersion,R=I.texture}oe.activeTexture.set(ne.TEXTURE0),R.bind(_.stepInterpolant?ne.NEAREST:ne.LINEAR,ne.CLAMP_TO_EDGE)}je.draw(oe,ne.TRIANGLES,x,L.stencilModeForClipping(Te),b,Mr.disabled,E,m,_.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,_.paint,L.transform.zoom,$e,we.layoutVertexBuffer2),ue=!1}},fill:function(L,c,_,l){const h=_.paint.get("fill-color"),d=_.paint.get("fill-opacity");if(d.constantOr(1)===0)return;const x=L.colorModeForRenderPass(),b=_.paint.get("fill-pattern"),S=L.opaquePassEnabledForLayer()&&!b.constantOr(1)&&h.constantOr(a.Color.transparent).a===1&&d.constantOr(0)===1?"opaque":"translucent";if(L.renderPass===S){const P=L.depthModeForSublayer(1,L.renderPass==="opaque"?nr.ReadWrite:nr.ReadOnly);Za(L,c,_,l,P,x,!1)}if(L.renderPass==="translucent"&&_.paint.get("fill-antialias")){const P=L.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,nr.ReadOnly);Za(L,c,_,l,P,x,!0)}},"fill-extrusion":function(L,c,_,l){const h=_.paint.get("fill-extrusion-opacity");if(h!==0&&L.renderPass==="translucent"){const d=new nr(L.context.gl.LEQUAL,nr.ReadWrite,L.depthRangeFor3D);if(h!==1||_.paint.get("fill-extrusion-pattern").constantOr(1))ya(L,c,_,l,d,Br.disabled,Tr.disabled),ya(L,c,_,l,d,L.stencilModeFor3D(),L.colorModeForRenderPass());else{const x=L.colorModeForRenderPass();ya(L,c,_,l,d,Br.disabled,x)}}},hillshade:function(L,c,_,l){if(L.renderPass!=="offscreen"&&L.renderPass!=="translucent")return;const h=L.context,d=L.depthModeForSublayer(0,nr.ReadOnly),x=L.colorModeForRenderPass(),[b,S]=L.renderPass==="translucent"?L.stencilConfigForOverlap(l):[{},l];for(const P of S){const B=c.getTile(P);B.needsHillshadePrepare!==void 0&&B.needsHillshadePrepare&&L.renderPass==="offscreen"?Ll(L,B,_,d,Br.disabled,x):L.renderPass==="translucent"&&kl(L,P,B,_,d,b[P.overscaledZ],x)}h.viewport.set([0,0,L.width,L.height])},raster:function(L,c,_,l){if(L.renderPass!=="translucent"||_.paint.get("raster-opacity")===0||!l.length)return;const h=L.context,d=h.gl,x=c.getSource(),b=L.useProgram("raster"),S=L.colorModeForRenderPass(),[P,B]=x instanceof Tt?[{},l]:L.stencilConfigForOverlap(l),V=B[B.length-1].overscaledZ,$=!L.options.moving;for(const X of B){const oe=L.depthModeForSublayer(X.overscaledZ-V,_.paint.get("raster-opacity")===1?nr.ReadWrite:nr.ReadOnly,d.LESS),ne=c.getTile(X);ne.registerFadeDuration(_.paint.get("raster-fade-duration"));const ue=c.findLoadedParent(X,0),Te=Cr(ne,ue,c,_,L.transform,L.style.terrain);let Ie,we;const $e=_.paint.get("raster-resampling")==="nearest"?d.NEAREST:d.LINEAR;h.activeTexture.set(d.TEXTURE0),ne.texture.bind($e,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),h.activeTexture.set(d.TEXTURE1),ue?(ue.texture.bind($e,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,ue.tileID.overscaledZ-ne.tileID.overscaledZ),we=[ne.tileID.canonical.x*Ie%1,ne.tileID.canonical.y*Ie%1]):ne.texture.bind($e,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST);const Me=L.style.terrain&&L.style.terrain.getTerrainData(X),je=Me?X:null,be=je?je.posMatrix:L.transform.calculatePosMatrix(X.toUnwrapped(),$),m=tr(be,we||[0,0],Ie||1,Te,_);x instanceof Tt?b.draw(h,d.TRIANGLES,oe,Br.disabled,S,Mr.disabled,m,Me,_.id,x.boundsBuffer,L.quadTriangleIndexBuffer,x.boundsSegments):b.draw(h,d.TRIANGLES,oe,P[X.overscaledZ],S,Mr.disabled,m,Me,_.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}},background:function(L,c,_,l){const h=_.paint.get("background-color"),d=_.paint.get("background-opacity");if(d===0)return;const x=L.context,b=x.gl,S=L.transform,P=S.tileSize,B=_.paint.get("background-pattern");if(L.isPatternMissing(B))return;const V=!B&&h.a===1&&d===1&&L.opaquePassEnabledForLayer()?"opaque":"translucent";if(L.renderPass!==V)return;const $=Br.disabled,X=L.depthModeForSublayer(0,V==="opaque"?nr.ReadWrite:nr.ReadOnly),oe=L.colorModeForRenderPass(),ne=L.useProgram(B?"backgroundPattern":"background"),ue=l||S.coveringTiles({tileSize:P,terrain:L.style.terrain});B&&(x.activeTexture.set(b.TEXTURE0),L.imageManager.bind(L.context));const Te=_.getCrossfadeParameters();for(const Ie of ue){const we=l?Ie.posMatrix:L.transform.calculatePosMatrix(Ie.toUnwrapped()),$e=B?gA(we,d,L,B,{tileID:Ie,tileSize:P},Te):XA(we,d,h),Me=L.style.terrain&&L.style.terrain.getTerrainData(Ie);ne.draw(x,b.TRIANGLES,X,$,oe,Mr.disabled,$e,Me,_.id,L.tileExtentBuffer,L.quadTriangleIndexBuffer,L.tileExtentSegments)}},debug:function(L,c,_){for(let l=0;l<_.length;l++)au(L,c,_[l])},custom:function(L,c,_){const l=L.context,h=_.implementation;if(L.renderPass==="offscreen"){const d=h.prerender;d&&(L.setCustomLayerDefaults(),l.setColorMode(L.colorModeForRenderPass()),d.call(h,l.gl,L.transform.customLayerMatrix()),l.setDirty(),L.setBaseState())}else if(L.renderPass==="translucent"){L.setCustomLayerDefaults(),l.setColorMode(L.colorModeForRenderPass()),l.setStencilMode(Br.disabled);const d=h.renderingMode==="3d"?new nr(L.context.gl.LEQUAL,nr.ReadWrite,L.depthRangeFor3D):L.depthModeForSublayer(0,nr.ReadOnly);l.setDepthMode(d),h.render(l.gl,L.transform.customLayerMatrix()),l.setDirty(),L.setBaseState(),l.bindFramebuffer.set(null)}}};class zi{constructor(c,_){this.context=new $s(c),this.transform=_,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=St.maxUnderzooming+St.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ut,this.gpuTimers={}}resize(c,_,l){if(this.width=c*l,this.height=_*l,this.pixelRatio=l,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const h of this.style._order)this.style._layers[h].resize()}setup(){const c=this.context,_=new a.PosArray;_.emplaceBack(0,0),_.emplaceBack(a.EXTENT,0),_.emplaceBack(0,a.EXTENT),_.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(_,xn.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const l=new a.PosArray;l.emplaceBack(0,0),l.emplaceBack(a.EXTENT,0),l.emplaceBack(0,a.EXTENT),l.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=c.createVertexBuffer(l,xn.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const h=new a.RasterBoundsArray;h.emplaceBack(0,0,0,0),h.emplaceBack(a.EXTENT,0,a.EXTENT,0),h.emplaceBack(0,a.EXTENT,0,a.EXTENT),h.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=c.createVertexBuffer(h,xt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const d=new a.PosArray;d.emplaceBack(0,0),d.emplaceBack(1,0),d.emplaceBack(0,1),d.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(d,xn.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const x=new a.LineStripIndexArray;x.emplaceBack(0),x.emplaceBack(1),x.emplaceBack(3),x.emplaceBack(2),x.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(x);const b=new a.TriangleIndexArray;b.emplaceBack(0,1,2),b.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(b),this.emptyTexture=new q(c,{width:1,height:1,data:new Uint8Array([0,0,0,0])},c.gl.RGBA);const S=this.context.gl;this.stencilClearMode=new Br({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)}clearStencil(){const c=this.context,_=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const l=a.create();a.ortho(l,0,this.width,this.height,0,0,1),a.scale(l,l,[_.drawingBufferWidth,_.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,_.TRIANGLES,nr.disabled,this.stencilClearMode,Tr.disabled,Mr.disabled,Se(l),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,_){if(this.currentStencilSource===c.source||!c.isTileClipped()||!_||!_.length)return;this.currentStencilSource=c.source;const l=this.context,h=l.gl;this.nextStencilID+_.length>256&&this.clearStencil(),l.setColorMode(Tr.disabled),l.setDepthMode(nr.disabled);const d=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const x of _){const b=this._tileClippingMaskIDs[x.key]=this.nextStencilID++,S=this.style.terrain&&this.style.terrain.getTerrainData(x);d.draw(l,h.TRIANGLES,nr.disabled,new Br({func:h.ALWAYS,mask:0},b,255,h.KEEP,h.KEEP,h.REPLACE),Tr.disabled,Mr.disabled,Se(x.posMatrix),S,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,_=this.context.gl;return new Br({func:_.NOTEQUAL,mask:255},c,255,_.KEEP,_.KEEP,_.REPLACE)}stencilModeForClipping(c){const _=this.context.gl;return new Br({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,_.KEEP,_.KEEP,_.REPLACE)}stencilConfigForOverlap(c){const _=this.context.gl,l=c.sort((x,b)=>b.overscaledZ-x.overscaledZ),h=l[l.length-1].overscaledZ,d=l[0].overscaledZ-h+1;if(d>1){this.currentStencilSource=void 0,this.nextStencilID+d>256&&this.clearStencil();const x={};for(let b=0;b<d;b++)x[b+h]=new Br({func:_.GEQUAL,mask:255},b+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=d,[x,l]}return[{[h]:Br.disabled},l]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new Tr([c.CONSTANT_COLOR,c.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Tr.unblended:Tr.alphaBlended}depthModeForSublayer(c,_,l){if(!this.opaquePassEnabledForLayer())return nr.disabled;const h=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new nr(l||this.context.gl.LEQUAL,_,[h,h])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,_){this.style=c,this.options=_,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const l=this.style._order,h=this.style.sourceCaches,d=this.style.terrain&&new wA(this);for(const P in h){const B=h[P];B.used&&B.prepare(this.context)}const x={},b={},S={};for(const P in h){const B=h[P];x[P]=B.getVisibleCoordinates(),b[P]=x[P].slice().reverse(),S[P]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<l.length;P++)if(this.style._layers[l[P]].is3D()){this.opaquePassCutoff=P;break}if(d){this.opaquePassCutoff=0;const P=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(B,V){const $=B.context,X=$.gl,oe=Tr.unblended,ne=new nr(X.LEQUAL,nr.ReadWrite,[0,1]),ue=V.getTerrainMesh(),Te=V.sourceCache.getRenderableTiles(),Ie=B.useProgram("terrainDepth");$.bindFramebuffer.set(V.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),$.clear({color:a.Color.transparent,depth:1});for(const we of Te){const $e=V.getTerrainData(we.tileID),Me=B.transform.calculatePosMatrix(we.tileID.toUnwrapped());Ie.draw($,X.TRIANGLES,ne,Br.disabled,oe,Mr.backCCW,{u_matrix:Me},$e,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,B.width,B.height])}(this,this.style.terrain),function(B,V){const $=B.context,X=$.gl,oe=Tr.unblended,ne=new nr(X.LEQUAL,nr.ReadWrite,[0,1]),ue=V.getTerrainMesh(),Te=V.getCoordsTexture(),Ie=V.sourceCache.getRenderableTiles(),we=B.useProgram("terrainCoords");$.bindFramebuffer.set(V.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),$.clear({color:a.Color.transparent,depth:1}),V.coordsIndex=[];for(const $e of Ie){const Me=V.getTerrainData($e.tileID);$.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,Te.texture);const je=B.transform.calculatePosMatrix($e.tileID.toUnwrapped());we.draw($,X.TRIANGLES,ne,Br.disabled,oe,Mr.backCCW,{u_matrix:je,u_terrain_coords_id:(255-V.coordsIndex.length)/255,u_texture:0},Me,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments),V.coordsIndex.push($e.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,B.width,B.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const P of l){const B=this.style._layers[P];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const V=b[B.source];(B.type==="custom"||V.length)&&this.renderLayer(this,h[B.source],B,V)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:_.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!d)for(this.renderPass="opaque",this.currentLayer=l.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[l[this.currentLayer]],B=h[P.source],V=x[P.source];this._renderTileClippingMasks(P,V),this.renderLayer(this,B,P,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<l.length;this.currentLayer++){const P=this.style._layers[l[this.currentLayer]],B=h[P.source];if(d&&d.renderLayer(P))continue;const V=(P.type==="symbol"?S:b)[P.source];this._renderTileClippingMasks(P,x[P.source]),this.renderLayer(this,B,P,V)}if(this.options.showTileBoundaries){let P,B;Object.values(this.style._layers).forEach(V=>{V.source&&!V.isHidden(this.transform.zoom)&&(V.source!==(B&&B.id)&&(B=this.style.sourceCaches[V.source]),(!P||P.getSource().maxzoom<B.getSource().maxzoom)&&(P=B))}),P&&_i.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const B=P.transform.padding;ri(P,P.transform.height-(B.top||0),3,xA),ri(P,B.bottom||0,3,ps),$r(P,B.left||0,3,ou),$r(P,P.transform.width-(B.right||0),3,Dl);const V=P.transform.centerPoint;(function($,X,oe,ne){hi($,X-1,oe-10,2,20,ne),hi($,X-10,oe-1,20,2,ne)})(P,V.x,P.transform.height-V.y,Ac)}(this),this.context.setDefault()}renderLayer(c,_,l,h){l.isHidden(this.transform.zoom)||(l.type==="background"||l.type==="custom"||(h||[]).length)&&(this.id=l.id,this.gpuTimingStart(l),_i[l.type](c,_,l,h,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const _=this.context.extTimerQuery;let l=this.gpuTimers[c.id];l||(l=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:_.createQueryEXT()}),l.calls++,_.beginQueryEXT(_.TIME_ELAPSED_EXT,l.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}queryGpuTimers(c){const _={};for(const l in c){const h=c[l],d=this.context.extTimerQuery,x=d.getQueryObjectEXT(h.query,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(h.query),_[l]=x}return _}translatePosMatrix(c,_,l,h,d){if(!l[0]&&!l[1])return c;const x=d?h==="map"?this.transform.angle:0:h==="viewport"?-this.transform.angle:0;if(x){const P=Math.sin(x),B=Math.cos(x);l=[l[0]*B-l[1]*P,l[0]*P+l[1]*B]}const b=[d?l[0]:Lt(_,l[0],this.transform.zoom),d?l[1]:Lt(_,l[1],this.transform.zoom),0],S=new Float32Array(16);return a.translate(S,c,b),S}saveTileTexture(c){const _=this._tileTextures[c.size[0]];_?_.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const _=this._tileTextures[c];return _&&_.length>0?_.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const _=this.imageManager.getPattern(c.from.toString()),l=this.imageManager.getPattern(c.to.toString());return!_||!l}useProgram(c,_){this.cache=this.cache||{};const l=c+(_?_.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[l]||(this.cache[l]=new ja(this.context,c,yi[c],_,bl[c],this._showOverdrawInspector,this.style.terrain)),this.cache[l]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class gs{constructor(c,_){this.points=c,this.planes=_}static fromInvProjectionMatrix(c,_,l){const h=Math.pow(2,l),d=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(b=>{const S=1/(b=a.transformMat4([],b,c))[3]/_*h;return a.mul$1(b,b,[S,S,1/b[3],S])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(b=>{const S=a.sub([],d[b[0]],d[b[1]]),P=a.sub([],d[b[2]],d[b[1]]),B=a.normalize([],a.cross([],S,P)),V=-a.dot(B,d[b[1]]);return B.concat(V)});return new gs(d,x)}}class _a{constructor(c,_){this.min=c,this.max=_,this.center=a.scale$1([],a.add([],this.min,this.max),.5)}quadrant(c){const _=[c%2==0,c<2],l=a.clone$2(this.min),h=a.clone$2(this.max);for(let d=0;d<_.length;d++)l[d]=_[d]?this.min[d]:this.center[d],h[d]=_[d]?this.center[d]:this.max[d];return h[2]=this.max[2],new _a(l,h)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersects(c){const _=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let l=!0;for(let h=0;h<c.planes.length;h++){const d=c.planes[h];let x=0;for(let b=0;b<_.length;b++)a.dot$1(d,_[b])>=0&&x++;if(x===0)return 0;x!==_.length&&(l=!1)}if(l)return 2;for(let h=0;h<3;h++){let d=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let b=0;b<c.points.length;b++){const S=c.points[b][h]-this.min[h];d=Math.min(d,S),x=Math.max(x,S)}if(x<0||d>this.max[h]-this.min[h])return 0}return 1}}class ss{constructor(c=0,_=0,l=0,h=0){if(isNaN(c)||c<0||isNaN(_)||_<0||isNaN(l)||l<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=_,this.left=l,this.right=h}interpolate(c,_,l){return _.top!=null&&c.top!=null&&(this.top=a.number(c.top,_.top,l)),_.bottom!=null&&c.bottom!=null&&(this.bottom=a.number(c.bottom,_.bottom,l)),_.left!=null&&c.left!=null&&(this.left=a.number(c.left,_.left,l)),_.right!=null&&c.right!=null&&(this.right=a.number(c.right,_.right,l)),this}getCenter(c,_){const l=a.clamp((this.left+c-this.right)/2,0,c),h=a.clamp((this.top+_-this.bottom)/2,0,_);return new a.pointGeometry(l,h)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new ss(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Eo{constructor(c,_,l,h,d){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=d===void 0||!!d,this._minZoom=c||0,this._maxZoom=_||22,this._minPitch=l??0,this._maxPitch=h??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ss,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const c=new Eo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.tileSize=this.tileSize,c.latRange=this.latRange,c.width=this.width,c.height=this.height,c._center=this._center,c._elevation=this._elevation,c.zoom=this.zoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(c){const _=-a.wrap(c,-180,180)*Math.PI/180;var l;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=(l=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0),l[0]=1,l[3]=1,l),function(h,d,x){var b=d[0],S=d[1],P=d[2],B=d[3],V=Math.sin(x),$=Math.cos(x);h[0]=b*$+P*V,h[1]=S*$+B*V,h[2]=b*-V+P*$,h[3]=S*-V+B*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const _=a.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(c){const _=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._zoom=_,this.scale=this.zoomScale(_),this.tileZoom=Math.floor(_),this.zoomFraction=_-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(c){c!==this._elevation&&(this._elevation=c,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,_,l){this._unmodified=!1,this._edgeInsets.interpolate(c,_,l),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const _=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,_)}getVisibleUnwrappedCoordinates(c){const _=[new a.UnwrappedTileID(0,c)];if(this._renderWorldCopies){const l=this.pointCoordinate(new a.pointGeometry(0,0)),h=this.pointCoordinate(new a.pointGeometry(this.width,0)),d=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),x=this.pointCoordinate(new a.pointGeometry(0,this.height)),b=Math.floor(Math.min(l.x,h.x,d.x,x.x)),S=Math.floor(Math.max(l.x,h.x,d.x,x.x)),P=1;for(let B=b-P;B<=S+P;B++)B!==0&&_.push(new a.UnwrappedTileID(B,c))}return _}coveringTiles(c){var _,l;let h=this.coveringZoomLevel(c);const d=h;if(c.minzoom!==void 0&&h<c.minzoom)return[];c.maxzoom!==void 0&&h>c.maxzoom&&(h=c.maxzoom);const x=this.pointCoordinate(this.getCameraPoint()),b=a.MercatorCoordinate.fromLngLat(this.center),S=Math.pow(2,h),P=[S*x.x,S*x.y,0],B=[S*b.x,S*b.y,0],V=gs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h);let $=c.minzoom||0;!c.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&($=h);const X=c.terrain?2/Math.min(this.tileSize,c.tileSize)*this.tileSize:3,oe=we=>({aabb:new _a([we*S,0,0],[(we+1)*S,S,0]),zoom:0,x:0,y:0,wrap:we,fullyVisible:!1}),ne=[],ue=[],Te=h,Ie=c.reparseOverscaled?d:h;if(this._renderWorldCopies)for(let we=1;we<=3;we++)ne.push(oe(-we)),ne.push(oe(we));for(ne.push(oe(0));ne.length>0;){const we=ne.pop(),$e=we.x,Me=we.y;let je=we.fullyVisible;if(!je){const I=we.aabb.intersects(V);if(I===0)continue;je=I===2}const be=c.terrain?P:B,m=we.aabb.distanceX(be),g=we.aabb.distanceY(be),v=Math.max(Math.abs(m),Math.abs(g)),E=X+(1<<Te-we.zoom)-2;if(we.zoom===Te||v>E&&we.zoom>=$){const I=Te-we.zoom,R=P[0]-.5-($e<<I),O=P[1]-.5-(Me<<I);ue.push({tileID:new a.OverscaledTileID(we.zoom===Te?Ie:we.zoom,we.wrap,we.zoom,$e,Me),distanceSq:a.sqrLen([B[0]-.5-$e,B[1]-.5-Me]),tileDistanceToCamera:Math.sqrt(R*R+O*O)})}else for(let I=0;I<4;I++){const R=($e<<1)+I%2,O=(Me<<1)+(I>>1),N=we.zoom+1;let Q=we.aabb.quadrant(I);if(c.terrain){const te=new a.OverscaledTileID(N,we.wrap,N,R,O),le=c.terrain.getMinMaxElevation(te),pe=(_=le.minElevation)!==null&&_!==void 0?_:this.elevation,Be=(l=le.maxElevation)!==null&&l!==void 0?l:this.elevation;Q=new _a([Q.min[0],Q.min[1],pe],[Q.max[0],Q.max[1],Be])}ne.push({aabb:Q,zoom:N,x:R,y:O,wrap:we.wrap,fullyVisible:je})}}return ue.sort((we,$e)=>we.distanceSq-$e.distanceSq).map(we=>we.tileID)}resize(c,_){this.width=c,this.height=_,this.pixelsToGLUnits=[2/c,-2/_],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const _=a.clamp(c.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(c.lng)*this.worldSize,a.mercatorYfromLat(_)*this.worldSize)}unproject(c){return new a.MercatorCoordinate(c.x/this.worldSize,c.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(c){this.freezeElevation||(this.elevation=c?this.getElevation(this._center,c):0)}getElevation(c,_){const l=a.MercatorCoordinate.fromLngLat(c),h=(1<<this.tileZoom)*a.EXTENT,d=l.x*h,x=l.y*h,b=Math.floor(d/a.EXTENT),S=Math.floor(x/a.EXTENT),P=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,b,S);return _.getElevation(P,d%a.EXTENT,x%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(c){const _=this.pointLocation(this.centerPoint,c),l=this.getElevation(_,c);if(!(this.elevation-l))return;const h=this.getCameraPosition(),d=a.MercatorCoordinate.fromLngLat(h.lngLat,h.altitude),x=a.MercatorCoordinate.fromLngLat(_,l),b=d.x-x.x,S=d.y-x.y,P=d.z-x.z,B=Math.sqrt(b*b+S*S+P*P),V=this.scaleZoom(this.cameraToCenterDistance/B/this.tileSize);this._elevation=l,this._center=_,this.zoom=V}setLocationAtPoint(c,_){const l=this.pointCoordinate(_),h=this.pointCoordinate(this.centerPoint),d=this.locationCoordinate(c),x=new a.MercatorCoordinate(d.x-(l.x-h.x),d.y-(l.y-h.y));this.center=this.coordinateLocation(x),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(c,_){return _?this.coordinatePoint(this.locationCoordinate(c),this.getElevation(c,_),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(c))}pointLocation(c,_){return this.coordinateLocation(this.pointCoordinate(c,_))}locationCoordinate(c){return a.MercatorCoordinate.fromLngLat(c)}coordinateLocation(c){return c&&c.toLngLat()}pointCoordinate(c,_){if(_){const $=_.pointCoordinate(c);if($!=null)return $}const l=[c.x,c.y,0,1],h=[c.x,c.y,1,1];a.transformMat4(l,l,this.pixelMatrixInverse),a.transformMat4(h,h,this.pixelMatrixInverse);const d=l[3],x=h[3],b=l[1]/d,S=h[1]/x,P=l[2]/d,B=h[2]/x,V=P===B?0:(0-P)/(B-P);return new a.MercatorCoordinate(a.number(l[0]/d,h[0]/x,V)/this.worldSize,a.number(b,S,V)/this.worldSize)}coordinatePoint(c,_=0,l=this.pixelMatrix){const h=[c.x*this.worldSize,c.y*this.worldSize,_,1];return a.transformMat4(h,h,l),new a.pointGeometry(h[0]/h[3],h[1]/h[3])}getBounds(){const c=Math.max(0,this.height/2-this.getHorizon());return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,c))).extend(this.pointLocation(new a.pointGeometry(this.width,c))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(c,_=!1){const l=c.key,h=_?this._alignedPosMatrixCache:this._posMatrixCache;if(h[l])return h[l];const d=c.canonical,x=this.worldSize/this.zoomScale(d.z),b=d.x+Math.pow(2,d.z)*c.wrap,S=a.identity(new Float64Array(16));return a.translate(S,S,[b*x,d.y*x,0]),a.scale(S,S,[x/a.EXTENT,x/a.EXTENT,1]),a.multiply(S,_?this.alignedProjMatrix:this.projMatrix,S),h[l]=new Float32Array(S),h[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let c,_,l,h,d=-90,x=90,b=-180,S=180;const P=this.size,B=this._unmodified;if(this.latRange){const X=this.latRange;d=a.mercatorYfromLat(X[1])*this.worldSize,x=a.mercatorYfromLat(X[0])*this.worldSize,c=x-d<P.y?P.y/(x-d):0}if(this.lngRange){const X=this.lngRange;b=a.wrap(a.mercatorXfromLng(X[0])*this.worldSize,0,this.worldSize),S=a.wrap(a.mercatorXfromLng(X[1])*this.worldSize,0,this.worldSize),S<b&&(S+=this.worldSize),_=S-b<P.x?P.x/(S-b):0}const V=this.point,$=Math.max(_||0,c||0);if($)return this.center=this.unproject(new a.pointGeometry(_?(S+b)/2:V.x,c?(x+d)/2:V.y)),this.zoom+=this.scaleZoom($),this._unmodified=B,void(this._constraining=!1);if(this.latRange){const X=V.y,oe=P.y/2;X-oe<d&&(h=d+oe),X+oe>x&&(h=x-oe)}if(this.lngRange){const X=(b+S)/2,oe=a.wrap(V.x,X-this.worldSize/2,X+this.worldSize/2),ne=P.x/2;oe-ne<b&&(l=b+ne),oe+ne>S&&(l=S-ne)}l===void 0&&h===void 0||(this.center=this.unproject(new a.pointGeometry(l!==void 0?l:V.x,h!==void 0?h:V.y)).wrap()),this._unmodified=B,this._constraining=!1}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,_=this.point.x,l=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let h=a.identity(new Float64Array(16));a.scale(h,h,[this.width/2,-this.height/2,1]),a.translate(h,h,[1,-1,0]),this.labelPlaneMatrix=h,h=a.identity(new Float64Array(16)),a.scale(h,h,[1,-1,1]),a.translate(h,h,[-1,-1,0]),a.scale(h,h,[2/this.width,2/this.height,1]),this.glCoordMatrix=h,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const d=Math.PI/2+this._pitch,x=this._fov*(.5+c.y/this.height),b=Math.sin(x)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-d-x,.01,Math.PI-.01)),S=this.getHorizon(),P=2*Math.atan(S/this.cameraToCenterDistance)*(.5+c.y/(2*S)),B=Math.sin(P)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-d-P,.01,Math.PI-.01)),V=Math.cos(Math.PI/2-this._pitch)*b+this.cameraToSeaLevelDistance,$=Math.cos(Math.PI/2-this._pitch)*B+this.cameraToSeaLevelDistance,X=1.01*Math.min(V,$),oe=this.height/50;h=new Float64Array(16),a.perspective(h,this._fov,this.width/this.height,oe,X),h[8]=2*-c.x/this.width,h[9]=2*c.y/this.height,a.scale(h,h,[1,-1,1]),a.translate(h,h,[0,0,-this.cameraToCenterDistance]),a.rotateX(h,h,this._pitch),a.rotateZ(h,h,this.angle),a.translate(h,h,[-_,-l,0]),this.mercatorMatrix=a.scale([],h,[this.worldSize,this.worldSize,this.worldSize]),a.scale(h,h,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,h),a.translate(h,h,[0,0,-this.elevation]),this.projMatrix=h,this.invProjMatrix=a.invert([],h),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,h);const ne=this.width%2/2,ue=this.height%2/2,Te=Math.cos(this.angle),Ie=Math.sin(this.angle),we=_-Math.round(_)+Te*ne+Ie*ue,$e=l-Math.round(l)+Te*ue+Ie*ne,Me=new Float64Array(h);if(a.translate(Me,Me,[we>.5?we-1:we,$e>.5?$e-1:$e,0]),this.alignedProjMatrix=Me,h=a.invert(new Float64Array(16),this.pixelMatrix),!h)throw new Error("failed to invert matrix");this.pixelMatrixInverse=h,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const c=this.pointCoordinate(new a.pointGeometry(0,0)),_=[c.x*this.worldSize,c.y*this.worldSize,0,1];return a.transformMat4(_,_,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,c))}getCameraQueryGeometry(c){const _=this.getCameraPoint();if(c.length===1)return[c[0],_];{let l=_.x,h=_.y,d=_.x,x=_.y;for(const b of c)l=Math.min(l,b.x),h=Math.min(h,b.y),d=Math.max(d,b.x),x=Math.max(x,b.y);return[new a.pointGeometry(l,h),new a.pointGeometry(d,h),new a.pointGeometry(d,x),new a.pointGeometry(l,x),new a.pointGeometry(l,h)]}}}class Mi{constructor(c){this._hashName=c&&encodeURIComponent(c),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(_,l){let h=!1,d=null;const x=()=>{d=null,h&&(_(),d=setTimeout(x,300),h=!1)};return()=>(h=!0,d||x(),d)}(this._updateHashUnthrottled.bind(this))}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(c){const _=this._map.getCenter(),l=Math.round(100*this._map.getZoom())/100,h=Math.ceil((l*Math.LN2+Math.log(512/360/.5))/Math.LN10),d=Math.pow(10,h),x=Math.round(_.lng*d)/d,b=Math.round(_.lat*d)/d,S=this._map.getBearing(),P=this._map.getPitch();let B="";if(B+=c?`/${x}/${b}/${l}`:`${l}/${b}/${x}`,(S||P)&&(B+="/"+Math.round(10*S)/10),P&&(B+=`/${Math.round(P)}`),this._hashName){const V=this._hashName;let $=!1;const X=window.location.hash.slice(1).split("&").map(oe=>{const ne=oe.split("=")[0];return ne===V?($=!0,`${ne}=${B}`):oe}).filter(oe=>oe);return $||X.push(`${V}=${B}`),`#${X.join("&")}`}return`#${B}`}_getCurrentHash(){const c=window.location.hash.replace("#","");if(this._hashName){let _;return c.split("&").map(l=>l.split("=")).forEach(l=>{l[0]===this._hashName&&(_=l)}),(_&&_[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._getCurrentHash();if(c.length>=3&&!c.some(_=>isNaN(_))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:_,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}}}const Ya={linearity:.3,easing:a.bezier(0,0,.3,1)},Rl=a.extend({deceleration:2500,maxSpeed:1400},Ya),Xa=a.extend({deceleration:20,maxSpeed:1400},Ya),Qs=a.extend({deceleration:1e3,maxSpeed:360},Ya),ms=a.extend({deceleration:1e3,maxSpeed:90},Ya);class cc{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,_=a.exported.now();for(;c.length>0&&_-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const _={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:d}of this._inertiaBuffer)_.zoom+=d.zoomDelta||0,_.bearing+=d.bearingDelta||0,_.pitch+=d.pitchDelta||0,d.panDelta&&_.pan._add(d.panDelta),d.around&&(_.around=d.around),d.pinchAround&&(_.pinchAround=d.pinchAround);const l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,h={};if(_.pan.mag()){const d=Ka(_.pan.mag(),l,a.extend({},Rl,c||{}));h.offset=_.pan.mult(d.amount/_.pan.mag()),h.center=this._map.transform.center,va(h,d)}if(_.zoom){const d=Ka(_.zoom,l,Xa);h.zoom=this._map.transform.zoom+d.amount,va(h,d)}if(_.bearing){const d=Ka(_.bearing,l,Qs);h.bearing=this._map.transform.bearing+a.clamp(d.amount,-179,179),va(h,d)}if(_.pitch){const d=Ka(_.pitch,l,ms);h.pitch=this._map.transform.pitch+d.amount,va(h,d)}if(h.zoom||h.bearing){const d=_.pinchAround===void 0?_.around:_.pinchAround;h.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),a.extend(h,{noMoveStart:!0})}}function va(L,c){(!L.duration||L.duration<c.duration)&&(L.duration=c.duration,L.easing=c.easing)}function Ka(L,c,_){const{maxSpeed:l,linearity:h,deceleration:d}=_,x=a.clamp(L*h/(c/1e3),-l,l),b=Math.abs(x)/(d*h);return{easing:_.easing,duration:1e3*b,amount:x*(b/2)}}class fi extends a.Event{constructor(c,_,l,h={}){const d=k.mousePos(_.getCanvasContainer(),l),x=_.unproject(d);super(c,a.extend({point:d,lngLat:x,originalEvent:l},h)),this._defaultPrevented=!1,this.target=_}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ls extends a.Event{constructor(c,_,l){const h=c==="touchend"?l.changedTouches:l.touches,d=k.touchPos(_.getCanvasContainer(),h),x=d.map(S=>_.unproject(S)),b=d.reduce((S,P,B,V)=>S.add(P.div(V.length)),new a.pointGeometry(0,0));super(c,{points:d,point:b,lngLats:x,lngLat:_.unproject(b),originalEvent:l}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class os extends a.Event{constructor(c,_,l){super(c,{originalEvent:l}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Bl{constructor(c,_){this._map=c,this._clickTolerance=_.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new os(c.type,this._map,c))}mousedown(c,_){return this._mousedownPos=_,this._firePreventable(new fi(c.type,this._map,c))}mouseup(c){this._map.fire(new fi(c.type,this._map,c))}click(c,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||this._map.fire(new fi(c.type,this._map,c))}dblclick(c){return this._firePreventable(new fi(c.type,this._map,c))}mouseover(c){this._map.fire(new fi(c.type,this._map,c))}mouseout(c){this._map.fire(new fi(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Ls(c.type,this._map,c))}touchmove(c){this._map.fire(new Ls(c.type,this._map,c))}touchend(c){this._map.fire(new Ls(c.type,this._map,c))}touchcancel(c){this._map.fire(new Ls(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yo{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new fi(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new fi(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hc{constructor(c,_){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=_.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,_){this.isEnabled()&&c.shiftKey&&c.button===0&&(k.disableDrag(),this._startPos=this._lastPos=_,this._active=!0)}mousemoveWindow(c,_){if(!this._active)return;const l=_;if(this._lastPos.equals(l)||!this._box&&l.dist(this._startPos)<this._clickTolerance)return;const h=this._startPos;this._lastPos=l,this._box||(this._box=k.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const d=Math.min(h.x,l.x),x=Math.max(h.x,l.x),b=Math.min(h.y,l.y),S=Math.max(h.y,l.y);k.setTransform(this._box,`translate(${d}px,${b}px)`),this._box.style.width=x-d+"px",this._box.style.height=S-b+"px"}mouseupWindow(c,_){if(!this._active||c.button!==0)return;const l=this._startPos,h=_;if(this.reset(),k.suppressClick(),l.x!==h.x||l.y!==h.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:d=>d.fitScreenCoordinates(l,h,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,_){return this._map.fire(new a.Event(c,{originalEvent:_}))}}function To(L,c){if(L.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${L.length}, points ${c.length}`);const _={};for(let l=0;l<L.length;l++)_[L[l].identifier]=c[l];return _}class zl{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,_,l){(this.centroid||l.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),l.length===this.numTouches&&(this.centroid=function(h){const d=new a.pointGeometry(0,0);for(const x of h)d._add(x);return d.div(h.length)}(_),this.touches=To(l,_)))}touchmove(c,_,l){if(this.aborted||!this.centroid)return;const h=To(l,_);for(const d in this.touches){const x=this.touches[d],b=h[d];(!b||b.dist(x)>30)&&(this.aborted=!0)}}touchend(c,_,l){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),l.length===0){const h=!this.aborted&&this.centroid;if(this.reset(),h)return h}}}class Ja{constructor(c){this.singleTap=new zl(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,_,l){this.singleTap.touchstart(c,_,l)}touchmove(c,_,l){this.singleTap.touchmove(c,_,l)}touchend(c,_,l){const h=this.singleTap.touchend(c,_,l);if(h){const d=c.timeStamp-this.lastTime<500,x=!this.lastTap||this.lastTap.dist(h)<30;if(d&&x||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}}}class hh{constructor(){this._zoomIn=new Ja({numTouches:1,numTaps:2}),this._zoomOut=new Ja({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,_,l){this._zoomIn.touchstart(c,_,l),this._zoomOut.touchstart(c,_,l)}touchmove(c,_,l){this._zoomIn.touchmove(c,_,l),this._zoomOut.touchmove(c,_,l)}touchend(c,_,l){const h=this._zoomIn.touchend(c,_,l),d=this._zoomOut.touchend(c,_,l);return h?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:x=>x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(h)},{originalEvent:c})}):d?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:x=>x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(d)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const fh={0:1,2:2};class el{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(c,_){return!1}_move(c,_){return{}}mousedown(c,_){if(this._lastPoint)return;const l=k.mouseButton(c);this._correctButton(c,l)&&(this._lastPoint=_,this._eventButton=l)}mousemoveWindow(c,_){const l=this._lastPoint;if(l){if(c.preventDefault(),function(h,d){const x=fh[d];return h.buttons===void 0||(h.buttons&x)!==x}(c,this._eventButton))this.reset();else if(this._moved||!(_.dist(l)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(l,_)}}mouseupWindow(c){this._lastPoint&&k.mouseButton(c)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xa extends el{mousedown(c,_){super.mousedown(c,_),this._lastPoint&&(this._active=!0)}_correctButton(c,_){return _===0&&!c.ctrlKey}_move(c,_){return{around:_,panDelta:_.sub(c)}}}class ys extends el{_correctButton(c,_){return _===0&&c.ctrlKey||_===2}_move(c,_){const l=.8*(_.x-c.x);if(l)return this._active=!0,{bearingDelta:l}}contextmenu(c){c.preventDefault()}}class Gt extends el{_correctButton(c,_){return _===0&&c.ctrlKey||_===2}_move(c,_){const l=-.5*(_.y-c.y);if(l)return this._active=!0,{pitchDelta:l}}contextmenu(c){c.preventDefault()}}class lu{constructor(c,_){this._minTouches=c.cooperativeGestures?2:1,this._clickTolerance=c.clickTolerance||1,this._map=_,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(c,_,l){return this._calculateTransform(c,_,l)}touchmove(c,_,l){if(this._map._cooperativeGestures&&(this._minTouches===2&&l.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(c,!1,l.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(l.length<this._minTouches))return c.preventDefault(),this._calculateTransform(c,_,l)}touchend(c,_,l){this._calculateTransform(c,_,l),this._active&&l.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,_,l){l.length>0&&(this._active=!0);const h=To(l,_),d=new a.pointGeometry(0,0),x=new a.pointGeometry(0,0);let b=0;for(const P in h){const B=h[P],V=this._touches[P];V&&(d._add(B),x._add(B.sub(V)),b++,h[P]=B)}if(this._touches=h,b<this._minTouches||!x.mag())return;const S=x.div(b);return this._sum._add(S),this._sum.mag()<this._clickTolerance?void 0:{around:d.div(b),panDelta:S}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(c){}_move(c,_,l){return{}}touchstart(c,_,l){this._firstTwoTouches||l.length<2||(this._firstTwoTouches=[l[0].identifier,l[1].identifier],this._start([_[0],_[1]]))}touchmove(c,_,l){if(!this._firstTwoTouches)return;c.preventDefault();const[h,d]=this._firstTwoTouches,x=Xo(l,_,h),b=Xo(l,_,d);if(!x||!b)return;const S=this._aroundCenter?null:x.add(b).div(2);return this._move([x,b],S,c)}touchend(c,_,l){if(!this._firstTwoTouches)return;const[h,d]=this._firstTwoTouches,x=Xo(l,_,h),b=Xo(l,_,d);x&&b||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Xo(L,c,_){for(let l=0;l<L.length;l++)if(L[l].identifier===_)return c[l]}function Au(L,c){return Math.log(L/c)/Math.LN2}class $t extends wa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,_){const l=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Au(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Au(this._distance,l),pinchAround:_}}}function bA(L,c){return 180*L.angleWith(c)/Math.PI}class Ol extends wa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,_){const l=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:bA(this._vector,l),pinchAround:_}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const _=25/(Math.PI*this._minDiameter)*360,l=bA(c,this._startVector);return Math.abs(l)<_}}function EA(L){return Math.abs(L.y)>Math.abs(L.x)}class tl extends wa{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,_,l){super.touchstart(c,_,l),this._currentTouchCount=l.length}_start(c){this._lastPoints=c,EA(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,_,l){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const h=c[0].sub(this._lastPoints[0]),d=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(h,d,l.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(h.y+d.y)/2*-.5}):void 0}gestureBeginsVertically(c,_,l){if(this._valid!==void 0)return this._valid;const h=c.mag()>=2,d=_.mag()>=2;if(!h&&!d)return;if(!h||!d)return this._firstMove===void 0&&(this._firstMove=l),l-this._firstMove<100&&void 0;const x=c.y>0==_.y>0;return EA(c)&&EA(_)&&x}}const qs={panStep:100,bearingStep:15,pitchStep:10};class uu{constructor(){const c=qs;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let _=0,l=0,h=0,d=0,x=0;switch(c.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:c.shiftKey?l=-1:(c.preventDefault(),d=-1);break;case 39:c.shiftKey?l=1:(c.preventDefault(),d=1);break;case 38:c.shiftKey?h=1:(c.preventDefault(),x=-1);break;case 40:c.shiftKey?h=-1:(c.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(l=0,h=0),{cameraAnimation:b=>{const S=b.getZoom();b.easeTo({duration:300,easeId:"keyboardHandler",easing:dh,zoom:_?Math.round(S)+_*(c.shiftKey?2:1):S,bearing:b.getBearing()+l*this._bearingStep,pitch:b.getPitch()+h*this._pitchStep,offset:[-d*this._panStep,-x*this._panStep],center:b.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function dh(L){return L*(2-L)}const fc=4.000244140625;class cu{constructor(c,_){this._map=c,this._el=c.getCanvasContainer(),this._handler=_,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;c.preventDefault()}let _=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const l=a.exported.now(),h=l-(this._lastWheelEventTime||0);this._lastWheelEventTime=l,_!==0&&_%fc==0?this._type="wheel":_!==0&&Math.abs(_)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(h*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),c.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=c,this._delta-=_,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const _=k.mousePos(this._el,c);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(_)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;if(this._delta!==0){const b=this._type==="wheel"&&Math.abs(this._delta)>fc?this._wheelZoomRate:this._defaultZoomRate;let S=2/(1+Math.exp(-Math.abs(this._delta*b)));this._delta<0&&S!==0&&(S=1/S);const P=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(P*S))),this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:c.zoom,l=this._startZoom,h=this._easing;let d,x=!1;if(this._type==="wheel"&&l&&h){const b=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),S=h(b);d=a.number(l,_,S),b<1?this._frameId||(this._frameId=!0):x=!0}else d=_,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!x,zoomDelta:d-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let _=a.ease;if(this._prevEase){const l=this._prevEase,h=(a.exported.now()-l.start)/l.duration,d=l.easing(h+.01)-l.easing(h),x=.27/Math.sqrt(d*d+1e-4)*.01,b=Math.sqrt(.0729-x*x);_=a.bezier(x,b,.25,1)}return this._prevEase={start:a.exported.now(),duration:c,easing:_},_}reset(){this._active=!1}}class hu{constructor(c,_){this._clickZoom=c,this._tapZoom=_}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fu{constructor(){this.reset()}reset(){this._active=!1}dblclick(c,_){return c.preventDefault(),{cameraAnimation:l=>{l.easeTo({duration:300,zoom:l.getZoom()+(c.shiftKey?-1:1),around:l.unproject(_)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zs{constructor(){this._tap=new Ja({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(c,_,l){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?l.length>0&&(this._swipePoint=_[0],this._swipeTouch=l[0].identifier):this._tap.touchstart(c,_,l))}touchmove(c,_,l){if(this._tapTime){if(this._swipePoint){if(l[0].identifier!==this._swipeTouch)return;const h=_[0],d=h.y-this._swipePoint.y;return this._swipePoint=h,c.preventDefault(),this._active=!0,{zoomDelta:d/128}}}else this._tap.touchmove(c,_,l)}touchend(c,_,l){this._tapTime?this._swipePoint&&l.length===0&&this.reset():this._tap.touchend(c,_,l)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hi{constructor(c,_,l){this._el=c,this._mousePan=_,this._touchPan=l}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class So{constructor(c,_,l){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=_,this._mousePitch=l}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class du{constructor(c,_,l,h){this._el=c,this._touchZoom=_,this._touchRotate=l,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ba=L=>L.zoom||L.drag||L.pitch||L.rotate;class Wr extends a.Event{}function Fl(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}class dc{constructor(c,_){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new cc(c),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(_),a.bindAll(["handleEvent","handleWindowEvent"],this);const l=this._el;this._listeners=[[l,"touchstart",{passive:!0}],[l,"touchmove",{passive:!1}],[l,"touchend",void 0],[l,"touchcancel",void 0],[l,"mousedown",void 0],[l,"mousemove",void 0],[l,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[l,"mouseover",void 0],[l,"mouseout",void 0],[l,"dblclick",void 0],[l,"click",void 0],[l,"keydown",{capture:!1}],[l,"keyup",void 0],[l,"wheel",{passive:!1}],[l,"contextmenu",void 0],[window,"blur",void 0]];for(const[h,d,x]of this._listeners)k.addEventListener(h,d,h===document?this.handleWindowEvent:this.handleEvent,x)}destroy(){for(const[c,_,l]of this._listeners)k.removeEventListener(c,_,c===document?this.handleWindowEvent:this.handleEvent,l)}_addDefaultHandlers(c){const _=this._map,l=_.getCanvasContainer();this._add("mapEvent",new Bl(_,c));const h=_.boxZoom=new hc(_,c);this._add("boxZoom",h);const d=new hh,x=new fu;_.doubleClickZoom=new hu(x,d),this._add("tapZoom",d),this._add("clickZoom",x);const b=new Zs;this._add("tapDragZoom",b);const S=_.touchPitch=new tl(_);this._add("touchPitch",S);const P=new ys(c),B=new Gt(c);_.dragRotate=new So(c,P,B),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]);const V=new xa(c),$=new lu(c,_);_.dragPan=new Hi(l,V,$),this._add("mousePan",V),this._add("touchPan",$,["touchZoom","touchRotate"]);const X=new Ol,oe=new $t;_.touchZoomRotate=new du(l,oe,X,b),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]);const ne=_.scrollZoom=new cu(_,this);this._add("scrollZoom",ne,["mousePan"]);const ue=_.keyboard=new uu;this._add("keyboard",ue),this._add("blockableMapEvent",new Yo(_));for(const Te of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[Te]&&_[Te].enable(c[Te])}_add(c,_,l){this._handlers.push({handlerName:c,handler:_,allowed:l}),this._handlersById[c]=_}stop(c){if(!this._updatingCamera){for(const{handler:_}of this._handlers)_.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ba(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,_,l){for(const h in c)if(h!==l&&(!_||_.indexOf(h)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const _=[];for(const l of c)this._el.contains(l.target)&&_.push(l);return _}handleEvent(c,_){if(c.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const l=c.type==="renderFrame"?void 0:c,h={needsRenderFrame:!1},d={},x={},b=c.touches,S=b?this._getMapTouches(b):void 0,P=S?k.touchPos(this._el,S):k.mousePos(this._el,c);for(const{handlerName:$,handler:X,allowed:oe}of this._handlers){if(!X.isEnabled())continue;let ne;this._blockedByActive(x,oe,$)?X.reset():X[_||c.type]&&(ne=X[_||c.type](c,P,S),this.mergeHandlerResult(h,d,ne,$,l),ne&&ne.needsRenderFrame&&this._triggerRenderFrame()),(ne||X.isActive())&&(x[$]=X)}const B={};for(const $ in this._previousActiveHandlers)x[$]||(B[$]=l);this._previousActiveHandlers=x,(Object.keys(B).length||Fl(h))&&(this._changes.push([h,d,B]),this._triggerRenderFrame()),(Object.keys(x).length||Fl(h))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:V}=h;V&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],V(this._map))}mergeHandlerResult(c,_,l,h,d){if(!l)return;a.extend(c,l);const x={handlerName:h,originalEvent:l.originalEvent||d};l.zoomDelta!==void 0&&(_.zoom=x),l.panDelta!==void 0&&(_.drag=x),l.pitchDelta!==void 0&&(_.pitch=x),l.bearingDelta!==void 0&&(_.rotate=x)}_applyChanges(){const c={},_={},l={};for(const[h,d,x]of this._changes)h.panDelta&&(c.panDelta=(c.panDelta||new a.pointGeometry(0,0))._add(h.panDelta)),h.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+h.zoomDelta),h.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+h.bearingDelta),h.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+h.pitchDelta),h.around!==void 0&&(c.around=h.around),h.pinchAround!==void 0&&(c.pinchAround=h.pinchAround),h.noInertia&&(c.noInertia=h.noInertia),a.extend(_,d),a.extend(l,x);this._updateMapTransform(c,_,l),this._changes=[]}_updateMapTransform(c,_,l){const h=this._map,d=h.transform,x=h.style&&h.style.terrain;if(!(Fl(c)||x&&this._drag))return this._fireEvents(_,l,!0);let{panDelta:b,zoomDelta:S,bearingDelta:P,pitchDelta:B,around:V,pinchAround:$}=c;$!==void 0&&(V=$),h._stop(!0),V=V||h.transform.centerPoint;const X=d.pointLocation(b?V.sub(b):V);P&&(d.bearing+=P),B&&(d.pitch+=B),S&&(d.zoom+=S),x?_.drag&&!this._drag?(this._drag={center:d.centerPoint,lngLat:d.pointLocation(V),point:V,handlerName:_.drag.handlerName},h.fire(new a.Event("freezeElevation",{freeze:!0}))):this._drag&&l[this._drag.handlerName]?(h.fire(new a.Event("freezeElevation",{freeze:!1})),this._drag=null):_.drag&&this._drag&&(d.center=d.pointLocation(d.centerPoint.sub(b))):d.setLocationAtPoint(X,V),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(_,l,!0)}_fireEvents(c,_,l){const h=ba(this._eventsInProgress),d=ba(c),x={};for(const B in c){const{originalEvent:V}=c[B];this._eventsInProgress[B]||(x[`${B}start`]=V),this._eventsInProgress[B]=c[B]}!h&&d&&this._fireEvent("movestart",d.originalEvent);for(const B in x)this._fireEvent(B,x[B]);d&&this._fireEvent("move",d.originalEvent);for(const B in c){const{originalEvent:V}=c[B];this._fireEvent(B,V)}const b={};let S;for(const B in this._eventsInProgress){const{handlerName:V,originalEvent:$}=this._eventsInProgress[B];this._handlersById[V].isActive()||(delete this._eventsInProgress[B],S=_[V]||$,b[`${B}end`]=S)}for(const B in b)this._fireEvent(B,b[B]);const P=ba(this._eventsInProgress);if(l&&(h||d)&&!P){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=$=>$!==0&&-this._bearingSnap<$&&$<this._bearingSnap;B?(V(B.bearing||this._map.getBearing())&&(B.bearing=0),this._map.easeTo(B,{originalEvent:S})):(this._map.fire(new a.Event("moveend",{originalEvent:S})),V(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,_){this._map.fire(new a.Event(c,_?{originalEvent:_}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{delete this._frameId,this.handleEvent(new Wr("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const _s={extend:(L,...c)=>a.extend(L,...c),run(L){L()},logToElement(L,c=!1,_="log"){const l=window.document.getElementById(_);l&&(c&&(l.innerHTML=""),l.innerHTML+=`<br>${L}`)}};class Fr extends a.Evented{constructor(c,_){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=_.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,_){return this.jumpTo({center:c},_)}panBy(c,_,l){return c=a.pointGeometry.convert(c).mult(-1),this.panTo(this.transform.center,a.extend({offset:c},_),l)}panTo(c,_,l){return this.easeTo(a.extend({center:c},_),l)}getZoom(){return this.transform.zoom}setZoom(c,_){return this.jumpTo({zoom:c},_),this}zoomTo(c,_,l){return this.easeTo(a.extend({zoom:c},_),l)}zoomIn(c,_){return this.zoomTo(this.getZoom()+1,c,_),this}zoomOut(c,_){return this.zoomTo(this.getZoom()-1,c,_),this}getBearing(){return this.transform.bearing}setBearing(c,_){return this.jumpTo({bearing:c},_),this}getPadding(){return this.transform.padding}setPadding(c,_){return this.jumpTo({padding:c},_),this}rotateTo(c,_,l){return this.easeTo(a.extend({bearing:c},_),l)}resetNorth(c,_){return this.rotateTo(0,a.extend({duration:1e3},c),_),this}resetNorthPitch(c,_){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},c),_),this}snapToNorth(c,_){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,_):this}getPitch(){return this.transform.pitch}setPitch(c,_){return this.jumpTo({pitch:c},_),this}cameraForBounds(c,_){c=a.LngLatBounds.convert(c);const l=_&&_.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),l,_)}_cameraForBoxAndBearing(c,_,l,h){const d={top:0,bottom:0,right:0,left:0};if(typeof(h=a.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding=="number"){const Me=h.padding;h.padding={top:Me,bottom:Me,right:Me,left:Me}}h.padding=a.extend(d,h.padding);const x=this.transform,b=x.padding,S=x.project(a.LngLat.convert(c)),P=x.project(a.LngLat.convert(_)),B=S.rotate(-l*Math.PI/180),V=P.rotate(-l*Math.PI/180),$=new a.pointGeometry(Math.max(B.x,V.x),Math.max(B.y,V.y)),X=new a.pointGeometry(Math.min(B.x,V.x),Math.min(B.y,V.y)),oe=$.sub(X),ne=(x.width-(b.left+b.right+h.padding.left+h.padding.right))/oe.x,ue=(x.height-(b.top+b.bottom+h.padding.top+h.padding.bottom))/oe.y;if(ue<0||ne<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Te=Math.min(x.scaleZoom(x.scale*Math.min(ne,ue)),h.maxZoom),Ie=a.pointGeometry.convert(h.offset),we=new a.pointGeometry((h.padding.left-h.padding.right)/2,(h.padding.top-h.padding.bottom)/2).rotate(l*Math.PI/180),$e=Ie.add(we).mult(x.scale/x.zoomScale(Te));return{center:x.unproject(S.add(P).div(2).sub($e)),zoom:Te,bearing:l}}fitBounds(c,_,l){return this._fitInternal(this.cameraForBounds(c,_),_,l)}fitScreenCoordinates(c,_,l,h,d){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(c)),this.transform.pointLocation(a.pointGeometry.convert(_)),l,h),h,d)}_fitInternal(c,_,l){return c?(delete(_=a.extend(c,_)).padding,_.linear?this.easeTo(_,l):this.flyTo(_,l)):this}jumpTo(c,_){this.stop();const l=this.transform;let h=!1,d=!1,x=!1;return"zoom"in c&&l.zoom!==+c.zoom&&(h=!0,l.zoom=+c.zoom),c.center!==void 0&&(l.center=a.LngLat.convert(c.center)),"bearing"in c&&l.bearing!==+c.bearing&&(d=!0,l.bearing=+c.bearing),"pitch"in c&&l.pitch!==+c.pitch&&(x=!0,l.pitch=+c.pitch),c.padding==null||l.isPaddingEqual(c.padding)||(l.padding=c.padding),this.fire(new a.Event("movestart",_)).fire(new a.Event("move",_)),h&&this.fire(new a.Event("zoomstart",_)).fire(new a.Event("zoom",_)).fire(new a.Event("zoomend",_)),d&&this.fire(new a.Event("rotatestart",_)).fire(new a.Event("rotate",_)).fire(new a.Event("rotateend",_)),x&&this.fire(new a.Event("pitchstart",_)).fire(new a.Event("pitch",_)).fire(new a.Event("pitchend",_)),this.fire(new a.Event("moveend",_))}calculateCameraOptionsFromTo(c,_,l,h=0){const d=a.MercatorCoordinate.fromLngLat(c,_),x=a.MercatorCoordinate.fromLngLat(l,h),b=x.x-d.x,S=x.y-d.y,P=x.z-d.z,B=Math.hypot(b,S,P);if(B===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(b,S),$=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),X=180*Math.atan2(b,-S)/Math.PI;let oe=180*Math.acos(V/B)/Math.PI;return oe=P<0?90-oe:90+oe,{center:x.toLngLat(),zoom:$,pitch:oe,bearing:X}}easeTo(c,_){this._stop(!1,c.easeId),((c=a.extend({offset:[0,0],duration:500,easing:a.ease},c)).animate===!1||!c.essential&&a.exported.prefersReducedMotion)&&(c.duration=0);const l=this.transform,h=this.getZoom(),d=this.getBearing(),x=this.getPitch(),b=this.getPadding(),S="zoom"in c?+c.zoom:h,P="bearing"in c?this._normalizeBearing(c.bearing,d):d,B="pitch"in c?+c.pitch:x,V="padding"in c?c.padding:l.padding,$=a.pointGeometry.convert(c.offset);let X=l.centerPoint.add($);const oe=l.pointLocation(X),ne=a.LngLat.convert(c.center||oe);this._normalizeCenter(ne);const ue=l.project(oe),Te=l.project(ne).sub(ue),Ie=l.zoomScale(S-h);let we,$e;c.around&&(we=a.LngLat.convert(c.around),$e=l.locationPoint(we));const Me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||S!==h,this._rotating=this._rotating||d!==P,this._pitching=this._pitching||B!==x,this._padding=!l.isPaddingEqual(V),this._easeId=c.easeId,this._prepareEase(_,c.noMoveStart,Me),this._ease(je=>{if(this._zooming&&(l.zoom=a.number(h,S,je)),this._rotating&&(l.bearing=a.number(d,P,je)),this._pitching&&(l.pitch=a.number(x,B,je)),this._padding&&(l.interpolatePadding(b,V,je),X=l.centerPoint.add($)),we)l.setLocationAtPoint(we,$e);else{const be=l.zoomScale(l.zoom-h),m=S>h?Math.min(2,Ie):Math.max(.5,Ie),g=Math.pow(m,1-je),v=l.unproject(ue.add(Te.mult(je*g)).mult(be));l.setLocationAtPoint(l.renderWorldCopies?v.wrap():v,X)}this._fireMoveEvents(_)},je=>{this._afterEase(_,je)},c),this}_prepareEase(c,_,l={}){this._moving=!0,this.fire(new a.Event("freezeElevation",{freeze:!0})),_||l.moving||this.fire(new a.Event("movestart",c)),this._zooming&&!l.zooming&&this.fire(new a.Event("zoomstart",c)),this._rotating&&!l.rotating&&this.fire(new a.Event("rotatestart",c)),this._pitching&&!l.pitching&&this.fire(new a.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new a.Event("move",c)),this._zooming&&this.fire(new a.Event("zoom",c)),this._rotating&&this.fire(new a.Event("rotate",c)),this._pitching&&this.fire(new a.Event("pitch",c))}_afterEase(c,_){if(this._easeId&&_&&this._easeId===_)return;delete this._easeId,this.fire(new a.Event("freezeElevation",{freeze:!1}));const l=this._zooming,h=this._rotating,d=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,l&&this.fire(new a.Event("zoomend",c)),h&&this.fire(new a.Event("rotateend",c)),d&&this.fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))}flyTo(c,_){if(!c.essential&&a.exported.prefersReducedMotion){const N=a.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(N,_)}this.stop(),c=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},c);const l=this.transform,h=this.getZoom(),d=this.getBearing(),x=this.getPitch(),b=this.getPadding(),S="zoom"in c?a.clamp(+c.zoom,l.minZoom,l.maxZoom):h,P="bearing"in c?this._normalizeBearing(c.bearing,d):d,B="pitch"in c?+c.pitch:x,V="padding"in c?c.padding:l.padding,$=l.zoomScale(S-h),X=a.pointGeometry.convert(c.offset);let oe=l.centerPoint.add(X);const ne=l.pointLocation(oe),ue=a.LngLat.convert(c.center||ne);this._normalizeCenter(ue);const Te=l.project(ne),Ie=l.project(ue).sub(Te);let we=c.curve;const $e=Math.max(l.width,l.height),Me=$e/$,je=Ie.mag();if("minZoom"in c){const N=a.clamp(Math.min(c.minZoom,h,S),l.minZoom,l.maxZoom),Q=$e/l.zoomScale(N-h);we=Math.sqrt(Q/je*2)}const be=we*we;function m(N){const Q=(Me*Me-$e*$e+(N?-1:1)*be*be*je*je)/(2*(N?Me:$e)*be*je);return Math.log(Math.sqrt(Q*Q+1)-Q)}function g(N){return(Math.exp(N)-Math.exp(-N))/2}function v(N){return(Math.exp(N)+Math.exp(-N))/2}const E=m(0);let I=function(N){return v(E)/v(E+we*N)},R=function(N){return $e*((v(E)*(g(Q=E+we*N)/v(Q))-g(E))/be)/je;var Q},O=(m(1)-E)/we;if(Math.abs(je)<1e-6||!isFinite(O)){if(Math.abs($e-Me)<1e-6)return this.easeTo(c,_);const N=Me<$e?-1:1;O=Math.abs(Math.log(Me/$e))/we,R=function(){return 0},I=function(Q){return Math.exp(N*we*Q)}}return c.duration="duration"in c?+c.duration:1e3*O/("screenSpeed"in c?+c.screenSpeed/we:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=d!==P,this._pitching=B!==x,this._padding=!l.isPaddingEqual(V),this._prepareEase(_,!1),this._ease(N=>{const Q=N*O,te=1/I(Q);l.zoom=N===1?S:h+l.scaleZoom(te),this._rotating&&(l.bearing=a.number(d,P,N)),this._pitching&&(l.pitch=a.number(x,B,N)),this._padding&&(l.interpolatePadding(b,V,N),oe=l.centerPoint.add(X));const le=N===1?ue:l.unproject(Te.add(Ie.mult(R(Q))).mult(te));l.setLocationAtPoint(l.renderWorldCopies?le.wrap():le,oe),this._fireMoveEvents(_)},()=>this._afterEase(_),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,_){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const l=this._onEaseEnd;delete this._onEaseEnd,l.call(this,_)}if(!c){const l=this.handlers;l&&l.stop(!1)}return this}_ease(c,_,l){l.animate===!1||l.duration===0?(c(1),_()):(this._easeStart=a.exported.now(),this._easeOptions=l,this._onEaseFrame=c,this._onEaseEnd=_,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,_){c=a.wrap(c,-180,180);const l=Math.abs(c-_);return Math.abs(c-360-_)<l&&(c-=360),Math.abs(c+360-_)<l&&(c+=360),c}_normalizeCenter(c){const _=this.transform;if(!_.renderWorldCopies||_.lngRange)return;const l=c.lng-_.center.lng;c.lng+=l>180?-360:l<-180?360:0}}class nl{constructor(c={}){this.options=c,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options&&this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,_){const l=this._map._getUIString(`AttributionControl.${_}`);c.title=l,c.setAttribute("aria-label",l)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(h=>typeof h!="string"?"":h)):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}const _=this._map.style.sourceCaches;for(const h in _){const d=_[h];if(d.used||d.usedForTerrain){const x=d.getSource();x.attribution&&c.indexOf(x.attribution)<0&&c.push(x.attribution)}}c=c.filter(h=>String(h).trim()),c.sort((h,d)=>h.length-d.length),c=c.filter((h,d)=>{for(let x=d+1;x<c.length;x++)if(c[x].indexOf(h)>=0)return!1;return!0});const l=c.join(" | ");l!==this._attribHTML&&(this._attribHTML=l,c.length?(this._innerContainer.innerHTML=l,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Nl{constructor(c={}){this.options=c,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl mapboxgl-ctrl");const _=k.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://maplibre.org/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const c=this._container.children;if(c.length){const _=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact","mapboxgl-compact"):_.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class pu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const _=++this._id;return this._queue.push({callback:c,id:_,cancelled:!1}),_}remove(c){const _=this._currentlyRunning,l=_?this._queue.concat(_):this._queue;for(const h of l)if(h.id===c)return void(h.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const _=this._currentlyRunning=this._queue;this._queue=[];for(const l of _)if(!l.cancelled&&(l.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const pc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},gu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},gc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Pr{constructor(c,_,l=!1){this._clickTolerance=10,this.element=_,this.mouseRotate=new ys({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,l&&(this.mousePitch=new Gt({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(_,"mousedown",this.mousedown),k.addEventListener(_,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(_,"touchmove",this.touchmove),k.addEventListener(_,"touchend",this.touchend),k.addEventListener(_,"touchcancel",this.reset)}down(c,_){this.mouseRotate.mousedown(c,_),this.mousePitch&&this.mousePitch.mousedown(c,_),k.disableDrag()}move(c,_){const l=this.map,h=this.mouseRotate.mousemoveWindow(c,_);if(h&&h.bearingDelta&&l.setBearing(l.getBearing()+h.bearingDelta),this.mousePitch){const d=this.mousePitch.mousemoveWindow(c,_);d&&d.pitchDelta&&l.setPitch(l.getPitch()+d.pitchDelta)}}off(){const c=this.element;k.removeEventListener(c,"mousedown",this.mousedown),k.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(c,"touchmove",this.touchmove),k.removeEventListener(c,"touchend",this.touchend),k.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup)}mousedown(c){this.down(a.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),k.mousePos(this.element,c)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)}mousemove(c){this.move(c,k.mousePos(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ul(L,c,_){if(L=new a.LngLat(L.lng,L.lat),c){const l=new a.LngLat(L.lng-360,L.lat),h=new a.LngLat(L.lng+360,L.lat),d=_.locationPoint(L).distSqr(c);_.locationPoint(l).distSqr(c)<d?L=l:_.locationPoint(h).distSqr(c)<d&&(L=h)}for(;Math.abs(L.lng-_.center.lng)>180;){const l=_.locationPoint(L);if(l.x>=0&&l.y>=0&&l.x<=_.width&&l.y<=_.height)break;L.lng>_.center.lng?L.lng-=360:L.lng+=360}return L}const sn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function on(L,c,_){const l=L.classList;for(const h in sn)l.remove(`maplibregl-${_}-anchor-${h}`,`mapboxgl-${_}-anchor-${h}`);l.add(`maplibregl-${_}-anchor-${c}`,`mapboxgl-${_}-anchor-${c}`)}class wn extends a.Evented{constructor(c,_){if(super(),(c instanceof HTMLElement||_)&&(c=a.extend({element:c},_)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=a.pointGeometry.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");const l=k.createNS("http://www.w3.org/2000/svg","svg"),h=41,d=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${h}px`),l.setAttributeNS(null,"width",`${d}px`),l.setAttributeNS(null,"viewBox",`0 0 ${d} ${h}`);const x=k.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const b=k.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");const S=k.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ie of P){const we=k.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",Ie.rx),we.setAttributeNS(null,"ry",Ie.ry),S.appendChild(we)}const B=k.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);const V=k.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(V);const $=k.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const X=k.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(X);const oe=k.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const ne=k.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ue=k.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#000000"),ue.setAttributeNS(null,"opacity","0.25"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962");const Te=k.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),ne.appendChild(ue),ne.appendChild(Te),b.appendChild(S),b.appendChild(B),b.appendChild($),b.appendChild(oe),b.appendChild(ne),l.appendChild(b),l.setAttributeNS(null,"height",h*this._scale+"px"),l.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(l),this._offset=a.pointGeometry.convert(c&&c.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),on(this._element,this._anchor,"marker"),this._popup=null}addTo(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=a.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const h=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(38.1-13.5+h)],"bottom-right":[-h,-1*(38.1-13.5+h)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(c){const _=c.code,l=c.charCode||c.keyCode;_!=="Space"&&_!=="Enter"&&l!==32&&l!==13||this.togglePopup()}_onMapClick(c){const _=c.originalEvent.target,l=this._element;this._popup&&(_===l||l.contains(_))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this}_update(c){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ul(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let l="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?l="rotateX(0deg)":this._pitchAlignment==="map"&&(l=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${sn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${l} ${_}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const h=this._map.unproject(this._pos),d=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=h.distanceTo(this._lngLat)>20*d?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(c){return this._offset=a.pointGeometry.convert(c),this._update(),this}_onMove(c){if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(c){this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const as={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ko,Xr=0,Ys=!1;const Ds={maxWidth:100,unit:"metric"};function Xs(L,c,_){const l=_&&_.maxWidth||100,h=L._container.clientHeight/2,d=L.unproject([0,h]),x=L.unproject([l,h]),b=d.distanceTo(x);if(_&&_.unit==="imperial"){const S=3.2808*b;S>5280?It(c,l,S/5280,L._getUIString("ScaleControl.Miles")):It(c,l,S,L._getUIString("ScaleControl.Feet"))}else _&&_.unit==="nautical"?It(c,l,b/1852,L._getUIString("ScaleControl.NauticalMiles")):b>=1e3?It(c,l,b/1e3,L._getUIString("ScaleControl.Kilometers")):It(c,l,b,L._getUIString("ScaleControl.Meters"))}function It(L,c,_,l){const h=function(d){const x=Math.pow(10,`${Math.floor(d)}`.length-1);let b=d/x;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:function(S){const P=Math.pow(10,Math.ceil(-Math.log(S)/Math.LN10));return Math.round(S*P)/P}(b),x*b}(_);L.style.width=c*(h/_)+"px",L.innerHTML=`${h}&nbsp;${l}`}const Rt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Kr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rl(L){if(L){if(typeof L=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(L,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,L),"top-left":new a.pointGeometry(c,c),"top-right":new a.pointGeometry(-c,c),bottom:new a.pointGeometry(0,-L),"bottom-left":new a.pointGeometry(c,-c),"bottom-right":new a.pointGeometry(-c,-c),left:new a.pointGeometry(L,0),right:new a.pointGeometry(-L,0)}}if(L instanceof a.pointGeometry||Array.isArray(L)){const c=a.pointGeometry.convert(L);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:a.pointGeometry.convert(L.center||[0,0]),top:a.pointGeometry.convert(L.top||[0,0]),"top-left":a.pointGeometry.convert(L["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(L["top-right"]||[0,0]),bottom:a.pointGeometry.convert(L.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(L["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(L["bottom-right"]||[0,0]),left:a.pointGeometry.convert(L.left||[0,0]),right:a.pointGeometry.convert(L.right||[0,0])}}return rl(new a.pointGeometry(0,0))}const Ks={supported:y,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Fr{constructor(L){var c;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(L=a.extend({},gu,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Eo(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies),{bearingSnap:L.bearingSnap}),this._interactive=L.interactive,this._cooperativeGestures=L.cooperativeGestures,this._maxTileCacheSize=L.maxTileCacheSize,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new pu,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},pc,L.locale),this._clickTolerance=L.clickTolerance,this._pixelRatio=(c=L.pixelRatio)!==null&&c!==void 0?c:devicePixelRatio,this._requestManager=new U(L.transformRequest),typeof L.container=="string"){if(this._container=document.getElementById(L.container),!this._container)throw new Error(`Container '${L.container}' not found.`)}else{if(!(L.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new dc(this,L),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=L.hash&&new Mi(typeof L.hash=="string"&&L.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,a.extend({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new nl({customAttribution:L.customAttribution})),L.maplibreLogo&&this.addControl(new Nl,L.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",_=>{this._update(_.dataType==="style"),this.fire(new a.Event(`${_.dataType}data`,_))}),this.on("dataloading",_=>{this.fire(new a.Event(`${_.dataType}dataloading`,_))}),this.on("dataabort",_=>{this.fire(new a.Event("sourcedataabort",_))})}_getMapId(){return this._mapId}addControl(L,c){if(c===void 0&&(c=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const _=L.onAdd(this);this._controls.push(L);const l=this._controlPositions[c];return c.indexOf("bottom")!==-1?l.insertBefore(_,l.firstChild):l.appendChild(_),this}removeControl(L){if(!L||!L.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(L);return c>-1&&this._controls.splice(c,1),L.onRemove(this),this}hasControl(L){return this._controls.indexOf(L)>-1}calculateCameraOptionsFromTo(L,c,_,l){return l==null&&this.style.terrain&&(l=this.transform.getElevation(_,this.style.terrain)),super.calculateCameraOptionsFromTo(L,c,_,l)}resize(L){const c=this._containerDimensions(),_=c[0],l=c[1];this._resizeCanvas(_,l,this.getPixelRatio()),this.transform.resize(_,l),this.painter.resize(_,l,this.getPixelRatio());const h=!this._moving;return h&&(this.stop(),this.fire(new a.Event("movestart",L)).fire(new a.Event("move",L))),this.fire(new a.Event("resize",L)),h&&this.fire(new a.Event("moveend",L)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(L){const[c,_]=this._containerDimensions();this._pixelRatio=L,this._resizeCanvas(c,_,L),this.painter.resize(c,_,L)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(L){return this.transform.setMaxBounds(a.LngLatBounds.convert(L)),this._update()}setMinZoom(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(L){if((L=L??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(L){return this.transform.renderWorldCopies=L,this._update()}project(L){return this.transform.locationPoint(a.LngLat.convert(L),this.style&&this.style.terrain)}unproject(L){return this.transform.pointLocation(a.pointGeometry.convert(L),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(L,c,_){if(L==="mouseenter"||L==="mouseover"){let l=!1;return{layer:c,listener:_,delegates:{mousemove:d=>{const x=this.getLayer(c)?this.queryRenderedFeatures(d.point,{layers:[c]}):[];x.length?l||(l=!0,_.call(this,new fi(L,this,d.originalEvent,{features:x}))):l=!1},mouseout:()=>{l=!1}}}}if(L==="mouseleave"||L==="mouseout"){let l=!1;return{layer:c,listener:_,delegates:{mousemove:x=>{(this.getLayer(c)?this.queryRenderedFeatures(x.point,{layers:[c]}):[]).length?l=!0:l&&(l=!1,_.call(this,new fi(L,this,x.originalEvent)))},mouseout:x=>{l&&(l=!1,_.call(this,new fi(L,this,x.originalEvent)))}}}}{const l=h=>{const d=this.getLayer(c)?this.queryRenderedFeatures(h.point,{layers:[c]}):[];d.length&&(h.features=d,_.call(this,h),delete h.features)};return{layer:c,listener:_,delegates:{[L]:l}}}}on(L,c,_){if(_===void 0)return super.on(L,c);const l=this._createDelegatedListener(L,c,_);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(l);for(const h in l.delegates)this.on(h,l.delegates[h]);return this}once(L,c,_){if(_===void 0)return super.once(L,c);const l=this._createDelegatedListener(L,c,_);for(const h in l.delegates)this.once(h,l.delegates[h]);return this}off(L,c,_){return _===void 0?super.off(L,c):(this._delegatedListeners&&this._delegatedListeners[L]&&(l=>{const h=this._delegatedListeners[L];for(let d=0;d<h.length;d++){const x=h[d];if(x.layer===c&&x.listener===_){for(const b in x.delegates)this.off(b,x.delegates[b]);return h.splice(d,1),this}}})(),this)}queryRenderedFeatures(L,c){if(!this.style)return[];let _;if(c!==void 0||L===void 0||L instanceof a.pointGeometry||Array.isArray(L)||(c=L,L=void 0),c=c||{},(L=L||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof L[0]=="number")_=[a.pointGeometry.convert(L)];else{const l=a.pointGeometry.convert(L[0]),h=a.pointGeometry.convert(L[1]);_=[l,new a.pointGeometry(h.x,l.y),h,new a.pointGeometry(l.x,h.y),l]}return this.style.queryRenderedFeatures(_,c,this.transform)}querySourceFeatures(L,c){return this.style.querySourceFeatures(L,c)}setStyle(L,c){return(c=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(L,c))}setTransformRequest(L){return this._requestManager.setTransformRequest(L),this}_getUIString(L){const c=this._locale[L];if(c==null)throw new Error(`Missing UI string '${L}'`);return c}_updateStyle(L,c){return this.style&&(this.style.setEventedParent(null),this.style._remove()),L?(this.style=new Ce(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L):this.style.loadJSON(L),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ce(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(L,c){if(typeof L=="string"){const _=this._requestManager.transformRequest(L,a.ResourceType.Style);a.getJSON(_,(l,h)=>{l?this.fire(new a.ErrorEvent(l)):h&&this._updateDiff(h,c)})}else typeof L=="object"&&this._updateDiff(L,c)}_updateDiff(L,c){try{this.style.setState(L)&&this._update(!0)}catch(_){a.warnOnce(`Unable to perform style diff: ${_.message||_.error||_}.  Rebuilding the style from scratch.`),this._updateStyle(L,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(L,c){return this._lazyInitEmptyStyle(),this.style.addSource(L,c),this._update(!0)}isSourceLoaded(L){const c=this.style&&this.style.sourceCaches[L];if(c!==void 0)return c.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${L}'`)))}setTerrain(L){return this.style.setTerrain(L),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const L=this.style&&this.style.sourceCaches;for(const c in L){const _=L[c]._tiles;for(const l in _){const h=_[l];if(h.state!=="loaded"&&h.state!=="errored")return!1}}return!0}addSourceType(L,c,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,c,_)}removeSource(L){return this.style.removeSource(L),this._update(!0)}getSource(L){return this.style.getSource(L)}addImage(L,c,{pixelRatio:_=1,sdf:l=!1,stretchX:h,stretchY:d,content:x}={}){if(this._lazyInitEmptyStyle(),c instanceof HTMLImageElement||a.isImageBitmap(c)){const{width:b,height:S,data:P}=a.exported.getImageData(c);this.style.addImage(L,{data:new a.RGBAImage({width:b,height:S},P),pixelRatio:_,stretchX:h,stretchY:d,content:x,sdf:l,version:0})}else{if(c.width===void 0||c.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:b,height:S,data:P}=c,B=c;this.style.addImage(L,{data:new a.RGBAImage({width:b,height:S},new Uint8Array(P)),pixelRatio:_,stretchX:h,stretchY:d,content:x,sdf:l,version:0,userImage:B}),B.onAdd&&B.onAdd(this,L)}}}updateImage(L,c){const _=this.style.getImage(L);if(!_)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const l=c instanceof HTMLImageElement||a.isImageBitmap(c)?a.exported.getImageData(c):c,{width:h,height:d,data:x}=l;if(h===void 0||d===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(h!==_.data.width||d!==_.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const b=!(c instanceof HTMLImageElement||a.isImageBitmap(c));_.data.replace(x,b),this.style.updateImage(L,_)}hasImage(L){return L?!!this.style.getImage(L):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(L){this.style.removeImage(L)}loadImage(L,c){a.getImage(this._requestManager.transformRequest(L,a.ResourceType.Image),c)}listImages(){return this.style.listImages()}addLayer(L,c){return this._lazyInitEmptyStyle(),this.style.addLayer(L,c),this._update(!0)}moveLayer(L,c){return this.style.moveLayer(L,c),this._update(!0)}removeLayer(L){return this.style.removeLayer(L),this._update(!0)}getLayer(L){return this.style.getLayer(L)}setLayerZoomRange(L,c,_){return this.style.setLayerZoomRange(L,c,_),this._update(!0)}setFilter(L,c,_={}){return this.style.setFilter(L,c,_),this._update(!0)}getFilter(L){return this.style.getFilter(L)}setPaintProperty(L,c,_,l={}){return this.style.setPaintProperty(L,c,_,l),this._update(!0)}getPaintProperty(L,c){return this.style.getPaintProperty(L,c)}setLayoutProperty(L,c,_,l={}){return this.style.setLayoutProperty(L,c,_,l),this._update(!0)}getLayoutProperty(L,c){return this.style.getLayoutProperty(L,c)}setLight(L,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(L,c),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(L,c){return this.style.setFeatureState(L,c),this._update()}removeFeatureState(L,c){return this.style.removeFeatureState(L,c),this._update()}getFeatureState(L){return this.style.getFeatureState(L)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let L=0,c=0;return this._container&&(L=this._container.clientWidth||400,c=this._container.clientHeight||300),[L,c]}_setupContainer(){const L=this._container;L.classList.add("maplibregl-map","mapboxgl-map");const c=this._canvasContainer=k.create("div","maplibregl-canvas-container mapboxgl-canvas-container",L);this._interactive&&c.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const _=this._containerDimensions();this._resizeCanvas(_[0],_[1],this.getPixelRatio());const l=this._controlContainer=k.create("div","maplibregl-control-container mapboxgl-control-container",L),h=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(d=>{h[d]=k.create("div",`maplibregl-ctrl-${d} mapboxgl-ctrl-${d}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const L=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=k.create("div","maplibregl-cooperative-gesture-screen",L);let c="Control",_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",c="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",l=>{l.key===c&&(this._metaPress=!0)}),document.addEventListener("keyup",l=>{l.key===c&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",l=>{this._onCooperativeGesture(l,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(L,c,_){this._canvas.width=_*L,this._canvas.height=_*c,this._canvas.style.width=`${L}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const L=a.extend({},y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._canvas.getContext("webgl",L)||this._canvas.getContext("experimental-webgl",L);c?(this.painter=new zi(c,this.transform),a.exported$1.testSupport(c)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(L){L.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:L}))}_contextRestored(L){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:L}))}_onMapScroll(L){if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(L,c,_){return!c&&_<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(L){return this.style?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(L){return this._update(),this._renderTaskQueue.add(L)}_cancelRenderFrame(L){this._renderTaskQueue.remove(L)}_render(L){let c,_=0;const l=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(c=l.createQueryEXT(),l.beginQueryEXT(l.TIME_ELAPSED_EXT,c),_=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const x=this.transform.zoom,b=a.exported.now();this.style.zoomHistory.update(x,b);const S=new a.EvaluationParameters(x,{now:b,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=S.crossFadingFactor();P===1&&P===this._crossFadingFactor||(h=!0,this._crossFadingFactor=P),this.style.update(S)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const x=a.exported.now()-_;l.endQueryEXT(l.TIME_ELAPSED_EXT,c),setTimeout(()=>{const b=l.getQueryObjectEXT(c,l.QUERY_RESULT_EXT)/1e6;l.deleteQueryEXT(c),this.fire(new a.Event("gpu-timing-frame",{cpuTime:x,gpuTime:b}))},50)}if(this.listens("gpu-timing-layer")){const x=this.painter.collectGpuTimers();setTimeout(()=>{const b=this.painter.queryGpuTimers(x);this.fire(new a.Event("gpu-timing-layer",{layerTimes:b}))},50)}const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const L=this.painter.context.gl.getExtension("WEBGL_lose_context");L&&L.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._cooperativeGestures&&k.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(L=>{a.PerformanceUtils.frame(L),this._frame=null,this._render(L)}))}_onWindowOnline(){this._update()}_onWindowResize(L){this._trackResize&&this.resize({originalEvent:L})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())}get showPadding(){return!!this._showPadding}set showPadding(L){this._showPadding!==L&&(this._showPadding=L,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())}get repaint(){return!!this._repaint}set repaint(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(L){this._vertices=L,this._update()}_setCacheLimits(L,c){a.setCacheLimits(L,c)}get version(){return"2.4.0"}},NavigationControl:class{constructor(L){this.options=a.extend({},gc,L),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",c=>this._map.zoomIn({},{originalEvent:c})),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",c=>this._map.zoomOut({},{originalEvent:c})),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const L=this._map.getZoom(),c=L===this._map.getMaxZoom(),_=L===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const L=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=L}onAdd(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(L,c){const _=k.create("button",L,this._container);return _.type="button",_.addEventListener("click",c),_}_setButtonTitle(L,c){const _=this._map._getUIString(`NavigationControl.${c}`);L.title=_,L.setAttribute("aria-label",_)}},GeolocateControl:class extends a.Evented{constructor(L){super(),this.options=a.extend({},as,L),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(L){var c;return this._map=L,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Ko!==void 0?c(Ko):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(_=>{Ko=_.state!=="denied",c(Ko)}):(Ko=!!window.navigator.geolocation,c(Ko)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xr=0,Ys=!1}_isOutOfMapMaxBounds(L){const c=this._map.getMaxBounds(),_=L.coords;return c&&(_.longitude<c.getWest()||_.longitude>c.getEast()||_.latitude<c.getSouth()||_.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(L){if(this._map){if(this._isOutOfMapMaxBounds(L))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",L)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=L,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(L),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(L),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",L)),this._finish()}}_updateCamera(L){const c=new a.LngLat(L.coords.longitude,L.coords.latitude),_=L.coords.accuracy,l=this._map.getBearing(),h=a.extend({bearing:l},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(_),h,{geolocateSource:!0})}_updateMarker(L){if(L){const c=new a.LngLat(L.coords.longitude,L.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=L.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const L=this._map._container.clientHeight/2,c=this._map.unproject([0,L]),_=this._map.unproject([1,L]),l=c.distanceTo(_),h=Math.ceil(2*this._accuracy/l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(L){if(this._map){if(this.options.trackUserLocation)if(L.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(L.code===3&&Ys)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",L)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(L){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",L===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new wn(this._dotElement),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xr--,Ys=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let L;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xr++,Xr>1?(L={maximumAge:6e5,timeout:0},Ys=!0):(L=this.options.positionOptions,Ys=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,L)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:nl,LogoControl:Nl,ScaleControl:class{constructor(L){this.options=a.extend({},Ds,L),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Xs(this._map,this._container,this.options)}onAdd(L){return this._map=L,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(L){this.options.unit=L,Xs(this._map,this._container,this.options)}},FullscreenControl:class{constructor(L){this._fullscreen=!1,L&&L.container&&(L.container instanceof HTMLElement?this._container=L.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const L=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",L).setAttribute("aria-hidden","true"),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(L){this.options=L,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(L){return this._map=L,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(L){super(),this.options=a.extend(Object.create(Rt),L),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(L){return this._map&&this.remove(),this._map=L,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(L){return this._lngLat=a.LngLat.convert(L),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(L){return this.setDOMContent(document.createTextNode(L))}setHTML(L){const c=document.createDocumentFragment(),_=document.createElement("body");let l;for(_.innerHTML=L;l=_.firstChild,l;)c.appendChild(l);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(L){return this.options.maxWidth=L,this._update(),this}setDOMContent(L){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(L),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(L){this._container&&this._container.classList.add(L)}removeClassName(L){this._container&&this._container.classList.remove(L)}setOffset(L){return this.options.offset=L,this._update(),this}toggleClassName(L){if(this._container)return this._container.classList.toggle(L)}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(L){this._update(L.point)}_onMouseMove(L){this._update(L.point)}_onDrag(L){this._update(L.point)}_update(L){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=k.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(d=>this._container.classList.add(d)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ul(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!L))return;const c=this._pos=this._trackPointer&&L?L:this._map.project(this._lngLat);let _=this.options.anchor;const l=rl(this.options.offset);if(!_){const d=this._container.offsetWidth,x=this._container.offsetHeight;let b;b=c.y+l.bottom.y<x?["top"]:c.y>this._map.transform.height-x?["bottom"]:[],c.x<d/2?b.push("left"):c.x>this._map.transform.width-d/2&&b.push("right"),_=b.length===0?"bottom":b.join("-")}const h=c.add(l[_]).round();k.setTransform(this._container,`${sn[_]} translate(${h.x}px,${h.y}px)`),on(this._container,_,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const L=this._container.querySelector(Kr);L&&L.focus()}_onClose(){this.remove()}},Marker:wn,Style:Ce,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:Mn,GeoJSONSource:Qt,ImageSource:Tt,RasterDEMTileSource:Mt,RasterTileSource:pt,VectorTileSource:Ye,VideoSource:Xt,prewarm:function(){gr().acquire(bt)},clearPrewarmedResources:function(){const L=lr;L&&(L.isPreloaded()&&L.numActive()===1?(L.release(bt),lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return sr.workerCount},set workerCount(L){sr.workerCount=L},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(L){a.config.MAX_PARALLEL_IMAGE_REQUESTS=L},clearStorage(L){a.clearTileCache(L)},workerUrl:"",addProtocol(L,c){a.config.REGISTERED_PROTOCOLS[L]=c},removeProtocol(L){delete a.config.REGISTERED_PROTOCOLS[L]}};return _s.extend(Ks,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),Ks});var A=i;return A})})(bz);var Fne=bz.exports;const Nne=tm(Fne),Une="modulepreload",Vne=function(t){return"/"+t},SI={},Gne=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Vne(s),s in SI)return;SI[s]=!0;const A=s.endsWith(".css"),a=A?'[rel="stylesheet"]':"";if(!!r)for(let M=i.length-1;M>=0;M--){const C=i[M];if(C.href===s&&(!A||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const w=document.createElement("link");if(w.rel=A?"stylesheet":Une,A||(w.as="script",w.crossOrigin=""),w.href=s,document.head.appendChild(w),A)return new Promise((M,C)=>{w.addEventListener("load",M),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=s,window.dispatchEvent(A),!A.defaultPrevented)throw s})},jne=rt.createContext(null);function $ne(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Iu(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Iu(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Iu(t[i],e[i]))return!1;return!0}return!1}function Hne(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function MI(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Iu(n,r)||e.setProjection(n)}function CI(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function PI(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const Wne=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function II(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const A of Wne)A in s&&(i[A]=s[A])}return i||r});return{...t,layers:n}}const kI={version:8,sources:{},layers:[]},LI={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},vw={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},DI={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Qne=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],qne=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class sd{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[DI[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[LI[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[vw[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=sd.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const A=i._resizeObserver;A&&(A.disconnect(),A.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=kI}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||Zne()||null,container:e,style:II(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const M=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=M,n.gl)}const A=new this._MapClass(i);s.padding&&A.setPadding(s.padding),n.cursor&&(A.getCanvas().style.cursor=n.cursor),this._createShadowTransform(A);const a=A._render;A._render=M=>{this._inRender=!0,a.call(A,M),this._inRender=!1};const y=A._renderTaskQueue.run;A._renderTaskQueue.run=M=>{y.call(A._renderTaskQueue,M),this._onBeforeRepaint()},A.on("render",()=>this._onAfterRepaint());const w=A.fire;A.fire=this._fireEvent.bind(this,w),A.on("resize",()=>{this._renderTransform.resize(A.transform.width,A.transform.height)}),A.on("styledata",()=>{this._updateStyleComponents(this.props,{}),MI(A.transform,this._renderTransform)}),A.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const M in LI)A.on(M,this._onPointerEvent);for(const M in vw)A.on(M,this._onCameraEvent);for(const M in DI)A.on(M,this._onEvent);this._map=A}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n?.remove(),sd.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=Hne(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:A,bearing:a}=i,y=r.isMoving();y&&(i.cameraElevationReference="sea");const w=PI(i,{...CI(r.transform),...e});if(y&&(i.cameraElevationReference="ground"),w&&n){const M=this._deferredEvents;M.move=!0,M.zoom||(M.zoom=s!==i.zoom),M.rotate||(M.rotate=a!==i.bearing),M.pitch||(M.pitch=A!==i.pitch)}return y||PI(r.transform,e),w}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of Qne)if(s in e&&!Iu(e[s],n[s])){i=!0;const A=r[`set${s[0].toUpperCase()}${s.slice(1)}`];A?.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=kI,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(II(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Iu(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Iu(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Iu(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let A=!1;for(const a of qne){const y=(r=e[a])!==null&&r!==void 0?r:!0,w=(i=n[a])!==null&&i!==void 0?i:!0;Iu(y,w)||(A=!0,y?s[a].enable(y):s[a].disable())}return A}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,A=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),y=a.length>0;!y&&A&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,y&&!A&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,A=typeof n=="string"?n:n.type;return A==="move"&&this._updateViewState(this.props,!1),A in vw&&(typeof n=="object"&&(n.viewState=CI(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{MI(this._renderTransform,n),e.transform=n}}}sd.savedMaps=[];function Zne(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{}.MapboxAccessToken}catch{}try{t=t||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const Yne=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Xne(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const A=e.queryTerrainElevation(r,i);return e.transform=s,A},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const A=e.queryRenderedFeatures(r,i);return e.transform=s,A}};for(const r of Kne(e))!(r in n)&&!Yne.includes(r)&&(n[r]=e[r].bind(e));return n}function Kne(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const Jne=typeof document<"u"?rt.useLayoutEffect:rt.useEffect,ere=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function tre(t,e){for(const r of ere)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!1)}const q2=rt.createContext(null);function nre(t,e,n){const r=rt.useContext(jne),[i,s]=rt.useState(null),A=rt.useRef(),{current:a}=rt.useRef({mapLib:null,map:null});rt.useEffect(()=>{const M=t.mapLib;let C=!0,k;return Promise.resolve(M||n).then(U=>{if(!C)return;if(!U)throw new Error("Invalid mapLib");const H="Map"in U?U:U.default;if(!H.Map)throw new Error("Invalid mapLib");if(tre(H,t),!H.supported||H.supported(t))t.reuseMaps&&(k=sd.reuse(t,A.current)),k||(k=new sd(H.Map,t,A.current)),a.map=Xne(k),a.mapLib=H,s(k),r?.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(U=>{const{onError:H}=t;H?H({type:"error",target:null,originalEvent:null,error:U}):console.error(U)}),()=>{C=!1,k&&(r?.onMapUnmount(t.id),t.reuseMaps?k.recycle():k.destroy())}},[]),Jne(()=>{i&&i.setProps(t)}),rt.useImperativeHandle(e,()=>a.map,[i]);const y=rt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),w={height:"100%"};return rt.createElement("div",{id:t.id,ref:A,style:y},i&&rt.createElement(q2.Provider,{value:a},rt.createElement("div",{"mapboxgl-children":"",style:w},t.children)))}const rre=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function v0(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!rre.test(r)?n[r]=`${i}px`:n[r]=i}}function ire(t,e){const{map:n,mapLib:r}=rt.useContext(q2),i=rt.useRef({props:t});i.current.props=t;const s=rt.useMemo(()=>{let q=!1;rt.Children.forEach(t.children,J=>{J&&(q=!0)});const se={...t,element:q?document.createElement("div"):null},Z=new r.Marker(se);return Z.setLngLat([t.longitude,t.latitude]),Z.getElement().addEventListener("click",J=>{var re,de;(de=(re=i.current.props).onClick)===null||de===void 0||de.call(re,{type:"click",target:Z,originalEvent:J})}),Z.on("dragstart",J=>{var re,de;const _e=J;_e.lngLat=s.getLngLat(),(de=(re=i.current.props).onDragStart)===null||de===void 0||de.call(re,_e)}),Z.on("drag",J=>{var re,de;const _e=J;_e.lngLat=s.getLngLat(),(de=(re=i.current.props).onDrag)===null||de===void 0||de.call(re,_e)}),Z.on("dragend",J=>{var re,de;const _e=J;_e.lngLat=s.getLngLat(),(de=(re=i.current.props).onDragEnd)===null||de===void 0||de.call(re,_e)}),Z},[]);rt.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:A,latitude:a,offset:y,style:w,draggable:M=!1,popup:C=null,rotation:k=0,rotationAlignment:U="auto",pitchAlignment:H="auto"}=t;return rt.useEffect(()=>{v0(s.getElement(),w)},[w]),rt.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==A||s.getLngLat().lat!==a)&&s.setLngLat([A,a]),y&&!$ne(s.getOffset(),y)&&s.setOffset(y),s.isDraggable()!==M&&s.setDraggable(M),s.getRotation()!==k&&s.setRotation(k),s.getRotationAlignment()!==U&&s.setRotationAlignment(U),s.getPitchAlignment()!==H&&s.setPitchAlignment(H),s.getPopup()!==C&&s.setPopup(C),am.createPortal(t.children,s.getElement())}rt.memo(rt.forwardRef(ire));function RI(t){return new Set(t?t.trim().split(/\s+/):[])}function sre(t,e){const{map:n,mapLib:r}=rt.useContext(q2),i=rt.useMemo(()=>document.createElement("div"),[]),s=rt.useRef({props:t});s.current.props=t;const A=rt.useMemo(()=>{const a={...t},y=new r.Popup(a);return y.setLngLat([t.longitude,t.latitude]),y.once("open",w=>{var M,C;(C=(M=s.current.props).onOpen)===null||C===void 0||C.call(M,w)}),y},[]);if(rt.useEffect(()=>{const a=y=>{var w,M;(M=(w=s.current.props).onClose)===null||M===void 0||M.call(w,y)};return A.on("close",a),A.setDOMContent(i).addTo(n.getMap()),()=>{A.off("close",a),A.isOpen()&&A.remove()}},[]),rt.useEffect(()=>{v0(A.getElement(),t.style)},[t.style]),rt.useImperativeHandle(e,()=>A,[]),A.isOpen()&&((A.getLngLat().lng!==t.longitude||A.getLngLat().lat!==t.latitude)&&A.setLngLat([t.longitude,t.latitude]),t.offset&&!Iu(A.options.offset,t.offset)&&A.setOffset(t.offset),(A.options.anchor!==t.anchor||A.options.maxWidth!==t.maxWidth)&&(A.options.anchor=t.anchor,A.setMaxWidth(t.maxWidth)),A.options.className!==t.className)){const a=RI(A.options.className),y=RI(t.className);for(const w of a)y.has(w)||A.removeClassName(w);for(const w of y)a.has(w)||A.addClassName(w);A.options.className=t.className}return am.createPortal(t.children,i)}rt.memo(rt.forwardRef(sre));function _m(t,e,n,r){const i=rt.useContext(q2),s=rt.useMemo(()=>t(i),[]);return rt.useEffect(()=>{const A=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,y=typeof n=="function"?n:typeof e=="function"?e:null,{map:w}=i;return w.hasControl(s)||(w.addControl(s,A?.position),a&&a(i)),()=>{y&&y(i),w.hasControl(s)&&w.removeControl(s)}},[]),s}function ore(t){const e=_m(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return rt.useEffect(()=>{v0(e._container,t.style)},[t.style]),null}rt.memo(ore);function are(t){const e=_m(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return rt.useEffect(()=>{v0(e._controlContainer,t.style)},[t.style]),null}rt.memo(are);function lre(t,e){const n=rt.useRef({props:t}),r=_m(({mapLib:i})=>{const s=new i.GeolocateControl(t),A=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||A(a)},s.on("geolocate",a=>{var y,w;(w=(y=n.current.props).onGeolocate)===null||w===void 0||w.call(y,a)}),s.on("error",a=>{var y,w;(w=(y=n.current.props).onError)===null||w===void 0||w.call(y,a)}),s.on("outofmaxbounds",a=>{var y,w;(w=(y=n.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(y,a)}),s.on("trackuserlocationstart",a=>{var y,w;(w=(y=n.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(y,a)}),s.on("trackuserlocationend",a=>{var y,w;(w=(y=n.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(y,a)}),s},{position:t.position});return n.current.props=t,rt.useImperativeHandle(e,()=>r,[]),rt.useEffect(()=>{v0(r._container,t.style)},[t.style]),null}rt.memo(rt.forwardRef(lre));function Are(t){const e=_m(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return rt.useEffect(()=>{v0(e._container,t.style)},[t.style]),null}rt.memo(Are);function ure(t){const e=_m(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=rt.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),rt.useEffect(()=>{v0(e._container,i)},[i]),null}rt.memo(ure);const cre=Gne(()=>import("./__vite-optional-peer-dep_mapbox-gl_react-map-gl-b25bb000.js"),[]),hre=(()=>rt.forwardRef(function(e,n){return nre(e,n,cre)}))(),fre=8,dre="Positron",pre={},gre={carto:{type:"vector",url:"https://tiles.basemaps.cartocdn.com/vector/carto.streets/v1/tiles.json"}},mre="https://tiles.basemaps.cartocdn.com/gl/positron-gl-style/sprite",yre="https://tiles.basemaps.cartocdn.com/fonts/{fontstack}/{range}.pbf",_re=[{id:"waterway_label",type:"symbol",source:"carto","source-layer":"waterway",filter:["all",["has","name"],["==","class","river"]],layout:{"text-field":"{name_en}","text-font":["Montserrat Regular Italic","Open Sans Italic","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"symbol-placement":"line","symbol-spacing":100,"symbol-avoid-edges":!1,"text-size":27,"text-padding":2,"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-offset":[0,-.2],"text-letter-spacing":0,"text-keep-upright":!0},paint:{"text-color":"#000000","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1}},{id:"watername_ocean",type:"symbol",source:"carto","source-layer":"water_name",minzoom:0,maxzoom:5,filter:["all",["has","name"],["==","$type","Point"],["==","class","ocean"]],layout:{"text-field":"{name}","symbol-placement":"point","text-size":27,"text-font":["Montserrat Medium Italic","Open Sans Italic","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-line-height":1.2,"text-padding":2,"text-allow-overlap":!1,"text-ignore-placement":!1,"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-max-width":6,"text-letter-spacing":.1},paint:{"text-color":"#000000","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1,"text-halo-blur":0}},{id:"watername_sea",type:"symbol",source:"carto","source-layer":"water_name",minzoom:5,filter:["all",["has","name"],["==","$type","Point"],["==","class","sea"]],layout:{"text-field":"{name}","symbol-placement":"point","text-size":27,"text-font":["Montserrat Medium Italic","Open Sans Italic","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-line-height":1.2,"text-padding":2,"text-allow-overlap":!1,"text-ignore-placement":!1,"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-max-width":6,"text-letter-spacing":.1},paint:{"text-color":"#000000","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1,"text-halo-blur":0}},{id:"watername_lake",type:"symbol",source:"carto","source-layer":"water_name",filter:["all",["has","name"],["==","$type","Point"],["==","class","lake"]],layout:{"text-field":{stops:[[8,"{name_en}"],[13,"{name}"]]},"symbol-placement":"point","text-size":27,"text-font":["Montserrat Regular Italic","Open Sans Italic","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-line-height":1.2,"text-padding":2,"text-allow-overlap":!1,"text-ignore-placement":!1,"text-pitch-alignment":"auto","text-rotation-alignment":"auto"},paint:{"text-color":"#000000","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1,"text-halo-blur":1}},{id:"watername_lake_line",type:"symbol",source:"carto","source-layer":"water_name",filter:["all",["has","name"],["==","$type","LineString"]],layout:{"text-field":{stops:[[8,"{name_en}"],[13,"{name}"]]},"symbol-placement":"line","text-size":27,"text-font":["Montserrat Regular Italic","Open Sans Italic","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"symbol-spacing":350,"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-line-height":1.2},paint:{"text-color":"#000000","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1,"text-halo-blur":1}},{id:"place_city_r6",type:"symbol",source:"carto","source-layer":"place",minzoom:8,maxzoom:15,filter:["all",["==","class","city"],[">=","rank",6]],layout:{"text-field":{stops:[[8,"{name_en}"],[13,"{name}"]]},"text-font":["Montserrat Medium","Open Sans Bold","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":{stops:[[8,12],[9,13],[10,14],[13,17],[14,20]]},"icon-image":"","icon-offset":[16,0],"text-anchor":"center","icon-size":1,"text-max-width":10,"text-keep-upright":!0,"text-offset":[.2,.2],"text-transform":"uppercase"},paint:{"text-color":"#697b89","icon-color":"#697b89","icon-translate-anchor":"map","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1}},{id:"place_city_r5",type:"symbol",source:"carto","source-layer":"place",minzoom:8,maxzoom:15,filter:["all",["==","class","city"],[">=","rank",0],["<=","rank",5]],layout:{"text-field":{stops:[[8,"{name_en}"],[13,"{name}"]]},"text-font":["Montserrat Medium","Open Sans Bold","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":{stops:[[8,14],[10,16],[13,19],[14,22]]},"icon-image":"","icon-offset":[16,0],"text-anchor":"center","icon-size":1,"text-max-width":10,"text-keep-upright":!0,"text-offset":[.2,.2],"text-transform":"uppercase"},paint:{"text-color":"#697b89","icon-color":"#697b89","icon-translate-anchor":"map","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1}},{id:"place_city_dot_z7",type:"symbol",source:"carto","source-layer":"place",minzoom:7,maxzoom:8,filter:["all",["!has","capital"],["!in","class","country","state"],[">=","rank",0],["<=","rank",7]],layout:{"text-field":"{name_en}","text-font":["Montserrat Medium","Open Sans Bold","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":12,"icon-image":"circle-11","icon-offset":[16,5],"text-anchor":"right","icon-size":.4,"text-max-width":8,"text-keep-upright":!0,"text-offset":[.2,.2]},paint:{"text-color":"#697b89","icon-color":"#697b89","icon-translate-anchor":"map","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1}},{id:"place_capital_dot_z7",type:"symbol",source:"carto","source-layer":"place",minzoom:7,maxzoom:8,filter:["all",[">","capital",0]],layout:{"text-field":"{name_en}","text-font":["Montserrat Medium","Open Sans Bold","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":12,"icon-image":"circle-11","icon-offset":[16,5],"text-anchor":"right","icon-size":.4,"text-max-width":8,"text-keep-upright":!0,"text-offset":[.2,.2],"text-transform":"uppercase"},paint:{"text-color":"#697b89","icon-color":"#697b89","icon-translate-anchor":"map","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1}},{id:"poi_stadium",type:"symbol",source:"carto","source-layer":"poi",minzoom:15,filter:["all",["in","class","stadium","cemetery","attraction"],["<=","rank",3]],layout:{"text-field":"{name}","text-font":["Montserrat Medium","Open Sans Bold","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":{stops:[[15,8],[17,9],[18,10]]},"text-transform":"uppercase"},paint:{"text-color":"#7d9c83","text-halo-color":"#f5f5f3","text-halo-width":1}},{id:"poi_park",type:"symbol",source:"carto","source-layer":"poi",minzoom:15,filter:["all",["==","class","park"]],layout:{"text-field":"{name}","text-font":["Montserrat Medium","Open Sans Bold","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":{stops:[[15,8],[17,9],[18,10]]},"text-transform":"uppercase"},paint:{"text-color":"#7d9c83","text-halo-color":"#f5f5f3","text-halo-width":1}},{id:"roadname_minor",type:"symbol",source:"carto","source-layer":"transportation_name",minzoom:16,filter:["all",["in","class","minor","service"]],layout:{"symbol-placement":"line","text-font":["Montserrat Regular","Open Sans Regular","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":9,"text-field":"{name}","symbol-avoid-edges":!1,"symbol-spacing":200,"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-justify":"center"},paint:{"text-color":"#838383","text-halo-color":"#fff","text-halo-width":1}},{id:"roadname_sec",type:"symbol",source:"carto","source-layer":"transportation_name",minzoom:15,filter:["all",["in","class","secondary","tertiary"]],layout:{"symbol-placement":"line","text-font":["Montserrat Regular","Open Sans Regular","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":{stops:[[15,9],[16,11],[18,12]]},"text-field":"{name}","symbol-avoid-edges":!1,"symbol-spacing":200,"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-justify":"center"},paint:{"text-color":"#838383","text-halo-color":"#fff","text-halo-width":1}},{id:"roadname_pri",type:"symbol",source:"carto","source-layer":"transportation_name",minzoom:14,filter:["all",["in","class","primary"]],layout:{"symbol-placement":"line","text-font":["Montserrat Regular","Open Sans Regular","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":{stops:[[14,10],[15,10],[16,11],[18,12]]},"text-field":"{name}","symbol-avoid-edges":!1,"symbol-spacing":{stops:[[6,200],[16,250]]},"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-justify":"center","text-letter-spacing":{stops:[[14,0],[16,.2]]}},paint:{"text-color":"#838383","text-halo-color":"#fff","text-halo-width":1}},{id:"roadname_major",type:"symbol",source:"carto","source-layer":"transportation_name",minzoom:13,filter:["all",["in","class","trunk","motorway"]],layout:{"symbol-placement":"line","text-font":["Montserrat Regular","Open Sans Regular","Noto Sans Regular","HanWangHeiLight Regular","NanumBarunGothic Regular"],"text-size":{stops:[[14,10],[15,10],[16,11],[18,12]]},"text-field":"{name}","symbol-avoid-edges":!1,"symbol-spacing":{stops:[[6,200],[16,250]]},"text-pitch-alignment":"auto","text-rotation-alignment":"auto","text-justify":"center","text-letter-spacing":{stops:[[13,0],[16,.2]]}},paint:{"text-color":"#838383","text-halo-color":"#fff","text-halo-width":1}}],vre="voyager",xre="Carto",wre={version:fre,name:dre,metadata:pre,sources:gre,sprite:mre,glyphs:yre,layers:_re,id:vre,owner:xre};function Of(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bre(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function AS(t){let e,n,r;t.length!==2?(e=Of,n=(a,y)=>Of(t(a),y),r=(a,y)=>t(a)-y):(e=t===Of||t===bre?t:Ere,n=t,r=t);function i(a,y,w=0,M=a.length){if(w<M){if(e(y,y)!==0)return M;do{const C=w+M>>>1;n(a[C],y)<0?w=C+1:M=C}while(w<M)}return w}function s(a,y,w=0,M=a.length){if(w<M){if(e(y,y)!==0)return M;do{const C=w+M>>>1;n(a[C],y)<=0?w=C+1:M=C}while(w<M)}return w}function A(a,y,w=0,M=a.length){const C=i(a,y,w,M-1);return C>w&&r(a[C-1],y)>-r(a[C],y)?C-1:C}return{left:i,center:A,right:s}}function Ere(){return 0}function Tre(t){return t===null?NaN:+t}function*Sre(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Mre=AS(Of),Cre=Mre.right;AS(Tre).center;const Tz=Cre;function uS(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function Pre(t=Of){if(t===Of)return Sz;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Sz(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Ire=Math.sqrt(50),kre=Math.sqrt(10),Lre=Math.sqrt(2);function D_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),A=s>=Ire?10:s>=kre?5:s>=Lre?2:1;let a,y,w;return i<0?(w=Math.pow(10,-i)/A,a=Math.round(t*w),y=Math.round(e*w),a/w<t&&++a,y/w>e&&--y,w=-w):(w=Math.pow(10,i)*A,a=Math.round(t/w),y=Math.round(e/w),a*w<t&&++a,y*w>e&&--y),y<a&&.5<=n&&n<2?D_(t,e,n*2):[a,y,w]}function x0(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,A]=r?D_(e,t,n):D_(t,e,n);if(!(s>=i))return[];const a=s-i+1,y=new Array(a);if(r)if(A<0)for(let w=0;w<a;++w)y[w]=(s-w)/-A;else for(let w=0;w<a;++w)y[w]=(s-w)*A;else if(A<0)for(let w=0;w<a;++w)y[w]=(i+w)/-A;else for(let w=0;w<a;++w)y[w]=(i+w)*A;return y}function B3(t,e,n){return e=+e,t=+t,n=+n,D_(t,e,n)[2]}function z3(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?B3(e,t,n):B3(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function O3(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function BI(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Mz(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Sz:Pre(i);r>n;){if(r-n>600){const y=r-n+1,w=e-n+1,M=Math.log(y),C=.5*Math.exp(2*M/3),k=.5*Math.sqrt(M*C*(y-C)/y)*(w-y/2<0?-1:1),U=Math.max(n,Math.floor(e-w*C/y+k)),H=Math.min(r,Math.floor(e+(y-w)*C/y+k));Mz(t,e,U,H,i)}const s=t[e];let A=n,a=r;for(mp(t,n,e),i(t[r],s)>0&&mp(t,n,r);A<a;){for(mp(t,A,a),++A,--a;i(t[A],s)<0;)++A;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?mp(t,n,a):(++a,mp(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function mp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Dre(t,e,n){if(t=Float64Array.from(Sre(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return BI(t);if(e>=1)return O3(t);var r,i=(r-1)*e,s=Math.floor(i),A=O3(Mz(t,s).subarray(0,s+1)),a=BI(t.subarray(s+1));return A+(a-A)*(i-s)}}function cS(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var Rre={value:()=>{}};function Cz(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new My(n)}function My(t){this._=t}function Bre(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}My.prototype=Cz.prototype={constructor:My,on:function(t,e){var n=this._,r=Bre(t+"",n),i,s=-1,A=r.length;if(arguments.length<2){for(;++s<A;)if((i=(t=r[s]).type)&&(i=zre(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<A;)if(i=(t=r[s]).type)n[i]=zI(n[i],t.name,e);else if(e==null)for(i in n)n[i]=zI(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new My(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function zre(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function zI(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Rre,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var F3="http://www.w3.org/1999/xhtml";const OI={svg:"http://www.w3.org/2000/svg",xhtml:F3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z2(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),OI.hasOwnProperty(e)?{space:OI[e],local:t}:t}function Ore(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===F3&&e.documentElement.namespaceURI===F3?e.createElement(t):e.createElementNS(n,t)}}function Fre(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Pz(t){var e=Z2(t);return(e.local?Fre:Ore)(e)}function Nre(){}function hS(t){return t==null?Nre:function(){return this.querySelector(t)}}function Ure(t){typeof t!="function"&&(t=hS(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],A=s.length,a=r[i]=new Array(A),y,w,M=0;M<A;++M)(y=s[M])&&(w=t.call(y,y.__data__,M,s))&&("__data__"in y&&(w.__data__=y.__data__),a[M]=w);return new Uo(r,this._parents)}function Iz(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Vre(){return[]}function kz(t){return t==null?Vre:function(){return this.querySelectorAll(t)}}function Gre(t){return function(){return Iz(t.apply(this,arguments))}}function jre(t){typeof t=="function"?t=Gre(t):t=kz(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var A=e[s],a=A.length,y,w=0;w<a;++w)(y=A[w])&&(r.push(t.call(y,y.__data__,w,A)),i.push(y));return new Uo(r,i)}function Lz(t){return function(){return this.matches(t)}}function Dz(t){return function(e){return e.matches(t)}}var $re=Array.prototype.find;function Hre(t){return function(){return $re.call(this.children,t)}}function Wre(){return this.firstElementChild}function Qre(t){return this.select(t==null?Wre:Hre(typeof t=="function"?t:Dz(t)))}var qre=Array.prototype.filter;function Zre(){return Array.from(this.children)}function Yre(t){return function(){return qre.call(this.children,t)}}function Xre(t){return this.selectAll(t==null?Zre:Yre(typeof t=="function"?t:Dz(t)))}function Kre(t){typeof t!="function"&&(t=Lz(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],A=s.length,a=r[i]=[],y,w=0;w<A;++w)(y=s[w])&&t.call(y,y.__data__,w,s)&&a.push(y);return new Uo(r,this._parents)}function Rz(t){return new Array(t.length)}function Jre(){return new Uo(this._enter||this._groups.map(Rz),this._parents)}function R_(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}R_.prototype={constructor:R_,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function eie(t){return function(){return t}}function tie(t,e,n,r,i,s){for(var A=0,a,y=e.length,w=s.length;A<w;++A)(a=e[A])?(a.__data__=s[A],r[A]=a):n[A]=new R_(t,s[A]);for(;A<y;++A)(a=e[A])&&(i[A]=a)}function nie(t,e,n,r,i,s,A){var a,y,w=new Map,M=e.length,C=s.length,k=new Array(M),U;for(a=0;a<M;++a)(y=e[a])&&(k[a]=U=A.call(y,y.__data__,a,e)+"",w.has(U)?i[a]=y:w.set(U,y));for(a=0;a<C;++a)U=A.call(t,s[a],a,s)+"",(y=w.get(U))?(r[a]=y,y.__data__=s[a],w.delete(U)):n[a]=new R_(t,s[a]);for(a=0;a<M;++a)(y=e[a])&&w.get(k[a])===y&&(i[a]=y)}function rie(t){return t.__data__}function iie(t,e){if(!arguments.length)return Array.from(this,rie);var n=e?nie:tie,r=this._parents,i=this._groups;typeof t!="function"&&(t=eie(t));for(var s=i.length,A=new Array(s),a=new Array(s),y=new Array(s),w=0;w<s;++w){var M=r[w],C=i[w],k=C.length,U=sie(t.call(M,M&&M.__data__,w,r)),H=U.length,q=a[w]=new Array(H),se=A[w]=new Array(H),Z=y[w]=new Array(k);n(M,C,q,se,Z,U,e);for(var J=0,re=0,de,_e;J<H;++J)if(de=q[J]){for(J>=re&&(re=J+1);!(_e=se[re])&&++re<H;);de._next=_e||null}}return A=new Uo(A,r),A._enter=a,A._exit=y,A}function sie(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oie(){return new Uo(this._exit||this._groups.map(Rz),this._parents)}function aie(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function lie(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,A=Math.min(i,s),a=new Array(i),y=0;y<A;++y)for(var w=n[y],M=r[y],C=w.length,k=a[y]=new Array(C),U,H=0;H<C;++H)(U=w[H]||M[H])&&(k[H]=U);for(;y<i;++y)a[y]=n[y];return new Uo(a,this._parents)}function Aie(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],A;--i>=0;)(A=r[i])&&(s&&A.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(A,s),s=A);return this}function uie(t){t||(t=cie);function e(C,k){return C&&k?t(C.__data__,k.__data__):!C-!k}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var A=n[s],a=A.length,y=i[s]=new Array(a),w,M=0;M<a;++M)(w=A[M])&&(y[M]=w);y.sort(e)}return new Uo(i,this._parents).order()}function cie(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hie(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fie(){return Array.from(this)}function die(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var A=r[i];if(A)return A}return null}function pie(){let t=0;for(const e of this)++t;return t}function gie(){return!this.node()}function mie(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,A=i.length,a;s<A;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function yie(t){return function(){this.removeAttribute(t)}}function _ie(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vie(t,e){return function(){this.setAttribute(t,e)}}function xie(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wie(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function bie(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Eie(t,e){var n=Z2(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?_ie:yie:typeof e=="function"?n.local?bie:wie:n.local?xie:vie)(n,e))}function Bz(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Tie(t){return function(){this.style.removeProperty(t)}}function Sie(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Mie(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Cie(t,e,n){return arguments.length>1?this.each((e==null?Tie:typeof e=="function"?Mie:Sie)(t,e,n??"")):od(this.node(),t)}function od(t,e){return t.style.getPropertyValue(e)||Bz(t).getComputedStyle(t,null).getPropertyValue(e)}function Pie(t){return function(){delete this[t]}}function Iie(t,e){return function(){this[t]=e}}function kie(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Lie(t,e){return arguments.length>1?this.each((e==null?Pie:typeof e=="function"?kie:Iie)(t,e)):this.node()[t]}function zz(t){return t.trim().split(/^|\s+/)}function fS(t){return t.classList||new Oz(t)}function Oz(t){this._node=t,this._names=zz(t.getAttribute("class")||"")}Oz.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fz(t,e){for(var n=fS(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Nz(t,e){for(var n=fS(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Die(t){return function(){Fz(this,t)}}function Rie(t){return function(){Nz(this,t)}}function Bie(t,e){return function(){(e.apply(this,arguments)?Fz:Nz)(this,t)}}function zie(t,e){var n=zz(t+"");if(arguments.length<2){for(var r=fS(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Bie:e?Die:Rie)(n,e))}function Oie(){this.textContent=""}function Fie(t){return function(){this.textContent=t}}function Nie(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Uie(t){return arguments.length?this.each(t==null?Oie:(typeof t=="function"?Nie:Fie)(t)):this.node().textContent}function Vie(){this.innerHTML=""}function Gie(t){return function(){this.innerHTML=t}}function jie(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function $ie(t){return arguments.length?this.each(t==null?Vie:(typeof t=="function"?jie:Gie)(t)):this.node().innerHTML}function Hie(){this.nextSibling&&this.parentNode.appendChild(this)}function Wie(){return this.each(Hie)}function Qie(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qie(){return this.each(Qie)}function Zie(t){var e=typeof t=="function"?t:Pz(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Yie(){return null}function Xie(t,e){var n=typeof t=="function"?t:Pz(t),r=e==null?Yie:typeof e=="function"?e:hS(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Kie(){var t=this.parentNode;t&&t.removeChild(this)}function Jie(){return this.each(Kie)}function ese(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tse(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nse(t){return this.select(t?tse:ese)}function rse(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ise(t){return function(e){t.call(this,e,this.__data__)}}function sse(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ose(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function ase(t,e,n){return function(){var r=this.__on,i,s=ise(e);if(r){for(var A=0,a=r.length;A<a;++A)if((i=r[A]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function lse(t,e,n){var r=sse(t+""),i,s=r.length,A;if(arguments.length<2){var a=this.node().__on;if(a){for(var y=0,w=a.length,M;y<w;++y)for(i=0,M=a[y];i<s;++i)if((A=r[i]).type===M.type&&A.name===M.name)return M.value}return}for(a=e?ase:ose,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function Uz(t,e,n){var r=Bz(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ase(t,e){return function(){return Uz(this,t,e)}}function use(t,e){return function(){return Uz(this,t,e.apply(this,arguments))}}function cse(t,e){return this.each((typeof e=="function"?use:Ase)(t,e))}function*hse(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,A;i<s;++i)(A=r[i])&&(yield A)}var dS=[null];function Uo(t,e){this._groups=t,this._parents=e}function vm(){return new Uo([[document.documentElement]],dS)}function fse(){return this}Uo.prototype=vm.prototype={constructor:Uo,select:Ure,selectAll:jre,selectChild:Qre,selectChildren:Xre,filter:Kre,data:iie,enter:Jre,exit:oie,join:aie,merge:lie,selection:fse,order:Aie,sort:uie,call:hie,nodes:fie,node:die,size:pie,empty:gie,each:mie,attr:Eie,style:Cie,property:Lie,classed:zie,text:Uie,html:$ie,raise:Wie,lower:qie,append:Zie,insert:Xie,remove:Jie,clone:nse,datum:rse,on:lse,dispatch:cse,[Symbol.iterator]:hse};function Ia(t){return typeof t=="string"?new Uo([[document.querySelector(t)]],[document.documentElement]):new Uo([[t]],dS)}function dse(t){return typeof t=="string"?new Uo([document.querySelectorAll(t)],[document.documentElement]):new Uo([Iz(t)],dS)}function xm(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Y2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function w0(){}var Dg=.7,B_=1/Dg,Ff="\\s*([+-]?\\d+)\\s*",Rg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",GA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pse=/^#([0-9a-f]{3,8})$/,gse=new RegExp(`^rgb\\(${Ff},${Ff},${Ff}\\)$`),mse=new RegExp(`^rgb\\(${GA},${GA},${GA}\\)$`),yse=new RegExp(`^rgba\\(${Ff},${Ff},${Ff},${Rg}\\)$`),_se=new RegExp(`^rgba\\(${GA},${GA},${GA},${Rg}\\)$`),vse=new RegExp(`^hsl\\(${Rg},${GA},${GA}\\)$`),xse=new RegExp(`^hsla\\(${Rg},${GA},${GA},${Rg}\\)$`),FI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xm(w0,jA,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:NI,formatHex:NI,formatHex8:wse,formatHsl:bse,formatRgb:UI,toString:UI});function NI(){return this.rgb().formatHex()}function wse(){return this.rgb().formatHex8()}function bse(){return Gz(this).formatHsl()}function UI(){return this.rgb().formatRgb()}function jA(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pse.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?VI(e):n===3?new go(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?B1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?B1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gse.exec(t))?new go(e[1],e[2],e[3],1):(e=mse.exec(t))?new go(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yse.exec(t))?B1(e[1],e[2],e[3],e[4]):(e=_se.exec(t))?B1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vse.exec(t))?$I(e[1],e[2]/100,e[3]/100,1):(e=xse.exec(t))?$I(e[1],e[2]/100,e[3]/100,e[4]):FI.hasOwnProperty(t)?VI(FI[t]):t==="transparent"?new go(NaN,NaN,NaN,0):null}function VI(t){return new go(t>>16&255,t>>8&255,t&255,1)}function B1(t,e,n,r){return r<=0&&(t=e=n=NaN),new go(t,e,n,r)}function Vz(t){return t instanceof w0||(t=jA(t)),t?(t=t.rgb(),new go(t.r,t.g,t.b,t.opacity)):new go}function Bg(t,e,n,r){return arguments.length===1?Vz(t):new go(t,e,n,r??1)}function go(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xm(go,Bg,Y2(w0,{brighter(t){return t=t==null?B_:Math.pow(B_,t),new go(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dg:Math.pow(Dg,t),new go(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new go($h(this.r),$h(this.g),$h(this.b),z_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GI,formatHex:GI,formatHex8:Ese,formatRgb:jI,toString:jI}));function GI(){return`#${Fh(this.r)}${Fh(this.g)}${Fh(this.b)}`}function Ese(){return`#${Fh(this.r)}${Fh(this.g)}${Fh(this.b)}${Fh((isNaN(this.opacity)?1:this.opacity)*255)}`}function jI(){const t=z_(this.opacity);return`${t===1?"rgb(":"rgba("}${$h(this.r)}, ${$h(this.g)}, ${$h(this.b)}${t===1?")":`, ${t})`}`}function z_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $h(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fh(t){return t=$h(t),(t<16?"0":"")+t.toString(16)}function $I(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Xl(t,e,n,r)}function Gz(t){if(t instanceof Xl)return new Xl(t.h,t.s,t.l,t.opacity);if(t instanceof w0||(t=jA(t)),!t)return new Xl;if(t instanceof Xl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),A=NaN,a=s-i,y=(s+i)/2;return a?(e===s?A=(n-r)/a+(n<r)*6:n===s?A=(r-e)/a+2:A=(e-n)/a+4,a/=y<.5?s+i:2-s-i,A*=60):a=y>0&&y<1?0:A,new Xl(A,a,y,t.opacity)}function Tse(t,e,n,r){return arguments.length===1?Gz(t):new Xl(t,e,n,r??1)}function Xl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xm(Xl,Tse,Y2(w0,{brighter(t){return t=t==null?B_:Math.pow(B_,t),new Xl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dg:Math.pow(Dg,t),new Xl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new go(xw(t>=240?t-240:t+120,i,r),xw(t,i,r),xw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Xl(HI(this.h),z1(this.s),z1(this.l),z_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=z_(this.opacity);return`${t===1?"hsl(":"hsla("}${HI(this.h)}, ${z1(this.s)*100}%, ${z1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function HI(t){return t=(t||0)%360,t<0?t+360:t}function z1(t){return Math.max(0,Math.min(1,t||0))}function xw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Sse=Math.PI/180,Mse=180/Math.PI,O_=18,jz=.96422,$z=1,Hz=.82521,Wz=4/29,Nf=6/29,Qz=3*Nf*Nf,Cse=Nf*Nf*Nf;function qz(t){if(t instanceof $A)return new $A(t.l,t.a,t.b,t.opacity);if(t instanceof FA)return Yz(t);t instanceof go||(t=Vz(t));var e=Tw(t.r),n=Tw(t.g),r=Tw(t.b),i=ww((.2225045*e+.7168786*n+.0606169*r)/$z),s,A;return e===n&&n===r?s=A=i:(s=ww((.4360747*e+.3850649*n+.1430804*r)/jz),A=ww((.0139322*e+.0971045*n+.7141733*r)/Hz)),new $A(116*i-16,500*(s-i),200*(i-A),t.opacity)}function Pse(t,e,n,r){return arguments.length===1?qz(t):new $A(t,e,n,r??1)}function $A(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}xm($A,Pse,Y2(w0,{brighter(t){return new $A(this.l+O_*(t??1),this.a,this.b,this.opacity)},darker(t){return new $A(this.l-O_*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=jz*bw(e),t=$z*bw(t),n=Hz*bw(n),new go(Ew(3.1338561*e-1.6168667*t-.4906146*n),Ew(-.9787684*e+1.9161415*t+.033454*n),Ew(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function ww(t){return t>Cse?Math.pow(t,1/3):t/Qz+Wz}function bw(t){return t>Nf?t*t*t:Qz*(t-Wz)}function Ew(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Tw(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Zz(t){if(t instanceof FA)return new FA(t.h,t.c,t.l,t.opacity);if(t instanceof $A||(t=qz(t)),t.a===0&&t.b===0)return new FA(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Mse;return new FA(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function WI(t,e,n,r){return arguments.length===1?Zz(t):new FA(n,e,t,r??1)}function Ise(t,e,n,r){return arguments.length===1?Zz(t):new FA(t,e,n,r??1)}function FA(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Yz(t){if(isNaN(t.h))return new $A(t.l,0,0,t.opacity);var e=t.h*Sse;return new $A(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}xm(FA,Ise,Y2(w0,{brighter(t){return new FA(this.h,this.c,this.l+O_*(t??1),this.opacity)},darker(t){return new FA(this.h,this.c,this.l-O_*(t??1),this.opacity)},rgb(){return Yz(this).rgb()}}));function kse(t,e,n,r,i){var s=t*t,A=s*t;return((1-3*t+3*s-A)*e+(4-6*s+3*A)*n+(1+3*t+3*s-3*A)*r+A*i)/6}function Lse(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],A=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return kse((n-r/e)*e,A,i,s,a)}}const pS=t=>()=>t;function Dse(t,e){return function(n){return t+n*e}}function Rse(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Bse(t){return(t=+t)==1?Xz:function(e,n){return n-e?Rse(e,n,t):pS(isNaN(e)?n:e)}}function Xz(t,e){var n=e-t;return n?Dse(t,n):pS(isNaN(t)?e:t)}const F_=function t(e){var n=Bse(e);function r(i,s){var A=n((i=Bg(i)).r,(s=Bg(s)).r),a=n(i.g,s.g),y=n(i.b,s.b),w=Xz(i.opacity,s.opacity);return function(M){return i.r=A(M),i.g=a(M),i.b=y(M),i.opacity=w(M),i+""}}return r.gamma=t,r}(1);function zse(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),A,a;for(A=0;A<n;++A)a=Bg(e[A]),r[A]=a.r||0,i[A]=a.g||0,s[A]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(y){return a.r=r(y),a.g=i(y),a.b=s(y),a+""}}}var Ose=zse(Lse);function Fse(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Nse(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Use(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),A;for(A=0;A<r;++A)i[A]=gS(t[A],e[A]);for(;A<n;++A)s[A]=e[A];return function(a){for(A=0;A<r;++A)s[A]=i[A](a);return s}}function Vse(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Yl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Gse(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=gS(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var N3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sw=new RegExp(N3.source,"g");function jse(t){return function(){return t}}function $se(t){return function(e){return t(e)+""}}function Kz(t,e){var n=N3.lastIndex=Sw.lastIndex=0,r,i,s,A=-1,a=[],y=[];for(t=t+"",e=e+"";(r=N3.exec(t))&&(i=Sw.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[A]?a[A]+=s:a[++A]=s),(r=r[0])===(i=i[0])?a[A]?a[A]+=i:a[++A]=i:(a[++A]=null,y.push({i:A,x:Yl(r,i)})),n=Sw.lastIndex;return n<e.length&&(s=e.slice(n),a[A]?a[A]+=s:a[++A]=s),a.length<2?y[0]?$se(y[0].x):jse(e):(e=y.length,function(w){for(var M=0,C;M<e;++M)a[(C=y[M]).i]=C.x(w);return a.join("")})}function gS(t,e){var n=typeof e,r;return e==null||n==="boolean"?pS(e):(n==="number"?Yl:n==="string"?(r=jA(e))?(e=r,F_):Kz:e instanceof jA?F_:e instanceof Date?Vse:Nse(e)?Fse:Array.isArray(e)?Use:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gse:Yl)(t,e)}function Hse(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var QI=180/Math.PI,U3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jz(t,e,n,r,i,s){var A,a,y;return(A=Math.sqrt(t*t+e*e))&&(t/=A,e/=A),(y=t*n+e*r)&&(n-=t*y,r-=e*y),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,y/=a),t*r<e*n&&(t=-t,e=-e,y=-y,A=-A),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*QI,skewX:Math.atan(y)*QI,scaleX:A,scaleY:a}}var O1;function Wse(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?U3:Jz(e.a,e.b,e.c,e.d,e.e,e.f)}function Qse(t){return t==null||(O1||(O1=document.createElementNS("http://www.w3.org/2000/svg","g")),O1.setAttribute("transform",t),!(t=O1.transform.baseVal.consolidate()))?U3:(t=t.matrix,Jz(t.a,t.b,t.c,t.d,t.e,t.f))}function eO(t,e,n,r){function i(w){return w.length?w.pop()+" ":""}function s(w,M,C,k,U,H){if(w!==C||M!==k){var q=U.push("translate(",null,e,null,n);H.push({i:q-4,x:Yl(w,C)},{i:q-2,x:Yl(M,k)})}else(C||k)&&U.push("translate("+C+e+k+n)}function A(w,M,C,k){w!==M?(w-M>180?M+=360:M-w>180&&(w+=360),k.push({i:C.push(i(C)+"rotate(",null,r)-2,x:Yl(w,M)})):M&&C.push(i(C)+"rotate("+M+r)}function a(w,M,C,k){w!==M?k.push({i:C.push(i(C)+"skewX(",null,r)-2,x:Yl(w,M)}):M&&C.push(i(C)+"skewX("+M+r)}function y(w,M,C,k,U,H){if(w!==C||M!==k){var q=U.push(i(U)+"scale(",null,",",null,")");H.push({i:q-4,x:Yl(w,C)},{i:q-2,x:Yl(M,k)})}else(C!==1||k!==1)&&U.push(i(U)+"scale("+C+","+k+")")}return function(w,M){var C=[],k=[];return w=t(w),M=t(M),s(w.translateX,w.translateY,M.translateX,M.translateY,C,k),A(w.rotate,M.rotate,C,k),a(w.skewX,M.skewX,C,k),y(w.scaleX,w.scaleY,M.scaleX,M.scaleY,C,k),w=M=null,function(U){for(var H=-1,q=k.length,se;++H<q;)C[(se=k[H]).i]=se.x(U);return C.join("")}}}var qse=eO(Wse,"px, ","px)","deg)"),Zse=eO(Qse,", ",")",")");function wm(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var ad=0,Fp=0,yp=0,tO=1e3,N_,Np,U_=0,r0=0,X2=0,zg=typeof performance=="object"&&performance.now?performance:Date,nO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mS(){return r0||(nO(Yse),r0=zg.now()+X2)}function Yse(){r0=0}function V_(){this._call=this._time=this._next=null}V_.prototype=rO.prototype={constructor:V_,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?mS():+n)+(e==null?0:+e),!this._next&&Np!==this&&(Np?Np._next=this:N_=this,Np=this),this._call=t,this._time=n,V3()},stop:function(){this._call&&(this._call=null,this._time=1/0,V3())}};function rO(t,e,n){var r=new V_;return r.restart(t,e,n),r}function Xse(){mS(),++ad;for(var t=N_,e;t;)(e=r0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ad}function qI(){r0=(U_=zg.now())+X2,ad=Fp=0;try{Xse()}finally{ad=0,Jse(),r0=0}}function Kse(){var t=zg.now(),e=t-U_;e>tO&&(X2-=e,U_=t)}function Jse(){for(var t,e=N_,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:N_=n);Np=t,V3(r)}function V3(t){if(!ad){Fp&&(Fp=clearTimeout(Fp));var e=t-r0;e>24?(t<1/0&&(Fp=setTimeout(qI,t-zg.now()-X2)),yp&&(yp=clearInterval(yp))):(yp||(U_=zg.now(),yp=setInterval(Kse,tO)),ad=1,nO(qI))}}function ZI(t,e,n){var r=new V_;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var eoe=Cz("start","end","cancel","interrupt"),toe=[],iO=0,YI=1,G3=2,Cy=3,XI=4,j3=5,Py=6;function K2(t,e,n,r,i,s){var A=t.__transition;if(!A)t.__transition={};else if(n in A)return;noe(t,n,{name:e,index:r,group:i,on:eoe,tween:toe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:iO})}function yS(t,e){var n=uA(t,e);if(n.state>iO)throw new Error("too late; already scheduled");return n}function ZA(t,e){var n=uA(t,e);if(n.state>Cy)throw new Error("too late; already running");return n}function uA(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function noe(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=rO(s,0,n.time);function s(w){n.state=YI,n.timer.restart(A,n.delay,n.time),n.delay<=w&&A(w-n.delay)}function A(w){var M,C,k,U;if(n.state!==YI)return y();for(M in r)if(U=r[M],U.name===n.name){if(U.state===Cy)return ZI(A);U.state===XI?(U.state=Py,U.timer.stop(),U.on.call("interrupt",t,t.__data__,U.index,U.group),delete r[M]):+M<e&&(U.state=Py,U.timer.stop(),U.on.call("cancel",t,t.__data__,U.index,U.group),delete r[M])}if(ZI(function(){n.state===Cy&&(n.state=XI,n.timer.restart(a,n.delay,n.time),a(w))}),n.state=G3,n.on.call("start",t,t.__data__,n.index,n.group),n.state===G3){for(n.state=Cy,i=new Array(k=n.tween.length),M=0,C=-1;M<k;++M)(U=n.tween[M].value.call(t,t.__data__,n.index,n.group))&&(i[++C]=U);i.length=C+1}}function a(w){for(var M=w<n.duration?n.ease.call(null,w/n.duration):(n.timer.restart(y),n.state=j3,1),C=-1,k=i.length;++C<k;)i[C].call(t,M);n.state===j3&&(n.on.call("end",t,t.__data__,n.index,n.group),y())}function y(){n.state=Py,n.timer.stop(),delete r[e];for(var w in r)return;delete t.__transition}}function roe(t,e){var n=t.__transition,r,i,s=!0,A;if(n){e=e==null?null:e+"";for(A in n){if((r=n[A]).name!==e){s=!1;continue}i=r.state>G3&&r.state<j3,r.state=Py,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[A]}s&&delete t.__transition}}function ioe(t){return this.each(function(){roe(this,t)})}function soe(t,e){var n,r;return function(){var i=ZA(this,t),s=i.tween;if(s!==n){r=n=s;for(var A=0,a=r.length;A<a;++A)if(r[A].name===e){r=r.slice(),r.splice(A,1);break}}i.tween=r}}function ooe(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ZA(this,t),A=s.tween;if(A!==r){i=(r=A).slice();for(var a={name:e,value:n},y=0,w=i.length;y<w;++y)if(i[y].name===e){i[y]=a;break}y===w&&i.push(a)}s.tween=i}}function aoe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=uA(this.node(),n).tween,i=0,s=r.length,A;i<s;++i)if((A=r[i]).name===t)return A.value;return null}return this.each((e==null?soe:ooe)(n,t,e))}function _S(t,e,n){var r=t._id;return t.each(function(){var i=ZA(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return uA(i,r).value[e]}}function sO(t,e){var n;return(typeof e=="number"?Yl:e instanceof jA?F_:(n=jA(e))?(e=n,F_):Kz)(t,e)}function loe(t){return function(){this.removeAttribute(t)}}function Aoe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function uoe(t,e,n){var r,i=n+"",s;return function(){var A=this.getAttribute(t);return A===i?null:A===r?s:s=e(r=A,n)}}function coe(t,e,n){var r,i=n+"",s;return function(){var A=this.getAttributeNS(t.space,t.local);return A===i?null:A===r?s:s=e(r=A,n)}}function hoe(t,e,n){var r,i,s;return function(){var A,a=n(this),y;return a==null?void this.removeAttribute(t):(A=this.getAttribute(t),y=a+"",A===y?null:A===r&&y===i?s:(i=y,s=e(r=A,a)))}}function foe(t,e,n){var r,i,s;return function(){var A,a=n(this),y;return a==null?void this.removeAttributeNS(t.space,t.local):(A=this.getAttributeNS(t.space,t.local),y=a+"",A===y?null:A===r&&y===i?s:(i=y,s=e(r=A,a)))}}function doe(t,e){var n=Z2(t),r=n==="transform"?Zse:sO;return this.attrTween(t,typeof e=="function"?(n.local?foe:hoe)(n,r,_S(this,"attr."+t,e)):e==null?(n.local?Aoe:loe)(n):(n.local?coe:uoe)(n,r,e))}function poe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function goe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function moe(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&goe(t,s)),n}return i._value=e,i}function yoe(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&poe(t,s)),n}return i._value=e,i}function _oe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Z2(t);return this.tween(n,(r.local?moe:yoe)(r,e))}function voe(t,e){return function(){yS(this,t).delay=+e.apply(this,arguments)}}function xoe(t,e){return e=+e,function(){yS(this,t).delay=e}}function woe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?voe:xoe)(e,t)):uA(this.node(),e).delay}function boe(t,e){return function(){ZA(this,t).duration=+e.apply(this,arguments)}}function Eoe(t,e){return e=+e,function(){ZA(this,t).duration=e}}function Toe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?boe:Eoe)(e,t)):uA(this.node(),e).duration}function Soe(t,e){if(typeof e!="function")throw new Error;return function(){ZA(this,t).ease=e}}function Moe(t){var e=this._id;return arguments.length?this.each(Soe(e,t)):uA(this.node(),e).ease}function Coe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ZA(this,t).ease=n}}function Poe(t){if(typeof t!="function")throw new Error;return this.each(Coe(this._id,t))}function Ioe(t){typeof t!="function"&&(t=Lz(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],A=s.length,a=r[i]=[],y,w=0;w<A;++w)(y=s[w])&&t.call(y,y.__data__,w,s)&&a.push(y);return new Yu(r,this._parents,this._name,this._id)}function koe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),A=new Array(r),a=0;a<s;++a)for(var y=e[a],w=n[a],M=y.length,C=A[a]=new Array(M),k,U=0;U<M;++U)(k=y[U]||w[U])&&(C[U]=k);for(;a<r;++a)A[a]=e[a];return new Yu(A,this._parents,this._name,this._id)}function Loe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Doe(t,e,n){var r,i,s=Loe(e)?yS:ZA;return function(){var A=s(this,t),a=A.on;a!==r&&(i=(r=a).copy()).on(e,n),A.on=i}}function Roe(t,e){var n=this._id;return arguments.length<2?uA(this.node(),n).on.on(t):this.each(Doe(n,t,e))}function Boe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function zoe(){return this.on("end.remove",Boe(this._id))}function Ooe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=hS(t));for(var r=this._groups,i=r.length,s=new Array(i),A=0;A<i;++A)for(var a=r[A],y=a.length,w=s[A]=new Array(y),M,C,k=0;k<y;++k)(M=a[k])&&(C=t.call(M,M.__data__,k,a))&&("__data__"in M&&(C.__data__=M.__data__),w[k]=C,K2(w[k],e,n,k,w,uA(M,n)));return new Yu(s,this._parents,e,n)}function Foe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kz(t));for(var r=this._groups,i=r.length,s=[],A=[],a=0;a<i;++a)for(var y=r[a],w=y.length,M,C=0;C<w;++C)if(M=y[C]){for(var k=t.call(M,M.__data__,C,y),U,H=uA(M,n),q=0,se=k.length;q<se;++q)(U=k[q])&&K2(U,e,n,q,k,H);s.push(k),A.push(M)}return new Yu(s,A,e,n)}var Noe=vm.prototype.constructor;function Uoe(){return new Noe(this._groups,this._parents)}function Voe(t,e){var n,r,i;return function(){var s=od(this,t),A=(this.style.removeProperty(t),od(this,t));return s===A?null:s===n&&A===r?i:i=e(n=s,r=A)}}function oO(t){return function(){this.style.removeProperty(t)}}function Goe(t,e,n){var r,i=n+"",s;return function(){var A=od(this,t);return A===i?null:A===r?s:s=e(r=A,n)}}function joe(t,e,n){var r,i,s;return function(){var A=od(this,t),a=n(this),y=a+"";return a==null&&(y=a=(this.style.removeProperty(t),od(this,t))),A===y?null:A===r&&y===i?s:(i=y,s=e(r=A,a))}}function $oe(t,e){var n,r,i,s="style."+e,A="end."+s,a;return function(){var y=ZA(this,t),w=y.on,M=y.value[s]==null?a||(a=oO(e)):void 0;(w!==n||i!==M)&&(r=(n=w).copy()).on(A,i=M),y.on=r}}function Hoe(t,e,n){var r=(t+="")=="transform"?qse:sO;return e==null?this.styleTween(t,Voe(t,r)).on("end.style."+t,oO(t)):typeof e=="function"?this.styleTween(t,joe(t,r,_S(this,"style."+t,e))).each($oe(this._id,t)):this.styleTween(t,Goe(t,r,e),n).on("end.style."+t,null)}function Woe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Qoe(t,e,n){var r,i;function s(){var A=e.apply(this,arguments);return A!==i&&(r=(i=A)&&Woe(t,A,n)),r}return s._value=e,s}function qoe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Qoe(t,e,n??""))}function Zoe(t){return function(){this.textContent=t}}function Yoe(t){return function(){var e=t(this);this.textContent=e??""}}function Xoe(t){return this.tween("text",typeof t=="function"?Yoe(_S(this,"text",t)):Zoe(t==null?"":t+""))}function Koe(t){return function(e){this.textContent=t.call(this,e)}}function Joe(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Koe(i)),e}return r._value=t,r}function eae(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Joe(t))}function tae(){for(var t=this._name,e=this._id,n=aO(),r=this._groups,i=r.length,s=0;s<i;++s)for(var A=r[s],a=A.length,y,w=0;w<a;++w)if(y=A[w]){var M=uA(y,e);K2(y,t,n,w,A,{time:M.time+M.delay+M.duration,delay:0,duration:M.duration,ease:M.ease})}return new Yu(r,this._parents,t,n)}function nae(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,A){var a={value:A},y={value:function(){--i===0&&s()}};n.each(function(){var w=ZA(this,r),M=w.on;M!==t&&(e=(t=M).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(y)),w.on=e}),i===0&&s()})}var rae=0;function Yu(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function aO(){return++rae}var Tu=vm.prototype;Yu.prototype={constructor:Yu,select:Ooe,selectAll:Foe,selectChild:Tu.selectChild,selectChildren:Tu.selectChildren,filter:Ioe,merge:koe,selection:Uoe,transition:tae,call:Tu.call,nodes:Tu.nodes,node:Tu.node,size:Tu.size,empty:Tu.empty,each:Tu.each,on:Roe,attr:doe,attrTween:_oe,style:Hoe,styleTween:qoe,text:Xoe,textTween:eae,remove:zoe,tween:aoe,delay:woe,duration:Toe,ease:Moe,easeVarying:Poe,end:nae,[Symbol.iterator]:Tu[Symbol.iterator]};function iae(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var vS=1.70158;(function t(e){e=+e;function n(r){return(r=+r)*r*(e*(r-1)+r)}return n.overshoot=t,n})(vS);var KI=function t(e){e=+e;function n(r){return--r*r*((r+1)*e+r)+1}return n.overshoot=t,n}(vS);(function t(e){e=+e;function n(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return n.overshoot=t,n})(vS);var sae={time:null,delay:0,duration:250,ease:iae};function oae(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function aae(t){var e,n;t instanceof Yu?(e=t._id,t=t._name):(e=aO(),(n=sae).time=mS(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var A=r[s],a=A.length,y,w=0;w<a;++w)(y=A[w])&&K2(y,t,e,w,A,n||oae(y,e));return new Yu(r,this._parents,t,e)}vm.prototype.interrupt=ioe;vm.prototype.transition=aae;const $3=Math.PI,H3=2*$3,Ih=1e-6,lae=H3-Ih;function lO(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Aae(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return lO;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let uae=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?lO:Aae(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,A){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+A}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let A=this._x1,a=this._y1,y=r-e,w=i-n,M=A-e,C=a-n,k=M*M+C*C;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(k>Ih)if(!(Math.abs(C*y-w*M)>Ih)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let U=r-A,H=i-a,q=y*y+w*w,se=U*U+H*H,Z=Math.sqrt(q),J=Math.sqrt(k),re=s*Math.tan(($3-Math.acos((q+k-se)/(2*Z*J)))/2),de=re/J,_e=re/Z;Math.abs(de-1)>Ih&&this._append`L${e+de*M},${n+de*C}`,this._append`A${s},${s},0,0,${+(C*U>M*H)},${this._x1=e+_e*y},${this._y1=n+_e*w}`}}arc(e,n,r,i,s,A){if(e=+e,n=+n,r=+r,A=!!A,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),y=r*Math.sin(i),w=e+a,M=n+y,C=1^A,k=A?i-s:s-i;this._x1===null?this._append`M${w},${M}`:(Math.abs(this._x1-w)>Ih||Math.abs(this._y1-M)>Ih)&&this._append`L${w},${M}`,r&&(k<0&&(k=k%H3+H3),k>lae?this._append`A${r},${r},0,1,${C},${e-a},${n-y}A${r},${r},0,1,${C},${this._x1=w},${this._y1=M}`:k>Ih&&this._append`A${r},${r},0,${+(k>=$3)},${C},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};const Vu=11102230246251565e-32,so=134217729,cae=(3+8*Vu)*Vu;function Mw(t,e,n,r,i){let s,A,a,y,w=e[0],M=r[0],C=0,k=0;M>w==M>-w?(s=w,w=e[++C]):(s=M,M=r[++k]);let U=0;if(C<t&&k<n)for(M>w==M>-w?(A=w+s,a=s-(A-w),w=e[++C]):(A=M+s,a=s-(A-M),M=r[++k]),s=A,a!==0&&(i[U++]=a);C<t&&k<n;)M>w==M>-w?(A=s+w,y=A-s,a=s-(A-y)+(w-y),w=e[++C]):(A=s+M,y=A-s,a=s-(A-y)+(M-y),M=r[++k]),s=A,a!==0&&(i[U++]=a);for(;C<t;)A=s+w,y=A-s,a=s-(A-y)+(w-y),w=e[++C],s=A,a!==0&&(i[U++]=a);for(;k<n;)A=s+M,y=A-s,a=s-(A-y)+(M-y),M=r[++k],s=A,a!==0&&(i[U++]=a);return(s!==0||U===0)&&(i[U++]=s),U}function hae(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function bm(t){return new Float64Array(t)}const fae=(3+16*Vu)*Vu,dae=(2+12*Vu)*Vu,pae=(9+64*Vu)*Vu*Vu,q0=bm(4),JI=bm(8),e6=bm(12),t6=bm(16),Lo=bm(4);function gae(t,e,n,r,i,s,A){let a,y,w,M,C,k,U,H,q,se,Z,J,re,de,_e,fe,Fe,We;const qe=t-i,Ke=n-i,Oe=e-s,tt=r-s;de=qe*tt,k=so*qe,U=k-(k-qe),H=qe-U,k=so*tt,q=k-(k-tt),se=tt-q,_e=H*se-(de-U*q-H*q-U*se),fe=Oe*Ke,k=so*Oe,U=k-(k-Oe),H=Oe-U,k=so*Ke,q=k-(k-Ke),se=Ke-q,Fe=H*se-(fe-U*q-H*q-U*se),Z=_e-Fe,C=_e-Z,q0[0]=_e-(Z+C)+(C-Fe),J=de+Z,C=J-de,re=de-(J-C)+(Z-C),Z=re-fe,C=re-Z,q0[1]=re-(Z+C)+(C-fe),We=J+Z,C=We-J,q0[2]=J-(We-C)+(Z-C),q0[3]=We;let Ye=hae(4,q0),pt=dae*A;if(Ye>=pt||-Ye>=pt||(C=t-qe,a=t-(qe+C)+(C-i),C=n-Ke,w=n-(Ke+C)+(C-i),C=e-Oe,y=e-(Oe+C)+(C-s),C=r-tt,M=r-(tt+C)+(C-s),a===0&&y===0&&w===0&&M===0)||(pt=pae*A+cae*Math.abs(Ye),Ye+=qe*M+tt*a-(Oe*w+Ke*y),Ye>=pt||-Ye>=pt))return Ye;de=a*tt,k=so*a,U=k-(k-a),H=a-U,k=so*tt,q=k-(k-tt),se=tt-q,_e=H*se-(de-U*q-H*q-U*se),fe=y*Ke,k=so*y,U=k-(k-y),H=y-U,k=so*Ke,q=k-(k-Ke),se=Ke-q,Fe=H*se-(fe-U*q-H*q-U*se),Z=_e-Fe,C=_e-Z,Lo[0]=_e-(Z+C)+(C-Fe),J=de+Z,C=J-de,re=de-(J-C)+(Z-C),Z=re-fe,C=re-Z,Lo[1]=re-(Z+C)+(C-fe),We=J+Z,C=We-J,Lo[2]=J-(We-C)+(Z-C),Lo[3]=We;const en=Mw(4,q0,4,Lo,JI);de=qe*M,k=so*qe,U=k-(k-qe),H=qe-U,k=so*M,q=k-(k-M),se=M-q,_e=H*se-(de-U*q-H*q-U*se),fe=Oe*w,k=so*Oe,U=k-(k-Oe),H=Oe-U,k=so*w,q=k-(k-w),se=w-q,Fe=H*se-(fe-U*q-H*q-U*se),Z=_e-Fe,C=_e-Z,Lo[0]=_e-(Z+C)+(C-Fe),J=de+Z,C=J-de,re=de-(J-C)+(Z-C),Z=re-fe,C=re-Z,Lo[1]=re-(Z+C)+(C-fe),We=J+Z,C=We-J,Lo[2]=J-(We-C)+(Z-C),Lo[3]=We;const Mt=Mw(en,JI,4,Lo,e6);de=a*M,k=so*a,U=k-(k-a),H=a-U,k=so*M,q=k-(k-M),se=M-q,_e=H*se-(de-U*q-H*q-U*se),fe=y*w,k=so*y,U=k-(k-y),H=y-U,k=so*w,q=k-(k-w),se=w-q,Fe=H*se-(fe-U*q-H*q-U*se),Z=_e-Fe,C=_e-Z,Lo[0]=_e-(Z+C)+(C-Fe),J=de+Z,C=J-de,re=de-(J-C)+(Z-C),Z=re-fe,C=re-Z,Lo[1]=re-(Z+C)+(C-fe),We=J+Z,C=We-J,Lo[2]=J-(We-C)+(Z-C),Lo[3]=We;const Qt=Mw(Mt,e6,4,Lo,t6);return t6[Qt-1]}function mae(t,e,n,r,i,s){const A=(e-s)*(n-i),a=(t-i)*(r-s),y=A-a,w=Math.abs(A+a);return Math.abs(y)>=fae*w?y:-gae(t,e,n,r,i,s,w)}function yae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function G_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ld(t){return t=G_(Math.abs(t)),t?t[1]:NaN}function _ae(t,e){return function(n,r){for(var i=n.length,s=[],A=0,a=t[0],y=0;i>0&&a>0&&(y+a+1>r&&(a=Math.max(1,r-y)),s.push(n.substring(i-=a,i+a)),!((y+=a+1)>r));)a=t[A=(A+1)%t.length];return s.reverse().join(e)}}function vae(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var xae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function j_(t){if(!(e=xae.exec(t)))throw new Error("invalid format: "+t);var e;return new xS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}j_.prototype=xS.prototype;function xS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}xS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wae(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var AO;function bae(t,e){var n=G_(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(AO=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,A=r.length;return s===A?r:s>A?r+new Array(s-A+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+G_(t,Math.max(0,e+s-1))[0]}function n6(t,e){var n=G_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const r6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>n6(t*100,e),r:n6,s:bae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function i6(t){return t}var s6=Array.prototype.map,o6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Eae(t){var e=t.grouping===void 0||t.thousands===void 0?i6:_ae(s6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?i6:vae(s6.call(t.numerals,String)),A=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",y=t.nan===void 0?"NaN":t.nan+"";function w(C){C=j_(C);var k=C.fill,U=C.align,H=C.sign,q=C.symbol,se=C.zero,Z=C.width,J=C.comma,re=C.precision,de=C.trim,_e=C.type;_e==="n"?(J=!0,_e="g"):r6[_e]||(re===void 0&&(re=12),de=!0,_e="g"),(se||k==="0"&&U==="=")&&(se=!0,k="0",U="=");var fe=q==="$"?n:q==="#"&&/[boxX]/.test(_e)?"0"+_e.toLowerCase():"",Fe=q==="$"?r:/[%p]/.test(_e)?A:"",We=r6[_e],qe=/[defgprs%]/.test(_e);re=re===void 0?6:/[gprs]/.test(_e)?Math.max(1,Math.min(21,re)):Math.max(0,Math.min(20,re));function Ke(Oe){var tt=fe,Ye=Fe,pt,en,Mt;if(_e==="c")Ye=We(Oe)+Ye,Oe="";else{Oe=+Oe;var Qt=Oe<0||1/Oe<0;if(Oe=isNaN(Oe)?y:We(Math.abs(Oe),re),de&&(Oe=wae(Oe)),Qt&&+Oe==0&&H!=="+"&&(Qt=!1),tt=(Qt?H==="("?H:a:H==="-"||H==="("?"":H)+tt,Ye=(_e==="s"?o6[8+AO/3]:"")+Ye+(Qt&&H==="("?")":""),qe){for(pt=-1,en=Oe.length;++pt<en;)if(Mt=Oe.charCodeAt(pt),48>Mt||Mt>57){Ye=(Mt===46?i+Oe.slice(pt+1):Oe.slice(pt))+Ye,Oe=Oe.slice(0,pt);break}}}J&&!se&&(Oe=e(Oe,1/0));var xt=tt.length+Oe.length+Ye.length,Tt=xt<Z?new Array(Z-xt+1).join(k):"";switch(J&&se&&(Oe=e(Tt+Oe,Tt.length?Z-Ye.length:1/0),Tt=""),U){case"<":Oe=tt+Oe+Ye+Tt;break;case"=":Oe=tt+Tt+Oe+Ye;break;case"^":Oe=Tt.slice(0,xt=Tt.length>>1)+tt+Oe+Ye+Tt.slice(xt);break;default:Oe=Tt+tt+Oe+Ye;break}return s(Oe)}return Ke.toString=function(){return C+""},Ke}function M(C,k){var U=w((C=j_(C),C.type="f",C)),H=Math.max(-8,Math.min(8,Math.floor(ld(k)/3)))*3,q=Math.pow(10,-H),se=o6[8+H/3];return function(Z){return U(q*Z)+se}}return{format:w,formatPrefix:M}}var F1,uO,cO;Tae({thousands:",",grouping:[3],currency:["$",""]});function Tae(t){return F1=Eae(t),uO=F1.format,cO=F1.formatPrefix,F1}function Sae(t){return Math.max(0,-ld(Math.abs(t)))}function Mae(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ld(e)/3)))*3-ld(Math.abs(t)))}function Cae(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ld(e)-ld(t))+1}function wS(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Pae(t){return function(){return t}}function Iae(t){return+t}var a6=[0,1];function gf(t){return t}function W3(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Pae(isNaN(e)?NaN:.5)}function kae(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Lae(t,e,n){var r=t[0],i=t[1],s=e[0],A=e[1];return i<r?(r=W3(i,r),s=n(A,s)):(r=W3(r,i),s=n(s,A)),function(a){return s(r(a))}}function Dae(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),A=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++A<r;)i[A]=W3(t[A],t[A+1]),s[A]=n(e[A],e[A+1]);return function(a){var y=Tz(t,a,1,r)-1;return s[y](i[y](a))}}function hO(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Rae(){var t=a6,e=a6,n=gS,r,i,s,A=gf,a,y,w;function M(){var k=Math.min(t.length,e.length);return A!==gf&&(A=kae(t[0],t[k-1])),a=k>2?Dae:Lae,y=w=null,C}function C(k){return k==null||isNaN(k=+k)?s:(y||(y=a(t.map(r),e,n)))(r(A(k)))}return C.invert=function(k){return A(i((w||(w=a(e,t.map(r),Yl)))(k)))},C.domain=function(k){return arguments.length?(t=Array.from(k,Iae),M()):t.slice()},C.range=function(k){return arguments.length?(e=Array.from(k),M()):e.slice()},C.rangeRound=function(k){return e=Array.from(k),n=Hse,M()},C.clamp=function(k){return arguments.length?(A=k?!0:gf,M()):A!==gf},C.interpolate=function(k){return arguments.length?(n=k,M()):n},C.unknown=function(k){return arguments.length?(s=k,C):s},function(k,U){return r=k,i=U,M()}}function fO(){return Rae()(gf,gf)}function Bae(t,e,n,r){var i=z3(t,e,n),s;switch(r=j_(r??",f"),r.type){case"s":{var A=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Mae(i,A))&&(r.precision=s),cO(r,A)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Cae(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Sae(i))&&(r.precision=s-(r.type==="%")*2);break}}return uO(r)}function dO(t){var e=t.domain;return t.ticks=function(n){var r=e();return x0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Bae(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,A=r[i],a=r[s],y,w,M=10;for(a<A&&(w=A,A=a,a=w,w=i,i=s,s=w);M-- >0;){if(w=B3(A,a,n),w===y)return r[i]=A,r[s]=a,e(r);if(w>0)A=Math.floor(A/w)*w,a=Math.ceil(a/w)*w;else if(w<0)A=Math.ceil(A*w)/w,a=Math.floor(a*w)/w;else break;y=w}return t},t}function Ms(){var t=fO();return t.copy=function(){return hO(t,Ms())},wS.apply(t,arguments),dO(t)}function zae(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],A;return s<i&&(A=n,n=r,r=A,A=i,i=s,s=A),t[n]=e.floor(i),t[r]=e.ceil(s),t}function bi(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function A(y){return y!=null&&y<=y?i[Tz(r,y,0,n)]:s}function a(){var y=-1;for(r=new Array(n);++y<n;)r[y]=((y+1)*e-(y-n)*t)/(n+1);return A}return A.domain=function(y){return arguments.length?([t,e]=y,t=+t,e=+e,a()):[t,e]},A.range=function(y){return arguments.length?(n=(i=Array.from(y)).length-1,a()):i.slice()},A.invertExtent=function(y){var w=i.indexOf(y);return w<0?[NaN,NaN]:w<1?[t,r[0]]:w>=n?[r[n-1],e]:[r[w-1],r[w]]},A.unknown=function(y){return arguments.length&&(s=y),A},A.thresholds=function(){return r.slice()},A.copy=function(){return bi().domain([t,e]).range(i).unknown(s)},wS.apply(dO(A),arguments)}const Cw=new Date,Pw=new Date;function ds(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const A=i(s),a=i.ceil(s);return s-A<a-s?A:a},i.offset=(s,A)=>(e(s=new Date(+s),A==null?1:Math.floor(A)),s),i.range=(s,A,a)=>{const y=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<A)||!(a>0))return y;let w;do y.push(w=new Date(+s)),e(s,a),t(s);while(w<s&&s<A);return y},i.filter=s=>ds(A=>{if(A>=A)for(;t(A),!s(A);)A.setTime(A-1)},(A,a)=>{if(A>=A)if(a<0)for(;++a<=0;)for(;e(A,-1),!s(A););else for(;--a>=0;)for(;e(A,1),!s(A););}),n&&(i.count=(s,A)=>(Cw.setTime(+s),Pw.setTime(+A),t(Cw),t(Pw),Math.floor(n(Cw,Pw))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?A=>r(A)%s===0:A=>i.count(0,A)%s===0):i)),i}const $_=ds(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);$_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ds(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):$_);$_.range;const Du=1e3,gl=Du*60,Ru=gl*60,Xu=Ru*24,bS=Xu*7,l6=Xu*30,Iw=Xu*365,mf=ds(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Du)},(t,e)=>(e-t)/Du,t=>t.getUTCSeconds());mf.range;const ES=ds(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Du)},(t,e)=>{t.setTime(+t+e*gl)},(t,e)=>(e-t)/gl,t=>t.getMinutes());ES.range;const Oae=ds(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*gl)},(t,e)=>(e-t)/gl,t=>t.getUTCMinutes());Oae.range;const TS=ds(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Du-t.getMinutes()*gl)},(t,e)=>{t.setTime(+t+e*Ru)},(t,e)=>(e-t)/Ru,t=>t.getHours());TS.range;const Fae=ds(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ru)},(t,e)=>(e-t)/Ru,t=>t.getUTCHours());Fae.range;const Em=ds(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gl)/Xu,t=>t.getDate()-1);Em.range;const SS=ds(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xu,t=>t.getUTCDate()-1);SS.range;const Nae=ds(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xu,t=>Math.floor(t/Xu));Nae.range;function b0(t){return ds(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*gl)/bS)}const J2=b0(0),H_=b0(1),Uae=b0(2),Vae=b0(3),Ad=b0(4),Gae=b0(5),jae=b0(6);J2.range;H_.range;Uae.range;Vae.range;Ad.range;Gae.range;jae.range;function E0(t){return ds(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/bS)}const pO=E0(0),W_=E0(1),$ae=E0(2),Hae=E0(3),ud=E0(4),Wae=E0(5),Qae=E0(6);pO.range;W_.range;$ae.range;Hae.range;ud.range;Wae.range;Qae.range;const MS=ds(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());MS.range;const qae=ds(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());qae.range;const Ku=ds(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ku.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ds(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ku.range;const i0=ds(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());i0.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ds(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});i0.range;function Zae(t,e,n,r,i,s){const A=[[mf,1,Du],[mf,5,5*Du],[mf,15,15*Du],[mf,30,30*Du],[s,1,gl],[s,5,5*gl],[s,15,15*gl],[s,30,30*gl],[i,1,Ru],[i,3,3*Ru],[i,6,6*Ru],[i,12,12*Ru],[r,1,Xu],[r,2,2*Xu],[n,1,bS],[e,1,l6],[e,3,3*l6],[t,1,Iw]];function a(w,M,C){const k=M<w;k&&([w,M]=[M,w]);const U=C&&typeof C.range=="function"?C:y(w,M,C),H=U?U.range(w,+M+1):[];return k?H.reverse():H}function y(w,M,C){const k=Math.abs(M-w)/C,U=AS(([,,se])=>se).right(A,k);if(U===A.length)return t.every(z3(w/Iw,M/Iw,C));if(U===0)return $_.every(Math.max(z3(w,M,C),1));const[H,q]=A[k/A[U-1][2]<A[U][2]/k?U-1:U];return H.every(q)}return[a,y]}const[Yae,Xae]=Zae(Ku,MS,J2,Em,TS,ES);function kw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Lw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _p(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Kae(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,A=t.shortDays,a=t.months,y=t.shortMonths,w=vp(i),M=xp(i),C=vp(s),k=xp(s),U=vp(A),H=xp(A),q=vp(a),se=xp(a),Z=vp(y),J=xp(y),re={a:Qt,A:xt,b:Tt,B:Xt,c:null,d:d6,e:d6,f:xle,g:kle,G:Dle,H:yle,I:_le,j:vle,L:gO,m:wle,M:ble,p:Mn,q:Cn,Q:m6,s:y6,S:Ele,u:Tle,U:Sle,V:Mle,w:Cle,W:Ple,x:null,X:null,y:Ile,Y:Lle,Z:Rle,"%":g6},de={a:vr,A:Gn,b:Jn,B:ir,c:null,d:p6,e:p6,f:Fle,g:qle,G:Yle,H:Ble,I:zle,j:Ole,L:yO,m:Nle,M:Ule,p:jn,q:Lr,Q:m6,s:y6,S:Vle,u:Gle,U:jle,V:$le,w:Hle,W:Wle,x:null,X:null,y:Qle,Y:Zle,Z:Xle,"%":g6},_e={a:Ke,A:Oe,b:tt,B:Ye,c:pt,d:h6,e:h6,f:dle,g:c6,G:u6,H:f6,I:f6,j:ule,L:fle,m:Ale,M:cle,p:qe,q:lle,Q:gle,s:mle,S:hle,u:rle,U:ile,V:sle,w:nle,W:ole,x:en,X:Mt,y:c6,Y:u6,Z:ale,"%":ple};re.x=fe(n,re),re.X=fe(r,re),re.c=fe(e,re),de.x=fe(n,de),de.X=fe(r,de),de.c=fe(e,de);function fe(St,ln){return function(yn){var bt=[],sr=-1,er=0,lr=St.length,gr,Ar,Zr;for(yn instanceof Date||(yn=new Date(+yn));++sr<lr;)St.charCodeAt(sr)===37&&(bt.push(St.slice(er,sr)),(Ar=A6[gr=St.charAt(++sr)])!=null?gr=St.charAt(++sr):Ar=gr==="e"?" ":"0",(Zr=ln[gr])&&(gr=Zr(yn,Ar)),bt.push(gr),er=sr+1);return bt.push(St.slice(er,sr)),bt.join("")}}function Fe(St,ln){return function(yn){var bt=_p(1900,void 0,1),sr=We(bt,St,yn+="",0),er,lr;if(sr!=yn.length)return null;if("Q"in bt)return new Date(bt.Q);if("s"in bt)return new Date(bt.s*1e3+("L"in bt?bt.L:0));if(ln&&!("Z"in bt)&&(bt.Z=0),"p"in bt&&(bt.H=bt.H%12+bt.p*12),bt.m===void 0&&(bt.m="q"in bt?bt.q:0),"V"in bt){if(bt.V<1||bt.V>53)return null;"w"in bt||(bt.w=1),"Z"in bt?(er=Lw(_p(bt.y,0,1)),lr=er.getUTCDay(),er=lr>4||lr===0?W_.ceil(er):W_(er),er=SS.offset(er,(bt.V-1)*7),bt.y=er.getUTCFullYear(),bt.m=er.getUTCMonth(),bt.d=er.getUTCDate()+(bt.w+6)%7):(er=kw(_p(bt.y,0,1)),lr=er.getDay(),er=lr>4||lr===0?H_.ceil(er):H_(er),er=Em.offset(er,(bt.V-1)*7),bt.y=er.getFullYear(),bt.m=er.getMonth(),bt.d=er.getDate()+(bt.w+6)%7)}else("W"in bt||"U"in bt)&&("w"in bt||(bt.w="u"in bt?bt.u%7:"W"in bt?1:0),lr="Z"in bt?Lw(_p(bt.y,0,1)).getUTCDay():kw(_p(bt.y,0,1)).getDay(),bt.m=0,bt.d="W"in bt?(bt.w+6)%7+bt.W*7-(lr+5)%7:bt.w+bt.U*7-(lr+6)%7);return"Z"in bt?(bt.H+=bt.Z/100|0,bt.M+=bt.Z%100,Lw(bt)):kw(bt)}}function We(St,ln,yn,bt){for(var sr=0,er=ln.length,lr=yn.length,gr,Ar;sr<er;){if(bt>=lr)return-1;if(gr=ln.charCodeAt(sr++),gr===37){if(gr=ln.charAt(sr++),Ar=_e[gr in A6?ln.charAt(sr++):gr],!Ar||(bt=Ar(St,yn,bt))<0)return-1}else if(gr!=yn.charCodeAt(bt++))return-1}return bt}function qe(St,ln,yn){var bt=w.exec(ln.slice(yn));return bt?(St.p=M.get(bt[0].toLowerCase()),yn+bt[0].length):-1}function Ke(St,ln,yn){var bt=U.exec(ln.slice(yn));return bt?(St.w=H.get(bt[0].toLowerCase()),yn+bt[0].length):-1}function Oe(St,ln,yn){var bt=C.exec(ln.slice(yn));return bt?(St.w=k.get(bt[0].toLowerCase()),yn+bt[0].length):-1}function tt(St,ln,yn){var bt=Z.exec(ln.slice(yn));return bt?(St.m=J.get(bt[0].toLowerCase()),yn+bt[0].length):-1}function Ye(St,ln,yn){var bt=q.exec(ln.slice(yn));return bt?(St.m=se.get(bt[0].toLowerCase()),yn+bt[0].length):-1}function pt(St,ln,yn){return We(St,e,ln,yn)}function en(St,ln,yn){return We(St,n,ln,yn)}function Mt(St,ln,yn){return We(St,r,ln,yn)}function Qt(St){return A[St.getDay()]}function xt(St){return s[St.getDay()]}function Tt(St){return y[St.getMonth()]}function Xt(St){return a[St.getMonth()]}function Mn(St){return i[+(St.getHours()>=12)]}function Cn(St){return 1+~~(St.getMonth()/3)}function vr(St){return A[St.getUTCDay()]}function Gn(St){return s[St.getUTCDay()]}function Jn(St){return y[St.getUTCMonth()]}function ir(St){return a[St.getUTCMonth()]}function jn(St){return i[+(St.getUTCHours()>=12)]}function Lr(St){return 1+~~(St.getUTCMonth()/3)}return{format:function(St){var ln=fe(St+="",re);return ln.toString=function(){return St},ln},parse:function(St){var ln=Fe(St+="",!1);return ln.toString=function(){return St},ln},utcFormat:function(St){var ln=fe(St+="",de);return ln.toString=function(){return St},ln},utcParse:function(St){var ln=Fe(St+="",!0);return ln.toString=function(){return St},ln}}}var A6={"-":"",_:" ",0:"0"},Cs=/^\s*\d+/,Jae=/^%/,ele=/[\\^$*+?|[\]().{}]/g;function Nr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function tle(t){return t.replace(ele,"\\$&")}function vp(t){return new RegExp("^(?:"+t.map(tle).join("|")+")","i")}function xp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function nle(t,e,n){var r=Cs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function rle(t,e,n){var r=Cs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ile(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function sle(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ole(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function u6(t,e,n){var r=Cs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function c6(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ale(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lle(t,e,n){var r=Cs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ale(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function h6(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ule(t,e,n){var r=Cs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function f6(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function cle(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function hle(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function fle(t,e,n){var r=Cs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function dle(t,e,n){var r=Cs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ple(t,e,n){var r=Jae.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function gle(t,e,n){var r=Cs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function mle(t,e,n){var r=Cs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function d6(t,e){return Nr(t.getDate(),e,2)}function yle(t,e){return Nr(t.getHours(),e,2)}function _le(t,e){return Nr(t.getHours()%12||12,e,2)}function vle(t,e){return Nr(1+Em.count(Ku(t),t),e,3)}function gO(t,e){return Nr(t.getMilliseconds(),e,3)}function xle(t,e){return gO(t,e)+"000"}function wle(t,e){return Nr(t.getMonth()+1,e,2)}function ble(t,e){return Nr(t.getMinutes(),e,2)}function Ele(t,e){return Nr(t.getSeconds(),e,2)}function Tle(t){var e=t.getDay();return e===0?7:e}function Sle(t,e){return Nr(J2.count(Ku(t)-1,t),e,2)}function mO(t){var e=t.getDay();return e>=4||e===0?Ad(t):Ad.ceil(t)}function Mle(t,e){return t=mO(t),Nr(Ad.count(Ku(t),t)+(Ku(t).getDay()===4),e,2)}function Cle(t){return t.getDay()}function Ple(t,e){return Nr(H_.count(Ku(t)-1,t),e,2)}function Ile(t,e){return Nr(t.getFullYear()%100,e,2)}function kle(t,e){return t=mO(t),Nr(t.getFullYear()%100,e,2)}function Lle(t,e){return Nr(t.getFullYear()%1e4,e,4)}function Dle(t,e){var n=t.getDay();return t=n>=4||n===0?Ad(t):Ad.ceil(t),Nr(t.getFullYear()%1e4,e,4)}function Rle(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Nr(e/60|0,"0",2)+Nr(e%60,"0",2)}function p6(t,e){return Nr(t.getUTCDate(),e,2)}function Ble(t,e){return Nr(t.getUTCHours(),e,2)}function zle(t,e){return Nr(t.getUTCHours()%12||12,e,2)}function Ole(t,e){return Nr(1+SS.count(i0(t),t),e,3)}function yO(t,e){return Nr(t.getUTCMilliseconds(),e,3)}function Fle(t,e){return yO(t,e)+"000"}function Nle(t,e){return Nr(t.getUTCMonth()+1,e,2)}function Ule(t,e){return Nr(t.getUTCMinutes(),e,2)}function Vle(t,e){return Nr(t.getUTCSeconds(),e,2)}function Gle(t){var e=t.getUTCDay();return e===0?7:e}function jle(t,e){return Nr(pO.count(i0(t)-1,t),e,2)}function _O(t){var e=t.getUTCDay();return e>=4||e===0?ud(t):ud.ceil(t)}function $le(t,e){return t=_O(t),Nr(ud.count(i0(t),t)+(i0(t).getUTCDay()===4),e,2)}function Hle(t){return t.getUTCDay()}function Wle(t,e){return Nr(W_.count(i0(t)-1,t),e,2)}function Qle(t,e){return Nr(t.getUTCFullYear()%100,e,2)}function qle(t,e){return t=_O(t),Nr(t.getUTCFullYear()%100,e,2)}function Zle(t,e){return Nr(t.getUTCFullYear()%1e4,e,4)}function Yle(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ud(t):ud.ceil(t),Nr(t.getUTCFullYear()%1e4,e,4)}function Xle(){return"+0000"}function g6(){return"%"}function m6(t){return+t}function y6(t){return Math.floor(+t/1e3)}var Z0,vO;Kle({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kle(t){return Z0=Kae(t),vO=Z0.format,Z0.parse,Z0.utcFormat,Z0.utcParse,Z0}function Jle(t){return new Date(t)}function eAe(t){return t instanceof Date?+t:+new Date(+t)}function xO(t,e,n,r,i,s,A,a,y,w){var M=fO(),C=M.invert,k=M.domain,U=w(".%L"),H=w(":%S"),q=w("%I:%M"),se=w("%I %p"),Z=w("%a %d"),J=w("%b %d"),re=w("%B"),de=w("%Y");function _e(fe){return(y(fe)<fe?U:a(fe)<fe?H:A(fe)<fe?q:s(fe)<fe?se:r(fe)<fe?i(fe)<fe?Z:J:n(fe)<fe?re:de)(fe)}return M.invert=function(fe){return new Date(C(fe))},M.domain=function(fe){return arguments.length?k(Array.from(fe,eAe)):k().map(Jle)},M.ticks=function(fe){var Fe=k();return t(Fe[0],Fe[Fe.length-1],fe??10)},M.tickFormat=function(fe,Fe){return Fe==null?_e:w(Fe)},M.nice=function(fe){var Fe=k();return(!fe||typeof fe.range!="function")&&(fe=e(Fe[0],Fe[Fe.length-1],fe??10)),fe?k(zae(Fe,fe)):M},M.copy=function(){return hO(M,xO(t,e,n,r,i,s,A,a,y,w))},M}function tAe(){return wS.apply(xO(Yae,Xae,Ku,MS,J2,Em,TS,ES,mf,vO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Md(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Cd=t=>Ose(t[t.length-1]);var nAe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Md);const rAe=Cd(nAe);var iAe=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Md);const wO=Cd(iAe);var sAe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Md);const oAe=Cd(sAe);var aAe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Md);const lAe=Cd(aAe);var AAe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Md);const uAe=Cd(AAe);var cAe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Md);const bO=Cd(cAe);function na(t){return function(){return t}}const _6=Math.abs,oo=Math.atan2,Eh=Math.cos,hAe=Math.max,Dw=Math.min,IA=Math.sin,yf=Math.sqrt,Ao=1e-12,Og=Math.PI,Q_=Og/2,fAe=2*Og;function dAe(t){return t>1?0:t<-1?Og:Math.acos(t)}function v6(t){return t>=1?Q_:t<=-1?-Q_:Math.asin(t)}function EO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new uae(e)}function pAe(t){return t.innerRadius}function gAe(t){return t.outerRadius}function mAe(t){return t.startAngle}function yAe(t){return t.endAngle}function _Ae(t){return t&&t.padAngle}function vAe(t,e,n,r,i,s,A,a){var y=n-t,w=r-e,M=A-i,C=a-s,k=C*y-M*w;if(!(k*k<Ao))return k=(M*(e-s)-C*(t-i))/k,[t+k*y,e+k*w]}function N1(t,e,n,r,i,s,A){var a=t-n,y=e-r,w=(A?s:-s)/yf(a*a+y*y),M=w*y,C=-w*a,k=t+M,U=e+C,H=n+M,q=r+C,se=(k+H)/2,Z=(U+q)/2,J=H-k,re=q-U,de=J*J+re*re,_e=i-s,fe=k*q-H*U,Fe=(re<0?-1:1)*yf(hAe(0,_e*_e*de-fe*fe)),We=(fe*re-J*Fe)/de,qe=(-fe*J-re*Fe)/de,Ke=(fe*re+J*Fe)/de,Oe=(-fe*J+re*Fe)/de,tt=We-se,Ye=qe-Z,pt=Ke-se,en=Oe-Z;return tt*tt+Ye*Ye>pt*pt+en*en&&(We=Ke,qe=Oe),{cx:We,cy:qe,x01:-M,y01:-C,x11:We*(i/_e-1),y11:qe*(i/_e-1)}}function x6(){var t=pAe,e=gAe,n=na(0),r=null,i=mAe,s=yAe,A=_Ae,a=null,y=EO(w);function w(){var M,C,k=+t.apply(this,arguments),U=+e.apply(this,arguments),H=i.apply(this,arguments)-Q_,q=s.apply(this,arguments)-Q_,se=_6(q-H),Z=q>H;if(a||(a=M=y()),U<k&&(C=U,U=k,k=C),!(U>Ao))a.moveTo(0,0);else if(se>fAe-Ao)a.moveTo(U*Eh(H),U*IA(H)),a.arc(0,0,U,H,q,!Z),k>Ao&&(a.moveTo(k*Eh(q),k*IA(q)),a.arc(0,0,k,q,H,Z));else{var J=H,re=q,de=H,_e=q,fe=se,Fe=se,We=A.apply(this,arguments)/2,qe=We>Ao&&(r?+r.apply(this,arguments):yf(k*k+U*U)),Ke=Dw(_6(U-k)/2,+n.apply(this,arguments)),Oe=Ke,tt=Ke,Ye,pt;if(qe>Ao){var en=v6(qe/k*IA(We)),Mt=v6(qe/U*IA(We));(fe-=en*2)>Ao?(en*=Z?1:-1,de+=en,_e-=en):(fe=0,de=_e=(H+q)/2),(Fe-=Mt*2)>Ao?(Mt*=Z?1:-1,J+=Mt,re-=Mt):(Fe=0,J=re=(H+q)/2)}var Qt=U*Eh(J),xt=U*IA(J),Tt=k*Eh(_e),Xt=k*IA(_e);if(Ke>Ao){var Mn=U*Eh(re),Cn=U*IA(re),vr=k*Eh(de),Gn=k*IA(de),Jn;if(se<Og)if(Jn=vAe(Qt,xt,vr,Gn,Mn,Cn,Tt,Xt)){var ir=Qt-Jn[0],jn=xt-Jn[1],Lr=Mn-Jn[0],St=Cn-Jn[1],ln=1/IA(dAe((ir*Lr+jn*St)/(yf(ir*ir+jn*jn)*yf(Lr*Lr+St*St)))/2),yn=yf(Jn[0]*Jn[0]+Jn[1]*Jn[1]);Oe=Dw(Ke,(k-yn)/(ln-1)),tt=Dw(Ke,(U-yn)/(ln+1))}else Oe=tt=0}Fe>Ao?tt>Ao?(Ye=N1(vr,Gn,Qt,xt,U,tt,Z),pt=N1(Mn,Cn,Tt,Xt,U,tt,Z),a.moveTo(Ye.cx+Ye.x01,Ye.cy+Ye.y01),tt<Ke?a.arc(Ye.cx,Ye.cy,tt,oo(Ye.y01,Ye.x01),oo(pt.y01,pt.x01),!Z):(a.arc(Ye.cx,Ye.cy,tt,oo(Ye.y01,Ye.x01),oo(Ye.y11,Ye.x11),!Z),a.arc(0,0,U,oo(Ye.cy+Ye.y11,Ye.cx+Ye.x11),oo(pt.cy+pt.y11,pt.cx+pt.x11),!Z),a.arc(pt.cx,pt.cy,tt,oo(pt.y11,pt.x11),oo(pt.y01,pt.x01),!Z))):(a.moveTo(Qt,xt),a.arc(0,0,U,J,re,!Z)):a.moveTo(Qt,xt),!(k>Ao)||!(fe>Ao)?a.lineTo(Tt,Xt):Oe>Ao?(Ye=N1(Tt,Xt,Mn,Cn,k,-Oe,Z),pt=N1(Qt,xt,vr,Gn,k,-Oe,Z),a.lineTo(Ye.cx+Ye.x01,Ye.cy+Ye.y01),Oe<Ke?a.arc(Ye.cx,Ye.cy,Oe,oo(Ye.y01,Ye.x01),oo(pt.y01,pt.x01),!Z):(a.arc(Ye.cx,Ye.cy,Oe,oo(Ye.y01,Ye.x01),oo(Ye.y11,Ye.x11),!Z),a.arc(0,0,k,oo(Ye.cy+Ye.y11,Ye.cx+Ye.x11),oo(pt.cy+pt.y11,pt.cx+pt.x11),Z),a.arc(pt.cx,pt.cy,Oe,oo(pt.y11,pt.x11),oo(pt.y01,pt.x01),!Z))):a.arc(0,0,k,_e,de,Z)}if(a.closePath(),M)return a=null,M+""||null}return w.centroid=function(){var M=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,C=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Og/2;return[Eh(C)*M,IA(C)*M]},w.innerRadius=function(M){return arguments.length?(t=typeof M=="function"?M:na(+M),w):t},w.outerRadius=function(M){return arguments.length?(e=typeof M=="function"?M:na(+M),w):e},w.cornerRadius=function(M){return arguments.length?(n=typeof M=="function"?M:na(+M),w):n},w.padRadius=function(M){return arguments.length?(r=M==null?null:typeof M=="function"?M:na(+M),w):r},w.startAngle=function(M){return arguments.length?(i=typeof M=="function"?M:na(+M),w):i},w.endAngle=function(M){return arguments.length?(s=typeof M=="function"?M:na(+M),w):s},w.padAngle=function(M){return arguments.length?(A=typeof M=="function"?M:na(+M),w):A},w.context=function(M){return arguments.length?(a=M??null,w):a},w}function xAe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TO(t){this._context=t}TO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function SO(t){return new TO(t)}function wAe(t){return t[0]}function bAe(t){return t[1]}function EAe(t,e){var n=na(!0),r=null,i=SO,s=null,A=EO(a);t=typeof t=="function"?t:t===void 0?wAe:na(t),e=typeof e=="function"?e:e===void 0?bAe:na(e);function a(y){var w,M=(y=xAe(y)).length,C,k=!1,U;for(r==null&&(s=i(U=A())),w=0;w<=M;++w)!(w<M&&n(C=y[w],w,y))===k&&((k=!k)?s.lineStart():s.lineEnd()),k&&s.point(+t(C,w,y),+e(C,w,y));if(U)return s=null,U+""||null}return a.x=function(y){return arguments.length?(t=typeof y=="function"?y:na(+y),a):t},a.y=function(y){return arguments.length?(e=typeof y=="function"?y:na(+y),a):e},a.defined=function(y){return arguments.length?(n=typeof y=="function"?y:na(!!y),a):n},a.curve=function(y){return arguments.length?(i=y,r!=null&&(s=i(r)),a):i},a.context=function(y){return arguments.length?(y==null?r=s=null:s=i(r=y),a):r},a}var TAe=CO(SO);function MO(t){this._curve=t}MO.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function CO(t){function e(n){return new MO(t(n))}return e._curve=t,e}function SAe(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(CO(n)):e()._curve},t}function w6(){return SAe(EAe().curve(TAe))}function b6(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function CS(t,e){this._context=t,this._k=(1-e)/6}CS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:b6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:b6(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new CS(r,e)}return n.tension=function(r){return t(+r)},n})(0);function MAe(t,e,n){var r=t._x1,i=t._y1,s=t._x2,A=t._y2;if(t._l01_a>Ao){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,y=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/y,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/y}if(t._l23_a>Ao){var w=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,M=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*w+t._x1*t._l23_2a-e*t._l12_2a)/M,A=(A*w+t._y1*t._l23_2a-n*t._l12_2a)/M}t._context.bezierCurveTo(r,i,s,A,t._x2,t._y2)}function PO(t,e){this._context=t,this._alpha=e}PO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:MAe(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const E6=function t(e){function n(r){return e?new PO(r,e):new CS(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Up(t,e,n){this.k=t,this.x=e,this.y=n}Up.prototype={constructor:Up,scale:function(t){return t===1?this:new Up(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Up(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Up.prototype;function Q3(t,e){return t+e}function Ga(t,e=1,n=1){if(typeof t=="function")return A=>Ga(t(A),e,n);Array.isArray(t)&&(t=Bg(...t).toString());const{l:r,c:i,h:s}=WI(t);return WI(r+18*n,i+18*e,s).toString()}function Us(t,e,n){let r={};return n||(n=[]),Object.keys(t).forEach(i=>{if(n.includes(i))return;let s=t[i],A={};Object.keys(s).forEach(a=>{e(s[a])&&(A[a]=s[a])}),r[i]=A}),r}function CAe(t,e){return t.reduce(function(n,r){return n[e(r)]=r,n},{})}const oh=[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]],[[0,0,-1],[-.67,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[0,.58,0]],[[0,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[-.33,.67,0],[.33,.67,0]],[[0,0,0],[-.67,0,0],[.67,0,0],[-.33,.58,0],[.33,.58,0],[-.33,-.58,0],[.33,-.58,0]]],PAe=[[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]]],[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]]],[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]]],[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]]],[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]]],[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]],[[0,0,-1],[-.67,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[0,.58,0]],[[0,0,-1],[-.67,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[0,.58,0]],[[0,0,-1],[-.67,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[0,.58,0]]],[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]],[[0,0,-1],[-.67,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[0,.58,0]],[[0,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[-.33,.67,0],[.33,.67,0]],[[0,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[-.33,.67,0],[.33,.67,0]]],[[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[.33,-.58,-1]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[-.33,-.58,-1],[0,0,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[.33,.58,-1],[0,.33,0],[0,-.33,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,.58,-1],[-.33,-.33,0],[.33,-.33,0],[0,.29,0]],[[0,0,-1],[-.67,0,-1],[.67,0,-1],[-.33,-.33,0],[.33,-.33,0],[-.33,.33,0],[.33,.33,0]],[[0,0,-1],[-.67,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[0,.58,0]],[[0,0,-1],[-.33,-.67,0],[.33,-.67,0],[-.33,0,0],[.33,0,0],[-.33,.67,0],[.33,.67,0]],[[0,0,0],[-.67,0,0],[.67,0,0],[-.33,.58,0],[.33,.58,0],[-.33,-.58,0],[.33,-.58,0]]]],Tm=Us(await(await fetch("/assets/hex_5_6.json")).json(),t=>t.DemandBaseline),Rw=await(await fetch("/assets/averages.json")).json(),s0=await(await fetch("/assets/demand_geo.json")).json(),T6=CAe(s0.features,t=>t.properties.DU_ID),IAe=await(await fetch("/assets/groundwater_geo.json")).json(),kAe=new Uint16Array([0,2,1,0,3,2]),LAe=new Float32Array([0,1,0,0,1,0,1,1]);function DAe(t,e){if(!e)return RAe(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,s=Math.ceil(r/e)+1,A=(i-1)*(s-1)*6,a=new Uint32Array(A),y=new Float32Array(i*s*2),w=new Float64Array(i*s*3);let M=0,C=0;for(let k=0;k<i;k++){const U=k/(i-1);for(let H=0;H<s;H++){const q=H/(s-1),se=BAe(t,U,q);w[M*3+0]=se[0],w[M*3+1]=se[1],w[M*3+2]=se[2]||0,y[M*2+0]=U,y[M*2+1]=1-q,k>0&&H>0&&(a[C++]=M-s,a[C++]=M-s-1,a[C++]=M-1,a[C++]=M-s,a[C++]=M-1,a[C++]=M),M++}}return{vertexCount:A,positions:w,indices:a,texCoords:y}}function RAe(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[n*3+0]=t[n][0],e[n*3+1]=t[n][1],e[n*3+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:kAe,texCoords:LAe}}function BAe(t,e,n){return VA(VA(t[0],t[1],n),VA(t[3],t[2],n),e)}const zAe=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,OAe=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,FAe=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(OAe,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive && !picking_uAttribute) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),NAe={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:wr.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class ev extends AA{constructor(...e){super(...e),ae(this,"state",void 0)}getShaders(){return super.getShaders({vs:zAe,fs:FAe,modules:[y0,_0]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const n=!0;e.add({indices:{size:1,isIndexed:!0,update:r=>r.value=this.state.mesh.indices,noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:r=>r.value=this.state.mesh.positions,noAlloc:n},texCoords:{size:2,update:r=>r.value=this.state.mesh.texCoords,noAlloc:n}})}updateState({props:e,oldProps:n,changeFlags:r}){const i=this.getAttributeManager();if(r.extensionsChanged){var s;const{gl:A}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(A),i.invalidateAll()}if(e.bounds!==n.bounds){const A=this.state.mesh,a=this._createMesh();this.state.model.setVertexCount(a.vertexCount);for(const y in a)A&&A[y]!==a[y]&&i.invalidate(y);this.setState({mesh:a,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:n}=this.props,r=e.info;if(!r.color||!n)return r.bitmap=null,r;const{width:i,height:s}=n;r.index=0;const A=UAe(r.color),a=[Math.floor(A[0]*i),Math.floor(A[1]*s)];return r.bitmap={size:{width:i,height:s},uv:A,pixel:a},r}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let n=e;return S6(e)&&(n=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),DAe(n,this.context.viewport.resolution)}_getModel(e){return e?new qu(e,{...this.getShaders(),id:this.props.id,geometry:new Uu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:n,moduleParameters:r}=e,{model:i,coordinateConversion:s,bounds:A,disablePicking:a}=this.state,{image:y,desaturate:w,transparentColor:M,tintColor:C}=this.props;r.pickingActive&&a||y&&i&&i.setUniforms(n).setUniforms({bitmapTexture:y,desaturate:w,transparentColor:M.map(k=>k/255),tintColor:C.slice(0,3).map(k=>k/255),coordinateConversion:s,bounds:A}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:n,DEFAULT:r}=wr;let{_imageCoordinateSystem:i}=this.props;if(i!==r){const{bounds:s}=this.props;if(!S6(s))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const A=this.context.viewport.resolution?e:n;if(i=i===e?e:n,i===e&&A===n)return{coordinateConversion:-1,bounds:s};if(i===n&&A===e){const a=qA([s[0],s[1]]),y=qA([s[2],s[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],y[0],y[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}ae(ev,"layerName","BitmapLayer");ae(ev,"defaultProps",NAe);function UAe(t){const[e,n,r]=t,i=(r&240)/256,s=(r&15)/16;return[(e+s)/256,(n+i)/256]}function S6(t){return Number.isFinite(t[0])}const VAe=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,GAe=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,jAe=1024,$Ae=4,M6=()=>{},C6={10241:9987,10240:9729,10242:33071,10243:33071};function HAe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function WAe(t,e,n,r){const i=Math.min(n/e.width,r/e.height),s=Math.floor(e.width*i),A=Math.floor(e.height*i);return i===1?{data:e,width:s,height:A}:(t.canvas.height=A,t.canvas.width=s,t.clearRect(0,0,s,A),t.drawImage(e,0,0,e.width,e.height,0,0,s,A),{data:t.canvas,width:s,height:A})}function Fg(t){return t&&(t.id||t.url)}function QAe(t,e,n,r){const i=t.width,s=t.height,A=new ua(t.gl,{width:e,height:n,parameters:r});return FQ(t,A,{targetY:0,width:i,height:s}),t.delete(),A}function P6(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],A=Fg(i);t[A]={...i,x:s,y:n}}}function qAe({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:A}){let a=[];for(let y=0;y<t.length;y++){const w=t[y],M=Fg(w);if(!n[M]){const{height:C,width:k}=w;r+k+e>A&&(P6(n,a,i),r=0,i=s+i+e,s=0,a=[]),a.push({icon:w,xOffset:r}),r=r+k+e,s=Math.max(s,C)}}return a.length>0&&P6(n,a,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:A,canvasHeight:HAe(s+i+e)}}function ZAe(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=Td(t);for(const A of i){s.index++;const a=e(A,s),y=Fg(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[y]&&(!n[y]||a.url!==n[y].url)&&(r[y]={...a,source:A,sourceIndex:s.index})}return r}class YAe{constructor(e,{onUpdate:n=M6,onError:r=M6}){ae(this,"gl",void 0),ae(this,"onUpdate",void 0),ae(this,"onError",void 0),ae(this,"_loadOptions",null),ae(this,"_texture",null),ae(this,"_externalTexture",null),ae(this,"_mapping",{}),ae(this,"_textureParameters",null),ae(this,"_pendingCount",0),ae(this,"_autoPacking",!1),ae(this,"_xOffset",0),ae(this,"_yOffset",0),ae(this,"_rowHeight",0),ae(this,"_buffer",$Ae),ae(this,"_canvasWidth",jAe),ae(this,"_canvasHeight",0),ae(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Fg(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:s}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var A;(A=this._texture)===null||A===void 0||A.delete(),this._texture=null,this._externalTexture=r}s&&(this._textureParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(ZAe(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:s,yOffset:A,rowHeight:a,canvasHeight:y}=qAe({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=s,this._yOffset=A,this._canvasHeight=y,this._texture||(this._texture=new ua(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||C6})),this._texture.height!==this._canvasHeight&&(this._texture=QAe(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||C6)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,m_(r.url,this._loadOptions).then(i=>{const s=Fg(r),A=this._mapping[s],{x:a,y,width:w,height:M}=A,{data:C,width:k,height:U}=WAe(n,i,w,M);this._texture.setSubImageData({data:C,x:a+(w-k)/2,y:y+(M-U)/2,width:k,height:U}),A.width=k,A.height=U,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const IO=[0,0,0,255],XAe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:IO},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Sm extends AA{constructor(...e){super(...e),ae(this,"state",void 0)}getShaders(){return super.getShaders({vs:VAe,fs:GAe,modules:[y0,_0]})}initializeState(){this.state={iconManager:new YAe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:IO},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager(),{iconAtlas:A,iconMapping:a,data:y,getIcon:w,textureParameters:M}=n,{iconManager:C}=this.state,k=A||this.internalState.isAsyncPropLoading("iconAtlas");if(C.setProps({loadOptions:n.loadOptions,autoPacking:!k,iconAtlas:A,iconMapping:k?a:null,textureParameters:M}),k?r.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&C.packIcons(y,w),i.extensionsChanged){var U;const{gl:H}=this.context;(U=this.state.model)===null||U===void 0||U.delete(),this.state.model=this._getModel(H),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:s,billboard:A,alphaCutoff:a}=this.props,{iconManager:y}=this.state,w=y.getTexture();w&&this.state.model.setUniforms(e).setUniforms({iconsTexture:w,iconsTextureDim:[w.width,w.height],sizeUnits:Xh[s],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:A,alphaCutoff:a}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new qu(e,{...this.getShaders(),id:this.props.id,geometry:new Uu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):yr.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:s=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:s}=this.state.iconManager.getIconMapping(e);return[n,r,i,s]}}ae(Sm,"defaultProps",XAe);ae(Sm,"layerName","IconLayer");const KAe=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,JAe=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,I6=[0,0,0,255],eue={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:I6},getLineColor:{type:"accessor",value:I6},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class PS extends AA{getShaders(){return super.getShaders({vs:KAe,fs:JAe,modules:[y0,_0]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:A,filled:a,billboard:y,antialiasing:w,lineWidthUnits:M,lineWidthScale:C,lineWidthMinPixels:k,lineWidthMaxPixels:U}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:A?1:0,filled:a,billboard:y,antialiasing:w,radiusUnits:Xh[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:Xh[M],lineWidthScale:C,lineWidthMinPixels:k,lineWidthMaxPixels:U}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new qu(e,{...this.getShaders(),id:this.props.id,geometry:new Uu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}ae(PS,"defaultProps",eue);ae(PS,"layerName","ScatterplotLayer");const kO={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function LO(t,e,n={}){return tue(t,n)!==e?(rue(t,n),!0):!1}function tue(t,e={}){return Math.sign(nue(t,e))}function nue(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let A=n,a=r-i;A<r;A+=i)s+=(t[A]-t[a])*(t[A+1]+t[a+1]),a=A;return s/2}function rue(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,A=Math.floor(s/2);for(let a=0;a<A;++a){const y=n+a*i,w=n+(s-1-a)*i;for(let M=0;M<i;++M){const C=t[y+M];t[y+M]=t[w+M],t[w+M]=C}}}function tA(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function q3(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Ng(t,e,n,r,i=[]){const s=r+e*n;for(let A=0;A<n;A++)i[A]=t[s+A];return i}function Z3(t,e,n,r,i=[]){let s,A;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),A=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),A=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),A=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),A=0;else return null;for(let a=0;a<t.length;a++)i[a]=(A&1)===a?r[A]:s*(e[a]-t[a])+t[a];return i}function Iy(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function DO(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:A=0,endIndex:a=t.length}=e||{},y=(a-A)/n;let w=[];const M=[w],C=Ng(t,0,n,A);let k,U;const H=BO(C,i,s,[]),q=[];tA(w,C);for(let se=1;se<y;se++){for(k=Ng(t,se,n,A,k),U=Iy(k,H);U;){Z3(C,k,U,H,q);const Z=Iy(q,H);Z&&(Z3(C,q,Z,H,q),U=Z),tA(w,q),q3(C,q),sue(H,i,U),r&&w.length>n&&(w=[],M.push(w),tA(w,C)),U=Iy(k,H)}tA(w,k),q3(C,k)}return r?M:M[0]}const k6=0,iue=1;function U1(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function RO(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:A=!1}=n||{},a=[],y=[{pos:t,types:A?new Array(t.length/r).fill(iue):null,holes:e||[]}],w=[[],[]];let M=[];for(;y.length;){const{pos:C,types:k,holes:U}=y.shift();oue(C,r,U[0]||C.length,w),M=BO(w[0],i,s,M);const H=Iy(w[1],M);if(H){let q=L6(C,k,r,0,U[0]||C.length,M,H);const se={pos:q[0].pos,types:q[0].types,holes:[]},Z={pos:q[1].pos,types:q[1].types,holes:[]};y.push(se,Z);for(let J=0;J<U.length;J++)q=L6(C,k,r,U[J],U[J+1]||C.length,M,H),q[0]&&(se.holes.push(se.pos.length),se.pos=U1(se.pos,q[0].pos),A&&(se.types=U1(se.types,q[0].types))),q[1]&&(Z.holes.push(Z.pos.length),Z.pos=U1(Z.pos,q[1].pos),A&&(Z.types=U1(Z.types,q[1].types)))}else{const q={positions:C};A&&(q.edgeTypes=k),U.length&&(q.holeIndices=U),a.push(q)}}return a}function L6(t,e,n,r,i,s,A){const a=(i-r)/n,y=[],w=[],M=[],C=[],k=[];let U,H,q;const se=Ng(t,a-1,n,r);let Z=Math.sign(A&8?se[1]-s[3]:se[0]-s[2]),J=e&&e[a-1],re=0,de=0;for(let _e=0;_e<a;_e++)U=Ng(t,_e,n,r,U),H=Math.sign(A&8?U[1]-s[3]:U[0]-s[2]),q=e&&e[r/n+_e],H&&Z&&Z!==H&&(Z3(se,U,A,s,k),tA(y,k)&&M.push(J),tA(w,k)&&C.push(J)),H<=0?(tA(y,U)&&M.push(q),re-=H):M.length&&(M[M.length-1]=k6),H>=0?(tA(w,U)&&C.push(q),de+=H):C.length&&(C[C.length-1]=k6),q3(se,U),Z=H,J=q;return[re?{pos:y,types:e&&M}:null,de?{pos:w,types:e&&C}:null]}function BO(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function sue(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function oue(t,e,n,r){let i=1/0,s=-1/0,A=1/0,a=-1/0;for(let y=0;y<n;y+=e){const w=t[y],M=t[y+1];i=w<i?w:i,s=w>s?w:s,A=M<A?M:A,a=M>a?M:a}return r[0][0]=i,r[0][1]=A,r[1][0]=s,r[1][1]=a,r}const aue=85.051129;function lue(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},A=t.slice(r,i);zO(A,n,0,i-r);const a=DO(A,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const y of a)OO(y,n);return a}function Aue(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const A=[],a=[];let y=0,w=0;for(let C=0;C<=e.length;C++){const k=e[C]||t.length,U=w,H=uue(t,r,y,k);for(let q=H;q<k;q++)A[w++]=t[q];for(let q=y;q<H;q++)A[w++]=t[q];zO(A,r,U,w),cue(A,r,U,w,n?.maxLatitude),y=k,a[C]=w}a.pop();const M=RO(A,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const C of M)OO(C.positions,r);return M}function uue(t,e,n,r){let i=-1,s=-1;for(let A=n+1;A<r;A+=e){const a=Math.abs(t[A]);a>i&&(i=a,s=A-1)}return s}function cue(t,e,n,r,i=aue){const s=t[n],A=t[r-e];if(Math.abs(s-A)>180){const a=Ng(t,0,e,n);a[0]+=Math.round((A-s)/360)*360,tA(t,a),a[1]=Math.sign(a[1])*i,tA(t,a),a[0]=s,tA(t,a)}}function zO(t,e,n,r){let i=t[0],s;for(let A=n;A<r;A+=e){s=t[A];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[A]=i=s}}function OO(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function hue(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let A=0;A<t.length;A++)for(let a=0;a<e;a++)i[A*e+a]=t[A][a]||0}else i=t;return n?DO(i,{size:e,gridResolution:n}):r?lue(i,{size:e}):i}const fue=1,due=2,Bw=4;class pue extends _z{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?hue(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(D6(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&D6(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:A}=n;r.fill(0,s,s+A),i?(r[s]=Bw,r[s+A-2]=Bw):(r[s]+=fue,r[s+A-2]+=due),r[s+A-1]=Bw}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,A=new Array(3);for(let a=i,y=0;y<s;a++,y++)this.getPointOnPath(e,y,A),r[a*3]=A[0],r[a*3+1]=A[1],r[a*3+2]=A[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function D6(t){return Array.isArray(t[0])}const gue=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,mue=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,FO=[0,0,0,255],yue={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:FO},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},zw={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class tv extends AA{constructor(...e){super(...e),ae(this,"state",void 0)}getShaders(){return super.getShaders({vs:gue,fs:mue,modules:[y0,_0]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:zw,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:zw,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:zw,defaultValue:FO},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new pue({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,y=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:y.getPath,buffers:y,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var A;const{gl:a}=this.context;(A=this.state.model)===null||A===void 0||A.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:A,widthScale:a,widthMinPixels:y,widthMaxPixels:w}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:Xh[A],widthScale:a,miterLimit:s,widthMinPixels:y,widthMaxPixels:w}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new qu(e,{...this.getShaders(),id:this.props.id,geometry:new Uu({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}ae(tv,"defaultProps",yue);ae(tv,"layerName","PathLayer");var IS={exports:{}};IS.exports=nv;IS.exports.default=nv;function nv(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=NO(t,0,i,n,!0),A=[];if(!s||s.next===s.prev)return A;var a,y,w,M,C,k,U;if(r&&(s=bue(t,e,s,n)),t.length>80*n){a=w=t[0],y=M=t[1];for(var H=n;H<i;H+=n)C=t[H],k=t[H+1],C<a&&(a=C),k<y&&(y=k),C>w&&(w=C),k>M&&(M=k);U=Math.max(w-a,M-y),U=U!==0?32767/U:0}return Ug(s,A,n,a,y,U,0),A}function NO(t,e,n,r,i){var s,A;if(i===K3(t,e,n,r)>0)for(s=e;s<n;s+=r)A=R6(s,t[s],t[s+1],A);else for(s=n-r;s>=e;s-=r)A=R6(s,t[s],t[s+1],A);return A&&rv(A,A.next)&&(Gg(A),A=A.next),A}function o0(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(rv(n,n.next)||ki(n.prev,n,n.next)===0)){if(Gg(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Ug(t,e,n,r,i,s,A){if(t){!A&&s&&Cue(t,r,i,s);for(var a=t,y,w;t.prev!==t.next;){if(y=t.prev,w=t.next,s?vue(t,r,i,s):_ue(t)){e.push(y.i/n|0),e.push(t.i/n|0),e.push(w.i/n|0),Gg(t),t=w.next,a=w.next;continue}if(t=w,t===a){A?A===1?(t=xue(o0(t),e,n),Ug(t,e,n,r,i,s,2)):A===2&&wue(t,e,n,r,i,s):Ug(o0(t),e,n,r,i,s,1);break}}}}function _ue(t){var e=t.prev,n=t,r=t.next;if(ki(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,A=r.x,a=e.y,y=n.y,w=r.y,M=i<s?i<A?i:A:s<A?s:A,C=a<y?a<w?a:w:y<w?y:w,k=i>s?i>A?i:A:s>A?s:A,U=a>y?a>w?a:w:y>w?y:w,H=r.next;H!==e;){if(H.x>=M&&H.x<=k&&H.y>=C&&H.y<=U&&_f(i,a,s,y,A,w,H.x,H.y)&&ki(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function vue(t,e,n,r){var i=t.prev,s=t,A=t.next;if(ki(i,s,A)>=0)return!1;for(var a=i.x,y=s.x,w=A.x,M=i.y,C=s.y,k=A.y,U=a<y?a<w?a:w:y<w?y:w,H=M<C?M<k?M:k:C<k?C:k,q=a>y?a>w?a:w:y>w?y:w,se=M>C?M>k?M:k:C>k?C:k,Z=Y3(U,H,e,n,r),J=Y3(q,se,e,n,r),re=t.prevZ,de=t.nextZ;re&&re.z>=Z&&de&&de.z<=J;){if(re.x>=U&&re.x<=q&&re.y>=H&&re.y<=se&&re!==i&&re!==A&&_f(a,M,y,C,w,k,re.x,re.y)&&ki(re.prev,re,re.next)>=0||(re=re.prevZ,de.x>=U&&de.x<=q&&de.y>=H&&de.y<=se&&de!==i&&de!==A&&_f(a,M,y,C,w,k,de.x,de.y)&&ki(de.prev,de,de.next)>=0))return!1;de=de.nextZ}for(;re&&re.z>=Z;){if(re.x>=U&&re.x<=q&&re.y>=H&&re.y<=se&&re!==i&&re!==A&&_f(a,M,y,C,w,k,re.x,re.y)&&ki(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;de&&de.z<=J;){if(de.x>=U&&de.x<=q&&de.y>=H&&de.y<=se&&de!==i&&de!==A&&_f(a,M,y,C,w,k,de.x,de.y)&&ki(de.prev,de,de.next)>=0)return!1;de=de.nextZ}return!0}function xue(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!rv(i,s)&&UO(i,r,r.next,s)&&Vg(i,s)&&Vg(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Gg(r),Gg(r.next),r=t=s),r=r.next}while(r!==t);return o0(r)}function wue(t,e,n,r,i,s){var A=t;do{for(var a=A.next.next;a!==A.prev;){if(A.i!==a.i&&kue(A,a)){var y=VO(A,a);A=o0(A,A.next),y=o0(y,y.next),Ug(A,e,n,r,i,s,0),Ug(y,e,n,r,i,s,0);return}a=a.next}A=A.next}while(A!==t)}function bue(t,e,n,r){var i=[],s,A,a,y,w;for(s=0,A=e.length;s<A;s++)a=e[s]*r,y=s<A-1?e[s+1]*r:t.length,w=NO(t,a,y,r,!1),w===w.next&&(w.steiner=!0),i.push(Iue(w));for(i.sort(Eue),s=0;s<i.length;s++)n=Tue(i[s],n);return n}function Eue(t,e){return t.x-e.x}function Tue(t,e){var n=Sue(t,e);if(!n)return e;var r=VO(n,t);return o0(r,r.next),o0(n,n.next)}function Sue(t,e){var n=e,r=t.x,i=t.y,s=-1/0,A;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,A=n.x<n.next.x?n:n.next,a===r))return A}n=n.next}while(n!==e);if(!A)return null;var y=A,w=A.x,M=A.y,C=1/0,k;n=A;do r>=n.x&&n.x>=w&&r!==n.x&&_f(i<M?r:s,i,w,M,i<M?s:r,i,n.x,n.y)&&(k=Math.abs(i-n.y)/(r-n.x),Vg(n,t)&&(k<C||k===C&&(n.x>A.x||n.x===A.x&&Mue(A,n)))&&(A=n,C=k)),n=n.next;while(n!==y);return A}function Mue(t,e){return ki(t.prev,t,e.prev)<0&&ki(e.next,t,t.next)<0}function Cue(t,e,n,r){var i=t;do i.z===0&&(i.z=Y3(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Pue(i)}function Pue(t){var e,n,r,i,s,A,a,y,w=1;do{for(n=t,t=null,s=null,A=0;n;){for(A++,r=n,a=0,e=0;e<w&&(a++,r=r.nextZ,!!r);e++);for(y=w;a>0||y>0&&r;)a!==0&&(y===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,y--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,w*=2}while(A>1);return t}function Y3(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Iue(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function _f(t,e,n,r,i,s,A,a){return(i-A)*(e-a)>=(t-A)*(s-a)&&(t-A)*(r-a)>=(n-A)*(e-a)&&(n-A)*(s-a)>=(i-A)*(r-a)}function kue(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Lue(t,e)&&(Vg(t,e)&&Vg(e,t)&&Due(t,e)&&(ki(t.prev,t,e.prev)||ki(t,e.prev,e))||rv(t,e)&&ki(t.prev,t,t.next)>0&&ki(e.prev,e,e.next)>0)}function ki(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function rv(t,e){return t.x===e.x&&t.y===e.y}function UO(t,e,n,r){var i=G1(ki(t,e,n)),s=G1(ki(t,e,r)),A=G1(ki(n,r,t)),a=G1(ki(n,r,e));return!!(i!==s&&A!==a||i===0&&V1(t,n,e)||s===0&&V1(t,r,e)||A===0&&V1(n,t,r)||a===0&&V1(n,e,r))}function V1(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function G1(t){return t>0?1:t<0?-1:0}function Lue(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&UO(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Vg(t,e){return ki(t.prev,t,t.next)<0?ki(t,e,t.next)>=0&&ki(t,t.prev,e)>=0:ki(t,e,t.prev)<0||ki(t,t.next,e)<0}function Due(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function VO(t,e){var n=new X3(t.i,t.x,t.y),r=new X3(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function R6(t,e,n,r){var i=new X3(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Gg(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function X3(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}nv.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,A=Math.abs(K3(t,0,s,n));if(i)for(var a=0,y=e.length;a<y;a++){var w=e[a]*n,M=a<y-1?e[a+1]*n:t.length;A-=Math.abs(K3(t,w,M,n))}var C=0;for(a=0;a<r.length;a+=3){var k=r[a]*n,U=r[a+1]*n,H=r[a+2]*n;C+=Math.abs((t[k]-t[H])*(t[U+1]-t[k+1])-(t[k]-t[U])*(t[H+1]-t[k+1]))}return A===0&&C===0?0:Math.abs((C-A)/A)};function K3(t,e,n,r){for(var i=0,s=e,A=n-r;s<n;s+=r)i+=(t[A]-t[s])*(t[s+1]+t[A+1]),A=s;return i}nv.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var A=0;A<e;A++)n.vertices.push(t[i][s][A]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var Rue=IS.exports;const Bue=tm(Rue),j1=kO.CLOCKWISE,B6=kO.COUNTER_CLOCKWISE,Vc={isClosed:!0};function zue(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function Vp(t){return"positions"in t?t.positions:t}function ky(t){return"holeIndices"in t?t.holeIndices:null}function Oue(t){return Array.isArray(t[0])}function Fue(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Nue(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function Uue(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function z6(t,e,n,r,i){let s=e;const A=n.length;for(let a=0;a<A;a++)for(let y=0;y<r;y++)t[s++]=n[a][y]||0;if(!Nue(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return Vc.start=e,Vc.end=s,Vc.size=r,LO(t,i,Vc),s}function O6(t,e,n,r,i=0,s,A){s=s||n.length;const a=s-i;if(a<=0)return e;let y=e;for(let w=0;w<a;w++)t[y++]=n[i+w];if(!Uue(n,r,i,s))for(let w=0;w<r;w++)t[y++]=n[i+w];return Vc.start=e,Vc.end=y,Vc.size=r,LO(t,A,Vc),y}function GO(t,e){zue(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let A=0;for(let a=0;a<=s.length;a++)A=O6(n,A,i,e,s[a-1],s[a],a===0?j1:B6),r.push(A);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!Oue(t))return O6(n,0,t,e,0,n.length,j1),n;if(!Fue(t)){let i=0;for(const[s,A]of t.entries())i=z6(n,i,A,e,s===0?j1:B6),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return z6(n,0,t,e,j1),n}function Ow(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const A=(s+1)%r;i+=t[s*3+e]*t[A*3+n],i-=t[A*3+e]*t[s*3+n]}return Math.abs(i/2)}function F6(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const A=s*3,a=t[A+0],y=t[A+1],w=t[A+2];t[A+e]=a,t[A+n]=y,t[A+r]=w}}function Vue(t,e,n,r){let i=ky(t);i&&(i=i.map(a=>a/e));let s=Vp(t);const A=r&&e===3;if(n){const a=s.length;s=s.slice();const y=[];for(let w=0;w<a;w+=e){y[0]=s[w],y[1]=s[w+1],A&&(y[2]=s[w+2]);const M=n(y);s[w]=M[0],s[w+1]=M[1],A&&(s[w+2]=M[2])}}if(A){const a=Ow(s,0,1),y=Ow(s,0,2),w=Ow(s,1,2);if(!a&&!y&&!w)return[];a>y&&a>w||(y>w?(n||(s=s.slice()),F6(s,0,2,1)):(n||(s=s.slice()),F6(s,2,0,1)))}return Bue(s,i,e)}class Gue extends _z{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=GO(e,this.positionSize);return this.opts.resolution?RO(Vp(n),ky(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?Aue(Vp(n),ky(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(N6(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return Vp(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&N6(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:A,typedArrayManager:a}=this;let y=s.indices;if(!y||!e)return;let w=i;const M=Vue(e,this.positionSize,this.opts.preproject,this.opts.full3d);y=a.allocate(y,i+M.length,{copy:!0});for(let C=0;C<M.length;C++)y[w++]=M[C]+r;A[n+1]=i+M.length,s.indices=y}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const A=Vp(e);for(let a=n,y=0;y<r;a++,y++){const w=A[y*s],M=A[y*s+1],C=s>2?A[y*s+2]:0;i[a*3]=w,i[a*3+1]=M,i[a*3+2]=C}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,A=e&&ky(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),A)for(let a=0;a<A.length;a++)s[n+A[a]/i-1]=0;s[n+r-1]=0}}function N6(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const jO=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,jue=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(jO,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),$ue=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(jO,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Hue=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,q_=[0,0,0,255],Wue={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:q_},getLineColor:{type:"accessor",value:q_},material:!0},$1={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class iv extends AA{constructor(...e){super(...e),ae(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?jue:$ue,fs:Hue,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[y0,GX,_0]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===wr.DEFAULT&&(r=wr.LNGLAT);let s;r===wr.LNGLAT&&(i?s=n.projectPosition.bind(n):s=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new Gue({preproject:s,fp64:this.use64bitPositions(),IndexType:!e||jT(e,ai.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const A=this.getAttributeManager(),a=!0;A.remove(["instancePickingColors"]),A.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:$1,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:$1,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:$1,accessor:"getFillColor",defaultValue:q_,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:$1,accessor:"getLineColor",defaultValue:q_,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(y,{index:w,target:M})=>this.encodePickingColor(y&&y.__source?y.__source.index:w,M),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:A,sideModel:a,polygonTesselator:y}=this.state,w={...e,extruded:!!n,elevationScale:s};a&&(a.setInstanceCount(y.instanceCount-1),a.setUniforms(w),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),A&&(A.setVertexCount(y.vertexCount),A.setUniforms(w).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(y=>y.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,A=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:A.getPolygon,buffers:A,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,A;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new qu(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(A=new qu(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new Uu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),A.userData.excludeAttributes={indices:!0}),{models:[A,s].filter(Boolean),topModel:s,sideModel:A}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}ae(iv,"defaultProps",Wue);ae(iv,"layerName","SolidPolygonLayer");function $O({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,A=t.length;let a=A,y=A;for(let k=0;k<A;k++){const U=e(t[k]);if(a>k&&U>=i&&(a=k),U>=s){y=k;break}}let w=a;const C=y-a!==r.length?t.slice(y):void 0;for(let k=0;k<r.length;k++)t[w++]=r[k];if(C){for(let k=0;k<C.length;k++)t[w++]=C[k];t.length=w}return{startRow:a,endRow:a+r.length}}const HO=[0,0,0,255],Que=[0,0,0,255],que={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:Que},getLineColor:{type:"accessor",value:HO},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class sv extends fr{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&yr.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(s=>$O({data:r,getIndex:A=>A.__source.index,dataRange:s,replace:this._getPaths(s)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:s}=this.props,A=[],a=i==="XY"?2:3,{startRow:y,endRow:w}=e,{iterable:M,objectInfo:C}=Td(n,y,w);for(const k of M){C.index++;let U=r(k,C);s&&(U=GO(U,a));const{holeIndices:H}=U,q=U.positions||U;if(H)for(let se=0;se<=H.length;se++){const Z=q.slice(H[se-1]||0,H[se]||q.length);A.push(this.getSubLayerRow({path:Z},k,C.index))}else A.push(this.getSubLayerRow({path:q},k,C.index))}return A}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:s,wireframe:A,_normalize:a,_windingOrder:y,elevationScale:w,transitions:M,positionFormat:C}=this.props,{lineWidthUnits:k,lineWidthScale:U,lineWidthMinPixels:H,lineWidthMaxPixels:q,lineJointRounded:se,lineMiterLimit:Z,lineDashJustified:J}=this.props,{getFillColor:re,getLineColor:de,getLineWidth:_e,getLineDashArray:fe,getElevation:Fe,getPolygon:We,updateTriggers:qe,material:Ke}=this.props,{paths:Oe,pathsDiff:tt}=this.state,Ye=this.getSubLayerClass("fill",iv),pt=this.getSubLayerClass("stroke",tv),en=this.shouldRenderSubLayer("fill",Oe)&&new Ye({_dataDiff:n,extruded:s,elevationScale:w,filled:i,wireframe:A,_normalize:a,_windingOrder:y,getElevation:Fe,getFillColor:re,getLineColor:s&&A?de:HO,material:Ke,transitions:M},this.getSubLayerProps({id:"fill",updateTriggers:qe&&{getPolygon:qe.getPolygon,getElevation:qe.getElevation,getFillColor:qe.getFillColor,lineColors:s&&A,getLineColor:qe.getLineColor}}),{data:e,positionFormat:C,getPolygon:We}),Mt=!s&&r&&this.shouldRenderSubLayer("stroke",Oe)&&new pt({_dataDiff:tt&&(()=>tt),widthUnits:k,widthScale:U,widthMinPixels:H,widthMaxPixels:q,jointRounded:se,miterLimit:Z,dashJustified:J,_pathType:"loop",transitions:M&&{getWidth:M.getLineWidth,getColor:M.getLineColor,getPath:M.getPolygon},getColor:this.getSubLayerAccessor(de),getWidth:this.getSubLayerAccessor(_e),getDashArray:this.getSubLayerAccessor(fe)},this.getSubLayerProps({id:"stroke",updateTriggers:qe&&{getWidth:qe.getLineWidth,getColor:qe.getLineColor,getDashArray:qe.getLineDashArray}}),{data:Oe,positionFormat:C,getPath:Qt=>Qt.path});return[!s&&en,Mt,s&&en]}}ae(sv,"layerName","PolygonLayer");ae(sv,"defaultProps",que);function Zue(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?Yue(t,r,n):null}function Yue(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function Xue(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const s=[];for(let A=0;A<i.length;A++)e(i[A],s),n[r][A*3+0]=s[0],n[r][A*3+1]=s[1],n[r][A*3+2]=s[2]}return n}const Kue=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Fw=192/256,U6=[],Jue={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class kS extends Sm{constructor(...e){super(...e),ae(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:Kue}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&yr.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:s}=this.state,A=i?Math.max(r,Fw*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:Fw,outlineBuffer:A,gamma:r,sdf:!!n,outlineColor:s},super.draw(e),n&&i){const{iconManager:a}=this.state;a.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:Fw}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):U6}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):U6}}ae(kS,"defaultProps",Jue);ae(kS,"layerName","MultiIconLayer");const ag=1e20;class ece{constructor({fontSize:e=24,buffer:n=3,radius:r=8,cutoff:i=.25,fontFamily:s="sans-serif",fontWeight:A="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=i,this.radius=r;const y=this.size=e+n*4,w=this._createCanvas(y),M=this.ctx=w.getContext("2d",{willReadFrequently:!0});M.font=`${a} ${A} ${e}px ${s}`,M.textBaseline="alphabetic",M.textAlign="left",M.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:s,actualBoundingBoxRight:A}=this.ctx.measureText(e),a=Math.ceil(r),y=0,w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-s))),M=Math.min(this.size-this.buffer,a+Math.ceil(i)),C=w+2*this.buffer,k=M+2*this.buffer,U=Math.max(C*k,0),H=new Uint8ClampedArray(U),q={data:H,width:C,height:k,glyphWidth:w,glyphHeight:M,glyphTop:a,glyphLeft:y,glyphAdvance:n};if(w===0||M===0)return q;const{ctx:se,buffer:Z,gridInner:J,gridOuter:re}=this;se.clearRect(Z,Z,w,M),se.fillText(e,Z,Z+a);const de=se.getImageData(Z,Z,w,M);re.fill(ag,0,U),J.fill(0,0,U);for(let _e=0;_e<M;_e++)for(let fe=0;fe<w;fe++){const Fe=de.data[4*(_e*w+fe)+3]/255;if(Fe===0)continue;const We=(_e+Z)*C+fe+Z;if(Fe===1)re[We]=0,J[We]=ag;else{const qe=.5-Fe;re[We]=qe>0?qe*qe:0,J[We]=qe<0?qe*qe:0}}V6(re,0,0,C,k,C,this.f,this.v,this.z),V6(J,Z,Z,w,M,C,this.f,this.v,this.z);for(let _e=0;_e<U;_e++){const fe=Math.sqrt(re[_e])-Math.sqrt(J[_e]);H[_e]=Math.round(255-255*(fe/this.radius+this.cutoff))}return q}}function V6(t,e,n,r,i,s,A,a,y){for(let w=e;w<e+r;w++)G6(t,n*s+w,s,i,A,a,y);for(let w=n;w<n+i;w++)G6(t,w*s+e,1,r,A,a,y)}function G6(t,e,n,r,i,s,A){s[0]=0,A[0]=-ag,A[1]=ag,i[0]=t[e];for(let a=1,y=0,w=0;a<r;a++){i[a]=t[e+a*n];const M=a*a;do{const C=s[y];w=(i[a]-i[C]+M-C*C)/(a-C)/2}while(w<=A[y]&&--y>-1);y++,s[y]=a,A[y]=w,A[y+1]=ag}for(let a=0,y=0;a<r;a++){for(;A[y+1]<a;)y++;const w=s[y],M=a-w;t[e+a*n]=i[w]+M*M}}const tce=32,nce=[];function rce(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function ice({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:s={},xOffset:A=0,yOffset:a=0}){let y=0,w=A;const M=n+r*2;for(const C of t)if(!s[C]){const k=e(C);w+k+r*2>i&&(w=0,y++),s[C]={x:w+r,y:a+y*M+r,width:k,height:M,layoutWidth:k,layoutHeight:n},w+=k+r*2}return{mapping:s,xOffset:w,yOffset:a+y*M,canvasHeight:rce(a+(y+1)*M)}}function WO(t,e,n,r){let i=0;for(let A=e;A<n;A++){var s;const a=t[A];i+=((s=r[a])===null||s===void 0?void 0:s.layoutWidth)||0}return i}function QO(t,e,n,r,i,s){let A=e,a=0;for(let y=e;y<n;y++){const w=WO(t,y,y+1,i);a+w>r&&(A<y&&s.push(y),A=y,a=0),a+=w}return a}function sce(t,e,n,r,i,s){let A=e,a=e,y=e,w=0;for(let M=e;M<n;M++)if((t[M]===" "||t[M+1]===" "||M+1===n)&&(y=M+1),y>a){let C=WO(t,a,y,i);w+C>r&&(A<a&&(s.push(a),A=a,w=0),C>r&&(C=QO(t,a,y,r,i,s),A=s[s.length-1])),a=y,w+=C}return w}function oce(t,e,n,r,i=0,s){s===void 0&&(s=t.length);const A=[];return e==="break-all"?QO(t,i,s,n,r,A):sce(t,i,s,n,r,A),A}function ace(t,e,n,r,i,s){let A=0,a=0;for(let y=e;y<n;y++){const w=t[y],M=r[w];M?(a||(a=M.layoutHeight),i[y]=A+M.layoutWidth/2,A+=M.layoutWidth):(yr.warn("Missing character: ".concat(w," (").concat(w.codePointAt(0),")"))(),i[y]=A,A+=tce)}s[0]=A,s[1]=a}function lce(t,e,n,r,i){const s=Array.from(t),A=s.length,a=new Array(A),y=new Array(A),w=new Array(A),M=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,C=[0,0],k=[0,0];let U=0,H=0,q=0;for(let Z=0;Z<=A;Z++){const J=s[Z];if((J===`
`||Z===A)&&(q=Z),q>H){const re=M?oce(s,n,r,i,H,q):nce;for(let de=0;de<=re.length;de++){const _e=de===0?H:re[de-1],fe=de<re.length?re[de]:q;ace(s,_e,fe,i,a,k);for(let Fe=_e;Fe<fe;Fe++){var se;const We=s[Fe],qe=((se=i[We])===null||se===void 0?void 0:se.layoutOffsetY)||0;y[Fe]=U+k[1]/2+qe,w[Fe]=k[0]}U=U+k[1]*e,C[0]=Math.max(C[0],k[0])}H=q}J===`
`&&(a[H]=0,y[H]=0,w[H]=0,H++)}return C[1]=U,{x:a,y,rowWidth:w,size:C}}function Ace({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:s}){const A=t.BYTES_PER_ELEMENT,a=n?n/A:1,y=r?r/A:0,w=i[e]||Math.ceil((t.length-y)/a),M=s&&new Set,C=new Array(e);let k=t;if(a>1||y>0){const U=t.constructor;k=new U(w);for(let H=0;H<w;H++)k[H]=t[H*a+y]}for(let U=0;U<e;U++){const H=i[U],q=i[U+1]||w,se=k.subarray(H,q);C[U]=String.fromCodePoint.apply(null,se),M&&se.forEach(M.add,M)}if(M)for(const U of M)s.add(String.fromCodePoint(U));return{texts:C,characterCount:w}}class qO{constructor(e=5){ae(this,"limit",void 0),ae(this,"_cache",{}),ae(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function uce(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const Uf={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:uce(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},j6=1024,$6=.9,H6=1.2,ZO=3;let Z_=new qO(ZO);function cce(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=Z_.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function hce(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function W6(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function fce(t){yr.assert(Number.isFinite(t)&&t>=ZO,"Invalid cache limit"),Z_=new qO(t)}class dce{constructor(){ae(this,"props",{...Uf}),ae(this,"_key",void 0),ae(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(e*H6+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=cce(this._key,this.props.characterSet),r=Z_.get(this._key);if(r&&n.size===0){this._atlas!==r&&(this._atlas=r);return}const i=this._generateFontAtlas(n,r);this._atlas=i,Z_.set(this._key,i)}_generateFontAtlas(e,n){const{fontFamily:r,fontWeight:i,fontSize:s,buffer:A,sdf:a,radius:y,cutoff:w}=this.props;let M=n&&n.data;M||(M=document.createElement("canvas"),M.width=j6);const C=M.getContext("2d",{willReadFrequently:!0});W6(C,r,s,i);const{mapping:k,canvasHeight:U,xOffset:H,yOffset:q}=ice({getFontWidth:se=>C.measureText(se).width,fontHeight:s*H6,buffer:A,characterSet:e,maxCanvasWidth:j6,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(M.height!==U){const se=C.getImageData(0,0,M.width,M.height);M.height=U,C.putImageData(se,0,0)}if(W6(C,r,s,i),a){const se=new ece({fontSize:s,buffer:A,radius:y,cutoff:w,fontFamily:r,fontWeight:"".concat(i)});for(const Z of e){const{data:J,width:re,height:de,glyphTop:_e}=se.draw(Z);k[Z].width=re,k[Z].layoutOffsetY=s*$6-_e;const fe=C.createImageData(re,de);hce(J,fe),C.putImageData(fe,k[Z].x,k[Z].y)}}else for(const se of e)C.fillText(se,k[se].x,k[se].y+A+s*$6);return{xOffset:H,yOffset:q,mapping:k,data:M,width:M.width,height:M.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:s,radius:A,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(A," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const pce=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,gce=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,mce={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class LS extends AA{constructor(...e){super(...e),ae(this,"state",void 0)}getShaders(){return super.getShaders({vs:pce,fs:gce,modules:[y0,_0]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:s,sizeMaxPixels:A,getLineWidth:a}=this.props;let{padding:y}=this.props;y.length<4&&(y=[y[0],y[1],y[0],y[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:y,sizeUnits:Xh[i],sizeScale:r,sizeMinPixels:s,sizeMaxPixels:A}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new qu(e,{...this.getShaders(),id:this.props.id,geometry:new Uu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}ae(LS,"defaultProps",mce);ae(LS,"layerName","TextBackgroundLayer");const Q6={start:1,middle:0,end:-1},q6={top:1,center:0,bottom:-1},Nw=[0,0,0,255],yce=1,_ce={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Nw},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Uf.characterSet},fontFamily:Uf.fontFamily,fontWeight:Uf.fontWeight,lineHeight:yce,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Nw},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Nw},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class DS extends fr{constructor(...e){super(...e),ae(this,"state",void 0),ae(this,"getBoundingRect",(n,r)=>{let{size:[i,s]}=this.transformParagraph(n,r);const{fontSize:A}=this.state.fontAtlasManager.props;i/=A,s/=A;const{getTextAnchor:a,getAlignmentBaseline:y}=this.props,w=Q6[typeof a=="function"?a(n,r):a],M=q6[typeof y=="function"?y(n,r):y];return[(w-1)*i/2,(M-1)*s/2,i,s]}),ae(this,"getIconOffsets",(n,r)=>{const{getTextAnchor:i,getAlignmentBaseline:s}=this.props,{x:A,y:a,rowWidth:y,size:[w,M]}=this.transformParagraph(n,r),C=Q6[typeof i=="function"?i(n,r):i],k=q6[typeof s=="function"?s(n,r):s],U=A.length,H=new Array(U*2);let q=0;for(let se=0;se<U;se++){const Z=(1-C)*(w-y[se])/2;H[q++]=(C-1)*w/2+Z+A[se],H[q++]=(k-1)*M/2+a[se]}return H})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new dce},this.props.maxWidth>0&&yr.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:s}=this.state,A={...e,characterSet:s,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(A),!0;for(const a in A)if(A[a]!==i.props[a])return i.setProps(A),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:s}=this.props,A=n.startIndices,a;const y=r==="auto"&&new Set;if(i&&A){const{texts:w,characterCount:M}=Ace({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:A,characterSet:y});a=M,s=(C,{index:k})=>w[k]}else{const{iterable:w,objectInfo:M}=Td(n);A=[0],a=0;for(const C of w){M.index++;const k=Array.from(s(C,M)||"");y&&k.forEach(y.add,y),a+=k.length,A.push(a)}}this.setState({getText:s,startIndices:A,numInstances:a,characterSet:y||r})}transformParagraph(e,n){const{fontAtlasManager:r}=this.state,i=r.mapping,s=this.state.getText,{wordBreak:A,lineHeight:a,maxWidth:y}=this.props,w=s(e,n)||"";return lce(w,a,A,y*r.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:s,mapping:A},styleVersion:a}=this.state,{data:y,_dataDiff:w,getPosition:M,getColor:C,getSize:k,getAngle:U,getPixelOffset:H,getBackgroundColor:q,getBorderColor:se,getBorderWidth:Z,backgroundPadding:J,background:re,billboard:de,fontSettings:_e,outlineWidth:fe,outlineColor:Fe,sizeScale:We,sizeUnits:qe,sizeMinPixels:Ke,sizeMaxPixels:Oe,transitions:tt,updateTriggers:Ye}=this.props,pt=this.getSubLayerClass("characters",kS),en=this.getSubLayerClass("background",LS);return[re&&new en({getFillColor:q,getLineColor:se,getLineWidth:Z,padding:J,getPosition:M,getSize:k,getAngle:U,getPixelOffset:H,billboard:de,sizeScale:We,sizeUnits:qe,sizeMinPixels:Ke,sizeMaxPixels:Oe,transitions:tt&&{getPosition:tt.getPosition,getAngle:tt.getAngle,getSize:tt.getSize,getFillColor:tt.getBackgroundColor,getLineColor:tt.getBorderColor,getLineWidth:tt.getBorderWidth,getPixelOffset:tt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:Ye.getPosition,getAngle:Ye.getAngle,getSize:Ye.getSize,getFillColor:Ye.getBackgroundColor,getLineColor:Ye.getBorderColor,getLineWidth:Ye.getBorderWidth,getPixelOffset:Ye.getPixelOffset,getBoundingRect:{getText:Ye.getText,getTextAnchor:Ye.getTextAnchor,getAlignmentBaseline:Ye.getAlignmentBaseline,styleVersion:a}}}),{data:y.attributes&&y.attributes.background?{length:y.length,attributes:y.attributes.background}:y,_dataDiff:w,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new pt({sdf:_e.sdf,smoothing:Number.isFinite(_e.smoothing)?_e.smoothing:Uf.smoothing,outlineWidth:fe/(_e.radius||Uf.radius),outlineColor:Fe,iconAtlas:s,iconMapping:A,getPosition:M,getColor:C,getSize:k,getAngle:U,getPixelOffset:H,billboard:de,sizeScale:We*i,sizeUnits:qe,sizeMinPixels:Ke*i,sizeMaxPixels:Oe*i,transitions:tt&&{getPosition:tt.getPosition,getAngle:tt.getAngle,getColor:tt.getColor,getSize:tt.getSize,getPixelOffset:tt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:Ye.getText,getPosition:Ye.getPosition,getAngle:Ye.getAngle,getColor:Ye.getColor,getSize:Ye.getSize,getPixelOffset:Ye.getPixelOffset,getIconOffsets:{getTextAnchor:Ye.getTextAnchor,getAlignmentBaseline:Ye.getAlignmentBaseline,styleVersion:a}}}),{data:y,_dataDiff:w,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){fce(e)}}ae(DS,"defaultProps",_ce);ae(DS,"layerName","TextLayer");const Ly={circle:{type:PS,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Sm,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:DS,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Dy={type:tv,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},J3={type:iv,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function wp({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function Uw(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const A=e[s];let a=t.props[s];s.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[A]=r[s],n&&(i.transitions[A]=n[s])),i[A]=a}return i}function vce(t){if(Array.isArray(t))return t;switch(yr.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return yr.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function Z6(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=n;for(let A=i;A<s;A++){const a=t[A],{geometry:y}=a;if(y)if(y.type==="GeometryCollection"){yr.assert(Array.isArray(y.geometries),"GeoJSON does not have geometries array");const{geometries:w}=y;for(let M=0;M<w.length;M++){const C=w[M];Y6(C,r,e,a,A)}}else Y6(y,r,e,a,A)}return r}function Y6(t,e,n,r,i){const{type:s,coordinates:A}=t,{pointFeatures:a,lineFeatures:y,polygonFeatures:w,polygonOutlineFeatures:M}=e;if(!wce(s,A)){yr.warn("".concat(s," coordinates are malformed"))();return}switch(s){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":A.forEach(C=>{a.push(n({geometry:{type:"Point",coordinates:C}},r,i))});break;case"LineString":y.push(n({geometry:t},r,i));break;case"MultiLineString":A.forEach(C=>{y.push(n({geometry:{type:"LineString",coordinates:C}},r,i))});break;case"Polygon":w.push(n({geometry:t},r,i)),A.forEach(C=>{M.push(n({geometry:{type:"LineString",coordinates:C}},r,i))});break;case"MultiPolygon":A.forEach(C=>{w.push(n({geometry:{type:"Polygon",coordinates:C}},r,i)),C.forEach(k=>{M.push(n({geometry:{type:"LineString",coordinates:k}},r,i))})});break}}const xce={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function wce(t,e){let n=xce[t];for(yr.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function YO(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function H1(t){return t.geometry.coordinates}function bce(t,e){const n=YO(),{pointFeatures:r,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:A}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=H1,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=H1,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=H1,n.polygonsOutline.data=A,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=H1,n}function Ece(t,e){const n=YO(),{points:r,lines:i,polygons:s}=t,A=Xue(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:A.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:A.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:3,value:A.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:3,value:A.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}const Tce=["points","linestrings","polygons"],Sce={...wp(Ly.circle),...wp(Ly.icon),...wp(Ly.text),...wp(Dy),...wp(J3),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class _l extends fr{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=Ece(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=vce(e.data),i=this.getSubLayerRow.bind(this);let s={};const A={};if(Array.isArray(n.dataChanged)){const y=this.state.features;for(const w in y)s[w]=y[w].slice(),A[w]=[];for(const w of n.dataChanged){const M=Z6(r,i,w);for(const C in y)A[C].push($O({data:s[C],getIndex:k=>k.__source.index,dataRange:w,replace:M[C]}))}}else s=Z6(r,i);const a=bce(s,A);this.setState({features:s,featuresDiff:A,layerProps:a})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=Tce.find(s=>i.id.startsWith("".concat(this.id,"-").concat(s,"-"))),r>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",s=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,J3.type);if(s){const A=Uw(this,J3.props),a=e&&n;return a||delete A.getLineColor,A.updateTriggers.lineColors=a,new s(A,this.getSubLayerProps({id:i,updateTriggers:A.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",s="linestrings",A=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,Dy.type),a=this.shouldRenderSubLayer(s,r.lines.data)&&this.getSubLayerClass(s,Dy.type);if(A||a){const y=Uw(this,Dy.props);return[A&&new A(y,this.getSubLayerProps({id:i,updateTriggers:y.updateTriggers}),r.polygonsOutline),a&&new a(y,this.getSubLayerProps({id:s,updateTriggers:y.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(a=>a.__source.index===i));const s=new Set(e.split("+")),A=[];for(const a of s){const y="points-".concat(a),w=Ly[a],M=w&&this.shouldRenderSubLayer(y,n.points.data)&&this.getSubLayerClass(y,w.type);if(M){const C=Uw(this,w.props);let k=n.points;if(a==="text"&&r){const{instancePickingColors:U,...H}=k.data.attributes;k={...k,data:{...k.data,attributes:H}}}A.push(new M(C,this.getSubLayerProps({id:y,updateTriggers:C.updateTriggers,highlightedObjectIndex:i}),k))}}return A}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:s,index:A}=i,a=Zue(s,A);return e(a,i)}}}ae(_l,"layerName","GeoJsonLayer");ae(_l,"defaultProps",Sce);class Mce{constructor(e){ae(this,"index",void 0),ae(this,"isVisible",void 0),ae(this,"isSelected",void 0),ae(this,"parent",void 0),ae(this,"children",void 0),ae(this,"content",void 0),ae(this,"state",void 0),ae(this,"layers",void 0),ae(this,"id",void 0),ae(this,"zoom",void 0),ae(this,"userData",void 0),ae(this,"boundingBox",void 0),ae(this,"_abortController",void 0),ae(this,"_loader",void 0),ae(this,"_loaderId",void 0),ae(this,"_isLoaded",void 0),ae(this,"_isCancelled",void 0),ae(this,"_needsReload",void 0),ae(this,"_bbox",void 0),this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,"west"in e?this.boundingBox=[[e.west,e.south],[e.east,e.north]]:this.boundingBox=[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData({getData:e,requestScheduler:n,onLoad:r,onError:i}){const{index:s,id:A,bbox:a,userData:y,zoom:w}=this,M=this._loaderId;this._abortController=new AbortController;const{signal:C}=this._abortController,k=await n.scheduleRequest(this,q=>q.isSelected?1:-1);if(!k){this._isCancelled=!0;return}if(this._isCancelled){k.done();return}let U=null,H;try{U=await e({index:s,id:A,bbox:a,userData:y,zoom:w,signal:C})}catch(q){H=q||!0}finally{k.done()}if(M===this._loaderId){if(this._loader=void 0,this.content=U,this._isCancelled&&!U){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,H?i(H,this):r(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,(e=this._abortController)===null||e===void 0||e.abort())}}const ho={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},X6=new mn,Cce=new mn;class RS{constructor(e=[0,0,0],n=[0,0,0],r){ae(this,"center",void 0),ae(this,"halfDiagonal",void 0),ae(this,"minimum",void 0),ae(this,"maximum",void 0),r=r||X6.copy(e).add(n).scale(.5),this.center=new mn(r),this.halfDiagonal=new mn(n).subtract(this.center),this.minimum=new mn(e),this.maximum=new mn(n)}clone(){return new RS(this.minimum,this.maximum,this.center)}equals(e){return this===e||!!e&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:n}=this,r=Cce.from(e.normal),i=n.x*Math.abs(r.x)+n.y*Math.abs(r.y)+n.z*Math.abs(r.z),s=this.center.dot(r)+e.distance;return s-i>0?ho.INSIDE:s+i<0?ho.OUTSIDE:ho.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=X6.from(e).subtract(this.center),{halfDiagonal:r}=this;let i=0,s;return s=Math.abs(n.x)-r.x,s>0&&(i+=s*s),s=Math.abs(n.y)-r.y,s>0&&(i+=s*s),s=Math.abs(n.z)-r.z,s>0&&(i+=s*s),i}}const bp=new mn,K6=new mn;class BS{constructor(e=[0,0,0],n=0){ae(this,"center",void 0),ae(this,"radius",void 0),this.radius=-0,this.center=new mn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=bp.from(n),this.center=new mn().from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new BS(this.center,this.radius)}union(e){const n=this.center,r=this.radius,i=e.center,s=e.radius,A=bp.copy(i).subtract(n),a=A.magnitude();if(r>=a+s)return this.clone();if(s>=a+r)return e.clone();const y=(r+a+s)*.5;return K6.copy(A).scale((-r+y)/a).add(n),this.center.copy(K6),this.radius=y,this}expand(e){const r=bp.from(e).subtract(this.center).magnitude();return r>this.radius&&(this.radius=r),this}transform(e){this.center.transform(e);const n=ZY(bp,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const r=bp.from(e).subtract(this.center);return Math.max(0,r.len()-this.radius)}intersectPlane(e){const n=this.center,r=this.radius,s=e.normal.dot(n)+e.distance;return s<-r?ho.OUTSIDE:s<r?ho.INTERSECTING:ho.INSIDE}}const Pce=new mn,Ice=new mn,W1=new mn,Q1=new mn,q1=new mn,kce=new mn,Lce=new mn,Su={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class zS{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){ae(this,"center",void 0),ae(this,"halfAxes",void 0),this.center=new mn().from(e),this.halfAxes=new Ns(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2);return[new mn(e).len(),new mn(n).len(),new mn(r).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),i=new mn(e).normalize(),s=new mn(n).normalize(),A=new mn(r).normalize();return new FP().fromMatrix3(new Ns([...i,...s,...A]))}fromCenterHalfSizeQuaternion(e,n,r){const i=new FP(r),s=new Ns().fromQuaternion(i);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=new mn().from(e),this.halfAxes=s,this}clone(){return new zS(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new BS){const n=this.halfAxes,r=n.getColumn(0,W1),i=n.getColumn(1,Q1),s=n.getColumn(2,q1),A=Pce.copy(r).add(i).add(s);return e.center.copy(this.center),e.radius=A.magnitude(),e}intersectPlane(e){const n=this.center,r=e.normal,i=this.halfAxes,s=r.x,A=r.y,a=r.z,y=Math.abs(s*i[Su.COLUMN0ROW0]+A*i[Su.COLUMN0ROW1]+a*i[Su.COLUMN0ROW2])+Math.abs(s*i[Su.COLUMN1ROW0]+A*i[Su.COLUMN1ROW1]+a*i[Su.COLUMN1ROW2])+Math.abs(s*i[Su.COLUMN2ROW0]+A*i[Su.COLUMN2ROW1]+a*i[Su.COLUMN2ROW2]),w=r.dot(n)+e.distance;return w<=-y?ho.OUTSIDE:w>=y?ho.INSIDE:ho.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=Ice.from(e).subtract(this.center),r=this.halfAxes,i=r.getColumn(0,W1),s=r.getColumn(1,Q1),A=r.getColumn(2,q1),a=i.magnitude(),y=s.magnitude(),w=A.magnitude();i.normalize(),s.normalize(),A.normalize();let M=0,C;return C=Math.abs(n.dot(i))-a,C>0&&(M+=C*C),C=Math.abs(n.dot(s))-y,C>0&&(M+=C*C),C=Math.abs(n.dot(A))-w,C>0&&(M+=C*C),M}computePlaneDistances(e,n,r=[-0,-0]){let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const A=this.center,a=this.halfAxes,y=a.getColumn(0,W1),w=a.getColumn(1,Q1),M=a.getColumn(2,q1),C=kce.copy(y).add(w).add(M).add(A),k=Lce.copy(C).subtract(e);let U=n.dot(k);return i=Math.min(U,i),s=Math.max(U,s),C.copy(A).add(y).add(w).subtract(M),k.copy(C).subtract(e),U=n.dot(k),i=Math.min(U,i),s=Math.max(U,s),C.copy(A).add(y).subtract(w).add(M),k.copy(C).subtract(e),U=n.dot(k),i=Math.min(U,i),s=Math.max(U,s),C.copy(A).add(y).subtract(w).subtract(M),k.copy(C).subtract(e),U=n.dot(k),i=Math.min(U,i),s=Math.max(U,s),A.copy(C).subtract(y).add(w).add(M),k.copy(C).subtract(e),U=n.dot(k),i=Math.min(U,i),s=Math.max(U,s),A.copy(C).subtract(y).add(w).subtract(M),k.copy(C).subtract(e),U=n.dot(k),i=Math.min(U,i),s=Math.max(U,s),A.copy(C).subtract(y).subtract(w).add(M),k.copy(C).subtract(e),U=n.dot(k),i=Math.min(U,i),s=Math.max(U,s),A.copy(C).subtract(y).subtract(w).subtract(M),k.copy(C).subtract(e),U=n.dot(k),i=Math.min(U,i),s=Math.max(U,s),r[0]=i,r[1]=s,r}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,W1);n.transformAsPoint(e);const r=this.halfAxes.getColumn(1,Q1);r.transformAsPoint(e);const i=this.halfAxes.getColumn(2,q1);return i.transformAsPoint(e),this.halfAxes=new Ns([...n,...r,...i]),this}getTransform(){throw new Error("not implemented")}}const J6=new mn,ek=new mn;class cd{constructor(e=[0,0,1],n=0){ae(this,"normal",void 0),ae(this,"distance",void 0),this.normal=new mn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return Lg(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=J6.from(e),this.normal.from(n).normalize();const r=-this.normal.dot(e);return this.distance=r,this}fromCoefficients(e,n,r,i){return this.normal.set(e,n,r),Lg(Nu(this.normal.len(),1)),this.distance=i,this}clone(){return new cd(this.normal,this.distance)}equals(e){return Nu(this.distance,e.distance)&&Nu(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=ek.copy(this.normal).transformAsVector(e).normalize(),r=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(r,n)}projectPointOntoPlane(e,n=[0,0,0]){e=J6.from(e);const r=this.getPointDistance(e),i=ek.copy(this.normal).scale(r);return e.subtract(i).to(n)}}const tk=[new mn([1,0,0]),new mn([0,1,0]),new mn([0,0,1])],nk=new mn,Dce=new mn;new cd(new mn(1,0,0),0);class Bu{constructor(e=[]){ae(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*tk.length;const n=e.center,r=e.radius;let i=0;for(const s of tk){let A=this.planes[i],a=this.planes[i+1];A||(A=this.planes[i]=new cd),a||(a=this.planes[i+1]=new cd);const y=nk.copy(s).scale(-r).add(n);-s.dot(y),A.fromPointNormal(y,s);const w=nk.copy(s).scale(r).add(n),M=Dce.copy(s).negate();-M.dot(w),a.fromPointNormal(w,M),i+=2}return this}computeVisibility(e){let n=ho.INSIDE;for(const r of this.planes)switch(e.intersectPlane(r)){case ho.OUTSIDE:return ho.OUTSIDE;case ho.INTERSECTING:n=ho.INTERSECTING;break}return n}computeVisibilityWithPlaneMask(e,n){if(Lg(Number.isFinite(n),"parentPlaneMask is required."),n===Bu.MASK_OUTSIDE||n===Bu.MASK_INSIDE)return n;let r=Bu.MASK_INSIDE;const i=this.planes;for(let s=0;s<this.planes.length;++s){const A=s<31?1<<s:0;if(s<31&&!(n&A))continue;const a=i[s],y=e.intersectPlane(a);if(y===ho.OUTSIDE)return Bu.MASK_OUTSIDE;y===ho.INTERSECTING&&(r|=A)}return r}}ae(Bu,"MASK_OUTSIDE",4294967295);ae(Bu,"MASK_INSIDE",0);ae(Bu,"MASK_INDETERMINATE",2147483647);new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;new mn;const LA=new Ns,Rce=new Ns,Bce=new Ns,Z1=new Ns,rk=new Ns;function zce(t,e={}){const n=IB.EPSILON20,r=10;let i=0,s=0;const A=Rce,a=Bce;A.identity(),a.copy(t);const y=n*Oce(a);for(;s<r&&Fce(a)>y;)Nce(a,Z1),rk.copy(Z1).transpose(),a.multiplyRight(Z1),a.multiplyLeft(rk),A.multiplyRight(Z1),++i>2&&(++s,i=0);return e.unitary=A.toTarget(e.unitary),e.diagonal=a.toTarget(e.diagonal),e}function Oce(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}const eE=[1,0,0],tE=[2,2,1];function Fce(t){let e=0;for(let n=0;n<3;++n){const r=t[LA.getElementIndex(tE[n],eE[n])];e+=2*r*r}return Math.sqrt(e)}function Nce(t,e){const n=IB.EPSILON15;let r=0,i=1;for(let w=0;w<3;++w){const M=Math.abs(t[LA.getElementIndex(tE[w],eE[w])]);M>r&&(i=w,r=M)}const s=eE[i],A=tE[i];let a=1,y=0;if(Math.abs(t[LA.getElementIndex(A,s)])>n){const w=t[LA.getElementIndex(A,A)],M=t[LA.getElementIndex(s,s)],C=t[LA.getElementIndex(A,s)],k=(w-M)/2/C;let U;k<0?U=-1/(-k+Math.sqrt(1+k*k)):U=1/(k+Math.sqrt(1+k*k)),a=1/Math.sqrt(1+U*U),y=U*a}return Ns.IDENTITY.to(e),e[LA.getElementIndex(s,s)]=e[LA.getElementIndex(A,A)]=a,e[LA.getElementIndex(A,s)]=y,e[LA.getElementIndex(s,A)]=-y,e}const Cc=new mn,Uce=new mn,Vce=new mn,Gce=new mn,jce=new mn,$ce=new Ns,Hce={diagonal:new Ns,unitary:new Ns};function Wce(t,e=new zS){if(!t||t.length===0)return e.halfAxes=new Ns([0,0,0,0,0,0,0,0,0]),e.center=new mn,e;const n=t.length,r=new mn(0,0,0);for(const qe of t)r.add(qe);const i=1/n;r.multiplyByScalar(i);let s=0,A=0,a=0,y=0,w=0,M=0;for(const qe of t){const Ke=Cc.copy(qe).subtract(r);s+=Ke.x*Ke.x,A+=Ke.x*Ke.y,a+=Ke.x*Ke.z,y+=Ke.y*Ke.y,w+=Ke.y*Ke.z,M+=Ke.z*Ke.z}s*=i,A*=i,a*=i,y*=i,w*=i,M*=i;const C=$ce;C[0]=s,C[1]=A,C[2]=a,C[3]=A,C[4]=y,C[5]=w,C[6]=a,C[7]=w,C[8]=M;const{unitary:k}=zce(C,Hce),U=e.halfAxes.copy(k);let H=U.getColumn(0,Vce),q=U.getColumn(1,Gce),se=U.getColumn(2,jce),Z=-Number.MAX_VALUE,J=-Number.MAX_VALUE,re=-Number.MAX_VALUE,de=Number.MAX_VALUE,_e=Number.MAX_VALUE,fe=Number.MAX_VALUE;for(const qe of t)Cc.copy(qe),Z=Math.max(Cc.dot(H),Z),J=Math.max(Cc.dot(q),J),re=Math.max(Cc.dot(se),re),de=Math.min(Cc.dot(H),de),_e=Math.min(Cc.dot(q),_e),fe=Math.min(Cc.dot(se),fe);H=H.multiplyByScalar(.5*(de+Z)),q=q.multiplyByScalar(.5*(_e+J)),se=se.multiplyByScalar(.5*(fe+re)),e.center.copy(H).add(q).add(se);const Fe=Uce.set(Z-de,J-_e,re-fe).multiplyByScalar(.5),We=new Ns([Fe[0],0,0,0,Fe[1],0,0,0,Fe[2]]);return e.halfAxes.multiplyRight(We),e}const vf=512,ik=3,XO=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],KO=XO.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),Qce=KO.concat([[.25,.5],[.75,.5]]);class xf{constructor(e,n,r){ae(this,"x",void 0),ae(this,"y",void 0),ae(this,"z",void 0),ae(this,"childVisible",void 0),ae(this,"selected",void 0),ae(this,"_children",void 0),this.x=e,this.y=n,this.z=r}get children(){if(!this._children){const e=this.x*2,n=this.y*2,r=this.z+1;this._children=[new xf(e,n,r),new xf(e,n+1,r),new xf(e+1,n,r),new xf(e+1,n+1,r)]}return this._children}update(e){const{viewport:n,cullingVolume:r,elevationBounds:i,minZ:s,maxZ:A,bounds:a,offset:y,project:w}=e,M=this.getBoundingVolume(i,y,w);if(a&&!this.insideBounds(a)||r.computeVisibility(M)<0)return!1;if(!this.childVisible){let{z:k}=this;if(k<A&&k>=s){const U=M.distanceTo(n.cameraPosition)*n.scale/n.height;k+=Math.floor(Math.log2(U))}if(k>=A)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const k of this.children)k.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(const n of this._children)n.getSelected(e);return e}insideBounds([e,n,r,i]){const s=Math.pow(2,this.z),A=vf/s;return this.x*A<r&&this.y*A<i&&(this.x+1)*A>e&&(this.y+1)*A>n}getBoundingVolume(e,n,r){if(r){const y=this.z<1?Qce:this.z<2?KO:XO,w=[];for(const M of y){const C=rE(this.x+M[0],this.y+M[1],this.z);C[2]=e[0],w.push(r(C)),e[0]!==e[1]&&(C[2]=e[1],w.push(r(C)))}return Wce(w)}const i=Math.pow(2,this.z),s=vf/i,A=this.x*s+n*vf,a=vf-(this.y+1)*s;return new RS([A,a,e[0]],[A+s,a+s,e[1]])}}function qce(t,e,n,r){const i=t instanceof bne&&t.resolution?t.projectPosition:null,s=Object.values(t.getFrustumPlanes()).map(({normal:U,distance:H})=>new cd(U.clone().negate(),H)),A=new Bu(s),a=t.distanceScales.unitsPerMeter[2],y=n&&n[0]*a||0,w=n&&n[1]*a||0,M=t instanceof sh&&t.pitch<=60?e:0;if(r){const[U,H,q,se]=r,Z=qA([U,se]),J=qA([q,H]);r=[Z[0],vf-Z[1],J[0],vf-J[1]]}const C=new xf(0,0,0),k={viewport:t,project:i,cullingVolume:A,elevationBounds:[y,w],minZ:M,maxZ:e,bounds:r,offset:0};if(C.update(k),t instanceof sh&&t.subViewports&&t.subViewports.length>1){for(k.offset=-1;C.update(k)&&!(--k.offset<-ik););for(k.offset=1;C.update(k)&&!(++k.offset>ik););}return C.getSelected()}const Ju=512,Zce=[-1/0,-1/0,1/0,1/0],Yce={type:"object",value:null,validate:(t,e)=>e.optional&&t===null||typeof t=="string"||Array.isArray(t)&&t.every(n=>typeof n=="string"),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function JO(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map(i=>i[0])),Math.min(...n.map(i=>i[1])),Math.max(...n.map(i=>i[0])),Math.max(...n.map(i=>i[1]))]}function Xce(t){return Math.abs(t.split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0)|0,0))}function Kce(t,e){if(!t||!t.length)return null;const{index:n,id:r}=e;if(Array.isArray(t)){const s=Xce(r)%t.length;t=t[s]}let i=t;for(const s of Object.keys(n)){const A=new RegExp("{".concat(s,"}"),"g");i=i.replace(A,String(n[s]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),i}function Jce(t,e,n){let r;if(e&&e.length===2){const[i,s]=e,A=t.getBounds({z:i}),a=t.getBounds({z:s});r=[Math.min(A[0],a[0]),Math.min(A[1],a[1]),Math.max(A[2],a[2]),Math.max(A[3],a[3])]}else r=t.getBounds();return t.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}function ehe({viewport:t,z:e=0,cullRect:n}){return(t.subViewports||[t]).map(i=>nE(i,e,n))}function nE(t,e,n){if(!Array.isArray(e)){const s=n.x-t.x,A=n.y-t.y,{width:a,height:y}=n,w={targetZ:e},M=t.unproject([s,A],w),C=t.unproject([s+a,A],w),k=t.unproject([s,A+y],w),U=t.unproject([s+a,A+y],w);return[Math.min(M[0],C[0],k[0],U[0]),Math.min(M[1],C[1],k[1],U[1]),Math.max(M[0],C[0],k[0],U[0]),Math.max(M[1],C[1],k[1],U[1])]}const r=nE(t,e[0],n),i=nE(t,e[1],n);return[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[2],i[2]),Math.max(r[3],i[3])]}function the(t,e,n){return n?JO(t,n).map(i=>i*e/Ju):t.map(r=>r*e/Ju)}function OS(t,e){return Math.pow(2,t)*Ju/e}function rE(t,e,n){const r=OS(n,Ju),i=t/r*360-180,s=Math.PI-2*Math.PI*e/r,A=180/Math.PI*Math.atan(.5*(Math.exp(s)-Math.exp(-s)));return[i,A]}function sk(t,e,n,r){const i=OS(n,r);return[t/i*Ju,e/i*Ju]}function nhe(t,e,n,r,i=Ju){if(t.isGeospatial){const[w,M]=rE(e,n,r),[C,k]=rE(e+1,n+1,r);return{west:w,north:M,east:C,south:k}}const[s,A]=sk(e,n,r,i),[a,y]=sk(e+1,n+1,r,i);return{left:s,top:A,right:a,bottom:y}}function rhe(t,e,n,r,i){const s=Jce(t,null,r),A=OS(e,n),[a,y,w,M]=the(s,A,i),C=[];for(let k=Math.floor(a);k<w;k++)for(let U=Math.floor(y);U<M;U++)C.push({x:k,y:U,z:e});return C}function ihe({viewport:t,maxZoom:e,minZoom:n,zRange:r,extent:i,tileSize:s=Ju,modelMatrix:A,modelMatrixInverse:a,zoomOffset:y=0}){let w=t.isGeospatial?Math.round(t.zoom+Math.log2(Ju/s))+y:Math.ceil(t.zoom)+y;if(typeof n=="number"&&Number.isFinite(n)&&w<n){if(!i)return[];w=n}typeof e=="number"&&Number.isFinite(e)&&w>e&&(w=e);let M=i;return A&&a&&i&&!t.isGeospatial&&(M=JO(i,A)),t.isGeospatial?qce(t,w,r,i):rhe(t,w,s,M||Zce,a)}function she(t){let e={},n;return r=>{for(const i in r)if(!ohe(r[i],e[i])){n=t(r),e=r;break}return n}}function ohe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}const ok=1,ov=2,ahe="never",lhe="no-overlap",FS="best-available",Ahe=5,uhe={[FS]:fhe,[lhe]:dhe,[ahe]:()=>{}},che={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class hhe{constructor(e){ae(this,"opts",void 0),ae(this,"_requestScheduler",void 0),ae(this,"_cache",void 0),ae(this,"_dirty",void 0),ae(this,"_tiles",void 0),ae(this,"_cacheByteSize",void 0),ae(this,"_viewport",void 0),ae(this,"_zRange",void 0),ae(this,"_selectedTiles",void 0),ae(this,"_frameNumber",void 0),ae(this,"_modelMatrix",void 0),ae(this,"_modelMatrixInverse",void 0),ae(this,"_maxZoom",void 0),ae(this,"_minZoom",void 0),ae(this,"onTileLoad",void 0),ae(this,"_getCullBounds",she(ehe)),this.opts={...che,...e},this.onTileLoad=n=>{var r,i;(r=(i=this.opts).onTileLoad)===null||r===void 0||r.call(i,n),this.opts.maxCacheByteSize&&(this._cacheByteSize+=n.byteLength,this._resizeCache())},this._requestScheduler=new qj({maxRequests:e.maxRequests,throttleRequests:!!(e.maxRequests&&e.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new la,this._modelMatrixInverse=new la,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const n=this._cache.get(e);!this._selectedTiles||!this._selectedTiles.includes(n)?this._cache.delete(e):n.setNeedsReload()}}update(e,{zRange:n,modelMatrix:r}={}){const i=new la(r),s=!i.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!Nu(this._zRange,n)||s){s&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=e,this._zRange=n;const a=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:n,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=a.map(y=>this._getTile(y,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(a=>this._getTile(a.index,!0)));const A=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),A&&this._frameNumber++,this._frameNumber}isTileVisible(e,n){if(!e.isVisible)return!1;if(n&&this._viewport){const r=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:n}),{bbox:i}=e;for(const[s,A,a,y]of r){let w;if("west"in i)w=i.west<a&&i.east>s&&i.south<y&&i.north>A;else{const M=Math.min(i.top,i.bottom),C=Math.max(i.top,i.bottom);w=i.left<a&&i.right>s&&M<y&&C>A}if(w)return!0}return!1}return!0}getTileIndices({viewport:e,maxZoom:n,minZoom:r,zRange:i,modelMatrix:s,modelMatrixInverse:A}){const{tileSize:a,extent:y,zoomOffset:w}=this.opts;return ihe({viewport:e,maxZoom:n,minZoom:r,zRange:i,tileSize:a,extent:y,modelMatrix:s,modelMatrixInverse:A,zoomOffset:w})}getTileId(e){return"".concat(e.x,"-").concat(e.y,"-").concat(e.z)}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:n}=this.opts;return{bbox:nhe(this._viewport,e.x,e.y,e.z,n)}}getParentIndex(e){const n=Math.floor(e.x/2),r=Math.floor(e.y/2),i=e.z-1;return{x:n,y:r,z:i}}updateTileStates(){const e=this.opts.refinementStrategy||FS,n=new Array(this._cache.size);let r=0;for(const i of this._cache.values())n[r++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof e=="function"?e:uhe[e])(Array.from(this._cache.values())),r=0;for(const i of this._cache.values())if(n[r++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e=0}=this.opts,n=[];let r=0;for(const i of this._cache.values())i.isLoading&&(r++,!i.isSelected&&!i.isVisible&&n.push(i));for(;e>0&&r>e&&n.length>0;)n.shift().abort(),r--}_rebuildTree(){const{_cache:e}=this;for(const n of e.values())n.parent=null,n.children&&(n.children.length=0);for(const n of e.values()){const r=this._getNearestAncestor(n);n.parent=r,r!=null&&r.children&&r.children.push(n)}}_resizeCache(){const{_cache:e,opts:n}=this,r=n.maxCacheSize||(n.maxCacheByteSize?1/0:Ahe*this.selectedTiles.length),i=n.maxCacheByteSize||1/0;if(e.size>r||this._cacheByteSize>i){for(const[y,w]of e){if(!w.isVisible&&!w.isSelected){var A,a;this._cacheByteSize-=n.maxCacheByteSize?w.byteLength:0,e.delete(y),(A=(a=this.opts).onTileUnload)===null||A===void 0||A.call(a,w)}if(e.size<=r&&this._cacheByteSize<=i)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((y,w)=>y.zoom-w.zoom),this._dirty=!1)}_getTile(e,n){const r=this.getTileId(e);let i=this._cache.get(r),s=!1;return!i&&n?(i=new Mce(e),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:r,zoom:this.getTileZoom(i.index)}),s=!0,this._cache.set(r,i),this._dirty=!0):i&&i.needsReload&&(s=!0),i&&s&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(e){const{_minZoom:n=0}=this;let r=e.index;for(;this.getTileZoom(r)>n;){r=this.getParentIndex(r);const i=this._getTile(r);if(i)return i}return null}}function fhe(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!eF(e)&&NS(e);for(const e of t)e.isVisible=!!(e.state&ov)}function dhe(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&eF(n);const e=Array.from(t).sort((n,r)=>n.zoom-r.zoom);for(const n of e)if(n.isVisible=!!(n.state&ov),n.children&&(n.isVisible||n.state&ok))for(const r of n.children)r.state=ok;else n.isSelected&&NS(n)}function eF(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=ov,!0;e=e.parent}return!1}function NS(t){for(const e of t.children)e.isLoaded||e.content?e.state|=ov:NS(e)}const phe={TilesetClass:hhe,data:{type:"data",value:[]},dataComparator:Yce.equal,renderSubLayers:{type:"function",value:t=>new _l(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:FS,zRange:null,maxRequests:6,zoomOffset:0};class av extends fr{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,n;(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0||n.finalize()}get isLoaded(){var e,n,r;return(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0||(r=n.selectedTiles)===null||r===void 0?void 0:r.every(i=>i.isLoaded&&i.layers&&i.layers.every(s=>s.isLoaded))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:n}=this.state;const r=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():this.state.tileset.tiles.forEach(s=>{s.layers=null})):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:n,maxCacheByteSize:r,refinementStrategy:i,extent:s,maxZoom:A,minZoom:a,maxRequests:y,zoomOffset:w}=this.props;return{maxCacheSize:n,maxCacheByteSize:r,maxZoom:A,minZoom:a,tileSize:e,refinementStrategy:i,extent:s,maxRequests:y,zoomOffset:w,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:e}=this.state,{zRange:n,modelMatrix:r}=this.props,i=e.update(this.context.viewport,{zRange:n,modelMatrix:r}),{isLoaded:s}=e,A=this.state.isLoaded!==s,a=this.state.frameNumber!==i;s&&(A||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=s}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:n}=this.props;n&&n(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,n){this.props.onTileError(e),n.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:n,getTileData:r,fetch:i}=this.props,{signal:s}=e;return e.url=typeof n=="string"||Array.isArray(n)?Kce(n,e):null,r?r(e):i&&e.url?i(e.url,{propName:"data",layer:this,signal:s}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo({info:e,sourceLayer:n}){const r=n.props.tile;return e.picked&&(e.tile=r),e.sourceTile=r,e}_updateAutoHighlight(e){const n=e.sourceTile;if(n&&n.layers)for(const r of n.layers)r.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{const n=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)n&&e.layers[0]&&Object.keys(n).some(r=>e.layers[0].props[r]!==n[r])&&(e.layers=e.layers.map(r=>r.clone(n)));else{const r=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=j2(r,Boolean).map(i=>i.clone({tile:e,...n}))}return e.layers})}filterSubLayer({layer:e,cullRect:n}){const{tile:r}=e.props;return this.state.tileset.isTileVisible(r,n)}}ae(av,"defaultProps",phe);ae(av,"layerName","TileLayer");const Vw=Math.PI/180,Y1=new Float32Array(16),ak=new Float32Array(12);function lk(t,e,n){const r=e[0]*Vw,i=e[1]*Vw,s=e[2]*Vw,A=Math.sin(s),a=Math.sin(r),y=Math.sin(i),w=Math.cos(s),M=Math.cos(r),C=Math.cos(i),k=n[0],U=n[1],H=n[2];t[0]=k*C*M,t[1]=k*y*M,t[2]=k*-a,t[3]=U*(-y*w+C*a*A),t[4]=U*(C*w+y*a*A),t[5]=U*M*A,t[6]=H*(y*A+C*a*w),t[7]=H*(-C*A+y*a*w),t[8]=H*M*w}function Ak(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const ghe={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:r,getOrientation:i,getScale:s,getTranslation:A,getTransformMatrix:a}=this.props,y=Array.isArray(a),w=y&&a.length===16,M=Array.isArray(s),C=Array.isArray(i),k=Array.isArray(A),U=w||!y&&!!a(r[0]);U?t.constant=w:t.constant=C&&M&&k;const H=t.value;if(t.constant){let q;U?(Y1.set(a),q=Ak(Y1)):(q=ak,lk(q,i,s),q.set(A,9)),t.value=new Float32Array(q)}else{let q=e*t.size;const{iterable:se,objectInfo:Z}=Td(r,e,n);for(const J of se){Z.index++;let re;if(U)Y1.set(w?a:a(J,Z)),re=Ak(Y1);else{re=ak;const de=C?i:i(J,Z),_e=M?s:s(J,Z);lk(re,de,_e),re.set(k?A:A(J,Z),9)}H[q++]=re[0],H[q++]=re[1],H[q++]=re[2],H[q++]=re[3],H[q++]=re[4],H[q++]=re[5],H[q++]=re[6],H[q++]=re[7],H[q++]=re[8],H[q++]=re[9],H[q++]=re[10],H[q++]=re[11]}}}};function mhe(t,e){return e===wr.CARTESIAN||e===wr.METER_OFFSETS||e===wr.DEFAULT&&!t.isGeospatial}const yhe=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs
uniform float sizeScale;
uniform bool composeModelMatrix;
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;

  vTexCoord = texCoords;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;

  if (composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    normals_commonspace = project_normal(instanceModelMatrix * normals);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);
    geometry.position = position_commonspace;
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);
    geometry.position = position_commonspace;
    normals_commonspace = project_normal(instanceModelMatrix * normals);
  }

  geometry.normal = normals_commonspace;
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,_he=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  DECKGL_FILTER_COLOR(color, geometry);

  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);
}
`;function tF(t){let e=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,A=-1/0;const a=t.POSITION?t.POSITION.value:[],y=a&&a.length;for(let w=0;w<y;w+=3){const M=a[w],C=a[w+1],k=a[w+2];e=M<e?M:e,n=C<n?C:n,r=k<r?k:r,i=M>i?M:i,s=C>s?C:s,A=k>A?k:A}return[[e,n,r],[i,s,A]]}function vhe(t,e){if(!t)throw new Error(e||"loader assertion failed.")}class wf{constructor(e,n){ae(this,"fields",void 0),ae(this,"metadata",void 0),vhe(Array.isArray(e)),xhe(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(){const e=Object.create(null);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(const A of r)e[A]=!0;const s=this.fields.filter(A=>e[A.name]);return new wf(s,this.metadata)}selectAt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.map(s=>this.fields[s]).filter(Boolean);return new wf(i,this.metadata)}assign(e){let n,r=this.metadata;if(e instanceof wf){const A=e;n=A.fields,r=uk(uk(new Map,this.metadata),A.metadata)}else n=e;const i=Object.create(null);for(const A of this.fields)i[A.name]=A;for(const A of n)i[A.name]=A;const s=Object.values(i);return new wf(s,r)}}function xhe(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}function uk(t,e){return new Map([...t||new Map,...e||new Map])}class lg{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Map;ae(this,"name",void 0),ae(this,"type",void 0),ae(this,"nullable",void 0),ae(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=r,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new lg(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Ui=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({}),nF,rF,iF;class US{static isNull(e){return e&&e.typeId===Ui.Null}static isInt(e){return e&&e.typeId===Ui.Int}static isFloat(e){return e&&e.typeId===Ui.Float}static isBinary(e){return e&&e.typeId===Ui.Binary}static isUtf8(e){return e&&e.typeId===Ui.Utf8}static isBool(e){return e&&e.typeId===Ui.Bool}static isDecimal(e){return e&&e.typeId===Ui.Decimal}static isDate(e){return e&&e.typeId===Ui.Date}static isTime(e){return e&&e.typeId===Ui.Time}static isTimestamp(e){return e&&e.typeId===Ui.Timestamp}static isInterval(e){return e&&e.typeId===Ui.Interval}static isList(e){return e&&e.typeId===Ui.List}static isStruct(e){return e&&e.typeId===Ui.Struct}static isUnion(e){return e&&e.typeId===Ui.Union}static isFixedSizeBinary(e){return e&&e.typeId===Ui.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Ui.FixedSizeList}static isMap(e){return e&&e.typeId===Ui.Map}static isDictionary(e){return e&&e.typeId===Ui.Dictionary}get typeId(){return Ui.NONE}compareTo(e){return this===e}}nF=Symbol.toStringTag;class Pd extends US{constructor(e,n){super(),ae(this,"isSigned",void 0),ae(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return Ui.Int}get[nF](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class whe extends Pd{constructor(){super(!0,8)}}class bhe extends Pd{constructor(){super(!0,16)}}class Ehe extends Pd{constructor(){super(!0,32)}}class The extends Pd{constructor(){super(!1,8)}}class She extends Pd{constructor(){super(!1,16)}}class Mhe extends Pd{constructor(){super(!1,32)}}const sF={HALF:16,SINGLE:32,DOUBLE:64};rF=Symbol.toStringTag;class oF extends US{constructor(e){super(),ae(this,"precision",void 0),this.precision=e}get typeId(){return Ui.Float}get[rF](){return"Float"}toString(){return"Float".concat(this.precision)}}class Che extends oF{constructor(){super(sF.SINGLE)}}class Phe extends oF{constructor(){super(sF.DOUBLE)}}iF=Symbol.toStringTag;class Ihe extends US{constructor(e,n){super(),ae(this,"listSize",void 0),ae(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return Ui.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[iF](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}function khe(t){switch(t.constructor){case Int8Array:return new whe;case Uint8Array:return new The;case Int16Array:return new bhe;case Uint16Array:return new She;case Int32Array:return new Ehe;case Uint32Array:return new Mhe;case Float32Array:return new Che;case Float64Array:return new Phe;default:throw new Error("array type not supported")}}function ck(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),yr.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function hk(t,e){if(t.attributes)return ck(t.attributes,e),t instanceof Uu?t:new Uu(t);if(t.positions||t.POSITION)return ck(t,e),new Uu({attributes:t});throw Error("Invalid mesh")}const Lhe=[0,0,0,255],Dhe={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Lhe},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}};class T0 extends AA{constructor(...e){super(...e),ae(this,"state",void 0)}getShaders(){const e=!br(this.context.gl),n={};return JR(this.context.gl,ai.GLSL_DERIVATIVES)&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:yhe,fs:_he,modules:[y0,jX,_0],transpileToGLSL100:e,defines:n})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let n=this.state.positionBounds;if(n)return n;const{mesh:r}=this.props;if(!r)return null;if(n=(e=r.header)===null||e===void 0?void 0:e.boundingBox,!n){const{attributes:i}=hk(r,this.props._useMeshColors);i.POSITION=i.POSITION||i.positions,n=tF(i)}return this.state.positionBounds=n,n}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:ghe}),this.setState({emptyTexture:new ua(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e;if(n.mesh!==r.mesh||i.extensionsChanged){var s;if(this.state.positionBounds=null,(s=this.state.model)===null||s===void 0||s.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const A=n.mesh.attributes||n.mesh;this.setState({hasNormals:!!(A.NORMAL||A.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==r.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:r,coordinateSystem:i,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:r,composeModelMatrix:!s||mhe(n,i),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new qu(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:hk(e,this.props._useMeshColors),isInstanced:!0}),{texture:r}=this.props,{emptyTexture:i}=this.state;return n.setUniforms({sampler:r||i,hasTexture:!!r}),n}setTexture(e){const{emptyTexture:n,model:r}=this.state;r&&r.setUniforms({sampler:e||n,hasTexture:!!e})}}ae(T0,"defaultProps",Dhe);ae(T0,"layerName","SimpleMeshLayer");const Rhe={inject:{"vs:#decl":`
attribute vec2 instanceDashArrays;
attribute float instanceDashOffsets;
varying vec2 vDashArray;
varying float vDashOffset;
`,"vs:#main-end":`
vDashArray = instanceDashArrays;
vDashOffset = instanceDashOffsets / width.x;
`,"fs:#decl":`
uniform float dashAlignMode;
uniform float capType;
uniform bool dashGapPickable;
varying vec2 vDashArray;
varying float vDashOffset;

float round(float x) {
  return floor(x + 0.5);
}
`,"fs:#main-start":`
  float solidLength = vDashArray.x;
  float gapLength = vDashArray.y;
  float unitLength = solidLength + gapLength;

  float offset;

  if (unitLength > 0.0) {
    if (dashAlignMode == 0.0) {
      offset = vDashOffset;
    } else {
      unitLength = vPathLength / round(vPathLength / unitLength);
      offset = solidLength / 2.0;
    }

    float unitOffset = mod(vPathPosition.y + offset, unitLength);

    if (gapLength > 0.0 && unitOffset > solidLength) {
      if (capType <= 0.5) {
        if (!(dashGapPickable && picking_uActive)) {
          discard;
        }
      } else {
        float distToEnd = length(vec2(
          min(unitOffset - solidLength, unitLength - unitOffset),
          vPathPosition.x
        ));
        if (distToEnd > 1.0) {
          if (!(dashGapPickable && picking_uActive)) {
            discard;
          }
        }
      }
    }
  }
`}},Bhe={inject:{"vs:#decl":`
attribute float instanceOffsets;
`,"vs:DECKGL_FILTER_SIZE":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  size *= offsetWidth;
`,"vs:#main-end":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  float offsetDir = sign(instanceOffsets);
  vPathPosition.x = (vPathPosition.x + offsetDir) * offsetWidth - offsetDir;
  vPathPosition.y *= offsetWidth;
  vPathLength *= offsetWidth;
`,"fs:#main-start":`
  float isInside;
  isInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);
  if (isInside == 0.0) {
    discard;
  }
`}},zhe={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1};class lv extends W2{constructor({dash:e=!1,offset:n=!1,highPrecisionDash:r=!1}={}){super({dash:e||r,offset:n,highPrecisionDash:r})}isEnabled(e){return"pathTesselator"in e.state}getShaders(e){if(!e.isEnabled(this))return null;let n={};return e.opts.dash&&(n=I3(n,Rhe)),e.opts.offset&&(n=I3(n,Bhe)),n}initializeState(e,n){const r=this.getAttributeManager();!r||!n.isEnabled(this)||(n.opts.dash&&r.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"}}),n.opts.highPrecisionDash&&r.addInstanced({instanceDashOffsets:{size:1,accessor:"getPath",transform:n.getDashOffsets.bind(this)}}),n.opts.offset&&r.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(e,n){if(!n.isEnabled(this))return;const r={};n.opts.dash&&(r.dashAlignMode=this.props.dashJustified?1:0,r.dashGapPickable=!!this.props.dashGapPickable),this.state.model.setUniforms(r)}getDashOffsets(e){const n=[0],r=this.props.positionFormat==="XY"?2:3,i=Array.isArray(e[0]),s=i?e.length:e.length/r;let A,a;for(let y=0;y<s-1;y++)A=i?e[y]:e.slice(y*r,y*r+r),A=this.projectPosition(A),y>0&&(n[y]=n[y-1]+DY(a,A)),a=A;return n}}ae(lv,"defaultProps",zhe);ae(lv,"extensionName","PathStyleExtension");function aF(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ohe(t){return t.length===1&&(t=Fhe(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function Fhe(t){return function(e,n){return aF(t(e),n)}}Ohe(aF);function jg(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var Gw=Array.prototype.slice;function Nhe(t){return t}var Ry=1,By=2,iE=3,X1=4,fk=1e-6;function Uhe(t){return"translate("+(t+.5)+",0)"}function Vhe(t){return"translate(0,"+(t+.5)+")"}function Ghe(t){return function(e){return+t(e)}}function jhe(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function $he(){return!this.__axis}function VS(t,e){var n=[],r=null,i=null,s=6,A=6,a=3,y=t===Ry||t===X1?-1:1,w=t===X1||t===By?"x":"y",M=t===Ry||t===iE?Uhe:Vhe;function C(k){var U=r??(e.ticks?e.ticks.apply(e,n):e.domain()),H=i??(e.tickFormat?e.tickFormat.apply(e,n):Nhe),q=Math.max(s,0)+a,se=e.range(),Z=+se[0]+.5,J=+se[se.length-1]+.5,re=(e.bandwidth?jhe:Ghe)(e.copy()),de=k.selection?k.selection():k,_e=de.selectAll(".domain").data([null]),fe=de.selectAll(".tick").data(U,e).order(),Fe=fe.exit(),We=fe.enter().append("g").attr("class","tick"),qe=fe.select("line"),Ke=fe.select("text");_e=_e.merge(_e.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),fe=fe.merge(We),qe=qe.merge(We.append("line").attr("stroke","currentColor").attr(w+"2",y*s)),Ke=Ke.merge(We.append("text").attr("fill","currentColor").attr(w,y*q).attr("dy",t===Ry?"0em":t===iE?"0.71em":"0.32em")),k!==de&&(_e=_e.transition(k),fe=fe.transition(k),qe=qe.transition(k),Ke=Ke.transition(k),Fe=Fe.transition(k).attr("opacity",fk).attr("transform",function(Oe){return isFinite(Oe=re(Oe))?M(Oe):this.getAttribute("transform")}),We.attr("opacity",fk).attr("transform",function(Oe){var tt=this.parentNode.__axis;return M(tt&&isFinite(tt=tt(Oe))?tt:re(Oe))})),Fe.remove(),_e.attr("d",t===X1||t==By?A?"M"+y*A+","+Z+"H0.5V"+J+"H"+y*A:"M0.5,"+Z+"V"+J:A?"M"+Z+","+y*A+"V0.5H"+J+"V"+y*A:"M"+Z+",0.5H"+J),fe.attr("opacity",1).attr("transform",function(Oe){return M(re(Oe))}),qe.attr(w+"2",y*s),Ke.attr(w,y*q).text(H),de.filter($he).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===By?"start":t===X1?"end":"middle"),de.each(function(){this.__axis=re})}return C.scale=function(k){return arguments.length?(e=k,C):e},C.ticks=function(){return n=Gw.call(arguments),C},C.tickArguments=function(k){return arguments.length?(n=k==null?[]:Gw.call(k),C):n.slice()},C.tickValues=function(k){return arguments.length?(r=k==null?null:Gw.call(k),C):r&&r.slice()},C.tickFormat=function(k){return arguments.length?(i=k,C):i},C.tickSize=function(k){return arguments.length?(s=A=+k,C):s},C.tickSizeInner=function(k){return arguments.length?(s=+k,C):s},C.tickSizeOuter=function(k){return arguments.length?(A=+k,C):A},C.tickPadding=function(k){return arguments.length?(a=+k,C):a},C}function Hhe(t){return VS(Ry,t)}function lF(t){return VS(By,t)}function Whe(t){return VS(iE,t)}var Qhe={value:function(){}};function AF(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zy(n)}function zy(t){this._=t}function qhe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zy.prototype=AF.prototype={constructor:zy,on:function(t,e){var n=this._,r=qhe(t+"",n),i,s=-1,A=r.length;if(arguments.length<2){for(;++s<A;)if((i=(t=r[s]).type)&&(i=Zhe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<A;)if(i=(t=r[s]).type)n[i]=dk(n[i],t.name,e);else if(e==null)for(i in n)n[i]=dk(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zy(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Zhe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function dk(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Qhe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var sE="http://www.w3.org/1999/xhtml";const pk={svg:"http://www.w3.org/2000/svg",xhtml:sE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Av(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),pk.hasOwnProperty(e)?{space:pk[e],local:t}:t}function Yhe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===sE&&e.documentElement.namespaceURI===sE?e.createElement(t):e.createElementNS(n,t)}}function Xhe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function uF(t){var e=Av(t);return(e.local?Xhe:Yhe)(e)}function Khe(){}function GS(t){return t==null?Khe:function(){return this.querySelector(t)}}function Jhe(t){typeof t!="function"&&(t=GS(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],A=s.length,a=r[i]=new Array(A),y,w,M=0;M<A;++M)(y=s[M])&&(w=t.call(y,y.__data__,M,s))&&("__data__"in y&&(w.__data__=y.__data__),a[M]=w);return new lA(r,this._parents)}function e0e(){return[]}function cF(t){return t==null?e0e:function(){return this.querySelectorAll(t)}}function t0e(t){typeof t!="function"&&(t=cF(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var A=e[s],a=A.length,y,w=0;w<a;++w)(y=A[w])&&(r.push(t.call(y,y.__data__,w,A)),i.push(y));return new lA(r,i)}function hF(t){return function(){return this.matches(t)}}function n0e(t){typeof t!="function"&&(t=hF(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],A=s.length,a=r[i]=[],y,w=0;w<A;++w)(y=s[w])&&t.call(y,y.__data__,w,s)&&a.push(y);return new lA(r,this._parents)}function fF(t){return new Array(t.length)}function r0e(){return new lA(this._enter||this._groups.map(fF),this._parents)}function Y_(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Y_.prototype={constructor:Y_,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function i0e(t){return function(){return t}}var gk="$";function s0e(t,e,n,r,i,s){for(var A=0,a,y=e.length,w=s.length;A<w;++A)(a=e[A])?(a.__data__=s[A],r[A]=a):n[A]=new Y_(t,s[A]);for(;A<y;++A)(a=e[A])&&(i[A]=a)}function o0e(t,e,n,r,i,s,A){var a,y,w={},M=e.length,C=s.length,k=new Array(M),U;for(a=0;a<M;++a)(y=e[a])&&(k[a]=U=gk+A.call(y,y.__data__,a,e),U in w?i[a]=y:w[U]=y);for(a=0;a<C;++a)U=gk+A.call(t,s[a],a,s),(y=w[U])?(r[a]=y,y.__data__=s[a],w[U]=null):n[a]=new Y_(t,s[a]);for(a=0;a<M;++a)(y=e[a])&&w[k[a]]===y&&(i[a]=y)}function a0e(t,e){if(!t)return U=new Array(this.size()),w=-1,this.each(function(fe){U[++w]=fe}),U;var n=e?o0e:s0e,r=this._parents,i=this._groups;typeof t!="function"&&(t=i0e(t));for(var s=i.length,A=new Array(s),a=new Array(s),y=new Array(s),w=0;w<s;++w){var M=r[w],C=i[w],k=C.length,U=t.call(M,M&&M.__data__,w,r),H=U.length,q=a[w]=new Array(H),se=A[w]=new Array(H),Z=y[w]=new Array(k);n(M,C,q,se,Z,U,e);for(var J=0,re=0,de,_e;J<H;++J)if(de=q[J]){for(J>=re&&(re=J+1);!(_e=se[re])&&++re<H;);de._next=_e||null}}return A=new lA(A,r),A._enter=a,A._exit=y,A}function l0e(){return new lA(this._exit||this._groups.map(fF),this._parents)}function A0e(t,e,n){var r=this.enter(),i=this,s=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function u0e(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),A=new Array(r),a=0;a<s;++a)for(var y=e[a],w=n[a],M=y.length,C=A[a]=new Array(M),k,U=0;U<M;++U)(k=y[U]||w[U])&&(C[U]=k);for(;a<r;++a)A[a]=e[a];return new lA(A,this._parents)}function c0e(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],A;--i>=0;)(A=r[i])&&(s&&A.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(A,s),s=A);return this}function h0e(t){t||(t=f0e);function e(C,k){return C&&k?t(C.__data__,k.__data__):!C-!k}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var A=n[s],a=A.length,y=i[s]=new Array(a),w,M=0;M<a;++M)(w=A[M])&&(y[M]=w);y.sort(e)}return new lA(i,this._parents).order()}function f0e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function d0e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function p0e(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function g0e(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var A=r[i];if(A)return A}return null}function m0e(){var t=0;return this.each(function(){++t}),t}function y0e(){return!this.node()}function _0e(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,A=i.length,a;s<A;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function v0e(t){return function(){this.removeAttribute(t)}}function x0e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w0e(t,e){return function(){this.setAttribute(t,e)}}function b0e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function E0e(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function T0e(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function S0e(t,e){var n=Av(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?x0e:v0e:typeof e=="function"?n.local?T0e:E0e:n.local?b0e:w0e)(n,e))}function dF(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function M0e(t){return function(){this.style.removeProperty(t)}}function C0e(t,e,n){return function(){this.style.setProperty(t,e,n)}}function P0e(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function I0e(t,e,n){return arguments.length>1?this.each((e==null?M0e:typeof e=="function"?P0e:C0e)(t,e,n??"")):hd(this.node(),t)}function hd(t,e){return t.style.getPropertyValue(e)||dF(t).getComputedStyle(t,null).getPropertyValue(e)}function k0e(t){return function(){delete this[t]}}function L0e(t,e){return function(){this[t]=e}}function D0e(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function R0e(t,e){return arguments.length>1?this.each((e==null?k0e:typeof e=="function"?D0e:L0e)(t,e)):this.node()[t]}function pF(t){return t.trim().split(/^|\s+/)}function jS(t){return t.classList||new gF(t)}function gF(t){this._node=t,this._names=pF(t.getAttribute("class")||"")}gF.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function mF(t,e){for(var n=jS(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function yF(t,e){for(var n=jS(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function B0e(t){return function(){mF(this,t)}}function z0e(t){return function(){yF(this,t)}}function O0e(t,e){return function(){(e.apply(this,arguments)?mF:yF)(this,t)}}function F0e(t,e){var n=pF(t+"");if(arguments.length<2){for(var r=jS(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?O0e:e?B0e:z0e)(n,e))}function N0e(){this.textContent=""}function U0e(t){return function(){this.textContent=t}}function V0e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function G0e(t){return arguments.length?this.each(t==null?N0e:(typeof t=="function"?V0e:U0e)(t)):this.node().textContent}function j0e(){this.innerHTML=""}function $0e(t){return function(){this.innerHTML=t}}function H0e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function W0e(t){return arguments.length?this.each(t==null?j0e:(typeof t=="function"?H0e:$0e)(t)):this.node().innerHTML}function Q0e(){this.nextSibling&&this.parentNode.appendChild(this)}function q0e(){return this.each(Q0e)}function Z0e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Y0e(){return this.each(Z0e)}function X0e(t){var e=typeof t=="function"?t:uF(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function K0e(){return null}function J0e(t,e){var n=typeof t=="function"?t:uF(t),r=e==null?K0e:typeof e=="function"?e:GS(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function efe(){var t=this.parentNode;t&&t.removeChild(this)}function tfe(){return this.each(efe)}function nfe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rfe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ife(t){return this.select(t?rfe:nfe)}function sfe(t){return arguments.length?this.property("__data__",t):this.node().__data__}var _F={};if(typeof document<"u"){var ofe=document.documentElement;"onmouseenter"in ofe||(_F={mouseenter:"mouseover",mouseleave:"mouseout"})}function afe(t,e,n){return t=vF(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function vF(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function lfe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Afe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):e[++r]=s;++r?e.length=r:delete this.__on}}}function ufe(t,e,n){var r=_F.hasOwnProperty(t.type)?afe:vF;return function(i,s,A){var a=this.__on,y,w=r(e,s,A);if(a){for(var M=0,C=a.length;M<C;++M)if((y=a[M]).type===t.type&&y.name===t.name){this.removeEventListener(y.type,y.listener,y.capture),this.addEventListener(y.type,y.listener=w,y.capture=n),y.value=e;return}}this.addEventListener(t.type,w,n),y={type:t.type,name:t.name,value:e,listener:w,capture:n},a?a.push(y):this.__on=[y]}}function cfe(t,e,n){var r=lfe(t+""),i,s=r.length,A;if(arguments.length<2){var a=this.node().__on;if(a){for(var y=0,w=a.length,M;y<w;++y)for(i=0,M=a[y];i<s;++i)if((A=r[i]).type===M.type&&A.name===M.name)return M.value}return}for(a=e?ufe:Afe,n==null&&(n=!1),i=0;i<s;++i)this.each(a(r[i],e,n));return this}function xF(t,e,n){var r=dF(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function hfe(t,e){return function(){return xF(this,t,e)}}function ffe(t,e){return function(){return xF(this,t,e.apply(this,arguments))}}function dfe(t,e){return this.each((typeof e=="function"?ffe:hfe)(t,e))}var pfe=[null];function lA(t,e){this._groups=t,this._parents=e}function Mm(){return new lA([[document.documentElement]],pfe)}lA.prototype=Mm.prototype={constructor:lA,select:Jhe,selectAll:t0e,filter:n0e,data:a0e,enter:r0e,exit:l0e,join:A0e,merge:u0e,order:c0e,sort:h0e,call:d0e,nodes:p0e,node:g0e,size:m0e,empty:y0e,each:_0e,attr:S0e,style:I0e,property:R0e,classed:F0e,text:G0e,html:W0e,raise:q0e,lower:Y0e,append:X0e,insert:J0e,remove:tfe,clone:ife,datum:sfe,on:cfe,dispatch:dfe};function Cm(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function uv(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function S0(){}var $g=.7,X_=1/$g,Vf="\\s*([+-]?\\d+)\\s*",Hg="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",HA="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gfe=/^#([0-9a-f]{3,8})$/,mfe=new RegExp("^rgb\\("+[Vf,Vf,Vf]+"\\)$"),yfe=new RegExp("^rgb\\("+[HA,HA,HA]+"\\)$"),_fe=new RegExp("^rgba\\("+[Vf,Vf,Vf,Hg]+"\\)$"),vfe=new RegExp("^rgba\\("+[HA,HA,HA,Hg]+"\\)$"),xfe=new RegExp("^hsl\\("+[Hg,HA,HA]+"\\)$"),wfe=new RegExp("^hsla\\("+[Hg,HA,HA,Hg]+"\\)$"),mk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cm(S0,a0,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:yk,formatHex:yk,formatHsl:bfe,formatRgb:_k,toString:_k});function yk(){return this.rgb().formatHex()}function bfe(){return bF(this).formatHsl()}function _k(){return this.rgb().formatRgb()}function a0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gfe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?vk(e):n===3?new zo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?K1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?K1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mfe.exec(t))?new zo(e[1],e[2],e[3],1):(e=yfe.exec(t))?new zo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_fe.exec(t))?K1(e[1],e[2],e[3],e[4]):(e=vfe.exec(t))?K1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xfe.exec(t))?bk(e[1],e[2]/100,e[3]/100,1):(e=wfe.exec(t))?bk(e[1],e[2]/100,e[3]/100,e[4]):mk.hasOwnProperty(t)?vk(mk[t]):t==="transparent"?new zo(NaN,NaN,NaN,0):null}function vk(t){return new zo(t>>16&255,t>>8&255,t&255,1)}function K1(t,e,n,r){return r<=0&&(t=e=n=NaN),new zo(t,e,n,r)}function wF(t){return t instanceof S0||(t=a0(t)),t?(t=t.rgb(),new zo(t.r,t.g,t.b,t.opacity)):new zo}function oE(t,e,n,r){return arguments.length===1?wF(t):new zo(t,e,n,r??1)}function zo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Cm(zo,oE,uv(S0,{brighter:function(t){return t=t==null?X_:Math.pow(X_,t),new zo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?$g:Math.pow($g,t),new zo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xk,formatHex:xk,formatRgb:wk,toString:wk}));function xk(){return"#"+jw(this.r)+jw(this.g)+jw(this.b)}function wk(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function jw(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function bk(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zA(t,e,n,r)}function bF(t){if(t instanceof zA)return new zA(t.h,t.s,t.l,t.opacity);if(t instanceof S0||(t=a0(t)),!t)return new zA;if(t instanceof zA)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),A=NaN,a=s-i,y=(s+i)/2;return a?(e===s?A=(n-r)/a+(n<r)*6:n===s?A=(r-e)/a+2:A=(e-n)/a+4,a/=y<.5?s+i:2-s-i,A*=60):a=y>0&&y<1?0:A,new zA(A,a,y,t.opacity)}function aE(t,e,n,r){return arguments.length===1?bF(t):new zA(t,e,n,r??1)}function zA(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Cm(zA,aE,uv(S0,{brighter:function(t){return t=t==null?X_:Math.pow(X_,t),new zA(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?$g:Math.pow($g,t),new zA(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zo($w(t>=240?t-240:t+120,i,r),$w(t,i,r),$w(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function $w(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Efe=Math.PI/180,Tfe=180/Math.PI,K_=18,EF=.96422,TF=1,SF=.82521,MF=4/29,Gf=6/29,CF=3*Gf*Gf,Sfe=Gf*Gf*Gf;function PF(t){if(t instanceof WA)return new WA(t.l,t.a,t.b,t.opacity);if(t instanceof zu)return IF(t);t instanceof zo||(t=wF(t));var e=qw(t.r),n=qw(t.g),r=qw(t.b),i=Hw((.2225045*e+.7168786*n+.0606169*r)/TF),s,A;return e===n&&n===r?s=A=i:(s=Hw((.4360747*e+.3850649*n+.1430804*r)/EF),A=Hw((.0139322*e+.0971045*n+.7141733*r)/SF)),new WA(116*i-16,500*(s-i),200*(i-A),t.opacity)}function Wg(t,e,n,r){return arguments.length===1?PF(t):new WA(t,e,n,r??1)}function WA(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Cm(WA,Wg,uv(S0,{brighter:function(t){return new WA(this.l+K_*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new WA(this.l-K_*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=EF*Ww(e),t=TF*Ww(t),n=SF*Ww(n),new zo(Qw(3.1338561*e-1.6168667*t-.4906146*n),Qw(-.9787684*e+1.9161415*t+.033454*n),Qw(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Hw(t){return t>Sfe?Math.pow(t,1/3):t/CF+MF}function Ww(t){return t>Gf?t*t*t:CF*(t-MF)}function Qw(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function qw(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mfe(t){if(t instanceof zu)return new zu(t.h,t.c,t.l,t.opacity);if(t instanceof WA||(t=PF(t)),t.a===0&&t.b===0)return new zu(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Tfe;return new zu(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Cfe(t,e,n,r){return arguments.length===1?Mfe(t):new zu(t,e,n,r??1)}function zu(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function IF(t){if(isNaN(t.h))return new WA(t.l,0,0,t.opacity);var e=t.h*Efe;return new WA(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Cm(zu,Cfe,uv(S0,{brighter:function(t){return new zu(this.h,this.c,this.l+K_*(t??1),this.opacity)},darker:function(t){return new zu(this.h,this.c,this.l-K_*(t??1),this.opacity)},rgb:function(){return IF(this).rgb()}}));function kF(t){return function(){return t}}function Pfe(t,e){return function(n){return t+n*e}}function Ife(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function kfe(t){return(t=+t)==1?bf:function(e,n){return n-e?Ife(e,n,t):kF(isNaN(e)?n:e)}}function bf(t,e){var n=e-t;return n?Pfe(t,n):kF(isNaN(t)?e:t)}const Ek=function t(e){var n=kfe(e);function r(i,s){var A=n((i=oE(i)).r,(s=oE(s)).r),a=n(i.g,s.g),y=n(i.b,s.b),w=bf(i.opacity,s.opacity);return function(M){return i.r=A(M),i.g=a(M),i.b=y(M),i.opacity=w(M),i+""}}return r.gamma=t,r}(1);function Dc(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var lE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zw=new RegExp(lE.source,"g");function Lfe(t){return function(){return t}}function Dfe(t){return function(e){return t(e)+""}}function Rfe(t,e){var n=lE.lastIndex=Zw.lastIndex=0,r,i,s,A=-1,a=[],y=[];for(t=t+"",e=e+"";(r=lE.exec(t))&&(i=Zw.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[A]?a[A]+=s:a[++A]=s),(r=r[0])===(i=i[0])?a[A]?a[A]+=i:a[++A]=i:(a[++A]=null,y.push({i:A,x:Dc(r,i)})),n=Zw.lastIndex;return n<e.length&&(s=e.slice(n),a[A]?a[A]+=s:a[++A]=s),a.length<2?y[0]?Dfe(y[0].x):Lfe(e):(e=y.length,function(w){for(var M=0,C;M<e;++M)a[(C=y[M]).i]=C.x(w);return a.join("")})}var Tk=180/Math.PI,AE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function LF(t,e,n,r,i,s){var A,a,y;return(A=Math.sqrt(t*t+e*e))&&(t/=A,e/=A),(y=t*n+e*r)&&(n-=t*y,r-=e*y),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,y/=a),t*r<e*n&&(t=-t,e=-e,y=-y,A=-A),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Tk,skewX:Math.atan(y)*Tk,scaleX:A,scaleY:a}}var Ep,Yw,Sk,J1;function Bfe(t){return t==="none"?AE:(Ep||(Ep=document.createElement("DIV"),Yw=document.documentElement,Sk=document.defaultView),Ep.style.transform=t,t=Sk.getComputedStyle(Yw.appendChild(Ep),null).getPropertyValue("transform"),Yw.removeChild(Ep),t=t.slice(7,-1).split(","),LF(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function zfe(t){return t==null||(J1||(J1=document.createElementNS("http://www.w3.org/2000/svg","g")),J1.setAttribute("transform",t),!(t=J1.transform.baseVal.consolidate()))?AE:(t=t.matrix,LF(t.a,t.b,t.c,t.d,t.e,t.f))}function DF(t,e,n,r){function i(w){return w.length?w.pop()+" ":""}function s(w,M,C,k,U,H){if(w!==C||M!==k){var q=U.push("translate(",null,e,null,n);H.push({i:q-4,x:Dc(w,C)},{i:q-2,x:Dc(M,k)})}else(C||k)&&U.push("translate("+C+e+k+n)}function A(w,M,C,k){w!==M?(w-M>180?M+=360:M-w>180&&(w+=360),k.push({i:C.push(i(C)+"rotate(",null,r)-2,x:Dc(w,M)})):M&&C.push(i(C)+"rotate("+M+r)}function a(w,M,C,k){w!==M?k.push({i:C.push(i(C)+"skewX(",null,r)-2,x:Dc(w,M)}):M&&C.push(i(C)+"skewX("+M+r)}function y(w,M,C,k,U,H){if(w!==C||M!==k){var q=U.push(i(U)+"scale(",null,",",null,")");H.push({i:q-4,x:Dc(w,C)},{i:q-2,x:Dc(M,k)})}else(C!==1||k!==1)&&U.push(i(U)+"scale("+C+","+k+")")}return function(w,M){var C=[],k=[];return w=t(w),M=t(M),s(w.translateX,w.translateY,M.translateX,M.translateY,C,k),A(w.rotate,M.rotate,C,k),a(w.skewX,M.skewX,C,k),y(w.scaleX,w.scaleY,M.scaleX,M.scaleY,C,k),w=M=null,function(U){for(var H=-1,q=k.length,se;++H<q;)C[(se=k[H]).i]=se.x(U);return C.join("")}}}var Ofe=DF(Bfe,"px, ","px)","deg)"),Ffe=DF(zfe,", ",")",")");function Nfe(t,e){var n=bf((t=Wg(t)).l,(e=Wg(e)).l),r=bf(t.a,e.a),i=bf(t.b,e.b),s=bf(t.opacity,e.opacity);return function(A){return t.l=n(A),t.a=r(A),t.b=i(A),t.opacity=s(A),t+""}}var fd=0,Gp=0,Tp=0,RF=1e3,J_,jp,e2=0,l0=0,cv=0,Qg=typeof performance=="object"&&performance.now?performance:Date,BF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hv(){return l0||(BF(Ufe),l0=Qg.now()+cv)}function Ufe(){l0=0}function t2(){this._call=this._time=this._next=null}t2.prototype=zF.prototype={constructor:t2,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?hv():+n)+(e==null?0:+e),!this._next&&jp!==this&&(jp?jp._next=this:J_=this,jp=this),this._call=t,this._time=n,uE()},stop:function(){this._call&&(this._call=null,this._time=1/0,uE())}};function zF(t,e,n){var r=new t2;return r.restart(t,e,n),r}function Vfe(){hv(),++fd;for(var t=J_,e;t;)(e=l0-t._time)>=0&&t._call.call(null,e),t=t._next;--fd}function Mk(){l0=(e2=Qg.now())+cv,fd=Gp=0;try{Vfe()}finally{fd=0,jfe(),l0=0}}function Gfe(){var t=Qg.now(),e=t-e2;e>RF&&(cv-=e,e2=t)}function jfe(){for(var t,e=J_,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:J_=n);jp=t,uE(r)}function uE(t){if(!fd){Gp&&(Gp=clearTimeout(Gp));var e=t-l0;e>24?(t<1/0&&(Gp=setTimeout(Mk,t-Qg.now()-cv)),Tp&&(Tp=clearInterval(Tp))):(Tp||(e2=Qg.now(),Tp=setInterval(Gfe,RF)),fd=1,BF(Mk))}}function Ck(t,e,n){var r=new t2;return e=e==null?0:+e,r.restart(function(i){r.stop(),t(i+e)},e,n),r}var $fe=AF("start","end","cancel","interrupt"),Hfe=[],OF=0,Pk=1,cE=2,Oy=3,Ik=4,hE=5,Fy=6;function fv(t,e,n,r,i,s){var A=t.__transition;if(!A)t.__transition={};else if(n in A)return;Wfe(t,n,{name:e,index:r,group:i,on:$fe,tween:Hfe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:OF})}function $S(t,e){var n=cA(t,e);if(n.state>OF)throw new Error("too late; already scheduled");return n}function ic(t,e){var n=cA(t,e);if(n.state>Oy)throw new Error("too late; already running");return n}function cA(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Wfe(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=zF(s,0,n.time);function s(w){n.state=Pk,n.timer.restart(A,n.delay,n.time),n.delay<=w&&A(w-n.delay)}function A(w){var M,C,k,U;if(n.state!==Pk)return y();for(M in r)if(U=r[M],U.name===n.name){if(U.state===Oy)return Ck(A);U.state===Ik?(U.state=Fy,U.timer.stop(),U.on.call("interrupt",t,t.__data__,U.index,U.group),delete r[M]):+M<e&&(U.state=Fy,U.timer.stop(),U.on.call("cancel",t,t.__data__,U.index,U.group),delete r[M])}if(Ck(function(){n.state===Oy&&(n.state=Ik,n.timer.restart(a,n.delay,n.time),a(w))}),n.state=cE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===cE){for(n.state=Oy,i=new Array(k=n.tween.length),M=0,C=-1;M<k;++M)(U=n.tween[M].value.call(t,t.__data__,n.index,n.group))&&(i[++C]=U);i.length=C+1}}function a(w){for(var M=w<n.duration?n.ease.call(null,w/n.duration):(n.timer.restart(y),n.state=hE,1),C=-1,k=i.length;++C<k;)i[C].call(t,M);n.state===hE&&(n.on.call("end",t,t.__data__,n.index,n.group),y())}function y(){n.state=Fy,n.timer.stop(),delete r[e];for(var w in r)return;delete t.__transition}}function Qfe(t,e){var n=t.__transition,r,i,s=!0,A;if(n){e=e==null?null:e+"";for(A in n){if((r=n[A]).name!==e){s=!1;continue}i=r.state>cE&&r.state<hE,r.state=Fy,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[A]}s&&delete t.__transition}}function qfe(t){return this.each(function(){Qfe(this,t)})}function Zfe(t,e){var n,r;return function(){var i=ic(this,t),s=i.tween;if(s!==n){r=n=s;for(var A=0,a=r.length;A<a;++A)if(r[A].name===e){r=r.slice(),r.splice(A,1);break}}i.tween=r}}function Yfe(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ic(this,t),A=s.tween;if(A!==r){i=(r=A).slice();for(var a={name:e,value:n},y=0,w=i.length;y<w;++y)if(i[y].name===e){i[y]=a;break}y===w&&i.push(a)}s.tween=i}}function Xfe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=cA(this.node(),n).tween,i=0,s=r.length,A;i<s;++i)if((A=r[i]).name===t)return A.value;return null}return this.each((e==null?Zfe:Yfe)(n,t,e))}function HS(t,e,n){var r=t._id;return t.each(function(){var i=ic(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return cA(i,r).value[e]}}function FF(t,e){var n;return(typeof e=="number"?Dc:e instanceof a0?Ek:(n=a0(e))?(e=n,Ek):Rfe)(t,e)}function Kfe(t){return function(){this.removeAttribute(t)}}function Jfe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ede(t,e,n){var r,i=n+"",s;return function(){var A=this.getAttribute(t);return A===i?null:A===r?s:s=e(r=A,n)}}function tde(t,e,n){var r,i=n+"",s;return function(){var A=this.getAttributeNS(t.space,t.local);return A===i?null:A===r?s:s=e(r=A,n)}}function nde(t,e,n){var r,i,s;return function(){var A,a=n(this),y;return a==null?void this.removeAttribute(t):(A=this.getAttribute(t),y=a+"",A===y?null:A===r&&y===i?s:(i=y,s=e(r=A,a)))}}function rde(t,e,n){var r,i,s;return function(){var A,a=n(this),y;return a==null?void this.removeAttributeNS(t.space,t.local):(A=this.getAttributeNS(t.space,t.local),y=a+"",A===y?null:A===r&&y===i?s:(i=y,s=e(r=A,a)))}}function ide(t,e){var n=Av(t),r=n==="transform"?Ffe:FF;return this.attrTween(t,typeof e=="function"?(n.local?rde:nde)(n,r,HS(this,"attr."+t,e)):e==null?(n.local?Jfe:Kfe)(n):(n.local?tde:ede)(n,r,e))}function sde(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ode(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ade(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&ode(t,s)),n}return i._value=e,i}function lde(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&sde(t,s)),n}return i._value=e,i}function Ade(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Av(t);return this.tween(n,(r.local?ade:lde)(r,e))}function ude(t,e){return function(){$S(this,t).delay=+e.apply(this,arguments)}}function cde(t,e){return e=+e,function(){$S(this,t).delay=e}}function hde(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ude:cde)(e,t)):cA(this.node(),e).delay}function fde(t,e){return function(){ic(this,t).duration=+e.apply(this,arguments)}}function dde(t,e){return e=+e,function(){ic(this,t).duration=e}}function pde(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fde:dde)(e,t)):cA(this.node(),e).duration}function gde(t,e){if(typeof e!="function")throw new Error;return function(){ic(this,t).ease=e}}function mde(t){var e=this._id;return arguments.length?this.each(gde(e,t)):cA(this.node(),e).ease}function yde(t){typeof t!="function"&&(t=hF(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],A=s.length,a=r[i]=[],y,w=0;w<A;++w)(y=s[w])&&t.call(y,y.__data__,w,s)&&a.push(y);return new ec(r,this._parents,this._name,this._id)}function _de(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),A=new Array(r),a=0;a<s;++a)for(var y=e[a],w=n[a],M=y.length,C=A[a]=new Array(M),k,U=0;U<M;++U)(k=y[U]||w[U])&&(C[U]=k);for(;a<r;++a)A[a]=e[a];return new ec(A,this._parents,this._name,this._id)}function vde(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function xde(t,e,n){var r,i,s=vde(e)?$S:ic;return function(){var A=s(this,t),a=A.on;a!==r&&(i=(r=a).copy()).on(e,n),A.on=i}}function wde(t,e){var n=this._id;return arguments.length<2?cA(this.node(),n).on.on(t):this.each(xde(n,t,e))}function bde(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ede(){return this.on("end.remove",bde(this._id))}function Tde(t){var e=this._name,n=this._id;typeof t!="function"&&(t=GS(t));for(var r=this._groups,i=r.length,s=new Array(i),A=0;A<i;++A)for(var a=r[A],y=a.length,w=s[A]=new Array(y),M,C,k=0;k<y;++k)(M=a[k])&&(C=t.call(M,M.__data__,k,a))&&("__data__"in M&&(C.__data__=M.__data__),w[k]=C,fv(w[k],e,n,k,w,cA(M,n)));return new ec(s,this._parents,e,n)}function Sde(t){var e=this._name,n=this._id;typeof t!="function"&&(t=cF(t));for(var r=this._groups,i=r.length,s=[],A=[],a=0;a<i;++a)for(var y=r[a],w=y.length,M,C=0;C<w;++C)if(M=y[C]){for(var k=t.call(M,M.__data__,C,y),U,H=cA(M,n),q=0,se=k.length;q<se;++q)(U=k[q])&&fv(U,e,n,q,k,H);s.push(k),A.push(M)}return new ec(s,A,e,n)}var Mde=Mm.prototype.constructor;function Cde(){return new Mde(this._groups,this._parents)}function Pde(t,e){var n,r,i;return function(){var s=hd(this,t),A=(this.style.removeProperty(t),hd(this,t));return s===A?null:s===n&&A===r?i:i=e(n=s,r=A)}}function NF(t){return function(){this.style.removeProperty(t)}}function Ide(t,e,n){var r,i=n+"",s;return function(){var A=hd(this,t);return A===i?null:A===r?s:s=e(r=A,n)}}function kde(t,e,n){var r,i,s;return function(){var A=hd(this,t),a=n(this),y=a+"";return a==null&&(y=a=(this.style.removeProperty(t),hd(this,t))),A===y?null:A===r&&y===i?s:(i=y,s=e(r=A,a))}}function Lde(t,e){var n,r,i,s="style."+e,A="end."+s,a;return function(){var y=ic(this,t),w=y.on,M=y.value[s]==null?a||(a=NF(e)):void 0;(w!==n||i!==M)&&(r=(n=w).copy()).on(A,i=M),y.on=r}}function Dde(t,e,n){var r=(t+="")=="transform"?Ofe:FF;return e==null?this.styleTween(t,Pde(t,r)).on("end.style."+t,NF(t)):typeof e=="function"?this.styleTween(t,kde(t,r,HS(this,"style."+t,e))).each(Lde(this._id,t)):this.styleTween(t,Ide(t,r,e),n).on("end.style."+t,null)}function Rde(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Bde(t,e,n){var r,i;function s(){var A=e.apply(this,arguments);return A!==i&&(r=(i=A)&&Rde(t,A,n)),r}return s._value=e,s}function zde(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Bde(t,e,n??""))}function Ode(t){return function(){this.textContent=t}}function Fde(t){return function(){var e=t(this);this.textContent=e??""}}function Nde(t){return this.tween("text",typeof t=="function"?Fde(HS(this,"text",t)):Ode(t==null?"":t+""))}function Ude(t){return function(e){this.textContent=t.call(this,e)}}function Vde(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ude(i)),e}return r._value=t,r}function Gde(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Vde(t))}function jde(){for(var t=this._name,e=this._id,n=UF(),r=this._groups,i=r.length,s=0;s<i;++s)for(var A=r[s],a=A.length,y,w=0;w<a;++w)if(y=A[w]){var M=cA(y,e);fv(y,t,n,w,A,{time:M.time+M.delay+M.duration,delay:0,duration:M.duration,ease:M.ease})}return new ec(r,this._parents,t,n)}function $de(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,A){var a={value:A},y={value:function(){--i===0&&s()}};n.each(function(){var w=ic(this,r),M=w.on;M!==t&&(e=(t=M).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(y)),w.on=e})})}var Hde=0;function ec(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function UF(){return++Hde}var Y0=Mm.prototype;ec.prototype={constructor:ec,select:Tde,selectAll:Sde,filter:yde,merge:_de,selection:Cde,transition:jde,call:Y0.call,nodes:Y0.nodes,node:Y0.node,size:Y0.size,empty:Y0.empty,each:Y0.each,on:wde,attr:ide,attrTween:Ade,style:Dde,styleTween:zde,text:Nde,textTween:Gde,remove:Ede,tween:Xfe,delay:hde,duration:pde,ease:mde,end:$de};function Wde(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var fE={time:null,delay:0,duration:250,ease:Wde};function Qde(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return fE.time=hv(),fE;return n}function qde(t){var e,n;t instanceof ec?(e=t._id,t=t._name):(e=UF(),(n=fE).time=hv(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var A=r[s],a=A.length,y,w=0;w<a;++w)(y=A[w])&&fv(y,t,e,w,A,n||Qde(y,e));return new ec(r,this._parents,t,e)}Mm.prototype.interrupt=qfe;Mm.prototype.transition=qde;var dE=Math.PI,pE=2*dE,kh=1e-6,Zde=pE-kh;function gE(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function VF(){return new gE}gE.prototype=VF.prototype={constructor:gE,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,A=this._y1,a=n-t,y=r-e,w=s-t,M=A-e,C=w*w+M*M;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(C>kh)if(!(Math.abs(M*a-y*w)>kh)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var k=n-s,U=r-A,H=a*a+y*y,q=k*k+U*U,se=Math.sqrt(H),Z=Math.sqrt(C),J=i*Math.tan((dE-Math.acos((H+C-q)/(2*se*Z)))/2),re=J/Z,de=J/se;Math.abs(re-1)>kh&&(this._+="L"+(t+re*w)+","+(e+re*M)),this._+="A"+i+","+i+",0,0,"+ +(M*k>w*U)+","+(this._x1=t+de*a)+","+(this._y1=e+de*y)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var A=n*Math.cos(r),a=n*Math.sin(r),y=t+A,w=e+a,M=1^s,C=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+y+","+w:(Math.abs(this._x1-y)>kh||Math.abs(this._y1-w)>kh)&&(this._+="L"+y+","+w),n&&(C<0&&(C=C%pE+pE),C>Zde?this._+="A"+n+","+n+",0,1,"+M+","+(t-A)+","+(e-a)+"A"+n+","+n+",0,1,"+M+","+(this._x1=y)+","+(this._y1=w):C>kh&&(this._+="A"+n+","+n+",0,"+ +(C>=dE)+","+M+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var al="$";function n2(){}n2.prototype=r2.prototype={constructor:n2,has:function(t){return al+t in this},get:function(t){return this[al+t]},set:function(t,e){return this[al+t]=e,this},remove:function(t){var e=al+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===al&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===al&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===al&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===al&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===al&&++t;return t},empty:function(){for(var t in this)if(t[0]===al)return!1;return!0},each:function(t){for(var e in this)e[0]===al&&t(this[e],e.slice(1),this)}};function r2(t,e){var n=new n2;if(t instanceof n2)t.each(function(a,y){n.set(y,a)});else if(Array.isArray(t)){var r=-1,i=t.length,s;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(s=t[r],r,t),s)}else if(t)for(var A in t)n.set(A,t[A]);return n}function kk(){}var Th=r2.prototype;kk.prototype={constructor:kk,has:Th.has,add:function(t){return t+="",this[al+t]=t,this},remove:Th.remove,clear:Th.clear,values:Th.keys,size:Th.size,empty:Th.empty,each:Th.each};function Yde(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function i2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xde(t){return t=i2(Math.abs(t)),t?t[1]:NaN}function Kde(t,e){return function(n,r){for(var i=n.length,s=[],A=0,a=t[0],y=0;i>0&&a>0&&(y+a+1>r&&(a=Math.max(1,r-y)),s.push(n.substring(i-=a,i+a)),!((y+=a+1)>r));)a=t[A=(A+1)%t.length];return s.reverse().join(e)}}function Jde(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var epe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mE(t){if(!(e=epe.exec(t)))throw new Error("invalid format: "+t);var e;return new WS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mE.prototype=WS.prototype;function WS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}WS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tpe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var GF;function npe(t,e){var n=i2(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(GF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,A=r.length;return s===A?r:s>A?r+new Array(s-A+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+i2(t,Math.max(0,e+s-1))[0]}function Lk(t,e){var n=i2(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Dk={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Yde,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Lk(t*100,e)},r:Lk,s:npe,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Rk(t){return t}var Bk=Array.prototype.map,zk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rpe(t){var e=t.grouping===void 0||t.thousands===void 0?Rk:Kde(Bk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Rk:Jde(Bk.call(t.numerals,String)),A=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"-":t.minus+"",y=t.nan===void 0?"NaN":t.nan+"";function w(C){C=mE(C);var k=C.fill,U=C.align,H=C.sign,q=C.symbol,se=C.zero,Z=C.width,J=C.comma,re=C.precision,de=C.trim,_e=C.type;_e==="n"?(J=!0,_e="g"):Dk[_e]||(re===void 0&&(re=12),de=!0,_e="g"),(se||k==="0"&&U==="=")&&(se=!0,k="0",U="=");var fe=q==="$"?n:q==="#"&&/[boxX]/.test(_e)?"0"+_e.toLowerCase():"",Fe=q==="$"?r:/[%p]/.test(_e)?A:"",We=Dk[_e],qe=/[defgprs%]/.test(_e);re=re===void 0?6:/[gprs]/.test(_e)?Math.max(1,Math.min(21,re)):Math.max(0,Math.min(20,re));function Ke(Oe){var tt=fe,Ye=Fe,pt,en,Mt;if(_e==="c")Ye=We(Oe)+Ye,Oe="";else{Oe=+Oe;var Qt=Oe<0||1/Oe<0;if(Oe=isNaN(Oe)?y:We(Math.abs(Oe),re),de&&(Oe=tpe(Oe)),Qt&&+Oe==0&&H!=="+"&&(Qt=!1),tt=(Qt?H==="("?H:a:H==="-"||H==="("?"":H)+tt,Ye=(_e==="s"?zk[8+GF/3]:"")+Ye+(Qt&&H==="("?")":""),qe){for(pt=-1,en=Oe.length;++pt<en;)if(Mt=Oe.charCodeAt(pt),48>Mt||Mt>57){Ye=(Mt===46?i+Oe.slice(pt+1):Oe.slice(pt))+Ye,Oe=Oe.slice(0,pt);break}}}J&&!se&&(Oe=e(Oe,1/0));var xt=tt.length+Oe.length+Ye.length,Tt=xt<Z?new Array(Z-xt+1).join(k):"";switch(J&&se&&(Oe=e(Tt+Oe,Tt.length?Z-Ye.length:1/0),Tt=""),U){case"<":Oe=tt+Oe+Ye+Tt;break;case"=":Oe=tt+Tt+Oe+Ye;break;case"^":Oe=Tt.slice(0,xt=Tt.length>>1)+tt+Oe+Ye+Tt.slice(xt);break;default:Oe=Tt+tt+Oe+Ye;break}return s(Oe)}return Ke.toString=function(){return C+""},Ke}function M(C,k){var U=w((C=mE(C),C.type="f",C)),H=Math.max(-8,Math.min(8,Math.floor(Xde(k)/3)))*3,q=Math.pow(10,-H),se=zk[8+H/3];return function(Z){return U(q*Z)+se}}return{format:w,formatPrefix:M}}var ey,dd;ipe({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function ipe(t){return ey=rpe(t),dd=ey.format,ey.formatPrefix,ey}function Id(){return Math.random()}(function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n})(Id);const spe=function t(e){function n(r,i){var s,A;return r=r==null?0:+r,i=i==null?1:+i,function(){var a;if(s!=null)a=s,s=null;else do s=e()*2-1,a=e()*2-1,A=s*s+a*a;while(!A||A>1);return r+i*a*Math.sqrt(-2*Math.log(A)/A)}}return n.source=t,n}(Id);(function t(e){function n(){var r=spe.source(e).apply(this,arguments);return function(){return Math.exp(r())}}return n.source=t,n})(Id);const ope=function t(e){function n(r){return function(){for(var i=0,s=0;s<r;++s)i+=e();return i}}return n.source=t,n}(Id);(function t(e){function n(r){var i=ope.source(e)(r);return function(){return i()/r}}return n.source=t,n})(Id);(function t(e){function n(r){return function(){return-Math.log(1-e())/r}}return n.source=t,n})(Id);function jF(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ape(t){return t.length===1&&(t=lpe(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function lpe(t){return function(e,n){return jF(t(e),n)}}var Ape=ape(jF),upe=Ape.right;function cpe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var yE=Math.sqrt(50),_E=Math.sqrt(10),vE=Math.sqrt(2);function hpe(t,e,n){var r,i=-1,s,A,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(a=Ny(t,e,n))===0||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),A=new Array(s=Math.ceil(e-t+1));++i<s;)A[i]=(t+i)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),A=new Array(s=Math.ceil(t-e+1));++i<s;)A[i]=(t-i)/a;return r&&A.reverse(),A}function Ny(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=yE?10:s>=_E?5:s>=vE?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=yE?10:s>=_E?5:s>=vE?2:1)}function fpe(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=yE?i*=10:s>=_E?i*=5:s>=vE&&(i*=2),e<t?-i:i}function QS(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var $F=Array.prototype,dpe=$F.map,xE=$F.slice,Ok={name:"implicit"};function HF(){var t=r2(),e=[],n=[],r=Ok;function i(s){var A=s+"",a=t.get(A);if(!a){if(r!==Ok)return r;t.set(A,a=e.push(s))}return n[(a-1)%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=r2();for(var A=-1,a=s.length,y,w;++A<a;)t.has(w=(y=s[A])+"")||t.set(w,e.push(y));return i},i.range=function(s){return arguments.length?(n=xE.call(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return HF(e,n).unknown(r)},QS.apply(i,arguments),i}function WF(){var t=HF().unknown(void 0),e=t.domain,n=t.range,r=[0,1],i,s,A=!1,a=0,y=0,w=.5;delete t.unknown;function M(){var C=e().length,k=r[1]<r[0],U=r[k-0],H=r[1-k];i=(H-U)/Math.max(1,C-a+y*2),A&&(i=Math.floor(i)),U+=(H-U-i*(C-a))*w,s=i*(1-a),A&&(U=Math.round(U),s=Math.round(s));var q=cpe(C).map(function(se){return U+i*se});return n(k?q.reverse():q)}return t.domain=function(C){return arguments.length?(e(C),M()):e()},t.range=function(C){return arguments.length?(r=[+C[0],+C[1]],M()):r.slice()},t.rangeRound=function(C){return r=[+C[0],+C[1]],A=!0,M()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(C){return arguments.length?(A=!!C,M()):A},t.padding=function(C){return arguments.length?(a=Math.min(1,y=+C),M()):a},t.paddingInner=function(C){return arguments.length?(a=Math.min(1,C),M()):a},t.paddingOuter=function(C){return arguments.length?(y=+C,M()):y},t.align=function(C){return arguments.length?(w=Math.max(0,Math.min(1,C)),M()):w},t.copy=function(){return WF(e(),r).round(A).paddingInner(a).paddingOuter(y).align(w)},QS.apply(M(),arguments)}function QF(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return QF(e())},t}function s2(){return QF(WF.apply(null,arguments).paddingInner(1))}function qS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function qF(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Pm(){}var qg=.7,o2=1/qg,jf="\\s*([+-]?\\d+)\\s*",Zg="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",QA="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ppe=/^#([0-9a-f]{3,8})$/,gpe=new RegExp("^rgb\\("+[jf,jf,jf]+"\\)$"),mpe=new RegExp("^rgb\\("+[QA,QA,QA]+"\\)$"),ype=new RegExp("^rgba\\("+[jf,jf,jf,Zg]+"\\)$"),_pe=new RegExp("^rgba\\("+[QA,QA,QA,Zg]+"\\)$"),vpe=new RegExp("^hsl\\("+[Zg,QA,QA]+"\\)$"),xpe=new RegExp("^hsla\\("+[Zg,QA,QA,Zg]+"\\)$"),Fk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qS(Pm,Yg,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Nk,formatHex:Nk,formatHsl:wpe,formatRgb:Uk,toString:Uk});function Nk(){return this.rgb().formatHex()}function wpe(){return ZF(this).formatHsl()}function Uk(){return this.rgb().formatRgb()}function Yg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ppe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Vk(e):n===3?new za(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ty(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ty(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gpe.exec(t))?new za(e[1],e[2],e[3],1):(e=mpe.exec(t))?new za(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ype.exec(t))?ty(e[1],e[2],e[3],e[4]):(e=_pe.exec(t))?ty(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vpe.exec(t))?$k(e[1],e[2]/100,e[3]/100,1):(e=xpe.exec(t))?$k(e[1],e[2]/100,e[3]/100,e[4]):Fk.hasOwnProperty(t)?Vk(Fk[t]):t==="transparent"?new za(NaN,NaN,NaN,0):null}function Vk(t){return new za(t>>16&255,t>>8&255,t&255,1)}function ty(t,e,n,r){return r<=0&&(t=e=n=NaN),new za(t,e,n,r)}function bpe(t){return t instanceof Pm||(t=Yg(t)),t?(t=t.rgb(),new za(t.r,t.g,t.b,t.opacity)):new za}function wE(t,e,n,r){return arguments.length===1?bpe(t):new za(t,e,n,r??1)}function za(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}qS(za,wE,qF(Pm,{brighter:function(t){return t=t==null?o2:Math.pow(o2,t),new za(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?qg:Math.pow(qg,t),new za(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gk,formatHex:Gk,formatRgb:jk,toString:jk}));function Gk(){return"#"+Xw(this.r)+Xw(this.g)+Xw(this.b)}function jk(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Xw(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function $k(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new OA(t,e,n,r)}function ZF(t){if(t instanceof OA)return new OA(t.h,t.s,t.l,t.opacity);if(t instanceof Pm||(t=Yg(t)),!t)return new OA;if(t instanceof OA)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),A=NaN,a=s-i,y=(s+i)/2;return a?(e===s?A=(n-r)/a+(n<r)*6:n===s?A=(r-e)/a+2:A=(e-n)/a+4,a/=y<.5?s+i:2-s-i,A*=60):a=y>0&&y<1?0:A,new OA(A,a,y,t.opacity)}function Epe(t,e,n,r){return arguments.length===1?ZF(t):new OA(t,e,n,r??1)}function OA(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}qS(OA,Epe,qF(Pm,{brighter:function(t){return t=t==null?o2:Math.pow(o2,t),new OA(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?qg:Math.pow(qg,t),new OA(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new za(Kw(t>=240?t-240:t+120,i,r),Kw(t,i,r),Kw(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Kw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function ZS(t){return function(){return t}}function Tpe(t,e){return function(n){return t+n*e}}function Spe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mpe(t){return(t=+t)==1?YF:function(e,n){return n-e?Spe(e,n,t):ZS(isNaN(e)?n:e)}}function YF(t,e){var n=e-t;return n?Tpe(t,n):ZS(isNaN(t)?e:t)}const Hk=function t(e){var n=Mpe(e);function r(i,s){var A=n((i=wE(i)).r,(s=wE(s)).r),a=n(i.g,s.g),y=n(i.b,s.b),w=YF(i.opacity,s.opacity);return function(M){return i.r=A(M),i.g=a(M),i.b=y(M),i.opacity=w(M),i+""}}return r.gamma=t,r}(1);function Cpe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Ppe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ipe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),A;for(A=0;A<r;++A)i[A]=YS(t[A],e[A]);for(;A<n;++A)s[A]=e[A];return function(a){for(A=0;A<r;++A)s[A]=i[A](a);return s}}function kpe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function a2(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Lpe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=YS(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var bE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jw=new RegExp(bE.source,"g");function Dpe(t){return function(){return t}}function Rpe(t){return function(e){return t(e)+""}}function Bpe(t,e){var n=bE.lastIndex=Jw.lastIndex=0,r,i,s,A=-1,a=[],y=[];for(t=t+"",e=e+"";(r=bE.exec(t))&&(i=Jw.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[A]?a[A]+=s:a[++A]=s),(r=r[0])===(i=i[0])?a[A]?a[A]+=i:a[++A]=i:(a[++A]=null,y.push({i:A,x:a2(r,i)})),n=Jw.lastIndex;return n<e.length&&(s=e.slice(n),a[A]?a[A]+=s:a[++A]=s),a.length<2?y[0]?Rpe(y[0].x):Dpe(e):(e=y.length,function(w){for(var M=0,C;M<e;++M)a[(C=y[M]).i]=C.x(w);return a.join("")})}function YS(t,e){var n=typeof e,r;return e==null||n==="boolean"?ZS(e):(n==="number"?a2:n==="string"?(r=Yg(e))?(e=r,Hk):Bpe:e instanceof Yg?Hk:e instanceof Date?kpe:Ppe(e)?Cpe:Array.isArray(e)?Ipe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Lpe:a2)(t,e)}function zpe(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ope(t){return function(){return t}}function Fpe(t){return+t}var Wk=[0,1];function Ef(t){return t}function EE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ope(isNaN(e)?NaN:.5)}function Qk(t){var e=t[0],n=t[t.length-1],r;return e>n&&(r=e,e=n,n=r),function(i){return Math.max(e,Math.min(n,i))}}function Npe(t,e,n){var r=t[0],i=t[1],s=e[0],A=e[1];return i<r?(r=EE(i,r),s=n(A,s)):(r=EE(r,i),s=n(s,A)),function(a){return s(r(a))}}function Upe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),A=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++A<r;)i[A]=EE(t[A],t[A+1]),s[A]=n(e[A],e[A+1]);return function(a){var y=upe(t,a,1,r)-1;return s[y](i[y](a))}}function Vpe(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Gpe(){var t=Wk,e=Wk,n=YS,r,i,s,A=Ef,a,y,w;function M(){return a=Math.min(t.length,e.length)>2?Upe:Npe,y=w=null,C}function C(k){return isNaN(k=+k)?s:(y||(y=a(t.map(r),e,n)))(r(A(k)))}return C.invert=function(k){return A(i((w||(w=a(e,t.map(r),a2)))(k)))},C.domain=function(k){return arguments.length?(t=dpe.call(k,Fpe),A===Ef||(A=Qk(t)),M()):t.slice()},C.range=function(k){return arguments.length?(e=xE.call(k),M()):e.slice()},C.rangeRound=function(k){return e=xE.call(k),n=zpe,M()},C.clamp=function(k){return arguments.length?(A=k?Qk(t):Ef,C):A!==Ef},C.interpolate=function(k){return arguments.length?(n=k,M()):n},C.unknown=function(k){return arguments.length?(s=k,C):s},function(k,U){return r=k,i=U,M()}}function jpe(t,e){return Gpe()(t,e)}function $pe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function l2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pd(t){return t=l2(Math.abs(t)),t?t[1]:NaN}function Hpe(t,e){return function(n,r){for(var i=n.length,s=[],A=0,a=t[0],y=0;i>0&&a>0&&(y+a+1>r&&(a=Math.max(1,r-y)),s.push(n.substring(i-=a,i+a)),!((y+=a+1)>r));)a=t[A=(A+1)%t.length];return s.reverse().join(e)}}function Wpe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Qpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A2(t){if(!(e=Qpe.exec(t)))throw new Error("invalid format: "+t);var e;return new XS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}A2.prototype=XS.prototype;function XS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}XS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qpe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var XF;function Zpe(t,e){var n=l2(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(XF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,A=r.length;return s===A?r:s>A?r+new Array(s-A+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+l2(t,Math.max(0,e+s-1))[0]}function qk(t,e){var n=l2(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Zk={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:$pe,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return qk(t*100,e)},r:qk,s:Zpe,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Yk(t){return t}var Xk=Array.prototype.map,Kk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ype(t){var e=t.grouping===void 0||t.thousands===void 0?Yk:Hpe(Xk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Yk:Wpe(Xk.call(t.numerals,String)),A=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"-":t.minus+"",y=t.nan===void 0?"NaN":t.nan+"";function w(C){C=A2(C);var k=C.fill,U=C.align,H=C.sign,q=C.symbol,se=C.zero,Z=C.width,J=C.comma,re=C.precision,de=C.trim,_e=C.type;_e==="n"?(J=!0,_e="g"):Zk[_e]||(re===void 0&&(re=12),de=!0,_e="g"),(se||k==="0"&&U==="=")&&(se=!0,k="0",U="=");var fe=q==="$"?n:q==="#"&&/[boxX]/.test(_e)?"0"+_e.toLowerCase():"",Fe=q==="$"?r:/[%p]/.test(_e)?A:"",We=Zk[_e],qe=/[defgprs%]/.test(_e);re=re===void 0?6:/[gprs]/.test(_e)?Math.max(1,Math.min(21,re)):Math.max(0,Math.min(20,re));function Ke(Oe){var tt=fe,Ye=Fe,pt,en,Mt;if(_e==="c")Ye=We(Oe)+Ye,Oe="";else{Oe=+Oe;var Qt=Oe<0||1/Oe<0;if(Oe=isNaN(Oe)?y:We(Math.abs(Oe),re),de&&(Oe=qpe(Oe)),Qt&&+Oe==0&&H!=="+"&&(Qt=!1),tt=(Qt?H==="("?H:a:H==="-"||H==="("?"":H)+tt,Ye=(_e==="s"?Kk[8+XF/3]:"")+Ye+(Qt&&H==="("?")":""),qe){for(pt=-1,en=Oe.length;++pt<en;)if(Mt=Oe.charCodeAt(pt),48>Mt||Mt>57){Ye=(Mt===46?i+Oe.slice(pt+1):Oe.slice(pt))+Ye,Oe=Oe.slice(0,pt);break}}}J&&!se&&(Oe=e(Oe,1/0));var xt=tt.length+Oe.length+Ye.length,Tt=xt<Z?new Array(Z-xt+1).join(k):"";switch(J&&se&&(Oe=e(Tt+Oe,Tt.length?Z-Ye.length:1/0),Tt=""),U){case"<":Oe=tt+Oe+Ye+Tt;break;case"=":Oe=tt+Tt+Oe+Ye;break;case"^":Oe=Tt.slice(0,xt=Tt.length>>1)+tt+Oe+Ye+Tt.slice(xt);break;default:Oe=Tt+tt+Oe+Ye;break}return s(Oe)}return Ke.toString=function(){return C+""},Ke}function M(C,k){var U=w((C=A2(C),C.type="f",C)),H=Math.max(-8,Math.min(8,Math.floor(pd(k)/3)))*3,q=Math.pow(10,-H),se=Kk[8+H/3];return function(Z){return U(q*Z)+se}}return{format:w,formatPrefix:M}}var ny,KF,JF;Xpe({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Xpe(t){return ny=Ype(t),KF=ny.format,JF=ny.formatPrefix,ny}function Kpe(t){return Math.max(0,-pd(Math.abs(t)))}function Jpe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pd(e)/3)))*3-pd(Math.abs(t)))}function ege(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pd(e)-pd(t))+1}function tge(t,e,n,r){var i=fpe(t,e,n),s;switch(r=A2(r??",f"),r.type){case"s":{var A=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Jpe(i,A))&&(r.precision=s),JF(r,A)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ege(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Kpe(i))&&(r.precision=s-(r.type==="%")*2);break}}return KF(r)}function nge(t){var e=t.domain;return t.ticks=function(n){var r=e();return hpe(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return tge(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,A=r[i],a=r[s],y;return a<A&&(y=A,A=a,a=y,y=i,i=s,s=y),y=Ny(A,a,n),y>0?(A=Math.floor(A/y)*y,a=Math.ceil(a/y)*y,y=Ny(A,a,n)):y<0&&(A=Math.ceil(A*y)/y,a=Math.floor(a*y)/y,y=Ny(A,a,n)),y>0?(r[i]=Math.floor(A/y)*y,r[s]=Math.ceil(a/y)*y,e(r)):y<0&&(r[i]=Math.ceil(A*y)/y,r[s]=Math.floor(a*y)/y,e(r)),t},t}function Ou(){var t=jpe(Ef,Ef);return t.copy=function(){return Vpe(t,Ou())},QS.apply(t,arguments),nge(t)}function dv(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}function pv(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const rge=pv(dv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));pv(dv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));pv(dv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));pv(dv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Pc(t){return function(){return t}}var Jk=Math.abs,ao=Math.atan2,Sh=Math.cos,ige=Math.max,eb=Math.min,kA=Math.sin,Tf=Math.sqrt,ta=1e-12,Xg=Math.PI,u2=Xg/2,sge=2*Xg;function oge(t){return t>1?0:t<-1?Xg:Math.acos(t)}function e8(t){return t>=1?u2:t<=-1?-u2:Math.asin(t)}function age(t){return t.innerRadius}function lge(t){return t.outerRadius}function Age(t){return t.startAngle}function uge(t){return t.endAngle}function cge(t){return t&&t.padAngle}function hge(t,e,n,r,i,s,A,a){var y=n-t,w=r-e,M=A-i,C=a-s,k=C*y-M*w;if(!(k*k<ta))return k=(M*(e-s)-C*(t-i))/k,[t+k*y,e+k*w]}function ry(t,e,n,r,i,s,A){var a=t-n,y=e-r,w=(A?s:-s)/Tf(a*a+y*y),M=w*y,C=-w*a,k=t+M,U=e+C,H=n+M,q=r+C,se=(k+H)/2,Z=(U+q)/2,J=H-k,re=q-U,de=J*J+re*re,_e=i-s,fe=k*q-H*U,Fe=(re<0?-1:1)*Tf(ige(0,_e*_e*de-fe*fe)),We=(fe*re-J*Fe)/de,qe=(-fe*J-re*Fe)/de,Ke=(fe*re+J*Fe)/de,Oe=(-fe*J+re*Fe)/de,tt=We-se,Ye=qe-Z,pt=Ke-se,en=Oe-Z;return tt*tt+Ye*Ye>pt*pt+en*en&&(We=Ke,qe=Oe),{cx:We,cy:qe,x01:-M,y01:-C,x11:We*(i/_e-1),y11:qe*(i/_e-1)}}function e7(){var t=age,e=lge,n=Pc(0),r=null,i=Age,s=uge,A=cge,a=null;function y(){var w,M,C=+t.apply(this,arguments),k=+e.apply(this,arguments),U=i.apply(this,arguments)-u2,H=s.apply(this,arguments)-u2,q=Jk(H-U),se=H>U;if(a||(a=w=VF()),k<C&&(M=k,k=C,C=M),!(k>ta))a.moveTo(0,0);else if(q>sge-ta)a.moveTo(k*Sh(U),k*kA(U)),a.arc(0,0,k,U,H,!se),C>ta&&(a.moveTo(C*Sh(H),C*kA(H)),a.arc(0,0,C,H,U,se));else{var Z=U,J=H,re=U,de=H,_e=q,fe=q,Fe=A.apply(this,arguments)/2,We=Fe>ta&&(r?+r.apply(this,arguments):Tf(C*C+k*k)),qe=eb(Jk(k-C)/2,+n.apply(this,arguments)),Ke=qe,Oe=qe,tt,Ye;if(We>ta){var pt=e8(We/C*kA(Fe)),en=e8(We/k*kA(Fe));(_e-=pt*2)>ta?(pt*=se?1:-1,re+=pt,de-=pt):(_e=0,re=de=(U+H)/2),(fe-=en*2)>ta?(en*=se?1:-1,Z+=en,J-=en):(fe=0,Z=J=(U+H)/2)}var Mt=k*Sh(Z),Qt=k*kA(Z),xt=C*Sh(de),Tt=C*kA(de);if(qe>ta){var Xt=k*Sh(J),Mn=k*kA(J),Cn=C*Sh(re),vr=C*kA(re),Gn;if(q<Xg&&(Gn=hge(Mt,Qt,Cn,vr,Xt,Mn,xt,Tt))){var Jn=Mt-Gn[0],ir=Qt-Gn[1],jn=Xt-Gn[0],Lr=Mn-Gn[1],St=1/kA(oge((Jn*jn+ir*Lr)/(Tf(Jn*Jn+ir*ir)*Tf(jn*jn+Lr*Lr)))/2),ln=Tf(Gn[0]*Gn[0]+Gn[1]*Gn[1]);Ke=eb(qe,(C-ln)/(St-1)),Oe=eb(qe,(k-ln)/(St+1))}}fe>ta?Oe>ta?(tt=ry(Cn,vr,Mt,Qt,k,Oe,se),Ye=ry(Xt,Mn,xt,Tt,k,Oe,se),a.moveTo(tt.cx+tt.x01,tt.cy+tt.y01),Oe<qe?a.arc(tt.cx,tt.cy,Oe,ao(tt.y01,tt.x01),ao(Ye.y01,Ye.x01),!se):(a.arc(tt.cx,tt.cy,Oe,ao(tt.y01,tt.x01),ao(tt.y11,tt.x11),!se),a.arc(0,0,k,ao(tt.cy+tt.y11,tt.cx+tt.x11),ao(Ye.cy+Ye.y11,Ye.cx+Ye.x11),!se),a.arc(Ye.cx,Ye.cy,Oe,ao(Ye.y11,Ye.x11),ao(Ye.y01,Ye.x01),!se))):(a.moveTo(Mt,Qt),a.arc(0,0,k,Z,J,!se)):a.moveTo(Mt,Qt),!(C>ta)||!(_e>ta)?a.lineTo(xt,Tt):Ke>ta?(tt=ry(xt,Tt,Xt,Mn,C,-Ke,se),Ye=ry(Mt,Qt,Cn,vr,C,-Ke,se),a.lineTo(tt.cx+tt.x01,tt.cy+tt.y01),Ke<qe?a.arc(tt.cx,tt.cy,Ke,ao(tt.y01,tt.x01),ao(Ye.y01,Ye.x01),!se):(a.arc(tt.cx,tt.cy,Ke,ao(tt.y01,tt.x01),ao(tt.y11,tt.x11),!se),a.arc(0,0,C,ao(tt.cy+tt.y11,tt.cx+tt.x11),ao(Ye.cy+Ye.y11,Ye.cx+Ye.x11),se),a.arc(Ye.cx,Ye.cy,Ke,ao(Ye.y11,Ye.x11),ao(Ye.y01,Ye.x01),!se))):a.arc(0,0,C,de,re,se)}if(a.closePath(),w)return a=null,w+""||null}return y.centroid=function(){var w=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,M=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Xg/2;return[Sh(M)*w,kA(M)*w]},y.innerRadius=function(w){return arguments.length?(t=typeof w=="function"?w:Pc(+w),y):t},y.outerRadius=function(w){return arguments.length?(e=typeof w=="function"?w:Pc(+w),y):e},y.cornerRadius=function(w){return arguments.length?(n=typeof w=="function"?w:Pc(+w),y):n},y.padRadius=function(w){return arguments.length?(r=w==null?null:typeof w=="function"?w:Pc(+w),y):r},y.startAngle=function(w){return arguments.length?(i=typeof w=="function"?w:Pc(+w),y):i},y.endAngle=function(w){return arguments.length?(s=typeof w=="function"?w:Pc(+w),y):s},y.padAngle=function(w){return arguments.length?(A=typeof w=="function"?w:Pc(+w),y):A},y.context=function(w){return arguments.length?(a=w??null,y):a},y}function c2(){this._=null}function gv(t){t.U=t.C=t.L=t.R=t.P=t.N=null}c2.prototype={constructor:c2,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=t8(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Sp(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Mp(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Mp(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Sp(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,s,A;if(r?i?s=t8(i):s=r:s=i,e?e.L===t?e.L=s:e.R=s:this._=s,r&&i?(A=s.C,s.C=t.C,s.L=r,r.U=s,s!==i?(e=s.U,s.U=t.U,t=s.R,e.L=t,s.R=i,i.U=s):(s.U=e,e=s,t=s.R)):(A=t.C,t=s),t&&(t.U=e),!A){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,Sp(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,Mp(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,Sp(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,Mp(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,Sp(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,Mp(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function Sp(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Mp(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function t8(t){for(;t.L;)t=t.L;return t}function $p(t,e,n,r){var i=[null,null],s=uo.push(i)-1;return i.left=t,i.right=e,n&&h2(i,t,e,n),r&&h2(i,e,t,r),Ra[t.index].halfedges.push(s),Ra[e.index].halfedges.push(s),i}function Cp(t,e,n){var r=[e,n];return r.left=t,r}function h2(t,e,n,r){!t[0]&&!t[1]?(t[0]=r,t.left=e,t.right=n):t.left===n?t[1]=r:t[0]=r}function fge(t,e,n,r,i){var s=t[0],A=t[1],a=s[0],y=s[1],w=A[0],M=A[1],C=0,k=1,U=w-a,H=M-y,q;if(q=e-a,!(!U&&q>0)){if(q/=U,U<0){if(q<C)return;q<k&&(k=q)}else if(U>0){if(q>k)return;q>C&&(C=q)}if(q=r-a,!(!U&&q<0)){if(q/=U,U<0){if(q>k)return;q>C&&(C=q)}else if(U>0){if(q<C)return;q<k&&(k=q)}if(q=n-y,!(!H&&q>0)){if(q/=H,H<0){if(q<C)return;q<k&&(k=q)}else if(H>0){if(q>k)return;q>C&&(C=q)}if(q=i-y,!(!H&&q<0)){if(q/=H,H<0){if(q>k)return;q>C&&(C=q)}else if(H>0){if(q<C)return;q<k&&(k=q)}return!(C>0)&&!(k<1)||(C>0&&(t[0]=[a+C*U,y+C*H]),k<1&&(t[1]=[a+k*U,y+k*H])),!0}}}}}function dge(t,e,n,r,i){var s=t[1];if(s)return!0;var A=t[0],a=t.left,y=t.right,w=a[0],M=a[1],C=y[0],k=y[1],U=(w+C)/2,H=(M+k)/2,q,se;if(k===M){if(U<e||U>=r)return;if(w>C){if(!A)A=[U,n];else if(A[1]>=i)return;s=[U,i]}else{if(!A)A=[U,i];else if(A[1]<n)return;s=[U,n]}}else if(q=(w-C)/(k-M),se=H-q*U,q<-1||q>1)if(w>C){if(!A)A=[(n-se)/q,n];else if(A[1]>=i)return;s=[(i-se)/q,i]}else{if(!A)A=[(i-se)/q,i];else if(A[1]<n)return;s=[(n-se)/q,n]}else if(M<k){if(!A)A=[e,q*e+se];else if(A[0]>=r)return;s=[r,q*r+se]}else{if(!A)A=[r,q*r+se];else if(A[0]<e)return;s=[e,q*e+se]}return t[0]=A,t[1]=s,!0}function pge(t,e,n,r){for(var i=uo.length,s;i--;)(!dge(s=uo[i],t,e,n,r)||!fge(s,t,e,n,r)||!(Math.abs(s[0][0]-s[1][0])>xi||Math.abs(s[0][1]-s[1][1])>xi))&&delete uo[i]}function gge(t){return Ra[t.index]={site:t,halfedges:[]}}function mge(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function t7(t,e){return e[+(e.left!==t.site)]}function yge(t,e){return e[+(e.left===t.site)]}function _ge(){for(var t=0,e=Ra.length,n,r,i,s;t<e;++t)if((n=Ra[t])&&(s=(r=n.halfedges).length)){var A=new Array(s),a=new Array(s);for(i=0;i<s;++i)A[i]=i,a[i]=mge(n,uo[r[i]]);for(A.sort(function(y,w){return a[w]-a[y]}),i=0;i<s;++i)a[i]=r[A[i]];for(i=0;i<s;++i)r[i]=a[i]}}function vge(t,e,n,r){var i=Ra.length,s,A,a,y,w,M,C,k,U,H,q,se,Z=!0;for(s=0;s<i;++s)if(A=Ra[s]){for(a=A.site,w=A.halfedges,y=w.length;y--;)uo[w[y]]||w.splice(y,1);for(y=0,M=w.length;y<M;)H=yge(A,uo[w[y]]),q=H[0],se=H[1],C=t7(A,uo[w[++y%M]]),k=C[0],U=C[1],(Math.abs(q-k)>xi||Math.abs(se-U)>xi)&&(w.splice(y,0,uo.push(Cp(a,H,Math.abs(q-t)<xi&&r-se>xi?[t,Math.abs(k-t)<xi?U:r]:Math.abs(se-r)<xi&&n-q>xi?[Math.abs(U-r)<xi?k:n,r]:Math.abs(q-n)<xi&&se-e>xi?[n,Math.abs(k-n)<xi?U:e]:Math.abs(se-e)<xi&&q-t>xi?[Math.abs(U-e)<xi?k:t,e]:null))-1),++M);M&&(Z=!1)}if(Z){var J,re,de,_e=1/0;for(s=0,Z=null;s<i;++s)(A=Ra[s])&&(a=A.site,J=a[0]-t,re=a[1]-e,de=J*J+re*re,de<_e&&(_e=de,Z=A));if(Z){var fe=[t,e],Fe=[t,r],We=[n,r],qe=[n,e];Z.halfedges.push(uo.push(Cp(a=Z.site,fe,Fe))-1,uo.push(Cp(a,Fe,We))-1,uo.push(Cp(a,We,qe))-1,uo.push(Cp(a,qe,fe))-1)}}for(s=0;s<i;++s)(A=Ra[s])&&(A.halfedges.length||delete Ra[s])}var n7=[],KS;function xge(){gv(this),this.x=this.y=this.arc=this.site=this.cy=null}function Sf(t){var e=t.P,n=t.N;if(!(!e||!n)){var r=e.site,i=t.site,s=n.site;if(r!==s){var A=i[0],a=i[1],y=r[0]-A,w=r[1]-a,M=s[0]-A,C=s[1]-a,k=2*(y*C-w*M);if(!(k>=-Sge)){var U=y*y+w*w,H=M*M+C*C,q=(C*U-w*H)/k,se=(y*H-M*U)/k,Z=n7.pop()||new xge;Z.arc=t,Z.site=i,Z.x=q+A,Z.y=(Z.cy=se+a)+Math.sqrt(q*q+se*se),t.circle=Z;for(var J=null,re=Kg._;re;)if(Z.y<re.y||Z.y===re.y&&Z.x<=re.x)if(re.L)re=re.L;else{J=re.P;break}else if(re.R)re=re.R;else{J=re;break}Kg.insert(J,Z),J||(KS=Z)}}}}function $f(t){var e=t.circle;e&&(e.P||(KS=e.N),Kg.remove(e),n7.push(e),gv(e),t.circle=null)}var r7=[];function wge(){gv(this),this.edge=this.site=this.circle=null}function n8(t){var e=r7.pop()||new wge;return e.site=t,e}function tb(t){$f(t),Hf.remove(t),r7.push(t),gv(t)}function bge(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],s=t.P,A=t.N,a=[t];tb(t);for(var y=s;y.circle&&Math.abs(n-y.circle.x)<xi&&Math.abs(r-y.circle.cy)<xi;)s=y.P,a.unshift(y),tb(y),y=s;a.unshift(y),$f(y);for(var w=A;w.circle&&Math.abs(n-w.circle.x)<xi&&Math.abs(r-w.circle.cy)<xi;)A=w.N,a.push(w),tb(w),w=A;a.push(w),$f(w);var M=a.length,C;for(C=1;C<M;++C)w=a[C],y=a[C-1],h2(w.edge,y.site,w.site,i);y=a[0],w=a[M-1],w.edge=$p(y.site,w.site,null,i),Sf(y),Sf(w)}function Ege(t){for(var e=t[0],n=t[1],r,i,s,A,a=Hf._;a;)if(s=i7(a,n)-e,s>xi)a=a.L;else if(A=e-Tge(a,n),A>xi){if(!a.R){r=a;break}a=a.R}else{s>-xi?(r=a.P,i=a):A>-xi?(r=a,i=a.N):r=i=a;break}gge(t);var y=n8(t);if(Hf.insert(r,y),!(!r&&!i)){if(r===i){$f(r),i=n8(r.site),Hf.insert(y,i),y.edge=i.edge=$p(r.site,y.site),Sf(r),Sf(i);return}if(!i){y.edge=$p(r.site,y.site);return}$f(r),$f(i);var w=r.site,M=w[0],C=w[1],k=t[0]-M,U=t[1]-C,H=i.site,q=H[0]-M,se=H[1]-C,Z=2*(k*se-U*q),J=k*k+U*U,re=q*q+se*se,de=[(se*J-U*re)/Z+M,(k*re-q*J)/Z+C];h2(i.edge,w,H,de),y.edge=$p(w,t,null,de),i.edge=$p(t,H,null,de),Sf(r),Sf(i)}}function i7(t,e){var n=t.site,r=n[0],i=n[1],s=i-e;if(!s)return r;var A=t.P;if(!A)return-1/0;n=A.site;var a=n[0],y=n[1],w=y-e;if(!w)return a;var M=a-r,C=1/s-1/w,k=M/w;return C?(-k+Math.sqrt(k*k-2*C*(M*M/(-2*w)-y+w/2+i-s/2)))/C+r:(r+a)/2}function Tge(t,e){var n=t.N;if(n)return i7(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var xi=1e-6,Sge=1e-12,Hf,Ra,Kg,uo;function Mge(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Cge(t,e){return e[1]-t[1]||e[0]-t[0]}function r8(t,e){var n=t.sort(Cge).pop(),r,i,s;for(uo=[],Ra=new Array(t.length),Hf=new c2,Kg=new c2;;)if(s=KS,n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x))(n[0]!==r||n[1]!==i)&&(Ege(n),r=n[0],i=n[1]),n=t.pop();else if(s)bge(s.arc);else break;if(_ge(),e){var A=+e[0][0],a=+e[0][1],y=+e[1][0],w=+e[1][1];pge(A,a,y,w),vge(A,a,y,w)}this.edges=uo,this.cells=Ra,Hf=Kg=uo=Ra=null}r8.prototype={constructor:r8,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(r){return t7(e,t[r])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(s=n.halfedges).length)for(var i=n.site,s,A=-1,a,y,w=e[s[a-1]],M=w.left===i?w.right:w.left;++A<a;)y=M,w=e[s[A]],M=w.left===i?w.right:w.left,y&&M&&r<y.index&&r<M.index&&Mge(i,y,M)<0&&t.push([i.data,y.data,M.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r=this,i,s=r._found||0,A=r.cells.length,a;!(a=r.cells[s]);)if(++s>=A)return null;var y=t-a.site[0],w=e-a.site[1],M=y*y+w*w;do a=r.cells[i=s],s=null,a.halfedges.forEach(function(C){var k=r.edges[C],U=k.left;if(!((U===a.site||!U)&&!(U=k.right))){var H=t-U[0],q=e-U[1],se=H*H+q*q;se<M&&(M=se,s=U.index)}});while(s!==null);return r._found=i,n==null||M<=n*n?a.site:null}};function Hp(t,e,n){this.k=t,this.x=e,this.y=n}Hp.prototype={constructor:Hp,scale:function(t){return t===1?this:new Hp(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Hp(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Hp.prototype;function s7(t,e,n,r,i,s){var A=i||0,a=s||0,y=n||0,w=e||function(){return"#fff"},M=r,C;function k(U){k.el=U,k.setProperties()}return k.setProperties=function(){this.el&&(k.svgGroup||(k.svgGroup=k.el.append("g")),k.svgGroup.attr("transform","translate("+A+","+a+")"),k.svgGroup.selectAll("g").data(t).enter().append("g").selectAll("rect").data(function(U,H){return U.map(function(q){return{r:H,v:q}})}).enter().append("rect").datum(function(U,H){return U.c=H,U}),k.svgGroup.selectAll("g").selectAll("rect").attr("x",function(U){return y/t[U.r].length*U.c}).attr("y",function(U){return U.r*C}).attr("width",function(U){return y/t[U.r].length}).attr("height",C).attr("fill",function(U){return w(U.v)}),M&&k.svgGroup.attr("id",M))},k.data=function(U){return arguments.length?(t=U,C=y/t.length,k.setProperties(),k):t},k.x=function(U){return arguments.length?(A=U,k.setProperties(),k):A},k.y=function(U){return arguments.length?(a=U,k.setProperties(),k):a},k.size=function(U){return arguments.length?(y=U,t&&(C=y/t.length,k.setProperties()),k):y},k.scale=function(U){return arguments.length?(w=U,t&&k.setProperties(),k):w},k.id=function(U){return arguments.length?(M=U,k.setProperties(),k):M},k}function Pge(t,e,n,r,i,s){var A=s7(t,e,n,r,i,s);function a(y,w,M,C){var k=Ou().domain([0,C]).range([-Math.PI/6,Math.PI/6]),U=Ou().domain([0,M]).range([w,0]),H=e7().innerRadius(U(y.r+1)).outerRadius(U(y.r)).startAngle(k(y.c)).endAngle(k(y.c+1));return H()}return A.setProperties=function(){var y=A.data(),w=A.size(),M=A.scale(),C=A.id(),k=A.x(),U=A.y();A.el&&(A.svgGroup||(A.svgGroup=A.el.append("g")),A.svgGroup.attr("transform","translate("+k+","+U+")"),A.svgGroup.selectAll("g").data(y).enter().append("g").selectAll("path").data(function(H,q){return H.map(function(se){return{r:q,v:se}})}).enter().append("path").datum(function(H,q){return H.c=q,H}),A.svgGroup.selectAll("g").selectAll("path").attr("transform","translate("+w/2+","+w+")").attr("d",function(H){return a(H,w,y.length,y[H.r].length)}).attr("fill",function(H){return M(H.v)}),C&&A.svgGroup.attr("id",C))},A}function JS(t,e,n){var r=e||rge,i=n||function(y,w){var M=w!=null?{v:y,u:w}:{v:y.v,u:y.u};return M},s=t;function A(y,w){var M=Wg(a0(y)),C=Wg(a0(w));return Math.sqrt(Math.pow(M.l-C.l,2)+Math.pow(M.a-C.a,2)+Math.pow(M.b-C.b,2))}function a(y,w){var M=i(y,w),C=[0,1],k=[0,1];i.uncertaintyDomain&&(C=i.uncertaintyDomain()),i.valueDomain&&(k=i.valueDomain());var U=Ou().domain(C).range([0,1]),H=Ou().domain(k).range([0,1]),q=r(H(M.v));switch(s){case"usl":default:q=Nfe(q,"#fff")(U(M.u));break;case"us":q=aE(q);var se=Ou().domain([0,1]).range([q.s,0]);q.s=se(U(M.u));break;case"ul":q=aE(q);var Z=Ou().domain([0,1]).range([q.l,1]);q.l=Z(U(M.u));break}return q}return a.colorList=function(){return this.quantize().range().map(function(y){return a(y)})},a.colorDists=function(){for(var y=this.colorList(),w=new Array(y.length),M,C=new Array(2),k,U=0;U<w.length;U++){w[U]=new Array(y.length);for(var H=0;H<w[U].length;H++)k=A(y[U],y[H]),w[U][H]=k,U!=H&&(U==0&&H==1||k<M)&&(M=k,C=[y[U],y[H]])}return w.minDist=M,w.minPair=C,w},a.mode=function(y){return arguments.length?(s=y,a):s},a.range=function(y){return arguments.length?(r=y,a):r},a.quantize=function(y){return arguments.length?(i=y,a):i},a}function Ige(t,e,n,r,i,s,A){var a=null,y=i,w=t||null,M=e||200,C=n||30,k=r||null,U=s||0,H=A||0;function q(se){a=se,q.setProperties()}return q.setProperties=function(){if(a){var se=w.domain?w.domain():[0,1],Z=M/w.range().length,J=(se[1]-se[0])/w.range().length,re=jg(se[0],se[1]+J,J),de=s2().range([0,M]).domain(re).round(!0);a.attr("class","legend").attr("transform","translate("+U+","+H+")");var _e=a.selectAll("rect").data(w.range());_e.enter().append("rect").merge(_e).attr("x",function(We,qe){return qe*Z}).attr("y",0).attr("height",C).attr("width",Z).attr("fill",function(We){return We});var fe=a.select("g.legend > g");fe.empty()&&(fe=a.append("g")),fe.attr("transform","translate(0, "+C+")").call(Whe(de).tickFormat(dd(k||"")));var Fe=a.select("g.legend > text");Fe.empty()&&(Fe=a.append("text")),Fe.style("text-anchor","middle").style("font-size",13).attr("transform","translate("+M/2+", "+(C+30)+")").text(y)}},q.title=function(se){return arguments.length?(y=se,q.setProperties(),q):y},q.scale=function(se){return arguments.length?(w=se,q.setProperties(),q):w},q.size=function(se){return arguments.length?(M=se,q.setProperties(),q):M},q.height=function(se){return arguments.length?(C=se,q.setProperties(),q):C},q.format=function(se){return arguments.length?(k=se,q.setProperties(),q):k},q.x=function(se){return arguments.length?(U=se,q.setProperties(),q):U},q.y=function(se){return arguments.length?(H=se,q.setProperties(),q):H},q}function kge(t,e,n,r,i,s,A){var a=null,y=r||"Uncertainty",w=i||"Value",M=t||null,C=e||200,k=n||null,U=s||0,H=A||0,q=null,se=s7(),Z=function(J){a=J,Z.setProperties(),a.call(se)};return Z.setProperties=function(){if(a){var J=q;J||(J=M.quantize().data());for(var re=[],de=0;de<J.length;de++)re[de]=J[J.length-de-1];se.y(1),se.data(re),se.scale(M),se.size(C),a.attr("class","legend").attr("transform","translate("+U+","+H+")");var _e=M&&M.quantize?M.quantize().uncertaintyDomain():[0,1],fe=(_e[1]-_e[0])/re.length,Fe=jg(_e[0],_e[1]+fe,fe),We=M&&M.quantize?M.quantize().valueDomain():[0,1],qe=(We[1]-We[0])/re.length,Ke=jg(We[0],We[1]+qe,qe),Oe=s2().range([0,C]).domain(Ke);a.append("g").call(Hhe(Oe).tickFormat(dd(k||""))),a.append("text").style("text-anchor","middle").style("font-size",13).attr("transform","translate("+C/2+", -25)").text(w);var tt=s2().range([0,C]).domain(Fe);a.append("g").attr("transform","translate("+C+", 0)").call(lF(tt).tickFormat(dd(k||""))),a.append("text").style("text-anchor","middle").style("font-size",13).attr("transform","translate("+(C+40)+", "+C/2+")rotate(90)").text(y)}},Z.data=function(J){return arguments.length?(q=J,Z.setProperties(),Z):q},Z.scale=function(J){return arguments.length?(M=J,Z.setProperties(),Z):M},Z.size=function(J){return arguments.length?(C=J,Z.setProperties(),Z):C},Z.format=function(J){return arguments.length?(k=J,Z.setProperties(),Z):k},Z.x=function(J){return arguments.length?(U=J,Z.setProperties(),Z):U},Z.y=function(J){return arguments.length?(H=J,Z.setProperties(),Z):H},Z.utitle=function(J){return arguments.length?(y=J,Z.setProperties(),Z):y},Z.vtitle=function(J){return arguments.length?(w=J,Z.setProperties(),Z):w},Z}function Lge(t,e,n,r,i,s,A){var a=null,y=r||"Uncertainty",w=i||"Value",M=t||null,C=e||200,k=n||null,U=s||0,H=A||0,q=null,se=Pge(),Z=function(J){a=J,Z.setProperties(),a.call(se)};return Z.setProperties=function(){if(a){var J=q;J||(J=M.quantize().data());for(var re=[],de=0;de<J.length;de++)re[de]=J[J.length-de-1];se.data(re),se.scale(M),se.size(C),a.attr("class","legend").attr("transform","translate("+U+","+H+")");var _e=M&&M.quantize?M.quantize().uncertaintyDomain():[0,1],fe=(_e[1]-_e[0])/re.length,Fe=jg(_e[0],_e[1]+fe,fe),We=s2().range([0,C]).domain(Fe),qe=C/180;a.append("g").attr("transform","translate("+(C+6*qe)+","+28*qe+")rotate(30)").call(lF(We).tickFormat(dd(k||""))),a.append("text").style("text-anchor","middle").style("font-size",13).attr("transform","translate("+(C+10*qe)+","+(40*qe+C/2)+")rotate(-60)").text(y);var Ke=M&&M.quantize?M.quantize().valueDomain():[0,1],Oe=(Ke[1]-Ke[0])/re[0].length,tt=jg(Ke[0],Ke[1]+Oe,Oe),Ye=Ou().range([0,C]).domain(Ke),pt=k?dd(k):Ye.tickFormat(tt.length),en=Ou().domain(Ke).range([-30,30]),Mt=3*qe,Qt=e7().innerRadius(C+Mt).outerRadius(C+Mt+1).startAngle(-Math.PI/6).endAngle(Math.PI/6),xt=a.append("g").attr("transform","translate("+C/2+","+(C-Mt)+")");xt.append("path").attr("fill","black").attr("stroke","transparent").attr("d",Qt);var Tt=xt.selectAll(".arc-label").data(tt).enter().append("g").attr("class","arc-label").attr("transform",function(Xt){return"rotate("+en(Xt)+")translate(0,"+(-C-Mt)+")"});Tt.append("text").style("font-size","11").style("text-anchor","middle").attr("y",-10).text(pt),Tt.append("line").attr("x1",.5).attr("x2",.5).attr("y1",-6).attr("y2",0).attr("stroke","#000"),a.append("text").style("text-anchor","middle").style("font-size",13).attr("x",C/2).attr("y",-30).text(w)}},Z.data=function(J){return arguments.length?(q=J,Z.setProperties(),Z):q},Z.scale=function(J){return arguments.length?(M=J,Z.setProperties(),Z):M},Z.size=function(J){return arguments.length?(C=J,Z.setProperties(),Z):C},Z.format=function(J){return arguments.length?(k=J,Z.setProperties(),Z):k},Z.x=function(J){return arguments.length?(U=J,Z.setProperties(),Z):U},Z.y=function(J){return arguments.length?(H=J,Z.setProperties(),Z):H},Z.utitle=function(J){return arguments.length?(y=J,Z.setProperties(),Z):y},Z.vtitle=function(J){return arguments.length?(w=J,Z.setProperties(),Z):w},Z}const Dge=Object.freeze(Object.defineProperty({__proto__:null,arcmapLegend:Lge,heatmapLegend:kge,simpleLegend:Ige},Symbol.toStringTag,{value:"Module"}));var i8=Dge;const mv=[-300,700],e4=uS(Object.values(Object.values(Tm).slice(-1)[0]).map(t=>t.DemandBaselineAverage)),yv=uS(Object.values(Object.values(Tm).slice(-1)[0]).map(t=>t.UnmetDemandBaselineAverage)),_v=[-30,30];uS(Object.values(Object.values(Tm).slice(-1)[0]).map(t=>t.DemandBaselineAverage+t.UnmetDemandBaselineAverage));const t4=[0,Dre(Object.values(Object.values(Tm).slice(-1)[0]).map(t=>t.GroundwaterVar[0]),1)],Im=[0,650],o7=Im,ca=10;Ms().domain(mv).range([.5,1]).clamp(!0);const n4=bi().domain(mv).range(x0(0,1,ca));Ms().domain(e4).range([0,1]).clamp(!0);const a7=bi().domain(e4).range(x0(0,1,ca)),Rge=Ms().domain(yv).range([1,0]).clamp(!0),f2=bi().domain(yv).range(x0(1,0,ca)),TE=Ms().domain(_v).range([0,1]).clamp(!0),gd=bi().domain(_v).range(x0(0,1,ca));Ms().domain(t4).range([0,.5]).clamp(!0);Ms().domain(Im).range([.9,.4]).clamp(!0);bi().domain(t4).range(x0(.9,.4,ca));const l7=bi().domain(Im).range(x0(.9,.4,ca)),Bge=Ms().domain(o7).range([0,1]).clamp(!0),A7=Ga(t=>wO(Ms([.75,1])(t)),-.5,.5),zge=Ga(bO,1,1),u7=Ga(bO,0,2),c7=Ga(rAe,0,0),Oge=Ga(wO,0,0),h7=bi().domain(mv).range(wm(A7,ca));bi().domain(e4).range(wm(zge,ca));const f7=bi().domain(yv).range(wm(u7,ca).reverse()),r4=bi().domain(_v).range(wm(c7,ca));bi().domain(Im).range(wm(Oge,ca).reverse());const d7=JS().quantize(i4().branching(2).layers(4).valueDomain(mv).uncertaintyDomain(t4)).range(A7);JS().quantize(i4().branching(2).layers(4).valueDomain(yv).uncertaintyDomain(Im)).range(u7);const Fge=JS().quantize(i4().branching(2).layers(4).valueDomain(_v).uncertaintyDomain(o7)).range(c7),km=(t,e=0)=>Math.abs(t-e)<1/ca?0:1,Lm=(t,e=!1,n=!1)=>[...h7(t).replace(/[^\d,]/g,"").split(",").map(r=>Number(r)),(e?km(n4(t)):1)*255],Nh=(t,e=!1,n=!1)=>[...f7(t).replace(/[^\d,]/g,"").split(",").map(r=>Number(r)),(e?km(f2(t)):1)*255],A0=(t,e=!1,n=!1)=>[...r4(t).replace(/[^\d,]/g,"").split(",").map(r=>Number(r)),(e?km(gd(t),.5):1)*255],Nge=(t,e,n=!1,r=!1)=>[...d7(t,e).replace(/[^\d,]/g,"").split(",").map(i=>Number(i)),(n?km(n4(t)):1)*255],Uge=(t,e,n=!1,r=!1)=>[...Fge(t,e).replace(/[^\d,]/g,"").split(",").map(i=>Number(i)),(n?km(gd(t),.5):1)*255],p7=t=>[...Ga({col:uAe(f2(t)).replace(/[^\d,]/g,"").split(",").map(e=>Number(e)),saturation:1}),f2(t)<1/ca?0:255],g7=t=>Ga({col:oAe(a7(t)).replace(/[^\d,]/g,"").split(",").map(e=>Number(e)),saturation:1}),m7=t=>[...Ga({col:lAe(TE(t)).replace(/[^\d,]/g,"").split(",").map(e=>Number(e)),saturation:1}),TE(t)<1/ca?0:255],Jc=Ms().domain([-150,0]).range([1,0]).clamp(!0),d2=Ms().domain([0,150]).range([0,1]).clamp(!0),y7=t=>Ms([100,4090])(Rge(t)),u0=Ms().domain([7,12]).range([0,1]).clamp(!0),Uy=tAe().domain([new Date("10/31/1921"),new Date("9/30/2021")]).range([0,1199]).invert,_7=Lm(n4.invertExtent(.5)[0]);m7(TE.invert(.5));const Vge=A0(gd.invertExtent(bi().domain([0,1]).range(gd.range())(.75))[0]),Gge=A0(gd.invertExtent(bi().domain([0,1]).range(gd.range())(.25))[1]),nb=p7(f2.invertExtent(.5)[0]),iy=g7(a7.invertExtent(.5)[0]),jge=1e-9;function i4(t,e){let n=t||2,r=e||2;const i=Ms(),s=Ms();let A=y();function a(w,M){var C=M??w.u,k=M!=null?w:w.v;let U=0;for(;U<A.length-1&&i(C)<1-(U+1)/r-jge;)U++;const H=A[U].length>1?(A[U][1].v-A[U][0].v)/2:0;let q=0;for(;q<A[U].length-1&&k>A[U][q].v+H;)q++;return A[U][q]}function y(){const w=[];let M;s.nice(Math.pow(n,r-1)),i.nice(r),w[0]=[],w[0].push({u:i.invert((r-1)/r),v:s.invert(.5)});for(let C=1;C<r;C++){w[C]=[],M=2*Math.pow(n,C);for(let k=1;k<M;k+=2)w[C].push({u:i.invert(1-(C+1)/r),v:s.invert(k/M)})}return w}return a.range=()=>[].concat.apply([],A),a.tree=()=>A,a.data=a.tree,a.branching=function(w){return arguments.length?(n=Math.max(1,w),A=y(),a):n},a.layers=function(w){return arguments.length?(r=Math.max(1,w),A=y(),a):r},a.uncertaintyDomain=function(w){return arguments.length?(i.domain(w),A=y(),a):i.domain()},a.valueDomain=function(w){return arguments.length?(s.domain(w),A=y(),a):s.domain()},a}const $ge={longitude:-121.046040643251,latitude:37.53320315272563,zoom:7.3252675985610685,minZoom:7,maxZoom:15,pitch:50.85,bearing:32.58},Hge={longitude:-120.799348991653,latitude:37.07909824584108,zoom:9.589607161282105,minZoom:7,maxZoom:11,pitch:50.85,bearing:32.58,transitionDuration:3e3,transitionInterpolator:new Sd},s8={longitude:-121.134704643101,latitude:37.71392572292552,zoom:7.714668594935653,minZoom:7,maxZoom:11,pitch:50.85,bearing:32.58,transitionDuration:3e3,transitionInterpolator:new Sd},Wge={longitude:-121.724611542995,latitude:38.20436329728941,zoom:8.054386171593723,minZoom:7,maxZoom:11,pitch:50.85,bearing:32.58,transitionDuration:3e3,transitionInterpolator:new Sd},Qge={longitude:-121.816103974157,latitude:38.98693235425995,zoom:9.654348182289308,minZoom:7,maxZoom:11,pitch:50.85,bearing:32.58,transitionDuration:3e3,transitionInterpolator:new Sd},qge={longitude:-121.80183018585,latitude:38.26807071392864,zoom:9.572807132250027,minZoom:7,maxZoom:11,pitch:50.85,bearing:32.58,transitionDuration:3e3,transitionInterpolator:new Sd},Zge={longitude:-120.732027389154,latitude:37.00972667884932,zoom:8.599616427840187,minZoom:7,maxZoom:11,pitch:50.85,bearing:32.58,transitionDuration:3e3,transitionInterpolator:new Sd},Yge=new zB({color:[255,255,255],intensity:1.7}),Xge=new GJ({timestamp:Date.UTC(2019,6,1,22),color:[255,255,255],intensity:.8}),o8={0:"Settlement",1:"Exchange",2:"Project",3:"Non-Project"},pr={0:"bl_h000",1:"CS3_ALT3_2022med_L2020ADV",2:"LTO_BA_EXP1_2022MED"},a8={0:"Scenario 1",1:"Scenario 2",2:"Scenario 3"};function mr(t,e,n){return t>=e&&t<=n}const Kge=new rS({ambientLight:Yge,dirLight:Xge});var fs=function(t){t=t||{};var e=typeof t<"u"?t:{},n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);var i="";function s(K){return e.locateFile?e.locateFile(K,i):i+K}var A;typeof document<"u"&&document.currentScript&&(i=document.currentScript.src),i.indexOf("blob:")!==0?i=i.substr(0,i.lastIndexOf("/")+1):i="",A=function(W,ee,ce){var o=new XMLHttpRequest;o.open("GET",W,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status==200||o.status==0&&o.response){ee(o.response);return}var De=Ur(W);if(De){ee(De.buffer);return}ce()},o.onerror=ce,o.send(null)};var a=e.print||console.log.bind(console),y=e.printErr||console.warn.bind(console);for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);n=null,e.arguments&&e.arguments;var w=0,M=function(K){w=K},C=function(){return w},k=8;function U(K,W,ee,ce){switch(ee=ee||"i8",ee.charAt(ee.length-1)==="*"&&(ee="i32"),ee){case"i1":tt[K>>0]=W;break;case"i8":tt[K>>0]=W;break;case"i16":pt[K>>1]=W;break;case"i32":en[K>>2]=W;break;case"i64":Yr=[W>>>0,(Er=W,+sr(Er)>=1?Er>0?(gr(+lr(Er/4294967296),4294967295)|0)>>>0:~~+er((Er-+(~~Er>>>0))/4294967296)>>>0:0)],en[K>>2]=Yr[0],en[K+4>>2]=Yr[1];break;case"float":Mt[K>>2]=W;break;case"double":Qt[K>>3]=W;break;default:fn("invalid type for setValue: "+ee)}}function H(K,W,ee){switch(W=W||"i8",W.charAt(W.length-1)==="*"&&(W="i32"),W){case"i1":return tt[K>>0];case"i8":return tt[K>>0];case"i16":return pt[K>>1];case"i32":return en[K>>2];case"i64":return en[K>>2];case"float":return Mt[K>>2];case"double":return Qt[K>>3];default:fn("invalid type for getValue: "+W)}return null}var q=!1;function se(K,W){K||fn("Assertion failed: "+W)}function Z(K){var W=e["_"+K];return se(W,"Cannot call unknown function "+K+", make sure it is exported"),W}function J(K,W,ee,ce,o){var G={string:function(ft){var vt=0;if(ft!=null&&ft!==0){var wt=(ft.length<<2)+1;vt=gt(wt),We(ft,vt,wt)}return vt},array:function(ft){var vt=gt(ft.length);return qe(ft,vt),vt}};function De(ft){return W==="string"?fe(ft):W==="boolean"?!!ft:ft}var ke=Z(K),Pe=[],Le=0;if(ce)for(var Ze=0;Ze<ce.length;Ze++){var lt=G[ee[Ze]];lt?(Le===0&&(Le=qt()),Pe[Ze]=lt(ce[Ze])):Pe[Ze]=ce[Ze]}var Qe=ke.apply(null,Pe);return Qe=De(Qe),Le!==0&&Lt(Le),Qe}function re(K,W,ee,ce){ee=ee||[];var o=ee.every(function(De){return De==="number"}),G=W!=="string";return G&&o&&!ce?Z(K):function(){return J(K,W,ee,arguments)}}var de=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function _e(K,W,ee){for(var ce=W+ee,o=W;K[o]&&!(o>=ce);)++o;if(o-W>16&&K.subarray&&de)return de.decode(K.subarray(W,o));for(var G="";W<o;){var De=K[W++];if(!(De&128)){G+=String.fromCharCode(De);continue}var ke=K[W++]&63;if((De&224)==192){G+=String.fromCharCode((De&31)<<6|ke);continue}var Pe=K[W++]&63;if((De&240)==224?De=(De&15)<<12|ke<<6|Pe:De=(De&7)<<18|ke<<12|Pe<<6|K[W++]&63,De<65536)G+=String.fromCharCode(De);else{var Le=De-65536;G+=String.fromCharCode(55296|Le>>10,56320|Le&1023)}}return G}function fe(K,W){return K?_e(Ye,K,W):""}function Fe(K,W,ee,ce){if(!(ce>0))return 0;for(var o=ee,G=ee+ce-1,De=0;De<K.length;++De){var ke=K.charCodeAt(De);if(ke>=55296&&ke<=57343){var Pe=K.charCodeAt(++De);ke=65536+((ke&1023)<<10)|Pe&1023}if(ke<=127){if(ee>=G)break;W[ee++]=ke}else if(ke<=2047){if(ee+1>=G)break;W[ee++]=192|ke>>6,W[ee++]=128|ke&63}else if(ke<=65535){if(ee+2>=G)break;W[ee++]=224|ke>>12,W[ee++]=128|ke>>6&63,W[ee++]=128|ke&63}else{if(ee+3>=G)break;W[ee++]=240|ke>>18,W[ee++]=128|ke>>12&63,W[ee++]=128|ke>>6&63,W[ee++]=128|ke&63}}return W[ee]=0,ee-o}function We(K,W,ee){return Fe(K,Ye,W,ee)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function qe(K,W){tt.set(K,W)}function Ke(K,W){return K%W>0&&(K+=W-K%W),K}var Oe,tt,Ye,pt,en,Mt,Qt;function xt(K){Oe=K,e.HEAP8=tt=new Int8Array(K),e.HEAP16=pt=new Int16Array(K),e.HEAP32=en=new Int32Array(K),e.HEAPU8=Ye=new Uint8Array(K),e.HEAPU16=new Uint16Array(K),e.HEAPU32=new Uint32Array(K),e.HEAPF32=Mt=new Float32Array(K),e.HEAPF64=Qt=new Float64Array(K)}var Tt=5267040,Xt=24128,Mn=e.TOTAL_MEMORY||33554432;e.buffer?Oe=e.buffer:Oe=new ArrayBuffer(Mn),Mn=Oe.byteLength,xt(Oe),en[Xt>>2]=Tt;function Cn(K){for(;K.length>0;){var W=K.shift();if(typeof W=="function"){W();continue}var ee=W.func;typeof ee=="number"?W.arg===void 0?e.dynCall_v(ee):e.dynCall_vi(ee,W.arg):ee(W.arg===void 0?null:W.arg)}}var vr=[],Gn=[],Jn=[],ir=[];function jn(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)yn(e.preRun.shift());Cn(vr)}function Lr(){Cn(Gn)}function St(){Cn(Jn)}function ln(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)bt(e.postRun.shift());Cn(ir)}function yn(K){vr.unshift(K)}function bt(K){ir.unshift(K)}var sr=Math.abs,er=Math.ceil,lr=Math.floor,gr=Math.min,Ar=0,Zr=null;function Zn(K){Ar++,e.monitorRunDependencies&&e.monitorRunDependencies(Ar)}function Ei(K){if(Ar--,e.monitorRunDependencies&&e.monitorRunDependencies(Ar),Ar==0&&Zr){var W=Zr;Zr=null,W()}}e.preloadedImages={},e.preloadedAudios={};var $n=null,Ti="data:application/octet-stream;base64,";function rs(K){return String.prototype.startsWith?K.startsWith(Ti):K.indexOf(Ti)===0}var Er,Yr;$n="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var Ps=24144;function Si(K){return K}function ht(K){var W=/\b__Z[\w\d_]+/g;return K.replace(W,function(ee){var ce=ee;return ee===ce?ee:ce+" ["+ee+"]"})}function kt(){var K=new Error;if(!K.stack){try{throw new Error(0)}catch(W){K=W}if(!K.stack)return"(no stack trace available)"}return K.stack.toString()}function is(){var K=kt();return e.extraStackTrace&&(K+=`
`+e.extraStackTrace()),ht(K)}function Ai(K,W,ee,ce){fn("Assertion failed: "+fe(K)+", at: "+[W?fe(W):"unknown filename",ee,ce?fe(ce):"unknown function"])}function Vn(){return tt.length}function Bi(K,W,ee){Ye.set(Ye.subarray(W,W+ee),K)}function mi(K){return e.___errno_location&&(en[e.___errno_location()>>2]=K),K}function ti(K){fn("OOM")}function $i(K){try{var W=new ArrayBuffer(K);return W.byteLength!=K?void 0:(new Int8Array(W).set(tt),ot(W),xt(W),1)}catch{}}function Bt(K){var W=Vn(),ee=16777216,ce=2147483648-ee;if(K>ce)return!1;for(var o=16777216,G=Math.max(W,o);G<K;)G<=536870912?G=Ke(2*G,ee):G=Math.min(Ke((3*G+2147483648)/4,ee),ce);var De=$i(G);return!!De}var Rn=typeof atob=="function"?atob:function(K){var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ee="",ce,o,G,De,ke,Pe,Le,Ze=0;K=K.replace(/[^A-Za-z0-9\+\/\=]/g,"");do De=W.indexOf(K.charAt(Ze++)),ke=W.indexOf(K.charAt(Ze++)),Pe=W.indexOf(K.charAt(Ze++)),Le=W.indexOf(K.charAt(Ze++)),ce=De<<2|ke>>4,o=(ke&15)<<4|Pe>>2,G=(Pe&3)<<6|Le,ee=ee+String.fromCharCode(ce),Pe!==64&&(ee=ee+String.fromCharCode(o)),Le!==64&&(ee=ee+String.fromCharCode(G));while(Ze<K.length);return ee};function In(K){try{for(var W=Rn(K),ee=new Uint8Array(W.length),ce=0;ce<W.length;++ce)ee[ce]=W.charCodeAt(ce);return ee}catch{throw new Error("Converting base64 string to bytes failed.")}}function Ur(K){if(rs(K))return In(K.slice(Ti.length))}var Xi={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Pn={a:fn,b:M,c:C,d:Ai,e:mi,f:Vn,g:Bi,h:Bt,i:ti,j:Si,k:ht,l:$i,m:kt,n:is,o:Ps,p:Xt},ye=function(K,W,ee){"almost asm";var ce=new K.Int8Array(ee),o=new K.Int32Array(ee);new K.Uint8Array(ee),new K.Float32Array(ee);var G=new K.Float64Array(ee),De=W.o|0,ke=W.p|0,Pe=K.Math.floor,Le=K.Math.abs,Ze=K.Math.sqrt,lt=K.Math.pow,Qe=K.Math.cos,ft=K.Math.sin,vt=K.Math.tan,wt=K.Math.acos,Jt=K.Math.asin,Ut=K.Math.atan,xn=K.Math.atan2,nn=K.Math.ceil,pn=K.Math.imul,Bn=K.Math.min,Vt=K.Math.max,Ue=K.Math.clz32,Dt=W.b,Ce=W.c,_n=W.d,yi=W.e,dr=W.f,ha=W.g,Re=W.h,ja=W.i,Ee=24160;function jo(m){return ce=new Int8Array(m),o=new Int32Array(m),G=new Float64Array(m),ee=m,!0}function Is(m){m=m|0;var g=0;return g=Ee,Ee=Ee+m|0,Ee=Ee+15&-16,g|0}function $a(){return Ee|0}function Ha(m){m=m|0,Ee=m}function fa(m,g){m=m|0,Ee=m}function wl(m,g){m=m|0,g=g|0;var v=0,E=0,I=0;return(m|0)<0?(g=2,g|0):(m|0)>13780509?(g=el(15,g)|0,g|0):(v=((m|0)<0)<<31>>31,I=V(m|0,v|0,3,0)|0,E=Ce()|0,v=d(m|0,v|0,1,0)|0,v=V(I|0,E|0,v|0,Ce()|0)|0,v=d(v|0,Ce()|0,1,0)|0,m=Ce()|0,o[g>>2]=v,o[g+4>>2]=m,g=0,g|0)}function da(m,g,v,E){return m=m|0,g=g|0,v=v|0,E=E|0,ui(m,g,v,E,0)|0}function ui(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0;if(Q=Ee,Ee=Ee+16|0,O=Q,!(me(m,g,v,E,I)|0))return E=0,Ee=Q,E|0;do if((v|0)>=0){if((v|0)>13780509){if(R=el(15,O)|0,R|0)break;N=O,O=o[N>>2]|0,N=o[N+4>>2]|0}else R=((v|0)<0)<<31>>31,te=V(v|0,R|0,3,0)|0,N=Ce()|0,R=d(v|0,R|0,1,0)|0,R=V(te|0,N|0,R|0,Ce()|0)|0,R=d(R|0,Ce()|0,1,0)|0,N=Ce()|0,o[O>>2]=R,o[O+4>>2]=N,O=R;if(Me(E|0,0,O<<3|0)|0,I|0){Me(I|0,0,O<<2|0)|0,R=Se(m,g,v,E,I,O,N,0)|0;break}R=h(O,4)|0,R?(te=Se(m,g,v,E,R,O,N,0)|0,l(R),R=te):R=13}else R=2;while(0);return te=R,Ee=Q,te|0}function me(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0;if(Xe=Ee,Ee=Ee+16|0,He=Xe,ze=Xe+8|0,Be=He,o[Be>>2]=m,o[Be+4>>2]=g,(v|0)<0)return ze=2,Ee=Xe,ze|0;if(R=E,o[R>>2]=m,o[R+4>>2]=g,R=(I|0)!=0,R&&(o[I>>2]=0),Cr(m,g)|0)return ze=9,Ee=Xe,ze|0;o[ze>>2]=0;e:do if((v|0)>=1)if(R)for(le=1,te=0,pe=0,Be=1,R=m;;){if(!(te|pe)){if(R=Ve(R,g,4,ze,He)|0,R|0)break e;if(g=He,R=o[g>>2]|0,g=o[g+4>>2]|0,Cr(R,g)|0){R=9;break e}}if(R=Ve(R,g,o[22384+(pe<<2)>>2]|0,ze,He)|0,R|0)break e;if(g=He,R=o[g>>2]|0,g=o[g+4>>2]|0,m=E+(le<<3)|0,o[m>>2]=R,o[m+4>>2]=g,o[I+(le<<2)>>2]=Be,m=te+1|0,O=(m|0)==(Be|0),N=pe+1|0,Q=(N|0)==6,Cr(R,g)|0){R=9;break e}if(Be=Be+(Q&O&1)|0,(Be|0)>(v|0)){R=0;break}else le=le+1|0,te=O?0:m,pe=O?Q?0:N:pe}else for(le=1,te=0,pe=0,Be=1,R=m;;){if(!(te|pe)){if(R=Ve(R,g,4,ze,He)|0,R|0)break e;if(g=He,R=o[g>>2]|0,g=o[g+4>>2]|0,Cr(R,g)|0){R=9;break e}}if(R=Ve(R,g,o[22384+(pe<<2)>>2]|0,ze,He)|0,R|0)break e;if(g=He,R=o[g>>2]|0,g=o[g+4>>2]|0,m=E+(le<<3)|0,o[m>>2]=R,o[m+4>>2]=g,m=te+1|0,O=(m|0)==(Be|0),N=pe+1|0,Q=(N|0)==6,Cr(R,g)|0){R=9;break e}if(Be=Be+(Q&O&1)|0,(Be|0)>(v|0)){R=0;break}else le=le+1|0,te=O?0:m,pe=O?Q?0:N:pe}else R=0;while(0);return ze=R,Ee=Xe,ze|0}function Se(m,g,v,E,I,R,O,N){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0,R=R|0,O=O|0,N=N|0;var Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0;if(Xe=Ee,Ee=Ee+16|0,He=Xe+8|0,ze=Xe,Q=X(m|0,g|0,R|0,O|0)|0,le=Ce()|0,pe=E+(Q<<3)|0,dt=pe,ct=o[dt>>2]|0,dt=o[dt+4>>2]|0,te=(ct|0)==(m|0)&(dt|0)==(g|0),!((ct|0)==0&(dt|0)==0|te))do Q=d(Q|0,le|0,1,0)|0,Q=$(Q|0,Ce()|0,R|0,O|0)|0,le=Ce()|0,pe=E+(Q<<3)|0,ct=pe,dt=o[ct>>2]|0,ct=o[ct+4>>2]|0,te=(dt|0)==(m|0)&(ct|0)==(g|0);while(!((dt|0)==0&(ct|0)==0|te));if(Q=I+(Q<<2)|0,te&&(o[Q>>2]|0)<=(N|0)||(ct=pe,o[ct>>2]=m,o[ct+4>>2]=g,o[Q>>2]=N,(N|0)>=(v|0)))return ct=0,Ee=Xe,ct|0;switch(te=N+1|0,o[He>>2]=0,Q=Ve(m,g,2,He,ze)|0,Q|0){case 9:{Be=9;break}case 0:{Q=ze,Q=Se(o[Q>>2]|0,o[Q+4>>2]|0,v,E,I,R,O,te)|0,Q||(Be=9);break}}e:do if((Be|0)==9){switch(o[He>>2]=0,Q=Ve(m,g,3,He,ze)|0,Q|0){case 9:break;case 0:{if(Q=ze,Q=Se(o[Q>>2]|0,o[Q+4>>2]|0,v,E,I,R,O,te)|0,Q|0)break e;break}default:break e}switch(o[He>>2]=0,Q=Ve(m,g,1,He,ze)|0,Q|0){case 9:break;case 0:{if(Q=ze,Q=Se(o[Q>>2]|0,o[Q+4>>2]|0,v,E,I,R,O,te)|0,Q|0)break e;break}default:break e}switch(o[He>>2]=0,Q=Ve(m,g,5,He,ze)|0,Q|0){case 9:break;case 0:{if(Q=ze,Q=Se(o[Q>>2]|0,o[Q+4>>2]|0,v,E,I,R,O,te)|0,Q|0)break e;break}default:break e}switch(o[He>>2]=0,Q=Ve(m,g,4,He,ze)|0,Q|0){case 9:break;case 0:{if(Q=ze,Q=Se(o[Q>>2]|0,o[Q+4>>2]|0,v,E,I,R,O,te)|0,Q|0)break e;break}default:break e}switch(o[He>>2]=0,Q=Ve(m,g,6,He,ze)|0,Q|0){case 9:break;case 0:{if(Q=ze,Q=Se(o[Q>>2]|0,o[Q+4>>2]|0,v,E,I,R,O,te)|0,Q|0)break e;break}default:break e}return ct=0,Ee=Xe,ct|0}while(0);return ct=Q,Ee=Xe,ct|0}function Ve(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0;if(v>>>0>6)return I=1,I|0;if(pe=(o[E>>2]|0)%6|0,o[E>>2]=pe,(pe|0)>0){R=0;do v=wo(v)|0,R=R+1|0;while((R|0)<(o[E>>2]|0))}if(pe=ne(m|0,g|0,45)|0,Ce()|0,le=pe&127,le>>>0>121)return I=5,I|0;Q=hi(m,g)|0,R=ne(m|0,g|0,52)|0,Ce()|0,R=R&15;e:do if(!R)te=8;else{for(;;){if(O=(15-R|0)*3|0,N=ne(m|0,g|0,O|0)|0,Ce()|0,N=N&7,(N|0)==7){g=5;break}if(ze=(zi(R)|0)==0,R=R+-1|0,Be=ue(7,0,O|0)|0,g=g&~(Ce()|0),He=ue(o[(ze?432:16)+(N*28|0)+(v<<2)>>2]|0,0,O|0)|0,O=Ce()|0,v=o[(ze?640:224)+(N*28|0)+(v<<2)>>2]|0,m=He|m&~Be,g=O|g,!v){v=0;break e}if(!R){te=8;break e}}return g|0}while(0);(te|0)==8&&(ze=o[848+(le*28|0)+(v<<2)>>2]|0,He=ue(ze|0,0,45)|0,m=He|m,g=Ce()|0|g&-1040385,v=o[4272+(le*28|0)+(v<<2)>>2]|0,(ze&127|0)==127&&(ze=ue(o[848+(le*28|0)+20>>2]|0,0,45)|0,g=Ce()|0|g&-1040385,v=o[4272+(le*28|0)+20>>2]|0,m=Ws(ze|m,g)|0,g=Ce()|0,o[E>>2]=(o[E>>2]|0)+1)),N=ne(m|0,g|0,45)|0,Ce()|0,N=N&127;e:do if(tr(N)|0){t:do if((hi(m,g)|0)==1){if((le|0)!=(N|0))if(gA(N,o[7696+(le*28|0)>>2]|0)|0){m=wA(m,g)|0,O=1,g=Ce()|0;break}else _n(23313,22416,436,22424);switch(Q|0){case 3:{m=Ws(m,g)|0,g=Ce()|0,o[E>>2]=(o[E>>2]|0)+1,O=0;break t}case 5:{m=wA(m,g)|0,g=Ce()|0,o[E>>2]=(o[E>>2]|0)+5,O=0;break t}case 0:return ze=9,ze|0;default:return ze=1,ze|0}}else O=0;while(0);if((v|0)>0){R=0;do m=au(m,g)|0,g=Ce()|0,R=R+1|0;while((R|0)!=(v|0))}if((le|0)!=(N|0)){if(!(fA(N)|0)){if((O|0)!=0|(hi(m,g)|0)!=5)break;o[E>>2]=(o[E>>2]|0)+1;break}switch(pe&127){case 8:case 118:break e}(hi(m,g)|0)!=3&&(o[E>>2]=(o[E>>2]|0)+1)}}else if((v|0)>0){R=0;do m=Ws(m,g)|0,g=Ce()|0,R=R+1|0;while((R|0)!=(v|0))}while(0);return o[E>>2]=((o[E>>2]|0)+v|0)%6|0,ze=I,o[ze>>2]=m,o[ze+4>>2]=g,ze=0,ze|0}function At(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0;for(N=Ee,Ee=Ee+16|0,R=N,O=N+8|0,I=(Cr(m,g)|0)==0,I=I?1:2;;){if(o[O>>2]=0,te=(Ve(m,g,I,O,R)|0)==0,Q=R,te&((o[Q>>2]|0)==(v|0)?(o[Q+4>>2]|0)==(E|0):0)){m=4;break}if(I=I+1|0,I>>>0>=7){I=7,m=4;break}}return(m|0)==4?(Ee=N,I|0):0}function Ct(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0;if(ze=Ee,Ee=Ee+16|0,Be=ze,He=ze+8|0,pe=Be,o[pe>>2]=m,o[pe+4>>2]=g,!v)return He=E,o[He>>2]=m,o[He+4>>2]=g,He=0,Ee=ze,He|0;o[He>>2]=0;e:do if(Cr(m,g)|0)m=9;else{if(R=(v|0)>0,R){I=0,pe=m;do{if(m=Ve(pe,g,4,He,Be)|0,m|0)break e;if(g=Be,pe=o[g>>2]|0,g=o[g+4>>2]|0,I=I+1|0,Cr(pe,g)|0){m=9;break e}}while((I|0)<(v|0));if(le=E,o[le>>2]=pe,o[le+4>>2]=g,le=v+-1|0,R){te=0,m=1;do{if(I=22384+(te<<2)|0,(te|0)==5)for(O=o[I>>2]|0,R=0,I=m;;){if(m=Be,m=Ve(o[m>>2]|0,o[m+4>>2]|0,O,He,Be)|0,m|0)break e;if((R|0)!=(le|0))if(Q=Be,N=o[Q>>2]|0,Q=o[Q+4>>2]|0,m=E+(I<<3)|0,o[m>>2]=N,o[m+4>>2]=Q,!(Cr(N,Q)|0))m=I+1|0;else{m=9;break e}else m=I;if(R=R+1|0,(R|0)>=(v|0))break;I=m}else for(O=Be,Q=o[I>>2]|0,N=0,I=m,R=o[O>>2]|0,O=o[O+4>>2]|0;;){if(m=Ve(R,O,Q,He,Be)|0,m|0)break e;if(O=Be,R=o[O>>2]|0,O=o[O+4>>2]|0,m=E+(I<<3)|0,o[m>>2]=R,o[m+4>>2]=O,m=I+1|0,Cr(R,O)|0){m=9;break e}if(N=N+1|0,(N|0)>=(v|0))break;I=m}te=te+1|0}while(te>>>0<6);m=Be,O=pe,I=o[m>>2]|0,R=g,m=o[m+4>>2]|0}else O=pe,I=pe,R=g,m=g}else O=E,o[O>>2]=m,o[O+4>>2]=g,O=m,I=m,R=g,m=g;m=(O|0)==(I|0)&(R|0)==(m|0)?0:9}while(0);return He=m,Ee=ze,He|0}function tn(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0;if(N=Ee,Ee=Ee+48|0,I=N+16|0,R=N+8|0,O=N,v|0)return O=15,Ee=N,O|0;if(te=m,Q=o[te+4>>2]|0,v=R,o[v>>2]=o[te>>2],o[v+4>>2]=Q,So(R,I),g=sc(I,g,O)|0,!g){if(v=o[R>>2]|0,R=o[m+8>>2]|0,(R|0)>0){I=o[m+12>>2]|0,g=0;do v=(o[I+(g<<3)>>2]|0)+v|0,g=g+1|0;while((g|0)<(R|0))}g=O,I=o[g>>2]|0,g=o[g+4>>2]|0,R=((v|0)<0)<<31>>31,(g|0)<(R|0)|(g|0)==(R|0)&I>>>0<v>>>0?(g=O,o[g>>2]=v,o[g+4>>2]=R,g=R):v=I,Q=d(v|0,g|0,12,0)|0,te=Ce()|0,g=O,o[g>>2]=Q,o[g+4>>2]=te,g=E,o[g>>2]=Q,o[g+4>>2]=te,g=0}return te=g,Ee=N,te|0}function Hn(m,g,v,E,I,R,O){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0,R=R|0,O=O|0;var N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0,Et=0,Nn=0,zn=0,Sn=0,kn=0,On=0,Wn=0,_r=0,Un=0,zr=0,ii=0,il=0;if(_r=Ee,Ee=Ee+64|0,Sn=_r+48|0,kn=_r+32|0,On=_r+24|0,Ht=_r+8|0,Ft=_r,Q=o[m>>2]|0,(Q|0)<=0)return Wn=0,Ee=_r,Wn|0;for(mt=m+4|0,Et=Sn+8|0,Nn=kn+8|0,zn=Ht+8|0,N=0,st=0;;){te=o[mt>>2]|0,it=te+(st<<4)|0,o[Sn>>2]=o[it>>2],o[Sn+4>>2]=o[it+4>>2],o[Sn+8>>2]=o[it+8>>2],o[Sn+12>>2]=o[it+12>>2],(st|0)==(Q+-1|0)?(o[kn>>2]=o[te>>2],o[kn+4>>2]=o[te+4>>2],o[kn+8>>2]=o[te+8>>2],o[kn+12>>2]=o[te+12>>2]):(it=te+(st+1<<4)|0,o[kn>>2]=o[it>>2],o[kn+4>>2]=o[it+4>>2],o[kn+8>>2]=o[it+8>>2],o[kn+12>>2]=o[it+12>>2]),Q=Tl(Sn,kn,E,On)|0;e:do if(Q)te=0,N=Q;else if(te=On,Q=o[te>>2]|0,te=o[te+4>>2]|0,(te|0)>0|(te|0)==0&Q>>>0>0){ct=0,it=0;t:for(;;){if(il=+G[Sn>>3],dt=x(Q|0,te|0,ct|0,it|0)|0,ii=+(dt>>>0)+4294967296*+(Ce()|0),Un=+(Q>>>0)+4294967296*+(te|0),zr=+(ct>>>0)+4294967296*+(it|0),G[Ht>>3]=il*ii/Un+ +G[kn>>3]*zr/Un,G[zn>>3]=+G[Et>>3]*ii/Un+ +G[Nn>>3]*zr/Un,Q=gs(Ht,E,Ft)|0,Q|0){N=Q;break}dt=Ft,Xe=o[dt>>2]|0,dt=o[dt+4>>2]|0,Be=X(Xe|0,dt|0,g|0,v|0)|0,le=Ce()|0,Q=O+(Be<<3)|0,pe=Q,te=o[pe>>2]|0,pe=o[pe+4>>2]|0;n:do if((te|0)==0&(pe|0)==0)Je=Q,Wn=16;else for(He=0,ze=0;;){if((He|0)>(v|0)|(He|0)==(v|0)&ze>>>0>g>>>0){N=1;break t}if((te|0)==(Xe|0)&(pe|0)==(dt|0))break n;if(Q=d(Be|0,le|0,1,0)|0,Be=$(Q|0,Ce()|0,g|0,v|0)|0,le=Ce()|0,ze=d(ze|0,He|0,1,0)|0,He=Ce()|0,Q=O+(Be<<3)|0,pe=Q,te=o[pe>>2]|0,pe=o[pe+4>>2]|0,(te|0)==0&(pe|0)==0){Je=Q,Wn=16;break}}while(0);if((Wn|0)==16&&(Wn=0,!((Xe|0)==0&(dt|0)==0))&&(ze=Je,o[ze>>2]=Xe,o[ze+4>>2]=dt,ze=R+(o[I>>2]<<3)|0,o[ze>>2]=Xe,o[ze+4>>2]=dt,ze=I,ze=d(o[ze>>2]|0,o[ze+4>>2]|0,1,0)|0,Xe=Ce()|0,dt=I,o[dt>>2]=ze,o[dt+4>>2]=Xe),ct=d(ct|0,it|0,1,0)|0,it=Ce()|0,te=On,Q=o[te>>2]|0,te=o[te+4>>2]|0,!((te|0)>(it|0)|(te|0)==(it|0)&Q>>>0>ct>>>0)){te=1;break e}}te=0}else te=1;while(0);if(st=st+1|0,!te){Wn=21;break}if(Q=o[m>>2]|0,(st|0)>=(Q|0)){N=0,Wn=21;break}}return(Wn|0)==21?(Ee=_r,N|0):0}function Gr(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0,Et=0,Nn=0,zn=0,Sn=0,kn=0,On=0,Wn=0,_r=0,Un=0,zr=0,ii=0;if(ii=Ee,Ee=Ee+112|0,Wn=ii+80|0,Q=ii+72|0,_r=ii,Un=ii+56|0,v|0)return zr=15,Ee=ii,zr|0;if(te=m+8|0,zr=_((o[te>>2]<<5)+32|0)|0,!zr)return zr=13,Ee=ii,zr|0;if(du(m,zr),kn=m,On=o[kn+4>>2]|0,v=Q,o[v>>2]=o[kn>>2],o[v+4>>2]=On,So(Q,Wn),v=sc(Wn,g,_r)|0,v)kn=0,On=0;else{if(v=o[Q>>2]|0,R=o[te>>2]|0,(R|0)>0){O=o[m+12>>2]|0,I=0;do v=(o[O+(I<<3)>>2]|0)+v|0,I=I+1|0;while((I|0)!=(R|0));I=v}else I=v;v=_r,R=o[v>>2]|0,v=o[v+4>>2]|0,O=((I|0)<0)<<31>>31,(v|0)<(O|0)|(v|0)==(O|0)&R>>>0<I>>>0?(v=_r,o[v>>2]=I,o[v+4>>2]=O,v=O):I=R,kn=d(I|0,v|0,12,0)|0,On=Ce()|0,v=_r,o[v>>2]=kn,o[v+4>>2]=On,v=0}if(v|0)return l(zr),zr=v,Ee=ii,zr|0;if(I=h(kn,8)|0,!I)return l(zr),zr=13,Ee=ii,zr|0;if(N=h(kn,8)|0,!N)return l(zr),l(I),zr=13,Ee=ii,zr|0;zn=Wn,o[zn>>2]=0,o[zn+4>>2]=0,zn=m,Sn=o[zn+4>>2]|0,v=Q,o[v>>2]=o[zn>>2],o[v+4>>2]=Sn,v=Hn(Q,kn,On,g,Wn,I,N)|0;e:do if(v)l(I),l(N),l(zr);else{t:do if((o[te>>2]|0)>0){for(O=m+12|0,R=0;v=Hn((o[O>>2]|0)+(R<<3)|0,kn,On,g,Wn,I,N)|0,R=R+1|0,!(v|0);)if((R|0)>=(o[te>>2]|0))break t;l(I),l(N),l(zr);break e}while(0);(On|0)>0|(On|0)==0&kn>>>0>0&&Me(N|0,0,kn<<3|0)|0,Sn=Wn,zn=o[Sn+4>>2]|0;t:do if((zn|0)>0|(zn|0)==0&(o[Sn>>2]|0)>>>0>0){mt=I,Et=N,Nn=I,zn=N,Sn=I,v=I,Je=I,Ht=N,Ft=N,I=N;n:for(;;){for(dt=0,ct=0,it=0,st=0,R=0,O=0;;){N=_r,Q=N+56|0;do o[N>>2]=0,N=N+4|0;while((N|0)<(Q|0));if(g=mt+(dt<<3)|0,te=o[g>>2]|0,g=o[g+4>>2]|0,me(te,g,1,_r,0)|0){N=_r,Q=N+56|0;do o[N>>2]=0,N=N+4|0;while((N|0)<(Q|0));N=h(7,4)|0,N|0&&(Se(te,g,1,_r,N,7,0,0)|0,l(N))}for(Xe=0;;){ze=_r+(Xe<<3)|0,He=o[ze>>2]|0,ze=o[ze+4>>2]|0;r:do if((He|0)==0&(ze|0)==0)N=R,Q=O;else{if(le=X(He|0,ze|0,kn|0,On|0)|0,te=Ce()|0,N=E+(le<<3)|0,g=N,Q=o[g>>2]|0,g=o[g+4>>2]|0,!((Q|0)==0&(g|0)==0)){pe=0,Be=0;do{if((pe|0)>(On|0)|(pe|0)==(On|0)&Be>>>0>kn>>>0)break n;if((Q|0)==(He|0)&(g|0)==(ze|0)){N=R,Q=O;break r}N=d(le|0,te|0,1,0)|0,le=$(N|0,Ce()|0,kn|0,On|0)|0,te=Ce()|0,Be=d(Be|0,pe|0,1,0)|0,pe=Ce()|0,N=E+(le<<3)|0,g=N,Q=o[g>>2]|0,g=o[g+4>>2]|0}while(!((Q|0)==0&(g|0)==0))}(He|0)==0&(ze|0)==0?(N=R,Q=O):(Eo(He,ze,Un)|0,ba(m,zr,Un)|0&&(Be=d(R|0,O|0,1,0)|0,O=Ce()|0,pe=N,o[pe>>2]=He,o[pe+4>>2]=ze,R=Et+(R<<3)|0,o[R>>2]=He,o[R+4>>2]=ze,R=Be),N=R,Q=O)}while(0);if(Xe=Xe+1|0,Xe>>>0>=7)break;R=N,O=Q}if(dt=d(dt|0,ct|0,1,0)|0,ct=Ce()|0,it=d(it|0,st|0,1,0)|0,st=Ce()|0,O=Wn,R=o[O>>2]|0,O=o[O+4>>2]|0,(st|0)<(O|0)|(st|0)==(O|0)&it>>>0<R>>>0)R=N,O=Q;else break}if((O|0)>0|(O|0)==0&R>>>0>0){R=0,O=0;do st=mt+(R<<3)|0,o[st>>2]=0,o[st+4>>2]=0,R=d(R|0,O|0,1,0)|0,O=Ce()|0,st=Wn,it=o[st+4>>2]|0;while((O|0)<(it|0)|((O|0)==(it|0)?R>>>0<(o[st>>2]|0)>>>0:0))}if(st=Wn,o[st>>2]=N,o[st+4>>2]=Q,(Q|0)>0|(Q|0)==0&N>>>0>0)Xe=I,dt=Ft,ct=Sn,it=Ht,st=Et,I=Je,Ft=v,Ht=Nn,Je=Xe,v=dt,Sn=zn,zn=ct,Nn=it,Et=mt,mt=st;else break t}l(Nn),l(zn),l(zr),v=1;break e}else v=N;while(0);l(zr),l(I),l(v),v=0}while(0);return zr=v,Ee=ii,zr|0}function An(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0;if(le=Ee,Ee=Ee+176|0,Q=le,(g|0)<1)return Ys(v,0,0),te=0,Ee=le,te|0;for(N=m,N=ne(o[N>>2]|0,o[N+4>>2]|0,52)|0,Ce()|0,Ys(v,(g|0)>6?g:6,N&15),N=0;E=m+(N<<3)|0,E=Mi(o[E>>2]|0,o[E+4>>2]|0,Q)|0,!(E|0);){if(E=o[Q>>2]|0,(E|0)>0){O=0;do R=Q+8+(O<<4)|0,O=O+1|0,E=Q+8+(((O|0)%(E|0)|0)<<4)|0,I=Kr(v,E,R)|0,I?It(v,I)|0:Rt(v,R,E)|0,E=o[Q>>2]|0;while((O|0)<(E|0))}if(N=N+1|0,(N|0)>=(g|0)){E=0,te=13;break}}return(te|0)==13?(Ee=le,E|0):(Ds(v),te=E,Ee=le,te|0)}function jr(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0;if(R=Ee,Ee=Ee+32|0,E=R,I=R+16|0,m=An(m,g,I)|0,m|0)return v=m,Ee=R,v|0;if(o[v>>2]=0,o[v+4>>2]=0,o[v+8>>2]=0,m=Xs(I)|0,m|0)do{g=$t(v)|0;do bA(g,m)|0,O=m+16|0,o[E>>2]=o[O>>2],o[E+4>>2]=o[O+4>>2],o[E+8>>2]=o[O+8>>2],o[E+12>>2]=o[O+12>>2],It(I,m)|0,m=rl(I,E)|0;while(m|0);m=Xs(I)|0}while(m|0);return Ds(I),m=EA(v)|0,m?(Ol(v),O=m,Ee=R,O|0):(O=0,Ee=R,O|0)}function tr(m){return m=m|0,m>>>0>121?(m=0,m|0):(m=o[7696+(m*28|0)+16>>2]|0,m|0)}function fA(m){return m=m|0,(m|0)==4|(m|0)==117|0}function dA(m){return m=m|0,o[11120+((o[m>>2]|0)*216|0)+((o[m+4>>2]|0)*72|0)+((o[m+8>>2]|0)*24|0)+(o[m+12>>2]<<3)>>2]|0}function pA(m){return m=m|0,o[11120+((o[m>>2]|0)*216|0)+((o[m+4>>2]|0)*72|0)+((o[m+8>>2]|0)*24|0)+(o[m+12>>2]<<3)+4>>2]|0}function YA(m,g){m=m|0,g=g|0,m=7696+(m*28|0)|0,o[g>>2]=o[m>>2],o[g+4>>2]=o[m+4>>2],o[g+8>>2]=o[m+8>>2],o[g+12>>2]=o[m+12>>2]}function XA(m,g){m=m|0,g=g|0;var v=0,E=0;if(g>>>0>20)return g=-1,g|0;do if((o[11120+(g*216|0)>>2]|0)!=(m|0))if((o[11120+(g*216|0)+8>>2]|0)!=(m|0))if((o[11120+(g*216|0)+16>>2]|0)!=(m|0))if((o[11120+(g*216|0)+24>>2]|0)!=(m|0))if((o[11120+(g*216|0)+32>>2]|0)!=(m|0))if((o[11120+(g*216|0)+40>>2]|0)!=(m|0))if((o[11120+(g*216|0)+48>>2]|0)!=(m|0))if((o[11120+(g*216|0)+56>>2]|0)!=(m|0))if((o[11120+(g*216|0)+64>>2]|0)!=(m|0))if((o[11120+(g*216|0)+72>>2]|0)!=(m|0))if((o[11120+(g*216|0)+80>>2]|0)!=(m|0))if((o[11120+(g*216|0)+88>>2]|0)!=(m|0))if((o[11120+(g*216|0)+96>>2]|0)!=(m|0))if((o[11120+(g*216|0)+104>>2]|0)!=(m|0))if((o[11120+(g*216|0)+112>>2]|0)!=(m|0))if((o[11120+(g*216|0)+120>>2]|0)!=(m|0))if((o[11120+(g*216|0)+128>>2]|0)!=(m|0))if((o[11120+(g*216|0)+136>>2]|0)==(m|0))m=2,v=1,E=2;else{if((o[11120+(g*216|0)+144>>2]|0)==(m|0)){m=0,v=2,E=0;break}if((o[11120+(g*216|0)+152>>2]|0)==(m|0)){m=0,v=2,E=1;break}if((o[11120+(g*216|0)+160>>2]|0)==(m|0)){m=0,v=2,E=2;break}if((o[11120+(g*216|0)+168>>2]|0)==(m|0)){m=1,v=2,E=0;break}if((o[11120+(g*216|0)+176>>2]|0)==(m|0)){m=1,v=2,E=1;break}if((o[11120+(g*216|0)+184>>2]|0)==(m|0)){m=1,v=2,E=2;break}if((o[11120+(g*216|0)+192>>2]|0)==(m|0)){m=2,v=2,E=0;break}if((o[11120+(g*216|0)+200>>2]|0)==(m|0)){m=2,v=2,E=1;break}if((o[11120+(g*216|0)+208>>2]|0)==(m|0)){m=2,v=2,E=2;break}else m=-1;return m|0}else m=2,v=1,E=1;else m=2,v=1,E=0;else m=1,v=1,E=2;else m=1,v=1,E=1;else m=1,v=1,E=0;else m=0,v=1,E=2;else m=0,v=1,E=1;else m=0,v=1,E=0;else m=2,v=0,E=2;else m=2,v=0,E=1;else m=2,v=0,E=0;else m=1,v=0,E=2;else m=1,v=0,E=1;else m=1,v=0,E=0;else m=0,v=0,E=2;else m=0,v=0,E=1;else m=0,v=0,E=0;while(0);return g=o[11120+(g*216|0)+(v*72|0)+(m*24|0)+(E<<3)+4>>2]|0,g|0}function gA(m,g){return m=m|0,g=g|0,(o[7696+(m*28|0)+20>>2]|0)==(g|0)?(g=1,g|0):(g=(o[7696+(m*28|0)+24>>2]|0)==(g|0),g|0)}function bl(m,g){return m=m|0,g=g|0,o[848+(m*28|0)+(g<<2)>>2]|0}function El(m,g){return m=m|0,g=g|0,(o[848+(m*28|0)>>2]|0)==(g|0)?(g=0,g|0):(o[848+(m*28|0)+4>>2]|0)==(g|0)?(g=1,g|0):(o[848+(m*28|0)+8>>2]|0)==(g|0)?(g=2,g|0):(o[848+(m*28|0)+12>>2]|0)==(g|0)?(g=3,g|0):(o[848+(m*28|0)+16>>2]|0)==(g|0)?(g=4,g|0):(o[848+(m*28|0)+20>>2]|0)==(g|0)?(g=5,g|0):((o[848+(m*28|0)+24>>2]|0)==(g|0)?6:7)|0}function mA(){return 122}function yA(m){m=m|0;var g=0,v=0,E=0;g=0;do ue(g|0,0,45)|0,E=Ce()|0|134225919,v=m+(g<<3)|0,o[v>>2]=-1,o[v+4>>2]=E,g=g+1|0;while((g|0)!=122);return 0}function ur(m){return m=m|0,+G[m+16>>3]<+G[m+24>>3]|0}function KA(m,g){m=m|0,g=g|0;var v=0,E=0,I=0;return v=+G[g>>3],!(v>=+G[m+8>>3])||!(v<=+G[m>>3])?(g=0,g|0):(E=+G[m+16>>3],v=+G[m+24>>3],I=+G[g+8>>3],g=I>=v,m=I<=E&1,E<v?g&&(m=1):g||(m=0),g=(m|0)!=0,g|0)}function sc(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0;ze=Ee,Ee=Ee+288|0,le=ze+264|0,pe=ze+96|0,te=ze,N=te,Q=N+96|0;do o[N>>2]=0,N=N+4|0;while((N|0)<(Q|0));return g=Qs(g,te)|0,g|0?(He=g,Ee=ze,He|0):(Q=te,te=o[Q>>2]|0,Q=o[Q+4>>2]|0,Eo(te,Q,le)|0,Mi(te,Q,pe)|0,O=+Bl(le,pe+8|0),G[le>>3]=+G[m>>3],Q=le+8|0,G[Q>>3]=+G[m+16>>3],G[pe>>3]=+G[m+8>>3],te=pe+8|0,G[te>>3]=+G[m+24>>3],I=+Bl(le,pe),dt=+G[Q>>3]-+G[te>>3],R=+Le(+dt),Xe=+G[le>>3]-+G[pe>>3],E=+Le(+Xe),!(dt==0|Xe==0)&&(dt=+Te(+R,+E),dt=+nn(+(I*I/+Ie(+(dt/+Ie(+R,+E)),3)/(O*(O*2.59807621135)*.8))),G[De>>3]=dt,Be=~~dt>>>0,He=+Le(dt)>=1?dt>0?~~+Bn(+Pe(dt/4294967296),4294967295)>>>0:~~+nn((dt-+(~~dt>>>0))/4294967296)>>>0:0,(o[De+4>>2]&2146435072|0)!=2146435072)?(pe=(Be|0)==0&(He|0)==0,g=v,o[g>>2]=pe?1:Be,o[g+4>>2]=pe?0:He,g=0):g=1,He=g,Ee=ze,He|0)}function Tl(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0;te=Ee,Ee=Ee+288|0,O=te+264|0,N=te+96|0,Q=te,I=Q,R=I+96|0;do o[I>>2]=0,I=I+4|0;while((I|0)<(R|0));return v=Qs(v,Q)|0,v|0?(E=v,Ee=te,E|0):(v=Q,I=o[v>>2]|0,v=o[v+4>>2]|0,Eo(I,v,O)|0,Mi(I,v,N)|0,le=+Bl(O,N+8|0),le=+nn(+(+Bl(m,g)/(le*2))),G[De>>3]=le,v=~~le>>>0,I=+Le(le)>=1?le>0?~~+Bn(+Pe(le/4294967296),4294967295)>>>0:~~+nn((le-+(~~le>>>0))/4294967296)>>>0:0,(o[De+4>>2]&2146435072|0)==2146435072?(E=1,Ee=te,E|0):(Q=(v|0)==0&(I|0)==0,o[E>>2]=Q?1:v,o[E+4>>2]=Q?0:I,E=0,Ee=te,E|0))}function ni(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0,o[m>>2]=g,o[m+4>>2]=v,o[m+8>>2]=E}function $o(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0;pe=g+8|0,o[pe>>2]=0,Q=+G[m>>3],O=+Le(+Q),te=+G[m+8>>3],N=+Le(+te)/.8660254037844386,O=O+N*.5,v=~~O,m=~~N,O=O-+(v|0),N=N-+(m|0);do if(O<.5)if(O<.3333333333333333)if(o[g>>2]=v,N<(O+1)*.5){o[g+4>>2]=m;break}else{m=m+1|0,o[g+4>>2]=m;break}else if(Be=1-O,m=(!(N<Be)&1)+m|0,o[g+4>>2]=m,Be<=N&N<O*2){v=v+1|0,o[g>>2]=v;break}else{o[g>>2]=v;break}else{if(!(O<.6666666666666666))if(v=v+1|0,o[g>>2]=v,N<O*.5){o[g+4>>2]=m;break}else{m=m+1|0,o[g+4>>2]=m;break}if(N<1-O){if(o[g+4>>2]=m,O*2+-1<N){o[g>>2]=v;break}}else m=m+1|0,o[g+4>>2]=m;v=v+1|0,o[g>>2]=v}while(0);do if(Q<0)if(m&1){le=(m+1|0)/2|0,le=x(v|0,((v|0)<0)<<31>>31|0,le|0,((le|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-((+(le>>>0)+4294967296*+(Ce()|0))*2+1)),o[g>>2]=v;break}else{le=(m|0)/2|0,le=x(v|0,((v|0)<0)<<31>>31|0,le|0,((le|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-(+(le>>>0)+4294967296*+(Ce()|0))*2),o[g>>2]=v;break}while(0);le=g+4|0,te<0&&(v=v-((m<<1|1|0)/2|0)|0,o[g>>2]=v,m=0-m|0,o[le>>2]=m),E=m-v|0,(v|0)<0?(I=0-v|0,o[le>>2]=E,o[pe>>2]=I,o[g>>2]=0,m=E,v=0):I=0,(m|0)<0&&(v=v-m|0,o[g>>2]=v,I=I-m|0,o[pe>>2]=I,o[le>>2]=0,m=0),R=v-I|0,E=m-I|0,(I|0)<0&&(o[g>>2]=R,o[le>>2]=E,o[pe>>2]=0,m=E,v=R,I=0),E=(m|0)<(v|0)?m:v,E=(I|0)<(E|0)?I:E,!((E|0)<=0)&&(o[g>>2]=v-E,o[le>>2]=m-E,o[pe>>2]=I-E)}function qn(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0;g=o[m>>2]|0,O=m+4|0,v=o[O>>2]|0,(g|0)<0&&(v=v-g|0,o[O>>2]=v,R=m+8|0,o[R>>2]=(o[R>>2]|0)-g,o[m>>2]=0,g=0),(v|0)<0?(g=g-v|0,o[m>>2]=g,R=m+8|0,I=(o[R>>2]|0)-v|0,o[R>>2]=I,o[O>>2]=0,v=0):(I=m+8|0,R=I,I=o[I>>2]|0),(I|0)<0&&(g=g-I|0,o[m>>2]=g,v=v-I|0,o[O>>2]=v,o[R>>2]=0,I=0),E=(v|0)<(g|0)?v:g,E=(I|0)<(E|0)?I:E,!((E|0)<=0)&&(o[m>>2]=g-E,o[O>>2]=v-E,o[R>>2]=I-E)}function ks(m,g){m=m|0,g=g|0;var v=0,E=0;E=o[m+8>>2]|0,v=+((o[m+4>>2]|0)-E|0),G[g>>3]=+((o[m>>2]|0)-E|0)-v*.5,G[g+8>>3]=v*.8660254037844386}function ci(m,g,v){m=m|0,g=g|0,v=v|0,o[v>>2]=(o[g>>2]|0)+(o[m>>2]|0),o[v+4>>2]=(o[g+4>>2]|0)+(o[m+4>>2]|0),o[v+8>>2]=(o[g+8>>2]|0)+(o[m+8>>2]|0)}function vo(m,g,v){m=m|0,g=g|0,v=v|0,o[v>>2]=(o[m>>2]|0)-(o[g>>2]|0),o[v+4>>2]=(o[m+4>>2]|0)-(o[g+4>>2]|0),o[v+8>>2]=(o[m+8>>2]|0)-(o[g+8>>2]|0)}function Sl(m,g){m=m|0,g=g|0;var v=0,E=0;v=pn(o[m>>2]|0,g)|0,o[m>>2]=v,v=m+4|0,E=pn(o[v>>2]|0,g)|0,o[v>>2]=E,m=m+8|0,g=pn(o[m>>2]|0,g)|0,o[m>>2]=g}function Ho(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;O=o[m>>2]|0,N=(O|0)<0,E=(o[m+4>>2]|0)-(N?O:0)|0,R=(E|0)<0,I=(R?0-E|0:0)+((o[m+8>>2]|0)-(N?O:0))|0,v=(I|0)<0,m=v?0:I,g=(R?0:E)-(v?I:0)|0,I=(N?0:O)-(R?E:0)-(v?I:0)|0,v=(g|0)<(I|0)?g:I,v=(m|0)<(v|0)?m:v,E=(v|0)>0,m=m-(E?v:0)|0,g=g-(E?v:0)|0;e:do switch(I-(E?v:0)|0){case 0:switch(g|0){case 0:return N=m|0?(m|0)==1?1:7:0,N|0;case 1:return N=m|0?(m|0)==1?3:7:2,N|0;default:break e}case 1:switch(g|0){case 0:return N=m|0?(m|0)==1?5:7:4,N|0;case 1:{if(!m)m=6;else break e;return m|0}default:break e}}while(0);return N=7,N|0}function pa(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;O=m+8|0,I=o[O>>2]|0,R=(o[m>>2]|0)-I|0,N=m+4|0,I=(o[N>>2]|0)-I|0;do if(R>>>0>715827881|I>>>0>715827881){if(v=(R|0)>0,v){if((2147483647-R|0)<(R|0)||(2147483647-(R<<1)|0)<(R|0))return N=1,N|0}else if((-2147483648-R|0)>(R|0)||(-2147483648-(R<<1)|0)>(R|0))return N=1,N|0;if(g=R*3|0,(I|0)>0){if((2147483647-I|0)<(I|0))return N=1,N|0}else if((-2147483648-I|0)>(I|0))return N=1,N|0;if(E=I<<1,(R|0)>-1){if((g|-2147483648|0)>=(I|0))return N=1,N|0}else if((g^-2147483648|0)<(I|0))return N=1,N|0;if(v){if((2147483647-R|0)<(E|0))g=1;else{v=E;break}return g|0}else{if((-2147483648-R|0)>(E|0))g=1;else{v=E;break}return g|0}}else v=I<<1,g=R*3|0;while(0);E=c(+(g-I|0)/7)|0,o[m>>2]=E,I=c(+(v+R|0)/7)|0,o[N>>2]=I,o[O>>2]=0,v=(I|0)<(E|0),g=v?E:I,v=v?I:E;do if((v|0)<0){if((g|0)>0){if((g|-2147483648|0)<(v|0)&((v|0)!=-2147483648&(2147483647-g|0)>=(v|0)))break;_n(23313,22444,355,22455)}if((v|0)==-2147483648|(-2147483648-g|0)>(v|0)&&_n(23313,22444,355,22455),(g|0)>-1){if((g|-2147483648|0)<(v|0))break;_n(23313,22444,355,22455)}else{if((g^-2147483648|0)>=(v|0))break;_n(23313,22444,355,22455)}}while(0);return g=I-E|0,(E|0)<0?(v=0-E|0,o[N>>2]=g,o[O>>2]=v,o[m>>2]=0,E=0):(g=I,v=0),(g|0)<0&&(E=E-g|0,o[m>>2]=E,v=v-g|0,o[O>>2]=v,o[N>>2]=0,g=0),R=E-v|0,I=g-v|0,(v|0)<0?(o[m>>2]=R,o[N>>2]=I,o[O>>2]=0,g=I,I=R,v=0):I=E,E=(g|0)<(I|0)?g:I,E=(v|0)<(E|0)?v:E,(E|0)<=0?(N=0,N|0):(o[m>>2]=I-E,o[N>>2]=g-E,o[O>>2]=v-E,N=0,N|0)}function xo(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;O=m+8|0,I=o[O>>2]|0,R=(o[m>>2]|0)-I|0,N=m+4|0,I=(o[N>>2]|0)-I|0;do if(R>>>0>715827881|I>>>0>715827881){if(v=(R|0)>0,v){if((2147483647-R|0)<(R|0))return N=1,N|0}else if((-2147483648-R|0)>(R|0))return N=1,N|0;if(g=R<<1,(I|0)>0){if((2147483647-I|0)<(I|0)||(2147483647-(I<<1)|0)<(I|0))return N=1,N|0}else if((-2147483648-I|0)>(I|0)||(-2147483648-(I<<1)|0)>(I|0))return N=1,N|0;if(E=I*3|0,v){if((2147483647-g|0)<(I|0))return N=1,N|0}else if((-2147483648-g|0)>(I|0))return N=1,N|0;if((I|0)>-1){if((E|-2147483648|0)<(R|0)){v=E;break}else g=1;return g|0}else{if((E^-2147483648|0)<(R|0))g=1;else{v=E;break}return g|0}}else v=I*3|0,g=R<<1;while(0);E=c(+(g+I|0)/7)|0,o[m>>2]=E,I=c(+(v-R|0)/7)|0,o[N>>2]=I,o[O>>2]=0,v=(I|0)<(E|0),g=v?E:I,v=v?I:E;do if((v|0)<0){if((g|0)>0){if((g|-2147483648|0)<(v|0)&((v|0)!=-2147483648&(2147483647-g|0)>=(v|0)))break;_n(23313,22444,404,22469)}if((v|0)==-2147483648|(-2147483648-g|0)>(v|0)&&_n(23313,22444,404,22469),(g|0)>-1){if((g|-2147483648|0)<(v|0))break;_n(23313,22444,404,22469)}else{if((g^-2147483648|0)>=(v|0))break;_n(23313,22444,404,22469)}}while(0);return g=I-E|0,(E|0)<0?(v=0-E|0,o[N>>2]=g,o[O>>2]=v,o[m>>2]=0,E=0):(g=I,v=0),(g|0)<0&&(E=E-g|0,o[m>>2]=E,v=v-g|0,o[O>>2]=v,o[N>>2]=0,g=0),R=E-v|0,I=g-v|0,(v|0)<0?(o[m>>2]=R,o[N>>2]=I,o[O>>2]=0,g=I,I=R,v=0):I=E,E=(g|0)<(I|0)?g:I,E=(v|0)<(E|0)?v:E,(E|0)<=0?(N=0,N|0):(o[m>>2]=I-E,o[N>>2]=g-E,o[O>>2]=v-E,N=0,N|0)}function _A(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;O=m+8|0,v=o[O>>2]|0,g=(o[m>>2]|0)-v|0,N=m+4|0,v=(o[N>>2]|0)-v|0,E=c(+((g*3|0)-v|0)/7)|0,o[m>>2]=E,g=c(+((v<<1)+g|0)/7)|0,o[N>>2]=g,o[O>>2]=0,v=g-E|0,(E|0)<0?(R=0-E|0,o[N>>2]=v,o[O>>2]=R,o[m>>2]=0,g=v,E=0,v=R):v=0,(g|0)<0&&(E=E-g|0,o[m>>2]=E,v=v-g|0,o[O>>2]=v,o[N>>2]=0,g=0),R=E-v|0,I=g-v|0,(v|0)<0?(o[m>>2]=R,o[N>>2]=I,o[O>>2]=0,g=I,I=R,v=0):I=E,E=(g|0)<(I|0)?g:I,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(o[m>>2]=I-E,o[N>>2]=g-E,o[O>>2]=v-E)}function Wa(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;O=m+8|0,v=o[O>>2]|0,g=(o[m>>2]|0)-v|0,N=m+4|0,v=(o[N>>2]|0)-v|0,E=c(+((g<<1)+v|0)/7)|0,o[m>>2]=E,g=c(+((v*3|0)-g|0)/7)|0,o[N>>2]=g,o[O>>2]=0,v=g-E|0,(E|0)<0?(R=0-E|0,o[N>>2]=v,o[O>>2]=R,o[m>>2]=0,g=v,E=0,v=R):v=0,(g|0)<0&&(E=E-g|0,o[m>>2]=E,v=v-g|0,o[O>>2]=v,o[N>>2]=0,g=0),R=E-v|0,I=g-v|0,(v|0)<0?(o[m>>2]=R,o[N>>2]=I,o[O>>2]=0,g=I,I=R,v=0):I=E,E=(g|0)<(I|0)?g:I,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(o[m>>2]=I-E,o[N>>2]=g-E,o[O>>2]=v-E)}function Wo(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;g=o[m>>2]|0,O=m+4|0,v=o[O>>2]|0,N=m+8|0,E=o[N>>2]|0,I=v+(g*3|0)|0,o[m>>2]=I,v=E+(v*3|0)|0,o[O>>2]=v,g=(E*3|0)+g|0,o[N>>2]=g,E=v-I|0,(I|0)<0?(g=g-I|0,o[O>>2]=E,o[N>>2]=g,o[m>>2]=0,v=E,E=0):E=I,(v|0)<0&&(E=E-v|0,o[m>>2]=E,g=g-v|0,o[N>>2]=g,o[O>>2]=0,v=0),R=E-g|0,I=v-g|0,(g|0)<0?(o[m>>2]=R,o[O>>2]=I,o[N>>2]=0,E=R,g=0):I=v,v=(I|0)<(E|0)?I:E,v=(g|0)<(v|0)?g:v,!((v|0)<=0)&&(o[m>>2]=E-v,o[O>>2]=I-v,o[N>>2]=g-v)}function Ki(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;I=o[m>>2]|0,O=m+4|0,g=o[O>>2]|0,N=m+8|0,v=o[N>>2]|0,E=(g*3|0)+I|0,I=v+(I*3|0)|0,o[m>>2]=I,o[O>>2]=E,g=(v*3|0)+g|0,o[N>>2]=g,v=E-I|0,(I|0)<0?(g=g-I|0,o[O>>2]=v,o[N>>2]=g,o[m>>2]=0,I=0):v=E,(v|0)<0&&(I=I-v|0,o[m>>2]=I,g=g-v|0,o[N>>2]=g,o[O>>2]=0,v=0),R=I-g|0,E=v-g|0,(g|0)<0?(o[m>>2]=R,o[O>>2]=E,o[N>>2]=0,I=R,g=0):E=v,v=(E|0)<(I|0)?E:I,v=(g|0)<(v|0)?g:v,!((v|0)<=0)&&(o[m>>2]=I-v,o[O>>2]=E-v,o[N>>2]=g-v)}function Ji(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0;(g+-1|0)>>>0>=6||(I=(o[15440+(g*12|0)>>2]|0)+(o[m>>2]|0)|0,o[m>>2]=I,N=m+4|0,E=(o[15440+(g*12|0)+4>>2]|0)+(o[N>>2]|0)|0,o[N>>2]=E,O=m+8|0,g=(o[15440+(g*12|0)+8>>2]|0)+(o[O>>2]|0)|0,o[O>>2]=g,v=E-I|0,(I|0)<0?(g=g-I|0,o[N>>2]=v,o[O>>2]=g,o[m>>2]=0,E=0):(v=E,E=I),(v|0)<0&&(E=E-v|0,o[m>>2]=E,g=g-v|0,o[O>>2]=g,o[N>>2]=0,v=0),R=E-g|0,I=v-g|0,(g|0)<0?(o[m>>2]=R,o[N>>2]=I,o[O>>2]=0,E=R,g=0):I=v,v=(I|0)<(E|0)?I:E,v=(g|0)<(v|0)?g:v,!((v|0)<=0)&&(o[m>>2]=E-v,o[N>>2]=I-v,o[O>>2]=g-v))}function JA(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;I=o[m>>2]|0,O=m+4|0,g=o[O>>2]|0,N=m+8|0,v=o[N>>2]|0,E=g+I|0,I=v+I|0,o[m>>2]=I,o[O>>2]=E,g=v+g|0,o[N>>2]=g,v=E-I|0,(I|0)<0?(g=g-I|0,o[O>>2]=v,o[N>>2]=g,o[m>>2]=0,E=0):(v=E,E=I),(v|0)<0&&(E=E-v|0,o[m>>2]=E,g=g-v|0,o[N>>2]=g,o[O>>2]=0,v=0),R=E-g|0,I=v-g|0,(g|0)<0?(o[m>>2]=R,o[O>>2]=I,o[N>>2]=0,E=R,g=0):I=v,v=(I|0)<(E|0)?I:E,v=(g|0)<(v|0)?g:v,!((v|0)<=0)&&(o[m>>2]=E-v,o[O>>2]=I-v,o[N>>2]=g-v)}function Ml(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;g=o[m>>2]|0,O=m+4|0,E=o[O>>2]|0,N=m+8|0,v=o[N>>2]|0,I=E+g|0,o[m>>2]=I,E=v+E|0,o[O>>2]=E,g=v+g|0,o[N>>2]=g,v=E-I|0,(I|0)<0?(g=g-I|0,o[O>>2]=v,o[N>>2]=g,o[m>>2]=0,E=0):(v=E,E=I),(v|0)<0&&(E=E-v|0,o[m>>2]=E,g=g-v|0,o[N>>2]=g,o[O>>2]=0,v=0),R=E-g|0,I=v-g|0,(g|0)<0?(o[m>>2]=R,o[O>>2]=I,o[N>>2]=0,E=R,g=0):I=v,v=(I|0)<(E|0)?I:E,v=(g|0)<(v|0)?g:v,!((v|0)<=0)&&(o[m>>2]=E-v,o[O>>2]=I-v,o[N>>2]=g-v)}function wo(m){switch(m=m|0,m|0){case 1:{m=5;break}case 5:{m=4;break}case 4:{m=6;break}case 6:{m=2;break}case 2:{m=3;break}case 3:{m=1;break}}return m|0}function Qo(m){switch(m=m|0,m|0){case 1:{m=3;break}case 3:{m=2;break}case 2:{m=6;break}case 6:{m=4;break}case 4:{m=5;break}case 5:{m=1;break}}return m|0}function oc(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;g=o[m>>2]|0,O=m+4|0,v=o[O>>2]|0,N=m+8|0,E=o[N>>2]|0,I=v+(g<<1)|0,o[m>>2]=I,v=E+(v<<1)|0,o[O>>2]=v,g=(E<<1)+g|0,o[N>>2]=g,E=v-I|0,(I|0)<0?(g=g-I|0,o[O>>2]=E,o[N>>2]=g,o[m>>2]=0,v=E,E=0):E=I,(v|0)<0&&(E=E-v|0,o[m>>2]=E,g=g-v|0,o[N>>2]=g,o[O>>2]=0,v=0),R=E-g|0,I=v-g|0,(g|0)<0?(o[m>>2]=R,o[O>>2]=I,o[N>>2]=0,E=R,g=0):I=v,v=(I|0)<(E|0)?I:E,v=(g|0)<(v|0)?g:v,!((v|0)<=0)&&(o[m>>2]=E-v,o[O>>2]=I-v,o[N>>2]=g-v)}function eu(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;I=o[m>>2]|0,O=m+4|0,g=o[O>>2]|0,N=m+8|0,v=o[N>>2]|0,E=(g<<1)+I|0,I=v+(I<<1)|0,o[m>>2]=I,o[O>>2]=E,g=(v<<1)+g|0,o[N>>2]=g,v=E-I|0,(I|0)<0?(g=g-I|0,o[O>>2]=v,o[N>>2]=g,o[m>>2]=0,I=0):v=E,(v|0)<0&&(I=I-v|0,o[m>>2]=I,g=g-v|0,o[N>>2]=g,o[O>>2]=0,v=0),R=I-g|0,E=v-g|0,(g|0)<0?(o[m>>2]=R,o[O>>2]=E,o[N>>2]=0,I=R,g=0):E=v,v=(E|0)<(I|0)?E:I,v=(g|0)<(v|0)?g:v,!((v|0)<=0)&&(o[m>>2]=I-v,o[O>>2]=E-v,o[N>>2]=g-v)}function Cl(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0;return O=(o[m>>2]|0)-(o[g>>2]|0)|0,N=(O|0)<0,E=(o[m+4>>2]|0)-(o[g+4>>2]|0)-(N?O:0)|0,R=(E|0)<0,I=(N?0-O|0:0)+(o[m+8>>2]|0)-(o[g+8>>2]|0)+(R?0-E|0:0)|0,m=(I|0)<0,g=m?0:I,v=(R?0:E)-(m?I:0)|0,I=(N?0:O)-(R?E:0)-(m?I:0)|0,m=(v|0)<(I|0)?v:I,m=(g|0)<(m|0)?g:m,E=(m|0)>0,g=g-(E?m:0)|0,v=v-(E?m:0)|0,m=I-(E?m:0)|0,m=(m|0)>-1?m:0-m|0,v=(v|0)>-1?v:0-v|0,g=(g|0)>-1?g:0-g|0,g=(v|0)>(g|0)?v:g,((m|0)>(g|0)?m:g)|0}function vA(m,g){m=m|0,g=g|0;var v=0;v=o[m+8>>2]|0,o[g>>2]=(o[m>>2]|0)-v,o[g+4>>2]=(o[m+4>>2]|0)-v}function tu(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0;E=o[m>>2]|0,o[g>>2]=E,I=o[m+4>>2]|0,O=g+4|0,o[O>>2]=I,N=g+8|0,o[N>>2]=0,v=(I|0)<(E|0),m=v?E:I,v=v?I:E;do if((v|0)<0){if((m|0)>0){if((m|-2147483648|0)<(v|0)&((v|0)!=-2147483648&(2147483647-m|0)>=(v|0)))break;return m=1,m|0}if((v|0)==-2147483648|(-2147483648-m|0)>(v|0))return g=1,g|0;if((m|0)>-1){if((m|-2147483648|0)<(v|0))break;return m=1,m|0}else{if((m^-2147483648|0)<(v|0))m=1;else break;return m|0}}while(0);return m=I-E|0,(E|0)<0?(v=0-E|0,o[O>>2]=m,o[N>>2]=v,o[g>>2]=0,E=0):(m=I,v=0),(m|0)<0&&(E=E-m|0,o[g>>2]=E,v=v-m|0,o[N>>2]=v,o[O>>2]=0,m=0),R=E-v|0,I=m-v|0,(v|0)<0?(o[g>>2]=R,o[O>>2]=I,o[N>>2]=0,m=I,I=R,v=0):I=E,E=(m|0)<(I|0)?m:I,E=(v|0)<(E|0)?v:E,(E|0)<=0?(g=0,g|0):(o[g>>2]=I-E,o[O>>2]=m-E,o[N>>2]=v-E,g=0,g|0)}function qo(m){m=m|0;var g=0,v=0,E=0,I=0;g=m+8|0,I=o[g>>2]|0,v=I-(o[m>>2]|0)|0,o[m>>2]=v,E=m+4|0,m=(o[E>>2]|0)-I|0,o[E>>2]=m,o[g>>2]=0-(m+v)}function Qa(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;v=o[m>>2]|0,g=0-v|0,o[m>>2]=g,O=m+8|0,o[O>>2]=0,N=m+4|0,E=o[N>>2]|0,I=E+v|0,(v|0)>0?(o[N>>2]=I,o[O>>2]=v,o[m>>2]=0,g=0,E=I):v=0,(E|0)<0?(R=g-E|0,o[m>>2]=R,v=v-E|0,o[O>>2]=v,o[N>>2]=0,I=R-v|0,g=0-v|0,(v|0)<0?(o[m>>2]=I,o[N>>2]=g,o[O>>2]=0,E=g,v=0):(E=0,I=R)):I=g,g=(E|0)<(I|0)?E:I,g=(v|0)<(g|0)?v:g,!((g|0)<=0)&&(o[m>>2]=I-g,o[N>>2]=E-g,o[O>>2]=v-g)}function nu(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0;if(pe=Ee,Ee=Ee+64|0,le=pe,N=pe+56|0,!(!0&(g&2013265920|0)==134217728&(!0&(E&2013265920|0)==134217728)))return I=5,Ee=pe,I|0;if((m|0)==(v|0)&(g|0)==(E|0))return o[I>>2]=0,I=0,Ee=pe,I|0;if(O=ne(m|0,g|0,52)|0,Ce()|0,O=O&15,te=ne(v|0,E|0,52)|0,Ce()|0,(O|0)!=(te&15|0))return I=12,Ee=pe,I|0;if(R=O+-1|0,O>>>0>1){kl(m,g,R,le)|0,kl(v,E,R,N)|0,te=le,Q=o[te>>2]|0,te=o[te+4>>2]|0;e:do if((Q|0)==(o[N>>2]|0)&&(te|0)==(o[N+4>>2]|0)){O=(O^15)*3|0,R=ne(m|0,g|0,O|0)|0,Ce()|0,R=R&7,O=ne(v|0,E|0,O|0)|0,Ce()|0,O=O&7;do if((R|0)==0|(O|0)==0)o[I>>2]=1,R=0;else if((R|0)==7)R=5;else{if((R|0)==1|(O|0)==1&&Cr(Q,te)|0){R=5;break}if((o[15536+(R<<2)>>2]|0)!=(O|0)&&(o[15568+(R<<2)>>2]|0)!=(O|0))break e;o[I>>2]=1,R=0}while(0);return I=R,Ee=pe,I|0}while(0)}R=le,O=R+56|0;do o[R>>2]=0,R=R+4|0;while((R|0)<(O|0));return da(m,g,1,le)|0,g=le,!((o[g>>2]|0)==(v|0)&&(o[g+4>>2]|0)==(E|0))&&(g=le+8|0,!((o[g>>2]|0)==(v|0)&&(o[g+4>>2]|0)==(E|0)))&&(g=le+16|0,!((o[g>>2]|0)==(v|0)&&(o[g+4>>2]|0)==(E|0)))&&(g=le+24|0,!((o[g>>2]|0)==(v|0)&&(o[g+4>>2]|0)==(E|0)))&&(g=le+32|0,!((o[g>>2]|0)==(v|0)&&(o[g+4>>2]|0)==(E|0)))&&(g=le+40|0,!((o[g>>2]|0)==(v|0)&&(o[g+4>>2]|0)==(E|0)))?(R=le+48|0,R=((o[R>>2]|0)==(v|0)?(o[R+4>>2]|0)==(E|0):0)&1):R=1,o[I>>2]=R,I=0,Ee=pe,I|0}function ru(m,g,v,E,I){return m=m|0,g=g|0,v=v|0,E=E|0,I=I|0,v=At(m,g,v,E)|0,(v|0)==7?(I=11,I|0):(E=ue(v|0,0,56)|0,g=g&-2130706433|(Ce()|0)|268435456,o[I>>2]=m|E,o[I+4>>2]=g,I=0,I|0)}function bo(m,g,v){return m=m|0,g=g|0,v=v|0,!0&(g&2013265920|0)==268435456?(o[v>>2]=m,o[v+4>>2]=g&-2130706433|134217728,v=0,v|0):(v=6,v|0)}function ga(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;return I=Ee,Ee=Ee+16|0,E=I,o[E>>2]=0,!0&(g&2013265920|0)==268435456?(R=ne(m|0,g|0,56)|0,Ce()|0,E=Ve(m,g&-2130706433|134217728,R&7,E,v)|0,Ee=I,E|0):(E=6,Ee=I,E|0)}function iu(m,g){m=m|0,g=g|0;var v=0;switch(v=ne(m|0,g|0,56)|0,Ce()|0,v&7){case 0:case 7:return v=0,v|0}return v=g&-2130706433|134217728,!(!0&(g&2013265920|0)==268435456)||!0&(g&117440512|0)==16777216&(Cr(m,v)|0)!=0?(v=0,v|0):(v=ya(m,v)|0,v|0)}function ma(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0;return I=Ee,Ee=Ee+16|0,E=I,!0&(g&2013265920|0)==268435456?(R=g&-2130706433|134217728,O=v,o[O>>2]=m,o[O+4>>2]=R,o[E>>2]=0,g=ne(m|0,g|0,56)|0,Ce()|0,E=Ve(m,R,g&7,E,v+8|0)|0,Ee=I,E|0):(E=6,Ee=I,E|0)}function Tr(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0;return I=(Cr(m,g)|0)==0,g=g&-2130706433,E=v,o[E>>2]=I?m:0,o[E+4>>2]=I?g|285212672:0,E=v+8|0,o[E>>2]=m,o[E+4>>2]=g|301989888,E=v+16|0,o[E>>2]=m,o[E+4>>2]=g|318767104,E=v+24|0,o[E>>2]=m,o[E+4>>2]=g|335544320,E=v+32|0,o[E>>2]=m,o[E+4>>2]=g|352321536,v=v+40|0,o[v>>2]=m,o[v+4>>2]=g|369098752,0}function $s(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0;return O=Ee,Ee=Ee+16|0,I=O,R=g&-2130706433|134217728,!0&(g&2013265920|0)==268435456?(E=ne(m|0,g|0,56)|0,Ce()|0,E=sn(m,R,E&7)|0,(E|0)==-1?(o[v>>2]=0,R=6,Ee=O,R|0):(ss(m,R,I)|0&&_n(23313,22484,282,22499),g=ne(m|0,g|0,52)|0,Ce()|0,g=g&15,Cr(m,R)|0?Zo(I,g,E,2,v):su(I,g,E,2,v),R=0,Ee=O,R|0)):(R=6,Ee=O,R|0)}function nr(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0;E=Ee,Ee=Ee+16|0,I=E,or(m,g,v,I),$o(I,v+4|0),Ee=E}function or(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0;if(N=Ee,Ee=Ee+16|0,Q=N,Br(m,v,Q),R=+wt(+(1-+G[Q>>3]*.5)),R<1e-16){o[E>>2]=0,o[E+4>>2]=0,o[E+8>>2]=0,o[E+12>>2]=0,Ee=N;return}if(Q=o[v>>2]|0,I=+G[15920+(Q*24|0)>>3],I=+fi(I-+fi(+hc(15600+(Q<<4)|0,m))),zi(g)|0?O=+fi(I+-.3334731722518321):O=I,I=+vt(+R)/.381966011250105,(g|0)>0){m=0;do I=I*2.6457513110645907,m=m+1|0;while((m|0)!=(g|0))}R=+Qe(+O)*I,G[E>>3]=R,O=+ft(+O)*I,G[E+8>>3]=O,Ee=N}function Br(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;if(R=Ee,Ee=Ee+32|0,I=R,Ul(m,I),o[g>>2]=0,G[v>>3]=5,E=+Pr(16400,I),E<+G[v>>3]&&(o[g>>2]=0,G[v>>3]=E),E=+Pr(16424,I),E<+G[v>>3]&&(o[g>>2]=1,G[v>>3]=E),E=+Pr(16448,I),E<+G[v>>3]&&(o[g>>2]=2,G[v>>3]=E),E=+Pr(16472,I),E<+G[v>>3]&&(o[g>>2]=3,G[v>>3]=E),E=+Pr(16496,I),E<+G[v>>3]&&(o[g>>2]=4,G[v>>3]=E),E=+Pr(16520,I),E<+G[v>>3]&&(o[g>>2]=5,G[v>>3]=E),E=+Pr(16544,I),E<+G[v>>3]&&(o[g>>2]=6,G[v>>3]=E),E=+Pr(16568,I),E<+G[v>>3]&&(o[g>>2]=7,G[v>>3]=E),E=+Pr(16592,I),E<+G[v>>3]&&(o[g>>2]=8,G[v>>3]=E),E=+Pr(16616,I),E<+G[v>>3]&&(o[g>>2]=9,G[v>>3]=E),E=+Pr(16640,I),E<+G[v>>3]&&(o[g>>2]=10,G[v>>3]=E),E=+Pr(16664,I),E<+G[v>>3]&&(o[g>>2]=11,G[v>>3]=E),E=+Pr(16688,I),E<+G[v>>3]&&(o[g>>2]=12,G[v>>3]=E),E=+Pr(16712,I),E<+G[v>>3]&&(o[g>>2]=13,G[v>>3]=E),E=+Pr(16736,I),E<+G[v>>3]&&(o[g>>2]=14,G[v>>3]=E),E=+Pr(16760,I),E<+G[v>>3]&&(o[g>>2]=15,G[v>>3]=E),E=+Pr(16784,I),E<+G[v>>3]&&(o[g>>2]=16,G[v>>3]=E),E=+Pr(16808,I),E<+G[v>>3]&&(o[g>>2]=17,G[v>>3]=E),E=+Pr(16832,I),E<+G[v>>3]&&(o[g>>2]=18,G[v>>3]=E),E=+Pr(16856,I),!(E<+G[v>>3])){Ee=R;return}o[g>>2]=19,G[v>>3]=E,Ee=R}function Mr(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0;if(R=+pc(m),R<1e-16){g=15600+(g<<4)|0,o[I>>2]=o[g>>2],o[I+4>>2]=o[g+4>>2],o[I+8>>2]=o[g+8>>2],o[I+12>>2]=o[g+12>>2];return}if(O=+xn(+ +G[m+8>>3],+ +G[m>>3]),(v|0)>0){m=0;do R=R/2.6457513110645907,m=m+1|0;while((m|0)!=(v|0))}E?(R=R/3,v=(zi(v)|0)==0,R=+Ut(+((v?R:R/2.6457513110645907)*.381966011250105))):(R=+Ut(+(R*.381966011250105)),zi(v)|0&&(O=+fi(O+.3334731722518321))),To(15600+(g<<4)|0,+fi(+G[15920+(g*24|0)>>3]-O),R,I)}function Pl(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0;E=Ee,Ee=Ee+16|0,I=E,ks(m+4|0,I),Mr(I,o[m>>2]|0,g,0,v),Ee=E}function Zo(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0,Et=0,Nn=0,zn=0,Sn=0,kn=0,On=0,Wn=0,_r=0,Un=0;if(Wn=Ee,Ee=Ee+272|0,R=Wn+256|0,it=Wn+240|0,Sn=Wn,kn=Wn+224|0,On=Wn+208|0,st=Wn+176|0,Je=Wn+160|0,Ht=Wn+192|0,Ft=Wn+144|0,mt=Wn+128|0,Et=Wn+112|0,Nn=Wn+96|0,zn=Wn+80|0,o[R>>2]=g,o[it>>2]=o[m>>2],o[it+4>>2]=o[m+4>>2],o[it+8>>2]=o[m+8>>2],o[it+12>>2]=o[m+12>>2],ac(it,R,Sn),o[I>>2]=0,it=E+v+((E|0)==5&1)|0,(it|0)<=(v|0)){Ee=Wn;return}Q=o[R>>2]|0,te=kn+4|0,le=st+4|0,pe=v+5|0,Be=16880+(Q<<2)|0,He=16960+(Q<<2)|0,ze=mt+8|0,Xe=Et+8|0,dt=Nn+8|0,ct=On+4|0,N=v;e:for(;;){O=Sn+(((N|0)%5|0)<<4)|0,o[On>>2]=o[O>>2],o[On+4>>2]=o[O+4>>2],o[On+8>>2]=o[O+8>>2],o[On+12>>2]=o[O+12>>2];do;while((qa(On,Q,0,1)|0)==2);if((N|0)>(v|0)&(zi(g)|0)!=0){if(o[st>>2]=o[On>>2],o[st+4>>2]=o[On+4>>2],o[st+8>>2]=o[On+8>>2],o[st+12>>2]=o[On+12>>2],ks(te,Je),E=o[st>>2]|0,R=o[17040+(E*80|0)+(o[kn>>2]<<2)>>2]|0,o[st>>2]=o[18640+(E*80|0)+(R*20|0)>>2],O=o[18640+(E*80|0)+(R*20|0)+16>>2]|0,(O|0)>0){m=0;do JA(le),m=m+1|0;while((m|0)<(O|0))}switch(O=18640+(E*80|0)+(R*20|0)+4|0,o[Ht>>2]=o[O>>2],o[Ht+4>>2]=o[O+4>>2],o[Ht+8>>2]=o[O+8>>2],Sl(Ht,(o[Be>>2]|0)*3|0),ci(le,Ht,le),qn(le),ks(le,Ft),_r=+(o[He>>2]|0),G[mt>>3]=_r*3,G[ze>>3]=0,Un=_r*-1.5,G[Et>>3]=Un,G[Xe>>3]=_r*2.598076211353316,G[Nn>>3]=Un,G[dt>>3]=_r*-2.598076211353316,o[17040+((o[st>>2]|0)*80|0)+(o[On>>2]<<2)>>2]|0){case 1:{m=Et,E=mt;break}case 3:{m=Nn,E=Et;break}case 2:{m=mt,E=Nn;break}default:{m=12;break e}}gu(Je,Ft,E,m,zn),Mr(zn,o[st>>2]|0,Q,1,I+8+(o[I>>2]<<4)|0),o[I>>2]=(o[I>>2]|0)+1}if((N|0)<(pe|0)&&(ks(ct,st),Mr(st,o[On>>2]|0,Q,1,I+8+(o[I>>2]<<4)|0),o[I>>2]=(o[I>>2]|0)+1),o[kn>>2]=o[On>>2],o[kn+4>>2]=o[On+4>>2],o[kn+8>>2]=o[On+8>>2],o[kn+12>>2]=o[On+12>>2],N=N+1|0,(N|0)>=(it|0)){m=3;break}}if((m|0)==3){Ee=Wn;return}else(m|0)==12&&_n(22522,22569,571,22579)}function ac(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0;Q=Ee,Ee=Ee+128|0,E=Q+64|0,I=Q,R=E,O=20240,N=R+60|0;do o[R>>2]=o[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(N|0));R=I,O=20304,N=R+60|0;do o[R>>2]=o[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(N|0));N=(zi(o[g>>2]|0)|0)==0,E=N?E:I,I=m+4|0,oc(I),eu(I),zi(o[g>>2]|0)|0&&(Ki(I),o[g>>2]=(o[g>>2]|0)+1),o[v>>2]=o[m>>2],g=v+4|0,ci(I,E,g),qn(g),o[v+16>>2]=o[m>>2],g=v+20|0,ci(I,E+12|0,g),qn(g),o[v+32>>2]=o[m>>2],g=v+36|0,ci(I,E+24|0,g),qn(g),o[v+48>>2]=o[m>>2],g=v+52|0,ci(I,E+36|0,g),qn(g),o[v+64>>2]=o[m>>2],v=v+68|0,ci(I,E+48|0,v),qn(v),Ee=Q}function qa(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0;if(ze=Ee,Ee=Ee+32|0,Be=ze+12|0,N=ze,He=m+4|0,pe=o[16960+(g<<2)>>2]|0,le=(E|0)!=0,pe=le?pe*3|0:pe,I=o[He>>2]|0,te=m+8|0,O=o[te>>2]|0,le){if(R=m+12|0,E=o[R>>2]|0,I=O+I+E|0,(I|0)==(pe|0))return He=1,Ee=ze,He|0;Q=R}else Q=m+12|0,E=o[Q>>2]|0,I=O+I+E|0;if((I|0)<=(pe|0))return He=0,Ee=ze,He|0;do if((E|0)>0){if(E=o[m>>2]|0,(O|0)>0){R=18640+(E*80|0)+60|0,E=m;break}E=18640+(E*80|0)+40|0,v?(ni(Be,pe,0,0),vo(He,Be,N),Ml(N),ci(N,Be,He),R=E,E=m):(R=E,E=m)}else R=18640+((o[m>>2]|0)*80|0)+20|0,E=m;while(0);if(o[E>>2]=o[R>>2],I=R+16|0,(o[I>>2]|0)>0){E=0;do JA(He),E=E+1|0;while((E|0)<(o[I>>2]|0))}return m=R+4|0,o[Be>>2]=o[m>>2],o[Be+4>>2]=o[m+4>>2],o[Be+8>>2]=o[m+8>>2],g=o[16880+(g<<2)>>2]|0,Sl(Be,le?g*3|0:g),ci(He,Be,He),qn(He),le?E=((o[te>>2]|0)+(o[He>>2]|0)+(o[Q>>2]|0)|0)==(pe|0)?1:2:E=2,He=E,Ee=ze,He|0}function lc(m,g){m=m|0,g=g|0;var v=0;do v=qa(m,g,0,1)|0;while((v|0)==2);return v|0}function su(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0,Et=0,Nn=0,zn=0,Sn=0;if(Nn=Ee,Ee=Ee+240|0,R=Nn+224|0,Ht=Nn+208|0,Ft=Nn,mt=Nn+192|0,Et=Nn+176|0,dt=Nn+160|0,ct=Nn+144|0,it=Nn+128|0,st=Nn+112|0,Je=Nn+96|0,o[R>>2]=g,o[Ht>>2]=o[m>>2],o[Ht+4>>2]=o[m+4>>2],o[Ht+8>>2]=o[m+8>>2],o[Ht+12>>2]=o[m+12>>2],Hs(Ht,R,Ft),o[I>>2]=0,Xe=E+v+((E|0)==6&1)|0,(Xe|0)<=(v|0)){Ee=Nn;return}Q=o[R>>2]|0,te=v+6|0,le=16960+(Q<<2)|0,pe=ct+8|0,Be=it+8|0,He=st+8|0,ze=mt+4|0,O=0,N=v,E=-1;e:for(;;){if(R=(N|0)%6|0,m=Ft+(R<<4)|0,o[mt>>2]=o[m>>2],o[mt+4>>2]=o[m+4>>2],o[mt+8>>2]=o[m+8>>2],o[mt+12>>2]=o[m+12>>2],m=O,O=qa(mt,Q,0,1)|0,(N|0)>(v|0)&(zi(g)|0)!=0&&(m|0)!=1&&(o[mt>>2]|0)!=(E|0)){switch(ks(Ft+(((R+5|0)%6|0)<<4)+4|0,Et),ks(Ft+(R<<4)+4|0,dt),zn=+(o[le>>2]|0),G[ct>>3]=zn*3,G[pe>>3]=0,Sn=zn*-1.5,G[it>>3]=Sn,G[Be>>3]=zn*2.598076211353316,G[st>>3]=Sn,G[He>>3]=zn*-2.598076211353316,R=o[Ht>>2]|0,o[17040+(R*80|0)+(((E|0)==(R|0)?o[mt>>2]|0:E)<<2)>>2]|0){case 1:{m=it,E=ct;break}case 3:{m=st,E=it;break}case 2:{m=ct,E=st;break}default:{m=8;break e}}gu(Et,dt,E,m,Je),!(gc(Et,Je)|0)&&!(gc(dt,Je)|0)&&(Mr(Je,o[Ht>>2]|0,Q,1,I+8+(o[I>>2]<<4)|0),o[I>>2]=(o[I>>2]|0)+1)}if((N|0)<(te|0)&&(ks(ze,Et),Mr(Et,o[mt>>2]|0,Q,1,I+8+(o[I>>2]<<4)|0),o[I>>2]=(o[I>>2]|0)+1),N=N+1|0,(N|0)>=(Xe|0)){m=3;break}else E=o[mt>>2]|0}if((m|0)==3){Ee=Nn;return}else(m|0)==8&&_n(22606,22569,736,22651)}function Hs(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0;Q=Ee,Ee=Ee+160|0,E=Q+80|0,I=Q,R=E,O=20368,N=R+72|0;do o[R>>2]=o[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(N|0));R=I,O=20448,N=R+72|0;do o[R>>2]=o[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(N|0));N=(zi(o[g>>2]|0)|0)==0,E=N?E:I,I=m+4|0,oc(I),eu(I),zi(o[g>>2]|0)|0&&(Ki(I),o[g>>2]=(o[g>>2]|0)+1),o[v>>2]=o[m>>2],g=v+4|0,ci(I,E,g),qn(g),o[v+16>>2]=o[m>>2],g=v+20|0,ci(I,E+12|0,g),qn(g),o[v+32>>2]=o[m>>2],g=v+36|0,ci(I,E+24|0,g),qn(g),o[v+48>>2]=o[m>>2],g=v+52|0,ci(I,E+36|0,g),qn(g),o[v+64>>2]=o[m>>2],g=v+68|0,ci(I,E+48|0,g),qn(g),o[v+80>>2]=o[m>>2],v=v+84|0,ci(I,E+60|0,v),qn(v),Ee=Q}function Il(m,g){return m=m|0,g=g|0,g=ne(m|0,g|0,52)|0,Ce()|0,g&15|0}function Za(m,g){return m=m|0,g=g|0,g=ne(m|0,g|0,45)|0,Ce()|0,g&127|0}function ya(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0;if(!(!0&(g&-16777216|0)==134217728)||(O=ne(m|0,g|0,45)|0,Ce()|0,O=O&127,O>>>0>121))return g=0,g|0;v=ne(m|0,g|0,52)|0,Ce()|0,v=v&15;do if(v|0){for(I=1,E=0;;){if(R=ne(m|0,g|0,(15-I|0)*3|0)|0,Ce()|0,R=R&7,(R|0)!=0&(E^1))if((R|0)==1&(tr(O)|0)!=0){N=0,E=13;break}else E=1;if((R|0)==7){N=0,E=13;break}if(I>>>0<v>>>0)I=I+1|0;else{E=9;break}}if((E|0)==9){if((v|0)==15)N=1;else break;return N|0}else if((E|0)==13)return N|0}while(0);for(;;){if(N=ne(m|0,g|0,(14-v|0)*3|0)|0,Ce()|0,!((N&7|0)==7&!0)){N=0,E=13;break}if(v>>>0<14)v=v+1|0;else{N=1,E=13;break}}return(E|0)==13?N|0:0}function kl(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0;if(R=ne(m|0,g|0,52)|0,Ce()|0,R=R&15,v>>>0>15)return E=4,E|0;if((R|0)<(v|0))return E=12,E|0;if((R|0)==(v|0))return o[E>>2]=m,o[E+4>>2]=g,E=0,E|0;if(I=ue(v|0,0,52)|0,I=I|m,m=Ce()|0|g&-15728641,(R|0)>(v|0))do g=ue(7,0,(14-v|0)*3|0)|0,v=v+1|0,I=g|I,m=Ce()|0|m;while((v|0)<(R|0));return o[E>>2]=I,o[E+4>>2]=m,E=0,E|0}function Ll(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0;if(R=ne(m|0,g|0,52)|0,Ce()|0,R=R&15,!((v|0)<16&(R|0)<=(v|0)))return E=4,E|0;I=v-R|0,v=ne(m|0,g|0,45)|0,Ce()|0;e:do if(!(tr(v&127)|0))v=Zs(7,0,I,((I|0)<0)<<31>>31)|0,I=Ce()|0;else{t:do if(R|0){for(v=1;O=ue(7,0,(15-v|0)*3|0)|0,!!((O&m|0)==0&((Ce()|0)&g|0)==0);)if(v>>>0<R>>>0)v=v+1|0;else break t;v=Zs(7,0,I,((I|0)<0)<<31>>31)|0,I=Ce()|0;break e}while(0);v=Zs(7,0,I,((I|0)<0)<<31>>31)|0,v=V(v|0,Ce()|0,5,0)|0,v=d(v|0,Ce()|0,-5,-1)|0,v=P(v|0,Ce()|0,6,0)|0,v=d(v|0,Ce()|0,1,0)|0,I=Ce()|0}while(0);return O=E,o[O>>2]=v,o[O+4>>2]=I,O=0,O|0}function Cr(m,g){m=m|0,g=g|0;var v=0,E=0,I=0;if(I=ne(m|0,g|0,45)|0,Ce()|0,!(tr(I&127)|0))return I=0,I|0;I=ne(m|0,g|0,52)|0,Ce()|0,I=I&15;e:do if(!I)v=0;else for(E=1;;){if(v=ne(m|0,g|0,(15-E|0)*3|0)|0,Ce()|0,v=v&7,v|0)break e;if(E>>>0<I>>>0)E=E+1|0;else{v=0;break}}while(0);return I=(v|0)==0&1,I|0}function xA(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0;if(O=Ee,Ee=Ee+16|0,R=O,va(R,m,g,v),g=R,m=o[g>>2]|0,g=o[g+4>>2]|0,(m|0)==0&(g|0)==0)return Ee=O,0;I=0,v=0;do N=E+(I<<3)|0,o[N>>2]=m,o[N+4>>2]=g,I=d(I|0,v|0,1,0)|0,v=Ce()|0,Ka(R),N=R,m=o[N>>2]|0,g=o[N+4>>2]|0;while(!((m|0)==0&(g|0)==0));return Ee=O,0}function ps(m,g,v,E){return m=m|0,g=g|0,v=v|0,E=E|0,(E|0)<(v|0)?(v=g,E=m,Dt(v|0),E|0):(v=ue(-1,-1,((E-v|0)*3|0)+3|0)|0,E=ue(~v|0,~(Ce()|0)|0,(15-E|0)*3|0)|0,v=~(Ce()|0)&g,E=~E&m,Dt(v|0),E|0)}function ou(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0;return I=ne(m|0,g|0,52)|0,Ce()|0,I=I&15,(v|0)<16&(I|0)<=(v|0)?((I|0)<(v|0)&&(I=ue(-1,-1,((v+-1-I|0)*3|0)+3|0)|0,I=ue(~I|0,~(Ce()|0)|0,(15-v|0)*3|0)|0,g=~(Ce()|0)&g,m=~I&m),I=ue(v|0,0,52)|0,v=g&-15728641|(Ce()|0),o[E>>2]=m|I,o[E+4>>2]=v,E=0,E|0):(E=4,E|0)}function Dl(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0,Et=0;if((v|0)==0&(E|0)==0)return mt=0,mt|0;if(I=m,R=o[I>>2]|0,I=o[I+4>>2]|0,!0&(I&15728640|0)==0){if(!((E|0)>0|(E|0)==0&v>>>0>0)||(mt=g,o[mt>>2]=R,o[mt+4>>2]=I,(v|0)==1&(E|0)==0))return mt=0,mt|0;I=1;do Ht=m+(I<<3)|0,Ft=o[Ht+4>>2]|0,mt=g+(I<<3)|0,o[mt>>2]=o[Ht>>2],o[mt+4>>2]=Ft,I=I+1|0;while(0<(E|0)|(E|0)==0&I>>>0<v>>>0);return I=0,I|0}if(Je=v<<3,Ft=_(Je)|0,!Ft)return mt=13,mt|0;if($e(Ft|0,m|0,Je|0)|0,Ht=h(v,8)|0,!Ht)return l(Ft),mt=13,mt|0;e:do if(v|0){t:for(;;){I=Ft,ct=o[I>>2]|0,I=o[I+4>>2]|0,it=ne(ct|0,I|0,52)|0,Ce()|0,it=it&15,st=it+-1|0,dt=(v|0)>0;n:do if((it|0)!=0&dt){if(He=((v|0)<0)<<31>>31,ze=ue(st|0,0,52)|0,Xe=Ce()|0,st>>>0>15){if(!((ct|0)==0&(I|0)==0)){mt=17;break t}for(R=0;;){if(R=R+1|0,(R|0)>=(v|0))break n;if(E=Ft+(R<<3)|0,Xe=o[E>>2]|0,E=o[E+4>>2]|0,!((Xe|0)==0&(E|0)==0)){I=E,mt=17;break t}}}for(R=0,m=ct,E=I;;){if(!((m|0)==0&(E|0)==0)){if(!(!0&(E&117440512|0)==0)){mt=22;break t}if(N=ne(m|0,E|0,52)|0,Ce()|0,N=N&15,(N|0)<(st|0)){I=12,mt=28;break t}if((N|0)!=(st|0)&&(m=m|ze,E=E&-15728641|Xe,N>>>0>=it>>>0)){O=st;do Be=ue(7,0,(14-O|0)*3|0)|0,O=O+1|0,m=Be|m,E=Ce()|0|E;while(O>>>0<N>>>0)}if(O=X(m|0,E|0,v|0,He|0)|0,Ce()|0,te=Ht+(O<<3)|0,N=te,Q=o[N>>2]|0,N=o[N+4>>2]|0,(Q|0)==0&(N|0)==0)O=te;else for(Be=0;;){if((Be|0)>(v|0)){mt=32;break t}if((Q|0)==(m|0)&(N&-117440513|0)==(E|0)){le=ne(Q|0,N|0,56)|0,Ce()|0,le=le&7,pe=le+1|0,Et=ne(Q|0,N|0,45)|0,Ce()|0;r:do if(!(tr(Et&127)|0))N=7;else{if(Q=ne(Q|0,N|0,52)|0,Ce()|0,Q=Q&15,!Q){N=6;break}for(N=1;;){if(Et=ue(7,0,(15-N|0)*3|0)|0,!((Et&m|0)==0&((Ce()|0)&E|0)==0)){N=7;break r}if(N>>>0<Q>>>0)N=N+1|0;else{N=6;break}}}while(0);if((le+2|0)>>>0>N>>>0){mt=42;break t}Et=ue(pe|0,0,56)|0,E=Ce()|0|E&-117440513,pe=te,o[pe>>2]=0,o[pe+4>>2]=0,m=Et|m}else O=(O+1|0)%(v|0)|0;if(te=Ht+(O<<3)|0,N=te,Q=o[N>>2]|0,N=o[N+4>>2]|0,(Q|0)==0&(N|0)==0){O=te;break}else Be=Be+1|0}Et=O,o[Et>>2]=m,o[Et+4>>2]=E}if(R=R+1|0,(R|0)>=(v|0))break n;E=Ft+(R<<3)|0,m=o[E>>2]|0,E=o[E+4>>2]|0}}while(0);if((v+5|0)>>>0<11){mt=85;break}if(Xe=h((v|0)/6|0,8)|0,!Xe){mt=49;break}n:do if(dt){Be=0,pe=0;do{if(N=Ht+(Be<<3)|0,E=N,R=o[E>>2]|0,E=o[E+4>>2]|0,!((R|0)==0&(E|0)==0)){Q=ne(R|0,E|0,56)|0,Ce()|0,Q=Q&7,m=Q+1|0,te=E&-117440513,Et=ne(R|0,E|0,45)|0,Ce()|0;r:do if(tr(Et&127)|0){if(le=ne(R|0,E|0,52)|0,Ce()|0,le=le&15,le|0)for(O=1;;){if(Et=ue(7,0,(15-O|0)*3|0)|0,!((R&Et|0)==0&(te&(Ce()|0)|0)==0))break r;if(O>>>0<le>>>0)O=O+1|0;else break}E=ue(m|0,0,56)|0,R=E|R,E=Ce()|0|te,m=N,o[m>>2]=R,o[m+4>>2]=E,m=Q+2|0}while(0);(m|0)==7&&(Et=Xe+(pe<<3)|0,o[Et>>2]=R,o[Et+4>>2]=E&-117440513,pe=pe+1|0)}Be=Be+1|0}while((Be|0)!=(v|0));if(dt){if(Be=((v|0)<0)<<31>>31,He=ue(st|0,0,52)|0,ze=Ce()|0,st>>>0>15){if(!((ct|0)==0&(I|0)==0)){I=4,mt=84;break t}for(I=0;;){if(I=I+1|0,(I|0)>=(v|0)){R=0,I=pe;break n}if(Et=Ft+(I<<3)|0,!((o[Et>>2]|0)==0&(o[Et+4>>2]|0)==0)){I=4,mt=84;break t}}}for(le=0,R=0,te=ct;;){do if(!((te|0)==0&(I|0)==0)){if(N=ne(te|0,I|0,52)|0,Ce()|0,N=N&15,(N|0)<(st|0)){I=12,mt=84;break t}do if((N|0)==(st|0))E=te,N=I;else{if(E=te|He,m=I&-15728641|ze,N>>>0<it>>>0){N=m;break}O=st;do Et=ue(7,0,(14-O|0)*3|0)|0,O=O+1|0,E=Et|E,m=Ce()|0|m;while(O>>>0<N>>>0);N=m}while(0);for(O=X(E|0,N|0,v|0,Be|0)|0,Ce()|0,m=0;;){if((m|0)>(v|0)){mt=77;break t}if(Et=Ht+(O<<3)|0,Q=o[Et+4>>2]|0,(Q&-117440513|0)==(N|0)&&(o[Et>>2]|0)==(E|0)){mt=79;break}if(O=(O+1|0)%(v|0)|0,Et=Ht+(O<<3)|0,(o[Et>>2]|0)==(E|0)&&(o[Et+4>>2]|0)==(N|0))break;m=m+1|0}if((mt|0)==79&&(mt=0,!0&(Q&117440512|0)==100663296))break;Et=g+(R<<3)|0,o[Et>>2]=te,o[Et+4>>2]=I,R=R+1|0}while(0);if(I=le+1|0,(I|0)>=(v|0)){I=pe;break n}Et=Ft+(I<<3)|0,le=I,te=o[Et>>2]|0,I=o[Et+4>>2]|0}}else R=0,I=pe}else R=0,I=0;while(0);if(Me(Ht|0,0,Je|0)|0,$e(Ft|0,Xe|0,I<<3|0)|0,l(Xe),I)g=g+(R<<3)|0,v=I;else break e}if((mt|0)==17)!0&(I&117440512|0)==0?(I=4,mt=28):mt=22;else if((mt|0)==32)_n(23313,22674,362,22684);else{if((mt|0)==42)return l(Ft),l(Ht),Et=10,Et|0;if((mt|0)==49)return l(Ft),l(Ht),Et=13,Et|0;if((mt|0)==77)_n(23313,22674,462,22684);else{if((mt|0)==84)return l(Xe),l(Ft),l(Ht),Et=I,Et|0;if((mt|0)==85){$e(g|0,Ft|0,v<<3|0)|0;break}}}if((mt|0)==22)return l(Ft),l(Ht),Et=5,Et|0;if((mt|0)==28)return l(Ft),l(Ht),Et=I,Et|0}while(0);return l(Ft),l(Ht),Et=0,Et|0}function Ac(m,g,v,E,I,R,O){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0,R=R|0,O=O|0;var N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0;if(Xe=Ee,Ee=Ee+16|0,ze=Xe,!((v|0)>0|(v|0)==0&g>>>0>0))return ze=0,Ee=Xe,ze|0;if((O|0)>=16)return ze=12,Ee=Xe,ze|0;Be=0,He=0,pe=0,N=0;e:for(;;){if(te=m+(Be<<3)|0,Q=o[te>>2]|0,te=o[te+4>>2]|0,le=ne(Q|0,te|0,52)|0,Ce()|0,(le&15|0)>(O|0)){N=12,Q=11;break}if(va(ze,Q,te,O),le=ze,te=o[le>>2]|0,le=o[le+4>>2]|0,(te|0)==0&(le|0)==0)Q=pe;else{Q=pe;do{if(!((N|0)<(R|0)|(N|0)==(R|0)&Q>>>0<I>>>0)){Q=10;break e}pe=E+(Q<<3)|0,o[pe>>2]=te,o[pe+4>>2]=le,Q=d(Q|0,N|0,1,0)|0,N=Ce()|0,Ka(ze),pe=ze,te=o[pe>>2]|0,le=o[pe+4>>2]|0}while(!((te|0)==0&(le|0)==0))}if(Be=d(Be|0,He|0,1,0)|0,He=Ce()|0,(He|0)<(v|0)|(He|0)==(v|0)&Be>>>0<g>>>0)pe=Q;else{N=0,Q=11;break}}return(Q|0)==10?(ze=14,Ee=Xe,ze|0):(Q|0)==11?(Ee=Xe,N|0):0}function ri(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0;Be=Ee,Ee=Ee+16|0,pe=Be;e:do if((v|0)>0|(v|0)==0&g>>>0>0){for(te=0,O=0,R=0,le=0;;){if(Q=m+(te<<3)|0,N=o[Q>>2]|0,Q=o[Q+4>>2]|0,!((N|0)==0&(Q|0)==0)&&(Q=(Ll(N,Q,E,pe)|0)==0,N=pe,O=d(o[N>>2]|0,o[N+4>>2]|0,O|0,R|0)|0,R=Ce()|0,!Q)){R=12;break}if(te=d(te|0,le|0,1,0)|0,le=Ce()|0,!((le|0)<(v|0)|(le|0)==(v|0)&te>>>0<g>>>0))break e}return Ee=Be,R|0}else O=0,R=0;while(0);return o[I>>2]=O,o[I+4>>2]=R,I=0,Ee=Be,I|0}function $r(m,g){return m=m|0,g=g|0,g=ne(m|0,g|0,52)|0,Ce()|0,g&1|0}function hi(m,g){m=m|0,g=g|0;var v=0,E=0,I=0;if(I=ne(m|0,g|0,52)|0,Ce()|0,I=I&15,!I)return I=0,I|0;for(E=1;;){if(v=ne(m|0,g|0,(15-E|0)*3|0)|0,Ce()|0,v=v&7,v|0){E=5;break}if(E>>>0<I>>>0)E=E+1|0;else{v=0,E=5;break}}return(E|0)==5?v|0:0}function au(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0,Q=0;if(Q=ne(m|0,g|0,52)|0,Ce()|0,Q=Q&15,!Q)return N=g,Q=m,Dt(N|0),Q|0;for(N=1,v=0;;){R=(15-N|0)*3|0,E=ue(7,0,R|0)|0,I=Ce()|0,O=ne(m|0,g|0,R|0)|0,Ce()|0,R=ue(wo(O&7)|0,0,R|0)|0,O=Ce()|0,m=R|m&~E,g=O|g&~I;e:do if(!v)if((R&E|0)==0&(O&I|0)==0)v=0;else if(E=ne(m|0,g|0,52)|0,Ce()|0,E=E&15,!E)v=1;else{v=1;t:for(;;){switch(O=ne(m|0,g|0,(15-v|0)*3|0)|0,Ce()|0,O&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<E>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(O=(15-v|0)*3|0,I=ne(m|0,g|0,O|0)|0,Ce()|0,R=ue(7,0,O|0)|0,g=g&~(Ce()|0),O=ue(wo(I&7)|0,0,O|0)|0,m=m&~R|O,g=g|(Ce()|0),v>>>0<E>>>0)v=v+1|0;else{v=1;break}}while(0);if(N>>>0<Q>>>0)N=N+1|0;else break}return Dt(g|0),m|0}function Ws(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0;if(E=ne(m|0,g|0,52)|0,Ce()|0,E=E&15,!E)return v=g,E=m,Dt(v|0),E|0;for(v=1;R=(15-v|0)*3|0,O=ne(m|0,g|0,R|0)|0,Ce()|0,I=ue(7,0,R|0)|0,g=g&~(Ce()|0),R=ue(wo(O&7)|0,0,R|0)|0,m=R|m&~I,g=Ce()|0|g,v>>>0<E>>>0;)v=v+1|0;return Dt(g|0),m|0}function uc(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0,Q=0;if(Q=ne(m|0,g|0,52)|0,Ce()|0,Q=Q&15,!Q)return N=g,Q=m,Dt(N|0),Q|0;for(N=1,v=0;;){R=(15-N|0)*3|0,E=ue(7,0,R|0)|0,I=Ce()|0,O=ne(m|0,g|0,R|0)|0,Ce()|0,R=ue(Qo(O&7)|0,0,R|0)|0,O=Ce()|0,m=R|m&~E,g=O|g&~I;e:do if(!v)if((R&E|0)==0&(O&I|0)==0)v=0;else if(E=ne(m|0,g|0,52)|0,Ce()|0,E=E&15,!E)v=1;else{v=1;t:for(;;){switch(O=ne(m|0,g|0,(15-v|0)*3|0)|0,Ce()|0,O&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<E>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(I=(15-v|0)*3|0,R=ue(7,0,I|0)|0,O=g&~(Ce()|0),g=ne(m|0,g|0,I|0)|0,Ce()|0,g=ue(Qo(g&7)|0,0,I|0)|0,m=m&~R|g,g=O|(Ce()|0),v>>>0<E>>>0)v=v+1|0;else{v=1;break}}while(0);if(N>>>0<Q>>>0)N=N+1|0;else break}return Dt(g|0),m|0}function wA(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0;if(E=ne(m|0,g|0,52)|0,Ce()|0,E=E&15,!E)return v=g,E=m,Dt(v|0),E|0;for(v=1;O=(15-v|0)*3|0,R=ue(7,0,O|0)|0,I=g&~(Ce()|0),g=ne(m|0,g|0,O|0)|0,Ce()|0,g=ue(Qo(g&7)|0,0,O|0)|0,m=g|m&~R,g=Ce()|0|I,v>>>0<E>>>0;)v=v+1|0;return Dt(g|0),m|0}function _i(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0;if(Q=Ee,Ee=Ee+64|0,N=Q+40|0,E=Q+24|0,I=Q+12|0,R=Q,ue(g|0,0,52)|0,v=Ce()|0|134225919,!g)return(o[m+4>>2]|0)>2||(o[m+8>>2]|0)>2||(o[m+12>>2]|0)>2?(O=0,N=0,Dt(O|0),Ee=Q,N|0):(ue(dA(m)|0,0,45)|0,O=Ce()|0|v,N=-1,Dt(O|0),Ee=Q,N|0);if(o[N>>2]=o[m>>2],o[N+4>>2]=o[m+4>>2],o[N+8>>2]=o[m+8>>2],o[N+12>>2]=o[m+12>>2],O=N+4|0,(g|0)>0)for(m=-1;o[E>>2]=o[O>>2],o[E+4>>2]=o[O+4>>2],o[E+8>>2]=o[O+8>>2],g&1?(_A(O),o[I>>2]=o[O>>2],o[I+4>>2]=o[O+4>>2],o[I+8>>2]=o[O+8>>2],Wo(I)):(Wa(O),o[I>>2]=o[O>>2],o[I+4>>2]=o[O+4>>2],o[I+8>>2]=o[O+8>>2],Ki(I)),vo(E,I,R),qn(R),le=(15-g|0)*3|0,te=ue(7,0,le|0)|0,v=v&~(Ce()|0),le=ue(Ho(R)|0,0,le|0)|0,m=le|m&~te,v=Ce()|0|v,(g|0)>1;)g=g+-1|0;else m=-1;e:do if((o[O>>2]|0)<=2&&(o[N+8>>2]|0)<=2&&(o[N+12>>2]|0)<=2){if(E=dA(N)|0,g=ue(E|0,0,45)|0,g=g|m,m=Ce()|0|v&-1040385,R=pA(N)|0,!(tr(E)|0)){if((R|0)<=0)break;for(I=0;;){if(E=ne(g|0,m|0,52)|0,Ce()|0,E=E&15,E)for(v=1;le=(15-v|0)*3|0,N=ne(g|0,m|0,le|0)|0,Ce()|0,te=ue(7,0,le|0)|0,m=m&~(Ce()|0),le=ue(wo(N&7)|0,0,le|0)|0,g=g&~te|le,m=m|(Ce()|0),v>>>0<E>>>0;)v=v+1|0;if(I=I+1|0,(I|0)==(R|0))break e}}I=ne(g|0,m|0,52)|0,Ce()|0,I=I&15;t:do if(I){v=1;n:for(;;){switch(le=ne(g|0,m|0,(15-v|0)*3|0)|0,Ce()|0,le&7){case 1:break n;case 0:break;default:break t}if(v>>>0<I>>>0)v=v+1|0;else break t}if(gA(E,o[N>>2]|0)|0)for(v=1;N=(15-v|0)*3|0,te=ue(7,0,N|0)|0,le=m&~(Ce()|0),m=ne(g|0,m|0,N|0)|0,Ce()|0,m=ue(Qo(m&7)|0,0,N|0)|0,g=g&~te|m,m=le|(Ce()|0),v>>>0<I>>>0;)v=v+1|0;else for(v=1;le=(15-v|0)*3|0,N=ne(g|0,m|0,le|0)|0,Ce()|0,te=ue(7,0,le|0)|0,m=m&~(Ce()|0),le=ue(wo(N&7)|0,0,le|0)|0,g=g&~te|le,m=m|(Ce()|0),v>>>0<I>>>0;)v=v+1|0}while(0);if((R|0)>0){v=0;do g=au(g,m)|0,m=Ce()|0,v=v+1|0;while((v|0)!=(R|0))}}else g=0,m=0;while(0);return te=m,le=g,Dt(te|0),Ee=Q,le|0}function zi(m){return m=m|0,(m|0)%2|0|0}function gs(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0;return I=Ee,Ee=Ee+16|0,E=I,g>>>0>15?(E=4,Ee=I,E|0):(o[m+4>>2]&2146435072|0)==2146435072||(o[m+8+4>>2]&2146435072|0)==2146435072?(E=3,Ee=I,E|0):(nr(m,g,E),g=_i(E,g)|0,E=Ce()|0,o[v>>2]=g,o[v+4>>2]=E,(g|0)==0&(E|0)==0&&_n(23313,22674,786,22697),E=0,Ee=I,E|0)}function _a(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0;if(I=v+4|0,R=ne(m|0,g|0,52)|0,Ce()|0,R=R&15,O=ne(m|0,g|0,45)|0,Ce()|0,E=(R|0)==0,tr(O&127)|0){if(E)return O=1,O|0;E=1}else{if(E)return O=0,O|0;!(o[I>>2]|0)&&!(o[v+8>>2]|0)?E=(o[v+12>>2]|0)!=0&1:E=1}for(v=1;v&1?Wo(I):Ki(I),O=ne(m|0,g|0,(15-v|0)*3|0)|0,Ce()|0,Ji(I,O&7),v>>>0<R>>>0;)v=v+1|0;return E|0}function ss(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0;if(le=Ee,Ee=Ee+16|0,Q=le,te=ne(m|0,g|0,45)|0,Ce()|0,te=te&127,te>>>0>121)return o[v>>2]=0,o[v+4>>2]=0,o[v+8>>2]=0,o[v+12>>2]=0,te=5,Ee=le,te|0;e:do if(tr(te)|0&&(R=ne(m|0,g|0,52)|0,Ce()|0,R=R&15,(R|0)!=0)){E=1;t:for(;;){switch(N=ne(m|0,g|0,(15-E|0)*3|0)|0,Ce()|0,N&7){case 5:break t;case 0:break;default:{E=g;break e}}if(E>>>0<R>>>0)E=E+1|0;else{E=g;break e}}for(I=1,E=g;g=(15-I|0)*3|0,O=ue(7,0,g|0)|0,N=E&~(Ce()|0),E=ne(m|0,E|0,g|0)|0,Ce()|0,E=ue(Qo(E&7)|0,0,g|0)|0,m=m&~O|E,E=N|(Ce()|0),I>>>0<R>>>0;)I=I+1|0}else E=g;while(0);if(N=7696+(te*28|0)|0,o[v>>2]=o[N>>2],o[v+4>>2]=o[N+4>>2],o[v+8>>2]=o[N+8>>2],o[v+12>>2]=o[N+12>>2],!(_a(m,E,v)|0))return te=0,Ee=le,te|0;if(O=v+4|0,o[Q>>2]=o[O>>2],o[Q+4>>2]=o[O+4>>2],o[Q+8>>2]=o[O+8>>2],R=ne(m|0,E|0,52)|0,Ce()|0,N=R&15,R&1?(Ki(O),R=N+1|0):R=N,!(tr(te)|0))E=0;else{e:do if(!N)E=0;else for(g=1;;){if(I=ne(m|0,E|0,(15-g|0)*3|0)|0,Ce()|0,I=I&7,I|0){E=I;break e}if(g>>>0<N>>>0)g=g+1|0;else{E=0;break}}while(0);E=(E|0)==4&1}if(!(qa(v,R,E,0)|0))(R|0)!=(N|0)&&(o[O>>2]=o[Q>>2],o[O+4>>2]=o[Q+4>>2],o[O+8>>2]=o[Q+8>>2]);else{if(tr(te)|0)do;while(qa(v,R,0,0)|0);(R|0)!=(N|0)&&Wa(O)}return te=0,Ee=le,te|0}function Eo(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;return R=Ee,Ee=Ee+16|0,E=R,I=ss(m,g,E)|0,I|0?(Ee=R,I|0):(I=ne(m|0,g|0,52)|0,Ce()|0,Pl(E,I&15,v),I=0,Ee=R,I|0)}function Mi(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0;if(O=Ee,Ee=Ee+16|0,R=O,E=ss(m,g,R)|0,E|0)return R=E,Ee=O,R|0;E=ne(m|0,g|0,45)|0,Ce()|0,E=(tr(E&127)|0)==0,I=ne(m|0,g|0,52)|0,Ce()|0,I=I&15;e:do if(!E){if(I|0)for(E=1;;){if(N=ue(7,0,(15-E|0)*3|0)|0,!((N&m|0)==0&((Ce()|0)&g|0)==0))break e;if(E>>>0<I>>>0)E=E+1|0;else break}return Zo(R,I,0,5,v),N=0,Ee=O,N|0}while(0);return su(R,I,0,6,v),N=0,Ee=O,N|0}function Ya(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;if(I=ne(m|0,g|0,45)|0,Ce()|0,!(tr(I&127)|0))return I=2,o[v>>2]=I,0;if(I=ne(m|0,g|0,52)|0,Ce()|0,I=I&15,!I)return I=5,o[v>>2]=I,0;for(E=1;;){if(R=ue(7,0,(15-E|0)*3|0)|0,!((R&m|0)==0&((Ce()|0)&g|0)==0)){E=2,m=6;break}if(E>>>0<I>>>0)E=E+1|0;else{E=5,m=6;break}}return(m|0)==6&&(o[v>>2]=E),0}function Rl(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0;pe=Ee,Ee=Ee+128|0,te=pe+112|0,R=pe+96|0,le=pe,I=ne(m|0,g|0,52)|0,Ce()|0,N=I&15,o[te>>2]=N,O=ne(m|0,g|0,45)|0,Ce()|0,O=O&127;e:do if(tr(O)|0){if(N|0)for(E=1;;){if(Q=ue(7,0,(15-E|0)*3|0)|0,!((Q&m|0)==0&((Ce()|0)&g|0)==0)){I=0;break e}if(E>>>0<N>>>0)E=E+1|0;else break}if(I&1)I=1;else return Q=ue(N+1|0,0,52)|0,le=Ce()|0|g&-15728641,te=ue(7,0,(14-N|0)*3|0)|0,le=Rl((Q|m)&~te,le&~(Ce()|0),v)|0,Ee=pe,le|0}else I=0;while(0);if(E=ss(m,g,R)|0,!E){I?(ac(R,te,le),Q=5):(Hs(R,te,le),Q=6);e:do if(tr(O)|0)if(!N)m=5;else for(E=1;;){if(O=ue(7,0,(15-E|0)*3|0)|0,!((O&m|0)==0&((Ce()|0)&g|0)==0)){m=2;break e}if(E>>>0<N>>>0)E=E+1|0;else{m=5;break}}else m=2;while(0);Me(v|0,-1,m<<2|0)|0;e:do if(I)for(R=0;;){if(O=le+(R<<4)|0,lc(O,o[te>>2]|0)|0,O=o[O>>2]|0,N=o[v>>2]|0,(N|0)==-1|(N|0)==(O|0))E=v;else{I=0;do{if(I=I+1|0,I>>>0>=m>>>0){E=1;break e}E=v+(I<<2)|0,N=o[E>>2]|0}while(!((N|0)==-1|(N|0)==(O|0)))}if(o[E>>2]=O,R=R+1|0,R>>>0>=Q>>>0){E=0;break}}else for(R=0;;){if(O=le+(R<<4)|0,qa(O,o[te>>2]|0,0,1)|0,O=o[O>>2]|0,N=o[v>>2]|0,(N|0)==-1|(N|0)==(O|0))E=v;else{I=0;do{if(I=I+1|0,I>>>0>=m>>>0){E=1;break e}E=v+(I<<2)|0,N=o[E>>2]|0}while(!((N|0)==-1|(N|0)==(O|0)))}if(o[E>>2]=O,R=R+1|0,R>>>0>=Q>>>0){E=0;break}}while(0)}return le=E,Ee=pe,le|0}function Xa(){return 12}function Qs(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0,Q=0;if(m>>>0>15)return N=4,N|0;if(ue(m|0,0,52)|0,N=Ce()|0|134225919,!m){v=0,E=0;do tr(E)|0&&(ue(E|0,0,45)|0,O=N|(Ce()|0),m=g+(v<<3)|0,o[m>>2]=-1,o[m+4>>2]=O,v=v+1|0),E=E+1|0;while((E|0)!=122);return v=0,v|0}v=0,O=0;do{if(tr(O)|0){for(ue(O|0,0,45)|0,E=1,I=-1,R=N|(Ce()|0);Q=ue(7,0,(15-E|0)*3|0)|0,I=I&~Q,R=R&~(Ce()|0),(E|0)!=(m|0);)E=E+1|0;Q=g+(v<<3)|0,o[Q>>2]=I,o[Q+4>>2]=R,v=v+1|0}O=O+1|0}while((O|0)!=122);return v=0,v|0}function ms(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0;if(it=Ee,Ee=Ee+16|0,dt=it,ct=ne(m|0,g|0,52)|0,Ce()|0,ct=ct&15,v>>>0>15)return ct=4,Ee=it,ct|0;if((ct|0)<(v|0))return ct=12,Ee=it,ct|0;if((ct|0)!=(v|0))if(R=ue(v|0,0,52)|0,R=R|m,N=Ce()|0|g&-15728641,(ct|0)>(v|0)){Q=v;do Xe=ue(7,0,(14-Q|0)*3|0)|0,Q=Q+1|0,R=Xe|R,N=Ce()|0|N;while((Q|0)<(ct|0));Xe=R}else Xe=R;else Xe=m,N=g;ze=ne(Xe|0,N|0,45)|0,Ce()|0;e:do if(tr(ze&127)|0){if(Q=ne(Xe|0,N|0,52)|0,Ce()|0,Q=Q&15,Q|0)for(R=1;;){if(ze=ue(7,0,(15-R|0)*3|0)|0,!((ze&Xe|0)==0&((Ce()|0)&N|0)==0)){te=33;break e}if(R>>>0<Q>>>0)R=R+1|0;else break}if(ze=E,o[ze>>2]=0,o[ze+4>>2]=0,(ct|0)>(v|0)){for(ze=g&-15728641,He=ct;;){if(Be=He,He=He+-1|0,He>>>0>15|(ct|0)<(He|0)){te=19;break}if((ct|0)!=(He|0))if(R=ue(He|0,0,52)|0,R=R|m,Q=Ce()|0|ze,(ct|0)<(Be|0))pe=R;else{te=He;do pe=ue(7,0,(14-te|0)*3|0)|0,te=te+1|0,R=pe|R,Q=Ce()|0|Q;while((te|0)<(ct|0));pe=R}else pe=m,Q=g;if(le=ne(pe|0,Q|0,45)|0,Ce()|0,!(tr(le&127)|0))R=0;else{le=ne(pe|0,Q|0,52)|0,Ce()|0,le=le&15;t:do if(!le)R=0;else for(te=1;;){if(R=ne(pe|0,Q|0,(15-te|0)*3|0)|0,Ce()|0,R=R&7,R|0)break t;if(te>>>0<le>>>0)te=te+1|0;else{R=0;break}}while(0);R=(R|0)==0&1}if(Q=ne(m|0,g|0,(15-Be|0)*3|0)|0,Ce()|0,Q=Q&7,(Q|0)==7){I=5,te=42;break}if(R=(R|0)!=0,(Q|0)==1&R){I=5,te=42;break}if(pe=Q+(((Q|0)!=0&R)<<31>>31)|0,pe|0&&(te=ct-Be|0,te=Zs(7,0,te,((te|0)<0)<<31>>31)|0,le=Ce()|0,R?(R=V(te|0,le|0,5,0)|0,R=d(R|0,Ce()|0,-5,-1)|0,R=P(R|0,Ce()|0,6,0)|0,R=d(R|0,Ce()|0,1,0)|0,Q=Ce()|0):(R=te,Q=le),Be=pe+-1|0,Be=V(te|0,le|0,Be|0,((Be|0)<0)<<31>>31|0)|0,Be=d(R|0,Q|0,Be|0,Ce()|0)|0,pe=Ce()|0,le=E,le=d(Be|0,pe|0,o[le>>2]|0,o[le+4>>2]|0)|0,pe=Ce()|0,Be=E,o[Be>>2]=le,o[Be+4>>2]=pe),(He|0)<=(v|0)){te=37;break}}if((te|0)==19)_n(23313,22674,1099,22710);else if((te|0)==37){O=E,I=o[O+4>>2]|0,O=o[O>>2]|0;break}else if((te|0)==42)return Ee=it,I|0}else I=0,O=0}else te=33;while(0);e:do if((te|0)==33)if(ze=E,o[ze>>2]=0,o[ze+4>>2]=0,(ct|0)>(v|0)){for(R=ct;;){if(I=ne(m|0,g|0,(15-R|0)*3|0)|0,Ce()|0,I=I&7,(I|0)==7){I=5;break}if(O=ct-R|0,O=Zs(7,0,O,((O|0)<0)<<31>>31)|0,I=V(O|0,Ce()|0,I|0,0)|0,O=Ce()|0,ze=E,O=d(o[ze>>2]|0,o[ze+4>>2]|0,I|0,O|0)|0,I=Ce()|0,ze=E,o[ze>>2]=O,o[ze+4>>2]=I,R=R+-1|0,(R|0)<=(v|0))break e}return Ee=it,I|0}else I=0,O=0;while(0);return Ll(Xe,N,ct,dt)|0&&_n(23313,22674,1063,22725),ct=dt,dt=o[ct+4>>2]|0,((I|0)>-1|(I|0)==-1&O>>>0>4294967295)&((dt|0)>(I|0)|((dt|0)==(I|0)?(o[ct>>2]|0)>>>0>O>>>0:0))?(ct=0,Ee=it,ct|0):(_n(23313,22674,1139,22710),0)}function cc(m,g,v,E,I,R){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0,R=R|0;var O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0;if(pe=Ee,Ee=Ee+16|0,O=pe,I>>>0>15)return R=4,Ee=pe,R|0;if(N=ne(v|0,E|0,52)|0,Ce()|0,N=N&15,(N|0)>(I|0))return R=12,Ee=pe,R|0;if(Ll(v,E,I,O)|0&&_n(23313,22674,1063,22725),le=O,te=o[le+4>>2]|0,!(((g|0)>-1|(g|0)==-1&m>>>0>4294967295)&((te|0)>(g|0)|((te|0)==(g|0)?(o[le>>2]|0)>>>0>m>>>0:0))))return R=2,Ee=pe,R|0;le=I-N|0,I=ue(I|0,0,52)|0,Q=Ce()|0|E&-15728641,te=R,o[te>>2]=I|v,o[te+4>>2]=Q,te=ne(v|0,E|0,45)|0,Ce()|0;e:do if(tr(te&127)|0){if(N|0)for(O=1;;){if(te=ue(7,0,(15-O|0)*3|0)|0,!((te&v|0)==0&((Ce()|0)&E|0)==0))break e;if(O>>>0<N>>>0)O=O+1|0;else break}if((le|0)<1)return R=0,Ee=pe,R|0;for(te=N^15,E=-1,Q=1,O=1;;){N=le-Q|0,N=Zs(7,0,N,((N|0)<0)<<31>>31)|0,v=Ce()|0;do if(O)if(O=V(N|0,v|0,5,0)|0,O=d(O|0,Ce()|0,-5,-1)|0,O=P(O|0,Ce()|0,6,0)|0,I=Ce()|0,(g|0)>(I|0)|(g|0)==(I|0)&m>>>0>O>>>0){g=d(m|0,g|0,-1,-1)|0,g=x(g|0,Ce()|0,O|0,I|0)|0,O=Ce()|0,Be=R,ze=o[Be>>2]|0,Be=o[Be+4>>2]|0,Xe=(te+E|0)*3|0,He=ue(7,0,Xe|0)|0,Be=Be&~(Ce()|0),E=P(g|0,O|0,N|0,v|0)|0,m=Ce()|0,I=d(E|0,m|0,2,0)|0,Xe=ue(I|0,Ce()|0,Xe|0)|0,Be=Ce()|0|Be,I=R,o[I>>2]=Xe|ze&~He,o[I+4>>2]=Be,m=V(E|0,m|0,N|0,v|0)|0,m=x(g|0,O|0,m|0,Ce()|0)|0,O=0,g=Ce()|0;break}else{Xe=R,He=o[Xe>>2]|0,Xe=o[Xe+4>>2]|0,ze=ue(7,0,(te+E|0)*3|0)|0,Xe=Xe&~(Ce()|0),O=R,o[O>>2]=He&~ze,o[O+4>>2]=Xe,O=1;break}else He=R,I=o[He>>2]|0,He=o[He+4>>2]|0,E=(te+E|0)*3|0,Be=ue(7,0,E|0)|0,He=He&~(Ce()|0),Xe=P(m|0,g|0,N|0,v|0)|0,O=Ce()|0,E=ue(Xe|0,O|0,E|0)|0,He=Ce()|0|He,ze=R,o[ze>>2]=E|I&~Be,o[ze+4>>2]=He,O=V(Xe|0,O|0,N|0,v|0)|0,m=x(m|0,g|0,O|0,Ce()|0)|0,O=0,g=Ce()|0;while(0);if((le|0)>(Q|0))E=~Q,Q=Q+1|0;else{g=0;break}}return Ee=pe,g|0}while(0);if((le|0)<1)return Xe=0,Ee=pe,Xe|0;for(I=N^15,O=1;;)if(ze=le-O|0,ze=Zs(7,0,ze,((ze|0)<0)<<31>>31)|0,Xe=Ce()|0,Q=R,v=o[Q>>2]|0,Q=o[Q+4>>2]|0,N=(I-O|0)*3|0,E=ue(7,0,N|0)|0,Q=Q&~(Ce()|0),Be=P(m|0,g|0,ze|0,Xe|0)|0,He=Ce()|0,N=ue(Be|0,He|0,N|0)|0,Q=Ce()|0|Q,te=R,o[te>>2]=N|v&~E,o[te+4>>2]=Q,Xe=V(Be|0,He|0,ze|0,Xe|0)|0,m=x(m|0,g|0,Xe|0,Ce()|0)|0,g=Ce()|0,(le|0)<=(O|0)){g=0;break}else O=O+1|0;return Ee=pe,g|0}function va(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0;I=ne(g|0,v|0,52)|0,Ce()|0,I=I&15,(g|0)==0&(v|0)==0|((E|0)>15|(I|0)>(E|0))?(E=-1,I=-1,g=0,v=0):(R=ps(g,v,I+1|0,E)|0,v=(Ce()|0)&-15728641,g=ue(E|0,0,52)|0,g=R|g,v=v|(Ce()|0),R=(Cr(g,v)|0)==0,E=R?-1:E),R=m,o[R>>2]=g,o[R+4>>2]=v,o[m+8>>2]=I,o[m+12>>2]=E}function Ka(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0;if(v=m,g=o[v>>2]|0,v=o[v+4>>2]|0,!((g|0)==0&(v|0)==0)&&(E=ne(g|0,v|0,52)|0,Ce()|0,E=E&15,N=ue(1,0,(E^15)*3|0)|0,g=d(N|0,Ce()|0,g|0,v|0)|0,v=Ce()|0,N=m,o[N>>2]=g,o[N+4>>2]=v,N=m+8|0,O=o[N>>2]|0,!((E|0)<(O|0)))){for(Q=m+12|0,R=E;;){if((R|0)==(O|0)){E=5;break}if(te=(R|0)==(o[Q>>2]|0),I=(15-R|0)*3|0,E=ne(g|0,v|0,I|0)|0,Ce()|0,E=E&7,te&((E|0)==1&!0)){E=7;break}if(!((E|0)==7&!0)){E=10;break}if(te=ue(1,0,I|0)|0,g=d(g|0,v|0,te|0,Ce()|0)|0,v=Ce()|0,te=m,o[te>>2]=g,o[te+4>>2]=v,(R|0)>(O|0))R=R+-1|0;else{E=10;break}}if((E|0)==5){te=m,o[te>>2]=0,o[te+4>>2]=0,o[N>>2]=-1,o[Q>>2]=-1;return}else if((E|0)==7){O=ue(1,0,I|0)|0,O=d(g|0,v|0,O|0,Ce()|0)|0,N=Ce()|0,te=m,o[te>>2]=O,o[te+4>>2]=N,o[Q>>2]=R+-1;return}else if((E|0)==10)return}}function fi(m){m=+m;var g=0;return g=m<0?m+6.283185307179586:m,+(m>=6.283185307179586?g+-6.283185307179586:g)}function Ls(m,g){return m=m|0,g=g|0,+Le(+(+G[m>>3]-+G[g>>3]))<17453292519943298e-27?(g=+Le(+(+G[m+8>>3]-+G[g+8>>3]))<17453292519943298e-27,g|0):(g=0,g|0)}function os(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0;return I=+G[g>>3],E=+G[m>>3],R=+ft(+((I-E)*.5)),v=+ft(+((+G[g+8>>3]-+G[m+8>>3])*.5)),v=R*R+v*(+Qe(+I)*+Qe(+E)*v),+(+xn(+ +Ze(+v),+ +Ze(+(1-v)))*2)}function Bl(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0;return I=+G[g>>3],E=+G[m>>3],R=+ft(+((I-E)*.5)),v=+ft(+((+G[g+8>>3]-+G[m+8>>3])*.5)),v=R*R+v*(+Qe(+I)*+Qe(+E)*v),+(+xn(+ +Ze(+v),+ +Ze(+(1-v)))*2*6371.007180918475)}function Yo(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0;return I=+G[g>>3],E=+G[m>>3],R=+ft(+((I-E)*.5)),v=+ft(+((+G[g+8>>3]-+G[m+8>>3])*.5)),v=R*R+v*(+Qe(+I)*+Qe(+E)*v),+(+xn(+ +Ze(+v),+ +Ze(+(1-v)))*2*6371.007180918475*1e3)}function hc(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0;return R=+G[g>>3],E=+Qe(+R),I=+G[g+8>>3]-+G[m+8>>3],O=E*+ft(+I),v=+G[m>>3],+ +xn(+O,+(+ft(+R)*+Qe(+v)-+Qe(+I)*(E*+ft(+v))))}function To(m,g,v,E){m=m|0,g=+g,v=+v,E=E|0;var I=0,R=0,O=0,N=0;if(v<1e-16){o[E>>2]=o[m>>2],o[E+4>>2]=o[m+4>>2],o[E+8>>2]=o[m+8>>2],o[E+12>>2]=o[m+12>>2];return}R=g<0?g+6.283185307179586:g,R=g>=6.283185307179586?R+-6.283185307179586:R;do if(R<1e-16)g=+G[m>>3]+v,G[E>>3]=g,I=E;else{if(I=+Le(+(R+-3.141592653589793))<1e-16,g=+G[m>>3],I){g=g-v,G[E>>3]=g,I=E;break}if(O=+Qe(+v),v=+ft(+v),g=O*+ft(+g)+ +Qe(+R)*(v*+Qe(+g)),g=g>1?1:g,g=+Jt(+(g<-1?-1:g)),G[E>>3]=g,+Le(+(g+-1.5707963267948966))<1e-16){G[E>>3]=1.5707963267948966,G[E+8>>3]=0;return}if(+Le(+(g+1.5707963267948966))<1e-16){G[E>>3]=-1.5707963267948966,G[E+8>>3]=0;return}if(N=+Qe(+g),R=v*+ft(+R)/N,v=+G[m>>3],g=(O-+ft(+g)*+ft(+v))/+Qe(+v)/N,O=R>1?1:R,g=g>1?1:g,g=+G[m+8>>3]+ +xn(+(O<-1?-1:O),+(g<-1?-1:g)),g>3.141592653589793)do g=g+-6.283185307179586;while(g>3.141592653589793);if(g<-3.141592653589793)do g=g+6.283185307179586;while(g<-3.141592653589793);G[E+8>>3]=g;return}while(0);if(+Le(+(g+-1.5707963267948966))<1e-16){G[I>>3]=1.5707963267948966,G[E+8>>3]=0;return}if(+Le(+(g+1.5707963267948966))<1e-16){G[I>>3]=-1.5707963267948966,G[E+8>>3]=0;return}if(g=+G[m+8>>3],g>3.141592653589793)do g=g+-6.283185307179586;while(g>3.141592653589793);if(g<-3.141592653589793)do g=g+6.283185307179586;while(g<-3.141592653589793);G[E+8>>3]=g}function zl(m,g){return m=m|0,g=g|0,m>>>0>15?(g=4,g|0):(G[g>>3]=+G[20528+(m<<3)>>3],g=0,g|0)}function Ja(m,g){return m=m|0,g=g|0,m>>>0>15?(g=4,g|0):(G[g>>3]=+G[20656+(m<<3)>>3],g=0,g|0)}function hh(m,g){return m=m|0,g=g|0,m>>>0>15?(g=4,g|0):(G[g>>3]=+G[20784+(m<<3)>>3],g=0,g|0)}function fh(m,g){return m=m|0,g=g|0,m>>>0>15?(g=4,g|0):(G[g>>3]=+G[20912+(m<<3)>>3],g=0,g|0)}function el(m,g){m=m|0,g=g|0;var v=0;return m>>>0>15?(g=4,g|0):(v=Zs(7,0,m,((m|0)<0)<<31>>31)|0,v=V(v|0,Ce()|0,120,0)|0,m=Ce()|0,o[g>>2]=v|2,o[g+4>>2]=m,g=0,g|0)}function xa(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0;return Be=+G[g>>3],le=+G[m>>3],Q=+ft(+((Be-le)*.5)),R=+G[g+8>>3],te=+G[m+8>>3],O=+ft(+((R-te)*.5)),N=+Qe(+le),pe=+Qe(+Be),O=Q*Q+O*(pe*N*O),O=+xn(+ +Ze(+O),+ +Ze(+(1-O)))*2,Q=+G[v>>3],Be=+ft(+((Q-Be)*.5)),E=+G[v+8>>3],R=+ft(+((E-R)*.5)),I=+Qe(+Q),R=Be*Be+R*(pe*I*R),R=+xn(+ +Ze(+R),+ +Ze(+(1-R)))*2,Q=+ft(+((le-Q)*.5)),E=+ft(+((te-E)*.5)),E=Q*Q+E*(N*I*E),E=+xn(+ +Ze(+E),+ +Ze(+(1-E)))*2,I=(O+R+E)*.5,+(+Ut(+ +Ze(+(+vt(+(I*.5))*+vt(+((I-O)*.5))*+vt(+((I-R)*.5))*+vt(+((I-E)*.5)))))*4)}function ys(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0;if(N=Ee,Ee=Ee+192|0,R=N+168|0,O=N,I=Eo(m,g,R)|0,I|0)return v=I,Ee=N,v|0;if(Mi(m,g,O)|0&&_n(23313,22742,386,22751),g=o[O>>2]|0,(g|0)>0){if(E=+xa(O+8|0,O+8+(((g|0)!=1&1)<<4)|0,R)+0,(g|0)!=1){m=1;do I=m,m=m+1|0,E=E+ +xa(O+8+(I<<4)|0,O+8+(((m|0)%(g|0)|0)<<4)|0,R);while((m|0)<(g|0))}}else E=0;return G[v>>3]=E,v=0,Ee=N,v|0}function Gt(m,g,v){return m=m|0,g=g|0,v=v|0,m=ys(m,g,v)|0,m|0||(G[v>>3]=+G[v>>3]*6371.007180918475*6371.007180918475),m|0}function lu(m,g,v){return m=m|0,g=g|0,v=v|0,m=ys(m,g,v)|0,m|0||(G[v>>3]=+G[v>>3]*6371.007180918475*6371.007180918475*1e3*1e3),m|0}function wa(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0;if(N=Ee,Ee=Ee+176|0,O=N,m=$s(m,g,O)|0,m|0)return O=m,Ee=N,O|0;if(G[v>>3]=0,m=o[O>>2]|0,(m|0)<=1)return O=0,Ee=N,O|0;g=m+-1|0,m=0,E=+G[O+8>>3],I=+G[O+16>>3],R=0;do m=m+1|0,te=E,E=+G[O+8+(m<<4)>>3],le=+ft(+((E-te)*.5)),Q=I,I=+G[O+8+(m<<4)+8>>3],Q=+ft(+((I-Q)*.5)),Q=le*le+Q*(+Qe(+E)*+Qe(+te)*Q),R=R+ +xn(+ +Ze(+Q),+ +Ze(+(1-Q)))*2;while((m|0)<(g|0));return G[v>>3]=R,O=0,Ee=N,O|0}function Xo(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0;if(N=Ee,Ee=Ee+176|0,O=N,m=$s(m,g,O)|0,m|0)return O=m,R=+G[v>>3],R=R*6371.007180918475,G[v>>3]=R,Ee=N,O|0;if(G[v>>3]=0,m=o[O>>2]|0,(m|0)<=1)return O=0,R=0,R=R*6371.007180918475,G[v>>3]=R,Ee=N,O|0;g=m+-1|0,m=0,E=+G[O+8>>3],I=+G[O+16>>3],R=0;do m=m+1|0,te=E,E=+G[O+8+(m<<4)>>3],le=+ft(+((E-te)*.5)),Q=I,I=+G[O+8+(m<<4)+8>>3],Q=+ft(+((I-Q)*.5)),Q=le*le+Q*(+Qe(+te)*+Qe(+E)*Q),R=R+ +xn(+ +Ze(+Q),+ +Ze(+(1-Q)))*2;while((m|0)!=(g|0));return G[v>>3]=R,O=0,le=R,le=le*6371.007180918475,G[v>>3]=le,Ee=N,O|0}function Au(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0;if(N=Ee,Ee=Ee+176|0,O=N,m=$s(m,g,O)|0,m|0)return O=m,R=+G[v>>3],R=R*6371.007180918475,R=R*1e3,G[v>>3]=R,Ee=N,O|0;if(G[v>>3]=0,m=o[O>>2]|0,(m|0)<=1)return O=0,R=0,R=R*6371.007180918475,R=R*1e3,G[v>>3]=R,Ee=N,O|0;g=m+-1|0,m=0,E=+G[O+8>>3],I=+G[O+16>>3],R=0;do m=m+1|0,te=E,E=+G[O+8+(m<<4)>>3],le=+ft(+((E-te)*.5)),Q=I,I=+G[O+8+(m<<4)+8>>3],Q=+ft(+((I-Q)*.5)),Q=le*le+Q*(+Qe(+te)*+Qe(+E)*Q),R=R+ +xn(+ +Ze(+Q),+ +Ze(+(1-Q)))*2;while((m|0)!=(g|0));return G[v>>3]=R,O=0,le=R,le=le*6371.007180918475,le=le*1e3,G[v>>3]=le,Ee=N,O|0}function $t(m){m=m|0;var g=0,v=0,E=0;return g=h(1,12)|0,g||_n(22832,22787,49,22845),v=m+4|0,E=o[v>>2]|0,E|0?(E=E+8|0,o[E>>2]=g,o[v>>2]=g,g|0):(o[m>>2]|0&&_n(22862,22787,61,22885),E=m,o[E>>2]=g,o[v>>2]=g,g|0)}function bA(m,g){m=m|0,g=g|0;var v=0,E=0;return E=_(24)|0,E||_n(22899,22787,78,22913),o[E>>2]=o[g>>2],o[E+4>>2]=o[g+4>>2],o[E+8>>2]=o[g+8>>2],o[E+12>>2]=o[g+12>>2],o[E+16>>2]=0,g=m+4|0,v=o[g>>2]|0,v|0?(o[v+16>>2]=E,o[g>>2]=E,E|0):(o[m>>2]|0&&_n(22928,22787,82,22913),o[m>>2]=E,o[g>>2]=E,E|0)}function Ol(m){m=m|0;var g=0,v=0,E=0,I=0;if(m)for(E=1;;){if(g=o[m>>2]|0,g|0)do{if(v=o[g>>2]|0,v|0)do I=v,v=o[v+16>>2]|0,l(I);while(v|0);I=g,g=o[g+8>>2]|0,l(I)}while(g|0);if(g=m,m=o[m+8>>2]|0,E||l(g),m)E=0;else break}}function EA(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0,Et=0,Nn=0,zn=0,Sn=0,kn=0,On=0,Wn=0,_r=0,Un=0;if(I=m+8|0,o[I>>2]|0)return Un=1,Un|0;if(E=o[m>>2]|0,!E)return Un=0,Un|0;g=E,v=0;do v=v+1|0,g=o[g+8>>2]|0;while(g|0);if(v>>>0<2)return Un=0,Un|0;Wn=_(v<<2)|0,Wn||_n(22948,22787,317,22967),On=_(v<<5)|0,On||_n(22989,22787,321,22967),o[m>>2]=0,Ft=m+4|0,o[Ft>>2]=0,o[I>>2]=0,v=0,kn=0,Ht=0,pe=0;e:for(;;){if(le=o[E>>2]|0,le){R=0,O=le;do{if(Q=+G[O+8>>3],g=O,O=o[O+16>>2]|0,te=(O|0)==0,I=te?le:O,N=+G[I+8>>3],+Le(+(Q-N))>3.141592653589793){Un=14;break}R=R+(N-Q)*(+G[g>>3]+ +G[I>>3])}while(!te);if((Un|0)==14){Un=0,R=0,g=le;do Je=+G[g+8>>3],Sn=g+16|0,zn=o[Sn>>2]|0,zn=zn|0?zn:le,st=+G[zn+8>>3],R=R+(+G[g>>3]+ +G[zn>>3])*((st<0?st+6.283185307179586:st)-(Je<0?Je+6.283185307179586:Je)),g=o[(g|0?Sn:E)>>2]|0;while(g|0)}R>0?(o[Wn+(kn<<2)>>2]=E,kn=kn+1|0,I=Ht,g=pe):Un=19}else Un=19;if((Un|0)==19){Un=0;do if(v){if(g=v+8|0,o[g>>2]|0){Un=21;break e}if(v=h(1,12)|0,!v){Un=23;break e}o[g>>2]=v,I=v+4|0,O=v,g=pe}else if(pe){I=Ft,O=pe+8|0,g=E,v=m;break}else if(o[m>>2]|0){Un=27;break e}else{I=Ft,O=m,g=E,v=m;break}while(0);if(o[O>>2]=E,o[I>>2]=E,O=On+(Ht<<5)|0,te=o[E>>2]|0,te){for(le=On+(Ht<<5)+8|0,G[le>>3]=17976931348623157e292,pe=On+(Ht<<5)+24|0,G[pe>>3]=17976931348623157e292,G[O>>3]=-17976931348623157e292,Be=On+(Ht<<5)+16|0,G[Be>>3]=-17976931348623157e292,ct=17976931348623157e292,it=-17976931348623157e292,I=0,He=te,Q=17976931348623157e292,Xe=17976931348623157e292,dt=-17976931348623157e292,N=-17976931348623157e292;R=+G[He>>3],Je=+G[He+8>>3],He=o[He+16>>2]|0,ze=(He|0)==0,st=+G[(ze?te:He)+8>>3],R<Q&&(G[le>>3]=R,Q=R),Je<Xe&&(G[pe>>3]=Je,Xe=Je),R>dt?G[O>>3]=R:R=dt,Je>N&&(G[Be>>3]=Je,N=Je),ct=Je>0&Je<ct?Je:ct,it=Je<0&Je>it?Je:it,I=I|+Le(+(Je-st))>3.141592653589793,!ze;)dt=R;I&&(G[Be>>3]=it,G[pe>>3]=ct)}else o[O>>2]=0,o[O+4>>2]=0,o[O+8>>2]=0,o[O+12>>2]=0,o[O+16>>2]=0,o[O+20>>2]=0,o[O+24>>2]=0,o[O+28>>2]=0;I=Ht+1|0}if(Sn=E+8|0,E=o[Sn>>2]|0,o[Sn>>2]=0,E)Ht=I,pe=g;else{Un=45;break}}if((Un|0)==21)_n(22765,22787,35,22799);else if((Un|0)==23)_n(22819,22787,37,22799);else if((Un|0)==27)_n(22862,22787,61,22885);else if((Un|0)==45){e:do if((kn|0)>0){for(Sn=(I|0)==0,Nn=I<<2,zn=(m|0)==0,Et=0,g=0;;){if(mt=o[Wn+(Et<<2)>>2]|0,Sn)Un=73;else{if(Ht=_(Nn)|0,!Ht){Un=50;break}if(Ft=_(Nn)|0,!Ft){Un=52;break}t:do if(zn)v=0;else{for(I=0,v=0,O=m;E=On+(I<<5)|0,tl(o[O>>2]|0,E,o[mt>>2]|0)|0?(o[Ht+(v<<2)>>2]=O,o[Ft+(v<<2)>>2]=E,ze=v+1|0):ze=v,O=o[O+8>>2]|0,O;)I=I+1|0,v=ze;if((ze|0)>0)if(E=o[Ht>>2]|0,(ze|0)==1)v=E;else for(Be=0,He=-1,v=E,pe=E;;){for(te=o[pe>>2]|0,E=0,O=0;I=o[o[Ht+(O<<2)>>2]>>2]|0,(I|0)==(te|0)?le=E:le=E+((tl(I,o[Ft+(O<<2)>>2]|0,o[te>>2]|0)|0)&1)|0,O=O+1|0,(O|0)!=(ze|0);)E=le;if(I=(le|0)>(He|0),v=I?pe:v,E=Be+1|0,(E|0)==(ze|0))break t;Be=E,He=I?le:He,pe=o[Ht+(E<<2)>>2]|0}else v=0}while(0);if(l(Ht),l(Ft),v){if(I=v+4|0,E=o[I>>2]|0,E)v=E+8|0;else if(o[v>>2]|0){Un=70;break}o[v>>2]=mt,o[I>>2]=mt}else Un=73}if((Un|0)==73){if(Un=0,g=o[mt>>2]|0,g|0)do Ft=g,g=o[g+16>>2]|0,l(Ft);while(g|0);l(mt),g=1}if(Et=Et+1|0,(Et|0)>=(kn|0)){_r=g;break e}}(Un|0)==50?_n(23004,22787,249,23023):(Un|0)==52?_n(23042,22787,252,23023):(Un|0)==70&&_n(22862,22787,61,22885)}else _r=0;while(0);return l(Wn),l(On),Un=_r,Un|0}return 0}function tl(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0;if(!(KA(g,v)|0)||(g=ur(g)|0,E=+G[v>>3],I=+G[v+8>>3],I=g&I<0?I+6.283185307179586:I,m=o[m>>2]|0,!m))return m=0,m|0;if(g){g=0,te=I,v=m;e:for(;;){for(;O=+G[v>>3],I=+G[v+8>>3],v=v+16|0,le=o[v>>2]|0,le=le|0?le:m,R=+G[le>>3],N=+G[le+8>>3],O>R?(Q=O,O=N):(Q=R,R=O,O=I,I=N),E=E==R|E==Q?E+2220446049250313e-31:E,!!(E<R|E>Q);)if(v=o[v>>2]|0,!v){v=22;break e}if(N=O<0?O+6.283185307179586:O,O=I<0?I+6.283185307179586:I,te=N==te|O==te?te+-2220446049250313e-31:te,Q=N+(O-N)*((E-R)/(Q-R)),(Q<0?Q+6.283185307179586:Q)>te&&(g=g^1),v=o[v>>2]|0,!v){v=22;break}}if((v|0)==22)return g|0}else{g=0,te=I,v=m;e:for(;;){for(;O=+G[v>>3],I=+G[v+8>>3],v=v+16|0,le=o[v>>2]|0,le=le|0?le:m,R=+G[le>>3],N=+G[le+8>>3],O>R?(Q=O,O=N):(Q=R,R=O,O=I,I=N),E=E==R|E==Q?E+2220446049250313e-31:E,!!(E<R|E>Q);)if(v=o[v>>2]|0,!v){v=22;break e}if(te=O==te|I==te?te+-2220446049250313e-31:te,O+(I-O)*((E-R)/(Q-R))>te&&(g=g^1),v=o[v>>2]|0,!v){v=22;break}}if((v|0)==22)return g|0}return 0}function qs(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0;if(it=Ee,Ee=Ee+32|0,ct=it+16|0,dt=it,R=ne(m|0,g|0,52)|0,Ce()|0,R=R&15,He=ne(v|0,E|0,52)|0,Ce()|0,(R|0)!=(He&15|0))return ct=12,Ee=it,ct|0;if(te=ne(m|0,g|0,45)|0,Ce()|0,te=te&127,le=ne(v|0,E|0,45)|0,Ce()|0,le=le&127,te>>>0>121|le>>>0>121)return ct=5,Ee=it,ct|0;if(He=(te|0)!=(le|0),He){if(N=El(te,le)|0,(N|0)==7)return ct=1,Ee=it,ct|0;Q=El(le,te)|0,(Q|0)==7?_n(23066,23090,161,23100):(ze=N,O=Q)}else ze=0,O=0;pe=tr(te)|0,Be=tr(le)|0,o[ct>>2]=0,o[ct+4>>2]=0,o[ct+8>>2]=0,o[ct+12>>2]=0;do if(ze){if(le=o[4272+(te*28|0)+(ze<<2)>>2]|0,N=(le|0)>0,Be)if(N){te=0,Q=v,N=E;do Q=uc(Q,N)|0,N=Ce()|0,O=Qo(O)|0,(O|0)==1&&(O=Qo(1)|0),te=te+1|0;while((te|0)!=(le|0));le=O,te=Q,Q=N}else le=O,te=v,Q=E;else if(N){te=0,Q=v,N=E;do Q=wA(Q,N)|0,N=Ce()|0,O=Qo(O)|0,te=te+1|0;while((te|0)!=(le|0));le=O,te=Q,Q=N}else le=O,te=v,Q=E;if(_a(te,Q,ct)|0,He||_n(23115,23090,191,23100),N=(pe|0)!=0,O=(Be|0)!=0,N&O&&_n(23142,23090,192,23100),N){if(O=hi(m,g)|0,(O|0)==7){R=5;break}if(ce[21872+(O*7|0)+ze>>0]|0){R=1;break}Q=o[21040+(O*28|0)+(ze<<2)>>2]|0,te=Q}else if(O){if(O=hi(te,Q)|0,(O|0)==7){R=5;break}if(ce[21872+(O*7|0)+le>>0]|0){R=1;break}te=0,Q=o[21040+(le*28|0)+(O<<2)>>2]|0}else te=0,Q=0;if((te|Q|0)<0)R=5;else{if((Q|0)>0){N=ct+4|0,O=0;do Ml(N),O=O+1|0;while((O|0)!=(Q|0))}if(o[dt>>2]=0,o[dt+4>>2]=0,o[dt+8>>2]=0,Ji(dt,ze),R|0)for(;zi(R)|0?Wo(dt):Ki(dt),(R|0)>1;)R=R+-1|0;if((te|0)>0){R=0;do Ml(dt),R=R+1|0;while((R|0)!=(te|0))}Xe=ct+4|0,ci(Xe,dt,Xe),qn(Xe),Xe=51}}else if(_a(v,E,ct)|0,(pe|0)!=0&(Be|0)!=0)if((le|0)!=(te|0)&&_n(23173,23090,261,23100),O=hi(m,g)|0,R=hi(v,E)|0,(O|0)==7|(R|0)==7)R=5;else if(ce[21872+(O*7|0)+R>>0]|0)R=1;else if(O=o[21040+(O*28|0)+(R<<2)>>2]|0,(O|0)>0){N=ct+4|0,R=0;do Ml(N),R=R+1|0;while((R|0)!=(O|0));Xe=51}else Xe=51;else Xe=51;while(0);return(Xe|0)==51&&(R=ct+4|0,o[I>>2]=o[R>>2],o[I+4>>2]=o[R+4>>2],o[I+8>>2]=o[R+8>>2],R=0),ct=R,Ee=it,ct|0}function uu(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0;if(Xe=Ee,Ee=Ee+48|0,te=Xe+36|0,O=Xe+24|0,N=Xe+12|0,Q=Xe,I=ne(m|0,g|0,52)|0,Ce()|0,I=I&15,Be=ne(m|0,g|0,45)|0,Ce()|0,Be=Be&127,Be>>>0>121)return E=5,Ee=Xe,E|0;if(le=tr(Be)|0,ue(I|0,0,52)|0,dt=Ce()|0|134225919,R=E,o[R>>2]=-1,o[R+4>>2]=dt,!I)return I=Ho(v)|0,(I|0)==7||(I=bl(Be,I)|0,(I|0)==127)?(dt=1,Ee=Xe,dt|0):(He=ue(I|0,0,45)|0,ze=Ce()|0,Be=E,ze=o[Be+4>>2]&-1040385|ze,dt=E,o[dt>>2]=o[Be>>2]|He,o[dt+4>>2]=ze,dt=0,Ee=Xe,dt|0);for(o[te>>2]=o[v>>2],o[te+4>>2]=o[v+4>>2],o[te+8>>2]=o[v+8>>2],v=I;;){if(R=v,v=v+-1|0,o[O>>2]=o[te>>2],o[O+4>>2]=o[te+4>>2],o[O+8>>2]=o[te+8>>2],zi(R)|0){if(I=pa(te)|0,I|0){v=13;break}o[N>>2]=o[te>>2],o[N+4>>2]=o[te+4>>2],o[N+8>>2]=o[te+8>>2],Wo(N)}else{if(I=xo(te)|0,I|0){v=13;break}o[N>>2]=o[te>>2],o[N+4>>2]=o[te+4>>2],o[N+8>>2]=o[te+8>>2],Ki(N)}if(vo(O,N,Q),qn(Q),I=E,it=o[I>>2]|0,I=o[I+4>>2]|0,st=(15-R|0)*3|0,ct=ue(7,0,st|0)|0,I=I&~(Ce()|0),st=ue(Ho(Q)|0,0,st|0)|0,I=Ce()|0|I,dt=E,o[dt>>2]=st|it&~ct,o[dt+4>>2]=I,(R|0)<=1){v=14;break}}e:do if((v|0)!=13&&(v|0)==14)if((o[te>>2]|0)<=1&&(o[te+4>>2]|0)<=1&&(o[te+8>>2]|0)<=1){v=Ho(te)|0,I=bl(Be,v)|0,(I|0)==127?Q=0:Q=tr(I)|0;t:do if(v){if(le){if(I=hi(m,g)|0,(I|0)==7){I=5;break e}if(R=o[21248+(I*28|0)+(v<<2)>>2]|0,(R|0)>0){I=v,v=0;do I=wo(I)|0,v=v+1|0;while((v|0)!=(R|0))}else I=v;if((I|0)==1){I=9;break e}v=bl(Be,I)|0,(v|0)==127&&_n(23200,23090,411,23230),tr(v)|0?_n(23245,23090,412,23230):(ze=v,He=R,pe=I)}else ze=I,He=0,pe=v;if(N=o[4272+(Be*28|0)+(pe<<2)>>2]|0,(N|0)<=-1&&_n(23276,23090,419,23230),!Q){if((He|0)<0){I=5;break e}if(He|0){R=E,I=0,v=o[R>>2]|0,R=o[R+4>>2]|0;do v=Ws(v,R)|0,R=Ce()|0,st=E,o[st>>2]=v,o[st+4>>2]=R,I=I+1|0;while((I|0)<(He|0))}if((N|0)<=0){I=ze,v=58;break}for(R=E,I=0,v=o[R>>2]|0,R=o[R+4>>2]|0;;)if(v=Ws(v,R)|0,R=Ce()|0,st=E,o[st>>2]=v,o[st+4>>2]=R,I=I+1|0,(I|0)==(N|0)){I=ze,v=58;break t}}if(O=El(ze,Be)|0,(O|0)==7&&_n(23066,23090,428,23230),I=E,v=o[I>>2]|0,I=o[I+4>>2]|0,(N|0)>0){R=0;do v=Ws(v,I)|0,I=Ce()|0,st=E,o[st>>2]=v,o[st+4>>2]=I,R=R+1|0;while((R|0)!=(N|0))}if(I=hi(v,I)|0,(I|0)==7&&_n(23313,23090,440,23230),v=fA(ze)|0,v=o[(v?21664:21456)+(O*28|0)+(I<<2)>>2]|0,(v|0)<0&&_n(23313,23090,454,23230),!v)I=ze,v=58;else{O=E,I=0,R=o[O>>2]|0,O=o[O+4>>2]|0;do R=au(R,O)|0,O=Ce()|0,st=E,o[st>>2]=R,o[st+4>>2]=O,I=I+1|0;while((I|0)<(v|0));I=ze,v=58}}else if((le|0)!=0&(Q|0)!=0){if(v=hi(m,g)|0,R=E,R=hi(o[R>>2]|0,o[R+4>>2]|0)|0,(v|0)==7|(R|0)==7){I=5;break e}if(R=o[21248+(v*28|0)+(R<<2)>>2]|0,(R|0)<0){I=5;break e}if(!R)v=59;else{N=E,v=0,O=o[N>>2]|0,N=o[N+4>>2]|0;do O=Ws(O,N)|0,N=Ce()|0,st=E,o[st>>2]=O,o[st+4>>2]=N,v=v+1|0;while((v|0)<(R|0));v=58}}else v=58;while(0);if((v|0)==58&&Q&&(v=59),(v|0)==59&&(st=E,(hi(o[st>>2]|0,o[st+4>>2]|0)|0)==1)){I=9;break}st=E,ct=o[st>>2]|0,st=o[st+4>>2]&-1040385,it=ue(I|0,0,45)|0,st=st|(Ce()|0),I=E,o[I>>2]=ct|it,o[I+4>>2]=st,I=0}else I=1;while(0);return st=I,Ee=Xe,st|0}function dh(m,g,v,E,I,R){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0,R=R|0;var O=0,N=0;return N=Ee,Ee=Ee+16|0,O=N,I?m=15:(m=qs(m,g,v,E,O)|0,m||(vA(O,R),m=0)),Ee=N,m|0}function fc(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0;return O=Ee,Ee=Ee+16|0,R=O,E?v=15:(v=tu(v,R)|0,v||(v=uu(m,g,R,I)|0)),Ee=O,v|0}function cu(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0;return Q=Ee,Ee=Ee+32|0,O=Q+12|0,N=Q,R=qs(m,g,m,g,O)|0,R|0?(N=R,Ee=Q,N|0):(m=qs(m,g,v,E,N)|0,m|0?(N=m,Ee=Q,N|0):(O=Cl(O,N)|0,N=I,o[N>>2]=O,o[N+4>>2]=((O|0)<0)<<31>>31,N=0,Ee=Q,N|0))}function hu(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0;return Q=Ee,Ee=Ee+32|0,O=Q+12|0,N=Q,R=qs(m,g,m,g,O)|0,!R&&(R=qs(m,g,v,E,N)|0,!R)?(E=Cl(O,N)|0,E=d(E|0,((E|0)<0)<<31>>31|0,1,0)|0,O=Ce()|0,N=I,o[N>>2]=E,o[N+4>>2]=O,N=0,Ee=Q,N|0):(N=R,Ee=Q,N|0)}function fu(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0,Et=0;if(mt=Ee,Ee=Ee+48|0,O=mt+24|0,N=mt+12|0,Ft=mt,R=qs(m,g,m,g,O)|0,!R&&(R=qs(m,g,v,E,N)|0,!R)){Je=Cl(O,N)|0,Ht=((Je|0)<0)<<31>>31,o[O>>2]=0,o[O+4>>2]=0,o[O+8>>2]=0,o[N>>2]=0,o[N+4>>2]=0,o[N+8>>2]=0,qs(m,g,m,g,O)|0&&_n(23313,23090,691,23299),qs(m,g,v,E,N)|0&&_n(23313,23090,696,23299),qo(O),qo(N),Je?(pe=o[O>>2]|0,ze=+(Je|0),ct=O+4|0,Be=o[ct>>2]|0,it=O+8|0,He=o[it>>2]|0,st=O,E=pe,R=Be,v=He,Xe=+((o[N>>2]|0)-pe|0)/ze,dt=+((o[N+4>>2]|0)-Be|0)/ze,ze=+((o[N+8>>2]|0)-He|0)/ze):(R=O+4|0,v=O+8|0,ct=R,it=v,st=O,E=o[O>>2]|0,R=o[R>>2]|0,v=o[v>>2]|0,Xe=0,dt=0,ze=0),o[Ft>>2]=E,He=Ft+4|0,o[He>>2]=R,Be=Ft+8|0,o[Be>>2]=v;e:do if((Je|0)<0)R=0;else for(le=0,pe=0,R=E;;){te=+(pe>>>0)+4294967296*+(le|0),Et=Xe*te+ +(R|0),Q=dt*te+ +(o[ct>>2]|0),te=ze*te+ +(o[it>>2]|0),v=~~+we(+Et),O=~~+we(+Q),R=~~+we(+te),Et=+Le(+(+(v|0)-Et)),Q=+Le(+(+(O|0)-Q)),te=+Le(+(+(R|0)-te));do if(Et>Q&Et>te)v=0-(O+R)|0,E=O;else if(N=0-v|0,Q>te){E=N-R|0;break}else{E=O,R=N-O|0;break}while(0);if(o[Ft>>2]=v,o[He>>2]=E,o[Be>>2]=R,Qa(Ft),R=uu(m,g,Ft,I+(pe<<3)|0)|0,R|0)break e;if(!((le|0)<(Ht|0)|(le|0)==(Ht|0)&pe>>>0<Je>>>0)){R=0;break e}R=d(pe|0,le|0,1,0)|0,N=Ce()|0,le=N,pe=R,R=o[st>>2]|0}while(0);return Ft=R,Ee=mt,Ft|0}return Ft=R,Ee=mt,Ft|0}function Zs(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0;if((v|0)==0&(E|0)==0)return I=0,R=1,Dt(I|0),R|0;R=m,I=g,m=1,g=0;do O=(v&1|0)==0&!0,m=V((O?1:R)|0,(O?0:I)|0,m|0,g|0)|0,g=Ce()|0,v=oe(v|0,E|0,1)|0,E=Ce()|0,R=V(R|0,I|0,R|0,I|0)|0,I=Ce()|0;while(!((v|0)==0&(E|0)==0));return Dt(g|0),m|0}function Hi(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0;if(!(KA(g,v)|0)||(g=ur(g)|0,E=+G[v>>3],I=+G[v+8>>3],I=g&I<0?I+6.283185307179586:I,Be=o[m>>2]|0,(Be|0)<=0))return Be=0,Be|0;if(pe=o[m+4>>2]|0,g){g=0,le=I,v=-1,m=0;e:for(;;){for(te=m;O=+G[pe+(te<<4)>>3],I=+G[pe+(te<<4)+8>>3],m=(v+2|0)%(Be|0)|0,R=+G[pe+(m<<4)>>3],N=+G[pe+(m<<4)+8>>3],O>R?(Q=O,O=N):(Q=R,R=O,O=I,I=N),E=E==R|E==Q?E+2220446049250313e-31:E,!!(E<R|E>Q);)if(v=te+1|0,(v|0)>=(Be|0)){v=22;break e}else m=te,te=v,v=m;if(N=O<0?O+6.283185307179586:O,O=I<0?I+6.283185307179586:I,le=N==le|O==le?le+-2220446049250313e-31:le,Q=N+(O-N)*((E-R)/(Q-R)),(Q<0?Q+6.283185307179586:Q)>le&&(g=g^1),m=te+1|0,(m|0)>=(Be|0)){v=22;break}else v=te}if((v|0)==22)return g|0}else{g=0,le=I,v=-1,m=0;e:for(;;){for(te=m;O=+G[pe+(te<<4)>>3],I=+G[pe+(te<<4)+8>>3],m=(v+2|0)%(Be|0)|0,R=+G[pe+(m<<4)>>3],N=+G[pe+(m<<4)+8>>3],O>R?(Q=O,O=N):(Q=R,R=O,O=I,I=N),E=E==R|E==Q?E+2220446049250313e-31:E,!!(E<R|E>Q);)if(v=te+1|0,(v|0)>=(Be|0)){v=22;break e}else m=te,te=v,v=m;if(le=O==le|I==le?le+-2220446049250313e-31:le,O+(I-O)*((E-R)/(Q-R))>le&&(g=g^1),m=te+1|0,(m|0)>=(Be|0)){v=22;break}else v=te}if((v|0)==22)return g|0}return 0}function So(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0;if(ze=o[m>>2]|0,!ze){o[g>>2]=0,o[g+4>>2]=0,o[g+8>>2]=0,o[g+12>>2]=0,o[g+16>>2]=0,o[g+20>>2]=0,o[g+24>>2]=0,o[g+28>>2]=0;return}if(Xe=g+8|0,G[Xe>>3]=17976931348623157e292,dt=g+24|0,G[dt>>3]=17976931348623157e292,G[g>>3]=-17976931348623157e292,ct=g+16|0,G[ct>>3]=-17976931348623157e292,!((ze|0)<=0)){for(Be=o[m+4>>2]|0,te=17976931348623157e292,le=-17976931348623157e292,pe=0,m=-1,R=17976931348623157e292,O=17976931348623157e292,Q=-17976931348623157e292,E=-17976931348623157e292,He=0;v=+G[Be+(He<<4)>>3],N=+G[Be+(He<<4)+8>>3],m=m+2|0,I=+G[Be+(((m|0)==(ze|0)?0:m)<<4)+8>>3],v<R&&(G[Xe>>3]=v,R=v),N<O&&(G[dt>>3]=N,O=N),v>Q?G[g>>3]=v:v=Q,N>E&&(G[ct>>3]=N,E=N),te=N>0&N<te?N:te,le=N<0&N>le?N:le,pe=pe|+Le(+(N-I))>3.141592653589793,m=He+1|0,(m|0)!=(ze|0);)it=He,Q=v,He=m,m=it;pe&&(G[ct>>3]=le,G[dt>>3]=te)}}function du(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0,Ft=0,mt=0;if(ze=o[m>>2]|0,ze){if(Xe=g+8|0,G[Xe>>3]=17976931348623157e292,dt=g+24|0,G[dt>>3]=17976931348623157e292,G[g>>3]=-17976931348623157e292,ct=g+16|0,G[ct>>3]=-17976931348623157e292,(ze|0)>0){for(I=o[m+4>>2]|0,Be=17976931348623157e292,He=-17976931348623157e292,E=0,v=-1,Q=17976931348623157e292,te=17976931348623157e292,pe=-17976931348623157e292,O=-17976931348623157e292,it=0;R=+G[I+(it<<4)>>3],le=+G[I+(it<<4)+8>>3],Ft=v+2|0,N=+G[I+(((Ft|0)==(ze|0)?0:Ft)<<4)+8>>3],R<Q&&(G[Xe>>3]=R,Q=R),le<te&&(G[dt>>3]=le,te=le),R>pe?G[g>>3]=R:R=pe,le>O&&(G[ct>>3]=le,O=le),Be=le>0&le<Be?le:Be,He=le<0&le>He?le:He,E=E|+Le(+(le-N))>3.141592653589793,v=it+1|0,(v|0)!=(ze|0);)Ft=it,pe=R,it=v,v=Ft;E&&(G[ct>>3]=He,G[dt>>3]=Be)}}else o[g>>2]=0,o[g+4>>2]=0,o[g+8>>2]=0,o[g+12>>2]=0,o[g+16>>2]=0,o[g+20>>2]=0,o[g+24>>2]=0,o[g+28>>2]=0;if(Ft=m+8|0,v=o[Ft>>2]|0,!((v|0)<=0)){Ht=m+12|0,Je=0;do if(I=o[Ht>>2]|0,E=Je,Je=Je+1|0,dt=g+(Je<<5)|0,ct=o[I+(E<<3)>>2]|0,ct){if(it=g+(Je<<5)+8|0,G[it>>3]=17976931348623157e292,m=g+(Je<<5)+24|0,G[m>>3]=17976931348623157e292,G[dt>>3]=-17976931348623157e292,st=g+(Je<<5)+16|0,G[st>>3]=-17976931348623157e292,(ct|0)>0){for(ze=o[I+(E<<3)+4>>2]|0,Be=17976931348623157e292,He=-17976931348623157e292,I=0,E=-1,Xe=0,Q=17976931348623157e292,te=17976931348623157e292,le=-17976931348623157e292,O=-17976931348623157e292;R=+G[ze+(Xe<<4)>>3],pe=+G[ze+(Xe<<4)+8>>3],E=E+2|0,N=+G[ze+(((E|0)==(ct|0)?0:E)<<4)+8>>3],R<Q&&(G[it>>3]=R,Q=R),pe<te&&(G[m>>3]=pe,te=pe),R>le?G[dt>>3]=R:R=le,pe>O&&(G[st>>3]=pe,O=pe),Be=pe>0&pe<Be?pe:Be,He=pe<0&pe>He?pe:He,I=I|+Le(+(pe-N))>3.141592653589793,E=Xe+1|0,(E|0)!=(ct|0);)mt=Xe,Xe=E,le=R,E=mt;I&&(G[st>>3]=He,G[m>>3]=Be)}}else o[dt>>2]=0,o[dt+4>>2]=0,o[dt+8>>2]=0,o[dt+12>>2]=0,o[dt+16>>2]=0,o[dt+20>>2]=0,o[dt+24>>2]=0,o[dt+28>>2]=0,v=o[Ft>>2]|0;while((Je|0)<(v|0))}}function ba(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;if(!(Hi(m,g,v)|0))return I=0,I|0;if(I=m+8|0,(o[I>>2]|0)<=0)return I=1,I|0;for(E=m+12|0,m=0;;){if(R=m,m=m+1|0,Hi((o[E>>2]|0)+(R<<3)|0,g+(m<<5)|0,v)|0){m=0,E=6;break}if((m|0)>=(o[I>>2]|0)){m=1,E=6;break}}return(E|0)==6?m|0:0}function Wr(){return 8}function Fl(){return 16}function dc(){return 168}function _s(){return 8}function Fr(){return 16}function nl(){return 12}function Nl(){return 8}function pu(m){return m=m|0,+(+((o[m>>2]|0)>>>0)+4294967296*+(o[m+4>>2]|0))}function pc(m){m=m|0;var g=0,v=0;return v=+G[m>>3],g=+G[m+8>>3],+ +Ze(+(v*v+g*g))}function gu(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0;te=+G[m>>3],Q=+G[g>>3]-te,N=+G[m+8>>3],O=+G[g+8>>3]-N,pe=+G[v>>3],R=+G[E>>3]-pe,Be=+G[v+8>>3],le=+G[E+8>>3]-Be,R=(R*(N-Be)-(te-pe)*le)/(Q*le-O*R),G[I>>3]=te+Q*R,G[I+8>>3]=N+O*R}function gc(m,g){return m=m|0,g=g|0,+Le(+(+G[m>>3]-+G[g>>3]))<11920928955078125e-23?(g=+Le(+(+G[m+8>>3]-+G[g+8>>3]))<11920928955078125e-23,g|0):(g=0,g|0)}function Pr(m,g){m=m|0,g=g|0;var v=0,E=0,I=0;return I=+G[m>>3]-+G[g>>3],E=+G[m+8>>3]-+G[g+8>>3],v=+G[m+16>>3]-+G[g+16>>3],+(I*I+E*E+v*v)}function Ul(m,g){m=m|0,g=g|0;var v=0,E=0,I=0;v=+G[m>>3],E=+Qe(+v),v=+ft(+v),G[g+16>>3]=v,v=+G[m+8>>3],I=E*+Qe(+v),G[g>>3]=I,v=E*+ft(+v),G[g+8>>3]=v}function sn(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;if(R=Ee,Ee=Ee+16|0,I=R,E=Cr(m,g)|0,(v+-1|0)>>>0>5||(E=(E|0)!=0,(v|0)==1&E))return I=-1,Ee=R,I|0;do if(on(m,g,I)|0)E=-1;else if(E){E=((o[21936+(v<<2)>>2]|0)+5-(o[I>>2]|0)|0)%5|0;break}else{E=((o[21968+(v<<2)>>2]|0)+6-(o[I>>2]|0)|0)%6|0;break}while(0);return I=E,Ee=R,I|0}function on(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0,te=0;if(te=Ee,Ee=Ee+32|0,O=te+16|0,N=te,E=ss(m,g,O)|0,E|0)return v=E,Ee=te,v|0;R=Za(m,g)|0,Q=hi(m,g)|0,YA(R,N),E=XA(R,o[O>>2]|0)|0;e:do if(tr(R)|0){do switch(R|0){case 4:{m=0;break}case 14:{m=1;break}case 24:{m=2;break}case 38:{m=3;break}case 49:{m=4;break}case 58:{m=5;break}case 63:{m=6;break}case 72:{m=7;break}case 83:{m=8;break}case 97:{m=9;break}case 107:{m=10;break}case 117:{m=11;break}default:{E=1;break e}}while(0);if(I=o[22e3+(m*24|0)+8>>2]|0,g=o[22e3+(m*24|0)+16>>2]|0,m=o[O>>2]|0,(m|0)!=(o[N>>2]|0)&&(N=fA(R)|0,m=o[O>>2]|0,N|(m|0)==(g|0)&&(E=(E+1|0)%6|0)),(Q|0)==3&(m|0)==(g|0)){E=(E+5|0)%6|0,I=22;break}(Q|0)==5&(m|0)==(I|0)&&(E=(E+1|0)%6|0),I=22}else I=22;while(0);return(I|0)==22&&(o[v>>2]=E,E=0),v=E,Ee=te,v|0}function wn(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0;if(st=Ee,Ee=Ee+32|0,it=st+24|0,dt=st+20|0,ze=st+8|0,He=st+16|0,Be=st,Q=(Cr(m,g)|0)==0,Q=Q?6:5,le=ne(m|0,g|0,52)|0,Ce()|0,le=le&15,Q>>>0<=v>>>0)return E=2,Ee=st,E|0;pe=(le|0)==0,!pe&&(Xe=ue(7,0,(le^15)*3|0)|0,(Xe&m|0)==0&((Ce()|0)&g|0)==0)?I=v:R=4;e:do if((R|0)==4){if(I=(Cr(m,g)|0)!=0,((I?4:5)|0)<(v|0)||on(m,g,it)|0||(R=(o[it>>2]|0)+v|0,I?I=22288+(((R|0)%5|0)<<2)|0:I=22320+(((R|0)%6|0)<<2)|0,Xe=o[I>>2]|0,(Xe|0)==7))return E=1,Ee=st,E|0;o[dt>>2]=0,I=Ve(m,g,Xe,dt,ze)|0;do if(!I){if(N=ze,te=o[N>>2]|0,N=o[N+4>>2]|0,O=N>>>0<g>>>0|(N|0)==(g|0)&te>>>0<m>>>0,R=O?te:m,O=O?N:g,!pe&&(pe=ue(7,0,(le^15)*3|0)|0,(te&pe|0)==0&(N&(Ce()|0)|0)==0))I=v;else{if(N=(v+-1+Q|0)%(Q|0)|0,I=Cr(m,g)|0,(N|0)<0&&_n(23313,23315,245,23324),Q=(I|0)!=0,((Q?4:5)|0)<(N|0)&&_n(23313,23315,245,23324),on(m,g,it)|0&&_n(23313,23315,245,23324),I=(o[it>>2]|0)+N|0,Q?I=22288+(((I|0)%5|0)<<2)|0:I=22320+(((I|0)%6|0)<<2)|0,N=o[I>>2]|0,(N|0)==7&&_n(23313,23315,245,23324),o[He>>2]=0,I=Ve(m,g,N,He,Be)|0,I|0)break;te=Be,Q=o[te>>2]|0,te=o[te+4>>2]|0;do if(te>>>0<O>>>0|(te|0)==(O|0)&Q>>>0<R>>>0){if(Cr(Q,te)|0?R=At(Q,te,m,g)|0:R=o[22384+((((o[He>>2]|0)+(o[22352+(N<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,I=Cr(Q,te)|0,(R+-1|0)>>>0>5){I=-1,R=Q,O=te;break}if(I=(I|0)!=0,(R|0)==1&I){I=-1,R=Q,O=te;break}do if(on(Q,te,it)|0)I=-1;else if(I){I=((o[21936+(R<<2)>>2]|0)+5-(o[it>>2]|0)|0)%5|0;break}else{I=((o[21968+(R<<2)>>2]|0)+6-(o[it>>2]|0)|0)%6|0;break}while(0);R=Q,O=te}else I=v;while(0);N=ze,te=o[N>>2]|0,N=o[N+4>>2]|0}if((R|0)==(te|0)&(O|0)==(N|0)){if(Q=(Cr(te,N)|0)!=0,Q?m=At(te,N,m,g)|0:m=o[22384+((((o[dt>>2]|0)+(o[22352+(Xe<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,I=Cr(te,N)|0,(m+-1|0)>>>0<=5&&(ct=(I|0)!=0,!((m|0)==1&ct)))do if(on(te,N,it)|0)I=-1;else if(ct){I=((o[21936+(m<<2)>>2]|0)+5-(o[it>>2]|0)|0)%5|0;break}else{I=((o[21968+(m<<2)>>2]|0)+6-(o[it>>2]|0)|0)%6|0;break}while(0);else I=-1;I=I+1|0,I=(I|0)==6|Q&(I|0)==5?0:I}g=O,m=R;break e}while(0);return E=I,Ee=st,E|0}while(0);return ct=ue(I|0,0,56)|0,it=Ce()|0|g&-2130706433|536870912,o[E>>2]=ct|m,o[E+4>>2]=it,E=0,Ee=st,E|0}function as(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;return R=(Cr(m,g)|0)==0,E=wn(m,g,0,v)|0,I=(E|0)==0,R?!I||(E=wn(m,g,1,v+8|0)|0,E|0)||(E=wn(m,g,2,v+16|0)|0,E|0)||(E=wn(m,g,3,v+24|0)|0,E|0)||(E=wn(m,g,4,v+32|0)|0,E)?(R=E,R|0):wn(m,g,5,v+40|0)|0:!I||(E=wn(m,g,1,v+8|0)|0,E|0)||(E=wn(m,g,2,v+16|0)|0,E|0)||(E=wn(m,g,3,v+24|0)|0,E|0)||(E=wn(m,g,4,v+32|0)|0,E|0)?(R=E,R|0):(R=v+40|0,o[R>>2]=0,o[R+4>>2]=0,R=0,R|0)}function Ko(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0,N=0,Q=0;return Q=Ee,Ee=Ee+192|0,I=Q,R=Q+168|0,O=ne(m|0,g|0,56)|0,Ce()|0,O=O&7,N=g&-2130706433|134217728,E=ss(m,N,R)|0,E|0?(N=E,Ee=Q,N|0):(g=ne(m|0,g|0,52)|0,Ce()|0,g=g&15,Cr(m,N)|0?Zo(R,g,O,1,I):su(R,g,O,1,I),N=I+8|0,o[v>>2]=o[N>>2],o[v+4>>2]=o[N+4>>2],o[v+8>>2]=o[N+8>>2],o[v+12>>2]=o[N+12>>2],N=0,Ee=Q,N|0)}function Xr(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0;return I=Ee,Ee=Ee+16|0,v=I,!(!0&(g&2013265920|0)==536870912)||(E=g&-2130706433|134217728,!(ya(m,E)|0))?(E=0,Ee=I,E|0):(R=ne(m|0,g|0,56)|0,Ce()|0,R=(wn(m,E,R&7,v)|0)==0,E=v,E=R&((o[E>>2]|0)==(m|0)?(o[E+4>>2]|0)==(g|0):0)&1,Ee=I,E|0)}function Ys(m,g,v){m=m|0,g=g|0,v=v|0;var E=0;(g|0)>0?(E=h(g,4)|0,o[m>>2]=E,E||_n(23337,23360,40,23374)):o[m>>2]=0,o[m+4>>2]=g,o[m+8>>2]=0,o[m+12>>2]=v}function Ds(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0;I=m+4|0,R=m+12|0,O=m+8|0;e:for(;;){for(v=o[I>>2]|0,g=0;;){if((g|0)>=(v|0))break e;if(E=o[m>>2]|0,N=o[E+(g<<2)>>2]|0,!N)g=g+1|0;else break}g=E+(~~(+Le(+(+lt(10,+ +(15-(o[R>>2]|0)|0))*(+G[N>>3]+ +G[N+8>>3])))%+(v|0))>>>0<<2)|0,v=o[g>>2]|0;t:do if(v|0){if(E=N+32|0,(v|0)==(N|0))o[g>>2]=o[E>>2];else{if(v=v+32|0,g=o[v>>2]|0,!g)break;for(;(g|0)!=(N|0);)if(v=g+32|0,g=o[v>>2]|0,!g)break t;o[v>>2]=o[E>>2]}l(N),o[O>>2]=(o[O>>2]|0)+-1}while(0)}l(o[m>>2]|0)}function Xs(m){m=m|0;var g=0,v=0,E=0;for(E=o[m+4>>2]|0,v=0;;){if((v|0)>=(E|0)){g=0,v=4;break}if(g=o[(o[m>>2]|0)+(v<<2)>>2]|0,!g)v=v+1|0;else{v=4;break}}return(v|0)==4?g|0:0}function It(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0;if(v=~~(+Le(+(+lt(10,+ +(15-(o[m+12>>2]|0)|0))*(+G[g>>3]+ +G[g+8>>3])))%+(o[m+4>>2]|0))>>>0,v=(o[m>>2]|0)+(v<<2)|0,E=o[v>>2]|0,!E)return R=1,R|0;R=g+32|0;do if((E|0)!=(g|0)){if(v=o[E+32>>2]|0,!v)return R=1,R|0;for(I=v;;){if((I|0)==(g|0)){I=8;break}if(v=o[I+32>>2]|0,v)E=I,I=v;else{v=1,I=10;break}}if((I|0)==8){o[E+32>>2]=o[R>>2];break}else if((I|0)==10)return v|0}else o[v>>2]=o[R>>2];while(0);return l(g),R=m+8|0,o[R>>2]=(o[R>>2]|0)+-1,R=0,R|0}function Rt(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0;R=_(40)|0,R||_n(23390,23360,98,23403),o[R>>2]=o[g>>2],o[R+4>>2]=o[g+4>>2],o[R+8>>2]=o[g+8>>2],o[R+12>>2]=o[g+12>>2],I=R+16|0,o[I>>2]=o[v>>2],o[I+4>>2]=o[v+4>>2],o[I+8>>2]=o[v+8>>2],o[I+12>>2]=o[v+12>>2],o[R+32>>2]=0,I=~~(+Le(+(+lt(10,+ +(15-(o[m+12>>2]|0)|0))*(+G[g>>3]+ +G[g+8>>3])))%+(o[m+4>>2]|0))>>>0,I=(o[m>>2]|0)+(I<<2)|0,E=o[I>>2]|0;do if(!E)o[I>>2]=R;else{for(;!(Ls(E,g)|0&&Ls(E+16|0,v)|0);)if(I=o[E+32>>2]|0,E=I|0?I:E,!(o[E+32>>2]|0)){O=10;break}if((O|0)==10){o[E+32>>2]=R;break}return l(R),O=E,O|0}while(0);return O=m+8|0,o[O>>2]=(o[O>>2]|0)+1,O=R,O|0}function Kr(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0;if(I=~~(+Le(+(+lt(10,+ +(15-(o[m+12>>2]|0)|0))*(+G[g>>3]+ +G[g+8>>3])))%+(o[m+4>>2]|0))>>>0,I=o[(o[m>>2]|0)+(I<<2)>>2]|0,!I)return v=0,v|0;if(!v){for(m=I;;){if(Ls(m,g)|0){E=10;break}if(m=o[m+32>>2]|0,!m){m=0,E=10;break}}if((E|0)==10)return m|0}for(m=I;;){if(Ls(m,g)|0&&Ls(m+16|0,v)|0){E=10;break}if(m=o[m+32>>2]|0,!m){m=0,E=10;break}}return(E|0)==10?m|0:0}function rl(m,g){m=m|0,g=g|0;var v=0;if(v=~~(+Le(+(+lt(10,+ +(15-(o[m+12>>2]|0)|0))*(+G[g>>3]+ +G[g+8>>3])))%+(o[m+4>>2]|0))>>>0,m=o[(o[m>>2]|0)+(v<<2)>>2]|0,!m)return v=0,v|0;for(;;){if(Ls(m,g)|0){g=5;break}if(m=o[m+32>>2]|0,!m){m=0,g=5;break}}return(g|0)==5?m|0:0}function Ks(){return 23424}function L(m){return m=+m,+ +je(+m)}function c(m){return m=+m,~~+L(m)|0}function _(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0,Xe=0,dt=0,ct=0,it=0,st=0,Je=0,Ht=0;Ht=Ee,Ee=Ee+16|0,Be=Ht;do if(m>>>0<245){if(te=m>>>0<11?16:m+11&-8,m=te>>>3,pe=o[5857]|0,v=pe>>>m,v&3|0)return g=(v&1^1)+m|0,m=23468+(g<<1<<2)|0,v=m+8|0,E=o[v>>2]|0,I=E+8|0,R=o[I>>2]|0,(R|0)==(m|0)?o[5857]=pe&~(1<<g):(o[R+12>>2]=m,o[v>>2]=R),Je=g<<3,o[E+4>>2]=Je|3,Je=E+Je+4|0,o[Je>>2]=o[Je>>2]|1,Je=I,Ee=Ht,Je|0;if(le=o[5859]|0,te>>>0>le>>>0){if(v|0)return g=2<<m,g=v<<m&(g|0-g),g=(g&0-g)+-1|0,N=g>>>12&16,g=g>>>N,v=g>>>5&8,g=g>>>v,R=g>>>2&4,g=g>>>R,m=g>>>1&2,g=g>>>m,E=g>>>1&1,E=(v|N|R|m|E)+(g>>>E)|0,g=23468+(E<<1<<2)|0,m=g+8|0,R=o[m>>2]|0,N=R+8|0,v=o[N>>2]|0,(v|0)==(g|0)?(m=pe&~(1<<E),o[5857]=m):(o[v+12>>2]=g,o[m>>2]=v,m=pe),Je=E<<3,O=Je-te|0,o[R+4>>2]=te|3,I=R+te|0,o[I+4>>2]=O|1,o[R+Je>>2]=O,le|0&&(E=o[5862]|0,g=le>>>3,v=23468+(g<<1<<2)|0,g=1<<g,m&g?(m=v+8|0,g=o[m>>2]|0):(o[5857]=m|g,g=v,m=v+8|0),o[m>>2]=E,o[g+12>>2]=E,o[E+8>>2]=g,o[E+12>>2]=v),o[5859]=O,o[5862]=I,Je=N,Ee=Ht,Je|0;if(R=o[5858]|0,R){for(v=(R&0-R)+-1|0,I=v>>>12&16,v=v>>>I,E=v>>>5&8,v=v>>>E,O=v>>>2&4,v=v>>>O,N=v>>>1&2,v=v>>>N,Q=v>>>1&1,Q=o[23732+((E|I|O|N|Q)+(v>>>Q)<<2)>>2]|0,v=Q,N=Q,Q=(o[Q+4>>2]&-8)-te|0;m=o[v+16>>2]|0,!(!m&&(m=o[v+20>>2]|0,!m));)O=(o[m+4>>2]&-8)-te|0,I=O>>>0<Q>>>0,v=m,N=I?m:N,Q=I?O:Q;if(O=N+te|0,O>>>0>N>>>0){I=o[N+24>>2]|0,g=o[N+12>>2]|0;do if((g|0)==(N|0)){if(m=N+20|0,g=o[m>>2]|0,!g&&(m=N+16|0,g=o[m>>2]|0,!g)){v=0;break}for(;;)if(E=g+20|0,v=o[E>>2]|0,v)g=v,m=E;else if(E=g+16|0,v=o[E>>2]|0,v)g=v,m=E;else break;o[m>>2]=0,v=g}else v=o[N+8>>2]|0,o[v+12>>2]=g,o[g+8>>2]=v,v=g;while(0);do if(I|0){if(g=o[N+28>>2]|0,m=23732+(g<<2)|0,(N|0)==(o[m>>2]|0)){if(o[m>>2]=v,!v){o[5858]=R&~(1<<g);break}}else if(Je=I+16|0,o[((o[Je>>2]|0)==(N|0)?Je:I+20|0)>>2]=v,!v)break;o[v+24>>2]=I,g=o[N+16>>2]|0,g|0&&(o[v+16>>2]=g,o[g+24>>2]=v),g=o[N+20>>2]|0,g|0&&(o[v+20>>2]=g,o[g+24>>2]=v)}while(0);return Q>>>0<16?(Je=Q+te|0,o[N+4>>2]=Je|3,Je=N+Je+4|0,o[Je>>2]=o[Je>>2]|1):(o[N+4>>2]=te|3,o[O+4>>2]=Q|1,o[O+Q>>2]=Q,le|0&&(E=o[5862]|0,g=le>>>3,v=23468+(g<<1<<2)|0,g=1<<g,g&pe?(m=v+8|0,g=o[m>>2]|0):(o[5857]=g|pe,g=v,m=v+8|0),o[m>>2]=E,o[g+12>>2]=E,o[E+8>>2]=g,o[E+12>>2]=v),o[5859]=Q,o[5862]=O),Je=N+8|0,Ee=Ht,Je|0}else pe=te}else pe=te}else pe=te}else if(m>>>0<=4294967231)if(m=m+11|0,te=m&-8,E=o[5858]|0,E){I=0-te|0,m=m>>>8,m?te>>>0>16777215?Q=31:(pe=(m+1048320|0)>>>16&8,Xe=m<<pe,N=(Xe+520192|0)>>>16&4,Xe=Xe<<N,Q=(Xe+245760|0)>>>16&2,Q=14-(N|pe|Q)+(Xe<<Q>>>15)|0,Q=te>>>(Q+7|0)&1|Q<<1):Q=0,v=o[23732+(Q<<2)>>2]|0;e:do if(!v)v=0,m=0,Xe=61;else for(m=0,N=te<<((Q|0)==31?0:25-(Q>>>1)|0),R=0;;){if(O=(o[v+4>>2]&-8)-te|0,O>>>0<I>>>0)if(O)m=v,I=O;else{m=v,I=0,Xe=65;break e}if(Xe=o[v+20>>2]|0,v=o[v+16+(N>>>31<<2)>>2]|0,R=(Xe|0)==0|(Xe|0)==(v|0)?R:Xe,v)N=N<<1;else{v=R,Xe=61;break}}while(0);if((Xe|0)==61){if((v|0)==0&(m|0)==0){if(m=2<<Q,m=(m|0-m)&E,!m){pe=te;break}pe=(m&0-m)+-1|0,O=pe>>>12&16,pe=pe>>>O,R=pe>>>5&8,pe=pe>>>R,N=pe>>>2&4,pe=pe>>>N,Q=pe>>>1&2,pe=pe>>>Q,v=pe>>>1&1,m=0,v=o[23732+((R|O|N|Q|v)+(pe>>>v)<<2)>>2]|0}v?Xe=65:(N=m,O=I)}if((Xe|0)==65)for(R=v;;)if(pe=(o[R+4>>2]&-8)-te|0,v=pe>>>0<I>>>0,I=v?pe:I,m=v?R:m,v=o[R+16>>2]|0,v||(v=o[R+20>>2]|0),v)R=v;else{N=m,O=I;break}if(N|0&&O>>>0<((o[5859]|0)-te|0)>>>0&&(le=N+te|0,le>>>0>N>>>0)){R=o[N+24>>2]|0,g=o[N+12>>2]|0;do if((g|0)==(N|0)){if(m=N+20|0,g=o[m>>2]|0,!g&&(m=N+16|0,g=o[m>>2]|0,!g)){g=0;break}for(;;)if(I=g+20|0,v=o[I>>2]|0,v)g=v,m=I;else if(I=g+16|0,v=o[I>>2]|0,v)g=v,m=I;else break;o[m>>2]=0}else Je=o[N+8>>2]|0,o[Je+12>>2]=g,o[g+8>>2]=Je;while(0);do if(R){if(m=o[N+28>>2]|0,v=23732+(m<<2)|0,(N|0)==(o[v>>2]|0)){if(o[v>>2]=g,!g){E=E&~(1<<m),o[5858]=E;break}}else if(Je=R+16|0,o[((o[Je>>2]|0)==(N|0)?Je:R+20|0)>>2]=g,!g)break;o[g+24>>2]=R,m=o[N+16>>2]|0,m|0&&(o[g+16>>2]=m,o[m+24>>2]=g),m=o[N+20>>2]|0,m&&(o[g+20>>2]=m,o[m+24>>2]=g)}while(0);e:do if(O>>>0<16)Je=O+te|0,o[N+4>>2]=Je|3,Je=N+Je+4|0,o[Je>>2]=o[Je>>2]|1;else{if(o[N+4>>2]=te|3,o[le+4>>2]=O|1,o[le+O>>2]=O,g=O>>>3,O>>>0<256){v=23468+(g<<1<<2)|0,m=o[5857]|0,g=1<<g,m&g?(m=v+8|0,g=o[m>>2]|0):(o[5857]=m|g,g=v,m=v+8|0),o[m>>2]=le,o[g+12>>2]=le,o[le+8>>2]=g,o[le+12>>2]=v;break}if(g=O>>>8,g?O>>>0>16777215?v=31:(st=(g+1048320|0)>>>16&8,Je=g<<st,it=(Je+520192|0)>>>16&4,Je=Je<<it,v=(Je+245760|0)>>>16&2,v=14-(it|st|v)+(Je<<v>>>15)|0,v=O>>>(v+7|0)&1|v<<1):v=0,g=23732+(v<<2)|0,o[le+28>>2]=v,m=le+16|0,o[m+4>>2]=0,o[m>>2]=0,m=1<<v,!(E&m)){o[5858]=E|m,o[g>>2]=le,o[le+24>>2]=g,o[le+12>>2]=le,o[le+8>>2]=le;break}g=o[g>>2]|0;t:do if((o[g+4>>2]&-8|0)!=(O|0)){for(E=O<<((v|0)==31?0:25-(v>>>1)|0);v=g+16+(E>>>31<<2)|0,m=o[v>>2]|0,!!m;)if((o[m+4>>2]&-8|0)==(O|0)){g=m;break t}else E=E<<1,g=m;o[v>>2]=le,o[le+24>>2]=g,o[le+12>>2]=le,o[le+8>>2]=le;break e}while(0);st=g+8|0,Je=o[st>>2]|0,o[Je+12>>2]=le,o[st>>2]=le,o[le+8>>2]=Je,o[le+12>>2]=g,o[le+24>>2]=0}while(0);return Je=N+8|0,Ee=Ht,Je|0}else pe=te}else pe=te;else pe=-1;while(0);if(v=o[5859]|0,v>>>0>=pe>>>0)return g=v-pe|0,m=o[5862]|0,g>>>0>15?(Je=m+pe|0,o[5862]=Je,o[5859]=g,o[Je+4>>2]=g|1,o[m+v>>2]=g,o[m+4>>2]=pe|3):(o[5859]=0,o[5862]=0,o[m+4>>2]=v|3,Je=m+v+4|0,o[Je>>2]=o[Je>>2]|1),Je=m+8|0,Ee=Ht,Je|0;if(O=o[5860]|0,O>>>0>pe>>>0)return it=O-pe|0,o[5860]=it,Je=o[5863]|0,st=Je+pe|0,o[5863]=st,o[st+4>>2]=it|1,o[Je+4>>2]=pe|3,Je=Je+8|0,Ee=Ht,Je|0;if(o[5975]|0?m=o[5977]|0:(o[5977]=4096,o[5976]=4096,o[5978]=-1,o[5979]=-1,o[5980]=0,o[5968]=0,o[5975]=Be&-16^1431655768,m=4096),N=pe+48|0,Q=pe+47|0,R=m+Q|0,I=0-m|0,te=R&I,te>>>0<=pe>>>0||(m=o[5967]|0,m|0&&(le=o[5965]|0,Be=le+te|0,Be>>>0<=le>>>0|Be>>>0>m>>>0)))return Je=0,Ee=Ht,Je|0;e:do if(o[5968]&4)g=0,Xe=143;else{v=o[5863]|0;t:do if(v){for(E=23876;Be=o[E>>2]|0,!(Be>>>0<=v>>>0&&(Be+(o[E+4>>2]|0)|0)>>>0>v>>>0);)if(m=o[E+8>>2]|0,m)E=m;else{Xe=128;break t}if(g=R-O&I,g>>>0<2147483647)if(m=be(g|0)|0,(m|0)==((o[E>>2]|0)+(o[E+4>>2]|0)|0)){if((m|0)!=-1){O=g,R=m,Xe=145;break e}}else E=m,Xe=136;else g=0}else Xe=128;while(0);do if((Xe|0)==128)if(v=be(0)|0,(v|0)!=-1&&(g=v,He=o[5976]|0,ze=He+-1|0,g=(ze&g|0?(ze+g&0-He)-g|0:0)+te|0,He=o[5965]|0,ze=g+He|0,g>>>0>pe>>>0&g>>>0<2147483647)){if(Be=o[5967]|0,Be|0&&ze>>>0<=He>>>0|ze>>>0>Be>>>0){g=0;break}if(m=be(g|0)|0,(m|0)==(v|0)){O=g,R=v,Xe=145;break e}else E=m,Xe=136}else g=0;while(0);do if((Xe|0)==136){if(v=0-g|0,!(N>>>0>g>>>0&(g>>>0<2147483647&(E|0)!=-1)))if((E|0)==-1){g=0;break}else{O=g,R=E,Xe=145;break e}if(m=o[5977]|0,m=Q-g+m&0-m,m>>>0>=2147483647){O=g,R=E,Xe=145;break e}if((be(m|0)|0)==-1){be(v|0)|0,g=0;break}else{O=m+g|0,R=E,Xe=145;break e}}while(0);o[5968]=o[5968]|4,Xe=143}while(0);if((Xe|0)==143&&te>>>0<2147483647&&(it=be(te|0)|0,ze=be(0)|0,dt=ze-it|0,ct=dt>>>0>(pe+40|0)>>>0,!((it|0)==-1|ct^1|it>>>0<ze>>>0&((it|0)!=-1&(ze|0)!=-1)^1))&&(O=ct?dt:g,R=it,Xe=145),(Xe|0)==145){g=(o[5965]|0)+O|0,o[5965]=g,g>>>0>(o[5966]|0)>>>0&&(o[5966]=g),Q=o[5863]|0;e:do if(Q){for(g=23876;;){if(m=o[g>>2]|0,v=o[g+4>>2]|0,(R|0)==(m+v|0)){Xe=154;break}if(E=o[g+8>>2]|0,E)g=E;else break}if((Xe|0)==154&&(st=g+4|0,(o[g+12>>2]&8|0)==0)&&R>>>0>Q>>>0&m>>>0<=Q>>>0){o[st>>2]=v+O,Je=(o[5860]|0)+O|0,it=Q+8|0,it=it&7|0?0-it&7:0,st=Q+it|0,it=Je-it|0,o[5863]=st,o[5860]=it,o[st+4>>2]=it|1,o[Q+Je+4>>2]=40,o[5864]=o[5979];break}for(R>>>0<(o[5861]|0)>>>0&&(o[5861]=R),v=R+O|0,g=23876;;){if((o[g>>2]|0)==(v|0)){Xe=162;break}if(m=o[g+8>>2]|0,m)g=m;else break}if((Xe|0)==162&&!(o[g+12>>2]&8|0)){o[g>>2]=R,le=g+4|0,o[le>>2]=(o[le>>2]|0)+O,le=R+8|0,le=R+(le&7|0?0-le&7:0)|0,g=v+8|0,g=v+(g&7|0?0-g&7:0)|0,te=le+pe|0,N=g-le-pe|0,o[le+4>>2]=pe|3;t:do if((Q|0)==(g|0))Je=(o[5860]|0)+N|0,o[5860]=Je,o[5863]=te,o[te+4>>2]=Je|1;else{if((o[5862]|0)==(g|0)){Je=(o[5859]|0)+N|0,o[5859]=Je,o[5862]=te,o[te+4>>2]=Je|1,o[te+Je>>2]=Je;break}if(m=o[g+4>>2]|0,(m&3|0)==1){O=m&-8,E=m>>>3;n:do if(m>>>0<256)if(m=o[g+8>>2]|0,v=o[g+12>>2]|0,(v|0)==(m|0)){o[5857]=o[5857]&~(1<<E);break}else{o[m+12>>2]=v,o[v+8>>2]=m;break}else{R=o[g+24>>2]|0,m=o[g+12>>2]|0;do if((m|0)==(g|0)){if(v=g+16|0,E=v+4|0,m=o[E>>2]|0,m)v=E;else if(m=o[v>>2]|0,!m){m=0;break}for(;;)if(I=m+20|0,E=o[I>>2]|0,E)m=E,v=I;else if(I=m+16|0,E=o[I>>2]|0,E)m=E,v=I;else break;o[v>>2]=0}else Je=o[g+8>>2]|0,o[Je+12>>2]=m,o[m+8>>2]=Je;while(0);if(!R)break;v=o[g+28>>2]|0,E=23732+(v<<2)|0;do if((o[E>>2]|0)!=(g|0)){if(Je=R+16|0,o[((o[Je>>2]|0)==(g|0)?Je:R+20|0)>>2]=m,!m)break n}else{if(o[E>>2]=m,m|0)break;o[5858]=o[5858]&~(1<<v);break n}while(0);if(o[m+24>>2]=R,v=g+16|0,E=o[v>>2]|0,E|0&&(o[m+16>>2]=E,o[E+24>>2]=m),v=o[v+4>>2]|0,!v)break;o[m+20>>2]=v,o[v+24>>2]=m}while(0);g=g+O|0,I=O+N|0}else I=N;if(g=g+4|0,o[g>>2]=o[g>>2]&-2,o[te+4>>2]=I|1,o[te+I>>2]=I,g=I>>>3,I>>>0<256){v=23468+(g<<1<<2)|0,m=o[5857]|0,g=1<<g,m&g?(m=v+8|0,g=o[m>>2]|0):(o[5857]=m|g,g=v,m=v+8|0),o[m>>2]=te,o[g+12>>2]=te,o[te+8>>2]=g,o[te+12>>2]=v;break}g=I>>>8;do if(!g)E=0;else{if(I>>>0>16777215){E=31;break}st=(g+1048320|0)>>>16&8,Je=g<<st,it=(Je+520192|0)>>>16&4,Je=Je<<it,E=(Je+245760|0)>>>16&2,E=14-(it|st|E)+(Je<<E>>>15)|0,E=I>>>(E+7|0)&1|E<<1}while(0);if(g=23732+(E<<2)|0,o[te+28>>2]=E,m=te+16|0,o[m+4>>2]=0,o[m>>2]=0,m=o[5858]|0,v=1<<E,!(m&v)){o[5858]=m|v,o[g>>2]=te,o[te+24>>2]=g,o[te+12>>2]=te,o[te+8>>2]=te;break}g=o[g>>2]|0;n:do if((o[g+4>>2]&-8|0)!=(I|0)){for(E=I<<((E|0)==31?0:25-(E>>>1)|0);v=g+16+(E>>>31<<2)|0,m=o[v>>2]|0,!!m;)if((o[m+4>>2]&-8|0)==(I|0)){g=m;break n}else E=E<<1,g=m;o[v>>2]=te,o[te+24>>2]=g,o[te+12>>2]=te,o[te+8>>2]=te;break t}while(0);st=g+8|0,Je=o[st>>2]|0,o[Je+12>>2]=te,o[st>>2]=te,o[te+8>>2]=Je,o[te+12>>2]=g,o[te+24>>2]=0}while(0);return Je=le+8|0,Ee=Ht,Je|0}for(g=23876;m=o[g>>2]|0,!(m>>>0<=Q>>>0&&(Je=m+(o[g+4>>2]|0)|0,Je>>>0>Q>>>0));)g=o[g+8>>2]|0;I=Je+-47|0,m=I+8|0,m=I+(m&7|0?0-m&7:0)|0,I=Q+16|0,m=m>>>0<I>>>0?Q:m,g=m+8|0,v=O+-40|0,it=R+8|0,it=it&7|0?0-it&7:0,st=R+it|0,it=v-it|0,o[5863]=st,o[5860]=it,o[st+4>>2]=it|1,o[R+v+4>>2]=40,o[5864]=o[5979],v=m+4|0,o[v>>2]=27,o[g>>2]=o[5969],o[g+4>>2]=o[5970],o[g+8>>2]=o[5971],o[g+12>>2]=o[5972],o[5969]=R,o[5970]=O,o[5972]=0,o[5971]=g,g=m+24|0;do st=g,g=g+4|0,o[g>>2]=7;while((st+8|0)>>>0<Je>>>0);if((m|0)!=(Q|0)){if(R=m-Q|0,o[v>>2]=o[v>>2]&-2,o[Q+4>>2]=R|1,o[m>>2]=R,g=R>>>3,R>>>0<256){v=23468+(g<<1<<2)|0,m=o[5857]|0,g=1<<g,m&g?(m=v+8|0,g=o[m>>2]|0):(o[5857]=m|g,g=v,m=v+8|0),o[m>>2]=Q,o[g+12>>2]=Q,o[Q+8>>2]=g,o[Q+12>>2]=v;break}if(g=R>>>8,g?R>>>0>16777215?E=31:(st=(g+1048320|0)>>>16&8,Je=g<<st,it=(Je+520192|0)>>>16&4,Je=Je<<it,E=(Je+245760|0)>>>16&2,E=14-(it|st|E)+(Je<<E>>>15)|0,E=R>>>(E+7|0)&1|E<<1):E=0,v=23732+(E<<2)|0,o[Q+28>>2]=E,o[Q+20>>2]=0,o[I>>2]=0,g=o[5858]|0,m=1<<E,!(g&m)){o[5858]=g|m,o[v>>2]=Q,o[Q+24>>2]=v,o[Q+12>>2]=Q,o[Q+8>>2]=Q;break}g=o[v>>2]|0;t:do if((o[g+4>>2]&-8|0)!=(R|0)){for(E=R<<((E|0)==31?0:25-(E>>>1)|0);v=g+16+(E>>>31<<2)|0,m=o[v>>2]|0,!!m;)if((o[m+4>>2]&-8|0)==(R|0)){g=m;break t}else E=E<<1,g=m;o[v>>2]=Q,o[Q+24>>2]=g,o[Q+12>>2]=Q,o[Q+8>>2]=Q;break e}while(0);st=g+8|0,Je=o[st>>2]|0,o[Je+12>>2]=Q,o[st>>2]=Q,o[Q+8>>2]=Je,o[Q+12>>2]=g,o[Q+24>>2]=0}}else Je=o[5861]|0,(Je|0)==0|R>>>0<Je>>>0&&(o[5861]=R),o[5969]=R,o[5970]=O,o[5972]=0,o[5866]=o[5975],o[5865]=-1,o[5870]=23468,o[5869]=23468,o[5872]=23476,o[5871]=23476,o[5874]=23484,o[5873]=23484,o[5876]=23492,o[5875]=23492,o[5878]=23500,o[5877]=23500,o[5880]=23508,o[5879]=23508,o[5882]=23516,o[5881]=23516,o[5884]=23524,o[5883]=23524,o[5886]=23532,o[5885]=23532,o[5888]=23540,o[5887]=23540,o[5890]=23548,o[5889]=23548,o[5892]=23556,o[5891]=23556,o[5894]=23564,o[5893]=23564,o[5896]=23572,o[5895]=23572,o[5898]=23580,o[5897]=23580,o[5900]=23588,o[5899]=23588,o[5902]=23596,o[5901]=23596,o[5904]=23604,o[5903]=23604,o[5906]=23612,o[5905]=23612,o[5908]=23620,o[5907]=23620,o[5910]=23628,o[5909]=23628,o[5912]=23636,o[5911]=23636,o[5914]=23644,o[5913]=23644,o[5916]=23652,o[5915]=23652,o[5918]=23660,o[5917]=23660,o[5920]=23668,o[5919]=23668,o[5922]=23676,o[5921]=23676,o[5924]=23684,o[5923]=23684,o[5926]=23692,o[5925]=23692,o[5928]=23700,o[5927]=23700,o[5930]=23708,o[5929]=23708,o[5932]=23716,o[5931]=23716,Je=O+-40|0,it=R+8|0,it=it&7|0?0-it&7:0,st=R+it|0,it=Je-it|0,o[5863]=st,o[5860]=it,o[st+4>>2]=it|1,o[R+Je+4>>2]=40,o[5864]=o[5979];while(0);if(g=o[5860]|0,g>>>0>pe>>>0)return it=g-pe|0,o[5860]=it,Je=o[5863]|0,st=Je+pe|0,o[5863]=st,o[st+4>>2]=it|1,o[Je+4>>2]=pe|3,Je=Je+8|0,Ee=Ht,Je|0}return Je=Ks()|0,o[Je>>2]=12,Je=0,Ee=Ht,Je|0}function l(m){m=m|0;var g=0,v=0,E=0,I=0,R=0,O=0,N=0,Q=0;if(m){v=m+-8|0,I=o[5861]|0,m=o[m+-4>>2]|0,g=m&-8,Q=v+g|0;do if(m&1)N=v,O=v;else{if(E=o[v>>2]|0,!(m&3)||(O=v+(0-E)|0,R=E+g|0,O>>>0<I>>>0))return;if((o[5862]|0)==(O|0)){if(m=Q+4|0,g=o[m>>2]|0,(g&3|0)!=3){N=O,g=R;break}o[5859]=R,o[m>>2]=g&-2,o[O+4>>2]=R|1,o[O+R>>2]=R;return}if(v=E>>>3,E>>>0<256)if(m=o[O+8>>2]|0,g=o[O+12>>2]|0,(g|0)==(m|0)){o[5857]=o[5857]&~(1<<v),N=O,g=R;break}else{o[m+12>>2]=g,o[g+8>>2]=m,N=O,g=R;break}I=o[O+24>>2]|0,m=o[O+12>>2]|0;do if((m|0)==(O|0)){if(g=O+16|0,v=g+4|0,m=o[v>>2]|0,m)g=v;else if(m=o[g>>2]|0,!m){m=0;break}for(;;)if(E=m+20|0,v=o[E>>2]|0,v)m=v,g=E;else if(E=m+16|0,v=o[E>>2]|0,v)m=v,g=E;else break;o[g>>2]=0}else N=o[O+8>>2]|0,o[N+12>>2]=m,o[m+8>>2]=N;while(0);if(I){if(g=o[O+28>>2]|0,v=23732+(g<<2)|0,(o[v>>2]|0)==(O|0)){if(o[v>>2]=m,!m){o[5858]=o[5858]&~(1<<g),N=O,g=R;break}}else if(N=I+16|0,o[((o[N>>2]|0)==(O|0)?N:I+20|0)>>2]=m,!m){N=O,g=R;break}o[m+24>>2]=I,g=O+16|0,v=o[g>>2]|0,v|0&&(o[m+16>>2]=v,o[v+24>>2]=m),g=o[g+4>>2]|0,g?(o[m+20>>2]=g,o[g+24>>2]=m,N=O,g=R):(N=O,g=R)}else N=O,g=R}while(0);if(!(O>>>0>=Q>>>0)&&(m=Q+4|0,E=o[m>>2]|0,!!(E&1))){if(E&2)o[m>>2]=E&-2,o[N+4>>2]=g|1,o[O+g>>2]=g,I=g;else{if((o[5863]|0)==(Q|0)){if(Q=(o[5860]|0)+g|0,o[5860]=Q,o[5863]=N,o[N+4>>2]=Q|1,(N|0)!=(o[5862]|0))return;o[5862]=0,o[5859]=0;return}if((o[5862]|0)==(Q|0)){Q=(o[5859]|0)+g|0,o[5859]=Q,o[5862]=O,o[N+4>>2]=Q|1,o[O+Q>>2]=Q;return}I=(E&-8)+g|0,v=E>>>3;do if(E>>>0<256)if(g=o[Q+8>>2]|0,m=o[Q+12>>2]|0,(m|0)==(g|0)){o[5857]=o[5857]&~(1<<v);break}else{o[g+12>>2]=m,o[m+8>>2]=g;break}else{R=o[Q+24>>2]|0,m=o[Q+12>>2]|0;do if((m|0)==(Q|0)){if(g=Q+16|0,v=g+4|0,m=o[v>>2]|0,m)g=v;else if(m=o[g>>2]|0,!m){v=0;break}for(;;)if(E=m+20|0,v=o[E>>2]|0,v)m=v,g=E;else if(E=m+16|0,v=o[E>>2]|0,v)m=v,g=E;else break;o[g>>2]=0,v=m}else v=o[Q+8>>2]|0,o[v+12>>2]=m,o[m+8>>2]=v,v=m;while(0);if(R|0){if(m=o[Q+28>>2]|0,g=23732+(m<<2)|0,(o[g>>2]|0)==(Q|0)){if(o[g>>2]=v,!v){o[5858]=o[5858]&~(1<<m);break}}else if(E=R+16|0,o[((o[E>>2]|0)==(Q|0)?E:R+20|0)>>2]=v,!v)break;o[v+24>>2]=R,m=Q+16|0,g=o[m>>2]|0,g|0&&(o[v+16>>2]=g,o[g+24>>2]=v),m=o[m+4>>2]|0,m|0&&(o[v+20>>2]=m,o[m+24>>2]=v)}}while(0);if(o[N+4>>2]=I|1,o[O+I>>2]=I,(N|0)==(o[5862]|0)){o[5859]=I;return}}if(m=I>>>3,I>>>0<256){v=23468+(m<<1<<2)|0,g=o[5857]|0,m=1<<m,g&m?(g=v+8|0,m=o[g>>2]|0):(o[5857]=g|m,m=v,g=v+8|0),o[g>>2]=N,o[m+12>>2]=N,o[N+8>>2]=m,o[N+12>>2]=v;return}m=I>>>8,m?I>>>0>16777215?E=31:(O=(m+1048320|0)>>>16&8,Q=m<<O,R=(Q+520192|0)>>>16&4,Q=Q<<R,E=(Q+245760|0)>>>16&2,E=14-(R|O|E)+(Q<<E>>>15)|0,E=I>>>(E+7|0)&1|E<<1):E=0,m=23732+(E<<2)|0,o[N+28>>2]=E,o[N+20>>2]=0,o[N+16>>2]=0,g=o[5858]|0,v=1<<E;e:do if(!(g&v))o[5858]=g|v,o[m>>2]=N,o[N+24>>2]=m,o[N+12>>2]=N,o[N+8>>2]=N;else{m=o[m>>2]|0;t:do if((o[m+4>>2]&-8|0)!=(I|0)){for(E=I<<((E|0)==31?0:25-(E>>>1)|0);v=m+16+(E>>>31<<2)|0,g=o[v>>2]|0,!!g;)if((o[g+4>>2]&-8|0)==(I|0)){m=g;break t}else E=E<<1,m=g;o[v>>2]=N,o[N+24>>2]=m,o[N+12>>2]=N,o[N+8>>2]=N;break e}while(0);O=m+8|0,Q=o[O>>2]|0,o[Q+12>>2]=N,o[O>>2]=N,o[N+8>>2]=Q,o[N+12>>2]=m,o[N+24>>2]=0}while(0);if(Q=(o[5865]|0)+-1|0,o[5865]=Q,!(Q|0)){for(m=23884;m=o[m>>2]|0,m;)m=m+8|0;o[5865]=-1}}}}function h(m,g){m=m|0,g=g|0;var v=0;return m?(v=pn(g,m)|0,(g|m)>>>0>65535&&(v=((v>>>0)/(m>>>0)|0|0)==(g|0)?v:-1)):v=0,m=_(v)|0,!m||!(o[m+-4>>2]&3)||Me(m|0,0,v|0)|0,m|0}function d(m,g,v,E){return m=m|0,g=g|0,v=v|0,E=E|0,v=m+v>>>0,Dt(g+E+(v>>>0<m>>>0|0)>>>0|0),v|0|0}function x(m,g,v,E){return m=m|0,g=g|0,v=v|0,E=E|0,E=g-E-(v>>>0>m>>>0|0)>>>0,Dt(E|0),m-v>>>0|0|0}function b(m){return m=m|0,(m?31-(Ue(m^m-1)|0)|0:32)|0}function S(m,g,v,E,I){m=m|0,g=g|0,v=v|0,E=E|0,I=I|0;var R=0,O=0,N=0,Q=0,te=0,le=0,pe=0,Be=0,He=0,ze=0;if(le=m,Q=g,te=Q,O=v,Be=E,N=Be,!te)return R=(I|0)!=0,N?R?(o[I>>2]=m|0,o[I+4>>2]=g&0,Be=0,I=0,Dt(Be|0),I|0):(Be=0,I=0,Dt(Be|0),I|0):(R&&(o[I>>2]=(le>>>0)%(O>>>0),o[I+4>>2]=0),Be=0,I=(le>>>0)/(O>>>0)>>>0,Dt(Be|0),I|0);R=(N|0)==0;do if(O){if(!R){if(R=(Ue(N|0)|0)-(Ue(te|0)|0)|0,R>>>0<=31){pe=R+1|0,N=31-R|0,g=R-31>>31,O=pe,m=le>>>(pe>>>0)&g|te<<N,g=te>>>(pe>>>0)&g,R=0,N=le<<N;break}return I?(o[I>>2]=m|0,o[I+4>>2]=Q|g&0,Be=0,I=0,Dt(Be|0),I|0):(Be=0,I=0,Dt(Be|0),I|0)}if(R=O-1|0,R&O|0){N=(Ue(O|0)|0)+33-(Ue(te|0)|0)|0,ze=64-N|0,pe=32-N|0,Q=pe>>31,He=N-32|0,g=He>>31,O=N,m=pe-1>>31&te>>>(He>>>0)|(te<<pe|le>>>(N>>>0))&g,g=g&te>>>(N>>>0),R=le<<ze&Q,N=(te<<ze|le>>>(He>>>0))&Q|le<<pe&N-33>>31;break}return I|0&&(o[I>>2]=R&le,o[I+4>>2]=0),(O|0)==1?(He=Q|g&0,ze=m|0|0,Dt(He|0),ze|0):(ze=b(O|0)|0,He=te>>>(ze>>>0)|0,ze=te<<32-ze|le>>>(ze>>>0)|0,Dt(He|0),ze|0)}else{if(R)return I|0&&(o[I>>2]=(te>>>0)%(O>>>0),o[I+4>>2]=0),He=0,ze=(te>>>0)/(O>>>0)>>>0,Dt(He|0),ze|0;if(!le)return I|0&&(o[I>>2]=0,o[I+4>>2]=(te>>>0)%(N>>>0)),He=0,ze=(te>>>0)/(N>>>0)>>>0,Dt(He|0),ze|0;if(R=N-1|0,!(R&N))return I|0&&(o[I>>2]=m|0,o[I+4>>2]=R&te|g&0),He=0,ze=te>>>((b(N|0)|0)>>>0),Dt(He|0),ze|0;if(R=(Ue(N|0)|0)-(Ue(te|0)|0)|0,R>>>0<=30){g=R+1|0,N=31-R|0,O=g,m=te<<N|le>>>(g>>>0),g=te>>>(g>>>0),R=0,N=le<<N;break}return I?(o[I>>2]=m|0,o[I+4>>2]=Q|g&0,He=0,ze=0,Dt(He|0),ze|0):(He=0,ze=0,Dt(He|0),ze|0)}while(0);if(!O)te=N,Q=0,N=0;else{pe=v|0|0,le=Be|E&0,te=d(pe|0,le|0,-1,-1)|0,v=Ce()|0,Q=N,N=0;do E=Q,Q=R>>>31|Q<<1,R=N|R<<1,E=m<<1|E>>>31|0,Be=m>>>31|g<<1|0,x(te|0,v|0,E|0,Be|0)|0,ze=Ce()|0,He=ze>>31|((ze|0)<0?-1:0)<<1,N=He&1,m=x(E|0,Be|0,He&pe|0,(((ze|0)<0?-1:0)>>31|((ze|0)<0?-1:0)<<1)&le|0)|0,g=Ce()|0,O=O-1|0;while(O|0);te=Q,Q=0}return O=0,I|0&&(o[I>>2]=m,o[I+4>>2]=g),He=(R|0)>>>31|(te|O)<<1|(O<<1|R>>>31)&0|Q,ze=(R<<1|0)&-2|N,Dt(He|0),ze|0}function P(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0;return te=g>>31|((g|0)<0?-1:0)<<1,Q=((g|0)<0?-1:0)>>31|((g|0)<0?-1:0)<<1,R=E>>31|((E|0)<0?-1:0)<<1,I=((E|0)<0?-1:0)>>31|((E|0)<0?-1:0)<<1,N=x(te^m|0,Q^g|0,te|0,Q|0)|0,O=Ce()|0,m=R^te,g=I^Q,x((S(N,O,x(R^v|0,I^E|0,R|0,I|0)|0,Ce()|0,0)|0)^m|0,(Ce()|0)^g|0,m|0,g|0)|0}function B(m,g){m=m|0,g=g|0;var v=0,E=0,I=0,R=0;return R=m&65535,I=g&65535,v=pn(I,R)|0,E=m>>>16,m=(v>>>16)+(pn(I,E)|0)|0,I=g>>>16,g=pn(I,R)|0,Dt((m>>>16)+(pn(I,E)|0)+(((m&65535)+g|0)>>>16)|0),m+g<<16|v&65535|0|0}function V(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0;return I=m,R=v,v=B(I,R)|0,m=Ce()|0,Dt((pn(g,R)|0)+(pn(E,I)|0)+m|m&0|0),v|0|0|0}function $(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0,O=0,N=0,Q=0,te=0;return I=Ee,Ee=Ee+16|0,N=I|0,O=g>>31|((g|0)<0?-1:0)<<1,R=((g|0)<0?-1:0)>>31|((g|0)<0?-1:0)<<1,te=E>>31|((E|0)<0?-1:0)<<1,Q=((E|0)<0?-1:0)>>31|((E|0)<0?-1:0)<<1,m=x(O^m|0,R^g|0,O|0,R|0)|0,g=Ce()|0,S(m,g,x(te^v|0,Q^E|0,te|0,Q|0)|0,Ce()|0,N)|0,E=x(o[N>>2]^O|0,o[N+4>>2]^R|0,O|0,R|0)|0,v=Ce()|0,Ee=I,Dt(v|0),E|0}function X(m,g,v,E){m=m|0,g=g|0,v=v|0,E=E|0;var I=0,R=0;return R=Ee,Ee=Ee+16|0,I=R|0,S(m,g,v,E,I)|0,Ee=R,Dt(o[I+4>>2]|0),o[I>>2]|0|0}function oe(m,g,v){return m=m|0,g=g|0,v=v|0,(v|0)<32?(Dt(g>>v|0),m>>>v|(g&(1<<v)-1)<<32-v):(Dt(((g|0)<0?-1:0)|0),g>>v-32|0)}function ne(m,g,v){return m=m|0,g=g|0,v=v|0,(v|0)<32?(Dt(g>>>v|0),m>>>v|(g&(1<<v)-1)<<32-v):(Dt(0),g>>>v-32|0)}function ue(m,g,v){return m=m|0,g=g|0,v=v|0,(v|0)<32?(Dt(g<<v|(m&(1<<v)-1<<32-v)>>>32-v|0),m<<v):(Dt(m<<v-32|0),0)}function Te(m,g){return m=+m,g=+g,m!=m?+g:g!=g?+m:+Vt(+m,+g)}function Ie(m,g){return m=+m,g=+g,m!=m?+g:g!=g?+m:+Bn(+m,+g)}function we(m){return m=+m,m>=0?+Pe(m+.5):+nn(m-.5)}function $e(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0;if((v|0)>=8192)return ha(m|0,g|0,v|0)|0,m|0;if(R=m|0,I=m+v|0,(m&3)==(g&3)){for(;m&3;){if(!v)return R|0;ce[m>>0]=ce[g>>0]|0,m=m+1|0,g=g+1|0,v=v-1|0}for(v=I&-4|0,E=v-64|0;(m|0)<=(E|0);)o[m>>2]=o[g>>2],o[m+4>>2]=o[g+4>>2],o[m+8>>2]=o[g+8>>2],o[m+12>>2]=o[g+12>>2],o[m+16>>2]=o[g+16>>2],o[m+20>>2]=o[g+20>>2],o[m+24>>2]=o[g+24>>2],o[m+28>>2]=o[g+28>>2],o[m+32>>2]=o[g+32>>2],o[m+36>>2]=o[g+36>>2],o[m+40>>2]=o[g+40>>2],o[m+44>>2]=o[g+44>>2],o[m+48>>2]=o[g+48>>2],o[m+52>>2]=o[g+52>>2],o[m+56>>2]=o[g+56>>2],o[m+60>>2]=o[g+60>>2],m=m+64|0,g=g+64|0;for(;(m|0)<(v|0);)o[m>>2]=o[g>>2],m=m+4|0,g=g+4|0}else for(v=I-4|0;(m|0)<(v|0);)ce[m>>0]=ce[g>>0]|0,ce[m+1>>0]=ce[g+1>>0]|0,ce[m+2>>0]=ce[g+2>>0]|0,ce[m+3>>0]=ce[g+3>>0]|0,m=m+4|0,g=g+4|0;for(;(m|0)<(I|0);)ce[m>>0]=ce[g>>0]|0,m=m+1|0,g=g+1|0;return R|0}function Me(m,g,v){m=m|0,g=g|0,v=v|0;var E=0,I=0,R=0,O=0;if(R=m+v|0,g=g&255,(v|0)>=67){for(;m&3;)ce[m>>0]=g,m=m+1|0;for(E=R&-4|0,O=g|g<<8|g<<16|g<<24,I=E-64|0;(m|0)<=(I|0);)o[m>>2]=O,o[m+4>>2]=O,o[m+8>>2]=O,o[m+12>>2]=O,o[m+16>>2]=O,o[m+20>>2]=O,o[m+24>>2]=O,o[m+28>>2]=O,o[m+32>>2]=O,o[m+36>>2]=O,o[m+40>>2]=O,o[m+44>>2]=O,o[m+48>>2]=O,o[m+52>>2]=O,o[m+56>>2]=O,o[m+60>>2]=O,m=m+64|0;for(;(m|0)<(E|0);)o[m>>2]=O,m=m+4|0}for(;(m|0)<(R|0);)ce[m>>0]=g,m=m+1|0;return R-v|0}function je(m){return m=+m,m>=0?+Pe(m+.5):+nn(m-.5)}function be(m){m=m|0;var g=0,v=0,E=0;return E=dr()|0,v=o[ke>>2]|0,g=v+m|0,(m|0)>0&(g|0)<(v|0)|(g|0)<0?(ja(g|0)|0,yi(12),-1):(g|0)>(E|0)&&!(Re(g|0)|0)?(yi(12),-1):(o[ke>>2]=g,v|0)}return{___divdi3:P,___muldi3:V,___remdi3:$,___uremdi3:X,_areNeighborCells:nu,_bitshift64Ashr:oe,_bitshift64Lshr:ne,_bitshift64Shl:ue,_calloc:h,_cellAreaKm2:Gt,_cellAreaM2:lu,_cellAreaRads2:ys,_cellToBoundary:Mi,_cellToCenterChild:ou,_cellToChildPos:ms,_cellToChildren:xA,_cellToChildrenSize:Ll,_cellToLatLng:Eo,_cellToLocalIj:dh,_cellToParent:kl,_cellToVertex:wn,_cellToVertexes:as,_cellsToDirectedEdge:ru,_cellsToLinkedMultiPolygon:jr,_childPosToCell:cc,_compactCells:Dl,_destroyLinkedMultiPolygon:Ol,_directedEdgeToBoundary:$s,_directedEdgeToCells:ma,_edgeLengthKm:Xo,_edgeLengthM:Au,_edgeLengthRads:wa,_emscripten_replace_memory:jo,_free:l,_getBaseCellNumber:Za,_getDirectedEdgeDestination:ga,_getDirectedEdgeOrigin:bo,_getHexagonAreaAvgKm2:zl,_getHexagonAreaAvgM2:Ja,_getHexagonEdgeLengthAvgKm:hh,_getHexagonEdgeLengthAvgM:fh,_getIcosahedronFaces:Rl,_getNumCells:el,_getPentagons:Qs,_getRes0Cells:yA,_getResolution:Il,_greatCircleDistanceKm:Bl,_greatCircleDistanceM:Yo,_greatCircleDistanceRads:os,_gridDisk:da,_gridDiskDistances:ui,_gridDistance:cu,_gridPathCells:fu,_gridPathCellsSize:hu,_gridRingUnsafe:Ct,_i64Add:d,_i64Subtract:x,_isPentagon:Cr,_isResClassIII:$r,_isValidCell:ya,_isValidDirectedEdge:iu,_isValidVertex:Xr,_latLngToCell:gs,_llvm_maxnum_f64:Te,_llvm_minnum_f64:Ie,_llvm_round_f64:we,_localIjToCell:fc,_malloc:_,_maxFaceCount:Ya,_maxGridDiskSize:wl,_maxPolygonToCellsSize:tn,_memcpy:$e,_memset:Me,_originToDirectedEdges:Tr,_pentagonCount:Xa,_polygonToCells:Gr,_readInt64AsDoubleFromPointer:pu,_res0CellCount:mA,_round:je,_sbrk:be,_sizeOfCellBoundary:dc,_sizeOfCoordIJ:Nl,_sizeOfGeoLoop:_s,_sizeOfGeoPolygon:Fr,_sizeOfH3Index:Wr,_sizeOfLatLng:Fl,_sizeOfLinkedGeoPolygon:nl,_uncompactCells:Ac,_uncompactCellsSize:ri,_vertexToLatLng:Ko,establishStackSpace:fa,stackAlloc:Is,stackRestore:Ha,stackSave:$a}}(Xi,Pn,Oe);e.___divdi3=ye.___divdi3,e.___muldi3=ye.___muldi3,e.___remdi3=ye.___remdi3,e.___uremdi3=ye.___uremdi3,e._areNeighborCells=ye._areNeighborCells,e._bitshift64Ashr=ye._bitshift64Ashr,e._bitshift64Lshr=ye._bitshift64Lshr,e._bitshift64Shl=ye._bitshift64Shl,e._calloc=ye._calloc,e._cellAreaKm2=ye._cellAreaKm2,e._cellAreaM2=ye._cellAreaM2,e._cellAreaRads2=ye._cellAreaRads2,e._cellToBoundary=ye._cellToBoundary,e._cellToCenterChild=ye._cellToCenterChild,e._cellToChildPos=ye._cellToChildPos,e._cellToChildren=ye._cellToChildren,e._cellToChildrenSize=ye._cellToChildrenSize,e._cellToLatLng=ye._cellToLatLng,e._cellToLocalIj=ye._cellToLocalIj,e._cellToParent=ye._cellToParent,e._cellToVertex=ye._cellToVertex,e._cellToVertexes=ye._cellToVertexes,e._cellsToDirectedEdge=ye._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=ye._cellsToLinkedMultiPolygon,e._childPosToCell=ye._childPosToCell,e._compactCells=ye._compactCells,e._destroyLinkedMultiPolygon=ye._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=ye._directedEdgeToBoundary,e._directedEdgeToCells=ye._directedEdgeToCells,e._edgeLengthKm=ye._edgeLengthKm,e._edgeLengthM=ye._edgeLengthM,e._edgeLengthRads=ye._edgeLengthRads;var ot=e._emscripten_replace_memory=ye._emscripten_replace_memory;e._free=ye._free,e._getBaseCellNumber=ye._getBaseCellNumber,e._getDirectedEdgeDestination=ye._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=ye._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=ye._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=ye._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=ye._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=ye._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=ye._getIcosahedronFaces,e._getNumCells=ye._getNumCells,e._getPentagons=ye._getPentagons,e._getRes0Cells=ye._getRes0Cells,e._getResolution=ye._getResolution,e._greatCircleDistanceKm=ye._greatCircleDistanceKm,e._greatCircleDistanceM=ye._greatCircleDistanceM,e._greatCircleDistanceRads=ye._greatCircleDistanceRads,e._gridDisk=ye._gridDisk,e._gridDiskDistances=ye._gridDiskDistances,e._gridDistance=ye._gridDistance,e._gridPathCells=ye._gridPathCells,e._gridPathCellsSize=ye._gridPathCellsSize,e._gridRingUnsafe=ye._gridRingUnsafe,e._i64Add=ye._i64Add,e._i64Subtract=ye._i64Subtract,e._isPentagon=ye._isPentagon,e._isResClassIII=ye._isResClassIII,e._isValidCell=ye._isValidCell,e._isValidDirectedEdge=ye._isValidDirectedEdge,e._isValidVertex=ye._isValidVertex,e._latLngToCell=ye._latLngToCell,e._llvm_maxnum_f64=ye._llvm_maxnum_f64,e._llvm_minnum_f64=ye._llvm_minnum_f64,e._llvm_round_f64=ye._llvm_round_f64,e._localIjToCell=ye._localIjToCell,e._malloc=ye._malloc,e._maxFaceCount=ye._maxFaceCount,e._maxGridDiskSize=ye._maxGridDiskSize,e._maxPolygonToCellsSize=ye._maxPolygonToCellsSize,e._memcpy=ye._memcpy,e._memset=ye._memset,e._originToDirectedEdges=ye._originToDirectedEdges,e._pentagonCount=ye._pentagonCount,e._polygonToCells=ye._polygonToCells,e._readInt64AsDoubleFromPointer=ye._readInt64AsDoubleFromPointer,e._res0CellCount=ye._res0CellCount,e._round=ye._round,e._sbrk=ye._sbrk,e._sizeOfCellBoundary=ye._sizeOfCellBoundary,e._sizeOfCoordIJ=ye._sizeOfCoordIJ,e._sizeOfGeoLoop=ye._sizeOfGeoLoop,e._sizeOfGeoPolygon=ye._sizeOfGeoPolygon,e._sizeOfH3Index=ye._sizeOfH3Index,e._sizeOfLatLng=ye._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=ye._sizeOfLinkedGeoPolygon,e._uncompactCells=ye._uncompactCells,e._uncompactCellsSize=ye._uncompactCellsSize,e._vertexToLatLng=ye._vertexToLatLng,e.establishStackSpace=ye.establishStackSpace;var gt=e.stackAlloc=ye.stackAlloc,Lt=e.stackRestore=ye.stackRestore,qt=e.stackSave=ye.stackSave;if(e.asm=ye,e.cwrap=re,e.setValue=U,e.getValue=H,$n){rs($n)||($n=s($n));{Zn();var Kt=function(K){K.byteLength&&(K=new Uint8Array(K)),Ye.set(K,k),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Ei()},En=function(){A($n,Kt,function(){throw"could not load memory initializer "+$n})},hn=Ur($n);if(hn)Kt(hn.buffer);else if(e.memoryInitializerRequest){var an=function(){var K=e.memoryInitializerRequest,W=K.response;if(K.status!==200&&K.status!==0){var ee=Ur(e.memoryInitializerRequestURL);if(ee)W=ee.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+K.status+", retrying "+$n),En();return}}Kt(W)};e.memoryInitializerRequest.response?setTimeout(an,0):e.memoryInitializerRequest.addEventListener("load",an)}else En()}}var Dn;Zr=function K(){Dn||xr(),Dn||(Zr=K)};function xr(K){if(Ar>0||(jn(),Ar>0))return;function W(){Dn||(Dn=!0,!q&&(Lr(),St(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),ln()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),W()},1)):W()}e.run=xr;function fn(K){throw e.onAbort&&e.onAbort(K),K+="",a(K),y(K),q=!0,"abort("+K+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=fn,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return xr(),t}(typeof fs=="object"?fs:{}),ar="number",Qn=ar,Pp=ar,Yn=ar,Xn=ar,lo=ar,bn=ar,Jge=[["sizeOfH3Index",ar],["sizeOfLatLng",ar],["sizeOfCellBoundary",ar],["sizeOfGeoLoop",ar],["sizeOfGeoPolygon",ar],["sizeOfLinkedGeoPolygon",ar],["sizeOfCoordIJ",ar],["readInt64AsDoubleFromPointer",ar],["isValidCell",Pp,[Yn,Xn]],["latLngToCell",Qn,[ar,ar,lo,bn]],["cellToLatLng",Qn,[Yn,Xn,bn]],["cellToBoundary",Qn,[Yn,Xn,bn]],["maxGridDiskSize",Qn,[ar,bn]],["gridDisk",Qn,[Yn,Xn,ar,bn]],["gridDiskDistances",Qn,[Yn,Xn,ar,bn,bn]],["gridRingUnsafe",Qn,[Yn,Xn,ar,bn]],["maxPolygonToCellsSize",Qn,[bn,lo,ar,bn]],["polygonToCells",Qn,[bn,lo,ar,bn]],["cellsToLinkedMultiPolygon",Qn,[bn,ar,bn]],["destroyLinkedMultiPolygon",null,[bn]],["compactCells",Qn,[bn,bn,ar,ar]],["uncompactCells",Qn,[bn,ar,ar,bn,ar,lo]],["uncompactCellsSize",Qn,[bn,ar,ar,lo,bn]],["isPentagon",Pp,[Yn,Xn]],["isResClassIII",Pp,[Yn,Xn]],["getBaseCellNumber",ar,[Yn,Xn]],["getResolution",ar,[Yn,Xn]],["maxFaceCount",Qn,[Yn,Xn,bn]],["getIcosahedronFaces",Qn,[Yn,Xn,bn]],["cellToParent",Qn,[Yn,Xn,lo,bn]],["cellToChildren",Qn,[Yn,Xn,lo,bn]],["cellToCenterChild",Qn,[Yn,Xn,lo,bn]],["cellToChildrenSize",Qn,[Yn,Xn,lo,bn]],["cellToChildPos",Qn,[Yn,Xn,lo,bn]],["childPosToCell",Qn,[ar,ar,Yn,Xn,lo,bn]],["areNeighborCells",Qn,[Yn,Xn,Yn,Xn,bn]],["cellsToDirectedEdge",Qn,[Yn,Xn,Yn,Xn,bn]],["getDirectedEdgeOrigin",Qn,[Yn,Xn,bn]],["getDirectedEdgeDestination",Qn,[Yn,Xn,bn]],["isValidDirectedEdge",Pp,[Yn,Xn]],["directedEdgeToCells",Qn,[Yn,Xn,bn]],["originToDirectedEdges",Qn,[Yn,Xn,bn]],["directedEdgeToBoundary",Qn,[Yn,Xn,bn]],["gridDistance",Qn,[Yn,Xn,Yn,Xn,bn]],["gridPathCells",Qn,[Yn,Xn,Yn,Xn,bn]],["gridPathCellsSize",Qn,[Yn,Xn,Yn,Xn,bn]],["cellToLocalIj",Qn,[Yn,Xn,Yn,Xn,ar,bn]],["localIjToCell",Qn,[Yn,Xn,bn,ar,bn]],["getHexagonAreaAvgM2",Qn,[lo,bn]],["getHexagonAreaAvgKm2",Qn,[lo,bn]],["getHexagonEdgeLengthAvgM",Qn,[lo,bn]],["getHexagonEdgeLengthAvgKm",Qn,[lo,bn]],["greatCircleDistanceM",ar,[bn,bn]],["greatCircleDistanceKm",ar,[bn,bn]],["greatCircleDistanceRads",ar,[bn,bn]],["cellAreaM2",Qn,[Yn,Xn,bn]],["cellAreaKm2",Qn,[Yn,Xn,bn]],["cellAreaRads2",Qn,[Yn,Xn,bn]],["edgeLengthM",Qn,[Yn,Xn,bn]],["edgeLengthKm",Qn,[Yn,Xn,bn]],["edgeLengthRads",Qn,[Yn,Xn,bn]],["getNumCells",Qn,[lo,bn]],["getRes0Cells",Qn,[bn]],["res0CellCount",ar],["getPentagons",Qn,[ar,bn]],["pentagonCount",ar],["cellToVertex",Qn,[Yn,Xn,ar,bn]],["cellToVertexes",Qn,[Yn,Xn,bn]],["vertexToLatLng",Qn,[Yn,Xn,bn]],["isValidVertex",Pp,[Yn,Xn]]],eme=0,tme=1,nme=2,rme=3,v7=4,ime=5,sme=6,ome=7,ame=8,lme=9,Ame=10,ume=11,cme=12,hme=13,fme=14,dme=15,js={};js[eme]="Success";js[tme]="The operation failed but a more specific error is not available";js[nme]="Argument was outside of acceptable range";js[rme]="Latitude or longitude arguments were outside of acceptable range";js[v7]="Resolution argument was outside of acceptable range";js[ime]="Cell argument was not valid";js[sme]="Directed edge argument was not valid";js[ome]="Undirected edge argument was not valid";js[ame]="Vertex argument was not valid";js[lme]="Pentagon distortion was encountered";js[Ame]="Duplicate input";js[ume]="Cell arguments were not neighbors";js[cme]="Cell arguments had incompatible resolutions";js[hme]="Memory allocation failed";js[fme]="Bounds of provided memory were insufficient";js[dme]="Mode or flags argument was not valid";var s4=1e3,pme=1001,gme=1002,vv={};vv[s4]="Unknown unit";vv[pme]="Array length out of bounds";vv[gme]="Got unexpected null value for H3 index";var mme="Unknown error";function x7(t,e,n){var r=n&&"value"in n,i=new Error((t[e]||mme)+" (code: "+e+(r?", value: "+n.value:"")+")");return i.code=e,i}function w7(t,e){var n=arguments.length===2?{value:e}:{};return x7(js,t,n)}function b7(t,e){var n=arguments.length===2?{value:e}:{};return x7(vv,t,n)}function eh(t){if(t!==0)throw w7(t)}var mo={};Jge.forEach(function(e){mo[e[0]]=fs.cwrap.apply(fs,e)});var Mf=16,yme=4,c0=8,SE=mo.sizeOfH3Index(),_me=mo.sizeOfLatLng(),vme=mo.sizeOfCellBoundary();mo.sizeOfGeoPolygon();mo.sizeOfGeoLoop();mo.sizeOfLinkedGeoPolygon();mo.sizeOfCoordIJ();var Oo={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function xme(t){if(typeof t!="number"||t<0||t>15||Math.floor(t)!==t)throw w7(v7,t);return t}var wme=/[^0-9a-fA-F]/;function xv(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||wme.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),Mf),n=parseInt(t.substring(t.length-8),Mf);return[n,e]}function l8(t){if(t>=0)return t.toString(Mf);t=t&2147483647;var e=E7(8,t.toString(Mf)),n=(parseInt(e[0],Mf)+8).toString(Mf);return e=n+e.substring(1),e}function bme(t,e){return l8(e)+E7(8,l8(t))}function E7(t,e){for(var n=t-e.length,r="",i=0;i<n;i++)r+="0";return r=r+e,r}function Eme(t,e){e===void 0&&(e=0);var n=fs.getValue(t+SE*e,"i32"),r=fs.getValue(t+SE*e+yme,"i32");return r?bme(n,r):null}function T7(t,e){return e===void 0&&(e=0),fs.getValue(t+c0*e,"double")}function Tme(t,e){for(var n=[],r=0;r<e;r++){var i=Eme(t,r);i!==null&&n.push(i)}return n}function p2(t){return Pme(fs.getValue(t,"double"))}function S7(t){return[p2(t),p2(t+c0)]}function Sme(t){return[p2(t+c0),p2(t)]}function Mme(t,e,n){for(var r=fs.getValue(t,"i32"),i=t+c0,s=[],A=e?Sme:S7,a=0;a<r*2;a+=2)s.push(A(i+c0*a));return n&&s.push(s[0]),s}function wv(t){var e=fs._malloc(_me),n=xv(t),r=n[0],i=n[1];try{return eh(mo.cellToLatLng(r,i,e)),S7(e)}finally{fs._free(e)}}function Cme(t,e){var n=fs._malloc(vme),r=xv(t),i=r[0],s=r[1];try{return eh(mo.cellToBoundary(i,s,n)),Mme(n,e,e)}finally{fs._free(n)}}function g2(t){var e=xv(t),n=e[0],r=e[1],i=6,s=fs._calloc(i,SE);try{return eh(mo.originToDirectedEdges(n,r,s)),Tme(s,i)}finally{fs._free(s)}}function m2(t,e){var n=xv(t),r=n[0],i=n[1],s=fs._malloc(c0);try{switch(e){case Oo.m:eh(mo.edgeLengthM(r,i,s));break;case Oo.km:eh(mo.edgeLengthKm(r,i,s));break;case Oo.rads:eh(mo.edgeLengthRads(r,i,s));break;default:throw b7(s4,e)}return T7(s)}finally{fs._free(s)}}function md(t,e){xme(t);var n=fs._malloc(c0);try{switch(e){case Oo.m:eh(mo.getHexagonEdgeLengthAvgM(t,n));break;case Oo.km:eh(mo.getHexagonEdgeLengthAvgKm(t,n));break;default:throw b7(s4,e)}return T7(n)}finally{fs._free(n)}}function Pme(t){return t*180/Math.PI}function A8(t,e,n=1){const r=n,[i,s]=wv(t);return e.map(a=>{let y=VA(s,a[0],r),w=VA(i,a[1],r);return[y,w]})}function Ime(t,[e,n]){let r=Cme(t).map(A=>[A[1],A[0]]),i=A8(t,r,n),s=A8(t,r,e);return[i,s]}class Li extends fr{initializeState(){super.initializeState();const e=Object.keys(this.props.data).map(r=>parseInt(r)),n=bi().domain([0,1]).range(e)(u0(this.context.viewport.zoom));this.setState({...this.state,resRange:e,lastResolution:n}),this.createPolygons()}createPolygons(){const{lastResolution:e}=this.state,n=[],r=this.props.data[e];Object.keys(r).forEach((i,s)=>{let A=r[i];const a=this.props.getValue?Ms().domain([0,1]).range([this.props.thicknessRange[1],this.props.thicknessRange[0]])(this.props.getValue({properties:A})):this.props.thicknessRange[0];let y=Ime(i,[a,this.props.thicknessRange[1]]);this.props.raised?n.push({polygon:y.map(w=>w.map(([M,C])=>[M,C,typeof this.props.getElevation=="function"?this.props.getElevation({hexId:i,properties:A}):this.props.getElevation])),hexId:i,properties:A}):n.push({hexId:i,polygon:y,properties:A})}),this.setState({...this.state,polygons:n})}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState(e){const{resRange:n,lastResolution:r}=this.state,{props:i,oldProps:s,changeFlags:A,context:a}=e;if(i.getElevation!=s.getElevation||i.getValue!=s.getValue||A.viewportChanged){const y=bi().domain([0,1]).range(n)(u0(a.viewport.zoom));(y!=r||i.getValue!=s.getValue||i.getElevation!=s.getElevation)&&(this.setState({...this.state,lastResolution:y}),this.createPolygons())}}renderLayers(){return[new sv(this.getSubLayerProps({data:this.props.data,filled:this.props.filled,stroked:this.props.stroked,extruded:this.props.extruded,wireframe:this.props.wireframe,_normalize:this.props._normalize,_windingOrder:this.props._windingOrder,_full3d:this.props._full3d,elevationScale:this.props.elevationScale,getPolygon:this.props.getPolygon,getElevation:this.props.getElevation,getFillColor:this.props.getFillColor,getLineColor:this.props.getLineColor,getLineWidth:this.props.getLineWidth,material:this.props.material,transitions:this.props.transitions,updateTriggers:this.props.updateTriggers,id:"SolidHexTileLayer",data:this.state.polygons,getPolygon:e=>e.polygon,pickable:this.props.pickable,autoHighlight:this.props.autoHighlight,extensions:this.props.extensions,getOffset:this.props.getOffset,lineJointRounded:this.props.lineJointRounded}))]}}Li.layerName="SolidHexTileLayer";Li.defaultProps={...fr.defaultProps,...sv.defaultProps,thicknessRange:[.7,.9],getValue:void 0,raised:!1};class o4 extends fr{initializeState(){super.initializeState(),this.setState({getElevationFn:e=>!this.props.transitioning&&(mr(this.props.slide,9,9)&&e.properties.LandUse[0]==1||mr(this.props.slide,10,10)&&e.properties.LandUse[0]==2||mr(this.props.slide,11,11)&&e.properties.LandUse[0]==0)?2e3:0})}updateState(e){const{props:n,oldProps:r}=e;(n.transitioning!=r.transitioning||n.slide!=r.slide)&&this.setState({getElevationFn:i=>!n.transitioning&&(mr(n.slide,9,9)&&i.properties.LandUse[0]==1||mr(n.slide,10,10)&&i.properties.LandUse[0]==2||mr(n.slide,11,11)&&i.properties.LandUse[0]==0)?2e3:0})}renderLayers(){const{data:e,slide:n,transitioning:r}=this.props;return[new Li({id:"AverageDemand",data:e,thicknessRange:[0,1],filled:!0,extruded:!0,getElevation:this.state.getElevationFn,raised:!1,getFillColor:i=>g7(i.properties.DemandBaselineAverage),visible:mr(n,6,11),opacity:n>=7?1:0,transitions:{opacity:250},pickable:!0,autoHighlight:!0,updateTriggers:{getElevation:[n,r]}}),new Li({id:"AverageUnmetDemand",data:e,thicknessRange:[.5,.65],filled:!0,extruded:!0,getElevation:this.state.getElevationFn,raised:!1,getFillColor:i=>p7(i.properties.UnmetDemandBaselineAverage),visible:mr(n,6,11),opacity:n>=7?1:0,transitions:{opacity:250},updateTriggers:{getElevation:[n,r]}})]}}o4.layerName="SlideAverages";o4.defaultProps={...fr.defaultProps};class a4 extends fr{renderLayers(){const{data:e,slide:n}=this.props;return[new Li({id:"GroundwaterAgainLayer",data:e,thicknessRange:[0,1],filled:!0,extruded:!1,raised:!1,getFillColor:r=>Lm(r.properties.GroundwaterAverage),visible:mr(n,12,13),opacity:mr(n,13,13)?.2:0,transitions:{opacity:250}}),new Li({id:"DeliveryWaterLayer",data:e,thicknessRange:[.5,.65],filled:!0,extruded:!1,raised:!1,getFillColor:r=>m7(r.properties.DemandBaselineAverage+r.properties.UnmetDemandBaselineAverage),visible:mr(n,11,13),opacity:mr(n,12,13)?1:0,transitions:{opacity:250}})]}}a4.layerName="SlideDeliveries";a4.defaultProps={...fr.defaultProps};const kme=/^[og]\s*(.+)?/,Lme=/^mtllib /,Dme=/^usemtl /;class l4{constructor(e){let{index:n,name:r="",mtllib:i,smooth:s,groupStart:A}=e;this.index=n,this.name=r,this.mtllib=i,this.smooth=s,this.groupStart=A,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}clone(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.index;return new l4({index:e,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}class Rme{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.name=e,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}startMaterial(e,n){const r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);const i=new l4({index:this.materials.length,name:e,mtllib:Array.isArray(n)&&n.length>0?n[n.length-1]:"",smooth:r!==void 0?r.smooth:this.smooth,groupStart:r!==void 0?r.groupEnd:0});return this.materials.push(i),i}currentMaterial(){if(this.materials.length>0)return this.materials[this.materials.length-1]}_finalize(e){const n=this.currentMaterial();if(n&&n.groupEnd===-1&&(n.groupEnd=this.geometry.vertices.length/3,n.groupCount=n.groupEnd-n.groupStart,n.inherited=!1),e&&this.materials.length>1)for(let r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),n}}class Bme{constructor(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}startObject(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.object&&!this.object.fromDeclaration){this.object.name=e,this.object.fromDeclaration=n;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object=new Rme(e),this.object.fromDeclaration=n,r&&r.name&&typeof r.clone=="function"){const i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)}finalize(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)}parseVertexIndex(e,n){const r=parseInt(e);return(r>=0?r-1:r+n/3)*3}parseNormalIndex(e,n){const r=parseInt(e);return(r>=0?r-1:r+n/3)*3}parseUVIndex(e,n){const r=parseInt(e);return(r>=0?r-1:r+n/2)*2}addVertex(e,n,r){const i=this.vertices,s=this.object.geometry.vertices;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[n+0],i[n+1],i[n+2]),s.push(i[r+0],i[r+1],i[r+2])}addVertexPoint(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])}addVertexLine(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])}addNormal(e,n,r){const i=this.normals,s=this.object.geometry.normals;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[n+0],i[n+1],i[n+2]),s.push(i[r+0],i[r+1],i[r+2])}addColor(e,n,r){const i=this.colors,s=this.object.geometry.colors;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[n+0],i[n+1],i[n+2]),s.push(i[r+0],i[r+1],i[r+2])}addUV(e,n,r){const i=this.uvs,s=this.object.geometry.uvs;s.push(i[e+0],i[e+1]),s.push(i[n+0],i[n+1]),s.push(i[r+0],i[r+1])}addUVLine(e){const n=this.uvs;this.object.geometry.uvs.push(n[e+0],n[e+1])}addFace(e,n,r,i,s,A,a,y,w){const M=this.vertices.length;let C=this.parseVertexIndex(e,M),k=this.parseVertexIndex(n,M),U=this.parseVertexIndex(r,M);if(this.addVertex(C,k,U),i!==void 0&&i!==""){const H=this.uvs.length;C=this.parseUVIndex(i,H),k=this.parseUVIndex(s,H),U=this.parseUVIndex(A,H),this.addUV(C,k,U)}if(a!==void 0&&a!==""){const H=this.normals.length;C=this.parseNormalIndex(a,H),k=a===y?C:this.parseNormalIndex(y,H),U=a===w?C:this.parseNormalIndex(w,H),this.addNormal(C,k,U)}this.colors.length>0&&this.addColor(C,k,U)}addPointGeometry(e){this.object.geometry.type="Points";const n=this.vertices.length;for(const r of e)this.addVertexPoint(this.parseVertexIndex(r,n))}addLineGeometry(e,n){this.object.geometry.type="Line";const r=this.vertices.length,i=this.uvs.length;for(const s of e)this.addVertexLine(this.parseVertexIndex(s,r));for(const s of n)this.addUVLine(this.parseUVIndex(s,i))}}function zme(t){const e=new Bme;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const n=t.split(`
`);let r="",i="",s=0,A=[];const a=typeof"".trimLeft=="function";for(let M=0,C=n.length;M<C;M++)if(r=n[M],r=a?r.trimLeft():r.trim(),s=r.length,s!==0&&(i=r.charAt(0),i!=="#"))if(i==="v"){const k=r.split(/\s+/);switch(k[0]){case"v":e.vertices.push(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),k.length>=7&&e.colors.push(parseFloat(k[4]),parseFloat(k[5]),parseFloat(k[6]));break;case"vn":e.normals.push(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3]));break;case"vt":e.uvs.push(parseFloat(k[1]),parseFloat(k[2]));break}}else if(i==="f"){const U=r.substr(1).trim().split(/\s+/),H=[];for(let se=0,Z=U.length;se<Z;se++){const J=U[se];if(J.length>0){const re=J.split("/");H.push(re)}}const q=H[0];for(let se=1,Z=H.length-1;se<Z;se++){const J=H[se],re=H[se+1];e.addFace(q[0],J[0],re[0],q[1],J[1],re[1],q[2],J[2],re[2])}}else if(i==="l"){const k=r.substring(1).trim().split(" ");let U;const H=[];if(r.indexOf("/")===-1)U=k;else{U=[];for(let q=0,se=k.length;q<se;q++){const Z=k[q].split("/");Z[0]!==""&&U.push(Z[0]),Z[1]!==""&&H.push(Z[1])}}e.addLineGeometry(U,H)}else if(i==="p"){const U=r.substr(1).trim().split(" ");e.addPointGeometry(U)}else if((A=kme.exec(r))!==null){const k=(" "+A[0].substr(1).trim()).substr(1);e.startObject(k)}else if(Dme.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(Lme.test(r))e.materialLibraries.push(r.substring(7).trim());else if(i==="s"){if(A=r.split(" "),A.length>1){const U=A[1].trim().toLowerCase();e.object.smooth=U!=="0"&&U!=="off"}else e.object.smooth=!0;const k=e.object.currentMaterial();k&&(k.smooth=e.object.smooth)}else{if(r==="\0")continue;throw new Error('Unexpected line: "'.concat(r,'"'))}e.finalize();const y=[],w=[];for(const M of e.objects){const{geometry:C}=M;if(C.vertices.length===0)continue;const k={header:{vertexCount:C.vertices.length/3},attributes:{}};switch(C.type){case"Points":k.mode=0;break;case"Line":k.mode=1;break;default:k.mode=4;break}k.attributes.POSITION={value:new Float32Array(C.vertices),size:3},C.normals.length>0&&(k.attributes.NORMAL={value:new Float32Array(C.normals),size:3}),C.colors.length>0&&(k.attributes.COLOR_0={value:new Float32Array(C.colors),size:3}),C.uvs.length>0&&(k.attributes.TEXCOORD_0={value:new Float32Array(C.uvs),size:2}),k.materials=[];for(const U of M.materials){const H={name:U.name,flatShading:!U.smooth};k.materials.push(H),w.push(H)}k.name=M.name,y.push(k)}return{meshes:y,materials:w}}function Ome(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;for(const i in e)n=n||new Map,i!=="value"&&n.set(i,JSON.stringify(e[i]));const r=[];for(const i in t){const s=t[i],A=Fme(i,s);r.push(A)}return new wf(r,n)}function Fme(t,e){const n=new Map;for(const s in e)s!=="value"&&n.set(s,JSON.stringify(e[s]));const r=khe(e.value);return!("size"in e)||e.size===1?new lg(t,r,!1,n):new lg(t,new Ihe(e.size,new lg("value",r)),!1,n)}function u8(t,e){const{meshes:n}=zme(t),r=n.reduce((a,y)=>a+y.header.vertexCount,0),i=Nme(n,r),s={vertexCount:r,boundingBox:tF(i)},A=Ome(i,{mode:4,boundingBox:s.boundingBox});return{loaderData:{header:{}},schema:A,header:s,mode:4,attributes:i}}function Nme(t,e){const n=new Float32Array(e*3);let r,i,s,A=0;for(const y of t){const{POSITION:w,NORMAL:M,COLOR_0:C,TEXCOORD_0:k}=y.attributes;n.set(w.value,A*3),M&&(r=r||new Float32Array(e*3),r.set(M.value,A*3)),C&&(i=i||new Float32Array(e*3),i.set(C.value,A*3)),k&&(s=s||new Float32Array(e*2),s.set(k.value,A*2)),A+=w.value.length/3}const a={};return a.POSITION={value:n,size:3},r&&(a.NORMAL={value:r,size:3}),i&&(a.COLOR_0={value:i,size:3}),s&&(a.TEXCOORD_0={value:s,size:2}),a}const Ume="3.4.14",Vme={name:"OBJ",id:"obj",module:"obj",version:Ume,worker:!0,extensions:["obj"],mimeTypes:["text/plain"],testText:Gme,options:{obj:{}}};function Gme(t){return t[0]==="v"}const Ii={...Vme,parse:async(t,e)=>u8(new TextDecoder().decode(t)),parseTextSync:(t,e)=>u8(t)},jme=bi().domain([0,1]).range(cS(0,oh.length)),$me=oh[0];class Yi extends fr{initializeState(){super.initializeState();const{zoom:e}=this.context.viewport,n=Object.keys(this.props.data).map(i=>parseInt(i)),r=bi().domain([0,1]).range(n)(u0(e));this.setState({hextiles:this.props.data,resRange:n,lastResolution:r}),this.createPolygons()}createPolygons(){const{hextiles:e,lastResolution:n}=this.state,r=[],i=e[n],[s,A]=this.props.offset;Object.keys(i).forEach(a=>{const y=i[a],w=m2(g2(a)[0],Oo.km)*.48,[M,C]=wv(a);let k=0;for(let[U,H,q]of this.props.getValue?$me:[[0,0,0]])r.push({position:[C+(U+s)*w/(111.32*Math.cos(M*Math.PI/180)),M+(H+A)*w/110.574,(typeof this.props.getElevation=="function"?this.props.getElevation({properties:y}):this.props.getElevation)+q*1e4],properties:y,polyIdx:k++,hexID:a})}),this.setState({...this.state,polygons:r})}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState(e){const{resRange:n,lastResolution:r}=this.state,{props:i,oldProps:s,changeFlags:A,context:a}=e;if(i.getElevation!=s.getElevation||A.viewportChanged){const y=bi().domain([0,1]).range(n)(u0(a.viewport.zoom));(y!=r||i.getElevation!=s.getElevation)&&(this.setState({...this.state,lastResolution:y}),this.createPolygons())}}renderLayers(){const{polygons:e,lastResolution:n,resRange:r}=this.state,i=md(n,Oo.km)/md(5,Oo.km);return[new T0(this.getSubLayerProps({data:this.props.data,mesh:this.props.mesh,texture:this.props.texture,textureParameters:this.props.textureParameters,getPosition:this.props.getPosition,getColor:this.props.getColor,getOrientation:this.props.getOrientation,getScale:this.props.getScale,getTranslation:this.props.getTranslation,getTransformMatrix:this.props.getTransformMatrix,sizeScale:this.props.sizeScale,_useMeshColors:this.props._useMeshColors,_instanced:this.props._instanced,wireframe:this.props.wireframe,material:this.props.material,transitions:this.props.transitions,updateTriggers:this.props.updateTriggers,id:"IconHexTileLayer",data:e,getPosition:s=>s.position,sizeScale:this.props.sizeScale*i,getTranslation:this.props.getValue===null?[0,0,0]:s=>{const A=oh[jme(this.props.getValue(s))][s.polyIdx],a=oh[0][s.polyIdx],y=m2(g2(s.hexID)[0],Oo.m)*.5;return[(A[0]-a[0])*y,(A[1]-a[1])*y,(A[2]-a[2])*1e4]}}))]}}Yi.layerName="IconHexTileLayer";Yi.defaultProps={...fr.defaultProps,...T0.defaultProps,thicknessRange:[.7,.9],getValue:null,getElevation:()=>0,offset:[0,0]};class A4 extends fr{renderLayers(){const{data:e,slide:n,counter:r}=this.props;return[new Yi({id:"DemandIcons",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:[255,130,35],getValue:i=>d2(i.properties.DemandBaseline[r]),sizeScale:3e3,visible:n==1,opacity:1,updateTriggers:{getTranslation:[r]}})]}}A4.layerName="SlideDemandIntro";A4.defaultProps={...fr.defaultProps};const c8=bi().domain([0,1]).range(cS(0,oh.length));class yd extends fr{initializeState(){super.initializeState(),this.setState({hextiles:this.props.data,resRange:Object.keys(this.props.data).map(e=>parseInt(e)),transitioning:!1,prevGetValueFn:null})}renderLayers(){let{hextiles:e,transitioning:n,prevGetValueFn:r,resRange:i}=this.state;const{zoom:s}=this.context.viewport;r===null?this.setState(Object.assign(this.state,{prevGetValueFn:this.props.getValue})):r!==this.props.getValue&&!n&&(this.setState(Object.assign(this.state,{transitioning:!0})),n=!0,setTimeout(()=>{this.setState(Object.assign(this.state,{transitioning:!1,prevGetValueFn:this.props.getValue}))},300));let A=[];const a=bi().domain([0,1]).range(i)(u0(s));let y=e[a],w=md(a,Oo.km)/md(5,Oo.km);return Object.keys(y).forEach(M=>{let C=y[M];const k=m2(g2(M)[0],Oo.km)*.5,[U,H]=wv(M),q=this.props.getValue?c8(this.props.getValue({properties:C})):1;for(let[se,Z,J]of this.props.getValue?n?PAe[c8(r({properties:C}))][q]:oh[q]:[[0,0,0]]){let[re,de]=this.props.offset;A.push({position:[H+(se+re)*k/(111.32*Math.cos(U*3.1415/180)),U+(Z+de)*k/110.574,(typeof this.props.getElevation=="function"?this.props.getElevation({properties:C}):this.props.getElevation)+J*1e4],properties:C})}}),[new T0(this.getSubLayerProps({data:this.props.data,mesh:this.props.mesh,texture:this.props.texture,textureParameters:this.props.textureParameters,getPosition:this.props.getPosition,getColor:this.props.getColor,getOrientation:this.props.getOrientation,getScale:this.props.getScale,getTranslation:this.props.getTranslation,getTransformMatrix:this.props.getTransformMatrix,sizeScale:this.props.sizeScale,_useMeshColors:this.props._useMeshColors,_instanced:this.props._instanced,wireframe:this.props.wireframe,material:this.props.material,transitions:this.props.transitions,updateTriggers:this.props.updateTriggers,id:"AnimatedIconHexTileLayer",data:A,getPosition:M=>M.position,sizeScale:this.props.sizeScale*w}))]}}yd.layerName="AnimatedIconHexTileLayer";yd.defaultProps={...fr.defaultProps,...T0.defaultProps,getValue:void 0,getElevation:()=>0,offset:[0,0],transitions:{getPosition:{duration:300,easing:KI.overshoot(2)},getColor:{duration:300,easing:KI.overshoot(2)}}};class u4 extends fr{renderLayers(){const{data:e,slide:n,counter:r}=this.props;return[new Li({id:"GroundwaterLayer",data:e,thicknessRange:[0,1],filled:!0,extruded:!1,raised:!1,getFillColor:i=>Lm(i.properties.Groundwater[n<=2?r:n<=4?1026:1197]),visible:mr(n,1,6),opacity:n>=2?.2:0,transitions:{opacity:250},updateTriggers:{getFillColor:[r,n]}}),new yd({id:"UnmetDemandIcons1",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:mr(n,2,3)?[255,130,35]:[255,130,35],getValue:n==2||n==5?i=>0:n==3?i=>d2(i.properties.DemandBaseline[1026]):i=>Jc(i.properties.UnmetDemandBaseline[1026]),sizeScale:3e3,visible:mr(n,2,5),opacity:1}),new yd({id:"UnmetDemandIcons2",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:mr(n,4,5)?[255,130,35]:[255,130,35],getValue:n==4||n==7?i=>0:n==5?i=>d2(i.properties.DemandBaseline[1197]):i=>Jc(i.properties.UnmetDemandBaseline[1197]),sizeScale:3e3,visible:mr(n,4,7),opacity:1})]}}u4.layerName="SlideDemandVsUnmet";u4.defaultProps={...fr.defaultProps};class c4 extends fr{renderLayers(){const{data:e,slide:n,cycler:r}=this.props;return[new Yi({id:"ScenarioUnmetRandomized",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:i=>[255,130,35],getValue:i=>Jc(i.properties.UnmetDemand[pr[r%3]][Math.floor(r/3)*67%1199+1]),sizeScale:3e3,visible:mr(n,21,21),opacity:1,updateTriggers:{getTranslation:[r]}}),new Li({id:"DifferenceLayerRandomized",data:e,thicknessRange:[.5,.65],filled:!0,extruded:!1,raised:!1,getFillColor:i=>A0(i.properties.UnmetDemand[pr[r%3]][Math.floor(r/3)*67%1199+1]-i.properties.UnmetDemandBaseline[Math.floor(r/3)*67%1199+1]),visible:mr(n,20,21),opacity:mr(n,21,21)?1:0,transitions:{opacity:250},updateTriggers:{getFillColor:[r]}})]}}c4.layerName="SlideEndRandomized";c4.defaultProps={...fr.defaultProps};class h4 extends fr{renderLayers(){const{data:e,slide:n,transitioning:r}=this.props;return[new Yi({id:"SettlementIconsLayer",data:Us(e,i=>i.LandUse[0]==0),loaders:[Ii],mesh:"assets/dam.obj",raised:!0,getElevation:!r&&mr(n,11,11)?2e3:0,getColor:[255,127,206],sizeScale:.8*500,visible:mr(n,9,13),opacity:1,updateTriggers:{getElevation:[n,r]}}),new Yi({id:"ExhangeIconsLayer",data:Us(e,i=>i.LandUse[0]==1),loaders:[Ii],mesh:"assets/cow.obj",raised:!0,getElevation:!r&&mr(n,9,9)?2e3:0,getColor:[255,127,206],sizeScale:.8*550,visible:mr(n,9,13),opacity:1,updateTriggers:{getElevation:[n,r]}}),new Yi({id:"ProjectIconsLayer",data:Us(e,i=>i.LandUse[0]==2),loaders:[Ii],mesh:"assets/project.obj",raised:!0,getElevation:!r&&mr(n,10,10)?2e3:0,getColor:[255,127,206],sizeScale:.8*180,visible:mr(n,9,13),opacity:1,updateTriggers:{getElevation:[n,r]}}),new Yi({id:"NonProjectIconsLayer",data:Us(e,i=>i.LandUse[0]==3),loaders:[Ii],mesh:"assets/nonproject.obj",raised:!0,getElevation:0,getColor:[255,127,206],sizeScale:.8*140,visible:mr(n,9,13),opacity:1,updateTriggers:{getElevation:[n,r]}})]}}h4.layerName="SlideOwners";h4.defaultProps={...fr.defaultProps};class f4 extends fr{renderLayers(){const{data:e,slide:n,curScenario:r,cycler:i}=this.props;return[new Li({id:"GroundwaterAgainTimed",data:e,thicknessRange:[0,1],filled:!0,extruded:!1,raised:!1,getFillColor:s=>Lm(s.properties.Groundwater[mr(n,13,19)?1026:n==20?1197:Math.floor(i/3)*67%1199+1]),visible:mr(n,13,21),opacity:mr(n,14,21)?.2:0,transitions:{opacity:250}}),new yd({id:"ScenarioUnmet",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:s=>[255,130,35],getValue:n==13?s=>0:n==14?s=>Jc(s.properties.UnmetDemandBaseline[1026]):s=>Jc(s.properties.UnmetDemand[pr[r]][1026]),sizeScale:3e3,visible:mr(n,13,19),opacity:1,updateTriggers:{getFillColor:[r]}}),new Li({id:"DifferenceLayer",data:e,thicknessRange:[.5,.65],filled:!0,extruded:!1,raised:!1,getFillColor:s=>A0(s.properties.UnmetDemand[pr[r]][1026]-s.properties.UnmetDemandBaseline[1026]),visible:mr(n,15,19),opacity:mr(n,16,19)?1:0,transitions:{opacity:250},updateTriggers:{getFillColor:[r]}}),new yd({id:"ScenarioUnmet1197",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:s=>[255,130,35],getValue:s=>Jc(s.properties.UnmetDemand[pr[i%3]][1197]),sizeScale:3e3,visible:mr(n,20,20),opacity:1,updateTriggers:{getFillColor:[i]}}),new Li({id:"DifferenceLayer1197",data:e,thicknessRange:[.5,.65],filled:!0,extruded:!1,raised:!1,getFillColor:s=>A0(s.properties.UnmetDemand[pr[i%3]][1197]-s.properties.UnmetDemandBaseline[1197]),visible:mr(n,19,20),opacity:mr(n,20,20)?1:0,transitions:{opacity:250},updateTriggers:{getFillColor:[i]}})]}}f4.layerName="SlideScenarioExplanations";f4.defaultProps={...fr.defaultProps};let d4=class extends fr{renderLayers(){return[new av({data:"https://services.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}.png",minZoom:7,maxZoom:11,tileSize:256,zoomOffset:-1,renderSubLayers:e=>{const{bbox:{west:n,south:r,east:i,north:s}}=e.tile;return new ev(e,{data:null,image:e.data,bounds:[n,r,i,s]})}}),new Li({id:"HoveringTiles",data:this.props.data,thicknessRange:[0,1],filled:!0,extruded:!1,raised:!1,getFillColor:[0,0,0,0],pickable:!0,autoHighlight:!0})]}};d4.layerName="SlideTerrain";d4.defaultProps={...fr.defaultProps};class M7 extends fr{renderLayers(){return[new d4(this.props),new A4(this.props),new u4(this.props),new o4(this.props),new h4(this.props),new a4(this.props),new f4(this.props),new c4(this.props)]}}M7.layerName="MartiniSlides";M7.defaultProps={...fr.defaultProps};class C7 extends fr{initializeState(){super.initializeState(),this.setState({data0:Us(this.props.data,e=>e.LandUse[0]==0),data1:Us(this.props.data,e=>e.LandUse[0]==1),data2:Us(this.props.data,e=>e.LandUse[0]==2),data3:Us(this.props.data,e=>e.LandUse[0]==3)})}renderLayers(){const{data:e,slide:n,curScenario:r,speedyCounter:i,displayGW:s,displayDiff:A,displayUnmet:a,displayDemand:y,displayLandUse:w}=this.props,M=n>=22;return[new Li({id:"HoveringTilesEpilogue",data:e,thicknessRange:[0,1],filled:!0,extruded:!1,raised:!1,getFillColor:[0,0,0,0],visible:M,pickable:!0,autoHighlight:!0}),new Li({id:"GroundwaterEpilogue",data:e,thicknessRange:[0,1],filled:!0,extruded:!1,raised:!1,getFillColor:C=>Lm(C.properties.Groundwater[i]),visible:s&&M,opacity:.2,updateTriggers:{getFillColor:[i]}}),new Li({id:"DifferenceEpilogue",data:e,thicknessRange:[.5,.65],filled:!0,extruded:!1,raised:!1,getFillColor:C=>A0(C.properties.UnmetDemand[pr[r]][i]-C.properties.UnmetDemandBaseline[i]),visible:A&&M,opacity:1,updateTriggers:{getFillColor:[i,r]}}),new Yi({id:"ScenarioUnmetEpilogue",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:[255,130,35],getValue:C=>Jc(C.properties.UnmetDemand[pr[r]][i]),sizeScale:3e3,visible:a&&M,opacity:1,updateTriggers:{getTranslation:[i,r]}}),new Yi({id:"ScenarioDemandEpilogue",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,extruded:!1,getColor:[255,130,35],getValue:C=>d2(C.properties.Demand[pr[r]][i]),sizeScale:3e3,visible:y&&M,opacity:1,updateTriggers:{getTranslation:[i,r]}}),new Yi({id:"SettlementIconsEpilogue",data:this.state.data0,loaders:[Ii],mesh:"assets/dam.obj",raised:!1,getColor:[255,127,206],sizeScale:.8*500,visible:w&&M,opacity:1,updateTriggers:{getTranslation:[i]}}),new Yi({id:"ExhangeIconsEpilogue",data:this.state.data1,loaders:[Ii],mesh:"assets/cow.obj",raised:!1,getColor:[255,127,206],sizeScale:.8*550,visible:w&&M,opacity:1,updateTriggers:{getTranslation:[i]}}),new Yi({id:"ProjectIconsEpilogue",data:this.state.data2,loaders:[Ii],mesh:"assets/project.obj",raised:!1,getColor:[255,127,206],sizeScale:.8*180,visible:w&&M,opacity:1,updateTriggers:{getTranslation:[i]}}),new Yi({id:"NonProjectIconsEpilogue",data:this.state.data3,loaders:[Ii],mesh:"assets/nonproject.obj",raised:!1,getColor:[255,127,206],sizeScale:.8*140,visible:w&&M,opacity:1,updateTriggers:{getTranslation:[i]}})]}}C7.layerName="SlideEpilogue";C7.defaultProps={...fr.defaultProps,autoHighlight:!0};const Hme={0:"This is Californias <b>Central Valley</b>, home to over 7 million people and 18% of Californias total population. (2020 US Census)",1:"We have lots of demand that tends to cycle through highs and lows depending on the time of the year, peaking at around July. Each drop that you see represents a unit of <b>demand</b> for water.",2:"However, our groundwater supply stays consistent throughout the year, and usually cannot keep up during peak demands.",3:"This leads to unmet demand. For example, take May 2007. This is the demand of that month.",4:"This is unmet demand. As you can see, not everyone will get their demand. Notice anything?",5:"Lets try another timestep. This is water demand from July 2021.",6:"This is unmet demand.",7:`This is the average over 100 years. We can see that the areas of <b style="color: rgb(${nb});">unmet demand</b> does not necessarily correspond with areas of <b style="color: rgb(${iy});">demand</b>.`,8:"If we take a closer look at this region, we can investigate what might have contributed to this inequity.",9:`If we overlay the map with land holders, we can see that exchange holders, symbolized with cows, are the ones predominantly demanding high amounts of <b style="color: rgb(${iy});">demand</b>. However, they arent suffering from as high <b style="color: rgb(${nb});">unmet demand</b>. In fact, they seem to be doing quite well.`,10:`What we should expect is more of the following. Here, a patch of land held by project holders are symbolized with a paper scroll. This area contends with high levels of <b style="color: rgb(${nb});">unmet demand</b>; this is expected, since it has high levels of <b style="color: rgb(${iy});">demand</b>.`,11:`On the other hand, settlement holders are similar to exchange holders in that they also historically have <b style="color: rgb(${iy});">high demand</b>, but get special treatment as well.`,12:"In fact, we can see on average, settlement and exchange land holders get higher water delivery rates because they are higher priority; this is how they are able to maintain low average levels of unmet demand even though they have high average levels of demand.",13:"And this does not necessarily correspond to groundwater supply.",14:"Thus, we can see that due to certain government policies, certain regions get higher priority and access to water supply, even if their demand largely outweigh surrounding regions. The question is, is this the only option?",15:"Certainly not. That is where CalSim comes in, a simulation program that plays out the what-if scenarios. Imagine an alternate universe where government policies were different; well call this Scenario 1. Let us revisit the first time step from earlier, May 2007.",16:`This time, the rings indicate regions that are doing <b style="color: rgb(${Vge});">better</b> or <b style="color: rgb(${Gge});">worse</b> than real-life, or historical, baselines.`,17:"Notice that now in this region, unmet demand is now more equal across regions, at the cost of some regions doing better than historical levels and other regions doing worse than historical levels.",18:"What about another alternate scenario, Scenario 2? We can see that this scenario favors less equal distribution of unmet demand at the tradeoff of keeping levels closer to baseline historical level.",19:"Scenario 3 is somewhere in between.",20:"Heres a timestep with more dramatic differences between scenarios, July 2021.",21:"As you may have noticed, rarely is there a situation where everyone wins. Tradeoffs must be made between regions, if not between months, and who and when to save water. With climate change and increasing population in the Central Valley, these choices become all the more pertinent. Which scenario is best? That choice is up to <b>you</b>.<br/><i>Data from James Gilbert (NOAA)</i>"};Object.values(Hme).length;const h8=Ga(_7,.5).replace(/[^\d,]/g,"").split(",").map(t=>Number(t)),f8=Ga(_7,.5,-.5).replace(/[^\d,]/g,"").split(",").map(t=>Number(t)),d8=Ga("rgb(100, 100, 100)",.5).replace(/[^\d,]/g,"").split(",").map(t=>Number(t)),p8=Ga("rgb(100, 100, 100)",.5,-.5).replace(/[^\d,]/g,"").split(",").map(t=>Number(t));function Wme({counter:t,displayMonth:e,dataset:n}){const r=(t+9)%12+1,i=rt.useRef();rt.useEffect(()=>{i.current=Object.groupBy(Rw[n],(w,M)=>Uy(M).toLocaleString("default",{year:"numeric"}))},[n]);const s=Ms().domain([0,O3(Rw[n],w=>w)]).range([40,90]),A=Ms().domain([1,12]).range([0,2*Math.PI]),a=w6().radius(w=>s(w)).curve(E6).angle((w,M)=>A((M+9)%12+1)),y=w6().radius(w=>s(w)).curve(E6).angle((w,M)=>A(M%12+1));rt.useEffect(()=>(Ia("#clockContainer").style("visibility","visible"),Ia("#pieOutline path").attr("d",x6().innerRadius(40).outerRadius(90).startAngle(0).endAngle(Math.PI*2)).attr("fill","none").attr("stroke",n=="averageGroundwater"?`rgb(${h8})`:`rgba(${d8}, 1)`),Ia("#demandLine path").data([Rw[n]]).join("path").attr("d",w=>a(w)).attr("stroke",n=="averageGroundwater"?`rgba(${f8}, 0.3)`:`rgba(${p8}, 0.3)`).attr("stroke-width","0.2").attr("fill","none"),function(){Ia("#clockContainer").style("visibility","hidden"),Ia("#pie path").attr("d",""),Ia("#pieOutline path").attr("d",""),Ia("#demandLine path").attr("d",""),Ia("#demandLineCur path").attr("d",""),Ia("#date").text("")}),[n]),rt.useEffect(()=>{Ia("#pie path").attr("d",x6().innerRadius(40).outerRadius(90).startAngle(0).endAngle(Math.PI*r/12*2)).attr("fill",n=="averageGroundwater"?`rgb(${h8})`:`rgba(${d8}, 1)`);let w=Uy(t);e?Ia("#date").html("<b>"+w.toLocaleString("default",{year:"numeric"})+"</b><br/>"+w.toLocaleString("default",{month:"long"})):Ia("#date").html("<b>"+w.toLocaleString("default",{year:"numeric"})+"</b>"),dse("#demandLineCur path").data([i.current[Uy(t).toLocaleString("default",{year:"numeric"})]]).join("path").attr("d",M=>y(M)).attr("stroke",n=="averageGroundwater"?`rgba(${f8}, 1)`:`rgba(${p8}, 1)`).attr("stroke-width","2").attr("fill","none")},[n,t])}function Qme({slide:t,setCurScenario:e}){const[n,r]=rt.useState($ge),[i,s]=rt.useState(!1),A=rt.useCallback(()=>{r({...Hge,onTransitionEnd:()=>s(!1)})},[]),a=rt.useCallback(()=>{r({...Qge,onTransitionEnd:()=>s(!1)})},[]),y=rt.useCallback(()=>{r({...qge,onTransitionEnd:()=>s(!1)})},[]),w=rt.useCallback(()=>{r({...Zge,onTransitionEnd:()=>s(!1)})},[]),M=rt.useCallback(()=>{r({...s8,onTransitionEnd:()=>s(!1)})},[]),C=rt.useCallback(()=>{s(!0),r({...Wge,onTransitionEnd:a})},[]),k=rt.useCallback(()=>{s(!0),r({...s8,onTransitionEnd:y})},[]);return rt.useEffect(()=>{t==8?(s(!0),A()):t==10?k():t==11?C():t==12?(s(!0),M()):t==17&&(s(!0),w()),mr(t,15,17)?e(0):t==18?e(1):t==19&&e(2)},[t]),{curViewState:n,transitioning:i}}function qme({slide:t}){const[e,n]=rt.useState(1027),[r,i]=rt.useState(1027),[s,A]=rt.useState(!1),[a,y]=rt.useState(0),[w,M]=rt.useState(!1);return rt.useEffect(()=>{if(s){let C=setTimeout(()=>i(k=>k%1199+1),33.333333333333336);return function(){clearTimeout(C)}}},[r,s]),rt.useEffect(()=>{if(mr(t,1,2)){M(!0);let C=setTimeout(()=>n(k=>k%1199+1),250);return function(){clearTimeout(C),M(!1)}}},[e,t]),rt.useEffect(()=>{if(mr(t,20,21)){let C=setTimeout(()=>y(k=>(k+1)%1e3),2e3);return function(){clearTimeout(C)}}},[a,t]),{counter:e,setCounter:n,speedyCounter:r,setSpeedyCounter:i,playing:s,setPlaying:A,cycler:a,setCycler:y,counting:w,setCounting:M}}class P7 extends fr{initializeState(){super.initializeState(),this.setState({data0:Us(this.props.data,e=>e.LandUse[0]==0),data1:Us(this.props.data,e=>e.LandUse[0]==1),data2:Us(this.props.data,e=>e.LandUse[0]==2),data3:Us(this.props.data,e=>e.LandUse[0]==3)})}renderLayers(){const{data:e,curScenario:n,speedyCounter:r,displayGW:i,displayDiff:s,displayUnmet:A,displayDemand:a,displayLandUse:y,displayDemAsRings:w,hoveredHex:M,clickedHexes:C,hoveredGeoActive:k,hoveredGeos:U,selectedGeoJSON:H,selectedGeos:q,selectionFinalized:se}=this.props;return[new _l({id:"GeoJsonExt",data:H,opacity:.75,extruded:!0,getElevation:Z=>y7(n>-1?Z.properties.UnmetDemand[pr[n]][r]:Z.properties.UnmetDemandBaseline[r]),pickable:!0,getLineWidth:100,getFillColor:Z=>{let J=Nh(n>-1?Z.properties.UnmetDemand[pr[n]][r]:Z.properties.UnmetDemandBaseline[r]);if(J[3]==0&&(J=[255,255,255,255]),Z.properties.DU_ID==k){const re=[0,0,.5019607843137255,.5019607843137255];return[(re[0]*re[3]+J[0]/255*(1-re[3]))*255,(re[1]*re[3]+J[1]/255*(1-re[3]))*255,(re[2]*re[3]+J[2]/255*(1-re[3]))*255,(re[3]*re[3]+J[3]/255*(1-re[3]))*255]}return J},updateTriggers:{getFillColor:[n,r,k,se],getElevation:[n,r]}}),new _l({id:"GeoJsonGray",data:s0,opacity:.3,stroked:!1,getFillColor:Z=>!se&&Z.properties.DU_ID in U?[100,100,100,205*U[Z.properties.DU_ID]+50]:[0,0,0,0],visible:!se,updateTriggers:{getFillColor:[M,se]}}),new _l({id:"GeoJsonColor",data:{type:"FeatureCollection",features:s0.features.filter(Z=>Z.properties.DU_ID in q)},opacity:.3,pickable:!0,getLineWidth:Z=>Z.properties.DU_ID==k?100:20,getFillColor:Z=>{if(Z.properties.DU_ID==k){const J=[0,0,.5019607843137255,.5019607843137255],re=Nh(n>-1?q[Z.properties.DU_ID].UnmetDemand[pr[n]][r]:q[Z.properties.DU_ID].UnmetDemandBaseline[r]);return[(J[0]*J[3]+re[0]/255*(1-J[3]))*255,(J[1]*J[3]+re[1]/255*(1-J[3]))*255,(J[2]*J[3]+re[2]/255*(1-J[3]))*255,(J[3]*J[3]+re[3]/255*(1-J[3]))*255]}return Z.properties.DU_ID in q?Nh(n>-1?q[Z.properties.DU_ID].UnmetDemand[pr[n]][r]:q[Z.properties.DU_ID].UnmetDemandBaseline[r]):[0,0,0,0]},getLineColor:[0,0,0],updateTriggers:{getFillColor:[k,n,se],getLineWidth:[k]}}),new Li({id:"HoveringTiles",data:e,thicknessRange:[0,1],getFillColor:[0,0,0,0],pickable:!se,autoHighlight:!se}),new Li({id:"Groundwater",data:e,thicknessRange:[0,1],getFillColor:Z=>colorInterpGW(Z.properties.Groundwater[r]),visible:i,opacity:.2,updateTriggers:{getFillColor:[r]}}),new Li({id:"Difference",data:e,thicknessRange:[.5,.65],getFillColor:Z=>colorInterpDemDiff(n<0?0:Z.properties.UnmetDemand[pr[n]][r]-Z.properties.UnmetDemandBaseline[r]),visible:s&&n>-1,opacity:1,updateTriggers:{getFillColor:[n,r]}}),new Li({id:"UnmetRings",data:e,thicknessRange:[.4,.65],getFillColor:Z=>Nh(n>-1?Z.properties.UnmetDemand[pr[n]][r]:Z.properties.UnmetDemandBaseline[r]),getValue:Z=>l7(n>-1?1:Z.properties.MUnmetDemandBaseline[r]),raised:!0,getElevation:Z=>Z.hexId in C?5e3:0,getLineWidth:Z=>Z.hexId in C?100:0,stroked:!0,extruded:!1,lineJointRounded:!0,getLineColor:[255,255,255,200],visible:A&&w,getOffset:-.5,extensions:[new lv({offset:!0})],opacity:1,updateTriggers:{getFillColor:[n,r],getValue:[n,r],getElevation:[se],getLineWidth:[se]}}),new Li({id:"DemandRings",data:e,thicknessRange:[.5,.65],getFillColor:Z=>colorInterpDem(n>-1?Z.properties.Demand[pr[n]][r]:Z.properties.DemandBaseline[r]),visible:a&&w,opacity:1,updateTriggers:{getFillColor:[n,r]}}),new Yi({id:"ScenarioUnmet",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,getColor:[255,130,35],getValue:Z=>valueInterpUDem(n>-1?Z.properties.UnmetDemand[pr[n]][r]:Z.properties.UnmetDemandBaseline[r]),sizeScale:3e3,visible:A&&!w,opacity:1,updateTriggers:{getTranslation:[n,r]}}),new Yi({id:"ScenarioDemand",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,getColor:[255,130,35],getValue:Z=>valueInterpDem(n>-1?Z.properties.Demand[pr[n]][r]:Z.properties.DemandBaseline[r]),sizeScale:3e3,visible:a&&!w,opacity:1,updateTriggers:{getTranslation:[n,r]}}),new Yi({id:"SettlementIcons",data:this.state.data0,loaders:[Ii],mesh:"assets/dam.obj",getColor:[255,127,206],sizeScale:.8*500,visible:y,opacity:1,updateTriggers:{getTranslation:[r]}}),new Yi({id:"ExhangeIcons",data:this.state.data1,loaders:[Ii],mesh:"assets/cow.obj",getColor:[255,127,206],sizeScale:.8*550,visible:y,opacity:1,updateTriggers:{getTranslation:[r]}}),new Yi({id:"ProjectIcons",data:this.state.data2,loaders:[Ii],mesh:"assets/project.obj",getColor:[255,127,206],sizeScale:.8*180,visible:y,opacity:1,updateTriggers:{getTranslation:[r]}}),new Yi({id:"NonProjectIcons",data:this.state.data3,loaders:[Ii],mesh:"assets/nonproject.obj",getColor:[255,127,206],sizeScale:.8*140,visible:y,opacity:1,updateTriggers:{getTranslation:[r]}})]}}P7.layerName="SandboxSlide";P7.defaultProps={...fr.defaultProps};class p4 extends fr{renderLayers(){return[new av({data:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",minZoom:7,maxZoom:11,tileSize:256,renderSubLayers:e=>{const{bbox:{west:n,south:r,east:i,north:s}}=e.tile;return new ev(e,{data:null,image:e.data,bounds:[n,r,i,s]})}})]}}p4.layerName="SlideTerrain";p4.defaultProps={...fr.defaultProps};function Zme(t,e){var n,r,i,s,A,a,y,w,M,C,k=0,U=t.type==="FeatureCollection",H=t.type==="Feature",q=U?t.features.length:1;for(n=0;n<q;n++){for(a=U?t.features[n].geometry:H?t.geometry:t,w=U?t.features[n].properties:H?t.properties:{},M=U?t.features[n].bbox:H?t.bbox:void 0,C=U?t.features[n].id:H?t.id:void 0,y=a?a.type==="GeometryCollection":!1,A=y?a.geometries.length:1,i=0;i<A;i++){if(s=y?a.geometries[i]:a,s===null){if(e(null,k,w,M,C)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,k,w,M,C)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],k,w,M,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}k++}}function Yme(t,e,n){var r=n;return Zme(t,function(i,s,A,a,y){s===0&&n===void 0?r=i:r=e(r,i,s,A,a,y)}),r}var g8=6378137;function m8(t){return Yme(t,function(e,n){return e+Xme(n)},0)}function Xme(t){var e=0,n;switch(t.type){case"Polygon":return y8(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=y8(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function y8(t){var e=0;if(t&&t.length>0){e+=Math.abs(_8(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(_8(t[n]))}return e}function _8(t){var e,n,r,i,s,A,a,y=0,w=t.length;if(w>2){for(a=0;a<w;a++)a===w-2?(i=w-2,s=w-1,A=0):a===w-1?(i=w-1,s=0,A=1):(i=a,s=a+1,A=a+2),e=t[i],n=t[s],r=t[A],y+=(rb(r[0])-rb(e[0]))*Math.sin(rb(n[1]));y=y*g8*g8/2}return y}function rb(t){return t*Math.PI/180}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Kme(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,A;return A={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function a(w){return function(M){return y([w,M])}}function y(w){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=w[0]&2?i.return:w[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,w[1])).done)return s;switch(i=0,s&&(w=[w[0]&2,s.value]),w[0]){case 0:case 1:s=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,i=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!s||w[1]>s[0]&&w[1]<s[3])){n.label=w[1];break}if(w[0]===6&&n.label<s[1]){n.label=s[1],s=w;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(w);break}s[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(M){w=[6,M],i=0}finally{r=s=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var ah=function(){function t(e,n){this.next=null,this.key=e,this.data=n,this.left=null,this.right=null}return t}();function Jme(t,e){return t>e?1:t<e?-1:0}function zc(t,e,n){for(var r=new ah(null,null),i=r,s=r;;){var A=n(t,e.key);if(A<0){if(e.left===null)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,e=a,e.left===null)break}s.left=e,s=e,e=e.left}else if(A>0){if(e.right===null)break;if(n(t,e.right.key)>0){var a=e.right;if(e.right=a.left,a.left=e,e=a,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function ib(t,e,n,r){var i=new ah(t,e);if(n===null)return i.left=i.right=null,i;n=zc(t,n,r);var s=r(t,n.key);return s<0?(i.left=n.left,i.right=n,n.left=null):s>=0&&(i.right=n.right,i.left=n,n.right=null),i}function v8(t,e,n){var r=null,i=null;if(e){e=zc(t,e,n);var s=n(e.key,t);s===0?(r=e.left,i=e.right):s<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function e1e(t,e,n){return e===null?t:(t===null||(e=zc(t.key,e,n),e.left=t),e)}function ME(t,e,n,r,i){if(t){r(""+e+(n?" ":" ")+i(t)+`
`);var s=e+(n?"    ":"   ");t.left&&ME(t.left,s,!1,r,i),t.right&&ME(t.right,s,!0,r,i)}}var g4=function(){function t(e){e===void 0&&(e=Jme),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,n){return this._size++,this._root=ib(e,n,this._root,this._comparator)},t.prototype.add=function(e,n){var r=new ah(e,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,s=zc(e,this._root,i),A=i(e,s.key);return A===0?this._root=s:(A<0?(r.left=s.left,r.right=s,s.left=null):A>0&&(r.right=s.right,r.left=s,s.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,n,r){var i;if(n===null)return null;n=zc(e,n,r);var s=r(e,n.key);return s===0?(n.left===null?i=n.right:(i=zc(e,n.left,r),i.right=n.right),this._size--,i):n},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=zc(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},t.prototype.find=function(e){return this._root&&(this._root=zc(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},t.prototype.contains=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},t.prototype.forEach=function(e,n){for(var r=this._root,i=[],s=!1;!s;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),e.call(n,r),r=r.right):s=!0;return this},t.prototype.range=function(e,n,r,i){for(var s=[],A=this._comparator,a=this._root,y;s.length!==0||a;)if(a)s.push(a),a=a.left;else{if(a=s.pop(),y=A(a.key,n),y>0)break;if(A(a.key,e)>=0&&r.call(i,a))return this;a=a.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(n){var r=n.key;return e.push(r)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n){var r=n.data;return e.push(r)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var n=this._root,r=!1,i=0,s=[];!r;)if(n)s.push(n),n=n.left;else if(s.length>0){if(n=s.pop(),i===e)return n;i++,n=n.right}else r=!0;return null},t.prototype.next=function(e){var n=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var s=i(e.key,n.key);if(s===0)break;s<0?(r=n,n=n.left):n=n.right}return r},t.prototype.prev=function(e){var n=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var s=i(e.key,n.key);if(s===0)break;s<0?n=n.left:(r=n,n=n.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return n1e(this._root)},t.prototype.load=function(e,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=e.length,s=this._comparator;if(r&&IE(e,n,0,i-1,s),this._root===null)this._root=CE(e,n,0,i),this._size=i;else{var A=r1e(this.toList(),t1e(e,n),s);i=this._size+i,this._root=PE({head:A},0,i)}return this},t.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var n=[];return ME(this._root,"",!0,function(r){return n.push(r)},e),n.join("")},t.prototype.update=function(e,n,r){var i=this._comparator,s=v8(e,this._root,i),A=s.left,a=s.right;i(e,n)<0?a=ib(n,r,a,i):A=ib(n,r,A,i),this._root=e1e(A,a,i)},t.prototype.split=function(e){return v8(e,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var e,n,r;return Kme(this,function(i){switch(i.label){case 0:e=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:e===null?[3,2]:(n.push(e),e=e.left,[3,5]);case 2:return n.length===0?[3,4]:(e=n.pop(),[4,e]);case 3:return i.sent(),e=e.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},t}();function CE(t,e,n,r){var i=r-n;if(i>0){var s=n+Math.floor(i/2),A=t[s],a=e[s],y=new ah(A,a);return y.left=CE(t,e,n,s),y.right=CE(t,e,s+1,r),y}return null}function t1e(t,e){for(var n=new ah(null,null),r=n,i=0;i<t.length;i++)r=r.next=new ah(t[i],e[i]);return r.next=null,n.next}function n1e(t){for(var e=t,n=[],r=!1,i=new ah(null,null),s=i;!r;)e?(n.push(e),e=e.left):n.length>0?(e=s=s.next=n.pop(),e=e.right):r=!0;return s.next=null,i.next}function PE(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),s=PE(t,e,i),A=t.head;return A.left=s,t.head=t.head.next,A.right=PE(t,i+1,n),A}return null}function r1e(t,e,n){for(var r=new ah(null,null),i=r,s=t,A=e;s!==null&&A!==null;)n(s.key,A.key)<0?(i.next=s,s=s.next):(i.next=A,A=A.next),i=i.next;return s!==null?i.next=s:A!==null&&(i.next=A),r.next}function IE(t,e,n,r,i){if(!(n>=r)){for(var s=t[n+r>>1],A=n-1,a=r+1;;){do A++;while(i(t[A],s)<0);do a--;while(i(t[a],s)>0);if(A>=a)break;var y=t[A];t[A]=t[a],t[a]=y,y=e[A],e[A]=e[a],e[a]=y}IE(t,e,n,a,i),IE(t,e,a+1,r,i)}}const Ip=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,kE=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x,i=t.ll.y<e.ll.y?e.ll.y:t.ll.y,s=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}};let Gc=Number.EPSILON;Gc===void 0&&(Gc=Math.pow(2,-52));const i1e=Gc*Gc,x8=(t,e)=>{if(-Gc<t&&t<Gc&&-Gc<e&&e<Gc)return 0;const n=t-e;return n*n<i1e*t*e?0:t<e?-1:1};class s1e{constructor(){this.reset()}reset(){this.xRounder=new w8,this.yRounder=new w8}round(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}class w8{constructor(){this.tree=new g4,this.round(0)}round(e){const n=this.tree.add(e),r=this.tree.prev(n);if(r!==null&&x8(n.key,r.key)===0)return this.tree.remove(e),r.key;const i=this.tree.next(n);return i!==null&&x8(n.key,i.key)===0?(this.tree.remove(e),i.key):e}}const Jg=new s1e,Vy=(t,e)=>t.x*e.y-t.y*e.x,I7=(t,e)=>t.x*e.x+t.y*e.y,b8=(t,e,n)=>{const r=mae(t.x,t.y,e.x,e.y,n.x,n.y);return r>0?-1:r<0?1:0},y2=t=>Math.sqrt(I7(t,t)),o1e=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Vy(i,r)/y2(i)/y2(r)},a1e=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return I7(i,r)/y2(i)/y2(r)},E8=(t,e,n)=>e.y===0?null:{x:t.x+e.x/e.y*(n-t.y),y:n},T8=(t,e,n)=>e.x===0?null:{x:n,y:t.y+e.y/e.x*(n-t.x)},l1e=(t,e,n,r)=>{if(e.x===0)return T8(n,r,t.x);if(r.x===0)return T8(t,e,n.x);if(e.y===0)return E8(n,r,t.y);if(r.y===0)return E8(t,e,n.y);const i=Vy(e,r);if(i==0)return null;const s={x:n.x-t.x,y:n.y-t.y},A=Vy(s,e)/i,a=Vy(s,r)/i,y=t.x+a*e.x,w=n.x+A*r.x,M=t.y+a*e.y,C=n.y+A*r.y,k=(y+w)/2,U=(M+C)/2;return{x:k,y:U}};class hl{static compare(e,n){const r=hl.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:th.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}constructor(e,n){e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:o1e(this.point,e.point,s.point),cosine:a1e(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:A,cosine:a}=n.get(i),{sine:y,cosine:w}=n.get(s);return A>=0&&y>=0?a<w?1:a>w?-1:0:A<0&&y<0?a<w?-1:a>w?1:0:y<A?-1:y>A?1:0}}}let A1e=0;class th{static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,A=n.rightSE.point.x;if(A<r)return 1;if(s<i)return-1;const a=e.leftSE.point.y,y=n.leftSE.point.y,w=e.rightSE.point.y,M=n.rightSE.point.y;if(r<i){if(y<a&&y<w)return 1;if(y>a&&y>w)return-1;const C=e.comparePoint(n.leftSE.point);if(C<0)return 1;if(C>0)return-1;const k=n.comparePoint(e.rightSE.point);return k!==0?k:-1}if(r>i){if(a<y&&a<M)return-1;if(a>y&&a>M)return 1;const C=n.comparePoint(e.leftSE.point);if(C!==0)return C;const k=e.comparePoint(n.rightSE.point);return k<0?1:k>0?-1:1}if(a<y)return-1;if(a>y)return 1;if(s<A){const C=n.comparePoint(e.rightSE.point);if(C!==0)return C}if(s>A){const C=e.comparePoint(n.rightSE.point);if(C<0)return 1;if(C>0)return-1}if(s!==A){const C=w-a,k=s-r,U=M-y,H=A-i;if(C>k&&U<H)return 1;if(C<k&&U>H)return-1}return s>A?1:s<A||w<M?-1:w>M?1:e.id<n.id?-1:e.id>n.id?1:0}constructor(e,n,r,i){this.id=++A1e,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static fromRing(e,n,r){let i,s,A;const a=hl.comparePoints(e,n);if(a<0)i=e,s=n,A=1;else if(a>0)i=n,s=e,A=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const y=new hl(i,!0),w=new hl(s,!1);return new th(y,w,[r],[A])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}comparePoint(e){if(this.isAnEndpoint(e))return 0;const n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return e.x===n.x?0:e.x<n.x?1:-1;const s=(e.y-n.y)/i.y,A=n.x+s*i.x;if(e.x===A)return 0;const a=(e.x-n.x)/i.x,y=n.y+a*i.y;return e.y===y?0:e.y<y?-1:1}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=kE(n,r);if(i===null)return null;const s=this.leftSE.point,A=this.rightSE.point,a=e.leftSE.point,y=e.rightSE.point,w=Ip(n,a)&&this.comparePoint(a)===0,M=Ip(r,s)&&e.comparePoint(s)===0,C=Ip(n,y)&&this.comparePoint(y)===0,k=Ip(r,A)&&e.comparePoint(A)===0;if(M&&w)return k&&!C?A:!k&&C?y:null;if(M)return C&&s.x===y.x&&s.y===y.y?null:s;if(w)return k&&A.x===a.x&&A.y===a.y?null:a;if(k&&C)return null;if(k)return A;if(C)return y;const U=l1e(s,this.vector(),a,e.vector());return U===null||!Ip(i,U)?null:Jg.round(U.x,U.y)}split(e){const n=[],r=e.events!==void 0,i=new hl(e,!0),s=new hl(e,!1),A=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new th(i,A,this.rings.slice(),this.windings.slice());return hl.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),hl.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=th.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,A=r.rings.length;s<A;s++){const a=r.rings[s],y=r.windings[s],w=n.rings.indexOf(a);w===-1?(n.rings.push(a),n.windings.push(y)):n.windings[w]+=y}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,y=this.rings.length;a<y;a++){const w=this.rings[a],M=this.windings[a],C=n.indexOf(w);C===-1?(n.push(w),r.push(M)):r[C]+=M}const s=[],A=[];for(let a=0,y=n.length;a<y;a++){if(r[a]===0)continue;const w=n[a],M=w.poly;if(A.indexOf(M)===-1)if(w.isExterior)s.push(M);else{A.indexOf(M)===-1&&A.push(M);const C=s.indexOf(w.poly);C!==-1&&s.splice(C,1)}}for(let a=0,y=s.length;a<y;a++){const w=s[a].multiPoly;i.indexOf(w)===-1&&i.push(w)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(nA.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===nA.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}default:throw new Error(`Unrecognized operation type found ${nA.type}`)}return this._isInResult}}class S8{constructor(e,n,r){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=Jg.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let s=i;for(let A=1,a=e.length;A<a;A++){if(typeof e[A][0]!="number"||typeof e[A][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let y=Jg.round(e[A][0],e[A][1]);y.x===s.x&&y.y===s.y||(this.segments.push(th.fromRing(s,y,this)),y.x<this.bbox.ll.x&&(this.bbox.ll.x=y.x),y.y<this.bbox.ll.y&&(this.bbox.ll.y=y.y),y.x>this.bbox.ur.x&&(this.bbox.ur.x=y.x),y.y>this.bbox.ur.y&&(this.bbox.ur.y=y.y),s=y)}(i.x!==s.x||i.y!==s.y)&&this.segments.push(th.fromRing(s,i,this))}getSweepEvents(){const e=[];for(let n=0,r=this.segments.length;n<r;n++){const i=this.segments[n];e.push(i.leftSE),e.push(i.rightSE)}return e}}class u1e{constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new S8(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let r=1,i=e.length;r<i;r++){const s=new S8(e[r],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getSweepEvents();for(let s=0,A=i.length;s<A;s++)e.push(i[s])}return e}}class M8{constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let r=0,i=e.length;r<i;r++){const s=new u1e(e[r],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,r=this.polys.length;n<r;n++){const i=this.polys[n].getSweepEvents();for(let s=0,A=i.length;s<A;s++)e.push(i[s])}return e}}class _2{static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let A=null,a=s.leftSE,y=s.rightSE;const w=[a],M=a.point,C=[];for(;A=a,a=y,w.push(a),a.point!==M;)for(;;){const k=a.getAvailableLinkedEvents();if(k.length===0){const q=w[0].point,se=w[w.length-1].point;throw new Error(`Unable to complete output ring starting at [${q.x}, ${q.y}]. Last matching segment found ends at [${se.x}, ${se.y}].`)}if(k.length===1){y=k[0].otherSE;break}let U=null;for(let q=0,se=C.length;q<se;q++)if(C[q].point===a.point){U=q;break}if(U!==null){const q=C.splice(U)[0],se=w.splice(q.index);se.unshift(se[0].otherSE),n.push(new _2(se.reverse()));continue}C.push({index:w.length,point:a.point});const H=a.getLeftmostComparator(A);y=k.sort(H)[0].otherSE;break}n.push(new _2(w))}return n}constructor(e){this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}getGeom(){let e=this.events[0].point;const n=[e];for(let w=1,M=this.events.length-1;w<M;w++){const C=this.events[w].point,k=this.events[w+1].point;b8(C,e,k)!==0&&(n.push(C),e=C)}if(n.length===1)return null;const r=n[0],i=n[1];b8(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,A=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,y=[];for(let w=A;w!=a;w+=s)y.push([n[w].x,n[w].y]);return y}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let e=this.events[0];for(let i=1,s=this.events.length;i<s;i++){const A=this.events[i];hl.compare(e,A)>0&&(e=A)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return r.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}}class C8{constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}}class c1e{constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,r=this.polys.length;n<r;n++){const i=this.polys[n].getGeom();i!==null&&e.push(i)}return e}_composePolys(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.poly)if(s.isExteriorRing())n.push(new C8(s));else{const A=s.enclosingRing();A.poly||n.push(new C8(A)),A.poly.addInterior(s)}}return n}}class h1e{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:th.compare;this.queue=e,this.tree=new g4(n),this.segments=[]}process(e){const n=e.segment,r=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),r;const i=e.isLeft?this.tree.add(n):this.tree.find(n);if(!i)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let s=i,A=i,a,y;for(;a===void 0;)s=this.tree.prev(s),s===null?a=null:s.key.consumedBy===void 0&&(a=s.key);for(;y===void 0;)A=this.tree.next(A),A===null?y=null:A.key.consumedBy===void 0&&(y=A.key);if(e.isLeft){let w=null;if(a){const C=a.getIntersection(n);if(C!==null&&(n.isAnEndpoint(C)||(w=C),!a.isAnEndpoint(C))){const k=this._splitSafely(a,C);for(let U=0,H=k.length;U<H;U++)r.push(k[U])}}let M=null;if(y){const C=y.getIntersection(n);if(C!==null&&(n.isAnEndpoint(C)||(M=C),!y.isAnEndpoint(C))){const k=this._splitSafely(y,C);for(let U=0,H=k.length;U<H;U++)r.push(k[U])}}if(w!==null||M!==null){let C=null;w===null?C=M:M===null?C=w:C=hl.comparePoints(w,M)<=0?w:M,this.queue.remove(n.rightSE),r.push(n.rightSE);const k=n.split(C);for(let U=0,H=k.length;U<H;U++)r.push(k[U])}r.length>0?(this.tree.remove(n),r.push(e)):(this.segments.push(n),n.prev=a)}else{if(a&&y){const w=a.getIntersection(y);if(w!==null){if(!a.isAnEndpoint(w)){const M=this._splitSafely(a,w);for(let C=0,k=M.length;C<k;C++)r.push(M[C])}if(!y.isAnEndpoint(w)){const M=this._splitSafely(y,w);for(let C=0,k=M.length;C<k;C++)r.push(M[C])}}}this.tree.remove(n)}return r}_splitSafely(e,n){this.tree.remove(e);const r=e.rightSE;this.queue.remove(r);const i=e.split(n);return i.push(r),e.consumedBy===void 0&&this.tree.add(e),i}}const P8=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,f1e=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class d1e{run(e,n,r){nA.type=e,Jg.reset();const i=[new M8(n,!0)];for(let C=0,k=r.length;C<k;C++)i.push(new M8(r[C],!1));if(nA.numMultiPolys=i.length,nA.type==="difference"){const C=i[0];let k=1;for(;k<i.length;)kE(i[k].bbox,C.bbox)!==null?k++:i.splice(k,1)}if(nA.type==="intersection")for(let C=0,k=i.length;C<k;C++){const U=i[C];for(let H=C+1,q=i.length;H<q;H++)if(kE(U.bbox,i[H].bbox)===null)return[]}const s=new g4(hl.compare);for(let C=0,k=i.length;C<k;C++){const U=i[C].getSweepEvents();for(let H=0,q=U.length;H<q;H++)if(s.insert(U[H]),s.size>P8)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const A=new h1e(s);let a=s.size,y=s.pop();for(;y;){const C=y.key;if(s.size===a){const U=C.segment;throw new Error(`Unable to pop() ${C.isLeft?"left":"right"} SweepEvent [${C.point.x}, ${C.point.y}] from segment #${U.id} [${U.leftSE.point.x}, ${U.leftSE.point.y}] -> [${U.rightSE.point.x}, ${U.rightSE.point.y}] from queue.`)}if(s.size>P8)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(A.segments.length>f1e)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const k=A.process(C);for(let U=0,H=k.length;U<H;U++){const q=k[U];q.consumedBy===void 0&&s.insert(q)}a=s.size,y=s.pop()}Jg.reset();const w=_2.factory(A.segments);return new c1e(w).getGeom()}}const nA=new d1e,p1e=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nA.run("union",t,n)},g1e=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nA.run("intersection",t,n)},m1e=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nA.run("xor",t,n)},y1e=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nA.run("difference",t,n)};var _1e={union:p1e,intersection:g1e,xor:m1e,difference:y1e};function k7(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function v1e(t,e,n){n===void 0&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var A=0;A<s[s.length-1].length;A++)if(s[s.length-1][A]!==s[0][A])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:t};return k7(a,e,n)}function x1e(t,e,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:t};return k7(r,e,n)}function I8(t){return t.type==="Feature"?t.geometry:t}function k8(t,e,n){n===void 0&&(n={});var r=I8(t),i=I8(e),s=_1e.intersection(r.coordinates,i.coordinates);return s.length===0?null:s.length===1?v1e(s[0],n.properties):x1e(s,n.properties)}var zt=function(t){t=t||{};var e=typeof t<"u"?t:{},n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);var i="";function s(K){return e.locateFile?e.locateFile(K,i):i+K}var A;document.currentScript&&(i=document.currentScript.src),i.indexOf("blob:")!==0?i=i.substr(0,i.lastIndexOf("/")+1):i="",A=function(W,ee,ce){var o=new XMLHttpRequest;o.open("GET",W,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status==200||o.status==0&&o.response){ee(o.response);return}var De=Ur(W);if(De){ee(De.buffer);return}ce()},o.onerror=ce,o.send(null)};var a=e.print||console.log.bind(console),y=e.printErr||console.warn.bind(console);for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);n=null,e.arguments&&e.arguments;var w=0,M=function(K){w=K},C=function(){return w},k=8;function U(K,W,ee,ce){switch(ee=ee||"i8",ee.charAt(ee.length-1)==="*"&&(ee="i32"),ee){case"i1":tt[K>>0]=W;break;case"i8":tt[K>>0]=W;break;case"i16":pt[K>>1]=W;break;case"i32":en[K>>2]=W;break;case"i64":Yr=[W>>>0,(Er=W,+sr(Er)>=1?Er>0?(gr(+lr(Er/4294967296),4294967295)|0)>>>0:~~+er((Er-+(~~Er>>>0))/4294967296)>>>0:0)],en[K>>2]=Yr[0],en[K+4>>2]=Yr[1];break;case"float":Mt[K>>2]=W;break;case"double":Qt[K>>3]=W;break;default:fn("invalid type for setValue: "+ee)}}function H(K,W,ee){switch(W=W||"i8",W.charAt(W.length-1)==="*"&&(W="i32"),W){case"i1":return tt[K>>0];case"i8":return tt[K>>0];case"i16":return pt[K>>1];case"i32":return en[K>>2];case"i64":return en[K>>2];case"float":return Mt[K>>2];case"double":return Qt[K>>3];default:fn("invalid type for getValue: "+W)}return null}var q=!1;function se(K,W){K||fn("Assertion failed: "+W)}function Z(K){var W=e["_"+K];return se(W,"Cannot call unknown function "+K+", make sure it is exported"),W}function J(K,W,ee,ce,o){var G={string:function(ft){var vt=0;if(ft!=null&&ft!==0){var wt=(ft.length<<2)+1;vt=gt(wt),We(ft,vt,wt)}return vt},array:function(ft){var vt=gt(ft.length);return qe(ft,vt),vt}};function De(ft){return W==="string"?fe(ft):W==="boolean"?!!ft:ft}var ke=Z(K),Pe=[],Le=0;if(ce)for(var Ze=0;Ze<ce.length;Ze++){var lt=G[ee[Ze]];lt?(Le===0&&(Le=qt()),Pe[Ze]=lt(ce[Ze])):Pe[Ze]=ce[Ze]}var Qe=ke.apply(null,Pe);return Qe=De(Qe),Le!==0&&Lt(Le),Qe}function re(K,W,ee,ce){ee=ee||[];var o=ee.every(function(De){return De==="number"}),G=W!=="string";return G&&o&&!ce?Z(K):function(){return J(K,W,ee,arguments)}}var de=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function _e(K,W,ee){for(var ce=W+ee,o=W;K[o]&&!(o>=ce);)++o;if(o-W>16&&K.subarray&&de)return de.decode(K.subarray(W,o));for(var G="";W<o;){var De=K[W++];if(!(De&128)){G+=String.fromCharCode(De);continue}var ke=K[W++]&63;if((De&224)==192){G+=String.fromCharCode((De&31)<<6|ke);continue}var Pe=K[W++]&63;if((De&240)==224?De=(De&15)<<12|ke<<6|Pe:De=(De&7)<<18|ke<<12|Pe<<6|K[W++]&63,De<65536)G+=String.fromCharCode(De);else{var Le=De-65536;G+=String.fromCharCode(55296|Le>>10,56320|Le&1023)}}return G}function fe(K,W){return K?_e(Ye,K,W):""}function Fe(K,W,ee,ce){if(!(ce>0))return 0;for(var o=ee,G=ee+ce-1,De=0;De<K.length;++De){var ke=K.charCodeAt(De);if(ke>=55296&&ke<=57343){var Pe=K.charCodeAt(++De);ke=65536+((ke&1023)<<10)|Pe&1023}if(ke<=127){if(ee>=G)break;W[ee++]=ke}else if(ke<=2047){if(ee+1>=G)break;W[ee++]=192|ke>>6,W[ee++]=128|ke&63}else if(ke<=65535){if(ee+2>=G)break;W[ee++]=224|ke>>12,W[ee++]=128|ke>>6&63,W[ee++]=128|ke&63}else{if(ee+3>=G)break;W[ee++]=240|ke>>18,W[ee++]=128|ke>>12&63,W[ee++]=128|ke>>6&63,W[ee++]=128|ke&63}}return W[ee]=0,ee-o}function We(K,W,ee){return Fe(K,Ye,W,ee)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function qe(K,W){tt.set(K,W)}function Ke(K,W){return K%W>0&&(K+=W-K%W),K}var Oe,tt,Ye,pt,en,Mt,Qt;function xt(K){Oe=K,e.HEAP8=tt=new Int8Array(K),e.HEAP16=pt=new Int16Array(K),e.HEAP32=en=new Int32Array(K),e.HEAPU8=Ye=new Uint8Array(K),e.HEAPU16=new Uint16Array(K),e.HEAPU32=new Uint32Array(K),e.HEAPF32=Mt=new Float32Array(K),e.HEAPF64=Qt=new Float64Array(K)}var Tt=5266928,Xt=24016,Mn=e.TOTAL_MEMORY||33554432;e.buffer?Oe=e.buffer:Oe=new ArrayBuffer(Mn),Mn=Oe.byteLength,xt(Oe),en[Xt>>2]=Tt;function Cn(K){for(;K.length>0;){var W=K.shift();if(typeof W=="function"){W();continue}var ee=W.func;typeof ee=="number"?W.arg===void 0?e.dynCall_v(ee):e.dynCall_vi(ee,W.arg):ee(W.arg===void 0?null:W.arg)}}var vr=[],Gn=[],Jn=[],ir=[];function jn(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)yn(e.preRun.shift());Cn(vr)}function Lr(){Cn(Gn)}function St(){Cn(Jn)}function ln(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)bt(e.postRun.shift());Cn(ir)}function yn(K){vr.unshift(K)}function bt(K){ir.unshift(K)}var sr=Math.abs,er=Math.ceil,lr=Math.floor,gr=Math.min,Ar=0,Zr=null;function Zn(K){Ar++,e.monitorRunDependencies&&e.monitorRunDependencies(Ar)}function Ei(K){if(Ar--,e.monitorRunDependencies&&e.monitorRunDependencies(Ar),Ar==0&&Zr){var W=Zr;Zr=null,W()}}e.preloadedImages={},e.preloadedAudios={};var $n=null,Ti="data:application/octet-stream;base64,";function rs(K){return String.prototype.startsWith?K.startsWith(Ti):K.indexOf(Ti)===0}var Er,Yr;$n="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var Ps=24032;function Si(K){return K}function ht(K){var W=/\b__Z[\w\d_]+/g;return K.replace(W,function(ee){var ce=ee;return ee===ce?ee:ce+" ["+ee+"]"})}function kt(){var K=new Error;if(!K.stack){try{throw new Error(0)}catch(W){K=W}if(!K.stack)return"(no stack trace available)"}return K.stack.toString()}function is(){var K=kt();return e.extraStackTrace&&(K+=`
`+e.extraStackTrace()),ht(K)}function Ai(K,W,ee,ce){fn("Assertion failed: "+fe(K)+", at: "+[W?fe(W):"unknown filename",ee,ce?fe(ce):"unknown function"])}function Vn(){return tt.length}function Bi(K,W,ee){Ye.set(Ye.subarray(W,W+ee),K)}function mi(K){return e.___errno_location&&(en[e.___errno_location()>>2]=K),K}function ti(K){fn("OOM")}function $i(K){try{var W=new ArrayBuffer(K);return W.byteLength!=K?void 0:(new Int8Array(W).set(tt),ot(W),xt(W),1)}catch{}}function Bt(K){var W=Vn(),ee=16777216,ce=2147483648-ee;if(K>ce)return!1;for(var o=16777216,G=Math.max(W,o);G<K;)G<=536870912?G=Ke(2*G,ee):G=Math.min(Ke((3*G+2147483648)/4,ee),ce);var De=$i(G);return!!De}var Rn=typeof atob=="function"?atob:function(K){var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ee="",ce,o,G,De,ke,Pe,Le,Ze=0;K=K.replace(/[^A-Za-z0-9\+\/\=]/g,"");do De=W.indexOf(K.charAt(Ze++)),ke=W.indexOf(K.charAt(Ze++)),Pe=W.indexOf(K.charAt(Ze++)),Le=W.indexOf(K.charAt(Ze++)),ce=De<<2|ke>>4,o=(ke&15)<<4|Pe>>2,G=(Pe&3)<<6|Le,ee=ee+String.fromCharCode(ce),Pe!==64&&(ee=ee+String.fromCharCode(o)),Le!==64&&(ee=ee+String.fromCharCode(G));while(Ze<K.length);return ee};function In(K){try{for(var W=Rn(K),ee=new Uint8Array(W.length),ce=0;ce<W.length;++ce)ee[ce]=W.charCodeAt(ce);return ee}catch{throw new Error("Converting base64 string to bytes failed.")}}function Ur(K){if(rs(K))return In(K.slice(Ti.length))}var Xi={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Pn={a:fn,b:M,c:C,d:Ai,e:mi,f:Vn,g:Bi,h:Bt,i:ti,j:Si,k:ht,l:$i,m:kt,n:is,o:Ps,p:Xt},ye=function(K,W,ee){"almost asm";var ce=new K.Int8Array(ee),o=new K.Int32Array(ee);new K.Uint8Array(ee),new K.Float32Array(ee);var G=new K.Float64Array(ee),De=W.p|0,ke=K.Math.floor,Pe=K.Math.abs,Le=K.Math.sqrt,Ze=K.Math.pow,lt=K.Math.cos,Qe=K.Math.sin,ft=K.Math.tan,vt=K.Math.acos,wt=K.Math.asin,Jt=K.Math.atan,Ut=K.Math.atan2,xn=K.Math.ceil,nn=K.Math.imul,pn=K.Math.min,Bn=K.Math.clz32,Vt=W.b,Ue=W.c,Dt=W.d,Ce=W.e,_n=W.f,yi=W.g,dr=W.h,ha=W.i,Re=24048;function ja(l){return ce=new Int8Array(l),o=new Int32Array(l),G=new Float64Array(l),ee=l,!0}function Ee(l){l=l|0;var h=0;return h=Re,Re=Re+l|0,Re=Re+15&-16,h|0}function jo(){return Re|0}function Is(l){l=l|0,Re=l}function $a(l,h){l=l|0,Re=l}function Ha(l){return l=l|0,(nn(l*3|0,l+1|0)|0)+1|0}function fa(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0;da(l,h,d,x,0)|0&&(S=(nn(d*3|0,d+1|0)|0)+1|0,L(x|0,0,S<<3|0)|0,b=as(S,4)|0,b&&(ui(l,h,d,x,b,S,0),wn(b)))}function wl(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0;if(da(l,h,d,x,b)|0){if(S=(nn(d*3|0,d+1|0)|0)+1|0,L(x|0,0,S<<3|0)|0,b|0){L(b|0,0,S<<2|0)|0,ui(l,h,d,x,b,S,0);return}b=as(S,4)|0,b&&(ui(l,h,d,x,b,S,0),wn(b))}}function da(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0;if(ue=Re,Re=Re+16|0,ne=ue,S=x,o[S>>2]=l,o[S+4>>2]=h,S=(b|0)!=0,S&&(o[b>>2]=0),$r(l,h)|0)return ne=1,Re=ue,ne|0;o[ne>>2]=0;e:do if((d|0)>=1)if(S)for($=0,X=1,oe=1,P=0,S=l;;){if(!(P|$)){if(S=me(S,h,4,ne)|0,h=Ue()|0,(S|0)==0&(h|0)==0){S=2;break e}if($r(S,h)|0){S=1;break e}}if(S=me(S,h,o[16+($<<2)>>2]|0,ne)|0,h=Ue()|0,(S|0)==0&(h|0)==0){S=2;break e}if(l=x+(oe<<3)|0,o[l>>2]=S,o[l+4>>2]=h,o[b+(oe<<2)>>2]=X,P=P+1|0,l=(P|0)==(X|0),B=$+1|0,V=(B|0)==6,$r(S,h)|0){S=1;break e}if(X=X+(V&l&1)|0,(X|0)>(d|0)){S=0;break}else $=l?V?0:B:$,oe=oe+1|0,P=l?0:P}else for($=0,X=1,oe=1,P=0,S=l;;){if(!(P|$)){if(S=me(S,h,4,ne)|0,h=Ue()|0,(S|0)==0&(h|0)==0){S=2;break e}if($r(S,h)|0){S=1;break e}}if(S=me(S,h,o[16+($<<2)>>2]|0,ne)|0,h=Ue()|0,(S|0)==0&(h|0)==0){S=2;break e}if(l=x+(oe<<3)|0,o[l>>2]=S,o[l+4>>2]=h,P=P+1|0,l=(P|0)==(X|0),B=$+1|0,V=(B|0)==6,$r(S,h)|0){S=1;break e}if(X=X+(V&l&1)|0,(X|0)>(d|0)){S=0;break}else $=l?V?0:B:$,oe=oe+1|0,P=l?0:P}else S=0;while(0);return ne=S,Re=ue,ne|0}function ui(l,h,d,x,b,S,P){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0,S=S|0,P=P|0;var B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0;if(oe=Re,Re=Re+16|0,X=oe,(l|0)==0&(h|0)==0){Re=oe;return}if(B=Xs(l|0,h|0,S|0,((S|0)<0)<<31>>31|0)|0,Ue()|0,V=x+(B<<3)|0,ne=V,ue=o[ne>>2]|0,ne=o[ne+4>>2]|0,$=(ue|0)==(l|0)&(ne|0)==(h|0),!((ue|0)==0&(ne|0)==0|$))do B=(B+1|0)%(S|0)|0,V=x+(B<<3)|0,ue=V,ne=o[ue>>2]|0,ue=o[ue+4>>2]|0,$=(ne|0)==(l|0)&(ue|0)==(h|0);while(!((ne|0)==0&(ue|0)==0|$));if(B=b+(B<<2)|0,$&&(o[B>>2]|0)<=(P|0)){Re=oe;return}if(ue=V,o[ue>>2]=l,o[ue+4>>2]=h,o[B>>2]=P,(P|0)>=(d|0)){Re=oe;return}ue=P+1|0,o[X>>2]=0,ne=me(l,h,2,X)|0,ui(ne,Ue()|0,d,x,b,S,ue),o[X>>2]=0,ne=me(l,h,3,X)|0,ui(ne,Ue()|0,d,x,b,S,ue),o[X>>2]=0,ne=me(l,h,1,X)|0,ui(ne,Ue()|0,d,x,b,S,ue),o[X>>2]=0,ne=me(l,h,5,X)|0,ui(ne,Ue()|0,d,x,b,S,ue),o[X>>2]=0,ne=me(l,h,4,X)|0,ui(ne,Ue()|0,d,x,b,S,ue),o[X>>2]=0,ne=me(l,h,6,X)|0,ui(ne,Ue()|0,d,x,b,S,ue),Re=oe}function me(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0;if((o[x>>2]|0)>0){b=0;do d=Ki(d)|0,b=b+1|0;while((b|0)<(o[x>>2]|0))}B=It(l|0,h|0,45)|0,Ue()|0,V=B&127,S=_i(l,h)|0,b=It(l|0,h|0,52)|0,Ue()|0,b=b&15;e:do if(!b)P=6;else for(;;){if(oe=(15-b|0)*3|0,ne=It(l|0,h|0,oe|0)|0,Ue()|0,ne=ne&7,ue=(Mi(b)|0)==0,b=b+-1|0,X=Rt(7,0,oe|0)|0,h=h&~(Ue()|0),oe=Rt(o[(ue?464:48)+(ne*28|0)+(d<<2)>>2]|0,0,oe|0)|0,$=Ue()|0,d=o[(ue?672:256)+(ne*28|0)+(d<<2)>>2]|0,l=oe|l&~X,h=$|h,!d){d=0;break e}if(!b){P=6;break}}while(0);(P|0)==6&&(ue=o[880+(V*28|0)+(d<<2)>>2]|0,ne=Rt(ue|0,0,45)|0,l=ne|l,h=Ue()|0|h&-1040385,d=o[4304+(V*28|0)+(d<<2)>>2]|0,(ue&127|0)==127&&(ue=Rt(o[880+(V*28|0)+20>>2]|0,0,45)|0,h=Ue()|0|h&-1040385,d=o[4304+(V*28|0)+20>>2]|0,l=gs(ue|l,h)|0,h=Ue()|0,o[x>>2]=(o[x>>2]|0)+1)),P=It(l|0,h|0,45)|0,Ue()|0,P=P&127;e:do if(An(P)|0){t:do if((_i(l,h)|0)==1){if((V|0)!=(P|0))if(YA(P,o[7728+(V*28|0)>>2]|0)|0){l=ss(l,h)|0,S=1,h=Ue()|0;break}else{l=gs(l,h)|0,S=1,h=Ue()|0;break}switch(S|0){case 5:{l=ss(l,h)|0,h=Ue()|0,o[x>>2]=(o[x>>2]|0)+5,S=0;break t}case 3:{l=gs(l,h)|0,h=Ue()|0,o[x>>2]=(o[x>>2]|0)+1,S=0;break t}default:return ne=0,ue=0,Vt(ne|0),ue|0}}else S=0;while(0);if((d|0)>0){b=0;do l=zi(l,h)|0,h=Ue()|0,b=b+1|0;while((b|0)!=(d|0))}if((V|0)!=(P|0)){if(!(jr(P)|0)){if((S|0)!=0|(_i(l,h)|0)!=5)break;o[x>>2]=(o[x>>2]|0)+1;break}switch(B&127){case 8:case 118:break e}(_i(l,h)|0)!=3&&(o[x>>2]=(o[x>>2]|0)+1)}}else if((d|0)>0){b=0;do l=gs(l,h)|0,h=Ue()|0,b=b+1|0;while((b|0)!=(d|0))}while(0);return o[x>>2]=((o[x>>2]|0)+d|0)%6|0,ne=h,ue=l,Vt(ne|0),ue|0}function Se(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0;if(oe=Re,Re=Re+16|0,X=oe,!d)return X=x,o[X>>2]=l,o[X+4>>2]=h,X=0,Re=oe,X|0;o[X>>2]=0;e:do if($r(l,h)|0)l=1;else{if(S=(d|0)>0,S){b=0,$=l;do{if($=me($,h,4,X)|0,h=Ue()|0,($|0)==0&(h|0)==0){l=2;break e}if(b=b+1|0,$r($,h)|0){l=1;break e}}while((b|0)<(d|0));if(V=x,o[V>>2]=$,o[V+4>>2]=h,V=d+-1|0,S){S=0,P=1,b=$,l=h;do{if(b=me(b,l,2,X)|0,l=Ue()|0,(b|0)==0&(l|0)==0){l=2;break e}if(B=x+(P<<3)|0,o[B>>2]=b,o[B+4>>2]=l,P=P+1|0,$r(b,l)|0){l=1;break e}S=S+1|0}while((S|0)<(d|0));B=0,S=P;do{if(b=me(b,l,3,X)|0,l=Ue()|0,(b|0)==0&(l|0)==0){l=2;break e}if(P=x+(S<<3)|0,o[P>>2]=b,o[P+4>>2]=l,S=S+1|0,$r(b,l)|0){l=1;break e}B=B+1|0}while((B|0)<(d|0));P=0;do{if(b=me(b,l,1,X)|0,l=Ue()|0,(b|0)==0&(l|0)==0){l=2;break e}if(B=x+(S<<3)|0,o[B>>2]=b,o[B+4>>2]=l,S=S+1|0,$r(b,l)|0){l=1;break e}P=P+1|0}while((P|0)<(d|0));P=0;do{if(b=me(b,l,5,X)|0,l=Ue()|0,(b|0)==0&(l|0)==0){l=2;break e}if(B=x+(S<<3)|0,o[B>>2]=b,o[B+4>>2]=l,S=S+1|0,$r(b,l)|0){l=1;break e}P=P+1|0}while((P|0)<(d|0));P=0;do{if(b=me(b,l,4,X)|0,l=Ue()|0,(b|0)==0&(l|0)==0){l=2;break e}if(B=x+(S<<3)|0,o[B>>2]=b,o[B+4>>2]=l,S=S+1|0,$r(b,l)|0){l=1;break e}P=P+1|0}while((P|0)<(d|0));for(P=0;;){if(b=me(b,l,6,X)|0,l=Ue()|0,(b|0)==0&(l|0)==0){l=2;break e}if((P|0)!=(V|0))if(B=x+(S<<3)|0,o[B>>2]=b,o[B+4>>2]=l,!($r(b,l)|0))S=S+1|0;else{l=1;break e}if(P=P+1|0,(P|0)>=(d|0)){P=$,S=h;break}}}else P=$,b=$,S=h,l=h}else P=x,o[P>>2]=l,o[P+4>>2]=h,P=l,b=l,S=h,l=h;l=((P|0)!=(b|0)|(S|0)!=(l|0))&1}while(0);return X=l,Re=oe,X|0}function Ve(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0;if(S=Re,Re=Re+48|0,b=S+8|0,x=S,B=l,P=o[B+4>>2]|0,d=x,o[d>>2]=o[B>>2],o[d+4>>2]=P,tl(x,b),b=ur(b,h)|0,h=o[x>>2]|0,x=o[l+8>>2]|0,(x|0)<=0)return B=h,P=(b|0)<(B|0),B=P?B:b,B=B+12|0,Re=S,B|0;d=o[l+12>>2]|0,l=0;do h=(o[d+(l<<3)>>2]|0)+h|0,l=l+1|0;while((l|0)<(x|0));return B=(b|0)<(h|0),B=B?h:b,B=B+12|0,Re=S,B|0}function At(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0;if(B=Re,Re=Re+48|0,x=B+8|0,b=B,!(Ct(l,h,d)|0)){Re=B;return}if(V=l,S=o[V+4>>2]|0,P=b,o[P>>2]=o[V>>2],o[P+4>>2]=S,tl(b,x),P=ur(x,h)|0,h=o[b>>2]|0,S=o[l+8>>2]|0,(S|0)>0){b=o[l+12>>2]|0,x=0;do h=(o[b+(x<<3)>>2]|0)+h|0,x=x+1|0;while((x|0)!=(S|0))}if(h=(P|0)<(h|0)?h:P,(h|0)<=-12){Re=B;return}V=h+11|0,L(d|0,0,(((V|0)>0?V:0)<<3)+8|0)|0,Re=B}function Ct(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0,v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0;if(pe=Re,Re=Re+112|0,N=pe+80|0,V=pe+72|0,Q=pe,te=pe+56|0,$=l+8|0,le=on((o[$>>2]<<5)+32|0)|0,le||Dt(22848,22448,800,22456),qs(l,le),S=l,x=o[S+4>>2]|0,B=V,o[B>>2]=o[S>>2],o[B+4>>2]=x,tl(V,N),B=ur(N,h)|0,x=o[V>>2]|0,S=o[$>>2]|0,(S|0)>0){P=o[l+12>>2]|0,b=0;do x=(o[P+(b<<3)>>2]|0)+x|0,b=b+1|0;while((b|0)!=(S|0))}if(B=(B|0)<(x|0)?x:B,O=B+12|0,b=as(O,8)|0,X=as(O,8)|0,o[N>>2]=0,I=l,R=o[I+4>>2]|0,x=V,o[x>>2]=o[I>>2],o[x+4>>2]=R,x=tn(V,O,h,N,b,X)|0,x|0)return wn(b),wn(X),wn(le),le=x,Re=pe,le|0;e:do if((o[$>>2]|0)>0){for(S=l+12|0,x=0;P=tn((o[S>>2]|0)+(x<<3)|0,O,h,N,b,X)|0,x=x+1|0,!(P|0);)if((x|0)>=(o[$>>2]|0))break e;return wn(b),wn(X),wn(le),le=P,Re=pe,le|0}while(0);(B|0)>-12&&L(X|0,0,((O|0)>1?O:1)<<3|0)|0;e:do if((o[N>>2]|0)>0){R=((O|0)<0)<<31>>31,be=b,m=X,g=b,v=b,E=X,I=b,x=b,we=b,$e=X,Me=X,je=X,b=X;t:for(;;){for(Ie=o[N>>2]|0,ue=0,Te=0,S=0;;){P=Q,B=P+56|0;do o[P>>2]=0,P=P+4|0;while((P|0)<(B|0));if(h=be+(ue<<3)|0,V=o[h>>2]|0,h=o[h+4>>2]|0,da(V,h,1,Q,0)|0){P=Q,B=P+56|0;do o[P>>2]=0,P=P+4|0;while((P|0)<(B|0));P=as(7,4)|0,P|0&&(ui(V,h,1,Q,P,7,0),wn(P))}ne=0;do{oe=Q+(ne<<3)|0,X=o[oe>>2]|0,oe=o[oe+4>>2]|0;n:do if(!((X|0)==0&(oe|0)==0)){if(V=Xs(X|0,oe|0,O|0,R|0)|0,Ue()|0,P=d+(V<<3)|0,B=P,h=o[B>>2]|0,B=o[B+4>>2]|0,!((h|0)==0&(B|0)==0))for($=0;;){if(($|0)>(O|0))break t;if((h|0)==(X|0)&(B|0)==(oe|0))break n;if(V=(V+1|0)%(O|0)|0,P=d+(V<<3)|0,B=P,h=o[B>>2]|0,B=o[B+4>>2]|0,(h|0)==0&(B|0)==0)break;$=$+1|0}(X|0)==0&(oe|0)==0||(Qs(X,oe,te),uu(l,le,te)|0&&($=P,o[$>>2]=X,o[$+4>>2]=oe,$=m+(S<<3)|0,o[$>>2]=X,o[$+4>>2]=oe,S=S+1|0))}while(0);ne=ne+1|0}while(ne>>>0<7);if(Te=Te+1|0,(Te|0)>=(Ie|0))break;ue=ue+1|0}if((Ie|0)>0&&L(g|0,0,Ie<<3|0)|0,o[N>>2]=S,(S|0)>0)X=b,oe=je,ne=I,ue=Me,Te=$e,Ie=m,b=we,je=x,Me=v,$e=g,we=X,x=oe,I=E,E=ne,v=ue,g=Te,m=be,be=Ie;else break e}return wn(v),wn(E),wn(le),le=-1,Re=pe,le|0}else x=X;while(0);return wn(le),wn(b),wn(x),le=0,Re=pe,le|0}function tn(l,h,d,x,b,S){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0,S=S|0;var P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0,v=0,E=0,I=0,R=0,O=0,N=0;if(R=Re,Re=Re+48|0,g=R+32|0,v=R+16|0,E=R,P=o[l>>2]|0,(P|0)<=0)return I=0,Re=R,I|0;$e=l+4|0,Me=g+8|0,je=v+8|0,be=E+8|0,m=((h|0)<0)<<31>>31,we=0;e:for(;;){B=o[$e>>2]|0,Te=B+(we<<4)|0,o[g>>2]=o[Te>>2],o[g+4>>2]=o[Te+4>>2],o[g+8>>2]=o[Te+8>>2],o[g+12>>2]=o[Te+12>>2],(we|0)==(P+-1|0)?(o[v>>2]=o[B>>2],o[v+4>>2]=o[B+4>>2],o[v+8>>2]=o[B+8>>2],o[v+12>>2]=o[B+12>>2]):(Te=B+(we+1<<4)|0,o[v>>2]=o[Te>>2],o[v+4>>2]=o[Te+4>>2],o[v+8>>2]=o[Te+8>>2],o[v+12>>2]=o[Te+12>>2]),Te=KA(g,v,d)|0;t:do if((Te|0)>0){Ie=+(Te|0),ue=0;n:for(;;){N=+(Te-ue|0),O=+(ue|0),G[E>>3]=+G[g>>3]*N/Ie+ +G[v>>3]*O/Ie,G[be>>3]=+G[Me>>3]*N/Ie+ +G[je>>3]*O/Ie,oe=Ya(E,d)|0,ne=Ue()|0,B=Xs(oe|0,ne|0,h|0,m|0)|0,Ue()|0,P=S+(B<<3)|0,V=P,$=o[V>>2]|0,V=o[V+4>>2]|0;r:do if(($|0)==0&(V|0)==0)I=14;else for(X=0;;){if((X|0)>(h|0)){P=1;break r}if(($|0)==(oe|0)&(V|0)==(ne|0)){P=7;break r}if(B=(B+1|0)%(h|0)|0,P=S+(B<<3)|0,V=P,$=o[V>>2]|0,V=o[V+4>>2]|0,($|0)==0&(V|0)==0){I=14;break}else X=X+1|0}while(0);switch((I|0)==14&&(I=0,(oe|0)==0&(ne|0)==0?P=7:(o[P>>2]=oe,o[P+4>>2]=ne,P=o[x>>2]|0,X=b+(P<<3)|0,o[X>>2]=oe,o[X+4>>2]=ne,o[x>>2]=P+1,P=0)),P&7){case 7:case 0:break;default:break n}if(ue=ue+1|0,(Te|0)<=(ue|0)){I=8;break t}}if(P|0){P=-1,I=20;break e}}else I=8;while(0);if((I|0)==8&&(I=0),we=we+1|0,P=o[l>>2]|0,(we|0)>=(P|0)){P=0,I=20;break}}return(I|0)==20?(Re=R,P|0):0}function Hn(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0;if($=Re,Re=Re+176|0,V=$,(h|0)<1){Fr(d,0,0),Re=$;return}P=l,P=It(o[P>>2]|0,o[P+4>>2]|0,52)|0,Ue()|0,Fr(d,(h|0)>6?h:6,P&15),P=0;do{if(x=l+(P<<3)|0,ms(o[x>>2]|0,o[x+4>>2]|0,V),x=o[V>>2]|0,(x|0)>0){B=0;do S=V+8+(B<<4)|0,B=B+1|0,x=V+8+(((B|0)%(x|0)|0)<<4)|0,b=gu(d,x,S)|0,b?pu(d,b)|0:pc(d,S,x)|0,x=o[V>>2]|0;while((B|0)<(x|0))}P=P+1|0}while((P|0)!=(h|0));Re=$}function Gr(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0;if(S=Re,Re=Re+32|0,x=S,b=S+16|0,Hn(l,h,b),o[d>>2]=0,o[d+4>>2]=0,o[d+8>>2]=0,l=Nl(b)|0,!l){xa(d)|0,nl(b),Re=S;return}do{h=hh(d)|0;do fh(h,l)|0,P=l+16|0,o[x>>2]=o[P>>2],o[x+4>>2]=o[P+4>>2],o[x+8>>2]=o[P+8>>2],o[x+12>>2]=o[P+12>>2],pu(b,l)|0,l=gc(b,x)|0;while(l|0);l=Nl(b)|0}while(l|0);xa(d)|0,nl(b),Re=S}function An(l){return l=l|0,o[7728+(l*28|0)+16>>2]|0}function jr(l){return l=l|0,(l|0)==4|(l|0)==117|0}function tr(l){return l=l|0,o[11152+((o[l>>2]|0)*216|0)+((o[l+4>>2]|0)*72|0)+((o[l+8>>2]|0)*24|0)+(o[l+12>>2]<<3)>>2]|0}function fA(l){return l=l|0,o[11152+((o[l>>2]|0)*216|0)+((o[l+4>>2]|0)*72|0)+((o[l+8>>2]|0)*24|0)+(o[l+12>>2]<<3)+4>>2]|0}function dA(l,h){l=l|0,h=h|0,l=7728+(l*28|0)|0,o[h>>2]=o[l>>2],o[h+4>>2]=o[l+4>>2],o[h+8>>2]=o[l+8>>2],o[h+12>>2]=o[l+12>>2]}function pA(l,h){l=l|0,h=h|0;var d=0,x=0;if(h>>>0>20)return h=-1,h|0;do if((o[11152+(h*216|0)>>2]|0)!=(l|0))if((o[11152+(h*216|0)+8>>2]|0)!=(l|0))if((o[11152+(h*216|0)+16>>2]|0)!=(l|0))if((o[11152+(h*216|0)+24>>2]|0)!=(l|0))if((o[11152+(h*216|0)+32>>2]|0)!=(l|0))if((o[11152+(h*216|0)+40>>2]|0)!=(l|0))if((o[11152+(h*216|0)+48>>2]|0)!=(l|0))if((o[11152+(h*216|0)+56>>2]|0)!=(l|0))if((o[11152+(h*216|0)+64>>2]|0)!=(l|0))if((o[11152+(h*216|0)+72>>2]|0)!=(l|0))if((o[11152+(h*216|0)+80>>2]|0)!=(l|0))if((o[11152+(h*216|0)+88>>2]|0)!=(l|0))if((o[11152+(h*216|0)+96>>2]|0)!=(l|0))if((o[11152+(h*216|0)+104>>2]|0)!=(l|0))if((o[11152+(h*216|0)+112>>2]|0)!=(l|0))if((o[11152+(h*216|0)+120>>2]|0)!=(l|0))if((o[11152+(h*216|0)+128>>2]|0)!=(l|0))if((o[11152+(h*216|0)+136>>2]|0)==(l|0))l=2,d=1,x=2;else{if((o[11152+(h*216|0)+144>>2]|0)==(l|0)){l=0,d=2,x=0;break}if((o[11152+(h*216|0)+152>>2]|0)==(l|0)){l=0,d=2,x=1;break}if((o[11152+(h*216|0)+160>>2]|0)==(l|0)){l=0,d=2,x=2;break}if((o[11152+(h*216|0)+168>>2]|0)==(l|0)){l=1,d=2,x=0;break}if((o[11152+(h*216|0)+176>>2]|0)==(l|0)){l=1,d=2,x=1;break}if((o[11152+(h*216|0)+184>>2]|0)==(l|0)){l=1,d=2,x=2;break}if((o[11152+(h*216|0)+192>>2]|0)==(l|0)){l=2,d=2,x=0;break}if((o[11152+(h*216|0)+200>>2]|0)==(l|0)){l=2,d=2,x=1;break}if((o[11152+(h*216|0)+208>>2]|0)==(l|0)){l=2,d=2,x=2;break}else l=-1;return l|0}else l=2,d=1,x=1;else l=2,d=1,x=0;else l=1,d=1,x=2;else l=1,d=1,x=1;else l=1,d=1,x=0;else l=0,d=1,x=2;else l=0,d=1,x=1;else l=0,d=1,x=0;else l=2,d=0,x=2;else l=2,d=0,x=1;else l=2,d=0,x=0;else l=1,d=0,x=2;else l=1,d=0,x=1;else l=1,d=0,x=0;else l=0,d=0,x=2;else l=0,d=0,x=1;else l=0,d=0,x=0;while(0);return h=o[11152+(h*216|0)+(d*72|0)+(l*24|0)+(x<<3)+4>>2]|0,h|0}function YA(l,h){return l=l|0,h=h|0,(o[7728+(l*28|0)+20>>2]|0)==(h|0)?(h=1,h|0):(h=(o[7728+(l*28|0)+24>>2]|0)==(h|0),h|0)}function XA(l,h){return l=l|0,h=h|0,o[880+(l*28|0)+(h<<2)>>2]|0}function gA(l,h){return l=l|0,h=h|0,(o[880+(l*28|0)>>2]|0)==(h|0)?(h=0,h|0):(o[880+(l*28|0)+4>>2]|0)==(h|0)?(h=1,h|0):(o[880+(l*28|0)+8>>2]|0)==(h|0)?(h=2,h|0):(o[880+(l*28|0)+12>>2]|0)==(h|0)?(h=3,h|0):(o[880+(l*28|0)+16>>2]|0)==(h|0)?(h=4,h|0):(o[880+(l*28|0)+20>>2]|0)==(h|0)?(h=5,h|0):((o[880+(l*28|0)+24>>2]|0)==(h|0)?6:7)|0}function bl(){return 122}function El(l){l=l|0;var h=0,d=0,x=0;h=0;do Rt(h|0,0,45)|0,x=Ue()|0|134225919,d=l+(h<<3)|0,o[d>>2]=-1,o[d+4>>2]=x,h=h+1|0;while((h|0)!=122)}function mA(l){return l=l|0,+G[l+16>>3]<+G[l+24>>3]|0}function yA(l,h){l=l|0,h=h|0;var d=0,x=0,b=0;return d=+G[h>>3],!(d>=+G[l+8>>3])||!(d<=+G[l>>3])?(h=0,h|0):(x=+G[l+16>>3],d=+G[l+24>>3],b=+G[h+8>>3],h=b>=d,l=b<=x&1,x<d?h&&(l=1):h||(l=0),h=(l|0)!=0,h|0)}function ur(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0;P=Re,Re=Re+288|0,d=P+264|0,x=P+96|0,b=P,S=b,B=S+96|0;do o[S>>2]=0,S=S+4|0;while((S|0)<(B|0));return fi(h,b),S=b,B=o[S>>2]|0,S=o[S+4>>2]|0,Qs(B,S,d),ms(B,S,x),V=+or(d,x+8|0),G[d>>3]=+G[l>>3],S=d+8|0,G[S>>3]=+G[l+16>>3],G[x>>3]=+G[l+8>>3],B=x+8|0,G[B>>3]=+G[l+24>>3],$=+or(d,x),B=~~+xn(+($*$/+Kr(+ +Pe(+((+G[S>>3]-+G[B>>3])/(+G[d>>3]-+G[x>>3]))),3)/(V*(V*2.59807621135)*.8))),Re=P,(B|0?B:1)|0}function KA(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0;B=Re,Re=Re+288|0,x=B+264|0,b=B+96|0,S=B,P=S,V=P+96|0;do o[P>>2]=0,P=P+4|0;while((P|0)<(V|0));return fi(d,S),V=S,P=o[V>>2]|0,V=o[V+4>>2]|0,Qs(P,V,x),ms(P,V,b),$=+or(x,b+8|0),V=~~+xn(+(+or(l,h)/($*2))),Re=B,(V|0?V:1)|0}function sc(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0,o[l>>2]=h,o[l+4>>2]=d,o[l+8>>2]=x}function Tl(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0;oe=h+8|0,o[oe>>2]=0,V=+G[l>>3],P=+Pe(+V),$=+G[l+8>>3],B=+Pe(+$)/.8660254037844386,P=P+B*.5,d=~~P,l=~~B,P=P-+(d|0),B=B-+(l|0);do if(P<.5)if(P<.3333333333333333)if(o[h>>2]=d,B<(P+1)*.5){o[h+4>>2]=l;break}else{l=l+1|0,o[h+4>>2]=l;break}else if(ne=1-P,l=(!(B<ne)&1)+l|0,o[h+4>>2]=l,ne<=B&B<P*2){d=d+1|0,o[h>>2]=d;break}else{o[h>>2]=d;break}else{if(!(P<.6666666666666666))if(d=d+1|0,o[h>>2]=d,B<P*.5){o[h+4>>2]=l;break}else{l=l+1|0,o[h+4>>2]=l;break}if(B<1-P){if(o[h+4>>2]=l,P*2+-1<B){o[h>>2]=d;break}}else l=l+1|0,o[h+4>>2]=l;d=d+1|0,o[h>>2]=d}while(0);do if(V<0)if(l&1){X=(l+1|0)/2|0,X=Xr(d|0,((d|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,d=~~(+(d|0)-((+(X>>>0)+4294967296*+(Ue()|0))*2+1)),o[h>>2]=d;break}else{X=(l|0)/2|0,X=Xr(d|0,((d|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,d=~~(+(d|0)-(+(X>>>0)+4294967296*+(Ue()|0))*2),o[h>>2]=d;break}while(0);X=h+4|0,$<0&&(d=d-((l<<1|1|0)/2|0)|0,o[h>>2]=d,l=0-l|0,o[X>>2]=l),x=l-d|0,(d|0)<0?(b=0-d|0,o[X>>2]=x,o[oe>>2]=b,o[h>>2]=0,l=x,d=0):b=0,(l|0)<0&&(d=d-l|0,o[h>>2]=d,b=b-l|0,o[oe>>2]=b,o[X>>2]=0,l=0),S=d-b|0,x=l-b|0,(b|0)<0&&(o[h>>2]=S,o[X>>2]=x,o[oe>>2]=0,l=x,d=S,b=0),x=(l|0)<(d|0)?l:d,x=(b|0)<(x|0)?b:x,!((x|0)<=0)&&(o[h>>2]=d-x,o[X>>2]=l-x,o[oe>>2]=b-x)}function ni(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0;h=o[l>>2]|0,P=l+4|0,d=o[P>>2]|0,(h|0)<0&&(d=d-h|0,o[P>>2]=d,S=l+8|0,o[S>>2]=(o[S>>2]|0)-h,o[l>>2]=0,h=0),(d|0)<0?(h=h-d|0,o[l>>2]=h,S=l+8|0,b=(o[S>>2]|0)-d|0,o[S>>2]=b,o[P>>2]=0,d=0):(b=l+8|0,S=b,b=o[b>>2]|0),(b|0)<0&&(h=h-b|0,o[l>>2]=h,d=d-b|0,o[P>>2]=d,o[S>>2]=0,b=0),x=(d|0)<(h|0)?d:h,x=(b|0)<(x|0)?b:x,!((x|0)<=0)&&(o[l>>2]=h-x,o[P>>2]=d-x,o[S>>2]=b-x)}function $o(l,h){l=l|0,h=h|0;var d=0,x=0;x=o[l+8>>2]|0,d=+((o[l+4>>2]|0)-x|0),G[h>>3]=+((o[l>>2]|0)-x|0)-d*.5,G[h+8>>3]=d*.8660254037844386}function qn(l,h,d){l=l|0,h=h|0,d=d|0,o[d>>2]=(o[h>>2]|0)+(o[l>>2]|0),o[d+4>>2]=(o[h+4>>2]|0)+(o[l+4>>2]|0),o[d+8>>2]=(o[h+8>>2]|0)+(o[l+8>>2]|0)}function ks(l,h,d){l=l|0,h=h|0,d=d|0,o[d>>2]=(o[l>>2]|0)-(o[h>>2]|0),o[d+4>>2]=(o[l+4>>2]|0)-(o[h+4>>2]|0),o[d+8>>2]=(o[l+8>>2]|0)-(o[h+8>>2]|0)}function ci(l,h){l=l|0,h=h|0;var d=0,x=0;d=nn(o[l>>2]|0,h)|0,o[l>>2]=d,d=l+4|0,x=nn(o[d>>2]|0,h)|0,o[d>>2]=x,l=l+8|0,h=nn(o[l>>2]|0,h)|0,o[l>>2]=h}function vo(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;P=o[l>>2]|0,B=(P|0)<0,x=(o[l+4>>2]|0)-(B?P:0)|0,S=(x|0)<0,b=(S?0-x|0:0)+((o[l+8>>2]|0)-(B?P:0))|0,d=(b|0)<0,l=d?0:b,h=(S?0:x)-(d?b:0)|0,b=(B?0:P)-(S?x:0)-(d?b:0)|0,d=(h|0)<(b|0)?h:b,d=(l|0)<(d|0)?l:d,x=(d|0)>0,l=l-(x?d:0)|0,h=h-(x?d:0)|0;e:do switch(b-(x?d:0)|0){case 0:switch(h|0){case 0:return B=l|0?(l|0)==1?1:7:0,B|0;case 1:return B=l|0?(l|0)==1?3:7:2,B|0;default:break e}case 1:switch(h|0){case 0:return B=l|0?(l|0)==1?5:7:4,B|0;case 1:{if(!l)l=6;else break e;return l|0}default:break e}}while(0);return B=7,B|0}function Sl(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;P=l+8|0,d=o[P>>2]|0,h=(o[l>>2]|0)-d|0,B=l+4|0,d=(o[B>>2]|0)-d|0,x=sn(+((h*3|0)-d|0)/7)|0,o[l>>2]=x,h=sn(+((d<<1)+h|0)/7)|0,o[B>>2]=h,o[P>>2]=0,d=h-x|0,(x|0)<0?(S=0-x|0,o[B>>2]=d,o[P>>2]=S,o[l>>2]=0,h=d,x=0,d=S):d=0,(h|0)<0&&(x=x-h|0,o[l>>2]=x,d=d-h|0,o[P>>2]=d,o[B>>2]=0,h=0),S=x-d|0,b=h-d|0,(d|0)<0?(o[l>>2]=S,o[B>>2]=b,o[P>>2]=0,h=b,b=S,d=0):b=x,x=(h|0)<(b|0)?h:b,x=(d|0)<(x|0)?d:x,!((x|0)<=0)&&(o[l>>2]=b-x,o[B>>2]=h-x,o[P>>2]=d-x)}function Ho(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;P=l+8|0,d=o[P>>2]|0,h=(o[l>>2]|0)-d|0,B=l+4|0,d=(o[B>>2]|0)-d|0,x=sn(+((h<<1)+d|0)/7)|0,o[l>>2]=x,h=sn(+((d*3|0)-h|0)/7)|0,o[B>>2]=h,o[P>>2]=0,d=h-x|0,(x|0)<0?(S=0-x|0,o[B>>2]=d,o[P>>2]=S,o[l>>2]=0,h=d,x=0,d=S):d=0,(h|0)<0&&(x=x-h|0,o[l>>2]=x,d=d-h|0,o[P>>2]=d,o[B>>2]=0,h=0),S=x-d|0,b=h-d|0,(d|0)<0?(o[l>>2]=S,o[B>>2]=b,o[P>>2]=0,h=b,b=S,d=0):b=x,x=(h|0)<(b|0)?h:b,x=(d|0)<(x|0)?d:x,!((x|0)<=0)&&(o[l>>2]=b-x,o[B>>2]=h-x,o[P>>2]=d-x)}function pa(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;h=o[l>>2]|0,P=l+4|0,d=o[P>>2]|0,B=l+8|0,x=o[B>>2]|0,b=d+(h*3|0)|0,o[l>>2]=b,d=x+(d*3|0)|0,o[P>>2]=d,h=(x*3|0)+h|0,o[B>>2]=h,x=d-b|0,(b|0)<0?(h=h-b|0,o[P>>2]=x,o[B>>2]=h,o[l>>2]=0,d=x,x=0):x=b,(d|0)<0&&(x=x-d|0,o[l>>2]=x,h=h-d|0,o[B>>2]=h,o[P>>2]=0,d=0),S=x-h|0,b=d-h|0,(h|0)<0?(o[l>>2]=S,o[P>>2]=b,o[B>>2]=0,x=S,h=0):b=d,d=(b|0)<(x|0)?b:x,d=(h|0)<(d|0)?h:d,!((d|0)<=0)&&(o[l>>2]=x-d,o[P>>2]=b-d,o[B>>2]=h-d)}function xo(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;b=o[l>>2]|0,P=l+4|0,h=o[P>>2]|0,B=l+8|0,d=o[B>>2]|0,x=(h*3|0)+b|0,b=d+(b*3|0)|0,o[l>>2]=b,o[P>>2]=x,h=(d*3|0)+h|0,o[B>>2]=h,d=x-b|0,(b|0)<0?(h=h-b|0,o[P>>2]=d,o[B>>2]=h,o[l>>2]=0,b=0):d=x,(d|0)<0&&(b=b-d|0,o[l>>2]=b,h=h-d|0,o[B>>2]=h,o[P>>2]=0,d=0),S=b-h|0,x=d-h|0,(h|0)<0?(o[l>>2]=S,o[P>>2]=x,o[B>>2]=0,b=S,h=0):x=d,d=(x|0)<(b|0)?x:b,d=(h|0)<(d|0)?h:d,!((d|0)<=0)&&(o[l>>2]=b-d,o[P>>2]=x-d,o[B>>2]=h-d)}function _A(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0;(h+-1|0)>>>0>=6||(b=(o[15472+(h*12|0)>>2]|0)+(o[l>>2]|0)|0,o[l>>2]=b,B=l+4|0,x=(o[15472+(h*12|0)+4>>2]|0)+(o[B>>2]|0)|0,o[B>>2]=x,P=l+8|0,h=(o[15472+(h*12|0)+8>>2]|0)+(o[P>>2]|0)|0,o[P>>2]=h,d=x-b|0,(b|0)<0?(h=h-b|0,o[B>>2]=d,o[P>>2]=h,o[l>>2]=0,x=0):(d=x,x=b),(d|0)<0&&(x=x-d|0,o[l>>2]=x,h=h-d|0,o[P>>2]=h,o[B>>2]=0,d=0),S=x-h|0,b=d-h|0,(h|0)<0?(o[l>>2]=S,o[B>>2]=b,o[P>>2]=0,x=S,h=0):b=d,d=(b|0)<(x|0)?b:x,d=(h|0)<(d|0)?h:d,!((d|0)<=0)&&(o[l>>2]=x-d,o[B>>2]=b-d,o[P>>2]=h-d))}function Wa(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;b=o[l>>2]|0,P=l+4|0,h=o[P>>2]|0,B=l+8|0,d=o[B>>2]|0,x=h+b|0,b=d+b|0,o[l>>2]=b,o[P>>2]=x,h=d+h|0,o[B>>2]=h,d=x-b|0,(b|0)<0?(h=h-b|0,o[P>>2]=d,o[B>>2]=h,o[l>>2]=0,x=0):(d=x,x=b),(d|0)<0&&(x=x-d|0,o[l>>2]=x,h=h-d|0,o[B>>2]=h,o[P>>2]=0,d=0),S=x-h|0,b=d-h|0,(h|0)<0?(o[l>>2]=S,o[P>>2]=b,o[B>>2]=0,x=S,h=0):b=d,d=(b|0)<(x|0)?b:x,d=(h|0)<(d|0)?h:d,!((d|0)<=0)&&(o[l>>2]=x-d,o[P>>2]=b-d,o[B>>2]=h-d)}function Wo(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;h=o[l>>2]|0,P=l+4|0,x=o[P>>2]|0,B=l+8|0,d=o[B>>2]|0,b=x+h|0,o[l>>2]=b,x=d+x|0,o[P>>2]=x,h=d+h|0,o[B>>2]=h,d=x-b|0,(b|0)<0?(h=h-b|0,o[P>>2]=d,o[B>>2]=h,o[l>>2]=0,x=0):(d=x,x=b),(d|0)<0&&(x=x-d|0,o[l>>2]=x,h=h-d|0,o[B>>2]=h,o[P>>2]=0,d=0),S=x-h|0,b=d-h|0,(h|0)<0?(o[l>>2]=S,o[P>>2]=b,o[B>>2]=0,x=S,h=0):b=d,d=(b|0)<(x|0)?b:x,d=(h|0)<(d|0)?h:d,!((d|0)<=0)&&(o[l>>2]=x-d,o[P>>2]=b-d,o[B>>2]=h-d)}function Ki(l){switch(l=l|0,l|0){case 1:{l=5;break}case 5:{l=4;break}case 4:{l=6;break}case 6:{l=2;break}case 2:{l=3;break}case 3:{l=1;break}}return l|0}function Ji(l){switch(l=l|0,l|0){case 1:{l=3;break}case 3:{l=2;break}case 2:{l=6;break}case 6:{l=4;break}case 4:{l=5;break}case 5:{l=1;break}}return l|0}function JA(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;h=o[l>>2]|0,P=l+4|0,d=o[P>>2]|0,B=l+8|0,x=o[B>>2]|0,b=d+(h<<1)|0,o[l>>2]=b,d=x+(d<<1)|0,o[P>>2]=d,h=(x<<1)+h|0,o[B>>2]=h,x=d-b|0,(b|0)<0?(h=h-b|0,o[P>>2]=x,o[B>>2]=h,o[l>>2]=0,d=x,x=0):x=b,(d|0)<0&&(x=x-d|0,o[l>>2]=x,h=h-d|0,o[B>>2]=h,o[P>>2]=0,d=0),S=x-h|0,b=d-h|0,(h|0)<0?(o[l>>2]=S,o[P>>2]=b,o[B>>2]=0,x=S,h=0):b=d,d=(b|0)<(x|0)?b:x,d=(h|0)<(d|0)?h:d,!((d|0)<=0)&&(o[l>>2]=x-d,o[P>>2]=b-d,o[B>>2]=h-d)}function Ml(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;b=o[l>>2]|0,P=l+4|0,h=o[P>>2]|0,B=l+8|0,d=o[B>>2]|0,x=(h<<1)+b|0,b=d+(b<<1)|0,o[l>>2]=b,o[P>>2]=x,h=(d<<1)+h|0,o[B>>2]=h,d=x-b|0,(b|0)<0?(h=h-b|0,o[P>>2]=d,o[B>>2]=h,o[l>>2]=0,b=0):d=x,(d|0)<0&&(b=b-d|0,o[l>>2]=b,h=h-d|0,o[B>>2]=h,o[P>>2]=0,d=0),S=b-h|0,x=d-h|0,(h|0)<0?(o[l>>2]=S,o[P>>2]=x,o[B>>2]=0,b=S,h=0):x=d,d=(x|0)<(b|0)?x:b,d=(h|0)<(d|0)?h:d,!((d|0)<=0)&&(o[l>>2]=b-d,o[P>>2]=x-d,o[B>>2]=h-d)}function wo(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0;return P=(o[l>>2]|0)-(o[h>>2]|0)|0,B=(P|0)<0,x=(o[l+4>>2]|0)-(o[h+4>>2]|0)-(B?P:0)|0,S=(x|0)<0,b=(B?0-P|0:0)+(o[l+8>>2]|0)-(o[h+8>>2]|0)+(S?0-x|0:0)|0,l=(b|0)<0,h=l?0:b,d=(S?0:x)-(l?b:0)|0,b=(B?0:P)-(S?x:0)-(l?b:0)|0,l=(d|0)<(b|0)?d:b,l=(h|0)<(l|0)?h:l,x=(l|0)>0,h=h-(x?l:0)|0,d=d-(x?l:0)|0,l=b-(x?l:0)|0,l=(l|0)>-1?l:0-l|0,d=(d|0)>-1?d:0-d|0,h=(h|0)>-1?h:0-h|0,h=(d|0)>(h|0)?d:h,((l|0)>(h|0)?l:h)|0}function Qo(l,h){l=l|0,h=h|0;var d=0;d=o[l+8>>2]|0,o[h>>2]=(o[l>>2]|0)-d,o[h+4>>2]=(o[l+4>>2]|0)-d}function oc(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0;x=o[l>>2]|0,o[h>>2]=x,l=o[l+4>>2]|0,P=h+4|0,o[P>>2]=l,B=h+8|0,o[B>>2]=0,d=l-x|0,(x|0)<0?(l=0-x|0,o[P>>2]=d,o[B>>2]=l,o[h>>2]=0,x=0):(d=l,l=0),(d|0)<0&&(x=x-d|0,o[h>>2]=x,l=l-d|0,o[B>>2]=l,o[P>>2]=0,d=0),S=x-l|0,b=d-l|0,(l|0)<0?(o[h>>2]=S,o[P>>2]=b,o[B>>2]=0,d=b,b=S,l=0):b=x,x=(d|0)<(b|0)?d:b,x=(l|0)<(x|0)?l:x,!((x|0)<=0)&&(o[h>>2]=b-x,o[P>>2]=d-x,o[B>>2]=l-x)}function eu(l){l=l|0;var h=0,d=0,x=0,b=0;h=l+8|0,b=o[h>>2]|0,d=b-(o[l>>2]|0)|0,o[l>>2]=d,x=l+4|0,l=(o[x>>2]|0)-b|0,o[x>>2]=l,o[h>>2]=0-(l+d)}function Cl(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;d=o[l>>2]|0,h=0-d|0,o[l>>2]=h,P=l+8|0,o[P>>2]=0,B=l+4|0,x=o[B>>2]|0,b=x+d|0,(d|0)>0?(o[B>>2]=b,o[P>>2]=d,o[l>>2]=0,h=0,x=b):d=0,(x|0)<0?(S=h-x|0,o[l>>2]=S,d=d-x|0,o[P>>2]=d,o[B>>2]=0,b=S-d|0,h=0-d|0,(d|0)<0?(o[l>>2]=b,o[B>>2]=h,o[P>>2]=0,x=h,d=0):(x=0,b=S)):b=h,h=(x|0)<(b|0)?x:b,h=(d|0)<(h|0)?d:h,!((h|0)<=0)&&(o[l>>2]=b-h,o[B>>2]=x-h,o[P>>2]=d-h)}function vA(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;x=Re,Re=Re+16|0,b=x,tu(l,h,d,b),Tl(b,d+4|0),Re=x}function tu(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0;if(V=Re,Re=Re+32|0,S=V,Fl(l,S),o[d>>2]=0,b=+Wr(15888,S),P=+Wr(15912,S),P<b&&(o[d>>2]=1,b=P),P=+Wr(15936,S),P<b&&(o[d>>2]=2,b=P),P=+Wr(15960,S),P<b&&(o[d>>2]=3,b=P),P=+Wr(15984,S),P<b&&(o[d>>2]=4,b=P),P=+Wr(16008,S),P<b&&(o[d>>2]=5,b=P),P=+Wr(16032,S),P<b&&(o[d>>2]=6,b=P),P=+Wr(16056,S),P<b&&(o[d>>2]=7,b=P),P=+Wr(16080,S),P<b&&(o[d>>2]=8,b=P),P=+Wr(16104,S),P<b&&(o[d>>2]=9,b=P),P=+Wr(16128,S),P<b&&(o[d>>2]=10,b=P),P=+Wr(16152,S),P<b&&(o[d>>2]=11,b=P),P=+Wr(16176,S),P<b&&(o[d>>2]=12,b=P),P=+Wr(16200,S),P<b&&(o[d>>2]=13,b=P),P=+Wr(16224,S),P<b&&(o[d>>2]=14,b=P),P=+Wr(16248,S),P<b&&(o[d>>2]=15,b=P),P=+Wr(16272,S),P<b&&(o[d>>2]=16,b=P),P=+Wr(16296,S),P<b&&(o[d>>2]=17,b=P),P=+Wr(16320,S),P<b&&(o[d>>2]=18,b=P),P=+Wr(16344,S),P<b&&(o[d>>2]=19,b=P),P=+vt(+(1-b*.5)),P<1e-16){o[x>>2]=0,o[x+4>>2]=0,o[x+8>>2]=0,o[x+12>>2]=0,Re=V;return}if(d=o[d>>2]|0,b=+G[16368+(d*24|0)>>3],b=+Tr(b-+Tr(+Mr(15568+(d<<4)|0,l))),Mi(h)|0?B=+Tr(b+-.3334731722518321):B=b,b=+ft(+P)/.381966011250105,(h|0)>0){S=0;do b=b*2.6457513110645907,S=S+1|0;while((S|0)!=(h|0))}P=+lt(+B)*b,G[x>>3]=P,B=+Qe(+B)*b,G[x+8>>3]=B,Re=V}function qo(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0;if(S=+So(l),S<1e-16){h=15568+(h<<4)|0,o[b>>2]=o[h>>2],o[b+4>>2]=o[h+4>>2],o[b+8>>2]=o[h+8>>2],o[b+12>>2]=o[h+12>>2];return}if(P=+Ut(+ +G[l+8>>3],+ +G[l>>3]),(d|0)>0){l=0;do S=S/2.6457513110645907,l=l+1|0;while((l|0)!=(d|0))}x?(S=S/3,d=(Mi(d)|0)==0,S=+Jt(+((d?S:S/2.6457513110645907)*.381966011250105))):(S=+Jt(+(S*.381966011250105)),Mi(d)|0&&(P=+Tr(P+.3334731722518321))),Pl(15568+(h<<4)|0,+Tr(+G[16368+(h*24|0)>>3]-P),S,b)}function Qa(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;x=Re,Re=Re+16|0,b=x,$o(l+4|0,b),qo(b,o[l>>2]|0,h,0,d),Re=x}function nu(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0,v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0;if(te=Re,Re=Re+272|0,S=te+256|0,Me=te+240|0,O=te,N=te+224|0,Q=te+208|0,je=te+176|0,be=te+160|0,m=te+192|0,g=te+144|0,v=te+128|0,E=te+112|0,I=te+96|0,R=te+80|0,o[S>>2]=h,o[Me>>2]=o[l>>2],o[Me+4>>2]=o[l+4>>2],o[Me+8>>2]=o[l+8>>2],o[Me+12>>2]=o[l+12>>2],ru(Me,S,O),o[b>>2]=0,Me=x+d+((x|0)==5&1)|0,(Me|0)<=(d|0)){Re=te;return}V=o[S>>2]|0,$=N+4|0,X=je+4|0,oe=d+5|0,ne=16848+(V<<2)|0,ue=16928+(V<<2)|0,Te=v+8|0,Ie=E+8|0,we=I+8|0,$e=Q+4|0,B=d;e:for(;;){P=O+(((B|0)%5|0)<<4)|0,o[Q>>2]=o[P>>2],o[Q+4>>2]=o[P+4>>2],o[Q+8>>2]=o[P+8>>2],o[Q+12>>2]=o[P+12>>2];do;while((bo(Q,V,0,1)|0)==2);if((B|0)>(d|0)&(Mi(h)|0)!=0){if(o[je>>2]=o[Q>>2],o[je+4>>2]=o[Q+4>>2],o[je+8>>2]=o[Q+8>>2],o[je+12>>2]=o[Q+12>>2],$o($,be),x=o[je>>2]|0,S=o[17008+(x*80|0)+(o[N>>2]<<2)>>2]|0,o[je>>2]=o[18608+(x*80|0)+(S*20|0)>>2],P=o[18608+(x*80|0)+(S*20|0)+16>>2]|0,(P|0)>0){l=0;do Wa(X),l=l+1|0;while((l|0)<(P|0))}switch(P=18608+(x*80|0)+(S*20|0)+4|0,o[m>>2]=o[P>>2],o[m+4>>2]=o[P+4>>2],o[m+8>>2]=o[P+8>>2],ci(m,(o[ne>>2]|0)*3|0),qn(X,m,X),ni(X),$o(X,g),le=+(o[ue>>2]|0),G[v>>3]=le*3,G[Te>>3]=0,pe=le*-1.5,G[E>>3]=pe,G[Ie>>3]=le*2.598076211353316,G[I>>3]=pe,G[we>>3]=le*-2.598076211353316,o[17008+((o[je>>2]|0)*80|0)+(o[Q>>2]<<2)>>2]|0){case 1:{l=E,x=v;break}case 3:{l=I,x=E;break}case 2:{l=v,x=I;break}default:{l=12;break e}}du(be,g,x,l,R),qo(R,o[je>>2]|0,V,1,b+8+(o[b>>2]<<4)|0),o[b>>2]=(o[b>>2]|0)+1}if((B|0)<(oe|0)&&($o($e,je),qo(je,o[Q>>2]|0,V,1,b+8+(o[b>>2]<<4)|0),o[b>>2]=(o[b>>2]|0)+1),o[N>>2]=o[Q>>2],o[N+4>>2]=o[Q+4>>2],o[N+8>>2]=o[Q+8>>2],o[N+12>>2]=o[Q+12>>2],B=B+1|0,(B|0)>=(Me|0)){l=3;break}}if((l|0)==3){Re=te;return}else(l|0)==12&&Dt(22474,22521,581,22531)}function ru(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0;V=Re,Re=Re+128|0,x=V+64|0,b=V,S=x,P=20208,B=S+60|0;do o[S>>2]=o[P>>2],S=S+4|0,P=P+4|0;while((S|0)<(B|0));S=b,P=20272,B=S+60|0;do o[S>>2]=o[P>>2],S=S+4|0,P=P+4|0;while((S|0)<(B|0));B=(Mi(o[h>>2]|0)|0)==0,x=B?x:b,b=l+4|0,JA(b),Ml(b),Mi(o[h>>2]|0)|0&&(xo(b),o[h>>2]=(o[h>>2]|0)+1),o[d>>2]=o[l>>2],h=d+4|0,qn(b,x,h),ni(h),o[d+16>>2]=o[l>>2],h=d+20|0,qn(b,x+12|0,h),ni(h),o[d+32>>2]=o[l>>2],h=d+36|0,qn(b,x+24|0,h),ni(h),o[d+48>>2]=o[l>>2],h=d+52|0,qn(b,x+36|0,h),ni(h),o[d+64>>2]=o[l>>2],d=d+68|0,qn(b,x+48|0,d),ni(d),Re=V}function bo(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0;if(Te=Re,Re=Re+32|0,ne=Te+12|0,B=Te,ue=l+4|0,oe=o[16928+(h<<2)>>2]|0,X=(x|0)!=0,oe=X?oe*3|0:oe,b=o[ue>>2]|0,$=l+8|0,P=o[$>>2]|0,X){if(S=l+12|0,x=o[S>>2]|0,b=P+b+x|0,(b|0)==(oe|0))return ue=1,Re=Te,ue|0;V=S}else V=l+12|0,x=o[V>>2]|0,b=P+b+x|0;if((b|0)<=(oe|0))return ue=0,Re=Te,ue|0;do if((x|0)>0){if(x=o[l>>2]|0,(P|0)>0){S=18608+(x*80|0)+60|0,x=l;break}x=18608+(x*80|0)+40|0,d?(sc(ne,oe,0,0),ks(ue,ne,B),Wo(B),qn(B,ne,ue),S=x,x=l):(S=x,x=l)}else S=18608+((o[l>>2]|0)*80|0)+20|0,x=l;while(0);if(o[x>>2]=o[S>>2],b=S+16|0,(o[b>>2]|0)>0){x=0;do Wa(ue),x=x+1|0;while((x|0)<(o[b>>2]|0))}return l=S+4|0,o[ne>>2]=o[l>>2],o[ne+4>>2]=o[l+4>>2],o[ne+8>>2]=o[l+8>>2],h=o[16848+(h<<2)>>2]|0,ci(ne,X?h*3|0:h),qn(ue,ne,ue),ni(ue),X?x=((o[$>>2]|0)+(o[ue>>2]|0)+(o[V>>2]|0)|0)==(oe|0)?1:2:x=2,ue=x,Re=Te,ue|0}function ga(l,h){l=l|0,h=h|0;var d=0;do d=bo(l,h,0,1)|0;while((d|0)==2);return d|0}function iu(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0,v=0,E=0,I=0,R=0,O=0;if(I=Re,Re=Re+240|0,S=I+224|0,m=I+208|0,g=I,v=I+192|0,E=I+176|0,we=I+160|0,$e=I+144|0,Me=I+128|0,je=I+112|0,be=I+96|0,o[S>>2]=h,o[m>>2]=o[l>>2],o[m+4>>2]=o[l+4>>2],o[m+8>>2]=o[l+8>>2],o[m+12>>2]=o[l+12>>2],ma(m,S,g),o[b>>2]=0,Ie=x+d+((x|0)==6&1)|0,(Ie|0)<=(d|0)){Re=I;return}V=o[S>>2]|0,$=d+6|0,X=16928+(V<<2)|0,oe=$e+8|0,ne=Me+8|0,ue=je+8|0,Te=v+4|0,P=0,B=d,x=-1;e:for(;;){if(S=(B|0)%6|0,l=g+(S<<4)|0,o[v>>2]=o[l>>2],o[v+4>>2]=o[l+4>>2],o[v+8>>2]=o[l+8>>2],o[v+12>>2]=o[l+12>>2],l=P,P=bo(v,V,0,1)|0,(B|0)>(d|0)&(Mi(h)|0)!=0&&(l|0)!=1&&(o[v>>2]|0)!=(x|0)){switch($o(g+(((S+5|0)%6|0)<<4)+4|0,E),$o(g+(S<<4)+4|0,we),R=+(o[X>>2]|0),G[$e>>3]=R*3,G[oe>>3]=0,O=R*-1.5,G[Me>>3]=O,G[ne>>3]=R*2.598076211353316,G[je>>3]=O,G[ue>>3]=R*-2.598076211353316,S=o[m>>2]|0,o[17008+(S*80|0)+(((x|0)==(S|0)?o[v>>2]|0:x)<<2)>>2]|0){case 1:{l=Me,x=$e;break}case 3:{l=je,x=Me;break}case 2:{l=$e,x=je;break}default:{l=8;break e}}du(E,we,x,l,be),!(ba(E,be)|0)&&!(ba(we,be)|0)&&(qo(be,o[m>>2]|0,V,1,b+8+(o[b>>2]<<4)|0),o[b>>2]=(o[b>>2]|0)+1)}if((B|0)<($|0)&&($o(Te,E),qo(E,o[v>>2]|0,V,1,b+8+(o[b>>2]<<4)|0),o[b>>2]=(o[b>>2]|0)+1),B=B+1|0,(B|0)>=(Ie|0)){l=3;break}else x=o[v>>2]|0}if((l|0)==3){Re=I;return}else(l|0)==8&&Dt(22557,22521,746,22602)}function ma(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0;V=Re,Re=Re+160|0,x=V+80|0,b=V,S=x,P=20336,B=S+72|0;do o[S>>2]=o[P>>2],S=S+4|0,P=P+4|0;while((S|0)<(B|0));S=b,P=20416,B=S+72|0;do o[S>>2]=o[P>>2],S=S+4|0,P=P+4|0;while((S|0)<(B|0));B=(Mi(o[h>>2]|0)|0)==0,x=B?x:b,b=l+4|0,JA(b),Ml(b),Mi(o[h>>2]|0)|0&&(xo(b),o[h>>2]=(o[h>>2]|0)+1),o[d>>2]=o[l>>2],h=d+4|0,qn(b,x,h),ni(h),o[d+16>>2]=o[l>>2],h=d+20|0,qn(b,x+12|0,h),ni(h),o[d+32>>2]=o[l>>2],h=d+36|0,qn(b,x+24|0,h),ni(h),o[d+48>>2]=o[l>>2],h=d+52|0,qn(b,x+36|0,h),ni(h),o[d+64>>2]=o[l>>2],h=d+68|0,qn(b,x+48|0,h),ni(h),o[d+80>>2]=o[l>>2],d=d+84|0,qn(b,x+60|0,d),ni(d),Re=V}function Tr(l){l=+l;var h=0;return h=l<0?l+6.283185307179586:l,+(l>=6.283185307179586?h+-6.283185307179586:h)}function $s(l,h){return l=l|0,h=h|0,+Pe(+(+G[l>>3]-+G[h>>3]))<17453292519943298e-27?(h=+Pe(+(+G[l+8>>3]-+G[h+8>>3]))<17453292519943298e-27,h|0):(h=0,h|0)}function nr(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0;return b=+G[h>>3],x=+G[l>>3],S=+Qe(+((b-x)*.5)),d=+Qe(+((+G[h+8>>3]-+G[l+8>>3])*.5)),d=S*S+d*(+lt(+b)*+lt(+x)*d),+(+Ut(+ +Le(+d),+ +Le(+(1-d)))*2)}function or(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0;return b=+G[h>>3],x=+G[l>>3],S=+Qe(+((b-x)*.5)),d=+Qe(+((+G[h+8>>3]-+G[l+8>>3])*.5)),d=S*S+d*(+lt(+b)*+lt(+x)*d),+(+Ut(+ +Le(+d),+ +Le(+(1-d)))*2*6371.007180918475)}function Br(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0;return b=+G[h>>3],x=+G[l>>3],S=+Qe(+((b-x)*.5)),d=+Qe(+((+G[h+8>>3]-+G[l+8>>3])*.5)),d=S*S+d*(+lt(+b)*+lt(+x)*d),+(+Ut(+ +Le(+d),+ +Le(+(1-d)))*2*6371.007180918475*1e3)}function Mr(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0;return S=+G[h>>3],x=+lt(+S),b=+G[h+8>>3]-+G[l+8>>3],P=x*+Qe(+b),d=+G[l>>3],+ +Ut(+P,+(+Qe(+S)*+lt(+d)-+lt(+b)*(x*+Qe(+d))))}function Pl(l,h,d,x){l=l|0,h=+h,d=+d,x=x|0;var b=0,S=0,P=0,B=0;if(d<1e-16){o[x>>2]=o[l>>2],o[x+4>>2]=o[l+4>>2],o[x+8>>2]=o[l+8>>2],o[x+12>>2]=o[l+12>>2];return}S=h<0?h+6.283185307179586:h,S=h>=6.283185307179586?S+-6.283185307179586:S;do if(S<1e-16)h=+G[l>>3]+d,G[x>>3]=h,b=x;else{if(b=+Pe(+(S+-3.141592653589793))<1e-16,h=+G[l>>3],b){h=h-d,G[x>>3]=h,b=x;break}if(P=+lt(+d),d=+Qe(+d),h=P*+Qe(+h)+ +lt(+S)*(d*+lt(+h)),h=h>1?1:h,h=+wt(+(h<-1?-1:h)),G[x>>3]=h,+Pe(+(h+-1.5707963267948966))<1e-16){G[x>>3]=1.5707963267948966,G[x+8>>3]=0;return}if(+Pe(+(h+1.5707963267948966))<1e-16){G[x>>3]=-1.5707963267948966,G[x+8>>3]=0;return}if(B=+lt(+h),S=d*+Qe(+S)/B,d=+G[l>>3],h=(P-+Qe(+h)*+Qe(+d))/+lt(+d)/B,P=S>1?1:S,h=h>1?1:h,h=+G[l+8>>3]+ +Ut(+(P<-1?-1:P),+(h<-1?-1:h)),h>3.141592653589793)do h=h+-6.283185307179586;while(h>3.141592653589793);if(h<-3.141592653589793)do h=h+6.283185307179586;while(h<-3.141592653589793);G[x+8>>3]=h;return}while(0);if(+Pe(+(h+-1.5707963267948966))<1e-16){G[b>>3]=1.5707963267948966,G[x+8>>3]=0;return}if(+Pe(+(h+1.5707963267948966))<1e-16){G[b>>3]=-1.5707963267948966,G[x+8>>3]=0;return}if(h=+G[l+8>>3],h>3.141592653589793)do h=h+-6.283185307179586;while(h>3.141592653589793);if(h<-3.141592653589793)do h=h+6.283185307179586;while(h<-3.141592653589793);G[x+8>>3]=h}function Zo(l){return l=l|0,+ +G[20496+(l<<3)>>3]}function ac(l){return l=l|0,+ +G[20624+(l<<3)>>3]}function qa(l){return l=l|0,+ +G[20752+(l<<3)>>3]}function lc(l){return l=l|0,+ +G[20880+(l<<3)>>3]}function su(l){l=l|0;var h=0;return h=21008+(l<<3)|0,l=o[h>>2]|0,Vt(o[h+4>>2]|0),l|0}function Hs(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0;return ne=+G[h>>3],X=+G[l>>3],V=+Qe(+((ne-X)*.5)),S=+G[h+8>>3],$=+G[l+8>>3],P=+Qe(+((S-$)*.5)),B=+lt(+X),oe=+lt(+ne),P=V*V+P*(oe*B*P),P=+Ut(+ +Le(+P),+ +Le(+(1-P)))*2,V=+G[d>>3],ne=+Qe(+((V-ne)*.5)),x=+G[d+8>>3],S=+Qe(+((x-S)*.5)),b=+lt(+V),S=ne*ne+S*(oe*b*S),S=+Ut(+ +Le(+S),+ +Le(+(1-S)))*2,V=+Qe(+((X-V)*.5)),x=+Qe(+(($-x)*.5)),x=V*V+x*(B*b*x),x=+Ut(+ +Le(+x),+ +Le(+(1-x)))*2,b=(P+S+x)*.5,+(+Jt(+ +Le(+(+ft(+(b*.5))*+ft(+((b-P)*.5))*+ft(+((b-S)*.5))*+ft(+((b-x)*.5)))))*4)}function Il(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0;if(S=Re,Re=Re+192|0,x=S+168|0,b=S,Qs(l,h,x),ms(l,h,b),h=o[b>>2]|0,(h|0)<=0)return d=0,Re=S,+d;if(d=+Hs(b+8|0,b+8+(((h|0)!=1&1)<<4)|0,x)+0,(h|0)==1)return Re=S,+d;l=1;do P=l,l=l+1|0,d=d+ +Hs(b+8+(P<<4)|0,b+8+(((l|0)%(h|0)|0)<<4)|0,x);while((l|0)<(h|0));return Re=S,+d}function Za(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0;if(S=Re,Re=Re+192|0,x=S+168|0,b=S,Qs(l,h,x),ms(l,h,b),h=o[b>>2]|0,(h|0)>0){if(d=+Hs(b+8|0,b+8+(((h|0)!=1&1)<<4)|0,x)+0,(h|0)!=1){l=1;do P=l,l=l+1|0,d=d+ +Hs(b+8+(P<<4)|0,b+8+(((l|0)%(h|0)|0)<<4)|0,x);while((l|0)<(h|0))}}else d=0;return Re=S,+(d*6371.007180918475*6371.007180918475)}function ya(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0;if(S=Re,Re=Re+192|0,x=S+168|0,b=S,Qs(l,h,x),ms(l,h,b),h=o[b>>2]|0,(h|0)>0){if(d=+Hs(b+8|0,b+8+(((h|0)!=1&1)<<4)|0,x)+0,(h|0)!=1){l=1;do P=l,l=l+1|0,d=d+ +Hs(b+8+(P<<4)|0,b+8+(((l|0)%(h|0)|0)<<4)|0,x);while((l|0)<(h|0))}}else d=0;return Re=S,+(d*6371.007180918475*6371.007180918475*1e3*1e3)}function kl(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0;if(P=Re,Re=Re+176|0,S=P,Ja(l,h,S),l=o[S>>2]|0,(l|0)<=1)return b=0,Re=P,+b;h=l+-1|0,l=0,d=0,x=+G[S+8>>3],b=+G[S+16>>3];do l=l+1|0,V=x,x=+G[S+8+(l<<4)>>3],$=+Qe(+((x-V)*.5)),B=b,b=+G[S+8+(l<<4)+8>>3],B=+Qe(+((b-B)*.5)),B=$*$+B*(+lt(+x)*+lt(+V)*B),d=d+ +Ut(+ +Le(+B),+ +Le(+(1-B)))*2;while((l|0)<(h|0));return Re=P,+d}function Ll(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0;if(P=Re,Re=Re+176|0,S=P,Ja(l,h,S),l=o[S>>2]|0,(l|0)<=1)return b=0,Re=P,+b;h=l+-1|0,l=0,d=0,x=+G[S+8>>3],b=+G[S+16>>3];do l=l+1|0,V=x,x=+G[S+8+(l<<4)>>3],$=+Qe(+((x-V)*.5)),B=b,b=+G[S+8+(l<<4)+8>>3],B=+Qe(+((b-B)*.5)),B=$*$+B*(+lt(+V)*+lt(+x)*B),d=d+ +Ut(+ +Le(+B),+ +Le(+(1-B)))*2;while((l|0)!=(h|0));return $=d*6371.007180918475,Re=P,+$}function Cr(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0;if(P=Re,Re=Re+176|0,S=P,Ja(l,h,S),l=o[S>>2]|0,(l|0)<=1)return b=0,Re=P,+b;h=l+-1|0,l=0,d=0,x=+G[S+8>>3],b=+G[S+16>>3];do l=l+1|0,V=x,x=+G[S+8+(l<<4)>>3],$=+Qe(+((x-V)*.5)),B=b,b=+G[S+8+(l<<4)+8>>3],B=+Qe(+((b-B)*.5)),B=$*$+B*(+lt(+V)*+lt(+x)*B),d=d+ +Ut(+ +Le(+B),+ +Le(+(1-B)))*2;while((l|0)!=(h|0));return $=d*6371.007180918475*1e3,Re=P,+$}function xA(l,h){return l=l|0,h=h|0,h=It(l|0,h|0,52)|0,Ue()|0,h&15|0}function ps(l,h){return l=l|0,h=h|0,h=It(l|0,h|0,45)|0,Ue()|0,h&127|0}function ou(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0;if(!(!0&(h&-16777216|0)==134217728)||(P=It(l|0,h|0,45)|0,Ue()|0,P=P&127,P>>>0>121))return h=0,h|0;d=It(l|0,h|0,52)|0,Ue()|0,d=d&15;do if(d|0){for(b=1,x=0;;){if(S=It(l|0,h|0,(15-b|0)*3|0)|0,Ue()|0,S=S&7,(S|0)!=0&(x^1))if((S|0)==1&(An(P)|0)!=0){B=0,x=13;break}else x=1;if((S|0)==7){B=0,x=13;break}if(b>>>0<d>>>0)b=b+1|0;else{x=9;break}}if((x|0)==9){if((d|0)==15)B=1;else break;return B|0}else if((x|0)==13)return B|0}while(0);for(;;){if(B=It(l|0,h|0,(14-d|0)*3|0)|0,Ue()|0,!((B&7|0)==7&!0)){B=0,x=13;break}if(d>>>0<14)d=d+1|0;else{B=1,x=13;break}}return(x|0)==13?B|0:0}function Dl(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;if(x=It(l|0,h|0,52)|0,Ue()|0,x=x&15,(x|0)>=(d|0)){if((x|0)!=(d|0))if(d>>>0<=15){if(b=Rt(d|0,0,52)|0,l=b|l,h=Ue()|0|h&-15728641,(x|0)>(d|0))do b=Rt(7,0,(14-d|0)*3|0)|0,d=d+1|0,l=b|l,h=Ue()|0|h;while((d|0)<(x|0))}else h=0,l=0}else h=0,l=0;return Vt(h|0),l|0}function Ac(l,h,d){return l=l|0,h=h|0,d=d|0,l=It(l|0,h|0,52)|0,Ue()|0,l=l&15,(d|0)<16&(l|0)<=(d|0)?(d=Ol(7,d-l|0)|0,d|0):(d=0,d|0)}function ri(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0,$=0,X=0;if(P=It(l|0,h|0,52)|0,Ue()|0,P=P&15,!!((d|0)<16&(P|0)<=(d|0))){if((P|0)==(d|0)){d=x,o[d>>2]=l,o[d+4>>2]=h;return}if(V=Ol(7,d-P|0)|0,$=(V|0)/7|0,B=It(l|0,h|0,45)|0,Ue()|0,!(An(B&127)|0))S=0;else{e:do if(!P)b=0;else for(S=1;;){if(b=It(l|0,h|0,(15-S|0)*3|0)|0,Ue()|0,b=b&7,b|0)break e;if(S>>>0<P>>>0)S=S+1|0;else{b=0;break}}while(0);S=(b|0)==0}if(X=Rt(P+1|0,0,52)|0,b=Ue()|0|h&-15728641,B=(14-P|0)*3|0,h=Rt(7,0,B|0)|0,h=(X|l)&~h,P=b&~(Ue()|0),ri(h,P,d,x),b=x+($<<3)|0,!S){X=Rt(1,0,B|0)|0,ri(X|h,Ue()|0|P,d,b),X=b+($<<3)|0,V=Rt(2,0,B|0)|0,ri(V|h,Ue()|0|P,d,X),X=X+($<<3)|0,V=Rt(3,0,B|0)|0,ri(V|h,Ue()|0|P,d,X),X=X+($<<3)|0,V=Rt(4,0,B|0)|0,ri(V|h,Ue()|0|P,d,X),X=X+($<<3)|0,V=Rt(5,0,B|0)|0,ri(V|h,Ue()|0|P,d,X),V=Rt(6,0,B|0)|0,ri(V|h,Ue()|0|P,d,X+($<<3)|0);return}S=b+($<<3)|0,(V|0)>6&&(V=b+8|0,X=(S>>>0>V>>>0?S:V)+-1+(0-b)|0,L(b|0,0,X+8&-8|0)|0,b=V+(X>>>3<<3)|0),X=Rt(2,0,B|0)|0,ri(X|h,Ue()|0|P,d,b),X=b+($<<3)|0,V=Rt(3,0,B|0)|0,ri(V|h,Ue()|0|P,d,X),X=X+($<<3)|0,V=Rt(4,0,B|0)|0,ri(V|h,Ue()|0|P,d,X),X=X+($<<3)|0,V=Rt(5,0,B|0)|0,ri(V|h,Ue()|0|P,d,X),V=Rt(6,0,B|0)|0,ri(V|h,Ue()|0|P,d,X+($<<3)|0)}}function $r(l,h){l=l|0,h=h|0;var d=0,x=0,b=0;if(b=It(l|0,h|0,45)|0,Ue()|0,!(An(b&127)|0))return b=0,b|0;b=It(l|0,h|0,52)|0,Ue()|0,b=b&15;e:do if(!b)d=0;else for(x=1;;){if(d=It(l|0,h|0,(15-x|0)*3|0)|0,Ue()|0,d=d&7,d|0)break e;if(x>>>0<b>>>0)x=x+1|0;else{d=0;break}}while(0);return b=(d|0)==0&1,b|0}function hi(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;if(x=It(l|0,h|0,52)|0,Ue()|0,x=x&15,(d|0)<16&(x|0)<=(d|0)){if((x|0)!=(d|0)&&(b=Rt(d|0,0,52)|0,l=b|l,h=Ue()|0|h&-15728641,(x|0)<(d|0)))do b=Rt(7,0,(14-x|0)*3|0)|0,x=x+1|0,l=l&~b,h=h&~(Ue()|0);while((x|0)<(d|0))}else h=0,l=0;return Vt(h|0),l|0}function au(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0,v=0,E=0;if(!d)return v=0,v|0;if(b=l,x=o[b>>2]|0,b=o[b+4>>2]|0,!0&(b&15728640|0)==0){if((d|0)<=0||(v=h,o[v>>2]=x,o[v+4>>2]=b,(d|0)==1))return v=0,v|0;x=1;do m=l+(x<<3)|0,g=o[m+4>>2]|0,v=h+(x<<3)|0,o[v>>2]=o[m>>2],o[v+4>>2]=g,x=x+1|0;while((x|0)!=(d|0));return x=0,x|0}if(m=d<<3,g=on(m)|0,!g)return v=-3,v|0;if(Ks(g|0,l|0,m|0)|0,be=as(d,8)|0,!be)return wn(g),v=-3,v|0;x=d;e:for(;;){P=g,X=o[P>>2]|0,P=o[P+4>>2]|0,Me=It(X|0,P|0,52)|0,Ue()|0,Me=Me&15,je=Me+-1|0,$e=(x|0)>0;t:do if($e){if(we=((x|0)<0)<<31>>31,Te=Rt(je|0,0,52)|0,Ie=Ue()|0,je>>>0>15)for(b=0,l=X,d=P;;){if(!((l|0)==0&(d|0)==0)){if(S=It(l|0,d|0,52)|0,Ue()|0,S=S&15,B=(S|0)<(je|0),S=(S|0)==(je|0),$=B?0:S?l:0,l=B?0:S?d:0,d=Xs($|0,l|0,x|0,we|0)|0,Ue()|0,S=be+(d<<3)|0,B=S,V=o[B>>2]|0,B=o[B+4>>2]|0,(V|0)==0&(B|0)==0)d=$;else for(Te=0,ue=d,ne=B,d=$;;){if((Te|0)>(x|0)){v=41;break e}if((V|0)==(d|0)&(ne&-117440513|0)==(l|0)){$=It(V|0,ne|0,56)|0,Ue()|0,$=$&7,oe=$+1|0,Ie=It(V|0,ne|0,45)|0,Ue()|0;n:do if(!(An(Ie&127)|0))B=7;else{if(V=It(V|0,ne|0,52)|0,Ue()|0,V=V&15,!V){B=6;break}for(B=1;;){if(Ie=Rt(7,0,(15-B|0)*3|0)|0,!((Ie&d|0)==0&((Ue()|0)&l|0)==0)){B=7;break n}if(B>>>0<V>>>0)B=B+1|0;else{B=6;break}}}while(0);if(($+2|0)>>>0>B>>>0){v=51;break e}Ie=Rt(oe|0,0,56)|0,l=Ue()|0|l&-117440513,B=S,o[B>>2]=0,o[B+4>>2]=0,B=ue,d=Ie|d}else B=(ue+1|0)%(x|0)|0;if(S=be+(B<<3)|0,ne=S,V=o[ne>>2]|0,ne=o[ne+4>>2]|0,(V|0)==0&(ne|0)==0)break;Te=Te+1|0,ue=B}Ie=S,o[Ie>>2]=d,o[Ie+4>>2]=l}if(b=b+1|0,(b|0)>=(x|0))break t;d=g+(b<<3)|0,l=o[d>>2]|0,d=o[d+4>>2]|0}for(b=0,l=X,d=P;;){if(!((l|0)==0&(d|0)==0)){if(B=It(l|0,d|0,52)|0,Ue()|0,B=B&15,(B|0)>=(je|0)){if((B|0)!=(je|0)&&(l=l|Te,d=d&-15728641|Ie,B>>>0>=Me>>>0)){S=je;do ue=Rt(7,0,(14-S|0)*3|0)|0,S=S+1|0,l=ue|l,d=Ue()|0|d;while(S>>>0<B>>>0)}}else l=0,d=0;if(B=Xs(l|0,d|0,x|0,we|0)|0,Ue()|0,S=be+(B<<3)|0,V=S,$=o[V>>2]|0,V=o[V+4>>2]|0,!(($|0)==0&(V|0)==0))for(ue=0;;){if((ue|0)>(x|0)){v=41;break e}if(($|0)==(l|0)&(V&-117440513|0)==(d|0)){oe=It($|0,V|0,56)|0,Ue()|0,oe=oe&7,ne=oe+1|0,E=It($|0,V|0,45)|0,Ue()|0;n:do if(!(An(E&127)|0))V=7;else{if($=It($|0,V|0,52)|0,Ue()|0,$=$&15,!$){V=6;break}for(V=1;;){if(E=Rt(7,0,(15-V|0)*3|0)|0,!((E&l|0)==0&((Ue()|0)&d|0)==0)){V=7;break n}if(V>>>0<$>>>0)V=V+1|0;else{V=6;break}}}while(0);if((oe+2|0)>>>0>V>>>0){v=51;break e}E=Rt(ne|0,0,56)|0,d=Ue()|0|d&-117440513,ne=S,o[ne>>2]=0,o[ne+4>>2]=0,l=E|l}else B=(B+1|0)%(x|0)|0;if(S=be+(B<<3)|0,V=S,$=o[V>>2]|0,V=o[V+4>>2]|0,($|0)==0&(V|0)==0)break;ue=ue+1|0}E=S,o[E>>2]=l,o[E+4>>2]=d}if(b=b+1|0,(b|0)>=(x|0))break t;d=g+(b<<3)|0,l=o[d>>2]|0,d=o[d+4>>2]|0}}while(0);if((x+5|0)>>>0<11){v=99;break}if(Ie=as((x|0)/6|0,8)|0,!Ie){v=58;break}t:do if($e){ue=0,ne=0;do{if(B=be+(ue<<3)|0,l=B,b=o[l>>2]|0,l=o[l+4>>2]|0,!((b|0)==0&(l|0)==0)){V=It(b|0,l|0,56)|0,Ue()|0,V=V&7,d=V+1|0,$=l&-117440513,E=It(b|0,l|0,45)|0,Ue()|0;n:do if(An(E&127)|0){if(oe=It(b|0,l|0,52)|0,Ue()|0,oe=oe&15,oe|0)for(S=1;;){if(E=Rt(7,0,(15-S|0)*3|0)|0,!((b&E|0)==0&($&(Ue()|0)|0)==0))break n;if(S>>>0<oe>>>0)S=S+1|0;else break}l=Rt(d|0,0,56)|0,b=l|b,l=Ue()|0|$,d=B,o[d>>2]=b,o[d+4>>2]=l,d=V+2|0}while(0);(d|0)==7&&(E=Ie+(ne<<3)|0,o[E>>2]=b,o[E+4>>2]=l&-117440513,ne=ne+1|0)}ue=ue+1|0}while((ue|0)!=(x|0));if($e){if(Te=((x|0)<0)<<31>>31,oe=Rt(je|0,0,52)|0,ue=Ue()|0,je>>>0>15)for(l=0,b=0;;){do if(!((X|0)==0&(P|0)==0)){for(V=It(X|0,P|0,52)|0,Ue()|0,V=V&15,S=(V|0)<(je|0),V=(V|0)==(je|0),B=S?0:V?X:0,V=S?0:V?P:0,S=Xs(B|0,V|0,x|0,Te|0)|0,Ue()|0,d=0;;){if((d|0)>(x|0)){v=98;break e}if(E=be+(S<<3)|0,$=o[E+4>>2]|0,($&-117440513|0)==(V|0)&&(o[E>>2]|0)==(B|0)){v=70;break}if(S=(S+1|0)%(x|0)|0,E=be+(S<<3)|0,(o[E>>2]|0)==(B|0)&&(o[E+4>>2]|0)==(V|0))break;d=d+1|0}if((v|0)==70&&(v=0,!0&($&117440512|0)==100663296))break;E=h+(b<<3)|0,o[E>>2]=X,o[E+4>>2]=P,b=b+1|0}while(0);if(l=l+1|0,(l|0)>=(x|0)){x=ne;break t}P=g+(l<<3)|0,X=o[P>>2]|0,P=o[P+4>>2]|0}for(l=0,b=0;;){do if(!((X|0)==0&(P|0)==0)){if(V=It(X|0,P|0,52)|0,Ue()|0,V=V&15,(V|0)>=(je|0))if((V|0)!=(je|0))if(d=X|oe,S=P&-15728641|ue,V>>>0<Me>>>0)V=S;else{B=je;do E=Rt(7,0,(14-B|0)*3|0)|0,B=B+1|0,d=E|d,S=Ue()|0|S;while(B>>>0<V>>>0);V=S}else d=X,V=P;else d=0,V=0;for(B=Xs(d|0,V|0,x|0,Te|0)|0,Ue()|0,S=0;;){if((S|0)>(x|0)){v=98;break e}if(E=be+(B<<3)|0,$=o[E+4>>2]|0,($&-117440513|0)==(V|0)&&(o[E>>2]|0)==(d|0)){v=93;break}if(B=(B+1|0)%(x|0)|0,E=be+(B<<3)|0,(o[E>>2]|0)==(d|0)&&(o[E+4>>2]|0)==(V|0))break;S=S+1|0}if((v|0)==93&&(v=0,!0&($&117440512|0)==100663296))break;E=h+(b<<3)|0,o[E>>2]=X,o[E+4>>2]=P,b=b+1|0}while(0);if(l=l+1|0,(l|0)>=(x|0)){x=ne;break t}P=g+(l<<3)|0,X=o[P>>2]|0,P=o[P+4>>2]|0}}else b=0,x=ne}else b=0,x=0;while(0);if(L(be|0,0,m|0)|0,Ks(g|0,Ie|0,x<<3|0)|0,wn(Ie),x)h=h+(b<<3)|0;else break}return(v|0)==41?(wn(g),wn(be),E=-1,E|0):(v|0)==51?(wn(g),wn(be),E=-2,E|0):(v|0)==58?(wn(g),wn(be),E=-3,E|0):(v|0)==98?(wn(Ie),wn(g),wn(be),E=-1,E|0):((v|0)==99&&Ks(h|0,g|0,x<<3|0)|0,wn(g),wn(be),E=0,E|0)}function Ws(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0;if((h|0)<=0)return b=0,b|0;if((b|0)>=16){for(S=0;;){if(X=l+(S<<3)|0,!((o[X>>2]|0)==0&(o[X+4>>2]|0)==0)){S=14;break}if(S=S+1|0,(S|0)>=(h|0)){P=0,S=16;break}}if((S|0)==14)return((x|0)>0?-2:-1)|0;if((S|0)==16)return P|0}S=0,X=0;e:for(;;){$=l+(X<<3)|0,B=$,P=o[B>>2]|0,B=o[B+4>>2]|0;do if(!((P|0)==0&(B|0)==0)){if((S|0)>=(x|0)){P=-1,S=16;break e}if(V=It(P|0,B|0,52)|0,Ue()|0,V=V&15,(V|0)>(b|0)){P=-2,S=16;break e}if((V|0)==(b|0)){$=d+(S<<3)|0,o[$>>2]=P,o[$+4>>2]=B,S=S+1|0;break}if(P=(Ol(7,b-V|0)|0)+S|0,(P|0)>(x|0)){P=-1,S=16;break e}ri(o[$>>2]|0,o[$+4>>2]|0,b,d+(S<<3)|0),S=P}while(0);if(X=X+1|0,(X|0)>=(h|0)){P=0,S=16;break}}return(S|0)==16?P|0:0}function uc(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0;if((h|0)<=0)return d=0,d|0;if((d|0)>=16){for(x=0;;){if(P=l+(x<<3)|0,!((o[P>>2]|0)==0&(o[P+4>>2]|0)==0)){x=-1,b=13;break}if(x=x+1|0,(x|0)>=(h|0)){x=0,b=13;break}}if((b|0)==13)return x|0}x=0,P=0;e:for(;;){b=l+(P<<3)|0,S=o[b>>2]|0,b=o[b+4>>2]|0;do if(!((S|0)==0&(b|0)==0)){if(b=It(S|0,b|0,52)|0,Ue()|0,b=b&15,(b|0)>(d|0)){x=-1,b=13;break e}if((b|0)==(d|0)){x=x+1|0;break}else{x=(Ol(7,d-b|0)|0)+x|0;break}}while(0);if(P=P+1|0,(P|0)>=(h|0)){b=13;break}}return(b|0)==13?x|0:0}function wA(l,h){return l=l|0,h=h|0,h=It(l|0,h|0,52)|0,Ue()|0,h&1|0}function _i(l,h){l=l|0,h=h|0;var d=0,x=0,b=0;if(b=It(l|0,h|0,52)|0,Ue()|0,b=b&15,!b)return b=0,b|0;for(x=1;;){if(d=It(l|0,h|0,(15-x|0)*3|0)|0,Ue()|0,d=d&7,d|0){x=5;break}if(x>>>0<b>>>0)x=x+1|0;else{d=0,x=5;break}}return(x|0)==5?d|0:0}function zi(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0;if(V=It(l|0,h|0,52)|0,Ue()|0,V=V&15,!V)return B=h,V=l,Vt(B|0),V|0;for(B=1,d=0;;){S=(15-B|0)*3|0,x=Rt(7,0,S|0)|0,b=Ue()|0,P=It(l|0,h|0,S|0)|0,Ue()|0,S=Rt(Ki(P&7)|0,0,S|0)|0,P=Ue()|0,l=S|l&~x,h=P|h&~b;e:do if(!d)if((S&x|0)==0&(P&b|0)==0)d=0;else if(x=It(l|0,h|0,52)|0,Ue()|0,x=x&15,!x)d=1;else{d=1;t:for(;;){switch(P=It(l|0,h|0,(15-d|0)*3|0)|0,Ue()|0,P&7){case 1:break t;case 0:break;default:{d=1;break e}}if(d>>>0<x>>>0)d=d+1|0;else{d=1;break e}}for(d=1;;)if(P=(15-d|0)*3|0,b=It(l|0,h|0,P|0)|0,Ue()|0,S=Rt(7,0,P|0)|0,h=h&~(Ue()|0),P=Rt(Ki(b&7)|0,0,P|0)|0,l=l&~S|P,h=h|(Ue()|0),d>>>0<x>>>0)d=d+1|0;else{d=1;break}}while(0);if(B>>>0<V>>>0)B=B+1|0;else break}return Vt(h|0),l|0}function gs(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0;if(x=It(l|0,h|0,52)|0,Ue()|0,x=x&15,!x)return d=h,x=l,Vt(d|0),x|0;for(d=1;S=(15-d|0)*3|0,P=It(l|0,h|0,S|0)|0,Ue()|0,b=Rt(7,0,S|0)|0,h=h&~(Ue()|0),S=Rt(Ki(P&7)|0,0,S|0)|0,l=S|l&~b,h=Ue()|0|h,d>>>0<x>>>0;)d=d+1|0;return Vt(h|0),l|0}function _a(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0;if(V=It(l|0,h|0,52)|0,Ue()|0,V=V&15,!V)return B=h,V=l,Vt(B|0),V|0;for(B=1,d=0;;){S=(15-B|0)*3|0,x=Rt(7,0,S|0)|0,b=Ue()|0,P=It(l|0,h|0,S|0)|0,Ue()|0,S=Rt(Ji(P&7)|0,0,S|0)|0,P=Ue()|0,l=S|l&~x,h=P|h&~b;e:do if(!d)if((S&x|0)==0&(P&b|0)==0)d=0;else if(x=It(l|0,h|0,52)|0,Ue()|0,x=x&15,!x)d=1;else{d=1;t:for(;;){switch(P=It(l|0,h|0,(15-d|0)*3|0)|0,Ue()|0,P&7){case 1:break t;case 0:break;default:{d=1;break e}}if(d>>>0<x>>>0)d=d+1|0;else{d=1;break e}}for(d=1;;)if(b=(15-d|0)*3|0,S=Rt(7,0,b|0)|0,P=h&~(Ue()|0),h=It(l|0,h|0,b|0)|0,Ue()|0,h=Rt(Ji(h&7)|0,0,b|0)|0,l=l&~S|h,h=P|(Ue()|0),d>>>0<x>>>0)d=d+1|0;else{d=1;break}}while(0);if(B>>>0<V>>>0)B=B+1|0;else break}return Vt(h|0),l|0}function ss(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0;if(x=It(l|0,h|0,52)|0,Ue()|0,x=x&15,!x)return d=h,x=l,Vt(d|0),x|0;for(d=1;P=(15-d|0)*3|0,S=Rt(7,0,P|0)|0,b=h&~(Ue()|0),h=It(l|0,h|0,P|0)|0,Ue()|0,h=Rt(Ji(h&7)|0,0,P|0)|0,l=h|l&~S,h=Ue()|0|b,d>>>0<x>>>0;)d=d+1|0;return Vt(h|0),l|0}function Eo(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0;if(V=Re,Re=Re+64|0,B=V+40|0,x=V+24|0,b=V+12|0,S=V,Rt(h|0,0,52)|0,d=Ue()|0|134225919,!h)return(o[l+4>>2]|0)>2||(o[l+8>>2]|0)>2||(o[l+12>>2]|0)>2?(P=0,B=0,Vt(P|0),Re=V,B|0):(Rt(tr(l)|0,0,45)|0,P=Ue()|0|d,B=-1,Vt(P|0),Re=V,B|0);if(o[B>>2]=o[l>>2],o[B+4>>2]=o[l+4>>2],o[B+8>>2]=o[l+8>>2],o[B+12>>2]=o[l+12>>2],P=B+4|0,(h|0)>0)for(l=-1;o[x>>2]=o[P>>2],o[x+4>>2]=o[P+4>>2],o[x+8>>2]=o[P+8>>2],h&1?(Sl(P),o[b>>2]=o[P>>2],o[b+4>>2]=o[P+4>>2],o[b+8>>2]=o[P+8>>2],pa(b)):(Ho(P),o[b>>2]=o[P>>2],o[b+4>>2]=o[P+4>>2],o[b+8>>2]=o[P+8>>2],xo(b)),ks(x,b,S),ni(S),X=(15-h|0)*3|0,$=Rt(7,0,X|0)|0,d=d&~(Ue()|0),X=Rt(vo(S)|0,0,X|0)|0,l=X|l&~$,d=Ue()|0|d,(h|0)>1;)h=h+-1|0;else l=-1;e:do if((o[P>>2]|0)<=2&&(o[B+8>>2]|0)<=2&&(o[B+12>>2]|0)<=2){if(x=tr(B)|0,h=Rt(x|0,0,45)|0,h=h|l,l=Ue()|0|d&-1040385,S=fA(B)|0,!(An(x)|0)){if((S|0)<=0)break;for(b=0;;){if(x=It(h|0,l|0,52)|0,Ue()|0,x=x&15,x)for(d=1;X=(15-d|0)*3|0,B=It(h|0,l|0,X|0)|0,Ue()|0,$=Rt(7,0,X|0)|0,l=l&~(Ue()|0),X=Rt(Ki(B&7)|0,0,X|0)|0,h=h&~$|X,l=l|(Ue()|0),d>>>0<x>>>0;)d=d+1|0;if(b=b+1|0,(b|0)==(S|0))break e}}b=It(h|0,l|0,52)|0,Ue()|0,b=b&15;t:do if(b){d=1;n:for(;;){switch(X=It(h|0,l|0,(15-d|0)*3|0)|0,Ue()|0,X&7){case 1:break n;case 0:break;default:break t}if(d>>>0<b>>>0)d=d+1|0;else break t}if(YA(x,o[B>>2]|0)|0)for(d=1;B=(15-d|0)*3|0,$=Rt(7,0,B|0)|0,X=l&~(Ue()|0),l=It(h|0,l|0,B|0)|0,Ue()|0,l=Rt(Ji(l&7)|0,0,B|0)|0,h=h&~$|l,l=X|(Ue()|0),d>>>0<b>>>0;)d=d+1|0;else for(d=1;X=(15-d|0)*3|0,B=It(h|0,l|0,X|0)|0,Ue()|0,$=Rt(7,0,X|0)|0,l=l&~(Ue()|0),X=Rt(Ki(B&7)|0,0,X|0)|0,h=h&~$|X,l=l|(Ue()|0),d>>>0<b>>>0;)d=d+1|0}while(0);if((S|0)>0){d=0;do h=zi(h,l)|0,l=Ue()|0,d=d+1|0;while((d|0)!=(S|0))}}else h=0,l=0;while(0);return $=l,X=h,Vt($|0),Re=V,X|0}function Mi(l){return l=l|0,(l|0)%2|0|0}function Ya(l,h){l=l|0,h=h|0;var d=0,x=0;return x=Re,Re=Re+16|0,d=x,h>>>0<=15&&(o[l+4>>2]&2146435072|0)!=2146435072&&(o[l+8+4>>2]&2146435072|0)!=2146435072?(vA(l,h,d),h=Eo(d,h)|0,l=Ue()|0):(l=0,h=0),Vt(l|0),Re=x,h|0}function Rl(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0;if(b=d+4|0,S=It(l|0,h|0,52)|0,Ue()|0,S=S&15,P=It(l|0,h|0,45)|0,Ue()|0,x=(S|0)==0,An(P&127)|0){if(x)return P=1,P|0;x=1}else{if(x)return P=0,P|0;!(o[b>>2]|0)&&!(o[d+8>>2]|0)?x=(o[d+12>>2]|0)!=0&1:x=1}for(d=1;d&1?pa(b):xo(b),P=It(l|0,h|0,(15-d|0)*3|0)|0,Ue()|0,_A(b,P&7),d>>>0<S>>>0;)d=d+1|0;return x|0}function Xa(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0;X=Re,Re=Re+16|0,V=X,$=It(l|0,h|0,45)|0,Ue()|0,$=$&127;e:do if(An($)|0&&(S=It(l|0,h|0,52)|0,Ue()|0,S=S&15,(S|0)!=0)){x=1;t:for(;;){switch(B=It(l|0,h|0,(15-x|0)*3|0)|0,Ue()|0,B&7){case 5:break t;case 0:break;default:{x=h;break e}}if(x>>>0<S>>>0)x=x+1|0;else{x=h;break e}}for(b=1,x=h;h=(15-b|0)*3|0,P=Rt(7,0,h|0)|0,B=x&~(Ue()|0),x=It(l|0,x|0,h|0)|0,Ue()|0,x=Rt(Ji(x&7)|0,0,h|0)|0,l=l&~P|x,x=B|(Ue()|0),b>>>0<S>>>0;)b=b+1|0}else x=h;while(0);if(B=7728+($*28|0)|0,o[d>>2]=o[B>>2],o[d+4>>2]=o[B+4>>2],o[d+8>>2]=o[B+8>>2],o[d+12>>2]=o[B+12>>2],!(Rl(l,x,d)|0)){Re=X;return}if(P=d+4|0,o[V>>2]=o[P>>2],o[V+4>>2]=o[P+4>>2],o[V+8>>2]=o[P+8>>2],S=It(l|0,x|0,52)|0,Ue()|0,B=S&15,S&1?(xo(P),S=B+1|0):S=B,!(An($)|0))x=0;else{e:do if(!B)x=0;else for(h=1;;){if(b=It(l|0,x|0,(15-h|0)*3|0)|0,Ue()|0,b=b&7,b|0){x=b;break e}if(h>>>0<B>>>0)h=h+1|0;else{x=0;break}}while(0);x=(x|0)==4&1}if(!(bo(d,S,x,0)|0))(S|0)!=(B|0)&&(o[P>>2]=o[V>>2],o[P+4>>2]=o[V+4>>2],o[P+8>>2]=o[V+8>>2]);else{if(An($)|0)do;while(bo(d,S,0,0)|0);(S|0)!=(B|0)&&Ho(P)}Re=X}function Qs(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;x=Re,Re=Re+16|0,b=x,Xa(l,h,b),h=It(l|0,h|0,52)|0,Ue()|0,Qa(b,h&15,d),Re=x}function ms(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0;P=Re,Re=Re+16|0,S=P,Xa(l,h,S),x=It(l|0,h|0,45)|0,Ue()|0,x=(An(x&127)|0)==0,b=It(l|0,h|0,52)|0,Ue()|0,b=b&15;e:do if(!x){if(b|0)for(x=1;;){if(B=Rt(7,0,(15-x|0)*3|0)|0,!((B&l|0)==0&((Ue()|0)&h|0)==0))break e;if(x>>>0<b>>>0)x=x+1|0;else break}nu(S,b,0,5,d),Re=P;return}while(0);iu(S,b,0,6,d),Re=P}function cc(l,h){l=l|0,h=h|0;var d=0,x=0,b=0;if(x=It(l|0,h|0,45)|0,Ue()|0,!(An(x&127)|0))return x=2,x|0;if(x=It(l|0,h|0,52)|0,Ue()|0,x=x&15,!x)return x=5,x|0;for(d=1;;){if(b=Rt(7,0,(15-d|0)*3|0)|0,!((b&l|0)==0&((Ue()|0)&h|0)==0)){d=2,l=6;break}if(d>>>0<x>>>0)d=d+1|0;else{d=5,l=6;break}}return(l|0)==6?d|0:0}function va(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0;oe=Re,Re=Re+128|0,$=oe+112|0,S=oe+96|0,X=oe,b=It(l|0,h|0,52)|0,Ue()|0,B=b&15,o[$>>2]=B,P=It(l|0,h|0,45)|0,Ue()|0,P=P&127;e:do if(An(P)|0){if(B|0)for(x=1;;){if(V=Rt(7,0,(15-x|0)*3|0)|0,!((V&l|0)==0&((Ue()|0)&h|0)==0)){b=0;break e}if(x>>>0<B>>>0)x=x+1|0;else break}if(b&1)b=1;else{V=Rt(B+1|0,0,52)|0,X=Ue()|0|h&-15728641,$=Rt(7,0,(14-B|0)*3|0)|0,va((V|l)&~$,X&~(Ue()|0),d),Re=oe;return}}else b=0;while(0);Xa(l,h,S),b?(ru(S,$,X),V=5):(ma(S,$,X),V=6);e:do if(An(P)|0)if(!B)x=20;else for(x=1;;){if(P=Rt(7,0,(15-x|0)*3|0)|0,!((P&l|0)==0&((Ue()|0)&h|0)==0)){x=8;break e}if(x>>>0<B>>>0)x=x+1|0;else{x=20;break}}else x=8;while(0);if(L(d|0,-1,x|0)|0,b){b=0;do{for(S=X+(b<<4)|0,ga(S,o[$>>2]|0)|0,S=o[S>>2]|0,x=0;P=d+(x<<2)|0,B=o[P>>2]|0,!((B|0)==-1|(B|0)==(S|0));)x=x+1|0;o[P>>2]=S,b=b+1|0}while((b|0)!=(V|0))}else{b=0;do{for(S=X+(b<<4)|0,bo(S,o[$>>2]|0,0,1)|0,S=o[S>>2]|0,x=0;P=d+(x<<2)|0,B=o[P>>2]|0,!((B|0)==-1|(B|0)==(S|0));)x=x+1|0;o[P>>2]=S,b=b+1|0}while((b|0)!=(V|0))}Re=oe}function Ka(){return 12}function fi(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0;if(Rt(l|0,0,52)|0,B=Ue()|0|134225919,(l|0)<1){x=0,d=0;do An(x)|0&&(Rt(x|0,0,45)|0,P=B|(Ue()|0),l=h+(d<<3)|0,o[l>>2]=-1,o[l+4>>2]=P,d=d+1|0),x=x+1|0;while((x|0)!=122);return}P=0,d=0;do{if(An(P)|0){for(Rt(P|0,0,45)|0,x=1,b=-1,S=B|(Ue()|0);V=Rt(7,0,(15-x|0)*3|0)|0,b=b&~V,S=S&~(Ue()|0),(x|0)!=(l|0);)x=x+1|0;V=h+(d<<3)|0,o[V>>2]=b,o[V+4>>2]=S,d=d+1|0}P=P+1|0}while((P|0)!=122)}function Ls(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0,$=0;if(B=Re,Re=Re+64|0,P=B,(l|0)==(d|0)&(h|0)==(x|0)|(!1|(h&2013265920|0)!=134217728|(!1|(x&2013265920|0)!=134217728))||(b=It(l|0,h|0,52)|0,Ue()|0,b=b&15,S=It(d|0,x|0,52)|0,Ue()|0,(b|0)!=(S&15|0)))return P=0,Re=B,P|0;if(S=b+-1|0,b>>>0>1&&($=Dl(l,h,S)|0,V=Ue()|0,S=Dl(d,x,S)|0,($|0)==(S|0)&(V|0)==(Ue()|0))&&(S=(b^15)*3|0,b=It(l|0,h|0,S|0)|0,Ue()|0,b=b&7,S=It(d|0,x|0,S|0)|0,Ue()|0,S=S&7,(b|0)==0|(S|0)==0||(o[21136+(b<<2)>>2]|0)==(S|0)||(o[21168+(b<<2)>>2]|0)==(S|0)))return $=1,Re=B,$|0;b=P,S=b+56|0;do o[b>>2]=0,b=b+4|0;while((b|0)<(S|0));return fa(l,h,1,P),$=P,!((o[$>>2]|0)==(d|0)&&(o[$+4>>2]|0)==(x|0))&&($=P+8|0,!((o[$>>2]|0)==(d|0)&&(o[$+4>>2]|0)==(x|0)))&&($=P+16|0,!((o[$>>2]|0)==(d|0)&&(o[$+4>>2]|0)==(x|0)))&&($=P+24|0,!((o[$>>2]|0)==(d|0)&&(o[$+4>>2]|0)==(x|0)))&&($=P+32|0,!((o[$>>2]|0)==(d|0)&&(o[$+4>>2]|0)==(x|0)))&&($=P+40|0,!((o[$>>2]|0)==(d|0)&&(o[$+4>>2]|0)==(x|0)))?(b=P+48|0,b=((o[b>>2]|0)==(d|0)?(o[b+4>>2]|0)==(x|0):0)&1):b=1,$=b,Re=B,$|0}function os(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0,$=0,X=0;if($=Re,Re=Re+16|0,P=$,!(Ls(l,h,d,x)|0))return B=0,V=0,Vt(B|0),Re=$,V|0;for(B=h&-2130706433,b=($r(l,h)|0)==0,b=b?1:2;o[P>>2]=0,X=me(l,h,b,P)|0,S=b+1|0,!((X|0)==(d|0)&(Ue()|0)==(x|0));)if(S>>>0<7)b=S;else{b=0,l=0,V=6;break}return(V|0)==6?(Vt(b|0),Re=$,l|0):(X=Rt(b|0,0,56)|0,V=B|(Ue()|0)|268435456,X=l|X,Vt(V|0),Re=$,X|0)}function Bl(l,h){l=l|0,h=h|0;var d=0;return d=!0&(h&2013265920|0)==268435456,Vt((d?h&-2130706433|134217728:0)|0),(d?l:0)|0}function Yo(l,h){l=l|0,h=h|0;var d=0,x=0,b=0;return x=Re,Re=Re+16|0,d=x,!0&(h&2013265920|0)==268435456?(b=It(l|0,h|0,56)|0,Ue()|0,o[d>>2]=0,d=me(l,h&-2130706433|134217728,b&7,d)|0,h=Ue()|0,Vt(h|0),Re=x,d|0):(h=0,d=0,Vt(h|0),Re=x,d|0)}function hc(l,h){l=l|0,h=h|0;var d=0;if(!(!0&(h&2013265920|0)==268435456))return d=0,d|0;switch(d=It(l|0,h|0,56)|0,Ue()|0,d&7){case 0:case 7:return d=0,d|0}return d=h&-2130706433|134217728,!0&(h&117440512|0)==16777216&($r(l,d)|0)!=0?(d=0,d|0):(d=ou(l,d)|0,d|0)}function To(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0;S=Re,Re=Re+16|0,x=S,P=!0&(h&2013265920|0)==268435456,b=h&-2130706433|134217728,B=d,o[B>>2]=P?l:0,o[B+4>>2]=P?b:0,P?(h=It(l|0,h|0,56)|0,Ue()|0,o[x>>2]=0,l=me(l,b,h&7,x)|0,h=Ue()|0):(l=0,h=0),B=d+8|0,o[B>>2]=l,o[B+4>>2]=h,Re=S}function zl(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;b=($r(l,h)|0)==0,h=h&-2130706433,x=d,o[x>>2]=b?l:0,o[x+4>>2]=b?h|285212672:0,x=d+8|0,o[x>>2]=l,o[x+4>>2]=h|301989888,x=d+16|0,o[x>>2]=l,o[x+4>>2]=h|318767104,x=d+24|0,o[x>>2]=l,o[x+4>>2]=h|335544320,x=d+32|0,o[x>>2]=l,o[x+4>>2]=h|352321536,d=d+40|0,o[d>>2]=l,o[d+4>>2]=h|369098752}function Ja(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0;if(P=Re,Re=Re+16|0,S=P,x=It(l|0,h|0,56)|0,Ue()|0,B=!0&(h&2013265920|0)==268435456,b=B?l:0,l=B?h&-2130706433|134217728:0,h=_s(b,l,x&7)|0,(h|0)==-1){o[d>>2]=0,Re=P;return}Xa(b,l,S),x=It(b|0,l|0,52)|0,Ue()|0,x=x&15,$r(b,l)|0?nu(S,x,h,2,d):iu(S,x,h,2,d),Re=P}function hh(l){l=l|0;var h=0,d=0,x=0;return h=as(1,12)|0,h||Dt(22691,22646,49,22704),d=l+4|0,x=o[d>>2]|0,x|0?(x=x+8|0,o[x>>2]=h,o[d>>2]=h,h|0):(o[l>>2]|0&&Dt(22721,22646,61,22744),x=l,o[x>>2]=h,o[d>>2]=h,h|0)}function fh(l,h){l=l|0,h=h|0;var d=0,x=0;return x=on(24)|0,x||Dt(22758,22646,78,22772),o[x>>2]=o[h>>2],o[x+4>>2]=o[h+4>>2],o[x+8>>2]=o[h+8>>2],o[x+12>>2]=o[h+12>>2],o[x+16>>2]=0,h=l+4|0,d=o[h>>2]|0,d|0?(o[d+16>>2]=x,o[h>>2]=x,x|0):(o[l>>2]|0&&Dt(22787,22646,82,22772),o[l>>2]=x,o[h>>2]=x,x|0)}function el(l){l=l|0;var h=0,d=0,x=0,b=0;if(l)for(x=1;;){if(h=o[l>>2]|0,h|0)do{if(d=o[h>>2]|0,d|0)do b=d,d=o[d+16>>2]|0,wn(b);while(d|0);b=h,h=o[h+8>>2]|0,wn(b)}while(h|0);if(h=l,l=o[l+8>>2]|0,x||wn(h),l)x=0;else break}}function xa(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0,v=0,E=0,I=0,R=0,O=0,N=0,Q=0,te=0,le=0,pe=0;if(b=l+8|0,o[b>>2]|0)return pe=1,pe|0;if(x=o[l>>2]|0,!x)return pe=0,pe|0;h=x,d=0;do d=d+1|0,h=o[h+8>>2]|0;while(h|0);if(d>>>0<2)return pe=0,pe|0;te=on(d<<2)|0,te||Dt(22807,22646,317,22826),Q=on(d<<5)|0,Q||Dt(22848,22646,321,22826),o[l>>2]=0,g=l+4|0,o[g>>2]=0,o[b>>2]=0,d=0,N=0,m=0,oe=0;e:for(;;){if(X=o[x>>2]|0,X){S=0,P=X;do{if(V=+G[P+8>>3],h=P,P=o[P+16>>2]|0,$=(P|0)==0,b=$?X:P,B=+G[b+8>>3],+Pe(+(V-B))>3.141592653589793){pe=14;break}S=S+(B-V)*(+G[h>>3]+ +G[b>>3])}while(!$);if((pe|0)==14){pe=0,S=0,h=X;do be=+G[h+8>>3],O=h+16|0,R=o[O>>2]|0,R=R|0?R:X,je=+G[R+8>>3],S=S+(+G[h>>3]+ +G[R>>3])*((je<0?je+6.283185307179586:je)-(be<0?be+6.283185307179586:be)),h=o[(h|0?O:x)>>2]|0;while(h|0)}S>0?(o[te+(N<<2)>>2]=x,N=N+1|0,b=m,h=oe):pe=19}else pe=19;if((pe|0)==19){pe=0;do if(d){if(h=d+8|0,o[h>>2]|0){pe=21;break e}if(d=as(1,12)|0,!d){pe=23;break e}o[h>>2]=d,b=d+4|0,P=d,h=oe}else if(oe){b=g,P=oe+8|0,h=x,d=l;break}else if(o[l>>2]|0){pe=27;break e}else{b=g,P=l,h=x,d=l;break}while(0);if(o[P>>2]=x,o[b>>2]=x,P=Q+(m<<5)|0,$=o[x>>2]|0,$){for(X=Q+(m<<5)+8|0,G[X>>3]=17976931348623157e292,oe=Q+(m<<5)+24|0,G[oe>>3]=17976931348623157e292,G[P>>3]=-17976931348623157e292,ne=Q+(m<<5)+16|0,G[ne>>3]=-17976931348623157e292,$e=17976931348623157e292,Me=-17976931348623157e292,b=0,ue=$,V=17976931348623157e292,Ie=17976931348623157e292,we=-17976931348623157e292,B=-17976931348623157e292;S=+G[ue>>3],be=+G[ue+8>>3],ue=o[ue+16>>2]|0,Te=(ue|0)==0,je=+G[(Te?$:ue)+8>>3],S<V&&(G[X>>3]=S,V=S),be<Ie&&(G[oe>>3]=be,Ie=be),S>we?G[P>>3]=S:S=we,be>B&&(G[ne>>3]=be,B=be),$e=be>0&be<$e?be:$e,Me=be<0&be>Me?be:Me,b=b|+Pe(+(be-je))>3.141592653589793,!Te;)we=S;b&&(G[ne>>3]=Me,G[oe>>3]=$e)}else o[P>>2]=0,o[P+4>>2]=0,o[P+8>>2]=0,o[P+12>>2]=0,o[P+16>>2]=0,o[P+20>>2]=0,o[P+24>>2]=0,o[P+28>>2]=0;b=m+1|0}if(O=x+8|0,x=o[O>>2]|0,o[O>>2]=0,x)m=b,oe=h;else{pe=45;break}}if((pe|0)==21)Dt(22624,22646,35,22658);else if((pe|0)==23)Dt(22678,22646,37,22658);else if((pe|0)==27)Dt(22721,22646,61,22744);else if((pe|0)==45){e:do if((N|0)>0){for(O=(b|0)==0,I=b<<2,R=(l|0)==0,E=0,h=0;;){if(v=o[te+(E<<2)>>2]|0,O)pe=73;else{if(m=on(I)|0,!m){pe=50;break}if(g=on(I)|0,!g){pe=52;break}t:do if(R)d=0;else{for(b=0,d=0,P=l;x=Q+(b<<5)|0,ys(o[P>>2]|0,x,o[v>>2]|0)|0?(o[m+(d<<2)>>2]=P,o[g+(d<<2)>>2]=x,Te=d+1|0):Te=d,P=o[P+8>>2]|0,P;)b=b+1|0,d=Te;if((Te|0)>0)if(x=o[m>>2]|0,(Te|0)==1)d=x;else for(ne=0,ue=-1,d=x,oe=x;;){for($=o[oe>>2]|0,x=0,P=0;b=o[o[m+(P<<2)>>2]>>2]|0,(b|0)==($|0)?X=x:X=x+((ys(b,o[g+(P<<2)>>2]|0,o[$>>2]|0)|0)&1)|0,P=P+1|0,(P|0)!=(Te|0);)x=X;if(b=(X|0)>(ue|0),d=b?oe:d,x=ne+1|0,(x|0)==(Te|0))break t;ne=x,ue=b?X:ue,oe=o[m+(x<<2)>>2]|0}else d=0}while(0);if(wn(m),wn(g),d){if(b=d+4|0,x=o[b>>2]|0,x)d=x+8|0;else if(o[d>>2]|0){pe=70;break}o[d>>2]=v,o[b>>2]=v}else pe=73}if((pe|0)==73){if(pe=0,h=o[v>>2]|0,h|0)do g=h,h=o[h+16>>2]|0,wn(g);while(h|0);wn(v),h=2}if(E=E+1|0,(E|0)>=(N|0)){le=h;break e}}(pe|0)==50?Dt(22863,22646,249,22882):(pe|0)==52?Dt(22901,22646,252,22882):(pe|0)==70&&Dt(22721,22646,61,22744)}else le=0;while(0);return wn(te),wn(Q),pe=le,pe|0}return 0}function ys(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0;if(!(yA(h,d)|0)||(h=mA(h)|0,$=+G[d>>3],x=+G[d+8>>3],x=h&x<0?x+6.283185307179586:x,l=o[l>>2]|0,!l))return l=0,l|0;if(h){h=0,d=l;e:for(;;){for(;P=+G[d>>3],V=+G[d+8>>3],d=d+16|0,X=o[d>>2]|0,X=X|0?X:l,S=+G[X>>3],b=+G[X+8>>3],P>S?(B=P,P=V):(B=S,S=P,P=b,b=V),!!($<S|$>B);)if(d=o[d>>2]|0,!d){d=22;break e}if(V=b<0?b+6.283185307179586:b,P=P<0?P+6.283185307179586:P,x=P==x|V==x?x+-2220446049250313e-31:x,V=V+($-S)/(B-S)*(P-V),(V<0?V+6.283185307179586:V)>x&&(h=h^1),d=o[d>>2]|0,!d){d=22;break}}if((d|0)==22)return h|0}else{h=0,d=l;e:for(;;){for(;P=+G[d>>3],V=+G[d+8>>3],d=d+16|0,X=o[d>>2]|0,X=X|0?X:l,S=+G[X>>3],b=+G[X+8>>3],P>S?(B=P,P=V):(B=S,S=P,P=b,b=V),!!($<S|$>B);)if(d=o[d>>2]|0,!d){d=22;break e}if(x=P==x|b==x?x+-2220446049250313e-31:x,b+($-S)/(B-S)*(P-b)>x&&(h=h^1),d=o[d>>2]|0,!d){d=22;break}}if((d|0)==22)return h|0}return 0}function Gt(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0;if(Me=Re,Re=Re+32|0,$e=Me+16|0,we=Me,S=It(l|0,h|0,52)|0,Ue()|0,S=S&15,ue=It(d|0,x|0,52)|0,Ue()|0,(S|0)!=(ue&15|0))return $e=1,Re=Me,$e|0;if($=It(l|0,h|0,45)|0,Ue()|0,$=$&127,X=It(d|0,x|0,45)|0,Ue()|0,X=X&127,ue=($|0)!=(X|0),ue){if(B=gA($,X)|0,(B|0)==7)return $e=2,Re=Me,$e|0;V=gA(X,$)|0,(V|0)==7?Dt(22925,22949,151,22959):(Te=B,P=V)}else Te=0,P=0;oe=An($)|0,ne=An(X)|0,o[$e>>2]=0,o[$e+4>>2]=0,o[$e+8>>2]=0,o[$e+12>>2]=0;do if(Te){if(X=o[4304+($*28|0)+(Te<<2)>>2]|0,B=(X|0)>0,ne)if(B){$=0,V=d,B=x;do V=_a(V,B)|0,B=Ue()|0,P=Ji(P)|0,(P|0)==1&&(P=Ji(1)|0),$=$+1|0;while(($|0)!=(X|0));X=P,$=V,V=B}else X=P,$=d,V=x;else if(B){$=0,V=d,B=x;do V=ss(V,B)|0,B=Ue()|0,P=Ji(P)|0,$=$+1|0;while(($|0)!=(X|0));X=P,$=V,V=B}else X=P,$=d,V=x;if(Rl($,V,$e)|0,ue||Dt(22972,22949,181,22959),B=(oe|0)!=0,P=(ne|0)!=0,B&P&&Dt(22999,22949,182,22959),B){if(P=_i(l,h)|0,ce[22032+(P*7|0)+Te>>0]|0){S=3;break}V=o[21200+(P*28|0)+(Te<<2)>>2]|0,$=V,Ie=26}else if(P){if(P=_i($,V)|0,ce[22032+(P*7|0)+X>>0]|0){S=4;break}$=0,V=o[21200+(X*28|0)+(P<<2)>>2]|0,Ie=26}else P=0;if((Ie|0)==26)if((V|0)<=-1&&Dt(23030,22949,212,22959),($|0)<=-1&&Dt(23053,22949,213,22959),(V|0)>0){B=$e+4|0,P=0;do Wo(B),P=P+1|0;while((P|0)!=(V|0));P=$}else P=$;if(o[we>>2]=0,o[we+4>>2]=0,o[we+8>>2]=0,_A(we,Te),S|0)for(;Mi(S)|0?pa(we):xo(we),(S|0)>1;)S=S+-1|0;if((P|0)>0){S=0;do Wo(we),S=S+1|0;while((S|0)!=(P|0))}Ie=$e+4|0,qn(Ie,we,Ie),ni(Ie),Ie=50}else if(Rl(d,x,$e)|0,(oe|0)!=0&(ne|0)!=0)if((X|0)!=($|0)&&Dt(23077,22949,243,22959),P=_i(l,h)|0,S=_i(d,x)|0,ce[22032+(P*7|0)+S>>0]|0)S=5;else if(P=o[21200+(P*28|0)+(S<<2)>>2]|0,(P|0)>0){B=$e+4|0,S=0;do Wo(B),S=S+1|0;while((S|0)!=(P|0));Ie=50}else Ie=50;else Ie=50;while(0);return(Ie|0)==50&&(S=$e+4|0,o[b>>2]=o[S>>2],o[b+4>>2]=o[S+4>>2],o[b+8>>2]=o[S+8>>2],S=0),$e=S,Re=Me,$e|0}function lu(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0;if(Te=Re,Re=Re+48|0,P=Te+36|0,B=Te+24|0,V=Te+12|0,$=Te,S=It(l|0,h|0,52)|0,Ue()|0,S=S&15,ne=It(l|0,h|0,45)|0,Ue()|0,ne=ne&127,X=An(ne)|0,Rt(S|0,0,52)|0,we=Ue()|0|134225919,Ie=x,o[Ie>>2]=-1,o[Ie+4>>2]=we,!S)return(o[d>>2]|0)>1||(o[d+4>>2]|0)>1||(o[d+8>>2]|0)>1||(b=XA(ne,vo(d)|0)|0,(b|0)==127)?(we=1,Re=Te,we|0):(ue=Rt(b|0,0,45)|0,Ie=Ue()|0,ne=x,Ie=o[ne+4>>2]&-1040385|Ie,we=x,o[we>>2]=o[ne>>2]|ue,o[we+4>>2]=Ie,we=0,Re=Te,we|0);for(o[P>>2]=o[d>>2],o[P+4>>2]=o[d+4>>2],o[P+8>>2]=o[d+8>>2];o[B>>2]=o[P>>2],o[B+4>>2]=o[P+4>>2],o[B+8>>2]=o[P+8>>2],Mi(S)|0?(Sl(P),o[V>>2]=o[P>>2],o[V+4>>2]=o[P+4>>2],o[V+8>>2]=o[P+8>>2],pa(V)):(Ho(P),o[V>>2]=o[P>>2],o[V+4>>2]=o[P+4>>2],o[V+8>>2]=o[P+8>>2],xo(V)),ks(B,V,$),ni($),Ie=x,$e=o[Ie>>2]|0,Ie=o[Ie+4>>2]|0,Me=(15-S|0)*3|0,d=Rt(7,0,Me|0)|0,Ie=Ie&~(Ue()|0),Me=Rt(vo($)|0,0,Me|0)|0,Ie=Ue()|0|Ie,we=x,o[we>>2]=Me|$e&~d,o[we+4>>2]=Ie,(S|0)>1;)S=S+-1|0;e:do if((o[P>>2]|0)<=1&&(o[P+4>>2]|0)<=1&&(o[P+8>>2]|0)<=1){S=vo(P)|0,B=XA(ne,S)|0,(B|0)==127?$=0:$=An(B)|0;t:do if(S){if(X){if(P=21408+((_i(l,h)|0)*28|0)+(S<<2)|0,P=o[P>>2]|0,(P|0)>0){d=0;do S=Ki(S)|0,d=d+1|0;while((d|0)!=(P|0))}if((S|0)==1){b=3;break e}d=XA(ne,S)|0,(d|0)==127&&Dt(23104,22949,376,23134),An(d)|0?Dt(23147,22949,377,23134):(ue=P,oe=S,b=d)}else ue=0,oe=S,b=B;if(V=o[4304+(ne*28|0)+(oe<<2)>>2]|0,(V|0)<=-1&&Dt(23178,22949,384,23134),!$){if((ue|0)<=-1&&Dt(23030,22949,417,23134),ue|0){P=x,S=0,d=o[P>>2]|0,P=o[P+4>>2]|0;do d=gs(d,P)|0,P=Ue()|0,Me=x,o[Me>>2]=d,o[Me+4>>2]=P,S=S+1|0;while((S|0)<(ue|0))}if((V|0)<=0){S=54;break}for(P=x,S=0,d=o[P>>2]|0,P=o[P+4>>2]|0;;)if(d=gs(d,P)|0,P=Ue()|0,Me=x,o[Me>>2]=d,o[Me+4>>2]=P,S=S+1|0,(S|0)==(V|0)){S=54;break t}}if(B=gA(b,ne)|0,(B|0)==7&&Dt(22925,22949,393,23134),S=x,d=o[S>>2]|0,S=o[S+4>>2]|0,(V|0)>0){P=0;do d=gs(d,S)|0,S=Ue()|0,Me=x,o[Me>>2]=d,o[Me+4>>2]=S,P=P+1|0;while((P|0)!=(V|0))}if(d=_i(d,S)|0,Me=jr(b)|0,d=o[(Me?21824:21616)+(B*28|0)+(d<<2)>>2]|0,(d|0)<=-1&&Dt(23030,22949,412,23134),!d)S=54;else{B=x,S=0,P=o[B>>2]|0,B=o[B+4>>2]|0;do P=zi(P,B)|0,B=Ue()|0,Me=x,o[Me>>2]=P,o[Me+4>>2]=B,S=S+1|0;while((S|0)<(d|0));S=54}}else if((X|0)!=0&($|0)!=0)if(Me=_i(l,h)|0,S=x,S=21408+(Me*28|0)+((_i(o[S>>2]|0,o[S+4>>2]|0)|0)<<2)|0,S=o[S>>2]|0,(S|0)<=-1&&Dt(23201,22949,433,23134),!S)b=B,S=55;else{P=x,b=0,d=o[P>>2]|0,P=o[P+4>>2]|0;do d=gs(d,P)|0,P=Ue()|0,Me=x,o[Me>>2]=d,o[Me+4>>2]=P,b=b+1|0;while((b|0)<(S|0));b=B,S=54}else b=B,S=54;while(0);if((S|0)==54&&$&&(S=55),(S|0)==55&&(Me=x,(_i(o[Me>>2]|0,o[Me+4>>2]|0)|0)==1)){b=4;break}Me=x,we=o[Me>>2]|0,Me=o[Me+4>>2]&-1040385,$e=Rt(b|0,0,45)|0,Me=Me|(Ue()|0),b=x,o[b>>2]=we|$e,o[b+4>>2]=Me,b=0}else b=2;while(0);return Me=b,Re=Te,Me|0}function wa(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0;return P=Re,Re=Re+16|0,S=P,l=Gt(l,h,d,x,S)|0,l||(Qo(S,b),l=0),Re=P,l|0}function Xo(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0;return b=Re,Re=Re+16|0,S=b,oc(d,S),x=lu(l,h,S,x)|0,Re=b,x|0}function Au(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0;return P=Re,Re=Re+32|0,b=P+12|0,S=P,!(Gt(l,h,l,h,b)|0)&&!(Gt(l,h,d,x,S)|0)?l=wo(b,S)|0:l=-1,Re=P,l|0}function $t(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0,P=0;return P=Re,Re=Re+32|0,b=P+12|0,S=P,!(Gt(l,h,l,h,b)|0)&&!(Gt(l,h,d,x,S)|0)?l=wo(b,S)|0:l=-1,Re=P,(l>>>31^1)+l|0}function bA(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0;if(m=Re,Re=Re+48|0,S=m+24|0,P=m+12|0,be=m,!(Gt(l,h,l,h,S)|0)&&!(Gt(l,h,d,x,P)|0)){if(je=wo(S,P)|0,(je|0)<0)return be=je,Re=m,be|0;for(o[S>>2]=0,o[S+4>>2]=0,o[S+8>>2]=0,o[P>>2]=0,o[P+4>>2]=0,o[P+8>>2]=0,Gt(l,h,l,h,S)|0,Gt(l,h,d,x,P)|0,eu(S),eu(P),je?(X=o[S>>2]|0,ue=+(je|0),we=S+4|0,oe=o[we>>2]|0,$e=S+8|0,ne=o[$e>>2]|0,Me=S,d=X,x=oe,S=ne,Te=+((o[P>>2]|0)-X|0)/ue,Ie=+((o[P+4>>2]|0)-oe|0)/ue,ue=+((o[P+8>>2]|0)-ne|0)/ue):(x=S+4|0,ne=S+8|0,we=x,$e=ne,Me=S,d=o[S>>2]|0,x=o[x>>2]|0,S=o[ne>>2]|0,Te=0,Ie=0,ue=0),o[be>>2]=d,ne=be+4|0,o[ne>>2]=x,oe=be+8|0,o[oe>>2]=S,X=0;;){V=+(X|0),g=Te*V+ +(d|0),B=Ie*V+ +(o[we>>2]|0),V=ue*V+ +(o[$e>>2]|0),x=~~+rl(+g),P=~~+rl(+B),d=~~+rl(+V),g=+Pe(+(+(x|0)-g)),B=+Pe(+(+(P|0)-B)),V=+Pe(+(+(d|0)-V));do if(g>B&g>V)x=0-(P+d)|0,S=P;else if($=0-x|0,B>V){S=$-d|0;break}else{S=P,d=$-P|0;break}while(0);if(o[be>>2]=x,o[ne>>2]=S,o[oe>>2]=d,Cl(be),lu(l,h,be,b+(X<<3)|0)|0,(X|0)==(je|0))break;X=X+1|0,d=o[Me>>2]|0}return be=0,Re=m,be|0}return be=-1,Re=m,be|0}function Ol(l,h){l=l|0,h=h|0;var d=0;if(!h)return d=1,d|0;d=l,l=1;do l=nn(h&1|0?d:1,l)|0,h=h>>1,d=nn(d,d)|0;while(h|0);return l|0}function EA(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0;if(!(yA(h,d)|0)||(h=mA(h)|0,ne=+G[d>>3],x=+G[d+8>>3],x=h&x<0?x+6.283185307179586:x,oe=o[l>>2]|0,(oe|0)<=0))return oe=0,oe|0;if(X=o[l+4>>2]|0,h){h=0,d=-1,l=0;e:for(;;){for($=l;P=+G[X+($<<4)>>3],V=+G[X+($<<4)+8>>3],l=(d+2|0)%(oe|0)|0,S=+G[X+(l<<4)>>3],b=+G[X+(l<<4)+8>>3],P>S?(B=P,P=V):(B=S,S=P,P=b,b=V),!!(ne<S|ne>B);)if(d=$+1|0,(d|0)<(oe|0))l=$,$=d,d=l;else{d=22;break e}if(V=b<0?b+6.283185307179586:b,P=P<0?P+6.283185307179586:P,x=P==x|V==x?x+-2220446049250313e-31:x,V=V+(ne-S)/(B-S)*(P-V),(V<0?V+6.283185307179586:V)>x&&(h=h^1),l=$+1|0,(l|0)>=(oe|0)){d=22;break}else d=$}if((d|0)==22)return h|0}else{h=0,d=-1,l=0;e:for(;;){for($=l;P=+G[X+($<<4)>>3],V=+G[X+($<<4)+8>>3],l=(d+2|0)%(oe|0)|0,S=+G[X+(l<<4)>>3],b=+G[X+(l<<4)+8>>3],P>S?(B=P,P=V):(B=S,S=P,P=b,b=V),!!(ne<S|ne>B);)if(d=$+1|0,(d|0)<(oe|0))l=$,$=d,d=l;else{d=22;break e}if(x=P==x|b==x?x+-2220446049250313e-31:x,b+(ne-S)/(B-S)*(P-b)>x&&(h=h^1),l=$+1|0,(l|0)>=(oe|0)){d=22;break}else d=$}if((d|0)==22)return h|0}return 0}function tl(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0;if(Te=o[l>>2]|0,!Te){o[h>>2]=0,o[h+4>>2]=0,o[h+8>>2]=0,o[h+12>>2]=0,o[h+16>>2]=0,o[h+20>>2]=0,o[h+24>>2]=0,o[h+28>>2]=0;return}if(Ie=h+8|0,G[Ie>>3]=17976931348623157e292,we=h+24|0,G[we>>3]=17976931348623157e292,G[h>>3]=-17976931348623157e292,$e=h+16|0,G[$e>>3]=-17976931348623157e292,!((Te|0)<=0)){for(ne=o[l+4>>2]|0,$=17976931348623157e292,X=-17976931348623157e292,oe=0,l=-1,S=17976931348623157e292,P=17976931348623157e292,V=-17976931348623157e292,x=-17976931348623157e292,ue=0;d=+G[ne+(ue<<4)>>3],B=+G[ne+(ue<<4)+8>>3],l=l+2|0,b=+G[ne+(((l|0)==(Te|0)?0:l)<<4)+8>>3],d<S&&(G[Ie>>3]=d,S=d),B<P&&(G[we>>3]=B,P=B),d>V?G[h>>3]=d:d=V,B>x&&(G[$e>>3]=B,x=B),$=B>0&B<$?B:$,X=B<0&B>X?B:X,oe=oe|+Pe(+(B-b))>3.141592653589793,l=ue+1|0,(l|0)!=(Te|0);)Me=ue,V=d,ue=l,l=Me;oe&&(G[$e>>3]=X,G[we>>3]=$)}}function qs(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0,g=0,v=0;if(Te=o[l>>2]|0,Te){if(Ie=h+8|0,G[Ie>>3]=17976931348623157e292,we=h+24|0,G[we>>3]=17976931348623157e292,G[h>>3]=-17976931348623157e292,$e=h+16|0,G[$e>>3]=-17976931348623157e292,(Te|0)>0){for(b=o[l+4>>2]|0,ne=17976931348623157e292,ue=-17976931348623157e292,x=0,d=-1,V=17976931348623157e292,$=17976931348623157e292,oe=-17976931348623157e292,P=-17976931348623157e292,Me=0;S=+G[b+(Me<<4)>>3],X=+G[b+(Me<<4)+8>>3],g=d+2|0,B=+G[b+(((g|0)==(Te|0)?0:g)<<4)+8>>3],S<V&&(G[Ie>>3]=S,V=S),X<$&&(G[we>>3]=X,$=X),S>oe?G[h>>3]=S:S=oe,X>P&&(G[$e>>3]=X,P=X),ne=X>0&X<ne?X:ne,ue=X<0&X>ue?X:ue,x=x|+Pe(+(X-B))>3.141592653589793,d=Me+1|0,(d|0)!=(Te|0);)g=Me,oe=S,Me=d,d=g;x&&(G[$e>>3]=ue,G[we>>3]=ne)}}else o[h>>2]=0,o[h+4>>2]=0,o[h+8>>2]=0,o[h+12>>2]=0,o[h+16>>2]=0,o[h+20>>2]=0,o[h+24>>2]=0,o[h+28>>2]=0;if(g=l+8|0,d=o[g>>2]|0,!((d|0)<=0)){m=l+12|0,be=0;do if(b=o[m>>2]|0,x=be,be=be+1|0,we=h+(be<<5)|0,$e=o[b+(x<<3)>>2]|0,$e){if(Me=h+(be<<5)+8|0,G[Me>>3]=17976931348623157e292,l=h+(be<<5)+24|0,G[l>>3]=17976931348623157e292,G[we>>3]=-17976931348623157e292,je=h+(be<<5)+16|0,G[je>>3]=-17976931348623157e292,($e|0)>0){for(Te=o[b+(x<<3)+4>>2]|0,ne=17976931348623157e292,ue=-17976931348623157e292,b=0,x=-1,Ie=0,V=17976931348623157e292,$=17976931348623157e292,X=-17976931348623157e292,P=-17976931348623157e292;S=+G[Te+(Ie<<4)>>3],oe=+G[Te+(Ie<<4)+8>>3],x=x+2|0,B=+G[Te+(((x|0)==($e|0)?0:x)<<4)+8>>3],S<V&&(G[Me>>3]=S,V=S),oe<$&&(G[l>>3]=oe,$=oe),S>X?G[we>>3]=S:S=X,oe>P&&(G[je>>3]=oe,P=oe),ne=oe>0&oe<ne?oe:ne,ue=oe<0&oe>ue?oe:ue,b=b|+Pe(+(oe-B))>3.141592653589793,x=Ie+1|0,(x|0)!=($e|0);)v=Ie,Ie=x,X=S,x=v;b&&(G[je>>3]=ue,G[l>>3]=ne)}}else o[we>>2]=0,o[we+4>>2]=0,o[we+8>>2]=0,o[we+12>>2]=0,o[we+16>>2]=0,o[we+20>>2]=0,o[we+24>>2]=0,o[we+28>>2]=0,d=o[g>>2]|0;while((be|0)<(d|0))}}function uu(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0;if(!(EA(l,h,d)|0))return b=0,b|0;if(b=l+8|0,(o[b>>2]|0)<=0)return b=1,b|0;for(x=l+12|0,l=0;;){if(S=l,l=l+1|0,EA((o[x>>2]|0)+(S<<3)|0,h+(l<<5)|0,d)|0){l=0,x=6;break}if((l|0)>=(o[b>>2]|0)){l=1,x=6;break}}return(x|0)==6?l|0:0}function dh(){return 8}function fc(){return 16}function cu(){return 168}function hu(){return 8}function fu(){return 16}function Zs(){return 12}function Hi(){return 8}function So(l){l=l|0;var h=0,d=0;return d=+G[l>>3],h=+G[l+8>>3],+ +Le(+(d*d+h*h))}function du(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0;$=+G[l>>3],V=+G[h>>3]-$,B=+G[l+8>>3],P=+G[h+8>>3]-B,oe=+G[d>>3],S=+G[x>>3]-oe,ne=+G[d+8>>3],X=+G[x+8>>3]-ne,S=(S*(B-ne)-($-oe)*X)/(V*X-P*S),G[b>>3]=$+V*S,G[b+8>>3]=B+P*S}function ba(l,h){return l=l|0,h=h|0,+G[l>>3]!=+G[h>>3]?(h=0,h|0):(h=+G[l+8>>3]==+G[h+8>>3],h|0)}function Wr(l,h){l=l|0,h=h|0;var d=0,x=0,b=0;return b=+G[l>>3]-+G[h>>3],x=+G[l+8>>3]-+G[h+8>>3],d=+G[l+16>>3]-+G[h+16>>3],+(b*b+x*x+d*d)}function Fl(l,h){l=l|0,h=h|0;var d=0,x=0,b=0;d=+G[l>>3],x=+lt(+d),d=+Qe(+d),G[h+16>>3]=d,d=+G[l+8>>3],b=x*+lt(+d),G[h>>3]=b,d=x*+Qe(+d),G[h+8>>3]=d}function dc(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0;if($=Re,Re=Re+32|0,b=$+16|0,S=$,Xa(l,h,b),P=ps(l,h)|0,V=_i(l,h)|0,dA(P,S),h=pA(P,o[b>>2]|0)|0,!(An(P)|0))return V=h,Re=$,V|0;do switch(P|0){case 4:{l=0,d=14;break}case 14:{l=1,d=14;break}case 24:{l=2,d=14;break}case 38:{l=3,d=14;break}case 49:{l=4,d=14;break}case 58:{l=5,d=14;break}case 63:{l=6,d=14;break}case 72:{l=7,d=14;break}case 83:{l=8,d=14;break}case 97:{l=9,d=14;break}case 107:{l=10,d=14;break}case 117:{l=11,d=14;break}default:B=0,x=0}while(0);return(d|0)==14&&(B=o[22096+(l*24|0)+8>>2]|0,x=o[22096+(l*24|0)+16>>2]|0),l=o[b>>2]|0,(l|0)!=(o[S>>2]|0)&&(P=jr(P)|0,l=o[b>>2]|0,P|(l|0)==(x|0)&&(h=(h+1|0)%6|0)),(V|0)==3&(l|0)==(x|0)?(V=(h+5|0)%6|0,Re=$,V|0):(V|0)==5&(l|0)==(B|0)?(V=(h+1|0)%6|0,Re=$,V|0):(V=h,Re=$,V|0)}function _s(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;return x=$r(l,h)|0,(d+-1|0)>>>0>5||(b=(x|0)!=0,(d|0)==1&b)?(d=-1,d|0):(x=dc(l,h)|0,b?(d=(5-x+(o[22384+(d<<2)>>2]|0)|0)%5|0,d|0):(d=(6-x+(o[22416+(d<<2)>>2]|0)|0)%6|0,d|0))}function Fr(l,h,d){l=l|0,h=h|0,d=d|0;var x=0;(h|0)>0?(x=as(h,4)|0,o[l>>2]=x,x||Dt(23230,23253,40,23267)):o[l>>2]=0,o[l+4>>2]=h,o[l+8>>2]=0,o[l+12>>2]=d}function nl(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0;b=l+4|0,S=l+12|0,P=l+8|0;e:for(;;){for(d=o[b>>2]|0,h=0;;){if((h|0)>=(d|0))break e;if(x=o[l>>2]|0,B=o[x+(h<<2)>>2]|0,!B)h=h+1|0;else break}h=x+(~~(+Pe(+(+Ze(10,+ +(15-(o[S>>2]|0)|0))*(+G[B>>3]+ +G[B+8>>3])))%+(d|0))>>>0<<2)|0,d=o[h>>2]|0;t:do if(d|0){if(x=B+32|0,(d|0)==(B|0))o[h>>2]=o[x>>2];else{if(d=d+32|0,h=o[d>>2]|0,!h)break;for(;(h|0)!=(B|0);)if(d=h+32|0,h=o[d>>2]|0,!h)break t;o[d>>2]=o[x>>2]}wn(B),o[P>>2]=(o[P>>2]|0)+-1}while(0)}wn(o[l>>2]|0)}function Nl(l){l=l|0;var h=0,d=0,x=0;for(x=o[l+4>>2]|0,d=0;;){if((d|0)>=(x|0)){h=0,d=4;break}if(h=o[(o[l>>2]|0)+(d<<2)>>2]|0,!h)d=d+1|0;else{d=4;break}}return(d|0)==4?h|0:0}function pu(l,h){l=l|0,h=h|0;var d=0,x=0,b=0,S=0;if(d=~~(+Pe(+(+Ze(10,+ +(15-(o[l+12>>2]|0)|0))*(+G[h>>3]+ +G[h+8>>3])))%+(o[l+4>>2]|0))>>>0,d=(o[l>>2]|0)+(d<<2)|0,x=o[d>>2]|0,!x)return S=1,S|0;S=h+32|0;do if((x|0)!=(h|0)){if(d=o[x+32>>2]|0,!d)return S=1,S|0;for(b=d;;){if((b|0)==(h|0)){b=8;break}if(d=o[b+32>>2]|0,d)x=b,b=d;else{d=1,b=10;break}}if((b|0)==8){o[x+32>>2]=o[S>>2];break}else if((b|0)==10)return d|0}else o[d>>2]=o[S>>2];while(0);return wn(h),S=l+8|0,o[S>>2]=(o[S>>2]|0)+-1,S=0,S|0}function pc(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0;S=on(40)|0,S||Dt(23283,23253,98,23296),o[S>>2]=o[h>>2],o[S+4>>2]=o[h+4>>2],o[S+8>>2]=o[h+8>>2],o[S+12>>2]=o[h+12>>2],b=S+16|0,o[b>>2]=o[d>>2],o[b+4>>2]=o[d+4>>2],o[b+8>>2]=o[d+8>>2],o[b+12>>2]=o[d+12>>2],o[S+32>>2]=0,b=~~(+Pe(+(+Ze(10,+ +(15-(o[l+12>>2]|0)|0))*(+G[h>>3]+ +G[h+8>>3])))%+(o[l+4>>2]|0))>>>0,b=(o[l>>2]|0)+(b<<2)|0,x=o[b>>2]|0;do if(!x)o[b>>2]=S;else{for(;!($s(x,h)|0&&$s(x+16|0,d)|0);)if(b=o[x+32>>2]|0,x=b|0?b:x,!(o[x+32>>2]|0)){P=10;break}if((P|0)==10){o[x+32>>2]=S;break}return wn(S),P=x,P|0}while(0);return P=l+8|0,o[P>>2]=(o[P>>2]|0)+1,P=S,P|0}function gu(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0;if(b=~~(+Pe(+(+Ze(10,+ +(15-(o[l+12>>2]|0)|0))*(+G[h>>3]+ +G[h+8>>3])))%+(o[l+4>>2]|0))>>>0,b=o[(o[l>>2]|0)+(b<<2)>>2]|0,!b)return d=0,d|0;if(!d){for(l=b;;){if($s(l,h)|0){x=10;break}if(l=o[l+32>>2]|0,!l){l=0,x=10;break}}if((x|0)==10)return l|0}for(l=b;;){if($s(l,h)|0&&$s(l+16|0,d)|0){x=10;break}if(l=o[l+32>>2]|0,!l){l=0,x=10;break}}return(x|0)==10?l|0:0}function gc(l,h){l=l|0,h=h|0;var d=0;if(d=~~(+Pe(+(+Ze(10,+ +(15-(o[l+12>>2]|0)|0))*(+G[h>>3]+ +G[h+8>>3])))%+(o[l+4>>2]|0))>>>0,l=o[(o[l>>2]|0)+(d<<2)>>2]|0,!l)return d=0,d|0;for(;;){if($s(l,h)|0){h=5;break}if(l=o[l+32>>2]|0,!l){l=0,h=5;break}}return(h|0)==5?l|0:0}function Pr(){return 23312}function Ul(l){return l=+l,+ +c(+l)}function sn(l){return l=+l,~~+Ul(l)|0}function on(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0,Ie=0,we=0,$e=0,Me=0,je=0,be=0,m=0;m=Re,Re=Re+16|0,ne=m;do if(l>>>0<245){if($=l>>>0<11?16:l+11&-8,l=$>>>3,oe=o[5829]|0,d=oe>>>l,d&3|0)return h=(d&1^1)+l|0,l=23356+(h<<1<<2)|0,d=l+8|0,x=o[d>>2]|0,b=x+8|0,S=o[b>>2]|0,(S|0)==(l|0)?o[5829]=oe&~(1<<h):(o[S+12>>2]=l,o[d>>2]=S),be=h<<3,o[x+4>>2]=be|3,be=x+be+4|0,o[be>>2]=o[be>>2]|1,be=b,Re=m,be|0;if(X=o[5831]|0,$>>>0>X>>>0){if(d|0)return h=2<<l,h=d<<l&(h|0-h),h=(h&0-h)+-1|0,B=h>>>12&16,h=h>>>B,d=h>>>5&8,h=h>>>d,S=h>>>2&4,h=h>>>S,l=h>>>1&2,h=h>>>l,x=h>>>1&1,x=(d|B|S|l|x)+(h>>>x)|0,h=23356+(x<<1<<2)|0,l=h+8|0,S=o[l>>2]|0,B=S+8|0,d=o[B>>2]|0,(d|0)==(h|0)?(l=oe&~(1<<x),o[5829]=l):(o[d+12>>2]=h,o[l>>2]=d,l=oe),be=x<<3,P=be-$|0,o[S+4>>2]=$|3,b=S+$|0,o[b+4>>2]=P|1,o[S+be>>2]=P,X|0&&(x=o[5834]|0,h=X>>>3,d=23356+(h<<1<<2)|0,h=1<<h,l&h?(l=d+8|0,h=o[l>>2]|0):(o[5829]=l|h,h=d,l=d+8|0),o[l>>2]=x,o[h+12>>2]=x,o[x+8>>2]=h,o[x+12>>2]=d),o[5831]=P,o[5834]=b,be=B,Re=m,be|0;if(S=o[5830]|0,S){for(d=(S&0-S)+-1|0,b=d>>>12&16,d=d>>>b,x=d>>>5&8,d=d>>>x,P=d>>>2&4,d=d>>>P,B=d>>>1&2,d=d>>>B,V=d>>>1&1,V=o[23620+((x|b|P|B|V)+(d>>>V)<<2)>>2]|0,d=V,B=V,V=(o[V+4>>2]&-8)-$|0;l=o[d+16>>2]|0,!(!l&&(l=o[d+20>>2]|0,!l));)P=(o[l+4>>2]&-8)-$|0,b=P>>>0<V>>>0,d=l,B=b?l:B,V=b?P:V;if(P=B+$|0,P>>>0>B>>>0){b=o[B+24>>2]|0,h=o[B+12>>2]|0;do if((h|0)==(B|0)){if(l=B+20|0,h=o[l>>2]|0,!h&&(l=B+16|0,h=o[l>>2]|0,!h)){d=0;break}for(;;)if(x=h+20|0,d=o[x>>2]|0,d)h=d,l=x;else if(x=h+16|0,d=o[x>>2]|0,d)h=d,l=x;else break;o[l>>2]=0,d=h}else d=o[B+8>>2]|0,o[d+12>>2]=h,o[h+8>>2]=d,d=h;while(0);do if(b|0){if(h=o[B+28>>2]|0,l=23620+(h<<2)|0,(B|0)==(o[l>>2]|0)){if(o[l>>2]=d,!d){o[5830]=S&~(1<<h);break}}else if(be=b+16|0,o[((o[be>>2]|0)==(B|0)?be:b+20|0)>>2]=d,!d)break;o[d+24>>2]=b,h=o[B+16>>2]|0,h|0&&(o[d+16>>2]=h,o[h+24>>2]=d),h=o[B+20>>2]|0,h|0&&(o[d+20>>2]=h,o[h+24>>2]=d)}while(0);return V>>>0<16?(be=V+$|0,o[B+4>>2]=be|3,be=B+be+4|0,o[be>>2]=o[be>>2]|1):(o[B+4>>2]=$|3,o[P+4>>2]=V|1,o[P+V>>2]=V,X|0&&(x=o[5834]|0,h=X>>>3,d=23356+(h<<1<<2)|0,h=1<<h,h&oe?(l=d+8|0,h=o[l>>2]|0):(o[5829]=h|oe,h=d,l=d+8|0),o[l>>2]=x,o[h+12>>2]=x,o[x+8>>2]=h,o[x+12>>2]=d),o[5831]=V,o[5834]=P),be=B+8|0,Re=m,be|0}else oe=$}else oe=$}else oe=$}else if(l>>>0<=4294967231)if(l=l+11|0,$=l&-8,x=o[5830]|0,x){b=0-$|0,l=l>>>8,l?$>>>0>16777215?V=31:(oe=(l+1048320|0)>>>16&8,Ie=l<<oe,B=(Ie+520192|0)>>>16&4,Ie=Ie<<B,V=(Ie+245760|0)>>>16&2,V=14-(B|oe|V)+(Ie<<V>>>15)|0,V=$>>>(V+7|0)&1|V<<1):V=0,d=o[23620+(V<<2)>>2]|0;e:do if(!d)d=0,l=0,Ie=61;else for(l=0,B=$<<((V|0)==31?0:25-(V>>>1)|0),S=0;;){if(P=(o[d+4>>2]&-8)-$|0,P>>>0<b>>>0)if(P)l=d,b=P;else{l=d,b=0,Ie=65;break e}if(Ie=o[d+20>>2]|0,d=o[d+16+(B>>>31<<2)>>2]|0,S=(Ie|0)==0|(Ie|0)==(d|0)?S:Ie,d)B=B<<1;else{d=S,Ie=61;break}}while(0);if((Ie|0)==61){if((d|0)==0&(l|0)==0){if(l=2<<V,l=(l|0-l)&x,!l){oe=$;break}oe=(l&0-l)+-1|0,P=oe>>>12&16,oe=oe>>>P,S=oe>>>5&8,oe=oe>>>S,B=oe>>>2&4,oe=oe>>>B,V=oe>>>1&2,oe=oe>>>V,d=oe>>>1&1,l=0,d=o[23620+((S|P|B|V|d)+(oe>>>d)<<2)>>2]|0}d?Ie=65:(B=l,P=b)}if((Ie|0)==65)for(S=d;;)if(oe=(o[S+4>>2]&-8)-$|0,d=oe>>>0<b>>>0,b=d?oe:b,l=d?S:l,d=o[S+16>>2]|0,d||(d=o[S+20>>2]|0),d)S=d;else{B=l,P=b;break}if(B|0&&P>>>0<((o[5831]|0)-$|0)>>>0&&(X=B+$|0,X>>>0>B>>>0)){S=o[B+24>>2]|0,h=o[B+12>>2]|0;do if((h|0)==(B|0)){if(l=B+20|0,h=o[l>>2]|0,!h&&(l=B+16|0,h=o[l>>2]|0,!h)){h=0;break}for(;;)if(b=h+20|0,d=o[b>>2]|0,d)h=d,l=b;else if(b=h+16|0,d=o[b>>2]|0,d)h=d,l=b;else break;o[l>>2]=0}else be=o[B+8>>2]|0,o[be+12>>2]=h,o[h+8>>2]=be;while(0);do if(S){if(l=o[B+28>>2]|0,d=23620+(l<<2)|0,(B|0)==(o[d>>2]|0)){if(o[d>>2]=h,!h){x=x&~(1<<l),o[5830]=x;break}}else if(be=S+16|0,o[((o[be>>2]|0)==(B|0)?be:S+20|0)>>2]=h,!h)break;o[h+24>>2]=S,l=o[B+16>>2]|0,l|0&&(o[h+16>>2]=l,o[l+24>>2]=h),l=o[B+20>>2]|0,l&&(o[h+20>>2]=l,o[l+24>>2]=h)}while(0);e:do if(P>>>0<16)be=P+$|0,o[B+4>>2]=be|3,be=B+be+4|0,o[be>>2]=o[be>>2]|1;else{if(o[B+4>>2]=$|3,o[X+4>>2]=P|1,o[X+P>>2]=P,h=P>>>3,P>>>0<256){d=23356+(h<<1<<2)|0,l=o[5829]|0,h=1<<h,l&h?(l=d+8|0,h=o[l>>2]|0):(o[5829]=l|h,h=d,l=d+8|0),o[l>>2]=X,o[h+12>>2]=X,o[X+8>>2]=h,o[X+12>>2]=d;break}if(h=P>>>8,h?P>>>0>16777215?d=31:(je=(h+1048320|0)>>>16&8,be=h<<je,Me=(be+520192|0)>>>16&4,be=be<<Me,d=(be+245760|0)>>>16&2,d=14-(Me|je|d)+(be<<d>>>15)|0,d=P>>>(d+7|0)&1|d<<1):d=0,h=23620+(d<<2)|0,o[X+28>>2]=d,l=X+16|0,o[l+4>>2]=0,o[l>>2]=0,l=1<<d,!(x&l)){o[5830]=x|l,o[h>>2]=X,o[X+24>>2]=h,o[X+12>>2]=X,o[X+8>>2]=X;break}h=o[h>>2]|0;t:do if((o[h+4>>2]&-8|0)!=(P|0)){for(x=P<<((d|0)==31?0:25-(d>>>1)|0);d=h+16+(x>>>31<<2)|0,l=o[d>>2]|0,!!l;)if((o[l+4>>2]&-8|0)==(P|0)){h=l;break t}else x=x<<1,h=l;o[d>>2]=X,o[X+24>>2]=h,o[X+12>>2]=X,o[X+8>>2]=X;break e}while(0);je=h+8|0,be=o[je>>2]|0,o[be+12>>2]=X,o[je>>2]=X,o[X+8>>2]=be,o[X+12>>2]=h,o[X+24>>2]=0}while(0);return be=B+8|0,Re=m,be|0}else oe=$}else oe=$;else oe=-1;while(0);if(d=o[5831]|0,d>>>0>=oe>>>0)return h=d-oe|0,l=o[5834]|0,h>>>0>15?(be=l+oe|0,o[5834]=be,o[5831]=h,o[be+4>>2]=h|1,o[l+d>>2]=h,o[l+4>>2]=oe|3):(o[5831]=0,o[5834]=0,o[l+4>>2]=d|3,be=l+d+4|0,o[be>>2]=o[be>>2]|1),be=l+8|0,Re=m,be|0;if(P=o[5832]|0,P>>>0>oe>>>0)return Me=P-oe|0,o[5832]=Me,be=o[5835]|0,je=be+oe|0,o[5835]=je,o[je+4>>2]=Me|1,o[be+4>>2]=oe|3,be=be+8|0,Re=m,be|0;if(o[5947]|0?l=o[5949]|0:(o[5949]=4096,o[5948]=4096,o[5950]=-1,o[5951]=-1,o[5952]=0,o[5940]=0,o[5947]=ne&-16^1431655768,l=4096),B=oe+48|0,V=oe+47|0,S=l+V|0,b=0-l|0,$=S&b,$>>>0<=oe>>>0||(l=o[5939]|0,l|0&&(X=o[5937]|0,ne=X+$|0,ne>>>0<=X>>>0|ne>>>0>l>>>0)))return be=0,Re=m,be|0;e:do if(o[5940]&4)h=0,Ie=143;else{d=o[5835]|0;t:do if(d){for(x=23764;ne=o[x>>2]|0,!(ne>>>0<=d>>>0&&(ne+(o[x+4>>2]|0)|0)>>>0>d>>>0);)if(l=o[x+8>>2]|0,l)x=l;else{Ie=128;break t}if(h=S-P&b,h>>>0<2147483647)if(l=_(h|0)|0,(l|0)==((o[x>>2]|0)+(o[x+4>>2]|0)|0)){if((l|0)!=-1){P=h,S=l,Ie=145;break e}}else x=l,Ie=136;else h=0}else Ie=128;while(0);do if((Ie|0)==128)if(d=_(0)|0,(d|0)!=-1&&(h=d,ue=o[5948]|0,Te=ue+-1|0,h=(Te&h|0?(Te+h&0-ue)-h|0:0)+$|0,ue=o[5937]|0,Te=h+ue|0,h>>>0>oe>>>0&h>>>0<2147483647)){if(ne=o[5939]|0,ne|0&&Te>>>0<=ue>>>0|Te>>>0>ne>>>0){h=0;break}if(l=_(h|0)|0,(l|0)==(d|0)){P=h,S=d,Ie=145;break e}else x=l,Ie=136}else h=0;while(0);do if((Ie|0)==136){if(d=0-h|0,!(B>>>0>h>>>0&(h>>>0<2147483647&(x|0)!=-1)))if((x|0)==-1){h=0;break}else{P=h,S=x,Ie=145;break e}if(l=o[5949]|0,l=V-h+l&0-l,l>>>0>=2147483647){P=h,S=x,Ie=145;break e}if((_(l|0)|0)==-1){_(d|0)|0,h=0;break}else{P=l+h|0,S=x,Ie=145;break e}}while(0);o[5940]=o[5940]|4,Ie=143}while(0);if((Ie|0)==143&&$>>>0<2147483647&&(Me=_($|0)|0,Te=_(0)|0,we=Te-Me|0,$e=we>>>0>(oe+40|0)>>>0,!((Me|0)==-1|$e^1|Me>>>0<Te>>>0&((Me|0)!=-1&(Te|0)!=-1)^1))&&(P=$e?we:h,S=Me,Ie=145),(Ie|0)==145){h=(o[5937]|0)+P|0,o[5937]=h,h>>>0>(o[5938]|0)>>>0&&(o[5938]=h),V=o[5835]|0;e:do if(V){for(h=23764;;){if(l=o[h>>2]|0,d=o[h+4>>2]|0,(S|0)==(l+d|0)){Ie=154;break}if(x=o[h+8>>2]|0,x)h=x;else break}if((Ie|0)==154&&(je=h+4|0,(o[h+12>>2]&8|0)==0)&&S>>>0>V>>>0&l>>>0<=V>>>0){o[je>>2]=d+P,be=(o[5832]|0)+P|0,Me=V+8|0,Me=Me&7|0?0-Me&7:0,je=V+Me|0,Me=be-Me|0,o[5835]=je,o[5832]=Me,o[je+4>>2]=Me|1,o[V+be+4>>2]=40,o[5836]=o[5951];break}for(S>>>0<(o[5833]|0)>>>0&&(o[5833]=S),d=S+P|0,h=23764;;){if((o[h>>2]|0)==(d|0)){Ie=162;break}if(l=o[h+8>>2]|0,l)h=l;else break}if((Ie|0)==162&&!(o[h+12>>2]&8|0)){o[h>>2]=S,X=h+4|0,o[X>>2]=(o[X>>2]|0)+P,X=S+8|0,X=S+(X&7|0?0-X&7:0)|0,h=d+8|0,h=d+(h&7|0?0-h&7:0)|0,$=X+oe|0,B=h-X-oe|0,o[X+4>>2]=oe|3;t:do if((V|0)==(h|0))be=(o[5832]|0)+B|0,o[5832]=be,o[5835]=$,o[$+4>>2]=be|1;else{if((o[5834]|0)==(h|0)){be=(o[5831]|0)+B|0,o[5831]=be,o[5834]=$,o[$+4>>2]=be|1,o[$+be>>2]=be;break}if(l=o[h+4>>2]|0,(l&3|0)==1){P=l&-8,x=l>>>3;n:do if(l>>>0<256)if(l=o[h+8>>2]|0,d=o[h+12>>2]|0,(d|0)==(l|0)){o[5829]=o[5829]&~(1<<x);break}else{o[l+12>>2]=d,o[d+8>>2]=l;break}else{S=o[h+24>>2]|0,l=o[h+12>>2]|0;do if((l|0)==(h|0)){if(d=h+16|0,x=d+4|0,l=o[x>>2]|0,l)d=x;else if(l=o[d>>2]|0,!l){l=0;break}for(;;)if(b=l+20|0,x=o[b>>2]|0,x)l=x,d=b;else if(b=l+16|0,x=o[b>>2]|0,x)l=x,d=b;else break;o[d>>2]=0}else be=o[h+8>>2]|0,o[be+12>>2]=l,o[l+8>>2]=be;while(0);if(!S)break;d=o[h+28>>2]|0,x=23620+(d<<2)|0;do if((o[x>>2]|0)!=(h|0)){if(be=S+16|0,o[((o[be>>2]|0)==(h|0)?be:S+20|0)>>2]=l,!l)break n}else{if(o[x>>2]=l,l|0)break;o[5830]=o[5830]&~(1<<d);break n}while(0);if(o[l+24>>2]=S,d=h+16|0,x=o[d>>2]|0,x|0&&(o[l+16>>2]=x,o[x+24>>2]=l),d=o[d+4>>2]|0,!d)break;o[l+20>>2]=d,o[d+24>>2]=l}while(0);h=h+P|0,b=P+B|0}else b=B;if(h=h+4|0,o[h>>2]=o[h>>2]&-2,o[$+4>>2]=b|1,o[$+b>>2]=b,h=b>>>3,b>>>0<256){d=23356+(h<<1<<2)|0,l=o[5829]|0,h=1<<h,l&h?(l=d+8|0,h=o[l>>2]|0):(o[5829]=l|h,h=d,l=d+8|0),o[l>>2]=$,o[h+12>>2]=$,o[$+8>>2]=h,o[$+12>>2]=d;break}h=b>>>8;do if(!h)x=0;else{if(b>>>0>16777215){x=31;break}je=(h+1048320|0)>>>16&8,be=h<<je,Me=(be+520192|0)>>>16&4,be=be<<Me,x=(be+245760|0)>>>16&2,x=14-(Me|je|x)+(be<<x>>>15)|0,x=b>>>(x+7|0)&1|x<<1}while(0);if(h=23620+(x<<2)|0,o[$+28>>2]=x,l=$+16|0,o[l+4>>2]=0,o[l>>2]=0,l=o[5830]|0,d=1<<x,!(l&d)){o[5830]=l|d,o[h>>2]=$,o[$+24>>2]=h,o[$+12>>2]=$,o[$+8>>2]=$;break}h=o[h>>2]|0;n:do if((o[h+4>>2]&-8|0)!=(b|0)){for(x=b<<((x|0)==31?0:25-(x>>>1)|0);d=h+16+(x>>>31<<2)|0,l=o[d>>2]|0,!!l;)if((o[l+4>>2]&-8|0)==(b|0)){h=l;break n}else x=x<<1,h=l;o[d>>2]=$,o[$+24>>2]=h,o[$+12>>2]=$,o[$+8>>2]=$;break t}while(0);je=h+8|0,be=o[je>>2]|0,o[be+12>>2]=$,o[je>>2]=$,o[$+8>>2]=be,o[$+12>>2]=h,o[$+24>>2]=0}while(0);return be=X+8|0,Re=m,be|0}for(h=23764;l=o[h>>2]|0,!(l>>>0<=V>>>0&&(be=l+(o[h+4>>2]|0)|0,be>>>0>V>>>0));)h=o[h+8>>2]|0;b=be+-47|0,l=b+8|0,l=b+(l&7|0?0-l&7:0)|0,b=V+16|0,l=l>>>0<b>>>0?V:l,h=l+8|0,d=P+-40|0,Me=S+8|0,Me=Me&7|0?0-Me&7:0,je=S+Me|0,Me=d-Me|0,o[5835]=je,o[5832]=Me,o[je+4>>2]=Me|1,o[S+d+4>>2]=40,o[5836]=o[5951],d=l+4|0,o[d>>2]=27,o[h>>2]=o[5941],o[h+4>>2]=o[5942],o[h+8>>2]=o[5943],o[h+12>>2]=o[5944],o[5941]=S,o[5942]=P,o[5944]=0,o[5943]=h,h=l+24|0;do je=h,h=h+4|0,o[h>>2]=7;while((je+8|0)>>>0<be>>>0);if((l|0)!=(V|0)){if(S=l-V|0,o[d>>2]=o[d>>2]&-2,o[V+4>>2]=S|1,o[l>>2]=S,h=S>>>3,S>>>0<256){d=23356+(h<<1<<2)|0,l=o[5829]|0,h=1<<h,l&h?(l=d+8|0,h=o[l>>2]|0):(o[5829]=l|h,h=d,l=d+8|0),o[l>>2]=V,o[h+12>>2]=V,o[V+8>>2]=h,o[V+12>>2]=d;break}if(h=S>>>8,h?S>>>0>16777215?x=31:(je=(h+1048320|0)>>>16&8,be=h<<je,Me=(be+520192|0)>>>16&4,be=be<<Me,x=(be+245760|0)>>>16&2,x=14-(Me|je|x)+(be<<x>>>15)|0,x=S>>>(x+7|0)&1|x<<1):x=0,d=23620+(x<<2)|0,o[V+28>>2]=x,o[V+20>>2]=0,o[b>>2]=0,h=o[5830]|0,l=1<<x,!(h&l)){o[5830]=h|l,o[d>>2]=V,o[V+24>>2]=d,o[V+12>>2]=V,o[V+8>>2]=V;break}h=o[d>>2]|0;t:do if((o[h+4>>2]&-8|0)!=(S|0)){for(x=S<<((x|0)==31?0:25-(x>>>1)|0);d=h+16+(x>>>31<<2)|0,l=o[d>>2]|0,!!l;)if((o[l+4>>2]&-8|0)==(S|0)){h=l;break t}else x=x<<1,h=l;o[d>>2]=V,o[V+24>>2]=h,o[V+12>>2]=V,o[V+8>>2]=V;break e}while(0);je=h+8|0,be=o[je>>2]|0,o[be+12>>2]=V,o[je>>2]=V,o[V+8>>2]=be,o[V+12>>2]=h,o[V+24>>2]=0}}else be=o[5833]|0,(be|0)==0|S>>>0<be>>>0&&(o[5833]=S),o[5941]=S,o[5942]=P,o[5944]=0,o[5838]=o[5947],o[5837]=-1,o[5842]=23356,o[5841]=23356,o[5844]=23364,o[5843]=23364,o[5846]=23372,o[5845]=23372,o[5848]=23380,o[5847]=23380,o[5850]=23388,o[5849]=23388,o[5852]=23396,o[5851]=23396,o[5854]=23404,o[5853]=23404,o[5856]=23412,o[5855]=23412,o[5858]=23420,o[5857]=23420,o[5860]=23428,o[5859]=23428,o[5862]=23436,o[5861]=23436,o[5864]=23444,o[5863]=23444,o[5866]=23452,o[5865]=23452,o[5868]=23460,o[5867]=23460,o[5870]=23468,o[5869]=23468,o[5872]=23476,o[5871]=23476,o[5874]=23484,o[5873]=23484,o[5876]=23492,o[5875]=23492,o[5878]=23500,o[5877]=23500,o[5880]=23508,o[5879]=23508,o[5882]=23516,o[5881]=23516,o[5884]=23524,o[5883]=23524,o[5886]=23532,o[5885]=23532,o[5888]=23540,o[5887]=23540,o[5890]=23548,o[5889]=23548,o[5892]=23556,o[5891]=23556,o[5894]=23564,o[5893]=23564,o[5896]=23572,o[5895]=23572,o[5898]=23580,o[5897]=23580,o[5900]=23588,o[5899]=23588,o[5902]=23596,o[5901]=23596,o[5904]=23604,o[5903]=23604,be=P+-40|0,Me=S+8|0,Me=Me&7|0?0-Me&7:0,je=S+Me|0,Me=be-Me|0,o[5835]=je,o[5832]=Me,o[je+4>>2]=Me|1,o[S+be+4>>2]=40,o[5836]=o[5951];while(0);if(h=o[5832]|0,h>>>0>oe>>>0)return Me=h-oe|0,o[5832]=Me,be=o[5835]|0,je=be+oe|0,o[5835]=je,o[je+4>>2]=Me|1,o[be+4>>2]=oe|3,be=be+8|0,Re=m,be|0}return be=Pr()|0,o[be>>2]=12,be=0,Re=m,be|0}function wn(l){l=l|0;var h=0,d=0,x=0,b=0,S=0,P=0,B=0,V=0;if(l){d=l+-8|0,b=o[5833]|0,l=o[l+-4>>2]|0,h=l&-8,V=d+h|0;do if(l&1)B=d,P=d;else{if(x=o[d>>2]|0,!(l&3)||(P=d+(0-x)|0,S=x+h|0,P>>>0<b>>>0))return;if((o[5834]|0)==(P|0)){if(l=V+4|0,h=o[l>>2]|0,(h&3|0)!=3){B=P,h=S;break}o[5831]=S,o[l>>2]=h&-2,o[P+4>>2]=S|1,o[P+S>>2]=S;return}if(d=x>>>3,x>>>0<256)if(l=o[P+8>>2]|0,h=o[P+12>>2]|0,(h|0)==(l|0)){o[5829]=o[5829]&~(1<<d),B=P,h=S;break}else{o[l+12>>2]=h,o[h+8>>2]=l,B=P,h=S;break}b=o[P+24>>2]|0,l=o[P+12>>2]|0;do if((l|0)==(P|0)){if(h=P+16|0,d=h+4|0,l=o[d>>2]|0,l)h=d;else if(l=o[h>>2]|0,!l){l=0;break}for(;;)if(x=l+20|0,d=o[x>>2]|0,d)l=d,h=x;else if(x=l+16|0,d=o[x>>2]|0,d)l=d,h=x;else break;o[h>>2]=0}else B=o[P+8>>2]|0,o[B+12>>2]=l,o[l+8>>2]=B;while(0);if(b){if(h=o[P+28>>2]|0,d=23620+(h<<2)|0,(o[d>>2]|0)==(P|0)){if(o[d>>2]=l,!l){o[5830]=o[5830]&~(1<<h),B=P,h=S;break}}else if(B=b+16|0,o[((o[B>>2]|0)==(P|0)?B:b+20|0)>>2]=l,!l){B=P,h=S;break}o[l+24>>2]=b,h=P+16|0,d=o[h>>2]|0,d|0&&(o[l+16>>2]=d,o[d+24>>2]=l),h=o[h+4>>2]|0,h?(o[l+20>>2]=h,o[h+24>>2]=l,B=P,h=S):(B=P,h=S)}else B=P,h=S}while(0);if(!(P>>>0>=V>>>0)&&(l=V+4|0,x=o[l>>2]|0,!!(x&1))){if(x&2)o[l>>2]=x&-2,o[B+4>>2]=h|1,o[P+h>>2]=h,b=h;else{if((o[5835]|0)==(V|0)){if(V=(o[5832]|0)+h|0,o[5832]=V,o[5835]=B,o[B+4>>2]=V|1,(B|0)!=(o[5834]|0))return;o[5834]=0,o[5831]=0;return}if((o[5834]|0)==(V|0)){V=(o[5831]|0)+h|0,o[5831]=V,o[5834]=P,o[B+4>>2]=V|1,o[P+V>>2]=V;return}b=(x&-8)+h|0,d=x>>>3;do if(x>>>0<256)if(h=o[V+8>>2]|0,l=o[V+12>>2]|0,(l|0)==(h|0)){o[5829]=o[5829]&~(1<<d);break}else{o[h+12>>2]=l,o[l+8>>2]=h;break}else{S=o[V+24>>2]|0,l=o[V+12>>2]|0;do if((l|0)==(V|0)){if(h=V+16|0,d=h+4|0,l=o[d>>2]|0,l)h=d;else if(l=o[h>>2]|0,!l){d=0;break}for(;;)if(x=l+20|0,d=o[x>>2]|0,d)l=d,h=x;else if(x=l+16|0,d=o[x>>2]|0,d)l=d,h=x;else break;o[h>>2]=0,d=l}else d=o[V+8>>2]|0,o[d+12>>2]=l,o[l+8>>2]=d,d=l;while(0);if(S|0){if(l=o[V+28>>2]|0,h=23620+(l<<2)|0,(o[h>>2]|0)==(V|0)){if(o[h>>2]=d,!d){o[5830]=o[5830]&~(1<<l);break}}else if(x=S+16|0,o[((o[x>>2]|0)==(V|0)?x:S+20|0)>>2]=d,!d)break;o[d+24>>2]=S,l=V+16|0,h=o[l>>2]|0,h|0&&(o[d+16>>2]=h,o[h+24>>2]=d),l=o[l+4>>2]|0,l|0&&(o[d+20>>2]=l,o[l+24>>2]=d)}}while(0);if(o[B+4>>2]=b|1,o[P+b>>2]=b,(B|0)==(o[5834]|0)){o[5831]=b;return}}if(l=b>>>3,b>>>0<256){d=23356+(l<<1<<2)|0,h=o[5829]|0,l=1<<l,h&l?(h=d+8|0,l=o[h>>2]|0):(o[5829]=h|l,l=d,h=d+8|0),o[h>>2]=B,o[l+12>>2]=B,o[B+8>>2]=l,o[B+12>>2]=d;return}l=b>>>8,l?b>>>0>16777215?x=31:(P=(l+1048320|0)>>>16&8,V=l<<P,S=(V+520192|0)>>>16&4,V=V<<S,x=(V+245760|0)>>>16&2,x=14-(S|P|x)+(V<<x>>>15)|0,x=b>>>(x+7|0)&1|x<<1):x=0,l=23620+(x<<2)|0,o[B+28>>2]=x,o[B+20>>2]=0,o[B+16>>2]=0,h=o[5830]|0,d=1<<x;e:do if(!(h&d))o[5830]=h|d,o[l>>2]=B,o[B+24>>2]=l,o[B+12>>2]=B,o[B+8>>2]=B;else{l=o[l>>2]|0;t:do if((o[l+4>>2]&-8|0)!=(b|0)){for(x=b<<((x|0)==31?0:25-(x>>>1)|0);d=l+16+(x>>>31<<2)|0,h=o[d>>2]|0,!!h;)if((o[h+4>>2]&-8|0)==(b|0)){l=h;break t}else x=x<<1,l=h;o[d>>2]=B,o[B+24>>2]=l,o[B+12>>2]=B,o[B+8>>2]=B;break e}while(0);P=l+8|0,V=o[P>>2]|0,o[V+12>>2]=B,o[P>>2]=B,o[B+8>>2]=V,o[B+12>>2]=l,o[B+24>>2]=0}while(0);if(V=(o[5837]|0)+-1|0,o[5837]=V,!(V|0)){for(l=23772;l=o[l>>2]|0,l;)l=l+8|0;o[5837]=-1}}}}function as(l,h){l=l|0,h=h|0;var d=0;return l?(d=nn(h,l)|0,(h|l)>>>0>65535&&(d=((d>>>0)/(l>>>0)|0|0)==(h|0)?d:-1)):d=0,l=on(d)|0,!l||!(o[l+-4>>2]&3)||L(l|0,0,d|0)|0,l|0}function Ko(l,h,d,x){return l=l|0,h=h|0,d=d|0,x=x|0,d=l+d>>>0,Vt(h+x+(d>>>0<l>>>0|0)>>>0|0),d|0|0}function Xr(l,h,d,x){return l=l|0,h=h|0,d=d|0,x=x|0,x=h-x-(d>>>0>l>>>0|0)>>>0,Vt(x|0),l-d>>>0|0|0}function Ys(l){return l=l|0,(l?31-(Bn(l^l-1)|0)|0:32)|0}function Ds(l,h,d,x,b){l=l|0,h=h|0,d=d|0,x=x|0,b=b|0;var S=0,P=0,B=0,V=0,$=0,X=0,oe=0,ne=0,ue=0,Te=0;if(X=l,V=h,$=V,P=d,ne=x,B=ne,!$)return S=(b|0)!=0,B?S?(o[b>>2]=l|0,o[b+4>>2]=h&0,ne=0,b=0,Vt(ne|0),b|0):(ne=0,b=0,Vt(ne|0),b|0):(S&&(o[b>>2]=(X>>>0)%(P>>>0),o[b+4>>2]=0),ne=0,b=(X>>>0)/(P>>>0)>>>0,Vt(ne|0),b|0);S=(B|0)==0;do if(P){if(!S){if(S=(Bn(B|0)|0)-(Bn($|0)|0)|0,S>>>0<=31){oe=S+1|0,B=31-S|0,h=S-31>>31,P=oe,l=X>>>(oe>>>0)&h|$<<B,h=$>>>(oe>>>0)&h,S=0,B=X<<B;break}return b?(o[b>>2]=l|0,o[b+4>>2]=V|h&0,ne=0,b=0,Vt(ne|0),b|0):(ne=0,b=0,Vt(ne|0),b|0)}if(S=P-1|0,S&P|0){B=(Bn(P|0)|0)+33-(Bn($|0)|0)|0,Te=64-B|0,oe=32-B|0,V=oe>>31,ue=B-32|0,h=ue>>31,P=B,l=oe-1>>31&$>>>(ue>>>0)|($<<oe|X>>>(B>>>0))&h,h=h&$>>>(B>>>0),S=X<<Te&V,B=($<<Te|X>>>(ue>>>0))&V|X<<oe&B-33>>31;break}return b|0&&(o[b>>2]=S&X,o[b+4>>2]=0),(P|0)==1?(ue=V|h&0,Te=l|0|0,Vt(ue|0),Te|0):(Te=Ys(P|0)|0,ue=$>>>(Te>>>0)|0,Te=$<<32-Te|X>>>(Te>>>0)|0,Vt(ue|0),Te|0)}else{if(S)return b|0&&(o[b>>2]=($>>>0)%(P>>>0),o[b+4>>2]=0),ue=0,Te=($>>>0)/(P>>>0)>>>0,Vt(ue|0),Te|0;if(!X)return b|0&&(o[b>>2]=0,o[b+4>>2]=($>>>0)%(B>>>0)),ue=0,Te=($>>>0)/(B>>>0)>>>0,Vt(ue|0),Te|0;if(S=B-1|0,!(S&B))return b|0&&(o[b>>2]=l|0,o[b+4>>2]=S&$|h&0),ue=0,Te=$>>>((Ys(B|0)|0)>>>0),Vt(ue|0),Te|0;if(S=(Bn(B|0)|0)-(Bn($|0)|0)|0,S>>>0<=30){h=S+1|0,B=31-S|0,P=h,l=$<<B|X>>>(h>>>0),h=$>>>(h>>>0),S=0,B=X<<B;break}return b?(o[b>>2]=l|0,o[b+4>>2]=V|h&0,ue=0,Te=0,Vt(ue|0),Te|0):(ue=0,Te=0,Vt(ue|0),Te|0)}while(0);if(!P)$=B,V=0,B=0;else{oe=d|0|0,X=ne|x&0,$=Ko(oe|0,X|0,-1,-1)|0,d=Ue()|0,V=B,B=0;do x=V,V=S>>>31|V<<1,S=B|S<<1,x=l<<1|x>>>31|0,ne=l>>>31|h<<1|0,Xr($|0,d|0,x|0,ne|0)|0,Te=Ue()|0,ue=Te>>31|((Te|0)<0?-1:0)<<1,B=ue&1,l=Xr(x|0,ne|0,ue&oe|0,(((Te|0)<0?-1:0)>>31|((Te|0)<0?-1:0)<<1)&X|0)|0,h=Ue()|0,P=P-1|0;while(P|0);$=V,V=0}return P=0,b|0&&(o[b>>2]=l,o[b+4>>2]=h),ue=(S|0)>>>31|($|P)<<1|(P<<1|S>>>31)&0|V,Te=(S<<1|0)&-2|B,Vt(ue|0),Te|0}function Xs(l,h,d,x){l=l|0,h=h|0,d=d|0,x=x|0;var b=0,S=0;return S=Re,Re=Re+16|0,b=S|0,Ds(l,h,d,x,b)|0,Re=S,Vt(o[b+4>>2]|0),o[b>>2]|0|0}function It(l,h,d){return l=l|0,h=h|0,d=d|0,(d|0)<32?(Vt(h>>>d|0),l>>>d|(h&(1<<d)-1)<<32-d):(Vt(0),h>>>d-32|0)}function Rt(l,h,d){return l=l|0,h=h|0,d=d|0,(d|0)<32?(Vt(h<<d|(l&(1<<d)-1<<32-d)>>>32-d|0),l<<d):(Vt(l<<d-32|0),0)}function Kr(l,h){return l=+l,h=+h,l!=l?+h:h!=h?+l:+pn(+l,+h)}function rl(l){return l=+l,l>=0?+ke(l+.5):+xn(l-.5)}function Ks(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0;if((d|0)>=8192)return yi(l|0,h|0,d|0)|0,l|0;if(S=l|0,b=l+d|0,(l&3)==(h&3)){for(;l&3;){if(!d)return S|0;ce[l>>0]=ce[h>>0]|0,l=l+1|0,h=h+1|0,d=d-1|0}for(d=b&-4|0,x=d-64|0;(l|0)<=(x|0);)o[l>>2]=o[h>>2],o[l+4>>2]=o[h+4>>2],o[l+8>>2]=o[h+8>>2],o[l+12>>2]=o[h+12>>2],o[l+16>>2]=o[h+16>>2],o[l+20>>2]=o[h+20>>2],o[l+24>>2]=o[h+24>>2],o[l+28>>2]=o[h+28>>2],o[l+32>>2]=o[h+32>>2],o[l+36>>2]=o[h+36>>2],o[l+40>>2]=o[h+40>>2],o[l+44>>2]=o[h+44>>2],o[l+48>>2]=o[h+48>>2],o[l+52>>2]=o[h+52>>2],o[l+56>>2]=o[h+56>>2],o[l+60>>2]=o[h+60>>2],l=l+64|0,h=h+64|0;for(;(l|0)<(d|0);)o[l>>2]=o[h>>2],l=l+4|0,h=h+4|0}else for(d=b-4|0;(l|0)<(d|0);)ce[l>>0]=ce[h>>0]|0,ce[l+1>>0]=ce[h+1>>0]|0,ce[l+2>>0]=ce[h+2>>0]|0,ce[l+3>>0]=ce[h+3>>0]|0,l=l+4|0,h=h+4|0;for(;(l|0)<(b|0);)ce[l>>0]=ce[h>>0]|0,l=l+1|0,h=h+1|0;return S|0}function L(l,h,d){l=l|0,h=h|0,d=d|0;var x=0,b=0,S=0,P=0;if(S=l+d|0,h=h&255,(d|0)>=67){for(;l&3;)ce[l>>0]=h,l=l+1|0;for(x=S&-4|0,P=h|h<<8|h<<16|h<<24,b=x-64|0;(l|0)<=(b|0);)o[l>>2]=P,o[l+4>>2]=P,o[l+8>>2]=P,o[l+12>>2]=P,o[l+16>>2]=P,o[l+20>>2]=P,o[l+24>>2]=P,o[l+28>>2]=P,o[l+32>>2]=P,o[l+36>>2]=P,o[l+40>>2]=P,o[l+44>>2]=P,o[l+48>>2]=P,o[l+52>>2]=P,o[l+56>>2]=P,o[l+60>>2]=P,l=l+64|0;for(;(l|0)<(x|0);)o[l>>2]=P,l=l+4|0}for(;(l|0)<(S|0);)ce[l>>0]=h,l=l+1|0;return S-d|0}function c(l){return l=+l,l>=0?+ke(l+.5):+xn(l-.5)}function _(l){l=l|0;var h=0,d=0,x=0;return x=_n()|0,d=o[De>>2]|0,h=d+l|0,(l|0)>0&(h|0)<(d|0)|(h|0)<0?(ha(h|0)|0,Ce(12),-1):(h|0)>(x|0)&&!(dr(h|0)|0)?(Ce(12),-1):(o[De>>2]=h,d|0)}return{___uremdi3:Xs,_bitshift64Lshr:It,_bitshift64Shl:Rt,_calloc:as,_cellAreaKm2:Za,_cellAreaM2:ya,_cellAreaRads2:Il,_compact:au,_destroyLinkedPolygon:el,_edgeLengthKm:qa,_edgeLengthM:lc,_emscripten_replace_memory:ja,_exactEdgeLengthKm:Ll,_exactEdgeLengthM:Cr,_exactEdgeLengthRads:kl,_experimentalH3ToLocalIj:wa,_experimentalLocalIjToH3:Xo,_free:wn,_geoToH3:Ya,_getDestinationH3IndexFromUnidirectionalEdge:Yo,_getH3IndexesFromUnidirectionalEdge:To,_getH3UnidirectionalEdge:os,_getH3UnidirectionalEdgeBoundary:Ja,_getH3UnidirectionalEdgesFromHexagon:zl,_getOriginH3IndexFromUnidirectionalEdge:Bl,_getPentagonIndexes:fi,_getRes0Indexes:El,_h3Distance:Au,_h3GetBaseCell:ps,_h3GetFaces:va,_h3GetResolution:xA,_h3IndexesAreNeighbors:Ls,_h3IsPentagon:$r,_h3IsResClassIII:wA,_h3IsValid:ou,_h3Line:bA,_h3LineSize:$t,_h3SetToLinkedGeo:Gr,_h3ToCenterChild:hi,_h3ToChildren:ri,_h3ToGeo:Qs,_h3ToGeoBoundary:ms,_h3ToParent:Dl,_h3UnidirectionalEdgeIsValid:hc,_hexAreaKm2:Zo,_hexAreaM2:ac,_hexRing:Se,_i64Subtract:Xr,_kRing:fa,_kRingDistances:wl,_llvm_minnum_f64:Kr,_llvm_round_f64:rl,_malloc:on,_maxFaceCount:cc,_maxH3ToChildrenSize:Ac,_maxKringSize:Ha,_maxPolyfillSize:Ve,_maxUncompactSize:uc,_memcpy:Ks,_memset:L,_numHexagons:su,_pentagonIndexCount:Ka,_pointDistKm:or,_pointDistM:Br,_pointDistRads:nr,_polyfill:At,_res0IndexCount:bl,_round:c,_sbrk:_,_sizeOfCoordIJ:Hi,_sizeOfGeoBoundary:cu,_sizeOfGeoCoord:fc,_sizeOfGeoPolygon:fu,_sizeOfGeofence:hu,_sizeOfH3Index:dh,_sizeOfLinkedGeoPolygon:Zs,_uncompact:Ws,establishStackSpace:$a,stackAlloc:Ee,stackRestore:Is,stackSave:jo}}(Xi,Pn,Oe);e.___uremdi3=ye.___uremdi3,e._bitshift64Lshr=ye._bitshift64Lshr,e._bitshift64Shl=ye._bitshift64Shl,e._calloc=ye._calloc,e._cellAreaKm2=ye._cellAreaKm2,e._cellAreaM2=ye._cellAreaM2,e._cellAreaRads2=ye._cellAreaRads2,e._compact=ye._compact,e._destroyLinkedPolygon=ye._destroyLinkedPolygon,e._edgeLengthKm=ye._edgeLengthKm,e._edgeLengthM=ye._edgeLengthM;var ot=e._emscripten_replace_memory=ye._emscripten_replace_memory;e._exactEdgeLengthKm=ye._exactEdgeLengthKm,e._exactEdgeLengthM=ye._exactEdgeLengthM,e._exactEdgeLengthRads=ye._exactEdgeLengthRads,e._experimentalH3ToLocalIj=ye._experimentalH3ToLocalIj,e._experimentalLocalIjToH3=ye._experimentalLocalIjToH3,e._free=ye._free,e._geoToH3=ye._geoToH3,e._getDestinationH3IndexFromUnidirectionalEdge=ye._getDestinationH3IndexFromUnidirectionalEdge,e._getH3IndexesFromUnidirectionalEdge=ye._getH3IndexesFromUnidirectionalEdge,e._getH3UnidirectionalEdge=ye._getH3UnidirectionalEdge,e._getH3UnidirectionalEdgeBoundary=ye._getH3UnidirectionalEdgeBoundary,e._getH3UnidirectionalEdgesFromHexagon=ye._getH3UnidirectionalEdgesFromHexagon,e._getOriginH3IndexFromUnidirectionalEdge=ye._getOriginH3IndexFromUnidirectionalEdge,e._getPentagonIndexes=ye._getPentagonIndexes,e._getRes0Indexes=ye._getRes0Indexes,e._h3Distance=ye._h3Distance,e._h3GetBaseCell=ye._h3GetBaseCell,e._h3GetFaces=ye._h3GetFaces,e._h3GetResolution=ye._h3GetResolution,e._h3IndexesAreNeighbors=ye._h3IndexesAreNeighbors,e._h3IsPentagon=ye._h3IsPentagon,e._h3IsResClassIII=ye._h3IsResClassIII,e._h3IsValid=ye._h3IsValid,e._h3Line=ye._h3Line,e._h3LineSize=ye._h3LineSize,e._h3SetToLinkedGeo=ye._h3SetToLinkedGeo,e._h3ToCenterChild=ye._h3ToCenterChild,e._h3ToChildren=ye._h3ToChildren,e._h3ToGeo=ye._h3ToGeo,e._h3ToGeoBoundary=ye._h3ToGeoBoundary,e._h3ToParent=ye._h3ToParent,e._h3UnidirectionalEdgeIsValid=ye._h3UnidirectionalEdgeIsValid,e._hexAreaKm2=ye._hexAreaKm2,e._hexAreaM2=ye._hexAreaM2,e._hexRing=ye._hexRing,e._i64Subtract=ye._i64Subtract,e._kRing=ye._kRing,e._kRingDistances=ye._kRingDistances,e._llvm_minnum_f64=ye._llvm_minnum_f64,e._llvm_round_f64=ye._llvm_round_f64,e._malloc=ye._malloc,e._maxFaceCount=ye._maxFaceCount,e._maxH3ToChildrenSize=ye._maxH3ToChildrenSize,e._maxKringSize=ye._maxKringSize,e._maxPolyfillSize=ye._maxPolyfillSize,e._maxUncompactSize=ye._maxUncompactSize,e._memcpy=ye._memcpy,e._memset=ye._memset,e._numHexagons=ye._numHexagons,e._pentagonIndexCount=ye._pentagonIndexCount,e._pointDistKm=ye._pointDistKm,e._pointDistM=ye._pointDistM,e._pointDistRads=ye._pointDistRads,e._polyfill=ye._polyfill,e._res0IndexCount=ye._res0IndexCount,e._round=ye._round,e._sbrk=ye._sbrk,e._sizeOfCoordIJ=ye._sizeOfCoordIJ,e._sizeOfGeoBoundary=ye._sizeOfGeoBoundary,e._sizeOfGeoCoord=ye._sizeOfGeoCoord,e._sizeOfGeoPolygon=ye._sizeOfGeoPolygon,e._sizeOfGeofence=ye._sizeOfGeofence,e._sizeOfH3Index=ye._sizeOfH3Index,e._sizeOfLinkedGeoPolygon=ye._sizeOfLinkedGeoPolygon,e._uncompact=ye._uncompact,e.establishStackSpace=ye.establishStackSpace;var gt=e.stackAlloc=ye.stackAlloc,Lt=e.stackRestore=ye.stackRestore,qt=e.stackSave=ye.stackSave;if(e.asm=ye,e.cwrap=re,e.setValue=U,e.getValue=H,e.getTempRet0=C,$n){rs($n)||($n=s($n));{Zn();var Kt=function(K){K.byteLength&&(K=new Uint8Array(K)),Ye.set(K,k),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Ei()},En=function(){A($n,Kt,function(){throw"could not load memory initializer "+$n})},hn=Ur($n);if(hn)Kt(hn.buffer);else if(e.memoryInitializerRequest){var an=function(){var K=e.memoryInitializerRequest,W=K.response;if(K.status!==200&&K.status!==0){var ee=Ur(e.memoryInitializerRequestURL);if(ee)W=ee.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+K.status+", retrying "+$n),En();return}}Kt(W)};e.memoryInitializerRequest.response?setTimeout(an,0):e.memoryInitializerRequest.addEventListener("load",an)}else En()}}var Dn;Zr=function K(){Dn||xr(),Dn||(Zr=K)};function xr(K){if(Ar>0||(jn(),Ar>0))return;function W(){Dn||(Dn=!0,!q&&(Lr(),St(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),ln()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),W()},1)):W()}e.run=xr;function fn(K){throw e.onAbort&&e.onAbort(K),K+="",a(K),y(K),q=!0,"abort("+K+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=fn,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return xr(),t}(typeof zt=="object"?zt:{}),Fn="number",kp=Fn,Kn=Fn,hr=Fn,ea=Fn,Dr=Fn,w1e=[["sizeOfH3Index",Fn],["sizeOfGeoCoord",Fn],["sizeOfGeoBoundary",Fn],["sizeOfGeoPolygon",Fn],["sizeOfGeofence",Fn],["sizeOfLinkedGeoPolygon",Fn],["sizeOfCoordIJ",Fn],["h3IsValid",kp,[Kn,hr]],["geoToH3",Kn,[Fn,Fn,ea]],["h3ToGeo",null,[Kn,hr,Dr]],["h3ToGeoBoundary",null,[Kn,hr,Dr]],["maxKringSize",Fn,[Fn]],["kRing",null,[Kn,hr,Fn,Dr]],["kRingDistances",null,[Kn,hr,Fn,Dr,Dr]],["hexRing",null,[Kn,hr,Fn,Dr]],["maxPolyfillSize",Fn,[Dr,ea]],["polyfill",null,[Dr,ea,Dr]],["h3SetToLinkedGeo",null,[Dr,Fn,Dr]],["destroyLinkedPolygon",null,[Dr]],["compact",Fn,[Dr,Dr,Fn]],["uncompact",Fn,[Dr,Fn,Dr,Fn,ea]],["maxUncompactSize",Fn,[Dr,Fn,ea]],["h3IsPentagon",kp,[Kn,hr]],["h3IsResClassIII",kp,[Kn,hr]],["h3GetBaseCell",Fn,[Kn,hr]],["h3GetResolution",Fn,[Kn,hr]],["maxFaceCount",Fn,[Kn,hr]],["h3GetFaces",null,[Kn,hr,Dr]],["h3ToParent",Kn,[Kn,hr,ea]],["h3ToChildren",null,[Kn,hr,ea,Dr]],["h3ToCenterChild",Kn,[Kn,hr,ea]],["maxH3ToChildrenSize",Fn,[Kn,hr,ea]],["h3IndexesAreNeighbors",kp,[Kn,hr,Kn,hr]],["getH3UnidirectionalEdge",Kn,[Kn,hr,Kn,hr]],["getOriginH3IndexFromUnidirectionalEdge",Kn,[Kn,hr]],["getDestinationH3IndexFromUnidirectionalEdge",Kn,[Kn,hr]],["h3UnidirectionalEdgeIsValid",kp,[Kn,hr]],["getH3IndexesFromUnidirectionalEdge",null,[Kn,hr,Dr]],["getH3UnidirectionalEdgesFromHexagon",null,[Kn,hr,Dr]],["getH3UnidirectionalEdgeBoundary",null,[Kn,hr,Dr]],["h3Distance",Fn,[Kn,hr,Kn,hr]],["h3Line",Fn,[Kn,hr,Kn,hr,Dr]],["h3LineSize",Fn,[Kn,hr,Kn,hr]],["experimentalH3ToLocalIj",Fn,[Kn,hr,Kn,hr,Dr]],["experimentalLocalIjToH3",Fn,[Kn,hr,Dr,Dr]],["hexAreaM2",Fn,[ea]],["hexAreaKm2",Fn,[ea]],["edgeLengthM",Fn,[ea]],["edgeLengthKm",Fn,[ea]],["pointDistM",Fn,[Dr,Dr]],["pointDistKm",Fn,[Dr,Dr]],["pointDistRads",Fn,[Dr,Dr]],["cellAreaM2",Fn,[Kn,hr]],["cellAreaKm2",Fn,[Kn,hr]],["cellAreaRads2",Fn,[Kn,hr]],["exactEdgeLengthM",Fn,[Kn,hr]],["exactEdgeLengthKm",Fn,[Kn,hr]],["exactEdgeLengthRads",Fn,[Kn,hr]],["numHexagons",Fn,[ea]],["getRes0Indexes",null,[Dr]],["res0IndexCount",Fn],["getPentagonIndexes",null,[Fn,Dr]],["pentagonIndexCount",Fn]],dn={};w1e.forEach(function(e){dn[e[0]]=zt.cwrap.apply(zt,e)});var Cf=16,Fo=4,L8=4,lh=8,_o=dn.sizeOfH3Index(),bv=dn.sizeOfGeoCoord(),L7=dn.sizeOfGeoBoundary(),b1e=dn.sizeOfGeoPolygon(),Ag=dn.sizeOfGeofence(),E1e=dn.sizeOfLinkedGeoPolygon(),D7=dn.sizeOfCoordIJ(),Aa={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function kd(t){if(typeof t!="number"||t<0||t>15||Math.floor(t)!==t)throw new Error("Invalid resolution: "+t)}var T1e=/[^0-9a-fA-F]/;function kr(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||T1e.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),Cf),n=parseInt(t.substring(t.length-8),Cf);return[n,e]}function D8(t){if(t>=0)return t.toString(Cf);t=t&2147483647;var e=R7(8,t.toString(Cf)),n=(parseInt(e[0],Cf)+8).toString(Cf);return e=n+e.substring(1),e}function Ev(t,e){return D8(e)+R7(8,D8(t))}function R7(t,e){for(var n=t-e.length,r="",i=0;i<n;i++)r+="0";return r=r+e,r}function R8(t,e,n){for(var r=t.length,i=zt._calloc(r,bv),s=n?1:0,A=n?0:1,a=0;a<r*2;a+=2)zt.HEAPF64.set([t[a/2][s],t[a/2][A]].map(Tv),i/lh+a);return zt.HEAPU32.set([r,i],e/Fo),e}function S1e(t,e){var n=t.length-1,r=zt._calloc(b1e),i=0,s=i+Ag,A=s+Fo;R8(t[0],r+i,e);var a;if(n>0){a=zt._calloc(n,Ag);for(var y=0;y<n;y++)R8(t[y+1],a+Ag*y,e)}return zt.setValue(r+s,n,"i32"),zt.setValue(r+A,a,"i32"),r}function M1e(t){var e=0,n=e+Ag,r=n+Fo,i=Fo;zt._free(zt.getValue(t+e+i,"i8*"));var s=zt.getValue(t+n,"i32");if(s>0){for(var A=zt.getValue(t+r,"i32"),a=0;a<s;a++)zt._free(zt.getValue(A+Ag*a+i,"i8*"));zt._free(A)}zt._free(t)}function B7(t){var e=zt.getTempRet0();return[t,e]}function Ld(t){var e=B7(t),n=e[0],r=e[1];return r?Ev(n,r):null}function z7(t,e){e===void 0&&(e=0);var n=zt.getValue(t+Fo*e*2,"i32"),r=zt.getValue(t+Fo*(e*2+1),"i32");return r?Ev(n,r):null}function C1e(t,e,n){zt.HEAPU32.set(kr(t),e/Fo+2*n)}function hA(t,e){for(var n=[],r=0;r<e;r++){var i=z7(t,r);i!==null&&n.push(i)}return n}function m4(t,e){for(var n=e.length,r=0;r<n;r++)C1e(e[r],t,r)}function B8(t,e){var n=zt._calloc(1,bv);return zt.HEAPF64.set([t,e].map(Tv),n/lh),n}function v2(t){return U7(zt.getValue(t,"double"))}function y4(t){return[v2(t),v2(t+lh)]}function O7(t){return[v2(t+lh),v2(t)]}function F7(t,e,n){for(var r=zt.getValue(t,"i32"),i=t+lh,s=[],A=e?O7:y4,a=0;a<r*2;a+=2)s.push(A(i+lh*a));return n&&s.push(s[0]),s}function P1e(t,e){for(var n=[],r=e?O7:y4,i,s,A,a;t;){for(n.push(i=[]),s=zt.getValue(t,"i8*");s;){for(i.push(A=[]),a=zt.getValue(s,"i8*");a;)A.push(r(a)),a=zt.getValue(a+lh*2,"i8*");e&&A.push(A[0]),s=zt.getValue(s+L8*2,"i8*")}t=zt.getValue(t+L8*2,"i8*")}return n}function I1e(t){return{i:zt.getValue(t,"i32"),j:zt.getValue(t+Fo,"i32")}}function k1e(t,e){var n=e.i,r=e.j;zt.setValue(t,n,"i32"),zt.setValue(t+Fo,r,"i32")}function L1e(t,e){for(var n=[],r=0;r<e;r++){var i=zt.getValue(t+Fo*r,"i32");i>=0&&n.push(i)}return n}function N7(t){var e=kr(t),n=e[0],r=e[1];return!!dn.h3IsValid(n,r)}function D1e(t){var e=kr(t),n=e[0],r=e[1];return!!dn.h3IsPentagon(n,r)}function R1e(t){var e=kr(t),n=e[0],r=e[1];return!!dn.h3IsResClassIII(n,r)}function B1e(t){var e=kr(t),n=e[0],r=e[1];return dn.h3GetBaseCell(n,r)}function z1e(t){var e=kr(t),n=e[0],r=e[1],i=dn.maxFaceCount(n,r),s=zt._malloc(Fo*i);dn.h3GetFaces(n,r,s);var A=L1e(s,i);return zt._free(s),A}function O1e(t){var e=kr(t),n=e[0],r=e[1];return dn.h3IsValid(n,r)?dn.h3GetResolution(n,r):-1}function F1e(t,e,n){var r=zt._malloc(bv);zt.HEAPF64.set([t,e].map(Tv),r/lh);var i=Ld(dn.geoToH3(r,n));return zt._free(r),i}function N1e(t){var e=zt._malloc(bv),n=kr(t),r=n[0],i=n[1];dn.h3ToGeo(r,i,e);var s=y4(e);return zt._free(e),s}function U1e(t,e){var n=zt._malloc(L7),r=kr(t),i=r[0],s=r[1];dn.h3ToGeoBoundary(i,s,n);var A=F7(n,e,e);return zt._free(n),A}function V1e(t,e){var n=kr(t),r=n[0],i=n[1];return Ld(dn.h3ToParent(r,i,e))}function G1e(t,e){if(!N7(t))return[];var n=kr(t),r=n[0],i=n[1],s=dn.maxH3ToChildrenSize(r,i,e),A=zt._calloc(s,_o);dn.h3ToChildren(r,i,e,A);var a=hA(A,s);return zt._free(A),a}function j1e(t,e){var n=kr(t),r=n[0],i=n[1];return Ld(dn.h3ToCenterChild(r,i,e))}function $1e(t,e){var n=kr(t),r=n[0],i=n[1],s=dn.maxKringSize(e),A=zt._calloc(s,_o);dn.kRing(r,i,e,A);var a=hA(A,s);return zt._free(A),a}function H1e(t,e){var n=kr(t),r=n[0],i=n[1],s=dn.maxKringSize(e),A=zt._calloc(s,_o),a=zt._calloc(s,Fo);dn.kRingDistances(r,i,e,A,a);for(var y=[],w=0;w<e+1;w++)y.push([]);for(var M=0;M<s*2;M+=2){var C=zt.getValue(A+Fo*M,"i32"),k=zt.getValue(A+Fo*(M+1),"i32"),U=zt.getValue(a+Fo*(M/2),"i32");(C!==0||k!==0)&&y[U].push(Ev(C,k))}return zt._free(A),zt._free(a),y}function W1e(t,e){var n=e===0?1:6*e,r=zt._calloc(n,_o),i=dn.hexRing.apply(dn,kr(t).concat([e],[r]));if(i!==0)throw zt._free(r),new Error("Failed to get hexRing (encountered a pentagon?)");var s=hA(r,n);return zt._free(r),s}function Q1e(t,e,n){if(kd(e),n=!!n,t.length===0||t[0].length===0)return[];typeof t[0][0]=="number"&&(t=[t]);var r=S1e(t,n),i=dn.maxPolyfillSize(r,e),s=zt._calloc(i,_o);dn.polyfill(r,e,s);var A=hA(s,i);return zt._free(s),M1e(r),A}function q1e(t,e){if(!t||!t.length)return[];var n=t.length,r=zt._calloc(n,_o);m4(r,t);var i=zt._calloc(E1e),s=i;dn.h3SetToLinkedGeo(r,n,i);var A=P1e(i,e);return dn.destroyLinkedPolygon(s),zt._free(s),zt._free(r),A}function Z1e(t){if(!t||!t.length)return[];var e=t.length,n=zt._calloc(e,_o);m4(n,t);var r=zt._calloc(e,_o),i=dn.compact(n,r,e);if(i!==0)throw zt._free(n),zt._free(r),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var s=hA(r,e);return zt._free(n),zt._free(r),s}function Y1e(t,e){if(kd(e),!t||!t.length)return[];var n=t.length,r=zt._calloc(n,_o);m4(r,t);var i=dn.maxUncompactSize(r,n,e),s=zt._calloc(i,_o),A=dn.uncompact(r,n,s,i,e);if(A!==0)throw zt._free(r),zt._free(s),new Error("Failed to uncompact (bad resolution?)");var a=hA(s,i);return zt._free(r),zt._free(s),a}function X1e(t,e){var n=kr(t),r=n[0],i=n[1],s=kr(e),A=s[0],a=s[1];return!!dn.h3IndexesAreNeighbors(r,i,A,a)}function K1e(t,e){var n=kr(t),r=n[0],i=n[1],s=kr(e),A=s[0],a=s[1];return Ld(dn.getH3UnidirectionalEdge(r,i,A,a))}function J1e(t){var e=kr(t),n=e[0],r=e[1];return Ld(dn.getOriginH3IndexFromUnidirectionalEdge(n,r))}function eye(t){var e=kr(t),n=e[0],r=e[1];return Ld(dn.getDestinationH3IndexFromUnidirectionalEdge(n,r))}function tye(t){var e=kr(t),n=e[0],r=e[1];return!!dn.h3UnidirectionalEdgeIsValid(n,r)}function nye(t){var e=kr(t),n=e[0],r=e[1],i=2,s=zt._calloc(i,_o);dn.getH3IndexesFromUnidirectionalEdge(n,r,s);var A=hA(s,i);return zt._free(s),A}function rye(t){var e=kr(t),n=e[0],r=e[1],i=6,s=zt._calloc(i,_o);dn.getH3UnidirectionalEdgesFromHexagon(n,r,s);var A=hA(s,i);return zt._free(s),A}function iye(t,e){var n=zt._malloc(L7),r=kr(t),i=r[0],s=r[1];dn.getH3UnidirectionalEdgeBoundary(i,s,n);var A=F7(n,e);return zt._free(n),A}function sye(t,e){var n=kr(t),r=n[0],i=n[1],s=kr(e),A=s[0],a=s[1];return dn.h3Distance(r,i,A,a)}function oye(t,e){var n=kr(t),r=n[0],i=n[1],s=kr(e),A=s[0],a=s[1],y=dn.h3LineSize(r,i,A,a);if(y<0)throw new Error("Line cannot be calculated");var w=zt._calloc(y,_o);dn.h3Line(r,i,A,a,w);var M=hA(w,y);return zt._free(w),M}function aye(t,e){var n=zt._malloc(D7),r=dn.experimentalH3ToLocalIj.apply(dn,kr(t).concat(kr(e),[n])),i=I1e(n);switch(zt._free(n),r){case 0:return i;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}}function lye(t,e){if(!e||typeof e.i!="number"||typeof e.j!="number")throw new Error("Coordinates must be provided as an {i, j} object");var n=zt._malloc(D7),r=zt._malloc(_o);k1e(n,e);var i=dn.experimentalLocalIjToH3.apply(dn,kr(t).concat([n],[r])),s=z7(r);if(zt._free(n),zt._free(r),i!==0)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return s}function Aye(t,e,n){var r=B8(t[0],t[1]),i=B8(e[0],e[1]),s;switch(n){case Aa.m:s=dn.pointDistM(r,i);break;case Aa.km:s=dn.pointDistKm(r,i);break;case Aa.rads:s=dn.pointDistRads(r,i);break;default:s=null}if(zt._free(r),zt._free(i),s===null)throw new Error("Unknown unit: "+n);return s}function uye(t,e){var n=kr(t),r=n[0],i=n[1];switch(e){case Aa.m2:return dn.cellAreaM2(r,i);case Aa.km2:return dn.cellAreaKm2(r,i);case Aa.rads2:return dn.cellAreaRads2(r,i);default:throw new Error("Unknown unit: "+e)}}function cye(t,e){var n=kr(t),r=n[0],i=n[1];switch(e){case Aa.m:return dn.exactEdgeLengthM(r,i);case Aa.km:return dn.exactEdgeLengthKm(r,i);case Aa.rads:return dn.exactEdgeLengthRads(r,i);default:throw new Error("Unknown unit: "+e)}}function hye(t,e){switch(kd(t),e){case Aa.m2:return dn.hexAreaM2(t);case Aa.km2:return dn.hexAreaKm2(t);default:throw new Error("Unknown unit: "+e)}}function fye(t,e){switch(kd(t),e){case Aa.m:return dn.edgeLengthM(t);case Aa.km:return dn.edgeLengthKm(t);default:throw new Error("Unknown unit: "+e)}}function dye(t){kd(t);var e=B7(dn.numHexagons(t)),n=e[0],r=e[1];return r?r*Math.pow(2,32)+n:n}function pye(){var t=dn.res0IndexCount(),e=zt._malloc(_o*t);dn.getRes0Indexes(e);var n=hA(e,t);return zt._free(e),n}function gye(t){kd(t);var e=dn.pentagonIndexCount(),n=zt._malloc(_o*e);dn.getPentagonIndexes(t,n);var r=hA(n,e);return zt._free(n),r}function Tv(t){return t*Math.PI/180}function U7(t){return t*180/Math.PI}const mye=Object.freeze(Object.defineProperty({__proto__:null,UNITS:Aa,cellArea:uye,compact:Z1e,degsToRads:Tv,edgeLength:fye,exactEdgeLength:cye,experimentalH3ToLocalIj:aye,experimentalLocalIjToH3:lye,geoToH3:F1e,getDestinationH3IndexFromUnidirectionalEdge:eye,getH3IndexesFromUnidirectionalEdge:nye,getH3UnidirectionalEdge:K1e,getH3UnidirectionalEdgeBoundary:iye,getH3UnidirectionalEdgesFromHexagon:rye,getOriginH3IndexFromUnidirectionalEdge:J1e,getPentagonIndexes:gye,getRes0Indexes:pye,h3Distance:sye,h3GetBaseCell:B1e,h3GetFaces:z1e,h3GetResolution:O1e,h3IndexToSplitLong:kr,h3IndexesAreNeighbors:X1e,h3IsPentagon:D1e,h3IsResClassIII:R1e,h3IsValid:N7,h3Line:oye,h3SetToMultiPolygon:q1e,h3ToCenterChild:j1e,h3ToChildren:G1e,h3ToGeo:N1e,h3ToGeoBoundary:U1e,h3ToParent:V1e,h3UnidirectionalEdgeIsValid:tye,hexArea:hye,hexRing:W1e,kRing:$1e,kRingDistances:H1e,numHexagons:dye,pointDist:Aye,polyfill:Q1e,radsToDegs:U7,splitLongToh3Index:Ev,uncompact:Y1e},Symbol.toStringTag,{value:"Module"})),yye=BU(mye);var em=yye,Sv="Feature",V7="FeatureCollection",x2="Polygon",_4="MultiPolygon";function G7(t){for(var e=null,n=0;n<t.length;n++)if(e!==null)for(var r=0;r<t[n].length;r++)e.push(t[n][r]);else e=t[n];return Array.from(new Set(e))}function _ye(t){for(var e=0,n=0,r=0,i=t[0],s=0;s<i.length;s++)e+=i[s][0],n+=i[s][1],r++;return[e/r,n/r]}function vye(t,e){var n=t.features;if(!n)throw new Error("No features found");return G7(n.map(function(r){return j7(r,e)}))}function j7(t,e,n){n===void 0&&(n={});var r=t.type,i=t.geometry,s=i&&i.type;if(r===V7)return vye(t,e);if(r!==Sv)throw new Error("Unhandled type: "+r);if(s!==x2&&s!==_4)throw new Error("Unhandled geometry type: "+s);var A=s===x2?[i.coordinates]:i.coordinates;return G7(A.map(function(a){var y=em.polyfill(a,e,!0);if(y.length||!n.ensureOutput)return y;var w=_ye(a),M=w[0],C=w[1];return[em.geoToH3(C,M,e)]}))}function $7(t,e){e===void 0&&(e={});var n=[em.h3ToGeoBoundary(t,!0)];return{type:Sv,id:t,properties:e,geometry:{type:x2,coordinates:n}}}function xye(t,e){e===void 0&&(e={});var n=em.h3SetToMultiPolygon(t,!0),r=n.length>1,i=r?_4:x2,s=r?n:n[0]||[];return{type:Sv,properties:e,geometry:{type:i,coordinates:s}}}function wye(t,e){e===void 0&&(e={});var n=t.map(function(r){return[em.h3ToGeoBoundary(r,{geoJson:!0})]});return{type:Sv,properties:e,geometry:{type:_4,coordinates:n}}}function bye(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],s=e?e(i):{};n.push($7(i,s))}return{type:V7,features:n}}var Eye={featureToH3Set:j7,h3ToFeature:$7,h3SetToFeature:xye,h3SetToMultiPolygonFeature:wye,h3SetToFeatureCollection:bye},z8=Eye;function Tye({curOption:t}){const[e,n]=rt.useState(null),[r,i]=rt.useState({}),[s,A]=rt.useState([]),[a,y]=rt.useState({}),[w,M]=rt.useState({type:"FeatureCollection",features:[]}),[C,k]=rt.useState({}),[U,H]=rt.useState(!1),q=rt.useCallback(({object:Z})=>{if(!Z){n(null),i({}),A([]);return}if(!(t>1)){if(U)n(null),i({}),A(Z.properties.DU_ID);else{const J=z8.h3ToFeature(Z.hexId),re={};for(const de of Z.properties.DURgs){const _e=T6[de],fe=k8(J,_e.geometry);re[_e.properties.DU_ID]=m8(fe)/m8(J)}i(re),n(Z.hexId)}return!0}},[a,U,t]),se=rt.useCallback(({object:Z},J)=>{if(Z.properties.DU_ID==s)return M({type:"FeatureCollection",features:[]}),k({}),y({}),H(!1),!0;if(Z.properties.GroundwaterVar==null)return;if(J.srcEvent.shiftKey)return y(fe=>({...fe,[Z.hexId]:Z.properties.DURgs})),!0;H(!0),n(null),i({}),A(Z.properties.DU_ID),y({});const re={...a,[Z.hexId]:Z.properties.DURgs};y(re);const de={},_e={type:"FeatureCollection",features:[]};for(const fe in re)for(const Fe of re[fe]){const We=T6[Fe],qe=z8.h3ToFeature(fe),Ke=k8(qe,We.geometry);_e.features.push({...Ke,properties:{...We.properties}}),de[We.properties.DU_ID]={...We.properties}}return k(de),M(_e),!0},[a,s,U]);return{hoveredHex:e,clickedHexes:a,hoveredGeos:r,selectedGeoJSON:w,selectedGeos:C,hoveredGeoActive:s,onHover:q,onClick:se,selectionFinalized:U}}const sb=t=>!!(t.properties||{}).DU_ID;function Sye({slide:t,curScenario:e,speedyCounter:n,curOption:r}){const i=rt.useRef(),s=rt.useRef(),A=rt.useRef(),a=rt.useRef({});return rt.useEffect(()=>{i.current=document.querySelector("#main-tooltip"),A.current=document.querySelector("#secondary-tooltip")},[]),{getTooltip:rt.useCallback(({object:w})=>{if(!w){a.current&&(sb(a.current)?A.current.classList.remove("active"):(A.current.classList.remove("active"),i.current.classList.remove("active")),a.current=w),r>1&&(A.current.classList.remove("active"),i.current.classList.remove("active"));return}a.current&&sb(a.current)&&A.current.classList.remove("active");const M=Uy(n);r<=1&&sb(w)?(i.current.classList.add("active"),i.current.innerHTML=s.current,A.current.classList.add("active"),A.current.innerHTML=`      ${w.properties.DU_ID?`<div><b>Region ID</b> ${w.properties.DU_ID}</div>`:""}
      <div><b>Scenario Demand</b> ${e>-1?w.properties.Demand[pr[e]][n]:w.properties.DemandBaseline[n]}</div>
      <div><b>Scen. Unmet Demand</b> ${e>-1?-w.properties.UnmetDemand[pr[e]][n]:-w.properties.UnmetDemandBaseline[n]}</div>
      <div><b>Difference in Unmet Demand</b> ${w.properties.UnmetDemand[pr[e]][n]-w.properties.UnmetDemandBaseline[n]}</div>
      <div><b>Land Holder</b> ${o8[w.properties.LandUse.constructor===Array?w.properties.LandUse[0]:w.properties.LandUse]}</div>
  `):(i.current.classList.add("active"),w.properties.GroundwaterVar==null?i.current.innerHTML=s.current=`        <div><i>${M.toLocaleString("default",{month:"long"})} ${M.toLocaleString("default",{year:"numeric"})}</i></div>
        <div><i>${w.properties.DU_ID?e>-1?a8[e]:"Historical Baseline":""}</i></div>
        ${w.properties.DU_ID?`<b>Region ID</b> ${w.properties.DU_ID}</div>`:""}
        ${w.properties.elem_id?`<b>Elem ID</b> ${w.properties.elem_id}</div>`:""}
        ${w.properties.Groundwater?`<div><b>Groundwater</b> ${w.properties.Groundwater[n]}</div>`:""}
        ${w.properties.DU_ID?`
          <div><b>Scenario Demand</b> ${e>-1?w.properties.Demand[pr[e]][n]:w.properties.DemandBaseline[n]}</div>
          <div><b>Scen. Unmet Demand</b> ${e>-1?-w.properties.UnmetDemand[pr[e]][n]:-w.properties.UnmetDemandBaseline[n]}</div>
          <div><b>Difference in Unmet Demand</b> ${w.properties.UnmetDemand[pr[e]][n]-w.properties.UnmetDemandBaseline[n]}</div>`:""}
      `:i.current.innerHTML=s.current=`        <div><i>${M.toLocaleString("default",{month:"long"})} ${M.toLocaleString("default",{year:"numeric"})}</i></div>
        <div><i>${e>-1?a8[e]:"Historical Baseline"}</i></div>
      ${w.properties.DU_ID?`<b>Region ID</b> ${w.properties.DU_ID}</div>`:""}
      ${w.properties.Groundwater?`<div><b>Groundwater</b> ${w.properties.Groundwater[n]}</div>`:""}
      <div><b>Scenario Demand</b> ${e>-1?w.properties.Demand[pr[e]][n]:w.properties.DemandBaseline[n]}</div>
      <div><b>Scen. Unmet Demand</b> ${e>-1?-w.properties.UnmetDemand[pr[e]][n]:-w.properties.UnmetDemandBaseline[n]}</div>
      <div><b>Difference in Unmet Demand</b> ${w.properties.UnmetDemand[pr[e]][n]-w.properties.UnmetDemandBaseline[n]}</div>
      <div><b>Land Holder</b> ${o8[w.properties.LandUse.constructor===Array?w.properties.LandUse[0]:w.properties.LandUse]}</div>
      ${w.properties.GroundwaterVar?`<div><b>Variance (GW)</b> ${w.properties.GroundwaterVar[n]}
      </div>`:""}
      ${w.properties.UnmetDemandVar?`<div><b>Var. (Scen. UnmetDem)</b> ${w.properties.UnmetDemandVar[pr[e]][n]}
      </div>`:""}
      ${w.properties.UnmetDemandVar?`<div><b>Var. (Difference)</b> ${Q3(w.properties.UnmetDemandBaselineVar[n],w.properties.UnmetDemandVar[pr[e]][n])}
      </div>`:""}
      ${w.properties.DURgs?`<div><b>Demand Regions</b> ${w.properties.DURgs.join(", ")}</div>`:""}
      ${w.properties.GWRgs?`<div><b>GW Regions</b> ${w.properties.GWRgs.join(", ")}</div>`:""}
  `),a.current=w},[t,n,e,r])}}const Mye=bi().domain([0,1]).range(cS(0,oh.length));class Cye extends W2{initializeState(e,n){if(!n.isEnabled(this))return;const r=this.getAttributeManager();n.opts.pattern&&r.add({colorFrames:{size:4,accessor:"getColor",shaderAttributes:{colorFrames:{divisor:0},instanceColorFrames:{divisor:1}}}})}getShaders(){return{inject:{"fs:#decl":"uniform vec4 tint;","fs:DECKGL_FILTER_COLOR":`
          color *= tint;
        `},getUniforms:function(e,n){if(!e)return{}}}}updateState(e){const{tint:n=[1,0,0,1]}=e.props;for(const r of this.getModels())r.setUniforms({tint:n})}getSubLayerProps(){const{tint:e=[1,0,0,1]}=params.props;return{tint:e}}}class H7 extends fr{initializeState(){super.initializeState();const{zoom:e}=this.context.viewport,n=Object.keys(this.props.data).map(i=>parseInt(i)),r=bi().domain([0,1]).range(n)(u0(e));this.setState({hextiles:this.props.data,resRange:n,lastResolution:r}),this.createPolygons()}createPolygons(){const{hextiles:e,lastResolution:n}=this.state,r=[],i=e[n],[s,A]=this.props.offset;Object.keys(i).forEach(a=>{const y=i[a],w=m2(g2(a)[0],Oo.km)*.48,[M,C]=wv(a);let k=0;for(let[U,H,q]of this.props.getValue?oh[Mye(this.props.getValue({properties:y}))]:[[0,0,0]])r.push({position:[C+(U+s)*w/(111.32*Math.cos(M*Math.PI/180)),M+(H+A)*w/110.574,(typeof this.props.getElevation=="function"?this.props.getElevation({properties:y}):this.props.getElevation)+q*1e6+1500],properties:y,polyIdx:k++,hexID:a})}),this.setState({...this.state,polygons:r})}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState(e){const{resRange:n,lastResolution:r}=this.state,{props:i,oldProps:s,changeFlags:A,context:a}=e;if(i.getValue!=s.getValue||i.getElevation!=s.getElevation||A.viewportChanged){const y=bi().domain([0,1]).range(n)(u0(a.viewport.zoom));(i.getValue!=s.getValue||y!=r||i.getElevation!=s.getElevation)&&(this.setState({...this.state,lastResolution:y}),this.createPolygons())}}renderLayers(){const{polygons:e,lastResolution:n,resRange:r}=this.state,i=md(n,Oo.km)/md(5,Oo.km);return[new Sm(this.getSubLayerProps({data:this.props.data,mesh:this.props.mesh,texture:this.props.texture,textureParameters:this.props.textureParameters,getPosition:this.props.getPosition,getColor:this.props.getColor,getOrientation:this.props.getOrientation,getScale:this.props.getScale,getTranslation:this.props.getTranslation,getTransformMatrix:this.props.getTransformMatrix,sizeScale:this.props.sizeScale,_useMeshColors:this.props._useMeshColors,_instanced:this.props._instanced,wireframe:this.props.wireframe,material:this.props.material,transitions:this.props.transitions,updateTriggers:this.props.updateTriggers,id:"BillboardIconHexTileLayer",data:e,iconAtlas:this.props.iconAtlas,iconMapping:{marker:{x:0,y:0,width:128,height:128,mask:!1}},sizeUnits:"meters",getIcon:s=>"marker",getPosition:s=>s.position,sizeScale:4e3*i,extensions:[new Cye]}))]}}H7.layerName="BillboardIconHexTileLayer";H7.defaultProps={...fr.defaultProps,...T0.defaultProps,thicknessRange:[.7,.9],getValue:null,getElevation:()=>0,offset:[0,0]};function Pye(){const[t,e]=rt.useState(1),n=rt.useRef(),r=Tye({curOption:t}),i={data:Tm,curOption:t,curScenario:0,setCurOption:e,...r},s=Iye(),A=qme(i),{curViewState:a,transitioning:y}=Qme(i),{getTooltip:w}=Sye({...i,...A}),M={...i,...A,transitioning:y};rt.useLayoutEffect(()=>{Ia(n.current).attr("width",400).attr("height",500).call(function(H){H.append("g").call(i8.arcmapLegend().vtitle("Groundwater").utitle("Variance").scale(d7).size(150).x(400-180).y(500-300))}).call(function(H){H.append("g").call(i8.simpleLegend().title("Difference w/ Baseline").size(250).height(20).scale(r4).x(400-280).y(500-100))})},[]);const C=[new p4(M),new v4({...M,...s}),new x4({...M,...s})];return Ir.createElement(Ir.Fragment,null,Ir.createElement(One,{layers:C,effects:[Kge],initialViewState:a,controller:!0,getTooltip:w},Ir.createElement(hre,{reuseMaps:!0,mapLib:Nne,mapStyle:wre,preventStyleDiffing:!0})),Ir.createElement(Wme,{counter:A.speedyCounter,displayMonth:!1,dataset:"averageDemandBaseline"}),Ir.createElement(kye,{...M,...s}),Ir.createElement("svg",{className:"legend-area",ref:n}))}class v4 extends fr{initializeState(){super.initializeState(),this.setState({data0:Us(this.props.data,e=>e.LandUse[0]==0),data1:Us(this.props.data,e=>e.LandUse[0]==1),data2:Us(this.props.data,e=>e.LandUse[0]==2),data3:Us(this.props.data,e=>e.LandUse[0]==3)})}renderLayers(){const{data:e,curOption:n,speedyCounter:r,hoveredHex:i,clickedHexes:s,hoveredGeoActive:A,hoveredGeos:a,selectedGeoJSON:y,selectedGeos:w,selectionFinalized:M}=this.props;return[new Li({id:"Groundwater",data:e,thicknessRange:[0,1],getFillColor:C=>Nge(C.properties.Groundwater[r],C.properties.GroundwaterVar[r]),opacity:1,visible:n==0||n==1,updateTriggers:{getFillColor:[r]}}),new Li({id:"DiffRings",data:e,thicknessRange:[.4,.65],getFillColor:C=>n==0?Uge(C.properties.UnmetDemand[pr[0]][r]-C.properties.UnmetDemandBaseline[r],Q3(C.properties.UnmetDemandBaselineVar[r],C.properties.UnmetDemandVar[pr[0]][r]),!0):A0(C.properties.UnmetDemand[pr[0]][r]-C.properties.UnmetDemandBaseline[r],!0),getValue:C=>n==0?1:l7(Q3(C.properties.UnmetDemandBaselineVar[r],C.properties.UnmetDemandVar[pr[0]][r])),raised:!0,visible:n==0||n==1,getElevation:C=>C.hexId in s?5e3:0,getLineWidth:C=>C.hexId in s?100:0,stroked:!0,extruded:!1,lineJointRounded:!0,getLineColor:[255,255,255,200],getOffset:-.5,extensions:[new lv({offset:!0})],opacity:1,updateTriggers:{getFillColor:[n,r],getValue:[n,r],getElevation:[M],getLineWidth:[M]}}),new Yi({id:"ScenarioUnmet",data:e,loaders:[Ii],mesh:"assets/drop.obj",raised:!0,getColor:C=>[255,130,35,(1-Bge(C.properties.UnmetDemandBaselineVar[r]))*200+55],getValue:C=>Jc(C.properties.UnmetDemand[pr[0]][r]),visible:n==0||n==1,sizeScale:3e3,opacity:1,updateTriggers:{getTranslation:[r]}}),new _l({id:"GeoJsonExt",data:y,opacity:.75,extruded:!0,getElevation:C=>y7(C.properties.UnmetDemand[pr[0]][r]),visible:n==0||n==1,pickable:!0,getLineWidth:100,getFillColor:C=>{let k=Nh(C.properties.UnmetDemand[pr[0]][r]);if(k[3]==0&&(k=[255,255,255,255]),C.properties.DU_ID==A){const U=[0,0,.5019607843137255,.5019607843137255];return[(U[0]*U[3]+k[0]/255*(1-U[3]))*255,(U[1]*U[3]+k[1]/255*(1-U[3]))*255,(U[2]*U[3]+k[2]/255*(1-U[3]))*255,(U[3]*U[3]+k[3]/255*(1-U[3]))*255]}return k},updateTriggers:{getFillColor:[n,r,A,M],getElevation:[n,r]}}),new _l({id:"GeoJsonGray",data:s0,opacity:.3,stroked:!1,getFillColor:C=>!M&&C.properties.DU_ID in a?[100,100,100,205*a[C.properties.DU_ID]+50]:[0,0,0,0],visible:!M&&n==0||n==1,updateTriggers:{getFillColor:[i,M]}}),new _l({id:"GeoJsonColor",data:{type:"FeatureCollection",features:s0.features.filter(C=>C.properties.DU_ID in w)},opacity:.3,pickable:!0,visible:n==0||n==1,getLineWidth:C=>C.properties.DU_ID==A?100:20,getFillColor:C=>{if(C.properties.DU_ID==A){const k=[0,0,.5019607843137255,.5019607843137255],U=Nh(n>-1?w[C.properties.DU_ID].UnmetDemand[pr[0]][r]:w[C.properties.DU_ID].UnmetDemandBaseline[r]);return[(k[0]*k[3]+U[0]/255*(1-k[3]))*255,(k[1]*k[3]+U[1]/255*(1-k[3]))*255,(k[2]*k[3]+U[2]/255*(1-k[3]))*255,(k[3]*k[3]+U[3]/255*(1-k[3]))*255]}return C.properties.DU_ID in w?Nh(n>-1?w[C.properties.DU_ID].UnmetDemand[pr[0]][r]:w[C.properties.DU_ID].UnmetDemandBaseline[r]):[0,0,0,0]},getLineColor:[0,0,0],updateTriggers:{getFillColor:[A,n,M],getLineWidth:[A]}}),new Li({id:"HoveringTiles",data:e,thicknessRange:[0,1],getFillColor:[0,0,0,0],pickable:!M,autoHighlight:!M,visible:n==0||n==1})]}}v4.layerName="CentralValleyWaterSlide";v4.defaultProps={...fr.defaultProps,autoHighlight:!0};function Iye(){return{}}function kye({curOption:t,setCurOption:e,speedyCounter:n,setSpeedyCounter:r,playing:i,setPlaying:s}){return Ir.createElement(Ir.Fragment,null,Ir.createElement("div",{className:"styled-input"},Ir.createElement("button",{onClick:()=>{s(A=>!A)}},i?"Pause":"Play"),Ir.createElement("div",null,Ir.createElement("input",{style:{width:"10ch",display:"block"},type:"number",value:n,onChange:function(A){r(parseInt(A.target.value))}}),Ir.createElement("input",{onChange:function(A){s(!1),r(parseInt(A.target.value))},onInput:function(A){r(parseInt(A.target.value))},value:n,style:{width:"40vw",display:"block"},type:"range",min:"0",max:"1199",id:"myRange"}))),Ir.createElement("div",{onChange:function(A){e(A.target.value)},style:{position:"absolute",display:"block",bottom:"60%",right:"0",transform:"translateY(50%)"}},Ir.createElement("div",null,Ir.createElement("input",{type:"radio",name:"option",value:"0",checked:t==0}),Ir.createElement("label",{htmlFor:"option1"},"Option 1")),Ir.createElement("div",null,Ir.createElement("input",{type:"radio",name:"option",value:"1",checked:t==1}),Ir.createElement("label",{htmlFor:"option2"},"Option 2")),Ir.createElement("div",null,Ir.createElement("input",{type:"radio",name:"option",value:"2",checked:t==2}),Ir.createElement("label",{htmlFor:"option2"},"GW")),Ir.createElement("div",null,Ir.createElement("input",{type:"radio",name:"option",value:"3",checked:t==3}),Ir.createElement("label",{htmlFor:"option2"},"Scenario Unmet Dem")),Ir.createElement("div",null,Ir.createElement("input",{type:"radio",name:"option",value:"4",checked:t==4}),Ir.createElement("label",{htmlFor:"option2"},"Difference"))))}class x4 extends fr{initializeState(){super.initializeState()}renderLayers(){const{data:e,curOption:n,speedyCounter:r,hoveredHex:i,clickedHexes:s,hoveredGeoActive:A,hoveredGeos:a,selectedGeoJSON:y,selectedGeos:w,selectionFinalized:M}=this.props;return[new _l({id:"GroundwaterGeo",data:IAe,opacity:1,stroked:!1,filled:!0,getFillColor:C=>Object.values({...jA(h7(C.properties.Groundwater[r])),opacity:255}),visible:n==2,updateTriggers:{getFillColor:[r]},pickable:!0,autoHighlight:!0}),new _l({id:"UDemGeo",data:s0,opacity:1,stroked:!1,filled:!0,getFillColor:C=>Object.values({...jA(f7(C.properties.UnmetDemand[pr[0]][r])),opacity:255}),visible:n==3,updateTriggers:{getFillColor:[r]},pickable:!0,autoHighlight:!0}),new _l({id:"DemDiffGeo",data:s0,opacity:1,stroked:!1,filled:!0,getFillColor:C=>Object.values({...jA(r4(C.properties.UnmetDemand[pr[0]][r]-C.properties.UnmetDemandBaseline[r])),opacity:255}),visible:n==4,updateTriggers:{getFillColor:[r]},pickable:!0,autoHighlight:!0})]}}x4.layerName="ControlMap";x4.defaultProps={...fr.defaultProps,autoHighlight:!0};const Lye=cj([{path:"/",element:Ir.createElement(Pye,null)}]);function Dye(t){qD(t).render(Ir.createElement(Ir.StrictMode,null,Ir.createElement(vj,{router:Lye})))}Dye(document.getElementById("app"));
